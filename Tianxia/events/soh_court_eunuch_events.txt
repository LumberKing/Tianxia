# Events related to Council Eunuchs
# By Silverswee(e)per

namespace = soh

# soh.5301-5400 reserved

##### Eunuch maintenance

# Eunuch maintenance - triggered by assorted events and decisions, and on_yearly_pulse
character_event = {
	id = soh.5301
	hide_window = yes
	
	is_triggered_only = yes # get_new_court_eunuch decision, assorted other places
	
	only_independent = yes
	
	trigger = {
		real_tier = emperor
		OR = {
			government = chinese_imperial_government
			government = eastern_imperial_government
		}
		
		primary_title = {
			NOT = {
				has_law = eunuch_law_0
			}
		}
	}
	
	immediate = {
		#log = "Setting up Council Eunuchs for [Root.GetBestName]!"
		
		if = {
			limit = {
				NOT = {
					any_voter = {
						has_minor_title = title_councilmember_eunuch
					}
				}
			}
			
			random_list = {
				75 = {
					trigger = {
						any_courtier = {
							can_hold_title = title_councilmember_eunuch
						}
					}
					
					any_courtier = {
						limit = {
							can_hold_title = title_councilmember_eunuch
						}
						
						score_value = { #Prioritizes selecting an interesting courtier...
							value = 10
							interesting_courtier_selection_score = yes
						}
						
						give_minor_title = title_councilmember_eunuch
					}
				}
				
				25 = {
					create_new_court_eunuch_effect = yes
					
					new_character = {
						give_minor_title = title_councilmember_eunuch
					}
				}
			}
		}
		
		if = {
			limit = {
				NOT = {
					has_law = eunuch_law_1
				}
			}
			
			if = {
				limit = {
					NOT = {
						any_voter = {
							has_minor_title = title_councilmember_eunuch_2
						}
					}
				}
				
				random_list = {
					75 = {
						trigger = {
							any_courtier = {
								can_hold_title = title_councilmember_eunuch_2
							}
						}
						
						any_courtier = {
							limit = {
								can_hold_title = title_councilmember_eunuch_2
							}
							
							score_value = { #Prioritizes selecting an interesting courtier...
								value = 10
								interesting_courtier_selection_score = yes
							}
							
							give_minor_title = title_councilmember_eunuch_2
						}
					}
					
					25 = {
						create_new_court_eunuch_effect = yes
						
						new_character = {
							give_minor_title = title_councilmember_eunuch_2
						}
					}
				}
			}
			
			if = {
				limit = {
					NOT = {
						any_voter = {
							has_minor_title = title_councilmember_eunuch_3
						}
					}
				}
				
				random_list = {
					75 = {
						trigger = {
							any_courtier = {
								can_hold_title = title_councilmember_eunuch_3
							}
						}
						
						any_courtier = {
							limit = {
								can_hold_title = title_councilmember_eunuch_3
							}
							
							score_value = { #Prioritizes selecting an interesting courtier...
								value = 10
								interesting_courtier_selection_score = yes
							}
							
							give_minor_title = title_councilmember_eunuch_3
						}
					}
					
					25 = {
						create_new_court_eunuch_effect = yes
						
						new_character = {
							give_minor_title = title_councilmember_eunuch_3
						}
					}
				}
			}
			
			if = {
				limit = {
					NOT = {
						any_voter = {
							has_minor_title = title_councilmember_eunuch_4
						}
					}
				}
				
				random_list = {
					75 = {
						trigger = {
							any_courtier = {
								can_hold_title = title_councilmember_eunuch_4
							}
						}
						
						any_courtier = {
							limit = {
								can_hold_title = title_councilmember_eunuch_4
							}
							
							score_value = { #Prioritizes selecting an interesting courtier...
								value = 10
								interesting_courtier_selection_score = yes
							}
							
							give_minor_title = title_councilmember_eunuch_4
						}
					}
					
					25 = {
						create_new_court_eunuch_effect = yes
						
						new_character = {
							give_minor_title = title_councilmember_eunuch_4
						}
					}
				}
			}
			
			if = {
				limit = {
					NOT = {
						has_law = eunuch_law_2
					}
				}
			
				if = {
					limit = {
						NOT = {
							any_voter = {
								has_minor_title = title_councilmember_eunuch_5
							}
						}
					}
					
					random_list = {
						75 = {
							trigger = {
								any_courtier = {
									can_hold_title = title_councilmember_eunuch_5
								}
							}
							
							any_courtier = {
								limit = {
									can_hold_title = title_councilmember_eunuch_5
								}
								
								score_value = { #Prioritizes selecting an interesting courtier...
									value = 10
									interesting_courtier_selection_score = yes
								}
								
								give_minor_title = title_councilmember_eunuch_5
							}
						}
						
						25 = {
							create_new_court_eunuch_effect = yes
							
							new_character = {
								give_minor_title = title_councilmember_eunuch_5
							}
						}
					}
				}
				
				if = {
					limit = {
						NOT = {
							any_voter = {
								has_minor_title = title_councilmember_eunuch_6
							}
						}
					}
					
					random_list = {
						75 = {
							trigger = {
								any_courtier = {
									can_hold_title = title_councilmember_eunuch_6
								}
							}
							
							any_courtier = {
								limit = {
									can_hold_title = title_councilmember_eunuch_6
								}
								
								score_value = { #Prioritizes selecting an interesting courtier...
									value = 10
									interesting_courtier_selection_score = yes
								}
								
								give_minor_title = title_councilmember_eunuch_6
							}
						}
						
						25 = {
							create_new_court_eunuch_effect = yes
							
							new_character = {
								give_minor_title = title_councilmember_eunuch_6
							}
						}
					}
				}
				
				if = {
					limit = {
						NOT = {
							any_voter = {
								has_minor_title = title_councilmember_eunuch_7
							}
						}
					}
					
					random_list = {
						75 = {
							trigger = {
								any_courtier = {
									can_hold_title = title_councilmember_eunuch_7
								}
							}
							
							any_courtier = {
								limit = {
									can_hold_title = title_councilmember_eunuch_7
								}
								
								score_value = { #Prioritizes selecting an interesting courtier...
									value = 10
									interesting_courtier_selection_score = yes
								}
								
								give_minor_title = title_councilmember_eunuch_7
							}
						}
						
						25 = {
							create_new_court_eunuch_effect = yes
							
							new_character = {
								give_minor_title = title_councilmember_eunuch_7
							}
						}
					}
				}
				
				if = {
					limit = {
						NOT = {
							any_voter = {
								has_minor_title = title_councilmember_eunuch_8
							}
						}
					}
					
					random_list = {
						75 = {
							trigger = {
								any_courtier = {
									can_hold_title = title_councilmember_eunuch_8
								}
							}
							
							any_courtier = {
								limit = {
									can_hold_title = title_councilmember_eunuch_8
								}
								
								score_value = { #Prioritizes selecting an interesting courtier...
									value = 10
									interesting_courtier_selection_score = yes
								}
								
								give_minor_title = title_councilmember_eunuch_8
							}
						}
						
						25 = {
							create_new_court_eunuch_effect = yes
							
							new_character = {
								give_minor_title = title_councilmember_eunuch_8
							}
						}
					}
				}
				
				if = {
					limit = {
						has_law = eunuch_law_4
					}
				
					if = {
						limit = {
							can_grant_title = title_councilmember_eunuch_9
							
							NOT = {
								any_voter = {
									has_minor_title = title_councilmember_eunuch_9
								}
							}
						}
						
						random_list = {
							75 = {
								trigger = {
									any_courtier = {
										can_hold_title = title_councilmember_eunuch_9
									}
								}
								
								any_courtier = {
									limit = {
										can_hold_title = title_councilmember_eunuch_9
									}
									
									score_value = { #Prioritizes selecting an interesting courtier...
										value = 10
										interesting_courtier_selection_score = yes
									}
									
									give_minor_title = title_councilmember_eunuch_9
								}
							}
							
							25 = {
								create_new_court_eunuch_effect = yes
								
								new_character = {
									give_minor_title = title_councilmember_eunuch_9
								}
							}
						}
					}
					
					if = {
						limit = {
							can_grant_title = title_councilmember_eunuch_10
							
							NOT = {
								any_voter = {
									has_minor_title = title_councilmember_eunuch_10
								}
							}
						}
						
						random_list = {
							75 = {
								trigger = {
									any_courtier = {
										can_hold_title = title_councilmember_eunuch_10
									}
								}
								
								any_courtier = {
									limit = {
										can_hold_title = title_councilmember_eunuch_10
									}
									
									score_value = { #Prioritizes selecting an interesting courtier...
										value = 10
										interesting_courtier_selection_score = yes
									}
									
									give_minor_title = title_councilmember_eunuch_10
								}
							}
							
							25 = {
								create_new_court_eunuch_effect = yes
								
								new_character = {
									give_minor_title = title_councilmember_eunuch_10
								}
							}
						}
					}
					
					if = {
						limit = {
							can_grant_title = title_councilmember_eunuch_11
							
							NOT = {
								any_voter = {
									has_minor_title = title_councilmember_eunuch_11
								}
							}
						}
						
						random_list = {
							75 = {
								trigger = {
									any_courtier = {
										can_hold_title = title_councilmember_eunuch_11
									}
								}
								
								any_courtier = {
									limit = {
										can_hold_title = title_councilmember_eunuch_11
									}
									
									score_value = { #Prioritizes selecting an interesting courtier...
										value = 10
										interesting_courtier_selection_score = yes
									}
									
									give_minor_title = title_councilmember_eunuch_11
								}
							}
							
							25 = {
								create_new_court_eunuch_effect = yes
								
								new_character = {
									give_minor_title = title_councilmember_eunuch_11
								}
							}
						}
					}
					
					if = {
						limit = {
							can_grant_title = title_councilmember_eunuch_12
							
							NOT = {
								any_voter = {
									has_minor_title = title_councilmember_eunuch_12
								}
							}
						}
						
						random_list = {
							75 = {
								trigger = {
									any_courtier = {
										can_hold_title = title_councilmember_eunuch_12
									}
								}
								
								any_courtier = {
									limit = {
										can_hold_title = title_councilmember_eunuch_12
									}
									
									score_value = { #Prioritizes selecting an interesting courtier...
										value = 10
										interesting_courtier_selection_score = yes
									}
									
									give_minor_title = title_councilmember_eunuch_12
								}
							}
							
							25 = {
								create_new_court_eunuch_effect = yes
								
								new_character = {
									give_minor_title = title_councilmember_eunuch_12
								}
							}
						}
					}
				}
			}
		}
	}
}

# on_yearly_pulse eunuch maintenance for the AI
character_event = {
	id = soh.5302
	hide_window = yes
	
	is_triggered_only = yes # on_yearly_pulse
	
	has_dlc = "Jade Dragon"
	has_dlc = "Conclave"
	
	only_independent = yes
	
	ai = yes
	
	trigger = {
		real_tier = emperor
		OR = {
			government = chinese_imperial_government
			government = eastern_imperial_government
		}
	}
	
	immediate = {
		character_event = { id = soh.5301 }
	}
}

# on_death (of eunuch) eunuch maintenance for the AI
character_event = {
	id = soh.5303
	hide_window = yes
	
	is_triggered_only = yes # on_death
	
	has_dlc = "Jade Dragon"
	has_dlc = "Conclave"
	
	trigger = {
		is_council_eunuch_trigger = yes
	}
	
	immediate = {
		#log = "eunuch.4 happened for [Root.GetBestName]!"
		
		if = {
			limit = {
				liege = {
					real_tier = emperor
					OR = {
						government = chinese_imperial_government
						government = eastern_imperial_government
					}
					ai = yes
				}
			}
			
			liege = {
				character_event = { id = soh.5301 }
			}
		}
	}
}



##### Eunuchs doing assorted things

### Eunuchs might take over guard regiment

# Hidden event for liege
character_event = {
	id = soh.5304
	hide_window = yes
	
	is_triggered_only = yes # on_five_year_pulse -> random_events -> council_eunuchs
	
	has_dlc = "Jade Dragon"
	has_dlc = "Conclave"
	
	only_independent = yes
	
	war = no
	
	trigger = {
		is_chinese_emperor_trigger = yes
		
		primary_title = {
			OR = {
				has_law = eunuch_law_3
				has_law = eunuch_law_4
			}
		}
		
		any_voter = {
			is_council_eunuch_trigger = yes
		}
		
		NOT = {
			has_character_modifier = ci_nuclear_option_in_effect
		}
		
		OR = {
			AND = {
				has_global_flag = yulin_guard_exists
				NOT = {
					has_global_flag = yulin_guard_eunuchs
				}
			}
			AND = {
				has_global_flag = longwu_guard_exists
				NOT = {
					has_global_flag = longwu_guard_eunuchs
				}
			}
			AND = {
				has_global_flag = shenwu_guard_exists
				NOT = {
					has_global_flag = shenwu_guard_eunuchs
				}
			}
			AND = {
				has_global_flag = shence_guard_exists
				NOT = {
					has_global_flag = shence_guard_eunuchs
				}
			}
			AND = {
				has_global_flag = pengri_guard_exists
				NOT = {
					has_global_flag = pengri_guard_eunuchs
				}
			}
			AND = {
				has_global_flag = tianwu_guard_exists
				NOT = {
					has_global_flag = tianwu_guard_eunuchs
				}
			}
			AND = {
				has_global_flag = longwei_guard_exists
				NOT = {
					has_global_flag = longwei_guard_eunuchs
				}
			}
			AND = {
				has_global_flag = shenwei_guard_exists
				NOT = {
					has_global_flag = shenwei_guard_eunuchs
				}
			}
		}
	}
	
	immediate = {
		any_voter = {
			limit = {
				is_council_eunuch_trigger = yes
			}
			
			score_value = { #Prioritizes selecting an interesting courtier...
				value = 10
				interesting_courtier_selection_score = yes
			}
			
			character_event = { id = soh.5305 } # Eunuch sees an opportunity
		}
	}
}

# Eunuch sees an opportunity
character_event = {
	id = soh.5305
	desc = EVTDESC_SOH_5305
	picture = GFX_evt_china_expansionist
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_5305 # They should serve the eunuchs!
		
		FROM = {
			character_event = { id = soh.5306 } # Inform liege of the attempt
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 100
				trait = ambitious
			}
			
			mult_modifier = {
				factor = 10
				trait = envious
			}
			
			mult_modifier = {
				factor = 10
				trait = proud
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_5305 # Actually, I think not...
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 100
				trait = content
			}
			
			mult_modifier = {
				factor = 100
				trait = humble
			}
		}
	}
}

# Liege informed of attempt - can possibly use prestige to oppose
character_event = {
	id = soh.5306
	desc = EVTDESC_SOH_5306
	picture = GFX_evt_china_expansionist
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			has_regent = no
			prestige >= 1000
		}
		
		name = EVTOPTA_SOH_5306 # I think not!
		
		scaled_prestige = {
			value = -2
			min = -1000
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 100
				is_rival = FROM
			}
			
			mult_modifier = {
				factor = 100
				trait = ambitious
			}
			
			mult_modifier = {
				factor = 10
				trait = envious
			}
			
			mult_modifier = {
				factor = 10
				trait = proud
			}
			
			mult_modifier = {
				factor = 100
				trait = paranoid
			}
		}
	}
	
	option = {
		trigger = {
			has_regent = no
		}
		
		name = EVTOPTB_SOH_5306 # Sounds good to me!
		
		FROM = {
			prestige = 1000
		}
		
		custom_tooltip = {
			text = eunuchs_get_a_guard_regiment
			
			random_list = {
				10 = {
					trigger= {
						has_global_flag = yulin_guard_exists
						NOT = {
							has_global_flag = yulin_guard_eunuchs
						}
					}
					
					set_global_flag = yulin_guard_exists
				}
				
				10 = {
					trigger = {
						has_global_flag = longwu_guard_exists
						NOT = {
							has_global_flag = longwu_guard_eunuchs
						}
					}
					
					set_global_flag = longwu_guard_eunuchs
				}
				
				10 = {
					trigger = {
						has_global_flag = shenwu_guard_exists
						NOT = {
							has_global_flag = shenwu_guard_eunuchs
						}
					}
					
					set_global_flag = shenwu_guard_eunuchs
				}
				
				10 = {
					trigger = {
						has_global_flag = shence_guard_exists
						NOT = {
							has_global_flag = shence_guard_eunuchs
						}
					}
					
					set_global_flag = shence_guard_eunuchs
				}
				
				10 = {
					trigger = {
						has_global_flag = pengri_guard_exists
						NOT = {
							has_global_flag = pengri_guard_eunuchs
						}
					}
					
					set_global_flag = pengri_guard_eunuchs
				}
				
				10 = {
					trigger = {
						has_global_flag = tianwu_guard_exists
						NOT = {
							has_global_flag = tianwu_guard_eunuchs
						}
					}
					
					set_global_flag = tianwu_guard_eunuchs
				}
				
				10 = {
					trigger = {
						has_global_flag = longwei_guard_exists
						NOT = {
							has_global_flag = longwei_guard_eunuchs
						}
					}
					
					set_global_flag = longwei_guard_eunuchs
				}
				
				10 = {
					trigger = {
						has_global_flag = shenwei_guard_exists
						NOT = {
							has_global_flag = shenwei_guard_eunuchs
						}
					}
					
					set_global_flag = shenwei_guard_eunuchs
				}
			}
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 100
				OR = {
					is_friend = FROM
					is_lover = FROM
				}
			}
			
			mult_modifier = {
				factor = 100
				trait = content
			}
			
			mult_modifier = {
				factor = 100
				trait = humble
			}
			
			mult_modifier = {
				factor = 10
				trait = trusting
			}
		}
	}
	
	option = {
		trigger = {
			has_regent = yes
		}
		
		name = EVTOPTC_SOH_5306 # I can't stop this...
		
		FROM = {
			prestige = 1000
		}
		
		custom_tooltip = {
			text = eunuchs_get_a_guard_regiment
			
			random_list = {
				10 = {
					trigger= {
						has_global_flag = yulin_guard_exists
						NOT = {
							has_global_flag = yulin_guard_eunuchs
						}
					}
					
					set_global_flag = yulin_guard_exists
				}
				
				10 = {
					trigger = {
						has_global_flag = longwu_guard_exists
						NOT = {
							has_global_flag = longwu_guard_eunuchs
						}
					}
					
					set_global_flag = longwu_guard_eunuchs
				}
				
				10 = {
					trigger = {
						has_global_flag = shenwu_guard_exists
						NOT = {
							has_global_flag = shenwu_guard_eunuchs
						}
					}
					
					set_global_flag = shenwu_guard_eunuchs
				}
				
				10 = {
					trigger = {
						has_global_flag = shence_guard_exists
						NOT = {
							has_global_flag = shence_guard_eunuchs
						}
					}
					
					set_global_flag = shence_guard_eunuchs
				}
				
				10 = {
					trigger = {
						has_global_flag = pengri_guard_exists
						NOT = {
							has_global_flag = pengri_guard_eunuchs
						}
					}
					
					set_global_flag = pengri_guard_eunuchs
				}
				
				10 = {
					trigger = {
						has_global_flag = tianwu_guard_exists
						NOT = {
							has_global_flag = tianwu_guard_eunuchs
						}
					}
					
					set_global_flag = tianwu_guard_eunuchs
				}
				
				10 = {
					trigger = {
						has_global_flag = longwei_guard_exists
						NOT = {
							has_global_flag = longwei_guard_eunuchs
						}
					}
					
					set_global_flag = longwei_guard_eunuchs
				}
				
				10 = {
					trigger = {
						has_global_flag = shenwei_guard_exists
						NOT = {
							has_global_flag = shenwei_guard_eunuchs
						}
					}
					
					set_global_flag = shenwei_guard_eunuchs
				}
			}
		}
	}
}



### Eunuchs approve of laws

# Eunuchs happy with extensive authority - inform liege
character_event = {
	id = soh.5308
	desc = EVTDESC_SOH_5308
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	has_dlc = "Jade Dragon"
	has_dlc = "Conclave"
	
	only_independent = yes # on_five_year_pulse -> random_events -> council_eunuchs
	
	trigger = {
		real_tier = emperor
		
		OR = {
			government = chinese_imperial_government
			government = eastern_imperial_government
		}
		
		primary_title = {
			OR = {
				has_law = eunuch_law_3
				has_law = eunuch_law_4
			}
		}
		
		any_voter = {
			is_council_eunuch_trigger = yes
		}
		
		NOT = {
			has_character_modifier = ci_nuclear_option_in_effect
		}
	}
	
	option = {
		name = EVTOPTA_SOH_5308 # Wait, the eunuchs can be pleased?
		
		any_voter = {
			limit = {
				is_council_eunuch_trigger = yes
			}
			
			opinion = {
				who = ROOT
				modifier = ci_eunuchs_pleased
			}
		}
	}
}



### Eunuchs gain prestige

# Eunuchs gain prestige - scaled by laws favoring them
character_event = {
	id = soh.5309
	desc = EVTDESC_SOH_5309
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes # on_five_year_pulse -> random_events -> council_eunuchs
	
	has_dlc = "Jade Dragon"
	has_dlc = "Conclave"
	
	only_independent = yes
	
	trigger = {
		real_tier = emperor
		
		OR = {
			government = chinese_imperial_government
			government = eastern_imperial_government
		}
		
		primary_title = {
			NOT = {
				has_law = eunuch_law_0
			}
		}
		
		any_voter = {
			is_council_eunuch_trigger = yes
		}
		
		NOT = {
			has_character_modifier = ci_nuclear_option_in_effect
		}
	}
	
	option = {
		name = EVTOPTA_SOH_5309 # I see...
		
		primary_title = {
			trigger_switch = {
				on_trigger = has_law
				
				eunuch_law_1 = {
					ROOT = {
						any_voter = {
							limit = {
								is_council_eunuch_trigger = yes
							}
							
							prestige = 100
						}
					}
				}
				
				eunuch_law_2 = {
					ROOT = {
						any_voter = {
							limit = {
								is_council_eunuch_trigger = yes
							}
							
							prestige = 250
						}
					}
				}
				
				eunuch_law_3 = {
					ROOT = {
						any_voter = {
							limit = {
								is_council_eunuch_trigger = yes
							}
							
							prestige = 500
						}
					}
				}
				
				eunuch_law_4 = {
					ROOT = {
						any_voter = {
							limit = {
								is_council_eunuch_trigger = yes
							}
							
							prestige = 1000
						}
					}
				}
			}
		}
	}
}



### Skilled eunuch - promote him?

# Skilled eunuch and a vacancy - promote said eunuch?
character_event = {
	id = soh.5310
	desc = EVTDESC_SOH_5310
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes # on_five_year_pulse -> random_events -> council_eunuchs
	
	has_dlc = "Jade Dragon"
	has_dlc = "Conclave"
	
	only_independent = yes
	
	trigger = {
		real_tier = emperor
		
		OR = {
			government = chinese_imperial_government
			government = eastern_imperial_government
		}
		
		primary_title = {
			NOT = {
				has_law = eunuch_law_0
			}
		}
		
		any_voter = {
			is_council_eunuch_trigger = yes
		}
		
		NOT = {
			has_character_modifier = ci_nuclear_option_in_effect
		}
		
		trigger_if = {
			limit = {
				has_law = eunuch_law_1
			}
			NOT = {
				any_voter = {
					has_minor_title = title_councilmember_eunuch
				}
			}
		}
		
		trigger_else_if = {
			limit = {
				has_law = eunuch_law_2
			}
			NAND = {
				any_voter = {
					has_minor_title = title_councilmember_eunuch
				}
				any_voter = {
					has_minor_title = title_councilmember_eunuch_2
				}
				any_voter = {
					has_minor_title = title_councilmember_eunuch_3
				}
				any_voter = {
					has_minor_title = title_councilmember_eunuch_4
				}
			}
		}
		
		trigger_else_if = {
			limit = {
				has_law = eunuch_law_3
			}
			NAND = {
				any_voter = {
					has_minor_title = title_councilmember_eunuch
				}
				any_voter = {
					has_minor_title = title_councilmember_eunuch_2
				}
				any_voter = {
					has_minor_title = title_councilmember_eunuch_3
				}
				any_voter = {
					has_minor_title = title_councilmember_eunuch_4
				}
				any_voter = {
					has_minor_title = title_councilmember_eunuch_5
				}
				any_voter = {
					has_minor_title = title_councilmember_eunuch_6
				}
				any_voter = {
					has_minor_title = title_councilmember_eunuch_7
				}
				any_voter = {
					has_minor_title = title_councilmember_eunuch_8
				}
			}
		}
		
		trigger_else = {
			NAND = {
				any_voter = {
					has_minor_title = title_councilmember_eunuch
				}
				any_voter = {
					has_minor_title = title_councilmember_eunuch_2
				}
				any_voter = {
					has_minor_title = title_councilmember_eunuch_3
				}
				any_voter = {
					has_minor_title = title_councilmember_eunuch_4
				}
				any_voter = {
					has_minor_title = title_councilmember_eunuch_5
				}
				any_voter = {
					has_minor_title = title_councilmember_eunuch_6
				}
				any_voter = {
					has_minor_title = title_councilmember_eunuch_7
				}
				any_voter = {
					has_minor_title = title_councilmember_eunuch_8
				}
				any_voter = {
					has_minor_title = title_councilmember_eunuch_9
				}
				any_voter = {
					has_minor_title = title_councilmember_eunuch_10
				}
				any_voter = {
					has_minor_title = title_councilmember_eunuch_11
				}
				any_voter = {
					has_minor_title = title_councilmember_eunuch_12
				}
			}
		}
	}
	
	immediate = {
		create_new_court_eunuch_effect = yes
		
		new_character = {
			remove_all_education_traits_effect = yes
			
			random_list = {
				20 = {
					add_trait = grey_eminence
				}
				20 = {
					add_trait = brilliant_strategist
				}
				20 = {
					add_trait = midas_touched
				}
				20 = {
					add_trait = elusive_shadow
				}
				20 = {
					add_trait = mastermind_theologian
				}
			}
			
			random_list = {
				10 = {
					change_diplomacy = 3
					change_martial = 3
				}
				10 = {
					change_diplomacy = 3
					change_stewardship = 3
				}
				10 = {
					change_diplomacy = 3
					change_intrigue = 3
				}
				10 = {
					change_diplomacy = 3
					change_learning = 3
				}
				10 = {
					change_martial = 3
					change_stewardship = 3
				}
				10 = {
					change_martial = 3
					change_intrigue = 3
				}
				10 = {
					change_martial = 3
					change_learning = 3
				}
				10 = {
					change_stewardship = 3
					change_intrigue = 3
				}
				10 = {
					change_stewardship = 3
					change_learning = 3
				}
				10 = {
					change_intrigue = 3
					change_learning = 3
				}
			}
			
			save_event_target_as = skilled_eunuch
		}
	}
	
	option = {
		name = EVTOPTA_SOH_5310 # He shall be a Council Eunuch!
		
		any_voter = {
			limit = {
				is_council_eunuch_trigger = yes
			}
			
			add_favor = event_target:skilled_eunuch
		}
		
		grant_random_court_eunuch_position_effect = yes
	}
	
	option = {
		trigger = {
			has_regent = no
		}
		
		name = EVTOPTB_SOH_5310 # He will not do!
		
		event_target:skilled_eunuch = {
			leave_court_and_die_effect = yes
		}
		
		any_voter = {
			limit = {
				is_council_eunuch_trigger = yes
			}
			
			opinion = {
				who = ROOT
				modifier = ci_eunuchs_upset
			}
		}
	}
}



### Corrupt eunuch takes money

# Hidden event for liege
character_event = {
	id = soh.5311
	hide_window = yes
	
	is_triggered_only = yes # on_bi_yearly_pulse -> random_events -> council_eunuchs
	
	has_dlc = "Jade Dragon"
	has_dlc = "Conclave"
	
	only_independent = yes
	
	trigger = {
		real_tier = emperor
		
		OR = {
			government = chinese_imperial_government
			government = eastern_imperial_government
		}
		
		primary_title = {
			OR = {
				has_law = eunuch_law_2
				has_law = eunuch_law_3
				has_law = eunuch_law_4
			}
		}
		
		any_voter = {
			is_council_eunuch_trigger = yes
		}
		
		NOT = {
			has_character_modifier = ci_nuclear_option_in_effect
		}
	}
	
	immediate = {
		any_voter = {
			limit = {
				is_council_eunuch_trigger = yes
			}
			
			score_value = { #Prioritizes selecting an interesting courtier...
				value = 10
				interesting_courtier_selection_score = yes
			}
			
			character_event = { id = soh.5312 } # Eunuch sees an opportunity
		}
	}
}

# Corrupt eunuch sees an opportunity
character_event = {
	id = soh.5312
	desc = EVTDESC_SOH_5312
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_economy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_5312 # It's my money now!
		
		FROM = {
			scaled_wealth = {
				value = -0.9
				min = -900
			}
			
			transfer_scaled_wealth = {
				to = ROOT
				value = 0.1
				min = 100
			}
			
			character_event = { id = soh.5313 } # Inform liege of the attempt
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 100
				is_rival = FROM
			}
			
			mult_modifier = {
				factor = 100
				trait = ambitious
			}
			
			mult_modifier = {
				factor = 10
				trait = envious
			}
			
			mult_modifier = {
				factor = 100
				trait = greedy
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_5312 # Actually, I think not...
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 100
				OR = {
					is_friend = FROM
					is_lover = FROM
				}
			}
			
			mult_modifier = {
				factor = 100
				trait = content
			}
			
			mult_modifier = {
				factor = 100
				trait = charitable
			}
		}
	}
}

# Liege informed - some money has disappeared
character_event = {
	id = soh.5313
	desc = EVTDESC_SOH_5313
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_economy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_5313 # But I can't do anything about it!
	}
}



### Corrupt eunuch hurst ruler's prestige

# Hidden event for liege
character_event = {
	id = soh.5314
	hide_window = yes
	
	is_triggered_only = yes # on_bi_yearly_pulse -> random_events -> council_eunuchs
	
	has_dlc = "Jade Dragon"
	has_dlc = "Conclave"
	
	only_independent = yes
	
	trigger = {
		real_tier = emperor
		
		OR = {
			government = chinese_imperial_government
			government = eastern_imperial_government
		}
		
		primary_title = {
			OR = {
				has_law = eunuch_law_2
				has_law = eunuch_law_3
				has_law = eunuch_law_4
			}
		}
		
		any_voter = {
			is_council_eunuch_trigger = yes
		}
		
		NOT = {
			has_character_modifier = ci_nuclear_option_in_effect
		}
	}
	
	immediate = {
		any_voter = {
			limit = {
				is_council_eunuch_trigger = yes
			}
			
			score_value = { #Prioritizes selecting an interesting courtier...
				value = 10
				interesting_courtier_selection_score = yes
			}
			
			character_event = { id = soh.5315 } # Eunuch sees an opportunity
		}
	}
}

# Corrupt eunuch sees an opportunity
character_event = {
	id = soh.5315
	desc = EVTDESC_SOH_5315
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_5315 # FROM deserves no respect!
		
		FROM = {
			scaled_prestige = {
				value = -1
				min = -500
			}
			
			character_event = { id = soh.5316 } # Inform liege of the attempt
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 100
				is_rival = FROM
			}
			
			mult_modifier = {
				factor = 100
				trait = ambitious
			}
			
			mult_modifier = {
				factor = 10
				trait = envious
			}
			
			mult_modifier = {
				factor = 100
				trait = proud
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_5315 # Actually, I think FROM does...
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 100
				OR = {
					is_friend = FROM
					is_lover = FROM
				}
			}
			
			mult_modifier = {
				factor = 100
				trait = content
			}
			
			mult_modifier = {
				factor = 100
				trait = humble
			}
		}
	}
}

# Liege informed - eunuch hurt prestige
character_event = {
	id = soh.5316
	desc = EVTDESC_SOH_5316
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_5316 # But I can't do anything about it!
	}
}



### Powerful eunuchs upsets the council

# Non-eunuch councillors disapprove of powerful eunuchs - liege
character_event = {
	id = soh.5317
	desc = EVTDESC_SOH_5317
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes # on_five_year_pulse -> random_events -> council_eunuchs
	
	has_dlc = "Jade Dragon"
	has_dlc = "Conclave"
	
	only_independent = yes
	
	trigger = {
		real_tier = emperor
		
		OR = {
			government = chinese_imperial_government
			government = eastern_imperial_government
		}
		
		primary_title = {
			OR = {
				has_law = eunuch_law_3
				has_law = eunuch_law_4
			}
		}
		
		any_voter = {
			is_council_eunuch_trigger = yes
		}
		
		NOT = {
			has_character_modifier = ci_nuclear_option_in_effect
		}
	}
	
	option = {
		name = EVTOPTA_SOH_5317 # Curses!
		
		any_voter = {
			limit = {
				is_council_eunuch_trigger = no
			}
			
			opinion = {
				who = ROOT
				modifier = ci_council_upset
			}
			
			if = {
				limit = {
					ai = no
				}
				character_event = { id = soh.5318 } # Inform councillor
			}
		}
	}
}

# Non-eunuch councillors disapprove of powerful eunuchs - councillor
character_event = {
	id = soh.5318
	desc = EVTDESC_SOH_5318
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_5318 # Someone should mayhaps purge them...
		
		opinion = {
			who = FROM
			modifier = ci_council_upset
		}
	}
}



### Eunuch-councillor quarrel

# Hidden event for liege
character_event = {
	id = soh.5319
	hide_window = yes
	
	is_triggered_only = yes # on_bi_yearly_pulse -> random_events -> council_eunuchs
	
	has_dlc = "Jade Dragon"
	has_dlc = "Conclave"
	
	only_independent = yes
	
	trigger = {
		real_tier = emperor
		
		OR = {
			government = chinese_imperial_government
			government = eastern_imperial_government
		}
		
		primary_title = {
			NOT = {
				has_law = eunuch_law_0
			}
		}
		
		any_voter = {
			is_council_eunuch_trigger = yes
		}
		
		NOT = {
			has_character_modifier = ci_nuclear_option_in_effect
		}
	}
	
	immediate = {
		any_voter = {
			limit = {
				is_council_eunuch_trigger = yes
				ROOT = {
					any_voter = {
						is_council_eunuch_trigger = no
						
						NOR = {
							is_friend = PREVPREV
							is_lover = PREVPREV
							is_rival = PREVPREV
						}
					}
				}
			}
			
			score_value = { #Prioritizes selecting an interesting courtier...
				value = 10
				interesting_courtier_selection_score = yes
			}
			
			save_event_target_as = quarreling_eunuch
		}
		
		any_voter = {
			limit = {
				is_council_eunuch_trigger = no
				
				NOR = {
					is_friend = event_target:quarreling_eunuch
					is_lover = event_target:quarreling_eunuch
					is_rival = event_target:quarreling_eunuch
				}
			}
			
			score_value = { #Prioritizes selecting an interesting courtier...
				value = 10
				interesting_courtier_selection_score = yes
			}
			
			character_event = { id = soh.5320 } # Inform councillor
		}
	}
}

# Inform councillor of rivalry
character_event = {
	id = soh.5320
	desc = EVTDESC_SOH_5320
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_5320 # That's it!
		
		add_rival = event_target:quarreling_eunuch
		
		FROM = {
			character_event = { id = soh.5321 } # Inform liege
		}
	}
}

# Inform liege of rivalry
character_event = {
	id = soh.5321
	desc = EVTDESC_SOH_5321
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_5321 # I see...
	}
}



### Eunuchs-other councillors quarrel

# Hidden event for liege
character_event = {
	id = soh.5322
	hide_window = yes
	
	is_triggered_only = yes # on_five_year_pulse -> random_events -> council_eunuchs
	
	has_dlc = "Jade Dragon"
	has_dlc = "Conclave"
	
	only_independent = yes
	
	trigger = {
		real_tier = emperor
		
		OR = {
			government = chinese_imperial_government
			government = eastern_imperial_government
		}
		
		primary_title = {
			NOT = {
				has_law = eunuch_law_0
			}
		}
		
		any_voter = {
			is_council_eunuch_trigger = yes
		}
		
		NOT = {
			has_character_modifier = ci_nuclear_option_in_effect
		}
	}
	
	immediate = {
		any_voter = {
			limit = {
				is_council_eunuch_trigger = yes
				ROOT = {
					NOT = {
						any_voter = {
							is_council_eunuch_trigger = no
							
							OR = {
								is_friend = PREVPREV
								is_lover = PREVPREV
							}
						}
					}
				}
			}
			
			score_value = { #Prioritizes selecting an interesting courtier...
				value = 10
				interesting_courtier_selection_score = yes
			}
			
			save_event_target_as = quarreling_eunuch
		}
		
		character_event = { id = soh.5323 } # Inform liege
	}
}

# Friendships might end and/or rivalries might form - liege
character_event = {
	id = soh.5323
	desc = EVTDESC_SOH_5323
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_5323 # I see...
		
		any_voter = {
			limit = {
				is_council_eunuch_trigger = no
			}
			
			character_event = { id = soh.5324 } # Inform the councillors
		}
	}
}

# Friendships might end and/or rivalries might form - councillors
character_event = {
	id = soh.5324
	desc = EVTDESC_SOH_5324
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_5324 # Curse those eunuchs!
		
		add_rival = event_target:quarreling_eunuch
		
		FROM = {
			any_voter = {
				limit = {
					is_council_eunuch_trigger = yes
					NOT = {
						character = event_target:quarreling_eunuch
					}
				}
				
				if = {
					limit = {
						NOR = {
							is_friend = ROOT
							is_lover = ROOT
						}
					}
					
					random = {
						chance = 50
						add_rival = ROOT
					}
				}
				
				if = { 
					limit = {
						is_friend = ROOT
					}
					
					random = {
						chance = 50
						remove_friend = ROOT
					}
				}
				
				if = { 
					limit = {
						is_lover = ROOT
					}
					
					random = {
						chance = 50
						remove_lover = ROOT
					}
				}
			}
		}
	}
}



### Eunuch friend of liege grants Favor

# Hidden event for liege
character_event = {
	id = soh.5325
	hide_window = yes
	
	is_triggered_only = yes # on_five_year_pulse -> random_events -> council_eunuchs
	
	has_dlc = "Jade Dragon"
	has_dlc = "Conclave"
	
	only_independent = yes
	
	trigger = {
		real_tier = emperor
		
		OR = {
			government = chinese_imperial_government
			government = eastern_imperial_government
		}
		
		primary_title = {
			NOT = {
				has_law = eunuch_law_0
			}
		}
		
		any_voter = {
			is_council_eunuch_trigger = yes
			is_friend = ROOT
			NOR = {
				holds_favor_on = ROOT
				owes_favor_to = ROOT
			}
		}
		
		NOT = {
			has_character_modifier = ci_nuclear_option_in_effect
		}
	}
	
	immediate = {
		any_voter = {
			limit = {
				is_council_eunuch_trigger = yes
				is_friend = ROOT
				NOR = {
					holds_favor_on = ROOT
					owes_favor_to = ROOT
				}
			}
			
			score_value = { #Prioritizes selecting an interesting courtier...
				value = 10
				interesting_courtier_selection_score = yes
			}
			
			character_event = { id = soh.5326 } # Eunuch might grant Favor
		}
	}
}

# Eunuch friend of liege might see fit to grant a Favor
character_event = {
	id = soh.5326
	desc = EVTDESC_SOH_5326
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_5326 # Of course I'll grant a Favor!
		
		FROM = {
			character_event = { id = soh.5327 }
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 10
				trait = content
			}
			
			mult_modifier = {
				factor = 10
				trait = trusting
			}
			
			mult_modifier = {
				factor = 10
				trait = humble
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_5326 # I don't owe FROM anything!
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 10
				trait = ambitious
			}
			
			mult_modifier = {
				factor = 10
				trait = proud
			}
			
			mult_modifier = {
				factor = 10
				trait = envious
			}
		}
	}
}

# Liege informed of Favor
character_event = {
	id = soh.5327
	desc = EVTDESC_SOH_5327
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_5327 # Excellent!
		
		add_favor = FROM
	}
}



### Eunuch befriends child of liege

# Hidden event for liege
character_event = {
	id = soh.5328
	hide_window = yes
	
	is_triggered_only = yes # on_bi_yearly_pulse -> random_events -> council_eunuchs
	
	has_dlc = "Jade Dragon"
	has_dlc = "Conclave"
	
	only_independent = yes
	
	trigger = {
		real_tier = emperor
		
		OR = {
			government = chinese_imperial_government
			government = eastern_imperial_government
		}
		
		primary_title = {
			NOT = {
				has_law = eunuch_law_0
			}
		}
		
		any_voter = {
			is_council_eunuch_trigger = yes
			ROOT = {
				any_child = {
					is_adult = no
					is_landed = no
					NOR = {
						is_friend = PREVPREV
						is_rival = PREVPREV
					}
				}
			}
		}
		NOT = {
			has_character_modifier = ci_nuclear_option_in_effect
		}
	}
	
	immediate = {
		any_voter = {
			limit = {
				is_council_eunuch_trigger = yes
				ROOT = {
					any_child = {
						is_adult = no
						is_landed = no
						NOR = {
						is_friend = PREVPREV
						is_rival = PREVPREV
						}
					}
				}
			}
			
			score_value = { #Prioritizes selecting an interesting courtier...
				value = 10
				interesting_courtier_selection_score = yes
			}
			
			save_event_target_as = target_eunuch
		}
		
		any_child = {
			limit = {
				is_adult = no
				is_landed = no
				NOR = {
					is_friend = event_target:target_eunuch
					is_rival = event_target:target_eunuch
				}
			}
			
			score_value = { #Prioritizes selecting an interesting courtier...
				value = 10
				interesting_courtier_selection_score = yes
			}
			
			save_event_target_as = target_child
		}
		
		event_target:target_eunuch = {
			character_event = { id = soh.5329 } # Eunuch gets event
		}
	}
}

# Eunuch approves of a child
character_event = {
	id = soh.5329
	desc = EVTDESC_SOH_5329
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_5329 # Such a nice child!
		
		add_friend = event_target:target_child
		
		FROM = {
			character_event = { id = soh.5330 }
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 10
				trait = kind
			}
			
			mult_modifier = {
				factor = 10
				trait = honest
			}
			
			mult_modifier = {
				factor = 10
				trait = humble
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_5329 # Meh...
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 10
				trait = wroth
			}
			
			mult_modifier = {
				factor = 10
				trait = proud
			}
			
			mult_modifier = {
				factor = 10
				trait = shy
			}
		}
	}
}

# Inform liege
character_event = {
	id = soh.5330
	desc = EVTDESC_SOH_5330
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_5330 # I see...
	}
}



### Eunuch rivals child of liege

# Hidden event for liege
character_event = {
	id = soh.5331
	hide_window = yes
	
	is_triggered_only = yes # on_bi_yearly_pulse -> random_events -> council_eunuchs
	
	has_dlc = "Jade Dragon"
	has_dlc = "Conclave"
	
	only_independent = yes
	
	trigger = {
		real_tier = emperor
		
		OR = {
			government = chinese_imperial_government
			government = eastern_imperial_government
		}
		
		primary_title = {
			NOT = {
				has_law = eunuch_law_0
			}
		}
		
		any_voter = {
			is_council_eunuch_trigger = yes
			ROOT = {
				any_child = {
					is_adult = no
					is_landed = no
					NOR = {
						is_friend = PREVPREV
						is_rival = PREVPREV
					}
				}
			}
		}
		NOT = {
			has_character_modifier = ci_nuclear_option_in_effect
		}
	}
	
	immediate = {
		any_voter = {
			limit = {
				is_council_eunuch_trigger = yes
				ROOT = {
					any_child = {
						is_adult = no
						is_landed = no
						NOR = {
							is_friend = PREVPREV
							is_rival = PREVPREV
						}
					}
				}
			}
			
			score_value = { #Prioritizes selecting an interesting courtier...
				value = 10
				interesting_courtier_selection_score = yes
			}
			
			save_event_target_as = target_eunuch
		}
		
		any_child = {
			limit = {
				is_adult = no
				is_landed = no
				NOR = {
					is_friend = event_target:target_eunuch
					is_rival = event_target:target_eunuch
				}
			}
			
			score_value = { #Prioritizes selecting an interesting courtier...
				value = 10
				interesting_courtier_selection_score = yes
			}
			
			save_event_target_as = target_child
		}
		
		event_target:target_eunuch = {
			character_event = { id = soh.5332 } # Eunuch gets event
		}
	}
}

# Eunuch disapproves of a child
character_event = {
	id = soh.5332
	desc = EVTDESC_SOH_5332
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_5332 # Such an annoying child!
		
		add_rival = event_target:target_child
		
		FROM = {
			character_event = { id = soh.5333 }
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 10
				trait = wroth
			}
			
			mult_modifier = {
				factor = 10
				trait = cruel
			}
			
			mult_modifier = {
				factor = 10
				trait = proud
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_5332 # Meh...
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 10
				trait = kind
			}
			
			mult_modifier = {
				factor = 10
				trait = humble
			}
			
			mult_modifier = {
				factor = 10
				trait = shy
			}
		}
	}
}

# Inform liege
character_event = {
	id = soh.5333
	desc = EVTDESC_SOH_5333
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_5333 # I see...
	}
}



### Eunuchs become more troublesome over time

# Hidden trait change event
character_event = {
	id = soh.5334
	hide_window = yes
	
	is_triggered_only = yes # on_bi_yearly_pulse -> random_events -> council_eunuchs
	
	has_dlc = "Jade Dragon"
	has_dlc = "Conclave"
	
	only_independent = yes
	
	trigger = {
		real_tier = emperor
		
		OR = {
			government = chinese_imperial_government
			government = eastern_imperial_government
		}
		
		primary_title = {
			NOT = {
				has_law = eunuch_law_0
			}
		}
		
		any_voter = {
			is_council_eunuch_trigger = yes
			NAND = {
				trait = ambitious
				trait = proud
				trait = envious
				trait = deceitful
				trait = arbitrary
			}
		}
	}
	
	immediate = {
		any_voter = {
			limit = {
				is_council_eunuch_trigger = yes
				NAND = {
					trait = ambitious
					trait = proud
					trait = envious
					trait = deceitful
					trait = arbitrary
					trait = greedy
				}
			}
			
			score_value = { #Prioritizes selecting an interesting courtier...
				value = 10
				interesting_courtier_selection_score = yes
			}
			
			random_list = {
				10 = {
					trigger = {
						NOR = {
							trait = ambitious
							trait = content
						}
					}
					
					add_trait = ambitious
				}
				
				10 = {
					trigger = {
						NOR = {
							trait = proud
							trait = humble
						}
					}
					
					add_trait = proud
				}
				
				10 = {
					trigger = {
						NOR = {
							trait = envious
							trait = kind
						}
					}
					
					add_trait = envious
				}
				
				10 = {
					trigger = {
						NOR = {
							trait = deceitful
							trait = honest
						}
					}
					
					add_trait = deceitful
				}
				
				10 = {
					trigger = {
						NOR = {
							trait = arbitrary
							trait = just
						}
					}
					
					add_trait = arbitrary
				}
				
				10 = {
					trigger = {
						NOR = {
							trait = greedy
							trait = charitable
						}
					}
					
					add_trait = greedy
				}
				
				10 = {
					trigger = {
						trait = content
					}
					
					remove_trait = content
				}
				
				10 = {
					trigger = {
						trait = humble
					}
					
					remove_trait = humble
				}
				
				10 = {
					trigger = {
						trait = kind
					}
					
					remove_trait = kind
				}
				
				10 = {
					trigger = {
						trait = honest
					}
					
					remove_trait = honest
				}
				
				10 = {
					trigger = {
						trait = just
					}
					
					remove_trait = just
				}
				
				10 = {
					trigger = {
						trait = charitable
					}
					
					remove_trait = charitable
				}
				
				50 = {
					mult_modifier = {
						factor = 1.2
						trait = content
					}
					
					mult_modifier = {
						factor = 1.2
						trait = humble
					}
					
					mult_modifier = {
						factor = 1.2
						trait = kind
					}
					
					mult_modifier = {
						factor = 1.2
						trait = honest
					}
					
					mult_modifier = {
						factor = 1.2
						trait = just
					}
					
					mult_modifier = {
						factor = 1.2
						trait = charitable
					}
					
					mult_modifier = {
						factor = 0.8
						trait = ambitious
					}
					
					mult_modifier = {
						factor = 0.8
						trait = proud
					}
					
					mult_modifier = {
						factor = 0.8
						trait = envious
					}
					
					mult_modifier = {
						factor = 0.8
						trait = deceitful
					}
					
					mult_modifier = {
						factor = 0.8
						trait = arbitrary
					}
					
					mult_modifier = {
						factor = 0.8
						trait = greedy
					}
					
					# Nothing
				}
			}
		}
	}
}



### Eunuch commander

# Hidden event for liege
character_event = {
	id = soh.5335
	hide_window = yes
	
	is_triggered_only = yes # on_five_year_pulse -> random_events -> council_eunuchs
	
	has_dlc = "Jade Dragon"
	has_dlc = "Conclave"
	
	only_independent = yes
	
	trigger = {
		primary_title = {
			OR = {
				has_law = eunuch_law_3
				has_law = eunuch_law_4
			}
		}
		
		any_voter = {
			is_council_eunuch_trigger = yes
			
			OR = {
				has_education_martial_trigger = yes
				has_lifestyle_martial_trigger = yes
				trait = brave
			}
			NOR = {
				has_minor_title = title_commander
				trait = craven
			}
		}
		
		any_voter = {
			has_minor_title = title_commander
			is_council_eunuch_trigger = no
		}
	}
	
	immediate = {
		random_voter = {
			limit = {
				is_council_eunuch_trigger = yes
				
				OR = {
					has_education_martial_trigger = yes
					has_lifestyle_martial_trigger = yes
					trait = brave
				}
				
				NOR = {
					has_minor_title = title_commander
					trait = craven
				}
			}
			
			save_event_target_as = eunuch_commander
			
			ROOT = {
				random_courtier_or_vassal = {
					limit = {
						has_minor_title = title_commander
						is_council_eunuch_trigger = no
					}
					
					preferred_limit = {
						is_voter = yes
						is_rival = event_target:eunuch_commander
					}
					
					preferred_limit = {
						is_rival = event_target:eunuch_commander
					}
					
					preferred_limit = {
						is_voter = yes
						NOR = {
							is_friend = event_target:eunuch_commander
							is_lover = event_target:eunuch_commander
						}
					}
					
					preferred_limit = {
						NOR = {
							is_friend = event_target:eunuch_commander
							is_lover = event_target:eunuch_commander
						}
					}
					
					preferred_limit = {
						is_voter = yes
					}
					
					save_event_target_as = commander_to_replace
				}
			}
			
			character_event = { id = soh.5336 }
		}
	}
}

# Eunuch might consider trying to become a commander
character_event = {
	id = soh.5336
	desc = EVTDESC_SOH_5336
	picture = GFX_evt_china_expansionist
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_5336 # I should be in command
		
		FROM = {
			character_event = { id = soh.5337 } # Inform liege of the attempt
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 100
				trait = ambitious
			}
			
			mult_modifier = {
				factor = 10
				trait = brave
			}
			
			mult_modifier = {
				factor = 10
				trait = proud
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_5336 # Actually, I think not...
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 100
				trait = craven
			}
			
			mult_modifier = {
				factor = 100
				trait = humble
			}
		}
	}
}

# Liege informed
character_event = {
	id = soh.5337
	desc = EVTDESC_SOH_5337
	picture = GFX_evt_china_expansionist
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			has_regent = no
			prestige >= 500
		}
		
		name = EVTOPTA_SOH_5306 # I think not!
		
		scaled_prestige = {
			value = -1
			min = -500
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 100
				is_rival = FROM
			}
			
			mult_modifier = {
				factor = 0.01
				is_rival = event_target:commander_to_replace
			}
			
			mult_modifier = {
				factor = 100
				trait = ambitious
			}
			
			mult_modifier = {
				factor = 10
				trait = envious
			}
			
			mult_modifier = {
				factor = 10
				trait = proud
			}
			
			mult_modifier = {
				factor = 10
				trait = paranoid
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_5337 # Very well!
		
		event_target:commander_to_replace = {
			remove_title = title_commander
			character_event = { id = soh.5338 } # Inform the fired commander
		}
		
		event_target:eunuch_commander = {
			give_minor_title = title_commander
			
			reverse_opinion = {
				who = ROOT 
				modifier = opinion_forced_commander
			}
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 100
				OR = {
					is_friend = FROM
					is_lover = FROM
				}
			}
			
			mult_modifier = {
				factor = 0.01
				OR = {
					is_friend = event_target:commander_to_replace
					is_lover = event_target:commander_to_replace
				}
			}
			
			mult_modifier = {
				factor = 100
				trait = content
			}
			
			mult_modifier = {
				factor = 100
				trait = humble
			}
			
			mult_modifier = {
				factor = 10
				trait = trusting
			}
		}
	}
}

# Fired commander informed
character_event = {
	id = soh.5338
	desc = EVTDESC_SOH_5338
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_5338 # I see...
	}
}