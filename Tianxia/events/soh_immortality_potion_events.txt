# Immortality Potion events
# by Silverswee(e)per

namespace = soh

# 11801-12200 reserved

##### Immortality Potion events

# TIANXIATODO: Add side-effects
# TIANXIATODO: Modifiers for tracking being the receiver
# TIANXIATODO: Event pictures and borders
# TIANXIATODO: Set flags for stuff that shouldn't fire multiple times
# TIANXIATODO: Flag cleanup
# TIANXIATODO: Persistent giving_me_immortality_potion event target
# TIANXIATODO: Cleanup of delayed progress if the process ends, including due to completion
# TIANXIATODO: Cleanup of giving_me_immortality_potion whenever a character stops brewing an immortality potion
# TIANXIATODO: Trait changes
# TIANXIATODO: Variable changes based on the outcome

### Approached by liege

# Approached about Immortality potion - accept/decide to brew placebo/decide to brew something harmful/refuse
character_event = {
	id = soh.11801
	desc = EVTDESC_SOH_11801
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	immediate = {
		clr_character_flag = started_brewing_immortality_potion
	}
	
	option = {
		name = EVTOPTA_SOH_11801 # Of course!
		
		set_character_flag = brewing_immortality_potion_actual
		set_character_flag = started_brewing_immortality_potion
		
		save_persistent_event_target = {
			name = getting_immortality_potion
			scope = FROMFROM
		}
		
		FROMFROM = {
			character_event = { id = soh.11802 }
		}
		
		character_event = { id = soh.11805 days = 7 } # Determine initial approach
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					AND = {
						OR = {
							is_friend = FROMFROM
							is_lover = FROMFROM
							AND = {
								is_close_relative = FROMFROM
								NOT = {
									is_rival = FROMFROM
								}
							}
						}
						
						check_variable = {
							which = alchemist_healing_knowledge
							value < 25
						}
						
						NOT = {
							trait = proud
						}
					}
					
					is_rival = FROMFROM
				}
				
				opinion = {
					who = FROMFROM
					value >= 0
				}
			}
			
			mult_modifier = {
				factor = 2
				trait = physician
				opinion = {
					who = FROMFROM
					value >= 25
				}
			}
			
			mult_modifier = {
				factor = 5
				trait = physician
				opinion = {
					who = FROMFROM
					value >= 50
				}
			}
			
			mult_modifier = {
				factor = 2
				trait = lunatic
			}
			
			mult_modifier = {
				factor = 2
				trait = kind
			}
			
			mult_modifier = {
				factor = 2
				trait = just
			}
			
			mult_modifier = {
				factor = 5
				trait = honest
			}
			
			mult_modifier = {
				factor = 2
				trait = diligent
			}
			
			mult_modifier = {
				factor = 0.1
				trait = slothful
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11801 # I think I will brew a placebo...
		
		set_character_flag = brewing_immortality_potion_placebo
		set_character_flag = started_brewing_immortality_potion
		
		save_persistent_event_target = {
			name = getting_immortality_potion
			scope = FROMFROM
		}
		
		FROMFROM = {
			character_event = { id = soh.11802 }
		}
		
		character_event = { id = soh.11868 days = 7 } # Determine initial approach
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					is_friend = FROMFROM
					is_lover = FROMFROM
					is_close_relative = FROMFROM
					is_rival = FROMFROM
				}
				
				opinion = {
					who = FROMFROM
					value < 50
				}
				
				opinion = {
					who = FROMFROM
					value >= -50
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = slothful
			}
		}
	}
	
	option = {
		name = EVTOPTC_SOH_11801 # An opportunity to poison the fool!
		
		set_character_flag = brewing_immortality_potion_poison
		set_character_flag = started_brewing_immortality_potion
		
		save_persistent_event_target = {
			name = getting_immortality_potion
			scope = FROMFROM
		}
		
		FROMFROM = {
			character_event = { id = soh.11802 }
		}
		
		character_event = { id = soh.11932 days = 7 } # Determine initial approach
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					is_friend = FROMFROM
					is_lover = FROMFROM
					AND = {
						is_close_relative = FROMFROM
						NOT = {
							is_rival = FROMFROM
						}
					}
					trait = kind
					trait = honest
					trait = just
				}
				
				opinion = {
					who = FROMFROM
					value < 0
				}
			}
			
			mult_modifier = {
				factor = 2
				opinion = {
					who = FROMFROM
					value < -25
				}
			}
			
			mult_modifier = {
				factor = 5
				opinion = {
					who = FROMFROM
					value < -50
				}
			}
			
			mult_modifier = {
				factor = 2
				trait = lunatic
			}
			
			mult_modifier = {
				factor = 2
				trait = master_schemer
			}
			
			mult_modifier = {
				factor = 2
				trait = cruel
			}
			
			mult_modifier = {
				factor = 2
				trait = arbitrary
			}
			
			mult_modifier = {
				factor = 5
				trait = deceitful
			}
			
			mult_modifier = {
				factor = 2
				trait = diligent
			}
			
			mult_modifier = {
				factor = 0.1
				trait = slothful
			}
		}
	}
	
	option = {
		name = EVTOPTD_SOH_11801 # I don't think I have the skills
		
		FROMFROM = {
			character_event = { id = soh.11803 }
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					AND = {
						OR = {
							is_friend = FROMFROM
							is_lover = FROMFROM
							AND = {
								is_close_relative = FROMFROM
								NOT = {
									is_rival = FROMFROM
								}
							}
						}
						
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 75
						}
					}
					
					AND = {
						is_rival = FROMFROM
						check_variable = {
							which = alchemist_poison_knowledge
							value >= 50
						}
						NOR = {
							trait = kind
							trait = honest
							trait = just
						}
					}
					
					trait = proud
				}
			}
			
			mult_modifier = {
				factor = 0.1
				NOT = {
					is_rival = FROMFROM
				}
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 50
				}
			}
			
			mult_modifier = {
				factor = 0.1
				is_rival = FROMFROM
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 50
				}
			}
		}
	}
}

# Request accepted (seemingly, at least)
character_event = {
	id = soh.11802
	desc = EVTDESC_SOH_11802
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11802 # Great!
		
		save_persistent_event_target = {
			name = giving_me_immortality_potion
			scope = FROM
		}
		
		# TIANXIATODO: Opinion modifier
	}
}

# Request refused
character_event = {
	id = soh.11803
	desc = EVTDESC_SOH_11803
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11803 # I see...
		
		# TIANXIATODO: Opinion modifier
	}
}



### Confirmation of decision

# Brewing Immortality potion for self - confirmation
character_event = {
	id = soh.11804
	desc = EVTDESC_SOH_11804
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11804 # I will become immortal!
		
		set_character_flag = brewing_immortality_potion_actual
		
		save_persistent_event_target = {
			name = getting_immortality_potion
			scope = ROOT
		}
		
		character_event = { id = soh.11805 days = 7 } # Determine initial approach
	}
	
	option = {
		trigger = {
			NOT = {
				trait = lunatic
			}
		}
		
		name = EVTOPTB_SOH_11804 # Actually, this is a bad idea
		
		# TIANXIATODO: Refund
	}
}



### Real Immortality potion

# Brewing Immortality potion - base it on your skills, on a book, or look for ideas?
character_event = {
	id = soh.11805
	desc = {
		text = EVTDESCA_SOH_11805
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				character = ROOT
			}
		}
	}
	desc = {
		text = EVTDESCB_SOH_11805
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				NOT = {
					character = ROOT
				}
			}
		}
	}
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	prisoner = no
	
	trigger = {
		has_character_flag = brewing_immortality_potion_actual
		is_actually_incapable_trigger = no
		persistent_event_target:getting_immortality_potion = {
			is_alive = yes
		}
	}
	
	fail_trigger_effect = {
		if = {
			limit = {
				persistent_event_target:getting_immortality_potion = {
					is_alive = yes
				}
			}
			repeat_event = { id = soh.11805 days = 30 random = 60 } # Try again
		}
	}
	
	immediate = {
		set_variable = {
			which = immortality_potion_quality
			value = 0
		}
		set_variable = {
			which = immortality_potion_ingredients
			value = 0
		}
		set_variable = {
			which = immortality_potion_progress
			value = 0
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11805 # I will come up with something of my own!
		
		hidden_tooltip = {
			random_list = {
				5 = {
					trigger = {
						learning >= 15
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 50
						}
						is_dumb_trigger = no
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 75
						}
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 100
						}
					}
					
					mult_modifier = {
						factor = 2
						trait = physician
					}
					
					mult_modifier = {
						factor = 2
						learning >= 20
					}
					
					mult_modifier = {
						factor = 2
						learning >= 25
					}
					
					character_event = { id = soh.11806 days = 10 random = 20 } # You got a great idea
				}
				
				10 = {
					trigger = {
						learning >= 10
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 25
						}
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 75
						}
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 100
						}
					}
					
					mult_modifier = {
						factor = 2
						trait = physician
					}
					
					mult_modifier = {
						factor = 2
						learning >= 20
					}
					
					mult_modifier = {
						factor = 2
						learning >= 25
					}
					
					character_event = { id = soh.11807 days = 10 random = 20 } # You got some decent ideas
				}
				
				25 = {
					trigger = {
						OR = {
							learning < 10
							check_variable = {
								which = alchemist_healing_knowledge
								value < 25
							}
						}
					}
					
					character_event = { id = soh.11808 days = 10 random = 20 } # You got one uncertain idea
				}
				
				50 = {
					trigger = {
						OR = {
							learning < 10
							check_variable = {
								which = alchemist_healing_knowledge
								value < 25
							}
						}
					}
					
					mult_modifier = {
						factor = 2
						learning < 10
						check_variable = {
							which = alchemist_healing_knowledge
							value < 25
						}
					}
					
					mult_modifier = {
						factor = 2
						learning < 5
					}
					
					mult_modifier = {
						factor = 2
						is_dumb_trigger = yes
					}
					
					character_event = { id = soh.11809 days = 10 random = 20 } # You have no ideas
				}
			}
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					learning < 10
					trait = humble
					OR = {
						any_artifact = {
							has_artifact_flag = book
							has_artifact_flag = alchemy
							has_artifact_flag = taoist
						}
						intrigue >= 10
					}
				}
			}
			
			mult_modifier = {
				factor = 5
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 50
				}
			}
			
			mult_modifier = {
				factor = 2
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 25
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = physician
			}
			
			mult_modifier = {
				factor = 5
				trait = lunatic
			}
			
			mult_modifier = {
				factor = 2
				trait = diligent
			}
			
			mult_modifier = {
				factor = 2
				learning >= 15
			}
			
			mult_modifier = {
				factor = 2
				learning >= 20
			}
			
			mult_modifier = {
				factor = 2
				learning >= 25
			}
		}
	}
	
	option = {
		trigger = {
			any_artifact = {
				has_artifact_flag = book
				has_artifact_flag = alchemy
				has_artifact_flag = taoist
			}
		}
		
		name = EVTOPTB_SOH_11805 # I will look something up in a book!
		
		hidden_tooltip = {
			random_list = {
				5 = {
					trigger = {
						learning >= 15
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 50
						}
						is_dumb_trigger = no
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 75
						}
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 100
						}
					}
					
					mult_modifier = {
						factor = 2
						trait = physician
					}
					
					mult_modifier = {
						factor = 2
						trait = erudite
					}
					
					mult_modifier = {
						factor = 2
						trait = scholar
					}
					
					mult_modifier = {
						factor = 2
						learning >= 20
					}
					
					mult_modifier = {
						factor = 2
						learning >= 25
					}
					
					character_event = { id = soh.11810 days = 10 random = 20 } # You got a great idea
				}
				
				10 = {
					trigger = {
						learning >= 10
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 25
						}
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 75
						}
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 100
						}
					}
					
					mult_modifier = {
						factor = 2
						trait = physician
					}
					
					mult_modifier = {
						factor = 2
						trait = erudite
					}
					
					mult_modifier = {
						factor = 2
						trait = scholar
					}
					
					mult_modifier = {
						factor = 2
						learning >= 20
					}
					
					mult_modifier = {
						factor = 2
						learning >= 25
					}
					
					character_event = { id = soh.11811 days = 10 random = 20 } # You got some decent ideas
				}
				
				25 = {
					trigger = {
						OR = {
							learning < 10
							check_variable = {
								which = alchemist_healing_knowledge
								value < 25
							}
						}
					}
					
					character_event = { id = soh.11812 days = 10 random = 20 } # You got one uncertain idea
				}
				
				50 = {
					trigger = {
						OR = {
							learning < 10
							check_variable = {
								which = alchemist_healing_knowledge
								value < 25
							}
						}
					}
					
					mult_modifier = {
						factor = 2
						learning < 10
						check_variable = {
							which = alchemist_healing_knowledge
							value < 25
						}
					}
					
					mult_modifier = {
						factor = 2
						learning < 5
					}
					
					mult_modifier = {
						factor = 2
						is_dumb_trigger = yes
					}
					
					character_event = { id = soh.11813 days = 10 random = 20 } # You have no ideas
				}
			}
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = proud
				}
			}
			
			mult_modifier = {
				factor = 5
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 50
				}
			}
			
			mult_modifier = {
				factor = 2
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 25
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = scholar
			}
			
			mult_modifier = {
				factor = 5
				trait = erudite
			}
			
			mult_modifier = {
				factor = 2
				trait = diligent
			}
			
			mult_modifier = {
				factor = 2
				learning >= 15
			}
			
			mult_modifier = {
				factor = 2
				learning >= 20
			}
			
			mult_modifier = {
				factor = 2
				learning >= 25
			}
		}
	}
	
	option = {
		trigger = {
			intrigue >= 10
		}
		
		name = EVTOPTC_SOH_11805 # My agents will find the answer!
		
		hidden_tooltip = {
			random_list = {
				5 = {
					trigger = {
						intrigue >= 15
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 50
						}
						is_dumb_trigger = no
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 75
						}
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 100
						}
					}
					
					mult_modifier = {
						factor = 2
						trait = master_schemer
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 20
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 25
					}
					
					character_event = { id = soh.11814 days = 10 random = 20 } # You got a great idea
				}
				
				10 = {
					trigger = {
						intrigue >= 10
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 25
						}
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 75
						}
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 100
						}
					}
					
					mult_modifier = {
						factor = 2
						trait = master_schemer
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 20
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 25
					}
					
					character_event = { id = soh.11815 days = 10 random = 20 } # You got some decent ideas
				}
				
				25 = {
					trigger = {
						OR = {
							intrigue < 10
							check_variable = {
								which = alchemist_healing_knowledge
								value < 25
							}
						}
					}
					
					character_event = { id = soh.11816 days = 10 random = 20 } # You got one uncertain idea
				}
				
				50 = {
					trigger = {
						OR = {
							intrigue < 10
							check_variable = {
								which = alchemist_healing_knowledge
								value < 25
							}
						}
					}
					
					mult_modifier = {
						factor = 2
						intrigue < 10
						check_variable = {
							which = alchemist_healing_knowledge
							value < 25
						}
					}
					
					mult_modifier = {
						factor = 2
						intrigue < 5
					}
					
					mult_modifier = {
						factor = 2
						is_dumb_trigger = yes
					}
					
					character_event = { id = soh.11817 days = 10 random = 20 } # You have no ideas
				}
			}
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = proud
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = master_schemer
			}
			
			mult_modifier = {
				factor = 5
				trait = deceitful
			}
			
			mult_modifier = {
				factor = 5
				trait = slothful
			}
			
			mult_modifier = {
				factor = 2
				intrigue >= 15
			}
			
			mult_modifier = {
				factor = 2
				intrigue >= 20
			}
			
			mult_modifier = {
				factor = 2
				intrigue >= 25
			}
		}
	}
}

# Own skills - you have a great idea
character_event = {
	id = soh.11806
	desc = {
		text = EVTDESCA_SOH_11806
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				character = ROOT
			}
		}
	}
	desc = {
		text = EVTDESCB_SOH_11806
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				NOT = {
					character = ROOT
				}
			}
		}
	}
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	prisoner = no
	
	trigger = {
		has_character_flag = brewing_immortality_potion_actual
		is_actually_incapable_trigger = no
		persistent_event_target:getting_immortality_potion = {
			is_alive = yes
		}
	}
	
	fail_trigger_effect = {
		if = {
			limit = {
				persistent_event_target:getting_immortality_potion = {
					is_alive = yes
				}
			}
			repeat_event = { id = soh.11806 days = 30 random = 60 } # Try again
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11806 # I know just what to brew!
		
		hidden_tooltip = {
			change_variable = {
				which = immortality_potion_quality
				value = 5
			}
		}
		
		character_event = { id = soh.11818 days = 30 random = 60 } # Hidden progress event selection
	}
}

# Own skills - you have some decent ideas
character_event = {
	id = soh.11807
	desc = {
		text = EVTDESCA_SOH_11807
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				character = ROOT
			}
		}
	}
	desc = {
		text = EVTDESCB_SOH_11807
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				NOT = {
					character = ROOT
				}
			}
		}
	}
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	prisoner = no
	
	trigger = {
		has_character_flag = brewing_immortality_potion_actual
		is_actually_incapable_trigger = no
		persistent_event_target:getting_immortality_potion = {
			is_alive = yes
		}
	}
	
	fail_trigger_effect = {
		if = {
			limit = {
				persistent_event_target:getting_immortality_potion = {
					is_alive = yes
				}
			}
			repeat_event = { id = soh.11807 days = 30 random = 60 } # Try again
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11807 # I think I know what to do...
		
		hidden_tooltip = {
			change_variable = {
				which = immortality_potion_quality
				value = 2
			}
		}
		
		character_event = { id = soh.11818 days = 30 random = 60 } # Hidden progress event selection
	}
	
	option = {
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				character = ROOT
			}
			ai = no
		}
		
		name = EVTOPTB_SOH_11807 # It is too risky...
		
		# TIANXIATODO: Cleanup
	}
}

# Own skills - you have one very uncertain idea
character_event = {
	id = soh.11808
	desc = {
		text = EVTDESCA_SOH_11808
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				character = ROOT
			}
		}
	}
	desc = {
		text = EVTDESCB_SOH_11808
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				NOT = {
					character = ROOT
				}
			}
		}
	}
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	prisoner = no
	
	trigger = {
		has_character_flag = brewing_immortality_potion_actual
		is_actually_incapable_trigger = no
		persistent_event_target:getting_immortality_potion = {
			is_alive = yes
		}
	}
	
	fail_trigger_effect = {
		if = {
			limit = {
				persistent_event_target:getting_immortality_potion = {
					is_alive = yes
				}
			}
			repeat_event = { id = soh.11808 days = 30 random = 60 } # Try again
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11808 # Maybe this will work...
		
		hidden_tooltip = {
			random_list = {
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = 1
					}
				}
				25 = {
					# No change
				}
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = -1
					}
				}
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = -2
					}
				}
			}
		}
		
		character_event = { id = soh.11818 days = 30 random = 60 } # Hidden progress event selection
	}
	
	option = {
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				character = ROOT
			}
			ai = no
		}
		
		name = EVTOPTB_SOH_11808 # It is too risky...
		
		# TIANXIATODO: Cleanup
	}
}

# Own skills - you have no ideas
character_event = {
	id = soh.11809
	desc = {
		text = EVTDESCA_SOH_11809
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				character = ROOT
			}
		}
	}
	desc = {
		text = EVTDESCB_SOH_11809
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				NOT = {
					character = ROOT
				}
			}
		}
	}
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	prisoner = no
	
	trigger = {
		has_character_flag = brewing_immortality_potion_actual
		is_actually_incapable_trigger = no
		persistent_event_target:getting_immortality_potion = {
			is_alive = yes
		}
	}
	
	fail_trigger_effect = {
		if = {
			limit = {
				persistent_event_target:getting_immortality_potion = {
					is_alive = yes
				}
			}
			repeat_event = { id = soh.11809 days = 30 random = 60 } # Try again
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11809 # I will figure it out...
		
		hidden_tooltip = {
			random_list = {
				25 = {
					# No change
				}
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = -1
					}
				}
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = -2
					}
				}
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = -3
					}
				}
			}
		}
		
		character_event = { id = soh.11818 days = 30 random = 60 } # Hidden progress event selection
	}
	
	option = {
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				character = ROOT
			}
			ai = no
		}
		
		name = EVTOPTB_SOH_11809 # It is too risky...
		
		# TIANXIATODO: Cleanup
	}
}

# Book - you get a great idea
character_event = {
	id = soh.11810
	desc = {
		text = EVTDESCA_SOH_11810
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				character = ROOT
			}
		}
	}
	desc = {
		text = EVTDESCB_SOH_11810
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				NOT = {
					character = ROOT
				}
			}
		}
	}
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	prisoner = no
	
	trigger = {
		has_character_flag = brewing_immortality_potion_actual
		is_actually_incapable_trigger = no
		persistent_event_target:getting_immortality_potion = {
			is_alive = yes
		}
	}
	
	fail_trigger_effect = {
		if = {
			limit = {
				persistent_event_target:getting_immortality_potion = {
					is_alive = yes
				}
			}
			repeat_event = { id = soh.11810 days = 30 random = 60 } # Try again
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11810 # I know just what to brew!
		
		hidden_tooltip = {
			change_variable = {
				which = immortality_potion_quality
				value = 5
			}
		}
		
		character_event = { id = soh.11818 days = 30 random = 60 } # Hidden progress event selection
	}
}

# Book - you get some decent ideas
character_event = {
	id = soh.11811
	desc = {
		text = EVTDESCA_SOH_11811
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				character = ROOT
			}
		}
	}
	desc = {
		text = EVTDESCB_SOH_11811
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				NOT = {
					character = ROOT
				}
			}
		}
	}
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	prisoner = no
	
	trigger = {
		has_character_flag = brewing_immortality_potion_actual
		is_actually_incapable_trigger = no
		persistent_event_target:getting_immortality_potion = {
			is_alive = yes
		}
	}
	
	fail_trigger_effect = {
		if = {
			limit = {
				persistent_event_target:getting_immortality_potion = {
					is_alive = yes
				}
			}
			repeat_event = { id = soh.11811 days = 30 random = 60 } # Try again
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11811 # I think I know what to do...
		
		hidden_tooltip = {
			change_variable = {
				which = immortality_potion_quality
				value = 2
			}
		}
		
		character_event = { id = soh.11818 days = 30 random = 60 } # Hidden progress event selection
	}
	
	option = {
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				character = ROOT
			}
			ai = no
		}
		
		name = EVTOPTB_SOH_11811 # It is too risky...
		
		# TIANXIATODO: Cleanup
	}
}

# Book - you get one very uncertain idea
character_event = {
	id = soh.11812
	desc = {
		text = EVTDESCA_SOH_11812
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				character = ROOT
			}
		}
	}
	desc = {
		text = EVTDESCB_SOH_11812
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				NOT = {
					character = ROOT
				}
			}
		}
	}
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	prisoner = no
	
	trigger = {
		has_character_flag = brewing_immortality_potion_actual
		is_actually_incapable_trigger = no
		persistent_event_target:getting_immortality_potion = {
			is_alive = yes
		}
	}
	
	fail_trigger_effect = {
		if = {
			limit = {
				persistent_event_target:getting_immortality_potion = {
					is_alive = yes
				}
			}
			repeat_event = { id = soh.11812 days = 30 random = 60 } # Try again
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11812 # Maybe this will work...
		
		hidden_tooltip = {
			random_list = {
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = 1
					}
				}
				25 = {
					# No change
				}
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = -1
					}
				}
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = -2
					}
				}
			}
		}
		
		character_event = { id = soh.11818 days = 30 random = 60 } # Hidden progress event selection
	}
	
	option = {
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				character = ROOT
			}
			ai = no
		}
		
		name = EVTOPTB_SOH_11812 # It is too risky...
		
		# TIANXIATODO: Cleanup
	}
}

# Book - you get no ideas
character_event = {
	id = soh.11813
	desc = {
		text = EVTDESCA_SOH_11813
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				character = ROOT
			}
		}
	}
	desc = {
		text = EVTDESCB_SOH_11813
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				NOT = {
					character = ROOT
				}
			}
		}
	}
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	prisoner = no
	
	trigger = {
		has_character_flag = brewing_immortality_potion_actual
		is_actually_incapable_trigger = no
		persistent_event_target:getting_immortality_potion = {
			is_alive = yes
		}
	}
	
	fail_trigger_effect = {
		if = {
			limit = {
				persistent_event_target:getting_immortality_potion = {
					is_alive = yes
				}
			}
			repeat_event = { id = soh.11813 days = 30 random = 60 } # Try again
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11813 # I will figure it out...
		
		hidden_tooltip = {
			random_list = {
				25 = {
					# No change
				}
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = -1
					}
				}
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = -2
					}
				}
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = -3
					}
				}
			}
		}
		
		character_event = { id = soh.11818 days = 30 random = 60 } # Hidden progress event selection
	}
	
	option = {
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				character = ROOT
			}
			ai = no
		}
		
		name = EVTOPTB_SOH_11813 # It is too risky...
		
		# TIANXIATODO: Cleanup
	}
}

# Looking for ideas - your agents discover a great idea
character_event = {
	id = soh.11814
	desc = {
		text = EVTDESCA_SOH_11814
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				character = ROOT
			}
		}
	}
	desc = {
		text = EVTDESCB_SOH_11814
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				NOT = {
					character = ROOT
				}
			}
		}
	}
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	prisoner = no
	
	trigger = {
		has_character_flag = brewing_immortality_potion_actual
		is_actually_incapable_trigger = no
		persistent_event_target:getting_immortality_potion = {
			is_alive = yes
		}
	}
	
	fail_trigger_effect = {
		if = {
			limit = {
				persistent_event_target:getting_immortality_potion = {
					is_alive = yes
				}
			}
			repeat_event = { id = soh.11814 days = 30 random = 60 } # Try again
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11814 # I know just what to brew!
		
		hidden_tooltip = {
			change_variable = {
				which = immortality_potion_quality
				value = 5
			}
		}
		
		character_event = { id = soh.11818 days = 30 random = 60 } # Hidden progress event selection
	}
}

# Looking for ideas - your agents discover some decent ideas
character_event = {
	id = soh.11815
	desc = {
		text = EVTDESCA_SOH_11815
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				character = ROOT
			}
		}
	}
	desc = {
		text = EVTDESCB_SOH_11815
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				NOT = {
					character = ROOT
				}
			}
		}
	}
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	prisoner = no
	
	trigger = {
		has_character_flag = brewing_immortality_potion_actual
		is_actually_incapable_trigger = no
		persistent_event_target:getting_immortality_potion = {
			is_alive = yes
		}
	}
	
	fail_trigger_effect = {
		if = {
			limit = {
				persistent_event_target:getting_immortality_potion = {
					is_alive = yes
				}
			}
			repeat_event = { id = soh.11815 days = 30 random = 60 } # Try again
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11815 # I think I know what to do...
		
		hidden_tooltip = {
			change_variable = {
				which = immortality_potion_quality
				value = 2
			}
		}
		
		character_event = { id = soh.11818 days = 30 random = 60 } # Hidden progress event selection
	}
	
	option = {
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				character = ROOT
			}
			ai = no
		}
		
		name = EVTOPTB_SOH_11815 # It is too risky...
		
		# TIANXIATODO: Cleanup
	}
}

# Looking for ideas - your agents discover a very uncertain idea
character_event = {
	id = soh.11816
	desc = {
		text = EVTDESCA_SOH_11816
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				character = ROOT
			}
		}
	}
	desc = {
		text = EVTDESCB_SOH_11816
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				NOT = {
					character = ROOT
				}
			}
		}
	}
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	prisoner = no
	
	trigger = {
		has_character_flag = brewing_immortality_potion_actual
		is_actually_incapable_trigger = no
		persistent_event_target:getting_immortality_potion = {
			is_alive = yes
		}
	}
	
	fail_trigger_effect = {
		if = {
			limit = {
				persistent_event_target:getting_immortality_potion = {
					is_alive = yes
				}
			}
			repeat_event = { id = soh.11816 days = 30 random = 60 } # Try again
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11816 # Maybe this will work...
		
		hidden_tooltip = {
			random_list = {
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = 1
					}
				}
				25 = {
					# No change
				}
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = -1
					}
				}
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = -2
					}
				}
			}
		}
		
		character_event = { id = soh.11818 days = 30 random = 60 } # Hidden progress event selection
	}
	
	option = {
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				character = ROOT
			}
			ai = no
		}
		
		name = EVTOPTB_SOH_11816 # It is too risky...
		
		# TIANXIATODO: Cleanup
	}
}

# Looking for ideas - your agents discover no ideas
character_event = {
	id = soh.11817
	desc = {
		text = EVTDESCA_SOH_11817
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				character = ROOT
			}
		}
	}
	desc = {
		text = EVTDESCB_SOH_11817
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				NOT = {
					character = ROOT
				}
			}
		}
	}
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	prisoner = no
	
	trigger = {
		has_character_flag = brewing_immortality_potion_actual
		is_actually_incapable_trigger = no
		persistent_event_target:getting_immortality_potion = {
			is_alive = yes
		}
	}
	
	fail_trigger_effect = {
		if = {
			limit = {
				persistent_event_target:getting_immortality_potion = {
					is_alive = yes
				}
			}
			repeat_event = { id = soh.11817 days = 30 random = 60 } # Try again
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11817 # I will figure it out...
		
		hidden_tooltip = {
			random_list = {
				25 = {
					# No change
				}
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = -1
					}
				}
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = -2
					}
				}
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = -3
					}
				}
			}
		}
		
		character_event = { id = soh.11818 days = 30 random = 60 } # Hidden progress event selection
	}
	
	option = {
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				character = ROOT
			}
			ai = no
		}
		
		name = EVTOPTB_SOH_11817 # It is too risky...
		
		# TIANXIATODO: Cleanup
	}
}

# Hidden progression event selection
character_event = {
	id = soh.11818
	hide_window = yes
	
	is_triggered_only = yes
	
	prisoner = no
	
	trigger = {
		has_character_flag = brewing_immortality_potion_actual
		is_actually_incapable_trigger = no
		persistent_event_target:getting_immortality_potion = {
			is_alive = yes
		}
		NOR = {
			has_character_flag = immortality_potion_finished
			has_character_flag = asked_about_immortality_potion
		}
	}
	
	fail_trigger_effect = {
		if = {
			limit = {
				persistent_event_target:getting_immortality_potion = {
					is_alive = yes
				}
				NOT = {
					has_character_flag = immortality_potion_finished
				}
			}
			repeat_event = { id = soh.11818 days = 30 random = 30 } # Try again
		}
	}
	
	immediate = {
		if = {
			limit = {
				NOR = {
					AND = {
						check_variable = {
							which = immortality_potion_ingredients
							value >= 10
						}
						check_variable = {
							which = immortality_potion_progress
							value >= 25
						}
					}
					AND = {
						check_variable = {
							which = immortality_potion_ingredients
							value >= 5
						}
						check_variable = {
							which = immortality_potion_progress
							value >= 50
						}
					}
				}
			}
			
			change_variable = {
				which = immortality_potion_progress
				value = 1
			}
			
			random_list = {
				100 = {
					mult_modifier = {
						factor = 10
						check_variable = {
							which = immortality_potion_ingredients
							value = 0
						}
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = immortality_potion_ingredients
							value < 2
						}
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = immortality_potion_ingredients
							value < 5
						}
					}
					
					randomize_immortality_potion_ingredient_effect = yes
					
					if = {
						limit = {
							has_immortality_potion_ingredient_trigger = yes
						}
						
						character_event = { id = soh.11819 } # You have just the ingredient you need
					}
					
					else = {
						if = {
							limit = {
								persistent_event_target:getting_immortality_potion = {
									OR = {
										character = ROOT
										is_inaccessible_or_incapable_trigger = yes
									}
								}
							}
							
							character_event = { id = soh.11825 } # You need to get a specific ingredient yourself
						}
						
						else = {
							character_event = { id = soh.11820 } # You need a specific ingredient - ask the target?
						}
					}
				}
				
				25 = {
					trigger = {
						has_unused_alchemy_book_trigger = yes
					}
					
					mult_modifier = {
						factor = 2
						trait = scholar
					}
					
					mult_modifier = {
						factor = 2
						trait = erudite
					}
					
					character_event = { id = soh.11831 } # Make use of an alchemy-related book
				}
				
				25 = {
					trigger = {
						has_unused_alchemy_book_trigger = no
						unused_alchemy_book_exists_trigger = yes
						OR = {
							getting_immortality_potion_has_unused_alchemy_book_trigger = yes
							persistent_event_target:getting_immortality_potion = {
								NOT = {
									character = ROOT
								}
								scaled_wealth >= 1
								wealth >= 100
							}
						}
					}
					
					mult_modifier = {
						factor = 2
						trait = scholar
					}
					
					mult_modifier = {
						factor = 2
						trait = erudite
					}
					
					character_event = { id = soh.11832 } # Ask for book or the money for it?
				}
				
				25 = {
					trigger = {
						has_unused_alchemy_book_trigger = no
						unused_alchemy_book_exists_trigger = yes
						NOR = {
							getting_immortality_potion_has_unused_alchemy_book_trigger = yes
							persistent_event_target:getting_immortality_potion = {
								NOT = {
									character = ROOT
								}
								scaled_wealth >= 1
								wealth >= 100
							}
						}
						scaled_wealth >= 1
						wealth >= 100
					}
					
					mult_modifier = {
						factor = 2
						trait = scholar
					}
					
					mult_modifier = {
						factor = 2
						trait = erudite
					}
					
					character_event = { id = soh.11837 } # Purchase the book you need?
				}
				
				10 = {
					trigger = {
						learning > 10
						NOT = {
							has_character_flag = immortality_potion_goes_well
						}
						any_artifact = {
							has_artifact_flag = ingredient
							has_been_used_in_immortality_potion_trigger = no
						}
					}
					
					mult_modifier = {
						factor = 2
						learning >= 15
					}
					
					mult_modifier = {
						factor = 2
						learning >= 20
					}
					
					mult_modifier = {
						factor = 2
						trait = physician
					}
					
					character_event = { id = soh.11838 } # Throw in some other ingredients?
				}
				
				25 = {
					trigger = {
						NOT = {
							has_character_flag = immortality_potion_lost_notes
						}
					}
					
					mult_modifier = {
						factor = 2
						trait = wroth
					}
					
					mult_modifier = {
						factor = 2
						is_dumb_trigger = yes
					}
					
					character_event = { id = soh.11839 } # Lost notes
				}
				
				50 = {
					trigger = {
						any_society_member = {
							society_member_of = the_alchemists
							is_inaccessible_or_incapable_trigger = no
							NOR = {
								character = ROOT
								ROOT = {
									persistent_event_target:getting_immortality_potion = {
										character = PREVPREV
									}
								}
							}
						}
					}
					
					random_society_member = {
						limit = {
							society_member_of = the_alchemists
							is_inaccessible_or_incapable_trigger = no
							NOR = {
								character = ROOT
								ROOT = {
									persistent_event_target:getting_immortality_potion = {
										character = PREVPREV
									}
								}
							}
						}
						
						preferred_limit = {
							society_rank == 4
							OR = {
								is_friend = ROOT
								is_lover = ROOT
								is_rival = ROOT
								persistent_event_target:getting_immortality_potion = {
									is_friend = PREV
									is_lover = PREV
									is_rival = PREV
								}
							}
						}
						
						preferred_limit = {
							society_rank == 3
							OR = {
								is_friend = ROOT
								is_lover = ROOT
								is_rival = ROOT
								persistent_event_target:getting_immortality_potion = {
									is_friend = PREV
									is_lover = PREV
									is_rival = PREV
								}
							}
						}
						
						preferred_limit = {
							society_rank == 2
							OR = {
								is_friend = ROOT
								is_lover = ROOT
								is_rival = ROOT
								persistent_event_target:getting_immortality_potion = {
									is_friend = PREV
									is_lover = PREV
									is_rival = PREV
								}
							}
						}
						
						preferred_limit = {
							society_rank == 4
						}
						
						preferred_limit = {
							society_rank == 3
						}
						
						preferred_limit = {
							society_rank == 2
						}
						
						character_event = { id = soh.11840 } # Other society member might offer to help (or "help")
					}
				}
				
				25 = {
					trigger = {
						any_artifact = {
							has_artifact_flag = ingredient
							has_been_used_in_immortality_potion_trigger = no
						}
					}
					
					mult_modifier = {
						factor = 2
						trait = wroth
					}
					
					mult_modifier = {
						factor = 2
						is_dumb_trigger = yes
					}
					
					character_event = { id = soh.11853 } # Wrong ingredient
				}
				
				50 = {
					trigger = {
						trait = lunatic
						any_artifact = {
							has_artifact_flag = ingredient
							has_been_used_in_immortality_potion_trigger = no
						}
					}
					
					character_event = { id = soh.11856 } # Lunatic is feeling inspired
				}
				
				50 = {
					trigger = {
						trait = possessed
						any_artifact = {
							has_artifact_flag = ingredient
							has_been_used_in_immortality_potion_trigger = no
						}
					}
					
					character_event = { id = soh.11857 } # Possessed character just throws something in
				}
				
				25 = {
					trigger = {
						NOR = {
							has_character_flag = hidden_lab
							has_character_flag = very_hidden_lab
						}
						
						employer = {
							any_courtier = {
								is_adult = yes
								is_actually_incapable_trigger = no
								OR = {
									AND = {
										is_rival = ROOT
										ROOT = {
											persistent_event_target:getting_immortality_potion = {
												NOR = {
													is_friend = PREVPREV
													is_lover = PREVPREV
												}
											}
										}
									}
									ROOT = {
										persistent_event_target:getting_immortality_potion = {
											is_rival = PREVPREV
										}
									}
								}
							}
						}
					}
					
					employer = {
						random_courtier = {
							limit = {
								is_adult = yes
								is_actually_incapable_trigger = no
								OR = {
									AND = {
										is_rival = ROOT
										ROOT = {
											persistent_event_target:getting_immortality_potion = {
												NOR = {
													is_friend = PREVPREV
													is_lover = PREVPREV
												}
											}
										}
									}
									ROOT = {
										persistent_event_target:getting_immortality_potion = {
											is_rival = PREVPREV
										}
									}
								}
							}
							
							preferred_limit = {
								is_rival = ROOT
								ROOT = {
									persistent_event_target:getting_immortality_potion = {
										is_rival = PREVPREV
									}
								}
							}
							
							preferred_limit = {
								is_rival = ROOT
							}
							
							character_event = { id = soh.11858 } # Courtier might attempt sabotage
						}
					}
				}
				
				25 = {
					trigger = {
						persistent_event_target:getting_immortality_potion = {
							character = ROOT
						}
						OR = {
							AND = {
								check_variable = {
									which = immortality_potion_progress
									value >= 10
								}
								OR = {
									trait = cynical
									trait = paranoid
								}
								check_variable = {
									which = immortality_potion_quality
									value < 25
								}
							}
							AND = {
								OR = {
									check_variable = {
										which = immortality_potion_ingredients
										value >= 5
									}
									check_variable = {
										which = immortality_potion_progress
										value >= 25
									}
								}
								check_variable = {
									which = immortality_potion_quality
									value < 50
								}
							}
							trait = depressed
						}
						NOT = {
							has_character_flag = immortality_potion_second_thoughts_poor_quality
						}
					}
					
					character_event = { id = soh.11862 } # Having second thoughts
				}
				
				25 = {
					trigger = {
						persistent_event_target:getting_immortality_potion = {
							NOR = {
								character = ROOT
								is_rival = ROOT
							}
						}
						OR = {
							AND = {
								check_variable = {
									which = immortality_potion_progress
									value >= 10
								}
								OR = {
									trait = cynical
									trait = paranoid
								}
								check_variable = {
									which = immortality_potion_quality
									value < 25
								}
							}
							AND = {
								OR = {
									check_variable = {
										which = immortality_potion_ingredients
										value >= 5
									}
									check_variable = {
										which = immortality_potion_progress
										value >= 25
									}
								}
								check_variable = {
									which = immortality_potion_quality
									value < 50
								}
							}
						}
						NOT = {
							has_character_flag = immortality_potion_second_thoughts_poor_quality
						}
					}
					
					character_event = { id = soh.11863 } # Having second thoughts
				}
				
				25 = {
					trigger = {
						persistent_event_target:getting_immortality_potion = {
							OR = {
								is_rival = ROOT
								reverse_opinion = {
									who = ROOT
									value < -25
								}
							}
						}
						check_variable = {
							which = immortality_potion_quality
							value > 25
						}
						NOT = {
							has_character_flag = immortality_potion_second_thoughts_rival
						}
					}
					
					character_event = { id = soh.11867 } # Having second thoughts
				}
				
				10 = {
					trigger = {
						check_variable = {
							which = immortality_potion_ingredients
							value >= 2
						}
					}
					
					repeat_event = { id = soh.11818 days = 30 random = 90 } # Nothing for now
				}
			}
		}
		
		else = {
			if = {
				limit = {
					persistent_event_target:getting_immortality_potion = {
						character = ROOT
					}
				}
				character_event = { id = soh.12011 } # Potion is ready
			}
			
			else = {
				if = {
					limit = {
						persistent_event_target:getting_immortality_potion = {
							is_inaccessible_or_incapable_trigger = no
						}
					}
					character_event = { id = soh.12012 } # Potion is ready
				}
				
				else = {
					repeat_event = { id = soh.11818 days = 30 } # Try again
				}
			}
		}
	}
}

# Another ingredient needed - you've got it
character_event = {
	id = soh.11819
	desc = {
		text = EVTDESCA_SOH_11819
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				character = ROOT
			}
		}
	}
	desc = {
		text = EVTDESCB_SOH_11819
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				NOT = {
					character = ROOT
				}
			}
		}
	}
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		random_artifact = {
			limit = {
				ingredient_matches_immortality_potion_trigger = yes
			}
			
			save_event_target_as = target_immortality_potion_ingredient
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11819 # I should add it to the potion!
		
		custom_tooltip = {
			text = ingredient_will_be_added_to_immortality_potion
			
			if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 50
					}
					
					event_target:target_immortality_potion_ingredient = {
						OR = {
							ingredient_is_unhealthy_trigger = yes
							AND = {
								ingredient_is_perceived_healthy_trigger = no
								ROOT = {
									trait = cynical
								}
							}
						}
						
						OR = {
							new_ingredient_trigger = no
							ROOT = {
								OR = {
									learning >= 15
									AND = {
										trait = cynical
										is_dumb_trigger = no
									}
								}
							}
						}
					}
					
					NOT = {
						trait = trusting
					}
				}
				
				character_event = { id = soh.11828 } # Attempt to purify ingredient?
			}
			
			else = {
				add_ingredient_to_immortality_potion_actual_effect = yes
			
				event_target:target_immortality_potion_ingredient = {
					unsafe_destroy_artifact = yes
				}
				
				character_event = { id = soh.11818 days = 30 random = 90 } # Next step
			}
		}
	}
}

# Another ingredient needed - ask the person that is getting the potion?
character_event = {
	id = soh.11820
	desc = EVTDESC_SOH_11820
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11820 # I should ask them!
		
		persistent_event_target:getting_immortality_potion = {
			character_event = { id = soh.11821 } # Receiver is asked
		}
	}
}

# Asked for ingredient
character_event = {
	id = soh.11821
	desc = EVTDESC_SOH_11821
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		any_artifact = {
			limit = {
				is_froms_immortality_potion_ingredient_trigger = yes
			}
			
			save_event_target_as = target_immortality_potion_ingredient
		}
	}
	
	option = {
		trigger = {
			event_target:target_immortality_potion_ingredient = {
				always = yes
			}
		}
		
		name = EVTOPTA_SOH_11821 # I can provide that ingredient!
		
		event_target:target_immortality_potion_ingredient = {
			transfer_artifact = {
				from = ROOT
				to = FROM
			}
		}
		
		FROM = {
			character_event = { id = soh.11822 } # Inform FROM
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				OR = {
					society_member_of = hermetics
					society_member_of = the_alchemists
				}
				trait = greedy
			}
		}
	}
	
	option = {
		trigger = {
			wealth >= 0
		}
		
		name = EVTOPTB_SOH_11821 # I can provide some money...
		
		wealth = -25
		
		FROM = {
			wealth = 25
			character_event = { id = soh.11823 } # Inform FROM
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = greedy
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = charitable
			}
		}
	}
	
	option = {
		name = EVTOPTC_SOH_11821 # I should not have to provide that!
		
		FROM = {
			character_event = { id = soh.11824 } # Inform FROM
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					OR = {
						is_friend = FROM
						is_lover = FROM
					}
					OR = {
						wealth >= 0
						event_target:target_immortality_potion_ingredient = {
							always = yes
						}
					}
					NOT = {
						trait = greedy
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = greedy
			}
		}
	}
}

# Got ingredient
character_event = {
	id = soh.11822
	desc = EVTDESC_SOH_11822
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11822 # I should add it to the potion!
		
		custom_tooltip = {
			text = ingredient_will_be_added_to_immortality_potion
			
			if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 50
					}
					
					event_target:target_immortality_potion_ingredient = {
						OR = {
							ingredient_is_unhealthy_trigger = yes
							AND = {
								ingredient_is_perceived_healthy_trigger = no
								ROOT = {
									trait = cynical
								}
							}
						}
						
						OR = {
							new_ingredient_trigger = no
							ROOT = {
								OR = {
									learning >= 15
									AND = {
										trait = cynical
										is_dumb_trigger = no
									}
								}
							}
						}
					}
					
					NOT = {
						trait = trusting
					}
				}
				
				character_event = { id = soh.11828 } # Attempt to purify ingredient?
			}
			
			else = {
				add_ingredient_to_immortality_potion_actual_effect = yes
			
				event_target:target_immortality_potion_ingredient = {
					unsafe_destroy_artifact = yes
				}
				
				character_event = { id = soh.11818 days = 30 random = 90 } # Next step
			}
		}
		
		ai_chance = {
			factor = 100
		}
	}
}

# Got money instead
character_event = {
	id = soh.11823
	desc = EVTDESC_SOH_11823
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11823 # I will purchase the ingredient right away!
		
		wealth = -25
		
		custom_tooltip = {
			text = ingredient_will_be_added_to_immortality_potion
			
			add_target_immortality_potion_ingredient_effect = yes
			
			if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 50
					}
					
					event_target:target_immortality_potion_ingredient = {
						OR = {
							ingredient_is_unhealthy_trigger = yes
							AND = {
								ingredient_is_perceived_healthy_trigger = no
								ROOT = {
									trait = cynical
								}
							}
						}
						
						OR = {
							new_ingredient_trigger = no
							ROOT = {
								OR = {
									learning >= 15
									AND = {
										trait = cynical
										is_dumb_trigger = no
									}
								}
							}
						}
					}
					
					NOT = {
						trait = trusting
					}
				}
				
				character_event = { id = soh.11828 } # Attempt to purify ingredient?
			}
			
			else = {
				add_ingredient_to_immortality_potion_actual_effect = yes
			
				event_target:target_immortality_potion_ingredient = {
					unsafe_destroy_artifact = yes
				}
				
				character_event = { id = soh.11818 days = 30 random = 90 } # Next step
			}
		}
		
		ai_chance = {
			factor = 100
		}
	}
}

# Did not get help
character_event = {
	id = soh.11824
	desc = EVTDESC_SOH_11824
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11824 # And here I thought they wanted me to finish the potion!
		
		opinion = {
			who = FROM
			modifier = opinion_did_not_provide_immortality_potion_ingredient
		}
	}
}

# Another ingredient needed - you need to get it
character_event = {
	id = soh.11825
	desc = {
		text = EVTDESCA_SOH_11825
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				character = ROOT
			}
		}
	}
	desc = {
		text = EVTDESCB_SOH_11825
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				NOT = {
					character = ROOT
				}
			}
		}
	}
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11825 # I guess I will have to find it...
	}
}

# AI adds ingredient on_yearly_pulse
character_event = {
	id = soh.11826
	hide_window = yes
	
	is_triggered_only = yes # on_yearly_pulse
	
	min_age = 16
	is_in_society = yes
	prisoner = no
	
	trigger = {
		has_character_modifier = brewing_immortality_potion
		has_character_flag = brewing_immortality_potion_actual
		is_actually_incapable_trigger = no
		has_immortality_potion_ingredient_trigger = yes
	}
	
	immediate = {
		add_target_immortality_potion_ingredient_effect = yes
		
		if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 50
				}
				
				event_target:target_immortality_potion_ingredient = {
					OR = {
						ingredient_is_unhealthy_trigger = yes
						AND = {
							ingredient_is_perceived_healthy_trigger = no
							ROOT = {
								trait = cynical
							}
						}
					}
					
					OR = {
						new_ingredient_trigger = no
						ROOT = {
							OR = {
								learning >= 15
								AND = {
									trait = cynical
									is_dumb_trigger = no
								}
							}
						}
					}
				}
				
				NOT = {
					trait = trusting
				}
			}
			
			character_event = { id = soh.11828 } # Attempt to purify ingredient?
		}
		
		else = {
			add_ingredient_to_immortality_potion_actual_effect = yes
			
			event_target:target_immortality_potion_ingredient = {
				unsafe_destroy_artifact = yes
			}
			
			character_event = { id = soh.11818 days = 30 random = 90 } # Next step
		}
	}
}

# Used decision to add ingredient
character_event = {
	id = soh.11827
	desc = {
		text = EVTDESCA_SOH_11827
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				character = ROOT
			}
		}
	}
	desc = {
		text = EVTDESCB_SOH_11827
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				NOT = {
					character = ROOT
				}
			}
		}
	}
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes # add_ingredient_to_immortality_potion decision
	
	immediate = {
		random_artifact = {
			limit = {
				ingredient_matches_immortality_potion_trigger = yes
			}
			
			save_event_target_as = target_immortality_potion_ingredient
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11827 # Time to add it to the potion!
		
		custom_tooltip = {
			text = ingredient_will_be_added_to_immortality_potion
			
			if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 50
					}
					
					event_target:target_immortality_potion_ingredient = {
						OR = {
							ingredient_is_unhealthy_trigger = yes
							AND = {
								ingredient_is_perceived_healthy_trigger = no
								ROOT = {
									trait = cynical
								}
							}
						}
						
						OR = {
							new_ingredient_trigger = no
							ROOT = {
								OR = {
									learning >= 15
									AND = {
										trait = cynical
										is_dumb_trigger = no
									}
								}
							}
						}
					}
					
					NOT = {
						trait = trusting
					}
				}
				
				character_event = { id = soh.11828 } # Attempt to purify ingredient?
			}
			
			else = {
				add_ingredient_to_immortality_potion_actual_effect = yes
			
				event_target:target_immortality_potion_ingredient = {
					unsafe_destroy_artifact = yes
				}
				
				character_event = { id = soh.11818 days = 30 random = 90 } # Next step
			}
		}
	}
}

# Ingredient might be harmful - attempt to purify it?
character_event = {
	id = soh.11828
	desc = {
		text = EVTDESCA_SOH_11828
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				character = ROOT
			}
		}
	}
	desc = {
		text = EVTDESCB_SOH_11828
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				NOT = {
					character = ROOT
				}
			}
		}
	}
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11828 # I will attempt to purify it!
		
		custom_tooltip = {
			text = ingredient_will_be_purified
		
			save_immortality_potion_ingredient_for_purification_effect = yes
					
			event_target:target_immortality_potion_ingredient = {
				unsafe_destroy_artifact = yes
			}
			
			random_list = {
				50 = {
					trigger = {
						learning >= 15
					}
					
					mult_modifier = {
						factor = 2
						trait = physician
					}
					
					mult_modifier = {
						factor = 2
						learning >= 20
					}
					
					mult_modifier = {
						factor = 2
						learning >= 25
					}
					
					character_event = { id = soh.11829 days = 7 random = 7 } # Purified the ingredient
				}
				
				50 = {
					trigger = {
						learning < 30
					}
					
					character_event = { id = soh.11830 days = 7 random = 7 } # Failed to purify the ingredient
				}
			}
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = slothful
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11828 # I think I know how to use it safely...
		
		custom_tooltip = {
			text = ingredient_will_be_added_to_immortality_potion
		
			add_ingredient_to_immortality_potion_actual_effect = yes
					
			event_target:target_immortality_potion_ingredient = {
				unsafe_destroy_artifact = yes
			}
			
			character_event = { id = soh.11818 days = 30 random = 90 } # Next step
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					trait = cynical
					trait = paranoid
				}
			}
		}
	}
}

# Purified ingredient
character_event = {
	id = soh.11829
	desc = {
		text = EVTDESCA_SOH_11829
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				character = ROOT
			}
		}
	}
	desc = {
		text = EVTDESCB_SOH_11829
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				NOT = {
					character = ROOT
				}
			}
		}
	}
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11829 # Excellent!
		
		custom_tooltip = {
			text = purified_ingredient_will_be_added_to_immortality_potion
		
			add_purified_ingredient_to_immortality_potion_actual_effect = yes
			
			character_event = { id = soh.11818 days = 30 random = 90 } # Next step
		}
	}
}

# Failed to purify ingredient
character_event = {
	id = soh.11830
	desc = {
		text = EVTDESCA_SOH_11830
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				character = ROOT
			}
		}
	}
	desc = {
		text = EVTDESCB_SOH_11830
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				NOT = {
					character = ROOT
				}
			}
		}
	}
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11830 # Oh, well...
		
		custom_tooltip = {
			text = non_purified_ingredient_will_be_added_to_immortality_potion
		
			add_non_purified_ingredient_to_immortality_potion_actual_effect = yes
			
			character_event = { id = soh.11818 days = 30 random = 90 } # Next step
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11830 # I should get more and try again...
		
		ai_chance = {
			factor = 0
		}
	}
}

# You have a useful book - make use of it
character_event = {
	id = soh.11831
	desc = {
		text = EVTDESCA_SOH_11831
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				character = ROOT
			}
		}
	}
	desc = {
		text = EVTDESCB_SOH_11831
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				NOT = {
					character = ROOT
				}
			}
		}
	}
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		random_artifact = {
			limit = {
				is_unused_alchemy_book_trigger = yes
			}
			
			save_event_target_as = target_alchemy_book
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11831 # Knowledge is power!
		
		custom_tooltip = {
			text = improve_immortality_potion_quality_book
			
			improve_immortality_potion_quality_book_effect = yes
			
			character_event = { id = soh.11818 days = 30 random = 90 } # Next step
		}
	}
}

# You might need a useful book - ask the person that is getting the potion?
character_event = {
	id = soh.11832
	desc = EVTDESC_SOH_11832
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11832 # I should ask them!
		
		persistent_event_target:getting_immortality_potion = {
			character_event = { id = soh.11833 } # Receiver is asked
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11832 # I should not bother them...
		
		character_event = { id = soh.11818 days = 30 random = 90 } # Next step
		
		ai_chance = {
			factor = 0
		}
	}
}

# Asked for book
character_event = {
	id = soh.11833
	desc = EVTDESC_SOH_11833
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		any_artifact = {
			limit = {
				is_unused_alchemy_book_from_trigger = yes
			}
			
			save_event_target_as = target_alchemy_book
		}
	}
	
	option = {
		trigger = {
			event_target:target_alchemy_book = {
				always = yes
			}
		}
		
		name = EVTOPTA_SOH_11833 # I can provide a book!
		
		event_target:target_alchemy_book = {
			transfer_artifact = {
				from = ROOT
				to = FROM
			}
		}
		
		FROM = {
			character_event = { id = soh.11834 } # Inform FROM
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.5
				trait = erudite
			}
			
			mult_modifier = {
				factor = 0.5
				trait = scholar
			}
		}
	}
	
	option = {
		trigger = {
			wealth >= 0
		}
		
		name = EVTOPTB_SOH_11833 # I can provide some money...
		
		wealth = -100
		
		FROM = {
			wealth = 100
			character_event = { id = soh.11835 } # Inform FROM
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = greedy
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = charitable
			}
		}
	}
	
	option = {
		name = EVTOPTC_SOH_11833 # I should not have to provide that!
		
		FROM = {
			character_event = { id = soh.11836 } # Inform FROM
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					OR = {
						is_friend = FROM
						is_lover = FROM
					}
					OR = {
						wealth >= 0
						event_target:target_alchemy_book = {
							always = yes
						}
					}
					NOT = {
						trait = greedy
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = greedy
			}
		}
	}
}

# Got liege's book
character_event = {
	id = soh.11834
	desc = EVTDESC_SOH_11834
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		random_artifact = {
			limit = {
				is_unused_alchemy_book_trigger = yes
			}
			
			save_event_target_as = target_alchemy_book
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11834 # Knowledge is power!
		
		custom_tooltip = {
			text = improve_immortality_potion_quality_book
			
			improve_immortality_potion_quality_book_effect = yes
			
			character_event = { id = soh.11818 days = 30 random = 90 } # Next step
		}
	}
}

# Got money for book
character_event = {
	id = soh.11835
	desc = EVTDESC_SOH_11835
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11835 # Knowledge is power!
		
		wealth = -100
		
		add_random_new_alchemy_book_effect = yes
		
		custom_tooltip = {
			text = improve_immortality_potion_quality_book
			
			improve_immortality_potion_quality_book_effect = yes
			
			character_event = { id = soh.11818 days = 30 random = 90 } # Next step
		}
		
		ai_chance = {
			factor = 100
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11835 # Actually, I think I will hang on to this...
		
		character_event = { id = soh.11818 days = 30 random = 90 } # Next step
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					OR = {
						is_friend = FROM
						is_lover = FROM
					}
					NOR = {
						trait = deceitful
						trait = greedy
					}
				}
			}
			
			mult_modifier = {
				factor = 2
				trait = deceitful
			}
			
			mult_modifier = {
				factor = 2
				trait = greedy
			}
			
			mult_modifier = {
				factor = 2
				opinion = {
					who = FROM
					value < 25
				}
			}
			
			mult_modifier = {
				factor = 2
				opinion = {
					who = FROM
					value < 0
				}
			}
		}
	}
}

# Got nothing
character_event = {
	id = soh.11836
	desc = EVTDESC_SOH_11836
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11836 # And here I thought they wanted me to finish the potion!
		
		character_event = { id = soh.11818 days = 30 random = 90 } # Next step
		
		opinion = {
			who = FROM
			modifier = opinion_did_not_provide_immortality_potion_book
		}
	}
}

# You might need a useful book - purchase it?
character_event = {
	id = soh.11837
	desc = {
		text = EVTDESCA_SOH_11837
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				character = ROOT
			}
		}
	}
	desc = {
		text = EVTDESCB_SOH_11837
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				NOT = {
					character = ROOT
				}
			}
		}
	}
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11837 # Knowledge is power!
		
		wealth = -100
		
		add_random_new_alchemy_book_effect = yes
		
		custom_tooltip = {
			text = improve_immortality_potion_quality_book
			
			improve_immortality_potion_quality_book_effect = yes
			
			character_event = { id = soh.11818 days = 30 random = 90 } # Next step
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = greedy
				}
			}
			
			mult_modifier = {
				factor = 2
				trait = erudite
			}
			
			mult_modifier = {
				factor = 2
				trait = scholar
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11837 # I will make do without it...
		
		character_event = { id = soh.11818 days = 30 random = 90 } # Next step
		
		ai_chance = {
			factor = 100
		}
	}
}

# Think of some potentially useful ingredients you know of - add them?
character_event = {
	id = soh.11838
	desc = {
		text = EVTDESCA_SOH_11838
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				character = ROOT
			}
		}
	}
	desc = {
		text = EVTDESCB_SOH_11838
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				NOT = {
					character = ROOT
				}
			}
		}
	}
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		random_artifact = {
			limit = {
				has_artifact_flag = ingredient
				has_been_used_in_immortality_potion_trigger = no
			}
			
			save_event_target_as = target_immortality_potion_ingredient
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11838 # I should add it to the potion!
		
		custom_tooltip = {
			text = ingredient_will_be_added_to_immortality_potion
			
			if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 50
					}
					
					event_target:target_immortality_potion_ingredient = {
						OR = {
							ingredient_is_unhealthy_trigger = yes
							AND = {
								ingredient_is_perceived_healthy_trigger = no
								ROOT = {
									trait = cynical
								}
							}
						}
						
						OR = {
							new_ingredient_trigger = no
							ROOT = {
								OR = {
									learning >= 15
									AND = {
										trait = cynical
										is_dumb_trigger = no
									}
								}
							}
						}
					}
					
					NOT = {
						trait = trusting
					}
				}
				
				character_event = { id = soh.11828 } # Attempt to purify ingredient?
			}
			
			else = {
				add_ingredient_to_immortality_potion_actual_effect = yes
			
				event_target:target_immortality_potion_ingredient = {
					unsafe_destroy_artifact = yes
				}
				
				character_event = { id = soh.11818 days = 30 random = 90 } # Next step
			}
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					trait = stubborn
					NOR = {
						trait = wroth
						trait = arbitrary
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				event_target:target_immortality_potion_ingredient = {
					ingredient_is_unhealthy_trigger = yes
					new_ingredient_trigger = no
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11838 # I should stick with my initial recipie...
		
		character_event = { id = soh.11818 days = 30 random = 90 } # Next step
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = wroth
			}
		}
	}
}

# Lost notes - write them from memory?
character_event = {
	id = soh.11839
	desc = {
		text = EVTDESCA_SOH_11839
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				character = ROOT
			}
		}
	}
	desc = {
		text = EVTDESCB_SOH_11839
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				NOT = {
					character = ROOT
				}
			}
		}
	}
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11839 # I will try to remember...
		
		hidden_tooltip = {
			random_list = {
				5 = {
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 50
						}
					}
					
					change_variable = {
						which = immortality_potion_quality
						value = 2
					}
				}
				10 = {
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 50
						}
					}
					
					change_variable = {
						which = immortality_potion_quality
						value = 1
					}
				}
				50 = {
					# Nothing
				}
				10 = {
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_healing_knowledge
							value < 50
						}
					}
					
					change_variable = {
						which = immortality_potion_quality
						value = -1
					}
				}
				5 = {
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_healing_knowledge
							value < 50
						}
					}
					
					change_variable = {
						which = immortality_potion_quality
						value = -2
					}
				}
			}
		}
		
		character_event = { id = soh.11818 days = 30 random = 90 } # Next step
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = cynical
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = wroth
			}
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11839 # This will set me back...
		
		hidden_tooltip = {
			change_variable = {
				which = immortality_potion_progress
				value = -2
			}
		}
		
		character_event = { id = soh.11818 days = 30 random = 90 } # Next step
		
		ai_chance = {
			factor = 100
		}
	}
}

# Other society member might get to offer assitance (or "assitance")
character_event = {
	id = soh.11840
	desc = {
		text = EVTDESCA_SOH_11840
		trigger = {
			FROM = {
				persistent_event_target:getting_immortality_potion = {
					character = FROM
				}
			}
		}
	}
	desc = {
		text = EVTDESCB_SOH_11840
		trigger = {
			FROM = {
				persistent_event_target:getting_immortality_potion = {
					NOT = {
						character = FROM
					}
				}
			}
		}
	}
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11840 # I will offer my assistance!
		
		FROM = {
			character_event = { id = soh.11841 } # Alchemist approached
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					FROM = {
						persistent_event_target:getting_immortality_potion = {
							is_rival = ROOT
						}
					}
					is_rival = FROM
					trait = greedy
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = slothful
			}
			
			mult_modifier = {
				factor = 0.1
				trait = ambitious
			}
		}
	}
	
	option = {
		trigger = {
			has_dlc = "Conclave"
			NOR = {
				holds_favor_on = FROM
				owes_favor_to = FROM
			}
		}
		
		name = EVTOPTB_SOH_11840 # I will offer to help, for a Favor...
		
		FROM = {
			character_event = { id = soh.11844 } # Alchemist approached
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					FROM = {
						persistent_event_target:getting_immortality_potion = {
							OR = {
								is_friend = ROOT
								is_lover = ROOT
							}
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = content
			}
			
			mult_modifier = {
				factor = 0.1
				trait = greedy
			}
		}
	}
	
	option = {
		trigger = {
			has_dlc = "Conclave"
			owes_favor_to = FROM
		}
		
		name = EVTOPTC_SOH_11840 # I will offer to help, if they are willing to consider it a Favor...
		
		FROM = {
			character_event = { id = soh.11847 } # Alchemist approached
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					FROM = {
						persistent_event_target:getting_immortality_potion = {
							OR = {
								is_friend = ROOT
								is_lover = ROOT
							}
						}
					}
					trait = trusting
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = paranoid
			}
			
			mult_modifier = {
				factor = 0.1
				trait = greedy
			}
		}
	}
	
	option = {
		name = EVTOPTD_SOH_11840 # My help will cost FROM...
		
		FROM = {
			character_event = { id = soh.11850 } # Alchemist approached
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = charitable
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = greedy
			}
			
			mult_modifier = {
				factor = 0.1
				trait = ambitious
			}
		}
	}
	
	option = {
		name = EVTOPTE_SOH_11840 # I don't want to get involved...
		
		FROM = {
			character_event = { id = soh.11818 days = 30 random = 90 } # Next step
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					OR = {
						AND = {
							FROM = {
								persistent_event_target:getting_immortality_potion = {
									is_rival = ROOT
								}
							}
							NOR = {
								trait = kind
								trait = just
								trait = honest
							}
						}
						FROM = {
							persistent_event_target:getting_immortality_potion = {
								OR = {
									is_friend = ROOT
									is_lover = ROOT
								}
							}
						}
					}
					NOT = {
						trait = slothful
					}
				}
			}
		}
	}
}

# Offered assistance - asking for nothing
character_event = {
	id = soh.11841
	desc = {
		text = EVTDESCA_SOH_11841
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				character = ROOT
			}
		}
	}
	desc = {
		text = EVTDESCB_SOH_11841
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				NOT = {
					character = ROOT
				}
			}
		}
	}
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11841 # Certainly!
		
		character_event = { id = soh.11818 days = 30 random = 90 } # Next step
		
		FROM = {
			character_event = { id = soh.11842 days = 2 }
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					trait = proud
					AND = {
						is_rival = FROM
						NOT = {
							trait = trusting
						}
					}
					AND = {
						persistent_event_target:getting_immortality_potion = {
							is_rival = FROM
							OR = {
								is_friend = ROOT
								is_lover = ROOT
							}
						}
						NOT = {
							trait = trusting
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				persistent_event_target:getting_immortality_potion = {
					is_rival = FROM
					NOT = {
						is_rival = ROOT
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = paranoid
			}
			
			mult_modifier = {
				factor = 0.1
				trait = stubborn
			}
			
			mult_modifier = {
				factor = 10
				trait = trusting
			}
			
			mult_modifier = {
				factor = 10
				trait = slothful
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11841 # I don't need their help!
		
		character_event = { id = soh.11818 days = 30 random = 90 } # Next step
		
		FROM = {
			character_event = { id = soh.11843 days = 2 }
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					OR = {
						is_friend = FROM
						is_lover = FROM
					}
					persistent_event_target:getting_immortality_potion = {
						OR = {
							is_friend = FROM
							is_lover = FROM
						}
					}
					NOR = {
						trait = paranoid
						trait = stubborn
						trait = proud
					}
				}
			}
			
			mult_modifier = {
				factor = 2
				FROM = {
					society_rank >= 2
				}
			}
			
			mult_modifier = {
				factor = 5
				FROM = {
					society_rank >= 2
				}
			}
		}
	}
}

# Offer accepted
character_event = {
	id = soh.11842
	desc = {
		text = EVTDESCA_SOH_11842
		trigger = {
			FROM = {
				persistent_event_target:getting_immortality_potion = {
					character = FROM
				}
			}
		}
	}
	desc = {
		text = EVTDESCB_SOH_11842
		trigger = {
			FROM = {
				persistent_event_target:getting_immortality_potion = {
					NOT = {
						character = FROM
					}
				}
			}
		}
	}
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11842 # This will help!
		
		custom_tooltip = {
			text = this_will_make_the_potion_healthier
			
			improve_froms_immortality_potion_actual_effect = yes
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						NOT = {
							is_rival = ROOT
						}
					}
				}
			}
			
			mult_modifier = {	
				factor = 10
				OR = {
					is_friend = FROM
					is_lover = FROM
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = kind
			}
			
			mult_modifier = {
				factor = 10
				trait = honest
			}
			
			mult_modifier = {
				factor = 10
				trait = just
			}
			
			mult_modifier = {
				factor = 0.5
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value < 0
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.2
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value < -25
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value < -50
						}
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11842 # This will help... kill the target!
		
		custom_tooltip = {
			text = this_will_make_the_potion_less_healthy
			
			worsen_froms_immortality_potion_actual_effect = yes
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						NOR = {
							is_friend = ROOT
							is_lover = ROOT
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				is_rival = FROM
			}
			
			mult_modifier = {
				factor = 10
				trait = cruel
			}
			
			mult_modifier = {
				factor = 10
				trait = deceitful
			}
			
			mult_modifier = {
				factor = 10
				trait = arbitrary
			}
			
			mult_modifier = {
				factor = 0.5
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value >= 25
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.2
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value >= 50
						}
					}
				}
			}
		}
	}
}

# Offer refused
character_event = {
	id = soh.11843
	desc = {
		text = EVTDESCA_SOH_11843
		trigger = {
			FROM = {
				persistent_event_target:getting_immortality_potion = {
					character = FROM
				}
			}
		}
	}
	desc = {
		text = EVTDESCB_SOH_11843
		trigger = {
			FROM = {
				persistent_event_target:getting_immortality_potion = {
					NOT = {
						character = FROM
					}
				}
			}
		}
	}
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11843 # I see...
	}
}

# Offered assistance - asking for Favor
character_event = {
	id = soh.11844
	desc = {
		text = EVTDESCA_SOH_11844
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				character = ROOT
			}
		}
	}
	desc = {
		text = EVTDESCB_SOH_11844
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				NOT = {
					character = ROOT
				}
			}
		}
	}
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11844 # Certainly!
		
		character_event = { id = soh.11818 days = 30 random = 90 } # Next step
		
		FROM = {
			add_favor = ROOT
			
			character_event = { id = soh.11845 days = 2 }
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					trait = proud
					AND = {
						is_rival = FROM
						NOT = {
							trait = trusting
						}
					}
					AND = {
						persistent_event_target:getting_immortality_potion = {
							is_rival = FROM
							OR = {
								is_friend = ROOT
								is_lover = ROOT
							}
						}
						NOT = {
							trait = trusting
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				persistent_event_target:getting_immortality_potion = {
					is_rival = FROM
					NOT = {
						is_rival = ROOT
					}
				}
			}
			
			mult_modifier = {
				factor = 0.01
				trait = paranoid
			}
			
			mult_modifier = {
				factor = 0.1
				trait = stubborn
			}
			
			mult_modifier = {
				factor = 10
				trait = trusting
			}
			
			mult_modifier = {
				factor = 10
				trait = slothful
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11844 # I don't need their help!
		
		character_event = { id = soh.11818 days = 30 random = 90 } # Next step
		
		FROM = {
			character_event = { id = soh.11846 days = 2 }
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					OR = {
						is_friend = FROM
						is_lover = FROM
					}
					persistent_event_target:getting_immortality_potion = {
						OR = {
							is_friend = FROM
							is_lover = FROM
						}
					}
					NOR = {
						trait = paranoid
						trait = stubborn
						trait = proud
					}
				}
			}
			
			mult_modifier = {
				factor = 2
				FROM = {
					society_rank >= 2
				}
			}
			
			mult_modifier = {
				factor = 5
				FROM = {
					society_rank >= 2
				}
			}
		}
	}
}

# Offer accepted
character_event = {
	id = soh.11845
	desc = {
		text = EVTDESCA_SOH_11845
		trigger = {
			FROM = {
				persistent_event_target:getting_immortality_potion = {
					character = FROM
				}
			}
		}
	}
	desc = {
		text = EVTDESCB_SOH_11845
		trigger = {
			FROM = {
				persistent_event_target:getting_immortality_potion = {
					NOT = {
						character = FROM
					}
				}
			}
		}
	}
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11845 # This will help!
		
		custom_tooltip = {
			text = this_will_make_the_potion_healthier
			
			improve_froms_immortality_potion_actual_effect = yes
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						NOT = {
							is_rival = ROOT
						}
					}
				}
			}
			
			mult_modifier = {	
				factor = 10
				OR = {
					is_friend = FROM
					is_lover = FROM
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = kind
			}
			
			mult_modifier = {
				factor = 10
				trait = honest
			}
			
			mult_modifier = {
				factor = 10
				trait = just
			}
			
			mult_modifier = {
				factor = 0.5
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value < 0
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.2
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value < -25
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value < -50
						}
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11845 # This will help... kill the target!
		
		custom_tooltip = {
			text = this_will_make_the_potion_less_healthy
			
			worsen_froms_immortality_potion_actual_effect = yes
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						NOR = {
							is_friend = ROOT
							is_lover = ROOT
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				is_rival = FROM
			}
			
			mult_modifier = {
				factor = 10
				trait = cruel
			}
			
			mult_modifier = {
				factor = 10
				trait = deceitful
			}
			
			mult_modifier = {
				factor = 10
				trait = arbitrary
			}
			
			mult_modifier = {
				factor = 0.5
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value >= 25
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.2
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value >= 50
						}
					}
				}
			}
		}
	}
}

# Offer refused
character_event = {
	id = soh.11846
	desc = {
		text = EVTDESCA_SOH_11846
		trigger = {
			FROM = {
				persistent_event_target:getting_immortality_potion = {
					character = FROM
				}
			}
		}
	}
	desc = {
		text = EVTDESCB_SOH_11846
		trigger = {
			FROM = {
				persistent_event_target:getting_immortality_potion = {
					NOT = {
						character = FROM
					}
				}
			}
		}
	}
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11846 # I see...
	}
}

# Offered assistance - asking for Favor to be considered repaid
character_event = {
	id = soh.11847
	desc = {
		text = EVTDESCA_SOH_11847
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				character = ROOT
			}
		}
	}
	desc = {
		text = EVTDESCB_SOH_11847
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				NOT = {
					character = ROOT
				}
			}
		}
	}
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11847 # Certainly!
		
		character_event = { id = soh.11818 days = 30 random = 90 } # Next step
		
		remove_favor = FROM
		
		FROM = {
			character_event = { id = soh.11848 days = 2 }
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					trait = proud
					AND = {
						is_rival = FROM
						NOT = {
							trait = trusting
						}
					}
					AND = {
						persistent_event_target:getting_immortality_potion = {
							is_rival = FROM
							OR = {
								is_friend = ROOT
								is_lover = ROOT
							}
						}
						NOT = {
							trait = trusting
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				persistent_event_target:getting_immortality_potion = {
					is_rival = FROM
					NOT = {
						is_rival = ROOT
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = paranoid
			}
			
			mult_modifier = {
				factor = 0.1
				trait = ambitious
			}
			
			mult_modifier = {
				factor = 0.1
				trait = stubborn
			}
			
			mult_modifier = {
				factor = 10
				trait = trusting
			}
			
			mult_modifier = {
				factor = 10
				trait = slothful
			}
			
			mult_modifier = {
				factor = 10
				trait = content
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11847 # I don't need their help!
		
		character_event = { id = soh.11818 days = 30 random = 90 } # Next step
		
		FROM = {
			character_event = { id = soh.11849 days = 2 }
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					OR = {
						is_friend = FROM
						is_lover = FROM
					}
					persistent_event_target:getting_immortality_potion = {
						OR = {
							is_friend = FROM
							is_lover = FROM
						}
					}
					NOR = {
						trait = paranoid
						trait = stubborn
						trait = proud
					}
				}
			}
			
			mult_modifier = {
				factor = 2
				FROM = {
					society_rank >= 2
				}
			}
			
			mult_modifier = {
				factor = 5
				FROM = {
					society_rank >= 2
				}
			}
		}
	}
}

# Offer accepted
character_event = {
	id = soh.11848
	desc = {
		text = EVTDESCA_SOH_11848
		trigger = {
			FROM = {
				persistent_event_target:getting_immortality_potion = {
					character = FROM
				}
			}
		}
	}
	desc = {
		text = EVTDESCB_SOH_11848
		trigger = {
			FROM = {
				persistent_event_target:getting_immortality_potion = {
					NOT = {
						character = FROM
					}
				}
			}
		}
	}
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11848 # This will help!
		
		custom_tooltip = {
			text = this_will_make_the_potion_healthier
			
			improve_froms_immortality_potion_actual_effect = yes
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						NOT = {
							is_rival = ROOT
						}
					}
				}
			}
			
			mult_modifier = {	
				factor = 10
				OR = {
					is_friend = FROM
					is_lover = FROM
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = kind
			}
			
			mult_modifier = {
				factor = 10
				trait = honest
			}
			
			mult_modifier = {
				factor = 10
				trait = just
			}
			
			mult_modifier = {
				factor = 0.5
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value < 0
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.2
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value < -25
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value < -50
						}
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11848 # This will help... kill the target!
		
		custom_tooltip = {
			text = this_will_make_the_potion_less_healthy
			
			worsen_froms_immortality_potion_actual_effect = yes
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						NOR = {
							is_friend = ROOT
							is_lover = ROOT
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				is_rival = FROM
			}
			
			mult_modifier = {
				factor = 10
				trait = cruel
			}
			
			mult_modifier = {
				factor = 10
				trait = deceitful
			}
			
			mult_modifier = {
				factor = 10
				trait = arbitrary
			}
			
			mult_modifier = {
				factor = 0.5
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value >= 25
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.2
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value >= 50
						}
					}
				}
			}
		}
	}
}

# Offer refused
character_event = {
	id = soh.11849
	desc = {
		text = EVTDESCA_SOH_11849
		trigger = {
			FROM = {
				persistent_event_target:getting_immortality_potion = {
					character = FROM
				}
			}
		}
	}
	desc = {
		text = EVTDESCB_SOH_11849
		trigger = {
			FROM = {
				persistent_event_target:getting_immortality_potion = {
					NOT = {
						character = FROM
					}
				}
			}
		}
	}
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11849 # I see...
	}
}

# Offered assistance - asking for money
character_event = {
	id = soh.11850
	desc = {
		text = EVTDESCA_SOH_11850
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				character = ROOT
			}
		}
	}
	desc = {
		text = EVTDESCB_SOH_11850
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				NOT = {
					character = ROOT
				}
			}
		}
	}
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11850 # Certainly!
		
		character_event = { id = soh.11818 days = 30 random = 90 } # Next step
		
		if = {
			limit = {
				society_rank == 4
			}
			
			transfer_scaled_wealth = {
				to = FROM
				value = 0.2
				min = 100
				max = 400
			}
		}
		
		else_if = {
			limit = {
				society_rank == 3
			}
			
			transfer_scaled_wealth = {
				to = FROM
				value = 0.15
				min = 75
				max = 300
			}
		}
		
		else_if = {
			limit = {
				society_rank == 2
			}
			
			transfer_scaled_wealth = {
				to = FROM
				value = 0.1
				min = 50
				max = 200
			}
		}
		
		else = {
			transfer_scaled_wealth = {
				to = FROM
				value = 0.05
				min = 25
				max = 100
			}
		}
		
		FROM = {
			character_event = { id = soh.11851 days = 2 }
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					trait = proud
					AND = {
						is_rival = FROM
						NOT = {
							trait = trusting
						}
					}
					AND = {
						persistent_event_target:getting_immortality_potion = {
							is_rival = FROM
							OR = {
								is_friend = ROOT
								is_lover = ROOT
							}
						}
						NOT = {
							trait = trusting
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				persistent_event_target:getting_immortality_potion = {
					is_rival = FROM
					NOT = {
						is_rival = ROOT
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = paranoid
			}
			
			mult_modifier = {
				factor = 0.1
				trait = stubborn
			}
			
			mult_modifier = {
				factor = 10
				trait = trusting
			}
			
			mult_modifier = {
				factor = 0.1
				trait = greedy
			}
			
			mult_modifier = {
				factor = 10
				trait = charitable
			}
			
			mult_modifier = {
				factor = 10
				trait = slothful
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11850 # I don't need their help!
		
		character_event = { id = soh.11818 days = 30 random = 90 } # Next step
		
		FROM = {
			character_event = { id = soh.11852 days = 2 }
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					OR = {
						is_friend = FROM
						is_lover = FROM
					}
					persistent_event_target:getting_immortality_potion = {
						OR = {
							is_friend = FROM
							is_lover = FROM
						}
					}
					NOR = {
						trait = paranoid
						trait = stubborn
						trait = proud
					}
				}
			}
			
			mult_modifier = {
				factor = 2
				FROM = {
					society_rank >= 2
				}
			}
			
			mult_modifier = {
				factor = 5
				FROM = {
					society_rank >= 2
				}
			}
		}
	}
}

# Offer accepted
character_event = {
	id = soh.11851
	desc = {
		text = EVTDESCA_SOH_11851
		trigger = {
			FROM = {
				persistent_event_target:getting_immortality_potion = {
					character = FROM
				}
			}
		}
	}
	desc = {
		text = EVTDESCB_SOH_11851
		trigger = {
			FROM = {
				persistent_event_target:getting_immortality_potion = {
					NOT = {
						character = FROM
					}
				}
			}
		}
	}
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11851 # This will help!
		
		custom_tooltip = {
			text = this_will_make_the_potion_healthier
			
			improve_froms_immortality_potion_actual_effect = yes
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						NOT = {
							is_rival = ROOT
						}
					}
				}
			}
			
			mult_modifier = {	
				factor = 10
				OR = {
					is_friend = FROM
					is_lover = FROM
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = kind
			}
			
			mult_modifier = {
				factor = 10
				trait = honest
			}
			
			mult_modifier = {
				factor = 10
				trait = just
			}
			
			mult_modifier = {
				factor = 0.5
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value < 0
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.2
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value < -25
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value < -50
						}
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11851 # This will help... kill the target!
		
		custom_tooltip = {
			text = this_will_make_the_potion_less_healthy
			
			worsen_froms_immortality_potion_actual_effect = yes
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						NOR = {
							is_friend = ROOT
							is_lover = ROOT
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				is_rival = FROM
			}
			
			mult_modifier = {
				factor = 10
				trait = cruel
			}
			
			mult_modifier = {
				factor = 10
				trait = deceitful
			}
			
			mult_modifier = {
				factor = 10
				trait = arbitrary
			}
			
			mult_modifier = {
				factor = 0.5
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value >= 25
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.2
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value >= 50
						}
					}
				}
			}
		}
	}
}

# Offer refused
character_event = {
	id = soh.11852
	desc = {
		text = EVTDESCA_SOH_11852
		trigger = {
			FROM = {
				persistent_event_target:getting_immortality_potion = {
					character = FROM
				}
			}
		}
	}
	desc = {
		text = EVTDESCB_SOH_11852
		trigger = {
			FROM = {
				persistent_event_target:getting_immortality_potion = {
					NOT = {
						character = FROM
					}
				}
			}
		}
	}
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11852 # I see...
	}
}

# Accidentally poured the wrong thing in the potion - keep going or attempt to recreate what you had?
character_event = {
	id = soh.11853
	desc = {
		text = EVTDESCA_SOH_11853
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				character = ROOT
			}
		}
	}
	desc = {
		text = EVTDESCB_SOH_11853
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				NOT = {
					character = ROOT
				}
			}
		}
	}
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		random_artifact = {
			limit = {
				has_artifact_flag = ingredient
				has_been_used_in_immortality_potion_trigger = no
			}
			
			save_event_target_as = target_immortality_potion_ingredient
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11853 # It's fine...
		
		custom_tooltip = {
			text = ingredient_will_be_added_to_immortality_potion
			
			add_ingredient_to_immortality_potion_actual_effect = yes
		
			event_target:target_immortality_potion_ingredient = {
				unsafe_destroy_artifact = yes
			}
			
			character_event = { id = soh.11818 days = 30 random = 90 } # Next step
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					persistent_event_target:getting_immortality_potion = {
						character = ROOT
					}
					trait = paranoid
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = slothful
			}
			
			mult_modifier = {
				factor = 10
				is_dumb_trigger = yes
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11853 # It's fine...
		
		hidden_tooltip = {
			random_list = {
				50 = {
					trigger = {
						learning >= 15
					}
					
					mult_modifier = {
						factor = 2
						trait = physician
					}
					
					mult_modifier = {
						factor = 2
						learning >= 20
					}
					
					mult_modifier = {
						factor = 2
						learning >= 25
					}
					
					character_event = { id = soh.11854 days = 7 random = 7 } # Recovery went well
				}
				
				50 = {
					trigger = {
						learning < 30
					}
					
					character_event = { id = soh.11855 days = 7 random = 7 } # Setback
				}
			}
		}
		
		custom_tooltip = {
			text = ingredient_will_be_added_to_immortality_potion
			
			add_ingredient_to_immortality_potion_actual_effect = yes
		
			event_target:target_immortality_potion_ingredient = {
				unsafe_destroy_artifact = yes
			}
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 10
				trait = diligent
			}
			
			mult_modifier = {
				factor = 10
				trait = physician
			}
		}
	}
}

# Recreated potion - it went well
character_event = {
	id = soh.11854
	desc = EVTDESC_SOH_11854
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11854 # That went well enough...
		
		hidden_tooltip = {
			if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 100
					}
				}
				change_variable = {
					which = immortality_potion_quality
					value = 5
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 75
					}
				}
				change_variable = {
					which = immortality_potion_quality
					value = 4
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 50
					}
				}
				change_variable = {
					which = immortality_potion_quality
					value = 3
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 25
					}
				}
				change_variable = {
					which = immortality_potion_quality
					value = 2
				}
			}
			
			else = {
				change_variable = {
					which = immortality_potion_quality
					value = 1
				}
			}
		}
		
		character_event = { id = soh.11818 days = 30 random = 90 } # Next step
	}
}

# Recreated potion - setback
character_event = {
	id = soh.11855
	desc = EVTDESC_SOH_11855
	picture = GFX_evt_experiments_failed
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11855 # Curses!
		
		hidden_tooltip = {
			if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 100
					}
				}
				change_variable = {
					which = immortality_potion_quality
					value = -1
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 75
					}
				}
				change_variable = {
					which = immortality_potion_quality
					value = -2
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 50
					}
				}
				change_variable = {
					which = immortality_potion_quality
					value = -3
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 25
					}
				}
				change_variable = {
					which = immortality_potion_quality
					value = -4
				}
			}
			
			else = {
				change_variable = {
					which = immortality_potion_quality
					value = -5
				}
			}
		}
		
		character_event = { id = soh.11818 days = 30 random = 90 } # Next step
	}
}

# Lunatic gets inspired, for good or for bad
character_event = {
	id = soh.11856
	desc = {
		text = EVTDESCA_SOH_11856
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				character = ROOT
			}
		}
	}
	desc = {
		text = EVTDESCB_SOH_11856
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				NOT = {
					character = ROOT
				}
			}
		}
	}
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		random_artifact = {
			limit = {
				has_artifact_flag = ingredient
				has_been_used_in_immortality_potion_trigger = no
			}
			
			save_event_target_as = target_immortality_potion_ingredient
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11856 # I should add it to the potion!
		
		custom_tooltip = {
			text = ingredient_will_be_added_to_immortality_potion
			
			add_ingredient_to_immortality_potion_actual_effect = yes
		
			event_target:target_immortality_potion_ingredient = {
				unsafe_destroy_artifact = yes
			}
			
			character_event = { id = soh.11818 days = 30 random = 90 } # Next step
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11856 # Let's not...
		
		character_event = { id = soh.11818 days = 30 random = 90 } # Next step
		
		ai_chance = {
			factor = 0
		}
	}
}

# Possessed character tosses something into the potion
character_event = {
	id = soh.11857
	desc = {
		text = EVTDESCA_SOH_11857
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				character = ROOT
			}
		}
	}
	desc = {
		text = EVTDESCB_SOH_11857
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				NOT = {
					character = ROOT
				}
			}
		}
	}
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		random_artifact = {
			limit = {
				has_artifact_flag = ingredient
				has_been_used_in_immortality_potion_trigger = no
			}
			
			save_event_target_as = target_immortality_potion_ingredient
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11857 # I should add it to the potion!
		
		custom_tooltip = {
			text = ingredient_will_be_added_to_immortality_potion
			
			add_ingredient_to_immortality_potion_actual_effect = yes
		
			event_target:target_immortality_potion_ingredient = {
				unsafe_destroy_artifact = yes
			}
			
			character_event = { id = soh.11818 days = 30 random = 90 } # Next step
		}
	}
}

# Courtier in the same court might attempt sabotage (if not having a secret lab)
character_event = {
	id = soh.11858
	desc = {
		text = EVTDESCA_SOH_11858
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				character = ROOT
			}
		}
	}
	desc = {
		text = EVTDESCB_SOH_11858
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				NOT = {
					character = ROOT
				}
			}
		}
	}
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11858 # Let's do it!
		
		hidden_tooltip = {
			random_list = {
				50 = {
					trigger = {
						intrigue >= 10
						attribute_diff = {
							who = FROM
							attribute = intrigue
							value >= -5
						}
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 15
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 20
					}
					
					mult_modifier = {
						factor = 2
						attribute_diff = {
							who = FROM
							attribute = intrigue
							value >= 0
						}
					}
					
					mult_modifier = {
						factor = 2
						attribute_diff = {
							who = FROM
							attribute = intrigue
							value >= 5
						}
					}
					
					mult_modifier = {
						factor = 2
						attribute_diff = {
							who = FROM
							attribute = intrigue
							value >= 10
						}
					}
					
					FROM = {
						character_event = { id = soh.11859 } # Sabotage discovered, perpetrator unknown
					}
				}
				
				50 = {
					character_event = { id = soh.11860 } # Sabotage attempt failed
				}
			}
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						NOR = {
							is_friend = ROOT
							is_lover = ROOT
						}
					}
				}
				NAND = {
					trait = kind
					trait = honest
					trait = just
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = kind
			}
			
			mult_modifier = {
				factor = 0.1
				trait = honest
			}
			
			mult_modifier = {
				factor = 0.1
				trait = just
			}
			
			mult_modifier = {
				factor = 0.1
				trait = paranoid
			}
			
			mult_modifier = {
				factor = 0.1
				OR = {
					is_friend = FROM
					is_lover = FROM
				}
			}
			
			mult_modifier = {
				factor = 2
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value < 0
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 5
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value < -25
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value < 10
						}
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11858 # It is too risky
		
		FROM = {
			character_event = { id = soh.11818 days = 30 random = 90 } # Next step
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					OR = {
						trait = lunatic
						trait = possessed
					}
					FROM = {
						persistent_event_target:getting_immortality_potion = {
							is_rival = ROOT
						}
					}
					NOR = {
						trait = kind
						trait = honest
						trait = just
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = cruel
			}
			
			mult_modifier = {
				factor = 0.1
				trait = deceitful
			}
			
			mult_modifier = {
				factor = 0.1
				trait = arbitrary
			}
			
			mult_modifier = {
				factor = 10
				trait = slothful
			}
		}
	}
}

# Sabotage discovered - perpetrator unknown
character_event = {
	id = soh.11859
	desc = {
		text = EVTDESCA_SOH_11859
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				character = ROOT
			}
		}
	}
	desc = {
		text = EVTDESCB_SOH_11859
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				NOT = {
					character = ROOT
				}
			}
		}
	}
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_intrigue
	
	hide_from = yes
	
	is_triggered_only = yes
	
	immediate = {
		# TIANXIATODO: Base on courtier's skill and alchemical knowledge?
		change_variable = {
			which = immortality_potion_quality
			value = -5
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11859 # Who could have done this?
		
		character_event = { id = soh.11818 days = 30 random = 90 } # Next step
	}
}

# Sabotage attempt discovered - courtier caught
character_event = {
	id = soh.11860
	desc = {
		text = EVTDESCA_SOH_11860
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				character = ROOT
			}
		}
	}
	desc = {
		text = EVTDESCB_SOH_11860
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				NOT = {
					character = ROOT
				}
			}
		}
	}
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11860 # Uh oh...
		
		FROMFROM = {
			character_event = { id = soh.11861 } # Inform the alchemist
		}
	}
}

# Alchemist informed of courtier being caught
character_event = {
	id = soh.11861
	desc = {
		text = EVTDESCA_SOH_11861
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				character = ROOT
			}
		}
	}
	desc = {
		text = EVTDESCB_SOH_11861
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				NOT = {
					character = ROOT
				}
			}
		}
	}
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11861 # I will remember this!
		
		opinion = {
			who = FROM
			modifier = opinion_potion_sabotage
		}
		
		character_event = { id = soh.11818 days = 30 random = 90 } # Next step
	}
	
	option = {
		trigger = {
			is_landed = yes
		}
		
		name = EVTOPTB_SOH_11861 # Guards! Seize them!
		
		FROM = {
			imprison = ROOT
		}
		
		opinion = {
			who = FROM
			modifier = opinion_potion_sabotage
		}
		
		character_event = { id = soh.11818 days = 30 random = 90 } # Next step
	}
}

# Having second thoughts - potion might be bad - brewing for self
character_event = {
	id = soh.11862
	desc = EVTDESC_SOH_11862
	picture = GFX_evt_stressed_ruler
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11862 # I will keep at it!
		
		character_event = { id = soh.11818 days = 30 random = 90 } # Next step
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = cynical
			}
			
			mult_modifier = {
				factor = 0.1
				trait = paranoid
			}
			
			mult_modifier = {
				factor = 0.1
				trait = depressed
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11862 # I should stop...
		
		# TIANXIATODO: Fail quest
		
		# TIANXIATODO: Cleanup
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = diligent
			}
			
			mult_modifier = {
				factor = 0.1
				trait = stubborn
			}
			
			mult_modifier = {
				factor = 0.1
				trait = trusting
			}
		}
	}
}

# Having second thoughts - potion might be bad - brewing for other
character_event = {
	id = soh.11863
	desc = EVTDESC_SOH_11863
	picture = GFX_evt_stressed_ruler
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11863 # I will keep at it!
		
		character_event = { id = soh.11818 days = 30 random = 90 } # Next step
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				persistent_event_target:getting_immortality_potion = {
					OR = {
						is_friend = ROOT
						is_lover = ROOT
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11863 # I should stop...
		
		# TIANXIATODO: Fail quest
		
		persistent_event_target:getting_immortality_potion = {
			character_event = { id = soh.11864 } # Inform target
		}
		
		# TIANXIATODO: Cleanup
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = diligent
			}
			
			mult_modifier = {
				factor = 0.1
				trait = stubborn
			}
		}
	}
	
	option = {
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				is_rival = ROOT
			}
		}
		
		name = EVTOPTC_SOH_11863 # Good! Good!
		
		custom_tooltip = {
			text = will_swap_to_brewing_poison
			
			clr_character_flag = brewing_immortality_potion_actual
			set_character_flag = brewing_immortality_potion_poison
			
			invert_immortality_potion_quality_effect = yes
		
			character_event = { id = soh.11932 days = 30 random = 90 } # Next step
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = kind
			}
			
			mult_modifier = {
				factor = 0.1
				trait = honest
			}
			
			mult_modifier = {
				factor = 0.1
				trait = just
			}
			
			mult_modifier = {
				factor = 10
				trait = cruel
			}
			
			mult_modifier = {
				factor = 10
				trait = arbitrary
			}
			
			mult_modifier = {
				factor = 10
				trait = deceitful
			}
		}
	}
}

# Inform target - alchemist stopped brewing potion
character_event = {
	id = soh.11864
	desc = EVTDESC_SOH_11864
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11864 # Perhaps for the best...
		
		FROM = {
			character_event = { id = soh.11865 } # Inform alchemist
		}
		
		opinion = {
			who = FROM
			modifier = opinion_stopped_brewing_immortality_potion_minor
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					AND = {
						trait = paranoid
						NOT = {
							is_rival = FROM
						}
					}
					trait = wroth
					NOR = {
						is_friend = FROM
						is_lover = FROM
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = kind
			}
			
			mult_modifier = {
				factor = 10
				is_friend = FROM
			}
			
			mult_modifier = {
				factor = 10
				is_lover = FROM
			}
		}
	}
	
	option = {
		trigger = {
			NOT = {
				trait = trusting
			}
		}
		
		name = EVTOPTB_SOH_11864 # I don't trust the explanation given...
		
		FROM = {
			character_event = { id = soh.11866 } # Inform alchemist
		}
		
		opinion = {
			who = FROM
			modifier = opinion_stopped_brewing_immortality_potion_major
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 10
				trait = paranoid
			}
			
			mult_modifier = {
				factor = 10
				trait = wroth
			}
			
			mult_modifier = {
				factor = 10
				is_rival = FROM
			}
		}
	}
}

# Inform alchemist - target accepted apology
character_event = {
	id = soh.11865
	desc = EVTDESC_SOH_11865
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11865 # Good to hear!
	}
}

# Inform alchemist - target got imprisonment reason
character_event = {
	id = soh.11866
	desc = EVTDESC_SOH_11866
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11866 # This might be bad...
	}
}

# Having second thoughts - you don't particularly like the target
character_event = {
	id = soh.11867
	desc = EVTDESC_SOH_11867
	picture = GFX_evt_rival_rulers
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11867 # I will keep at it...
		
		character_event = { id = soh.11818 days = 30 random = 90 } # Next step
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					persistent_event_target:getting_immortality_potion = {
						is_rival = ROOT
					}
					NOR = {
						trait = kind
						trait = honest
						trait = just
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = kind
			}
			
			mult_modifier = {
				factor = 10
				trait = honest
			}
			
			mult_modifier = {
				factor = 10
				trait = just
			}
			
			mult_modifier = {
				factor = 0.1
				trait = slothful
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11867 # I should stop...
		
		# TIANXIATODO: Fail quest
		
		persistent_event_target:getting_immortality_potion = {
			character_event = { id = soh.11864 } # Inform target
		}
		
		# TIANXIATODO: Cleanup
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = diligent
			}
			
			mult_modifier = {
				factor = 0.1
				trait = stubborn
			}
			
			mult_modifier = {
				factor = 0.1
				persistent_event_target:getting_immortality_potion = {
					is_rival = ROOT
				}
				trait = cruel
			}
			
			mult_modifier = {
				factor = 0.1
				persistent_event_target:getting_immortality_potion = {
					is_rival = ROOT
				}
				trait = deceitful
			}
			
			mult_modifier = {
				factor = 0.1
				persistent_event_target:getting_immortality_potion = {
					is_rival = ROOT
				}
				trait = arbitrary
			}
		}
	}
	
	option = {
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				is_rival = ROOT
			}
		}
		
		name = EVTOPTC_SOH_11867 # I should try to make it a poison instead!
		
		custom_tooltip = {
			text = will_swap_to_brewing_poison
			
			clr_character_flag = brewing_immortality_potion_actual
			set_character_flag = brewing_immortality_potion_poison
			
			invert_immortality_potion_quality_effect = yes
		
			character_event = { id = soh.11932 days = 30 random = 90 } # Next step
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = kind
			}
			
			mult_modifier = {
				factor = 0.1
				trait = honest
			}
			
			mult_modifier = {
				factor = 0.1
				trait = just
			}
			
			mult_modifier = {
				factor = 10
				trait = cruel
			}
			
			mult_modifier = {
				factor = 10
				trait = arbitrary
			}
			
			mult_modifier = {
				factor = 10
				trait = deceitful
			}
		}
	}
}



### Placebo

# Brewing placebo - base it on your skills, on a book, or look for ideas?
character_event = {
	id = soh.11868
	desc = EVTDESC_SOH_11868
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	prisoner = no
	
	trigger = {
		has_character_flag = brewing_immortality_potion_placebo
		is_actually_incapable_trigger = no
		persistent_event_target:getting_immortality_potion = {
			is_alive = yes
		}
	}
	
	fail_trigger_effect = {
		if = {
			limit = {
				persistent_event_target:getting_immortality_potion = {
					is_alive = yes
				}
			}
			repeat_event = { id = soh.11868 days = 30 random = 60 } # Try again
		}
	}
	
	immediate = {
		set_variable = {
			which = immortality_potion_quality
			value = 0
		}
		set_variable = {
			which = immortality_potion_ingredients
			value = 0
		}
		set_variable = {
			which = immortality_potion_progress
			value = 0
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11868 # I will come up with something of my own!
		
		hidden_tooltip = {
			random_list = {
				5 = {
					trigger = {
						learning >= 15
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 50
						}
						is_dumb_trigger = no
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 75
						}
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 100
						}
					}
					
					mult_modifier = {
						factor = 2
						trait = physician
					}
					
					mult_modifier = {
						factor = 2
						learning >= 20
					}
					
					mult_modifier = {
						factor = 2
						learning >= 25
					}
					
					character_event = { id = soh.11869 days = 10 random = 20 } # You got a great idea
				}
				
				10 = {
					trigger = {
						learning >= 10
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 25
						}
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 75
						}
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 100
						}
					}
					
					mult_modifier = {
						factor = 2
						trait = physician
					}
					
					mult_modifier = {
						factor = 2
						learning >= 20
					}
					
					mult_modifier = {
						factor = 2
						learning >= 25
					}
					
					character_event = { id = soh.11870 days = 10 random = 20 } # You got some decent ideas
				}
				
				25 = {
					trigger = {
						OR = {
							learning < 10
							check_variable = {
								which = alchemist_healing_knowledge
								value < 25
							}
						}
					}
					
					character_event = { id = soh.11871 days = 10 random = 20 } # You got one uncertain idea
				}
				
				50 = {
					trigger = {
						OR = {
							learning < 10
							check_variable = {
								which = alchemist_healing_knowledge
								value < 25
							}
						}
					}
					
					mult_modifier = {
						factor = 2
						learning < 10
						check_variable = {
							which = alchemist_healing_knowledge
							value < 25
						}
					}
					
					mult_modifier = {
						factor = 2
						learning < 5
					}
					
					mult_modifier = {
						factor = 2
						is_dumb_trigger = yes
					}
					
					character_event = { id = soh.11872 days = 10 random = 20 } # You have no ideas
				}
			}
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					learning < 10
					trait = humble
					OR = {
						any_artifact = {
							has_artifact_flag = book
							has_artifact_flag = alchemy
							has_artifact_flag = taoist
						}
						intrigue >= 10
					}
				}
			}
			
			mult_modifier = {
				factor = 5
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 50
				}
			}
			
			mult_modifier = {
				factor = 2
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 25
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = physician
			}
			
			mult_modifier = {
				factor = 5
				trait = lunatic
			}
			
			mult_modifier = {
				factor = 2
				trait = diligent
			}
			
			mult_modifier = {
				factor = 2
				learning >= 15
			}
			
			mult_modifier = {
				factor = 2
				learning >= 20
			}
			
			mult_modifier = {
				factor = 2
				learning >= 25
			}
		}
	}
	
	option = {
		trigger = {
			any_artifact = {
				has_artifact_flag = book
				has_artifact_flag = alchemy
				has_artifact_flag = taoist
			}
		}
		
		name = EVTOPTB_SOH_11868 # I will look something up in a book!
		
		hidden_tooltip = {
			random_list = {
				5 = {
					trigger = {
						learning >= 15
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 50
						}
						is_dumb_trigger = no
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 75
						}
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 100
						}
					}
					
					mult_modifier = {
						factor = 2
						trait = physician
					}
					
					mult_modifier = {
						factor = 2
						trait = erudite
					}
					
					mult_modifier = {
						factor = 2
						trait = scholar
					}
					
					mult_modifier = {
						factor = 2
						learning >= 20
					}
					
					mult_modifier = {
						factor = 2
						learning >= 25
					}
					
					character_event = { id = soh.11873 days = 10 random = 20 } # You got a great idea
				}
				
				10 = {
					trigger = {
						learning >= 10
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 25
						}
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 75
						}
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 100
						}
					}
					
					mult_modifier = {
						factor = 2
						trait = physician
					}
					
					mult_modifier = {
						factor = 2
						trait = erudite
					}
					
					mult_modifier = {
						factor = 2
						trait = scholar
					}
					
					mult_modifier = {
						factor = 2
						learning >= 20
					}
					
					mult_modifier = {
						factor = 2
						learning >= 25
					}
					
					character_event = { id = soh.11874 days = 10 random = 20 } # You got some decent ideas
				}
				
				25 = {
					trigger = {
						OR = {
							learning < 10
							check_variable = {
								which = alchemist_healing_knowledge
								value < 25
							}
						}
					}
					
					character_event = { id = soh.11812 days = 10 random = 20 } # You got one uncertain idea
				}
				
				50 = {
					trigger = {
						OR = {
							learning < 10
							check_variable = {
								which = alchemist_healing_knowledge
								value < 25
							}
						}
					}
					
					mult_modifier = {
						factor = 2
						learning < 10
						check_variable = {
							which = alchemist_healing_knowledge
							value < 25
						}
					}
					
					mult_modifier = {
						factor = 2
						learning < 5
					}
					
					mult_modifier = {
						factor = 2
						is_dumb_trigger = yes
					}
					
					character_event = { id = soh.11813 days = 10 random = 20 } # You have no ideas
				}
			}
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = proud
				}
			}
			
			mult_modifier = {
				factor = 5
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 50
				}
			}
			
			mult_modifier = {
				factor = 2
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 25
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = scholar
			}
			
			mult_modifier = {
				factor = 5
				trait = erudite
			}
			
			mult_modifier = {
				factor = 2
				trait = diligent
			}
			
			mult_modifier = {
				factor = 2
				learning >= 15
			}
			
			mult_modifier = {
				factor = 2
				learning >= 20
			}
			
			mult_modifier = {
				factor = 2
				learning >= 25
			}
		}
	}
	
	option = {
		trigger = {
			intrigue >= 10
		}
		
		name = EVTOPTC_SOH_11868 # My agents will find the answer!
		
		hidden_tooltip = {
			random_list = {
				5 = {
					trigger = {
						intrigue >= 15
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 50
						}
						is_dumb_trigger = no
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 75
						}
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 100
						}
					}
					
					mult_modifier = {
						factor = 2
						trait = master_schemer
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 20
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 25
					}
					
					character_event = { id = soh.11814 days = 10 random = 20 } # You got a great idea
				}
				
				10 = {
					trigger = {
						intrigue >= 10
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 25
						}
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 75
						}
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 100
						}
					}
					
					mult_modifier = {
						factor = 2
						trait = master_schemer
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 20
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 25
					}
					
					character_event = { id = soh.11815 days = 10 random = 20 } # You got some decent ideas
				}
				
				25 = {
					trigger = {
						OR = {
							intrigue < 10
							check_variable = {
								which = alchemist_healing_knowledge
								value < 25
							}
						}
					}
					
					character_event = { id = soh.11816 days = 10 random = 20 } # You got one uncertain idea
				}
				
				50 = {
					trigger = {
						OR = {
							intrigue < 10
							check_variable = {
								which = alchemist_healing_knowledge
								value < 25
							}
						}
					}
					
					mult_modifier = {
						factor = 2
						intrigue < 10
						check_variable = {
							which = alchemist_healing_knowledge
							value < 25
						}
					}
					
					mult_modifier = {
						factor = 2
						intrigue < 5
					}
					
					mult_modifier = {
						factor = 2
						is_dumb_trigger = yes
					}
					
					character_event = { id = soh.11817 days = 10 random = 20 } # You have no ideas
				}
			}
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = proud
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = master_schemer
			}
			
			mult_modifier = {
				factor = 5
				trait = deceitful
			}
			
			mult_modifier = {
				factor = 5
				trait = slothful
			}
			
			mult_modifier = {
				factor = 2
				intrigue >= 15
			}
			
			mult_modifier = {
				factor = 2
				intrigue >= 20
			}
			
			mult_modifier = {
				factor = 2
				intrigue >= 25
			}
		}
	}
}

# Own skills - you have a great idea
character_event = {
	id = soh.11869
	desc = EVTDESC_SOH_11869
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	prisoner = no
	
	trigger = {
		has_character_flag = brewing_immortality_potion_placebo
		is_actually_incapable_trigger = no
		persistent_event_target:getting_immortality_potion = {
			is_alive = yes
		}
	}
	
	fail_trigger_effect = {
		if = {
			limit = {
				persistent_event_target:getting_immortality_potion = {
					is_alive = yes
				}
			}
			repeat_event = { id = soh.11869 days = 30 random = 60 } # Try again
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11869 # I know just what to brew!
		
		hidden_tooltip = {
			change_variable = {
				which = immortality_potion_quality
				value = 5
			}
		}
		
		character_event = { id = soh.11881 days = 30 random = 60 } # Hidden progress event selection
	}
}

# Own skills - you have some decent ideas
character_event = {
	id = soh.11870
	desc = EVTDESC_SOH_11870
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	prisoner = no
	
	trigger = {
		has_character_flag = brewing_immortality_potion_placebo
		is_actually_incapable_trigger = no
		persistent_event_target:getting_immortality_potion = {
			is_alive = yes
		}
	}
	
	fail_trigger_effect = {
		if = {
			limit = {
				persistent_event_target:getting_immortality_potion = {
					is_alive = yes
				}
			}
			repeat_event = { id = soh.11870 days = 30 random = 60 } # Try again
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11870 # I think I know what to do...
		
		hidden_tooltip = {
			change_variable = {
				which = immortality_potion_quality
				value = 2
			}
		}
		
		character_event = { id = soh.11881 days = 30 random = 60 } # Hidden progress event selection
	}
}

# Own skills - you have one very uncertain idea
character_event = {
	id = soh.11871
	desc = EVTDESC_SOH_11871
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	prisoner = no
	
	trigger = {
		has_character_flag = brewing_immortality_potion_placebo
		is_actually_incapable_trigger = no
		persistent_event_target:getting_immortality_potion = {
			is_alive = yes
		}
	}
	
	fail_trigger_effect = {
		if = {
			limit = {
				persistent_event_target:getting_immortality_potion = {
					is_alive = yes
				}
			}
			repeat_event = { id = soh.11871 days = 30 random = 60 } # Try again
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11871 # Maybe this will work...
		
		hidden_tooltip = {
			random_list = {
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = 1
					}
				}
				25 = {
					# No change
				}
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = -1
					}
				}
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = -2
					}
				}
			}
		}
		
		character_event = { id = soh.11881 days = 30 random = 60 } # Hidden progress event selection
	}
}

# Own skills - you have no ideas
character_event = {
	id = soh.11872
	desc = EVTDESC_SOH_11872
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	prisoner = no
	
	trigger = {
		has_character_flag = brewing_immortality_potion_placebo
		is_actually_incapable_trigger = no
		persistent_event_target:getting_immortality_potion = {
			is_alive = yes
		}
	}
	
	fail_trigger_effect = {
		if = {
			limit = {
				persistent_event_target:getting_immortality_potion = {
					is_alive = yes
				}
			}
			repeat_event = { id = soh.11872 days = 30 random = 60 } # Try again
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11872 # I will figure it out...
		
		hidden_tooltip = {
			random_list = {
				25 = {
					# No change
				}
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = -1
					}
				}
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = -2
					}
				}
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = -3
					}
				}
			}
		}
		
		character_event = { id = soh.11881 days = 30 random = 60 } # Hidden progress event selection
	}
}

# Book - you get a great idea
character_event = {
	id = soh.11873
	desc = EVTDESC_SOH_11873
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	prisoner = no
	
	trigger = {
		has_character_flag = brewing_immortality_potion_placebo
		is_actually_incapable_trigger = no
		persistent_event_target:getting_immortality_potion = {
			is_alive = yes
		}
	}
	
	fail_trigger_effect = {
		if = {
			limit = {
				persistent_event_target:getting_immortality_potion = {
					is_alive = yes
				}
			}
			repeat_event = { id = soh.11873 days = 30 random = 60 } # Try again
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11873 # I know just what to brew!
		
		hidden_tooltip = {
			change_variable = {
				which = immortality_potion_quality
				value = 5
			}
		}
		
		character_event = { id = soh.11881 days = 30 random = 60 } # Hidden progress event selection
	}
}

# Book - you get some decent ideas
character_event = {
	id = soh.11874
	desc = EVTDESC_SOH_11874
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	prisoner = no
	
	trigger = {
		has_character_flag = brewing_immortality_potion_placebo
		is_actually_incapable_trigger = no
		persistent_event_target:getting_immortality_potion = {
			is_alive = yes
		}
	}
	
	fail_trigger_effect = {
		if = {
			limit = {
				persistent_event_target:getting_immortality_potion = {
					is_alive = yes
				}
			}
			repeat_event = { id = soh.11874 days = 30 random = 60 } # Try again
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11874 # I think I know what to do...
		
		hidden_tooltip = {
			change_variable = {
				which = immortality_potion_quality
				value = 2
			}
		}
		
		character_event = { id = soh.11881 days = 30 random = 60 } # Hidden progress event selection
	}
}

# Book - you get one very uncertain idea
character_event = {
	id = soh.11875
	desc = EVTDESC_SOH_11875
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	prisoner = no
	
	trigger = {
		has_character_flag = brewing_immortality_potion_placebo
		is_actually_incapable_trigger = no
		persistent_event_target:getting_immortality_potion = {
			is_alive = yes
		}
	}
	
	fail_trigger_effect = {
		if = {
			limit = {
				persistent_event_target:getting_immortality_potion = {
					is_alive = yes
				}
			}
			repeat_event = { id = soh.11875 days = 30 random = 60 } # Try again
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11875 # Maybe this will work...
		
		hidden_tooltip = {
			random_list = {
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = 1
					}
				}
				25 = {
					# No change
				}
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = -1
					}
				}
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = -2
					}
				}
			}
		}
		
		character_event = { id = soh.11881 days = 30 random = 60 } # Hidden progress event selection
	}
}

# Book - you get no ideas
character_event = {
	id = soh.11876
	desc = EVTDESC_SOH_11876
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	prisoner = no
	
	trigger = {
		has_character_flag = brewing_immortality_potion_placebo
		is_actually_incapable_trigger = no
		persistent_event_target:getting_immortality_potion = {
			is_alive = yes
		}
	}
	
	fail_trigger_effect = {
		if = {
			limit = {
				persistent_event_target:getting_immortality_potion = {
					is_alive = yes
				}
			}
			repeat_event = { id = soh.11876 days = 30 random = 60 } # Try again
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11876 # I will figure it out...
		
		hidden_tooltip = {
			random_list = {
				25 = {
					# No change
				}
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = -1
					}
				}
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = -2
					}
				}
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = -3
					}
				}
			}
		}
		
		character_event = { id = soh.11881 days = 30 random = 60 } # Hidden progress event selection
	}
}

# Looking for ideas - your agents discover a great idea
character_event = {
	id = soh.11877
	desc = EVTDESC_SOH_11877
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	prisoner = no
	
	trigger = {
		has_character_flag = brewing_immortality_potion_placebo
		is_actually_incapable_trigger = no
		persistent_event_target:getting_immortality_potion = {
			is_alive = yes
		}
	}
	
	fail_trigger_effect = {
		if = {
			limit = {
				persistent_event_target:getting_immortality_potion = {
					is_alive = yes
				}
			}
			repeat_event = { id = soh.11877 days = 30 random = 60 } # Try again
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11877 # I know just what to brew!
		
		hidden_tooltip = {
			change_variable = {
				which = immortality_potion_quality
				value = 5
			}
		}
		
		character_event = { id = soh.11881 days = 30 random = 60 } # Hidden progress event selection
	}
}

# Looking for ideas - your agents discover some decent ideas
character_event = {
	id = soh.11878
	desc = EVTDESC_SOH_11878
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	prisoner = no
	
	trigger = {
		has_character_flag = brewing_immortality_potion_placebo
		is_actually_incapable_trigger = no
		persistent_event_target:getting_immortality_potion = {
			is_alive = yes
		}
	}
	
	fail_trigger_effect = {
		if = {
			limit = {
				persistent_event_target:getting_immortality_potion = {
					is_alive = yes
				}
			}
			repeat_event = { id = soh.11878 days = 30 random = 60 } # Try again
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11878 # I think I know what to do...
		
		hidden_tooltip = {
			change_variable = {
				which = immortality_potion_quality
				value = 2
			}
		}
		
		character_event = { id = soh.11881 days = 30 random = 60 } # Hidden progress event selection
	}
}

# Looking for ideas - your agents discover a very uncertain idea
character_event = {
	id = soh.11879
	desc = EVTDESC_SOH_11879
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	prisoner = no
	
	trigger = {
		has_character_flag = brewing_immortality_potion_placebo
		is_actually_incapable_trigger = no
		persistent_event_target:getting_immortality_potion = {
			is_alive = yes
		}
	}
	
	fail_trigger_effect = {
		if = {
			limit = {
				persistent_event_target:getting_immortality_potion = {
					is_alive = yes
				}
			}
			repeat_event = { id = soh.11879 days = 30 random = 60 } # Try again
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11879 # Maybe this will work...
		
		hidden_tooltip = {
			random_list = {
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = 1
					}
				}
				25 = {
					# No change
				}
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = -1
					}
				}
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = -2
					}
				}
			}
		}
		
		character_event = { id = soh.11881 days = 30 random = 60 } # Hidden progress event selection
	}
}

# Looking for ideas - your agents discover no ideas
character_event = {
	id = soh.11880
	desc = EVTDESC_SOH_11880
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	prisoner = no
	
	trigger = {
		has_character_flag = brewing_immortality_potion_placebo
		is_actually_incapable_trigger = no
		persistent_event_target:getting_immortality_potion = {
			is_alive = yes
		}
	}
	
	fail_trigger_effect = {
		if = {
			limit = {
				persistent_event_target:getting_immortality_potion = {
					is_alive = yes
				}
			}
			repeat_event = { id = soh.11880 days = 30 random = 60 } # Try again
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11880 # I will figure it out...
		
		hidden_tooltip = {
			random_list = {
				25 = {
					# No change
				}
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = -1
					}
				}
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = -2
					}
				}
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = -3
					}
				}
			}
		}
		
		character_event = { id = soh.11881 days = 30 random = 60 } # Hidden progress event selection
	}
}

# Hidden progression event selection
character_event = {
	id = soh.11881
	hide_window = yes
	
	is_triggered_only = yes
	
	prisoner = no
	
	trigger = {
		has_character_flag = brewing_immortality_potion_placebo
		is_actually_incapable_trigger = no
		persistent_event_target:getting_immortality_potion = {
			is_alive = yes
		}
		NOR = {
			has_character_flag = immortality_potion_finished
			has_character_flag = asked_about_immortality_potion
		}
	}
	
	fail_trigger_effect = {
		if = {
			limit = {
				persistent_event_target:getting_immortality_potion = {
					is_alive = yes
				}
				NOT = {
					has_character_flag = immortality_potion_finished
				}
			}
			repeat_event = { id = soh.11881 days = 30 random = 30 } # Try again
		}
	}
	
	immediate = {
		if = {
			limit = {
				NOR = {
					AND = {
						check_variable = {
							which = immortality_potion_ingredients
							value >= 10
						}
						check_variable = {
							which = immortality_potion_progress
							value >= 25
						}
					}
					AND = {
						check_variable = {
							which = immortality_potion_ingredients
							value >= 5
						}
						check_variable = {
							which = immortality_potion_progress
							value >= 50
						}
					}
				}
			}
			
			change_variable = {
				which = immortality_potion_progress
				value = 1
			}
			
			random_list = {
				100 = {
					mult_modifier = {
						factor = 10
						check_variable = {
							which = immortality_potion_ingredients
							value = 0
						}
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = immortality_potion_ingredients
							value < 2
						}
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = immortality_potion_ingredients
							value < 5
						}
					}
					
					randomize_immortality_potion_ingredient_effect = yes
					
					if = {
						limit = {
							has_immortality_potion_ingredient_trigger = yes
						}
						
						character_event = { id = soh.11882 } # You have just the ingredient you need
					}
					
					else = {
						if = {
							limit = {
								persistent_event_target:getting_immortality_potion = {
									OR = {
										character = ROOT
										is_inaccessible_or_incapable_trigger = yes
									}
								}
							}
							
							character_event = { id = soh.11888 } # You need to get a specific ingredient yourself
						}
						
						else = {
							character_event = { id = soh.11883 } # You need a specific ingredient - ask the target?
						}
					}
				}
				
				25 = {
					trigger = {
						has_unused_alchemy_book_trigger = yes
					}
					
					mult_modifier = {
						factor = 2
						trait = scholar
					}
					
					mult_modifier = {
						factor = 2
						trait = erudite
					}
					
					character_event = { id = soh.11894 } # Make use of an alchemy-related book
				}
				
				25 = {
					trigger = {
						has_unused_alchemy_book_trigger = no
						unused_alchemy_book_exists_trigger = yes
						OR = {
							getting_immortality_potion_has_unused_alchemy_book_trigger = yes
							persistent_event_target:getting_immortality_potion = {
								NOT = {
									character = ROOT
								}
								scaled_wealth >= 1
								wealth >= 100
							}
						}
					}
					
					mult_modifier = {
						factor = 2
						trait = scholar
					}
					
					mult_modifier = {
						factor = 2
						trait = erudite
					}
					
					character_event = { id = soh.11895 } # Ask for book or the money for it?
				}
				
				25 = {
					trigger = {
						has_unused_alchemy_book_trigger = no
						unused_alchemy_book_exists_trigger = yes
						NOR = {
							getting_immortality_potion_has_unused_alchemy_book_trigger = yes
							persistent_event_target:getting_immortality_potion = {
								NOT = {
									character = ROOT
								}
								scaled_wealth >= 1
								wealth >= 100
							}
						}
						scaled_wealth >= 1
						wealth >= 100
					}
					
					mult_modifier = {
						factor = 2
						trait = scholar
					}
					
					mult_modifier = {
						factor = 2
						trait = erudite
					}
					
					character_event = { id = soh.11900 } # Purchase the book you need?
				}
				
				10 = {
					trigger = {
						learning > 10
						NOT = {
							has_character_flag = immortality_potion_goes_well
						}
						any_artifact = {
							has_artifact_flag = ingredient
							has_been_used_in_immortality_potion_trigger = no
						}
					}
					
					mult_modifier = {
						factor = 2
						learning >= 15
					}
					
					mult_modifier = {
						factor = 2
						learning >= 20
					}
					
					mult_modifier = {
						factor = 2
						trait = physician
					}
					
					character_event = { id = soh.11901 } # Throw in some other ingredients?
				}
				
				25 = {
					trigger = {
						NOT = {
							has_character_flag = immortality_potion_lost_notes
						}
					}
					
					mult_modifier = {
						factor = 2
						trait = wroth
					}
					
					mult_modifier = {
						factor = 2
						is_dumb_trigger = yes
					}
					
					character_event = { id = soh.11902 } # Lost notes
				}
				
				50 = {
					trigger = {
						any_society_member = {
							society_member_of = the_alchemists
							is_inaccessible_or_incapable_trigger = no
							NOR = {
								character = ROOT
								ROOT = {
									persistent_event_target:getting_immortality_potion = {
										character = PREVPREV
									}
								}
							}
						}
					}
					
					random_society_member = {
						limit = {
							society_member_of = the_alchemists
							is_inaccessible_or_incapable_trigger = no
							NOR = {
								character = ROOT
								ROOT = {
									persistent_event_target:getting_immortality_potion = {
										character = PREVPREV
									}
								}
							}
						}
						
						preferred_limit = {
							society_rank == 4
							OR = {
								is_friend = ROOT
								is_lover = ROOT
								is_rival = ROOT
								persistent_event_target:getting_immortality_potion = {
									is_friend = PREV
									is_lover = PREV
									is_rival = PREV
								}
							}
						}
						
						preferred_limit = {
							society_rank == 3
							OR = {
								is_friend = ROOT
								is_lover = ROOT
								is_rival = ROOT
								persistent_event_target:getting_immortality_potion = {
									is_friend = PREV
									is_lover = PREV
									is_rival = PREV
								}
							}
						}
						
						preferred_limit = {
							society_rank == 2
							OR = {
								is_friend = ROOT
								is_lover = ROOT
								is_rival = ROOT
								persistent_event_target:getting_immortality_potion = {
									is_friend = PREV
									is_lover = PREV
									is_rival = PREV
								}
							}
						}
						
						preferred_limit = {
							society_rank == 4
						}
						
						preferred_limit = {
							society_rank == 3
						}
						
						preferred_limit = {
							society_rank == 2
						}
						
						character_event = { id = soh.11903 } # Other society member might offer to help (or "help")
					}
				}
				
				25 = {
					trigger = {
						any_artifact = {
							has_artifact_flag = ingredient
							has_been_used_in_immortality_potion_trigger = no
						}
					}
					
					mult_modifier = {
						factor = 2
						trait = wroth
					}
					
					mult_modifier = {
						factor = 2
						is_dumb_trigger = yes
					}
					
					character_event = { id = soh.11916 } # Wrong ingredient
				}
				
				50 = {
					trigger = {
						trait = lunatic
						any_artifact = {
							has_artifact_flag = ingredient
							has_been_used_in_immortality_potion_trigger = no
						}
					}
					
					character_event = { id = soh.11919 } # Lunatic is feeling inspired
				}
				
				50 = {
					trigger = {
						trait = possessed
						any_artifact = {
							has_artifact_flag = ingredient
							has_been_used_in_immortality_potion_trigger = no
						}
					}
					
					character_event = { id = soh.11920 } # Possessed character just throws something in
				}
				
				25 = {
					trigger = {
						NOR = {
							has_character_flag = hidden_lab
							has_character_flag = very_hidden_lab
						}
						employer = {
							any_courtier = {
								is_adult = yes
								is_actually_incapable_trigger = no
								OR = {
									AND = {
										is_rival = ROOT
										ROOT = {
											persistent_event_target:getting_immortality_potion = {
												NOR = {
													is_friend = PREVPREV
													is_lover = PREVPREV
												}
											}
										}
									}
									ROOT = {
										persistent_event_target:getting_immortality_potion = {
											is_rival = PREVPREV
										}
									}
								}
							}
						}
					}
					
					employer = {
						random_courtier = {
							limit = {
								is_adult = yes
								is_actually_incapable_trigger = no
								OR = {
									AND = {
										is_rival = ROOT
										ROOT = {
											persistent_event_target:getting_immortality_potion = {
												NOR = {
													is_friend = PREVPREV
													is_lover = PREVPREV
												}
											}
										}
									}
									ROOT = {
										persistent_event_target:getting_immortality_potion = {
											is_rival = PREVPREV
										}
									}
								}
							}
							
							preferred_limit = {
								is_rival = ROOT
								ROOT = {
									persistent_event_target:getting_immortality_potion = {
										is_rival = PREVPREV
									}
								}
							}
							
							preferred_limit = {
								is_rival = ROOT
							}
							
							character_event = { id = soh.11921 } # Courtier might attempt sabotage
						}
					}
				}
				
				25 = {
					trigger = {
						persistent_event_target:getting_immortality_potion = {
							NOR = {
								character = ROOT
								is_rival = ROOT
							}
						}
						OR = {
							AND = {
								check_variable = {
									which = immortality_potion_progress
									value >= 10
								}
								OR = {
									trait = cynical
									trait = paranoid
								}
								check_variable = {
									which = immortality_potion_quality
									value < 25
								}
							}
							AND = {
								OR = {
									check_variable = {
										which = immortality_potion_ingredients
										value >= 5
									}
									check_variable = {
										which = immortality_potion_progress
										value >= 25
									}
								}
								check_variable = {
									which = immortality_potion_quality
									value < 50
								}
							}
						}
						NOT = {
							has_character_flag = immortality_potion_second_thoughts_poor_quality
						}
					}
					
					character_event = { id = soh.11925 } # Having second thoughts
				}
				
				25 = {
					trigger = {
						persistent_event_target:getting_immortality_potion = {
							OR = {
								is_rival = ROOT
								reverse_opinion = {
									who = ROOT
									value < -25
								}
							}
						}
						check_variable = {
							which = immortality_potion_quality
							value > 25
						}
						NOT = {
							has_character_flag = immortality_potion_second_thoughts_rival
						}
					}
					
					character_event = { id = soh.11929 } # Having second thoughts
				}
				
				25 = {
					trigger = {
						persistent_event_target:getting_immortality_potion = {
							OR = {
								is_friend = ROOT
								is_lover = ROOT
								reverse_opinion = {
									who = ROOT
									value >= 50
								}
							}
						}
						check_variable = {
							which = immortality_potion_quality
							value < 25
						}
						NOT = {
							has_character_flag = immortality_potion_second_thoughts_friend
						}
					}
					
					character_event = { id = soh.11930 } # Having second thoughts
				}
				
				#25 = {
				#	trigger = {
				#		check_variable = {
				#			which = immortality_potion_progress
				#			value >= 10
				#		}
				#		check_variable = {
				#			which = immortality_potion_quality
				#			value < 25
				#		}
				#	}
				#	
				#	mult_modifier = {
				#		factor = 0.1
				#		has_character_flag = immortality_potion_slow_down
				#	}
				#	
				#	character_event = { id = soh.11931 } # Work more slowly?
				#}
				
				10 = {
					trigger = {
						check_variable = {
							which = immortality_potion_ingredients
							value >= 2
						}
					}
					
					repeat_event = { id = soh.11881 days = 30 random = 90 } # Nothing for now
				}
			}
		}
		
		else = {
			if = {
				limit = {
					persistent_event_target:getting_immortality_potion = {
						is_inaccessible_or_incapable_trigger = no
					}
				}
				character_event = { id = soh.12073 } # Potion is ready
			}
			
			else = {
				repeat_event = { id = soh.11881 days = 30 } # Try again
			}
		}
	}
}

# Another ingredient needed - you've got it
character_event = {
	id = soh.11882
	desc = EVTDESC_SOH_11882
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		random_artifact = {
			limit = {
				ingredient_matches_immortality_potion_trigger = yes
			}
			
			save_event_target_as = target_immortality_potion_ingredient
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11882 # I should add it to the potion!
		
		custom_tooltip = {
			text = ingredient_will_be_added_to_immortality_potion
			
			if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 50
					}
					
					event_target:target_immortality_potion_ingredient = {
						OR = {
							ingredient_is_unhealthy_trigger = yes
							AND = {
								ingredient_is_perceived_healthy_trigger = no
								ROOT = {
									trait = cynical
								}
							}
						}
						
						OR = {
							new_ingredient_trigger = no
							ROOT = {
								OR = {
									learning >= 15
									AND = {
										trait = cynical
										is_dumb_trigger = no
									}
								}
							}
						}
					}
					
					NOT = {
						trait = trusting
					}
				}
				
				character_event = { id = soh.11891 } # Attempt to purify ingredient?
			}
			
			else = {
				add_ingredient_to_immortality_potion_placebo_effect = yes
			
				event_target:target_immortality_potion_ingredient = {
					unsafe_destroy_artifact = yes
				}
				
				character_event = { id = soh.11881 days = 30 random = 90 } # Next step
			}
		}
	}
}

# Another ingredient needed - ask the person that is getting the potion?
character_event = {
	id = soh.11883
	desc = EVTDESC_SOH_11883
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11883 # I should ask them!
		
		persistent_event_target:getting_immortality_potion = {
			character_event = { id = soh.11884 } # Receiver is asked
		}
	}
}

# Asked for ingredient
character_event = {
	id = soh.11884
	desc = EVTDESC_SOH_11884
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		any_artifact = {
			limit = {
				is_froms_immortality_potion_ingredient_trigger = yes
			}
			
			save_event_target_as = target_immortality_potion_ingredient
		}
	}
	
	option = {
		trigger = {
			event_target:target_immortality_potion_ingredient = {
				always = yes
			}
		}
		
		name = EVTOPTA_SOH_11884 # I can provide that ingredient!
		
		event_target:target_immortality_potion_ingredient = {
			transfer_artifact = {
				from = ROOT
				to = FROM
			}
		}
		
		FROM = {
			character_event = { id = soh.11885 } # Inform FROM
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				OR = {
					society_member_of = hermetics
					society_member_of = the_alchemists
				}
				trait = greedy
			}
		}
	}
	
	option = {
		trigger = {
			wealth >= 0
		}
		
		name = EVTOPTB_SOH_11884 # I can provide some money...
		
		wealth = -25
		
		FROM = {
			wealth = 25
			character_event = { id = soh.11886 } # Inform FROM
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = greedy
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = charitable
			}
		}
	}
	
	option = {
		name = EVTOPTC_SOH_11884 # I should not have to provide that!
		
		FROM = {
			character_event = { id = soh.11887 } # Inform FROM
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					OR = {
						is_friend = FROM
						is_lover = FROM
					}
					OR = {
						wealth >= 0
						event_target:target_immortality_potion_ingredient = {
							always = yes
						}
					}
					NOT = {
						trait = greedy
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = greedy
			}
		}
	}
}

# Got ingredient
character_event = {
	id = soh.11885
	desc = EVTDESC_SOH_11885
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11885 # I should add it to the potion!
		
		custom_tooltip = {
			text = ingredient_will_be_added_to_immortality_potion
			
			if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 50
					}
					
					event_target:target_immortality_potion_ingredient = {
						OR = {
							ingredient_is_unhealthy_trigger = yes
							AND = {
								ingredient_is_perceived_healthy_trigger = no
								ROOT = {
									trait = cynical
								}
							}
						}
						
						OR = {
							new_ingredient_trigger = no
							ROOT = {
								OR = {
									learning >= 15
									AND = {
										trait = cynical
										is_dumb_trigger = no
									}
								}
							}
						}
					}
					
					NOT = {
						trait = trusting
					}
				}
				
				character_event = { id = soh.11891 } # Attempt to purify ingredient?
			}
			
			else = {
				add_ingredient_to_immortality_potion_placebo_effect = yes
			
				event_target:target_immortality_potion_ingredient = {
					unsafe_destroy_artifact = yes
				}
				
				character_event = { id = soh.11881 days = 30 random = 90 } # Next step
			}
		}
		
		ai_chance = {
			factor = 100
		}
	}
}

# Got money instead
character_event = {
	id = soh.11886
	desc = EVTDESC_SOH_11886
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11886 # I will purchase the ingredient right away!
		
		wealth = -25
		
		custom_tooltip = {
			text = ingredient_will_be_added_to_immortality_potion
			
			add_target_immortality_potion_ingredient_effect = yes
			
			if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 50
					}
					
					event_target:target_immortality_potion_ingredient = {
						OR = {
							ingredient_is_unhealthy_trigger = yes
							AND = {
								ingredient_is_perceived_healthy_trigger = no
								ROOT = {
									trait = cynical
								}
							}
						}
						
						OR = {
							new_ingredient_trigger = no
							ROOT = {
								OR = {
									learning >= 15
									AND = {
										trait = cynical
										is_dumb_trigger = no
									}
								}
							}
						}
					}
					
					NOT = {
						trait = trusting
					}
				}
				
				character_event = { id = soh.11891 } # Attempt to purify ingredient?
			}
			
			else = {
				add_ingredient_to_immortality_potion_placebo_effect = yes
			
				event_target:target_immortality_potion_ingredient = {
					unsafe_destroy_artifact = yes
				}
				
				character_event = { id = soh.11881 days = 30 random = 90 } # Next step
			}
		}
		
		ai_chance = {
			factor = 100
		}
	}
}

# Did not get help
character_event = {
	id = soh.11887
	desc = EVTDESC_SOH_11887
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11887 # And here I thought they wanted me to finish the potion!
		
		opinion = {
			who = FROM
			modifier = opinion_did_not_provide_immortality_potion_ingredient
		}
	}
}

# Another ingredient needed - you need to get it
character_event = {
	id = soh.11888
	desc = EVTDESC_SOH_11888
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11888 # I guess I will have to find it...
	}
}

# AI adds ingredient on_yearly_pulse
character_event = {
	id = soh.11889
	hide_window = yes
	
	is_triggered_only = yes # on_yearly_pulse
	
	min_age = 16
	is_in_society = yes
	prisoner = no
	
	trigger = {
		has_character_modifier = brewing_immortality_potion
		has_character_flag = brewing_immortality_potion_placebo
		is_actually_incapable_trigger = no
		has_immortality_potion_ingredient_trigger = yes
	}
	
	immediate = {
		add_target_immortality_potion_ingredient_effect = yes
		
		if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 50
				}
				
				event_target:target_immortality_potion_ingredient = {
					OR = {
						ingredient_is_unhealthy_trigger = yes
						AND = {
							ingredient_is_perceived_healthy_trigger = no
							ROOT = {
								trait = cynical
							}
						}
					}
					
					OR = {
						new_ingredient_trigger = no
						ROOT = {
							OR = {
								learning >= 15
								AND = {
									trait = cynical
									is_dumb_trigger = no
								}
							}
						}
					}
				}
				
				NOT = {
					trait = trusting
				}
			}
			
			character_event = { id = soh.11891 } # Attempt to purify ingredient?
		}
		
		else = {
			add_ingredient_to_immortality_potion_placebo_effect = yes
			
			event_target:target_immortality_potion_ingredient = {
				unsafe_destroy_artifact = yes
			}
			
			character_event = { id = soh.11881 days = 30 random = 90 } # Next step
		}
	}
}

# Used decision to add ingredient
character_event = {
	id = soh.11890
	desc = EVTDESC_SOH_11890
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes # add_ingredient_to_immortality_potion decision
	
	immediate = {
		random_artifact = {
			limit = {
				ingredient_matches_immortality_potion_trigger = yes
			}
			
			save_event_target_as = target_immortality_potion_ingredient
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11890 # Time to add it to the potion!
		
		custom_tooltip = {
			text = ingredient_will_be_added_to_immortality_potion
			
			if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 50
					}
					
					event_target:target_immortality_potion_ingredient = {
						OR = {
							ingredient_is_unhealthy_trigger = yes
							AND = {
								ingredient_is_perceived_healthy_trigger = no
								ROOT = {
									trait = cynical
								}
							}
						}
						
						OR = {
							new_ingredient_trigger = no
							ROOT = {
								OR = {
									learning >= 15
									AND = {
										trait = cynical
										is_dumb_trigger = no
									}
								}
							}
						}
					}
					
					NOT = {
						trait = trusting
					}
				}
				
				character_event = { id = soh.11891 } # Attempt to purify ingredient?
			}
			
			else = {
				add_ingredient_to_immortality_potion_placebo_effect = yes
			
				event_target:target_immortality_potion_ingredient = {
					unsafe_destroy_artifact = yes
				}
				
				character_event = { id = soh.11881 days = 30 random = 90 } # Next step
			}
		}
	}
}

# Ingredient might be harmful - attempt to purify it?
character_event = {
	id = soh.11891
	desc = EVTDESC_SOH_11891
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11891 # I will attempt to purify it!
		
		custom_tooltip = {
			text = ingredient_will_be_purified
		
			save_immortality_potion_ingredient_for_purification_effect = yes
					
			event_target:target_immortality_potion_ingredient = {
				unsafe_destroy_artifact = yes
			}
			
			random_list = {
				50 = {
					trigger = {
						learning >= 15
					}
					
					mult_modifier = {
						factor = 2
						trait = physician
					}
					
					mult_modifier = {
						factor = 2
						learning >= 20
					}
					
					mult_modifier = {
						factor = 2
						learning >= 25
					}
					
					character_event = { id = soh.11892 days = 7 random = 7 } # Purified the ingredient
				}
				
				50 = {
					trigger = {
						learning < 30
					}
					
					character_event = { id = soh.11893 days = 7 random = 7 } # Failed to purify the ingredient
				}
			}
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = slothful
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11891 # I think I know how to use it safely...
		
		custom_tooltip = {
			text = ingredient_will_be_added_to_immortality_potion
		
			add_ingredient_to_immortality_potion_placebo_effect = yes
					
			event_target:target_immortality_potion_ingredient = {
				unsafe_destroy_artifact = yes
			}
			
			character_event = { id = soh.11881 days = 30 random = 90 } # Next step
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					trait = cynical
					trait = paranoid
				}
			}
		}
	}
}

# Purified ingredient
character_event = {
	id = soh.11892
	desc = EVTDESC_SOH_11892
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11892 # Excellent!
		
		custom_tooltip = {
			text = purified_ingredient_will_be_added_to_immortality_potion
		
			add_purified_ingredient_to_immortality_potion_placebo_effect = yes
			
			character_event = { id = soh.11881 days = 30 random = 90 } # Next step
		}
	}
}

# Failed to purify ingredient
character_event = {
	id = soh.11893
	desc = EVTDESC_SOH_11893
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11893 # Oh, well...
		
		custom_tooltip = {
			text = non_purified_ingredient_will_be_added_to_immortality_potion
		
			add_non_purified_ingredient_to_immortality_potion_placebo_effect = yes
			
			character_event = { id = soh.11881 days = 30 random = 90 } # Next step
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11893 # I should get more and try again...
		
		ai_chance = {
			factor = 0
		}
	}
}

# You have a useful book - make use of it
character_event = {
	id = soh.11894
	desc = EVTDESC_SOH_11894
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		random_artifact = {
			limit = {
				is_unused_alchemy_book_trigger = yes
			}
			
			save_event_target_as = target_alchemy_book
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11894 # Knowledge is power!
		
		custom_tooltip = {
			text = improve_immortality_potion_quality_book
			
			improve_immortality_potion_quality_book_effect = yes
			
			character_event = { id = soh.11881 days = 30 random = 90 } # Next step
		}
	}
}

# You might need a useful book - ask the person that is getting the potion?
character_event = {
	id = soh.11895
	desc = EVTDESC_SOH_11895
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11895 # I should ask them!
		
		persistent_event_target:getting_immortality_potion = {
			character_event = { id = soh.11896 } # Receiver is asked
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11895 # I should not bother them...
		
		character_event = { id = soh.11881 days = 30 random = 90 } # Next step
		
		ai_chance = {
			factor = 0
		}
	}
}

# Asked for book
character_event = {
	id = soh.11896
	desc = EVTDESC_SOH_11896
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		any_artifact = {
			limit = {
				is_unused_alchemy_book_from_trigger = yes
			}
			
			save_event_target_as = target_alchemy_book
		}
	}
	
	option = {
		trigger = {
			event_target:target_alchemy_book = {
				always = yes
			}
		}
		
		name = EVTOPTA_SOH_11896 # I can provide a book!
		
		event_target:target_alchemy_book = {
			transfer_artifact = {
				from = ROOT
				to = FROM
			}
		}
		
		FROM = {
			character_event = { id = soh.11897 } # Inform FROM
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.5
				trait = erudite
			}
			
			mult_modifier = {
				factor = 0.5
				trait = scholar
			}
		}
	}
	
	option = {
		trigger = {
			wealth >= 0
		}
		
		name = EVTOPTB_SOH_11896 # I can provide some money...
		
		wealth = -100
		
		FROM = {
			wealth = 100
			character_event = { id = soh.11898 } # Inform FROM
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = greedy
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = charitable
			}
		}
	}
	
	option = {
		name = EVTOPTC_SOH_11896 # I should not have to provide that!
		
		FROM = {
			character_event = { id = soh.11899 } # Inform FROM
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					OR = {
						is_friend = FROM
						is_lover = FROM
					}
					OR = {
						wealth >= 0
						event_target:target_alchemy_book = {
							always = yes
						}
					}
					NOT = {
						trait = greedy
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = greedy
			}
		}
	}
}

# Got liege's book
character_event = {
	id = soh.11897
	desc = EVTDESC_SOH_11897
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		random_artifact = {
			limit = {
				is_unused_alchemy_book_trigger = yes
			}
			
			save_event_target_as = target_alchemy_book
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11897 # Knowledge is power!
		
		custom_tooltip = {
			text = improve_immortality_potion_quality_book
			
			improve_immortality_potion_quality_book_effect = yes
			
			character_event = { id = soh.11881 days = 30 random = 90 } # Next step
		}
	}
}

# Got money for book
character_event = {
	id = soh.11898
	desc = EVTDESC_SOH_11898
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11898 # Knowledge is power!
		
		wealth = -100
		
		add_random_new_alchemy_book_effect = yes
		
		custom_tooltip = {
			text = improve_immortality_potion_quality_book
			
			improve_immortality_potion_quality_book_effect = yes
			
			character_event = { id = soh.11881 days = 30 random = 90 } # Next step
		}
		
		ai_chance = {
			factor = 100
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11898 # Actually, I think I will hang on to this...
		
		character_event = { id = soh.11881 days = 30 random = 90 } # Next step
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					OR = {
						is_friend = FROM
						is_lover = FROM
					}
					NOR = {
						trait = deceitful
						trait = greedy
					}
				}
			}
			
			mult_modifier = {
				factor = 2
				trait = deceitful
			}
			
			mult_modifier = {
				factor = 2
				trait = greedy
			}
			
			mult_modifier = {
				factor = 2
				opinion = {
					who = FROM
					value < 25
				}
			}
			
			mult_modifier = {
				factor = 2
				opinion = {
					who = FROM
					value < 0
				}
			}
		}
	}
}

# Got nothing
character_event = {
	id = soh.11899
	desc = EVTDESC_SOH_11899
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11899 # And here I thought they wanted me to finish the potion!
		
		character_event = { id = soh.11881 days = 30 random = 90 } # Next step
		
		opinion = {
			who = FROM
			modifier = opinion_did_not_provide_immortality_potion_book
		}
	}
}

# You might need a useful book - purchase it?
character_event = {
	id = soh.11900
	desc = EVTDESC_SOH_11900
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11900 # Knowledge is power!
		
		wealth = -100
		
		add_random_new_alchemy_book_effect = yes
		
		custom_tooltip = {
			text = improve_immortality_potion_quality_book
			
			improve_immortality_potion_quality_book_effect = yes
			
			character_event = { id = soh.11881 days = 30 random = 90 } # Next step
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = greedy
				}
			}
			
			mult_modifier = {
				factor = 2
				trait = erudite
			}
			
			mult_modifier = {
				factor = 2
				trait = scholar
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11900 # I will make do without it...
		
		character_event = { id = soh.11881 days = 30 random = 90 } # Next step
		
		ai_chance = {
			factor = 100
		}
	}
}

# Think of some potentially useful ingredients you know of - add them?
character_event = {
	id = soh.11901
	desc = EVTDESC_SOH_11901
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		random_artifact = {
			limit = {
				has_artifact_flag = ingredient
				has_been_used_in_immortality_potion_trigger = no
			}
			
			save_event_target_as = target_immortality_potion_ingredient
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11901 # I should add it to the potion!
		
		custom_tooltip = {
			text = ingredient_will_be_added_to_immortality_potion
			
			if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 50
					}
					
					event_target:target_immortality_potion_ingredient = {
						OR = {
							ingredient_is_unhealthy_trigger = yes
							AND = {
								ingredient_is_perceived_healthy_trigger = no
								ROOT = {
									trait = cynical
								}
							}
						}
						
						OR = {
							new_ingredient_trigger = no
							ROOT = {
								OR = {
									learning >= 15
									AND = {
										trait = cynical
										is_dumb_trigger = no
									}
								}
							}
						}
					}
					
					NOT = {
						trait = trusting
					}
				}
				
				character_event = { id = soh.11891 } # Attempt to purify ingredient?
			}
			
			else = {
				add_ingredient_to_immortality_potion_placebo_effect = yes
			
				event_target:target_immortality_potion_ingredient = {
					unsafe_destroy_artifact = yes
				}
				
				character_event = { id = soh.11881 days = 30 random = 90 } # Next step
			}
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					trait = stubborn
					NOR = {
						trait = wroth
						trait = arbitrary
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				event_target:target_immortality_potion_ingredient = {
					ingredient_is_unhealthy_trigger = yes
					new_ingredient_trigger = no
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11901 # I should stick with my initial recipie...
		
		character_event = { id = soh.11881 days = 30 random = 90 } # Next step
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = wroth
			}
		}
	}
}

# Lost notes - write them from memory?
character_event = {
	id = soh.11902
	desc = EVTDESC_SOH_11902
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11902 # I will try to remember...
		
		hidden_tooltip = {
			random_list = {
				5 = {
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 50
						}
					}
					
					change_variable = {
						which = immortality_potion_quality
						value = 2
					}
				}
				10 = {
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 50
						}
					}
					
					change_variable = {
						which = immortality_potion_quality
						value = 1
					}
				}
				50 = {
					# Nothing
				}
				10 = {
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_healing_knowledge
							value < 50
						}
					}
					
					change_variable = {
						which = immortality_potion_quality
						value = -1
					}
				}
				5 = {
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_healing_knowledge
							value < 50
						}
					}
					
					change_variable = {
						which = immortality_potion_quality
						value = -2
					}
				}
			}
		}
		
		character_event = { id = soh.11881 days = 30 random = 90 } # Next step
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = cynical
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = wroth
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11902 # This will set me back...
		
		hidden_tooltip = {
			change_variable = {
				which = immortality_potion_progress
				value = -2
			}
		}
		
		character_event = { id = soh.11881 days = 30 random = 90 } # Next step
		
		ai_chance = {
			factor = 100
		}
	}
}

# Other society member might get to offer assitance (or "assitance")
character_event = {
	id = soh.11903
	desc = EVTDESC_SOH_11903
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11903 # I will offer my assistance!
		
		FROM = {
			character_event = { id = soh.11904 } # Alchemist approached
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					FROM = {
						persistent_event_target:getting_immortality_potion = {
							is_rival = ROOT
						}
					}
					is_rival = FROM
					trait = greedy
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = slothful
			}
			
			mult_modifier = {
				factor = 0.1
				trait = ambitious
			}
		}
	}
	
	option = {
		trigger = {
			has_dlc = "Conclave"
			NOR = {
				holds_favor_on = FROM
				owes_favor_to = FROM
			}
		}
		
		name = EVTOPTB_SOH_11903 # I will offer to help, for a Favor...
		
		FROM = {
			character_event = { id = soh.11907 } # Alchemist approached
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					FROM = {
						persistent_event_target:getting_immortality_potion = {
							OR = {
								is_friend = ROOT
								is_lover = ROOT
							}
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = content
			}
			
			mult_modifier = {
				factor = 0.1
				trait = greedy
			}
		}
	}
	
	option = {
		trigger = {
			has_dlc = "Conclave"
			owes_favor_to = FROM
		}
		
		name = EVTOPTC_SOH_11903 # I will offer to help, if they are willing to consider it a Favor...
		
		FROM = {
			character_event = { id = soh.11910 } # Alchemist approached
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					FROM = {
						persistent_event_target:getting_immortality_potion = {
							OR = {
								is_friend = ROOT
								is_lover = ROOT
							}
						}
					}
					trait = trusting
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = paranoid
			}
			
			mult_modifier = {
				factor = 0.1
				trait = greedy
			}
		}
	}
	
	option = {
		name = EVTOPTD_SOH_11903 # My help will cost FROM...
		
		FROM = {
			character_event = { id = soh.11913 } # Alchemist approached
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = charitable
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = greedy
			}
			
			mult_modifier = {
				factor = 0.1
				trait = ambitious
			}
		}
	}
	
	option = {
		name = EVTOPTE_SOH_11903 # I don't want to get involved...
		
		FROM = {
			character_event = { id = soh.11881 days = 30 random = 90 } # Next step
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					OR = {
						AND = {
							FROM = {
								persistent_event_target:getting_immortality_potion = {
									is_rival = ROOT
								}
							}
							NOR = {
								trait = kind
								trait = just
								trait = honest
							}
						}
						FROM = {
							persistent_event_target:getting_immortality_potion = {
								OR = {
									is_friend = ROOT
									is_lover = ROOT
								}
							}
						}
					}
					NOT = {
						trait = slothful
					}
				}
			}
		}
	}
}

# Offered assistance - asking for nothing
character_event = {
	id = soh.11904
	desc = EVTDESC_SOH_11904
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11904 # Certainly!
		
		character_event = { id = soh.11881 days = 30 random = 90 } # Next step
		
		FROM = {
			character_event = { id = soh.11905 days = 2 }
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					trait = proud
					AND = {
						is_rival = FROM
						NOT = {
							trait = trusting
						}
					}
					AND = {
						persistent_event_target:getting_immortality_potion = {
							is_rival = FROM
							OR = {
								is_friend = ROOT
								is_lover = ROOT
							}
						}
						NOT = {
							trait = trusting
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				persistent_event_target:getting_immortality_potion = {
					is_rival = FROM
					NOT = {
						is_rival = ROOT
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = paranoid
			}
			
			mult_modifier = {
				factor = 0.1
				trait = stubborn
			}
			
			mult_modifier = {
				factor = 10
				trait = trusting
			}
			
			mult_modifier = {
				factor = 10
				trait = slothful
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11904 # I don't need their help!
		
		character_event = { id = soh.11881 days = 30 random = 90 } # Next step
		
		FROM = {
			character_event = { id = soh.11906 days = 2 }
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					OR = {
						is_friend = FROM
						is_lover = FROM
					}
					persistent_event_target:getting_immortality_potion = {
						OR = {
							is_friend = FROM
							is_lover = FROM
						}
					}
					NOR = {
						trait = paranoid
						trait = stubborn
						trait = proud
					}
				}
			}
			
			mult_modifier = {
				factor = 2
				FROM = {
					society_rank >= 2
				}
			}
			
			mult_modifier = {
				factor = 5
				FROM = {
					society_rank >= 2
				}
			}
		}
	}
}

# Offer accepted
character_event = {
	id = soh.11905
	desc = EVTDESC_SOH_11905
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11905 # This will help!
		
		custom_tooltip = {
			text = this_will_make_the_potion_healthier
			
			improve_froms_immortality_potion_placebo_effect = yes
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						NOT = {
							is_rival = ROOT
						}
					}
				}
			}
			
			mult_modifier = {	
				factor = 10
				OR = {
					is_friend = FROM
					is_lover = FROM
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = kind
			}
			
			mult_modifier = {
				factor = 10
				trait = honest
			}
			
			mult_modifier = {
				factor = 10
				trait = just
			}
			
			mult_modifier = {
				factor = 0.5
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value < 0
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.2
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value < -25
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value < -50
						}
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11905 # This will help... kill the target!
		
		custom_tooltip = {
			text = this_will_make_the_potion_less_healthy
			
			worsen_froms_immortality_potion_placebo_effect = yes
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						NOR = {
							is_friend = ROOT
							is_lover = ROOT
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				is_rival = FROM
			}
			
			mult_modifier = {
				factor = 10
				trait = cruel
			}
			
			mult_modifier = {
				factor = 10
				trait = deceitful
			}
			
			mult_modifier = {
				factor = 10
				trait = arbitrary
			}
			
			mult_modifier = {
				factor = 0.5
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value >= 25
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.2
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value >= 50
						}
					}
				}
			}
		}
	}
}

# Offer refused
character_event = {
	id = soh.11906
	desc = EVTDESC_SOH_11906
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11906 # I see...
	}
}

# Offered assistance - asking for Favor
character_event = {
	id = soh.11907
	desc = EVTDESC_SOH_11907
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11907 # Certainly!
		
		character_event = { id = soh.11881 days = 30 random = 90 } # Next step
		
		FROM = {
			add_favor = ROOT
			
			character_event = { id = soh.11908 days = 2 }
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					trait = proud
					AND = {
						is_rival = FROM
						NOT = {
							trait = trusting
						}
					}
					AND = {
						persistent_event_target:getting_immortality_potion = {
							is_rival = FROM
							OR = {
								is_friend = ROOT
								is_lover = ROOT
							}
						}
						NOT = {
							trait = trusting
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				persistent_event_target:getting_immortality_potion = {
					is_rival = FROM
					NOT = {
						is_rival = ROOT
					}
				}
			}
			
			mult_modifier = {
				factor = 0.01
				trait = paranoid
			}
			
			mult_modifier = {
				factor = 0.1
				trait = stubborn
			}
			
			mult_modifier = {
				factor = 10
				trait = trusting
			}
			
			mult_modifier = {
				factor = 10
				trait = slothful
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11907 # I don't need their help!
		
		character_event = { id = soh.11881 days = 30 random = 90 } # Next step
		
		FROM = {
			character_event = { id = soh.11909 days = 2 }
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					OR = {
						is_friend = FROM
						is_lover = FROM
					}
					persistent_event_target:getting_immortality_potion = {
						OR = {
							is_friend = FROM
							is_lover = FROM
						}
					}
					NOR = {
						trait = paranoid
						trait = stubborn
						trait = proud
					}
				}
			}
			
			mult_modifier = {
				factor = 2
				FROM = {
					society_rank >= 2
				}
			}
			
			mult_modifier = {
				factor = 5
				FROM = {
					society_rank >= 2
				}
			}
		}
	}
}

# Offer accepted
character_event = {
	id = soh.11908
	desc = EVTDESC_SOH_11908
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11908 # This will help!
		
		custom_tooltip = {
			text = this_will_make_the_potion_healthier
			
			improve_froms_immortality_potion_placebo_effect = yes
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						NOT = {
							is_rival = ROOT
						}
					}
				}
			}
			
			mult_modifier = {	
				factor = 10
				OR = {
					is_friend = FROM
					is_lover = FROM
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = kind
			}
			
			mult_modifier = {
				factor = 10
				trait = honest
			}
			
			mult_modifier = {
				factor = 10
				trait = just
			}
			
			mult_modifier = {
				factor = 0.5
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value < 0
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.2
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value < -25
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value < -50
						}
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11908 # This will help... kill the target!
		
		custom_tooltip = {
			text = this_will_make_the_potion_less_healthy
			
			worsen_froms_immortality_potion_placebo_effect = yes
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						NOR = {
							is_friend = ROOT
							is_lover = ROOT
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				is_rival = FROM
			}
			
			mult_modifier = {
				factor = 10
				trait = cruel
			}
			
			mult_modifier = {
				factor = 10
				trait = deceitful
			}
			
			mult_modifier = {
				factor = 10
				trait = arbitrary
			}
			
			mult_modifier = {
				factor = 0.5
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value >= 25
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.2
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value >= 50
						}
					}
				}
			}
		}
	}
}

# Offer refused
character_event = {
	id = soh.11909
	desc = EVTDESC_SOH_11909
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11909 # I see...
	}
}

# Offered assistance - asking for Favor to be considered repaid
character_event = {
	id = soh.11910
	desc = EVTDESC_SOH_11910
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11910 # Certainly!
		
		character_event = { id = soh.11881 days = 30 random = 90 } # Next step
		
		remove_favor = FROM
		
		FROM = {
			character_event = { id = soh.11911 days = 2 }
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					trait = proud
					AND = {
						is_rival = FROM
						NOT = {
							trait = trusting
						}
					}
					AND = {
						persistent_event_target:getting_immortality_potion = {
							is_rival = FROM
							OR = {
								is_friend = ROOT
								is_lover = ROOT
							}
						}
						NOT = {
							trait = trusting
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				persistent_event_target:getting_immortality_potion = {
					is_rival = FROM
					NOT = {
						is_rival = ROOT
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = paranoid
			}
			
			mult_modifier = {
				factor = 0.1
				trait = ambitious
			}
			
			mult_modifier = {
				factor = 0.1
				trait = stubborn
			}
			
			mult_modifier = {
				factor = 10
				trait = trusting
			}
			
			mult_modifier = {
				factor = 10
				trait = slothful
			}
			
			mult_modifier = {
				factor = 10
				trait = content
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11910 # I don't need their help!
		
		character_event = { id = soh.11881 days = 30 random = 90 } # Next step
		
		FROM = {
			character_event = { id = soh.11912 days = 2 }
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					OR = {
						is_friend = FROM
						is_lover = FROM
					}
					persistent_event_target:getting_immortality_potion = {
						OR = {
							is_friend = FROM
							is_lover = FROM
						}
					}
					NOR = {
						trait = paranoid
						trait = stubborn
						trait = proud
					}
				}
			}
			
			mult_modifier = {
				factor = 2
				FROM = {
					society_rank >= 2
				}
			}
			
			mult_modifier = {
				factor = 5
				FROM = {
					society_rank >= 2
				}
			}
		}
	}
}

# Offer accepted
character_event = {
	id = soh.11911
	desc = EVTDESC_SOH_11911
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11911 # This will help!
		
		custom_tooltip = {
			text = this_will_make_the_potion_healthier
			
			improve_froms_immortality_potion_placebo_effect = yes
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						NOT = {
							is_rival = ROOT
						}
					}
				}
			}
			
			mult_modifier = {	
				factor = 10
				OR = {
					is_friend = FROM
					is_lover = FROM
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = kind
			}
			
			mult_modifier = {
				factor = 10
				trait = honest
			}
			
			mult_modifier = {
				factor = 10
				trait = just
			}
			
			mult_modifier = {
				factor = 0.5
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value < 0
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.2
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value < -25
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value < -50
						}
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11911 # This will help... kill the target!
		
		custom_tooltip = {
			text = this_will_make_the_potion_less_healthy
			
			worsen_froms_immortality_potion_placebo_effect = yes
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						NOR = {
							is_friend = ROOT
							is_lover = ROOT
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				is_rival = FROM
			}
			
			mult_modifier = {
				factor = 10
				trait = cruel
			}
			
			mult_modifier = {
				factor = 10
				trait = deceitful
			}
			
			mult_modifier = {
				factor = 10
				trait = arbitrary
			}
			
			mult_modifier = {
				factor = 0.5
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value >= 25
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.2
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value >= 50
						}
					}
				}
			}
		}
	}
}

# Offer refused
character_event = {
	id = soh.11912
	desc = EVTDESC_SOH_11912
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11912 # I see...
	}
}

# Offered assistance - asking for money
character_event = {
	id = soh.11913
	desc = EVTDESC_SOH_11913
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11913 # Certainly!
		
		character_event = { id = soh.11881 days = 30 random = 90 } # Next step
		
		if = {
			limit = {
				society_rank == 4
			}
			
			transfer_scaled_wealth = {
				to = FROM
				value = 0.2
				min = 100
				max = 400
			}
		}
		
		else_if = {
			limit = {
				society_rank == 3
			}
			
			transfer_scaled_wealth = {
				to = FROM
				value = 0.15
				min = 75
				max = 300
			}
		}
		
		else_if = {
			limit = {
				society_rank == 2
			}
			
			transfer_scaled_wealth = {
				to = FROM
				value = 0.1
				min = 50
				max = 200
			}
		}
		
		else = {
			transfer_scaled_wealth = {
				to = FROM
				value = 0.05
				min = 25
				max = 100
			}
		}
		
		FROM = {
			character_event = { id = soh.11914 days = 2 }
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					trait = proud
					AND = {
						is_rival = FROM
						NOT = {
							trait = trusting
						}
					}
					AND = {
						persistent_event_target:getting_immortality_potion = {
							is_rival = FROM
							OR = {
								is_friend = ROOT
								is_lover = ROOT
							}
						}
						NOT = {
							trait = trusting
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				persistent_event_target:getting_immortality_potion = {
					is_rival = FROM
					NOT = {
						is_rival = ROOT
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = paranoid
			}
			
			mult_modifier = {
				factor = 0.1
				trait = stubborn
			}
			
			mult_modifier = {
				factor = 10
				trait = trusting
			}
			
			mult_modifier = {
				factor = 0.1
				trait = greedy
			}
			
			mult_modifier = {
				factor = 10
				trait = charitable
			}
			
			mult_modifier = {
				factor = 10
				trait = slothful
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11913 # I don't need their help!
		
		character_event = { id = soh.11881 days = 30 random = 90 } # Next step
		
		FROM = {
			character_event = { id = soh.11915 days = 2 }
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					OR = {
						is_friend = FROM
						is_lover = FROM
					}
					persistent_event_target:getting_immortality_potion = {
						OR = {
							is_friend = FROM
							is_lover = FROM
						}
					}
					NOR = {
						trait = paranoid
						trait = stubborn
						trait = proud
					}
				}
			}
			
			mult_modifier = {
				factor = 2
				FROM = {
					society_rank >= 2
				}
			}
			
			mult_modifier = {
				factor = 5
				FROM = {
					society_rank >= 2
				}
			}
		}
	}
}

# Offer accepted
character_event = {
	id = soh.11914
	desc = EVTDESC_SOH_11914
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11914 # This will help!
		
		custom_tooltip = {
			text = this_will_make_the_potion_healthier
			
			improve_froms_immortality_potion_placebo_effect = yes
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						NOT = {
							is_rival = ROOT
						}
					}
				}
			}
			
			mult_modifier = {	
				factor = 10
				OR = {
					is_friend = FROM
					is_lover = FROM
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = kind
			}
			
			mult_modifier = {
				factor = 10
				trait = honest
			}
			
			mult_modifier = {
				factor = 10
				trait = just
			}
			
			mult_modifier = {
				factor = 0.5
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value < 0
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.2
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value < -25
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value < -50
						}
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11914 # This will help... kill the target!
		
		custom_tooltip = {
			text = this_will_make_the_potion_less_healthy
			
			worsen_froms_immortality_potion_placebo_effect = yes
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						NOR = {
							is_friend = ROOT
							is_lover = ROOT
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				is_rival = FROM
			}
			
			mult_modifier = {
				factor = 10
				trait = cruel
			}
			
			mult_modifier = {
				factor = 10
				trait = deceitful
			}
			
			mult_modifier = {
				factor = 10
				trait = arbitrary
			}
			
			mult_modifier = {
				factor = 0.5
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value >= 25
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.2
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value >= 50
						}
					}
				}
			}
		}
	}
}

# Offer refused
character_event = {
	id = soh.11915
	desc = EVTDESC_SOH_11915
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11915 # I see...
	}
}

# Accidentally poured the wrong thing in the potion - keep going or attempt to recreate what you had?
character_event = {
	id = soh.11916
	desc = EVTDESC_SOH_11916
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		random_artifact = {
			limit = {
				has_artifact_flag = ingredient
				has_been_used_in_immortality_potion_trigger = no
			}
			
			save_event_target_as = target_immortality_potion_ingredient
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11916 # It's fine...
		
		custom_tooltip = {
			text = ingredient_will_be_added_to_immortality_potion
			
			add_ingredient_to_immortality_potion_placebo_effect = yes
		
			event_target:target_immortality_potion_ingredient = {
				unsafe_destroy_artifact = yes
			}
			
			character_event = { id = soh.11881 days = 30 random = 90 } # Next step
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					persistent_event_target:getting_immortality_potion = {
						character = ROOT
					}
					trait = paranoid
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = slothful
			}
			
			mult_modifier = {
				factor = 10
				is_dumb_trigger = yes
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11916 # It's fine...
		
		hidden_tooltip = {
			random_list = {
				50 = {
					trigger = {
						learning >= 15
					}
					
					mult_modifier = {
						factor = 2
						trait = physician
					}
					
					mult_modifier = {
						factor = 2
						learning >= 20
					}
					
					mult_modifier = {
						factor = 2
						learning >= 25
					}
					
					character_event = { id = soh.11917 days = 7 random = 7 } # Recovery went well
				}
				
				50 = {
					trigger = {
						learning < 30
					}
					
					character_event = { id = soh.11918 days = 7 random = 7 } # Setback
				}
			}
		}
		
		custom_tooltip = {
			text = ingredient_will_be_added_to_immortality_potion
			
			add_ingredient_to_immortality_potion_placebo_effect = yes
		
			event_target:target_immortality_potion_ingredient = {
				unsafe_destroy_artifact = yes
			}
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 10
				trait = diligent
			}
			
			mult_modifier = {
				factor = 10
				trait = physician
			}
		}
	}
}

# Recreated potion - it went well
character_event = {
	id = soh.11917
	desc = EVTDESC_SOH_11917
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11917 # That went well enough...
		
		hidden_tooltip = {
			if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 100
					}
				}
				change_variable = {
					which = immortality_potion_quality
					value = 5
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 75
					}
				}
				change_variable = {
					which = immortality_potion_quality
					value = 4
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 50
					}
				}
				change_variable = {
					which = immortality_potion_quality
					value = 3
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 25
					}
				}
				change_variable = {
					which = immortality_potion_quality
					value = 2
				}
			}
			
			else = {
				change_variable = {
					which = immortality_potion_quality
					value = 1
				}
			}
		}
		
		character_event = { id = soh.11881 days = 30 random = 90 } # Next step
	}
}

# Recreated potion - setback
character_event = {
	id = soh.11918
	desc = EVTDESC_SOH_11918
	picture = GFX_evt_experiments_failed
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11918 # Curses!
		
		hidden_tooltip = {
			if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 100
					}
				}
				change_variable = {
					which = immortality_potion_quality
					value = -1
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 75
					}
				}
				change_variable = {
					which = immortality_potion_quality
					value = -2
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 50
					}
				}
				change_variable = {
					which = immortality_potion_quality
					value = -3
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 25
					}
				}
				change_variable = {
					which = immortality_potion_quality
					value = -4
				}
			}
			
			else = {
				change_variable = {
					which = immortality_potion_quality
					value = -5
				}
			}
		}
		
		character_event = { id = soh.11881 days = 30 random = 90 } # Next step
	}
}

# Lunatic gets inspired, for good or for bad
character_event = {
	id = soh.11919
	desc = EVTDESC_SOH_11919
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		random_artifact = {
			limit = {
				has_artifact_flag = ingredient
				has_been_used_in_immortality_potion_trigger = no
			}
			
			save_event_target_as = target_immortality_potion_ingredient
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11919 # I should add it to the potion!
		
		custom_tooltip = {
			text = ingredient_will_be_added_to_immortality_potion
			
			add_ingredient_to_immortality_potion_placebo_effect = yes
		
			event_target:target_immortality_potion_ingredient = {
				unsafe_destroy_artifact = yes
			}
			
			character_event = { id = soh.11881 days = 30 random = 90 } # Next step
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11919 # Let's not...
		
		character_event = { id = soh.11881 days = 30 random = 90 } # Next step
		
		ai_chance = {
			factor = 0
		}
	}
}

# Possessed character tosses something into the potion
character_event = {
	id = soh.11920
	desc = EVTDESC_SOH_11920
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		random_artifact = {
			limit = {
				has_artifact_flag = ingredient
				has_been_used_in_immortality_potion_trigger = no
			}
			
			save_event_target_as = target_immortality_potion_ingredient
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11920 # I should add it to the potion!
		
		custom_tooltip = {
			text = ingredient_will_be_added_to_immortality_potion
			
			add_ingredient_to_immortality_potion_placebo_effect = yes
		
			event_target:target_immortality_potion_ingredient = {
				unsafe_destroy_artifact = yes
			}
			
			character_event = { id = soh.11881 days = 30 random = 90 } # Next step
		}
	}
}

# Courtier in the same court might attempt sabotage (if not having a secret lab)
character_event = {
	id = soh.11921
	desc = EVTDESC_SOH_11921
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11921 # Let's do it!
		
		hidden_tooltip = {
			random_list = {
				50 = {
					trigger = {
						intrigue >= 10
						attribute_diff = {
							who = FROM
							attribute = intrigue
							value >= -5
						}
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 15
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 20
					}
					
					mult_modifier = {
						factor = 2
						attribute_diff = {
							who = FROM
							attribute = intrigue
							value >= 0
						}
					}
					
					mult_modifier = {
						factor = 2
						attribute_diff = {
							who = FROM
							attribute = intrigue
							value >= 5
						}
					}
					
					mult_modifier = {
						factor = 2
						attribute_diff = {
							who = FROM
							attribute = intrigue
							value >= 10
						}
					}
					
					FROM = {
						character_event = { id = soh.11922 } # Sabotage discovered, perpetrator unknown
					}
				}
				
				50 = {
					character_event = { id = soh.11923 } # Sabotage attempt failed
				}
			}
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						NOR = {
							is_friend = ROOT
							is_lover = ROOT
						}
					}
				}
				NAND = {
					trait = kind
					trait = honest
					trait = just
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = kind
			}
			
			mult_modifier = {
				factor = 0.1
				trait = honest
			}
			
			mult_modifier = {
				factor = 0.1
				trait = just
			}
			
			mult_modifier = {
				factor = 0.1
				trait = paranoid
			}
			
			mult_modifier = {
				factor = 0.1
				OR = {
					is_friend = FROM
					is_lover = FROM
				}
			}
			
			mult_modifier = {
				factor = 2
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value < 0
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 5
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value < -25
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value < 10
						}
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11921 # It is too risky
		
		FROM = {
			character_event = { id = soh.11881 days = 30 random = 90 } # Next step
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					OR = {
						trait = lunatic
						trait = possessed
					}
					FROM = {
						persistent_event_target:getting_immortality_potion = {
							is_rival = ROOT
						}
					}
					NOR = {
						trait = kind
						trait = honest
						trait = just
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = cruel
			}
			
			mult_modifier = {
				factor = 0.1
				trait = deceitful
			}
			
			mult_modifier = {
				factor = 0.1
				trait = arbitrary
			}
			
			mult_modifier = {
				factor = 10
				trait = slothful
			}
		}
	}
}

# Sabotage discovered - perpetrator unknown
character_event = {
	id = soh.11922
	desc = EVTDESC_SOH_11922
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_intrigue
	
	hide_from = yes
	
	is_triggered_only = yes
	
	immediate = {
		# TIANXIATODO: Base on courtier's skill and alchemical knowledge?
		change_variable = {
			which = immortality_potion_quality
			value = -5
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11922 # Who could have done this?
		
		character_event = { id = soh.11881 days = 30 random = 90 } # Next step
	}
}

# Sabotage attempt discovered - courtier caught
character_event = {
	id = soh.11923
	desc = EVTDESC_SOH_11923
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11923 # Uh oh...
		
		FROMFROM = {
			character_event = { id = soh.11924 } # Inform the alchemist
		}
	}
}

# Alchemist informed of courtier being caught
character_event = {
	id = soh.11924
	desc = EVTDESC_SOH_11924
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11924 # I will remember this!
		
		opinion = {
			who = FROM
			modifier = opinion_potion_sabotage
		}
		
		character_event = { id = soh.11881 days = 30 random = 90 } # Next step
	}
	
	option = {
		trigger = {
			is_landed = yes
		}
		
		name = EVTOPTB_SOH_11924 # Guards! Seize them!
		
		FROM = {
			imprison = ROOT
		}
		
		opinion = {
			who = FROM
			modifier = opinion_potion_sabotage
		}
		
		character_event = { id = soh.11881 days = 30 random = 90 } # Next step
	}
}

# Having second thoughts - potion might be bad
character_event = {
	id = soh.11925
	desc = EVTDESC_SOH_11925
	picture = GFX_evt_stressed_ruler
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11925 # I will keep at it!
		
		character_event = { id = soh.11881 days = 30 random = 90 } # Next step
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				persistent_event_target:getting_immortality_potion = {
					OR = {
						is_friend = ROOT
						is_lover = ROOT
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11925 # I should stop...
		
		# TIANXIATODO: Fail quest
		
		persistent_event_target:getting_immortality_potion = {
			character_event = { id = soh.11926 } # Inform target
		}
		
		# TIANXIATODO: Cleanup
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = diligent
			}
			
			mult_modifier = {
				factor = 0.1
				trait = stubborn
			}
		}
	}
	
	option = {
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				is_rival = ROOT
			}
		}
		
		name = EVTOPTC_SOH_11925 # Good! Good!
		
		custom_tooltip = {
			text = will_swap_to_brewing_poison
			
			clr_character_flag = brewing_immortality_potion_placebo
			set_character_flag = brewing_immortality_potion_poison
			
			invert_immortality_potion_quality_effect = yes
		
			character_event = { id = soh.11932 days = 30 random = 90 } # Next step
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = kind
			}
			
			mult_modifier = {
				factor = 0.1
				trait = honest
			}
			
			mult_modifier = {
				factor = 0.1
				trait = just
			}
			
			mult_modifier = {
				factor = 10
				trait = cruel
			}
			
			mult_modifier = {
				factor = 10
				trait = arbitrary
			}
			
			mult_modifier = {
				factor = 10
				trait = deceitful
			}
		}
	}
}

# Inform target - alchemist stopped brewing potion
character_event = {
	id = soh.11926
	desc = EVTDESC_SOH_11926
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11926 # Perhaps for the best...
		
		FROM = {
			character_event = { id = soh.11927 } # Inform alchemist
		}
		
		opinion = {
			who = FROM
			modifier = opinion_stopped_brewing_immortality_potion_minor
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					AND = {
						trait = paranoid
						NOT = {
							is_rival = FROM
						}
					}
					trait = wroth
					NOR = {
						is_friend = FROM
						is_lover = FROM
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = kind
			}
			
			mult_modifier = {
				factor = 10
				is_friend = FROM
			}
			
			mult_modifier = {
				factor = 10
				is_lover = FROM
			}
		}
	}
	
	option = {
		trigger = {
			NOT = {
				trait = trusting
			}
		}
		
		name = EVTOPTB_SOH_11926 # I don't trust the explanation given...
		
		FROM = {
			character_event = { id = soh.11928 } # Inform alchemist
		}
		
		opinion = {
			who = FROM
			modifier = opinion_stopped_brewing_immortality_potion_major
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 10
				trait = paranoid
			}
			
			mult_modifier = {
				factor = 10
				trait = wroth
			}
			
			mult_modifier = {
				factor = 10
				is_rival = FROM
			}
		}
	}
}

# Inform alchemist - target accepted apology
character_event = {
	id = soh.11927
	desc = EVTDESC_SOH_11927
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11927 # Good to hear!
	}
}

# Inform alchemist - target got imprisonment reason
character_event = {
	id = soh.11928
	desc = EVTDESC_SOH_11928
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11928 # This might be bad...
	}
}

# Having second thoughts - you don't particularly like the target
character_event = {
	id = soh.11929
	desc = EVTDESC_SOH_11929
	picture = GFX_evt_rival_rulers
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11929 # I will keep at it...
		
		character_event = { id = soh.11881 days = 30 random = 90 } # Next step
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					persistent_event_target:getting_immortality_potion = {
						is_rival = ROOT
					}
					NOR = {
						trait = kind
						trait = honest
						trait = just
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = kind
			}
			
			mult_modifier = {
				factor = 10
				trait = honest
			}
			
			mult_modifier = {
				factor = 10
				trait = just
			}
			
			mult_modifier = {
				factor = 0.1
				trait = slothful
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11929 # I should stop...
		
		# TIANXIATODO: Fail quest
		
		persistent_event_target:getting_immortality_potion = {
			character_event = { id = soh.11926 } # Inform target
		}
		
		# TIANXIATODO: Cleanup
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = diligent
			}
			
			mult_modifier = {
				factor = 0.1
				trait = stubborn
			}
			
			mult_modifier = {
				factor = 0.1
				persistent_event_target:getting_immortality_potion = {
					is_rival = ROOT
				}
				trait = cruel
			}
			
			mult_modifier = {
				factor = 0.1
				persistent_event_target:getting_immortality_potion = {
					is_rival = ROOT
				}
				trait = deceitful
			}
			
			mult_modifier = {
				factor = 0.1
				persistent_event_target:getting_immortality_potion = {
					is_rival = ROOT
				}
				trait = arbitrary
			}
		}
	}
	
	option = {
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				is_rival = ROOT
			}
		}
		
		name = EVTOPTC_SOH_11929 # I should try to make it a poison instead!
		
		custom_tooltip = {
			text = will_swap_to_brewing_poison
			
			clr_character_flag = brewing_immortality_potion_placebo
			set_character_flag = brewing_immortality_potion_poison
			
			invert_immortality_potion_quality_effect = yes
		
			character_event = { id = soh.11932 days = 30 random = 90 } # Next step
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = kind
			}
			
			mult_modifier = {
				factor = 0.1
				trait = honest
			}
			
			mult_modifier = {
				factor = 0.1
				trait = just
			}
			
			mult_modifier = {
				factor = 10
				trait = cruel
			}
			
			mult_modifier = {
				factor = 10
				trait = arbitrary
			}
			
			mult_modifier = {
				factor = 10
				trait = deceitful
			}
		}
	}
}

# Having second thoughts - perhaps you like the target enough to actually try?
character_event = {
	id = soh.11930
	desc = EVTDESC_SOH_11930
	picture = GFX_evt_china_diplomatic_success
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11930 # I will keep at it...
		
		character_event = { id = soh.11881 days = 30 random = 90 } # Next step
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					persistent_event_target:getting_immortality_potion = {
						OR = {
							is_friend = ROOT
							is_lover = ROOT
						}
					}
					NAND = {
						trait = cruel
						trait = arbitrary
						trait = deceitful
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = kind
			}
			
			mult_modifier = {
				factor = 0.1
				trait = honest
			}
			
			mult_modifier = {
				factor = 0.1
				trait = just
			}
			
			mult_modifier = {
				factor = 10
				trait = slothful
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11930 # I should actually try...
		
		custom_tooltip = {
			text = will_swap_to_brewing_actual
			
			clr_character_flag = brewing_immortality_potion_placebo
			set_character_flag = brewing_immortality_potion_actual
			
		
			character_event = { id = soh.11818 days = 30 random = 90 } # Next step
		}
		
		ai_chance = {
			factor = 100
		}
	}
}

## Maybe you should drag things out, to avoid the target not liking the result? - deprecated
#character_event = {
#	id = soh.11931
#	desc = EVTDESC_SOH_11931
#	picture = GFX_evt_stressed_ruler
#	border = GFX_event_normal_frame_intrigue
#	
#	is_triggered_only = yes
#	
#	option = {
#		name = EVTOPTA_SOH_11931 # I will keep at it...
#		
#		character_event = { id = soh.11881 days = 30 random = 90 } # Next step
#		
#		ai_chance = {
#			factor = 100
#			
#			mult_modifier = {
#				factor = 0.1
#				trait = slothful
#			}
#			
#			mult_modifier = {
#				factor = 0.1
#				trait = paranoid
#			}
#			
#			mult_modifier = {
#				factor = 0.1
#				trait = cynical
#			}
#			
#			mult_modifier = {
#				factor = 0.1
#				trait = patient
#			}
#			
#			mult_modifier = {
#				factor = 0.1
#				trait = deceitful
#			}
#		}
#	}
#	
#	option = {
#		name = EVTOPTB_SOH_11931 # I will work a bit more slowly
#		
#		character_event = { id = soh.11881 days = 30 random = 90 } # Next step
#		
#		ai_chance = {
#			factor = 100
#			
#			mult_modifier = {
#				factor = 0.1
#				trait = diligent
#			}
#			
#			mult_modifier = {
#				factor = 0.1
#				trait = patient
#			}
#			
#			mult_modifier = {
#				factor = 0.1
#				trait = honest
#			}
#		}
#	}
#}



### Poison - note that potion quality is inverted (high means more deadly)

# Brewing poison - base it on your skills, on a book, or look for ideas?
character_event = {
	id = soh.11932
	desc = EVTDESC_SOH_11932
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	prisoner = no
	
	trigger = {
		has_character_flag = brewing_immortality_potion_poison
		is_actually_incapable_trigger = no
		persistent_event_target:getting_immortality_potion = {
			is_alive = yes
		}
	}
	
	fail_trigger_effect = {
		if = {
			limit = {
				persistent_event_target:getting_immortality_potion = {
					is_alive = yes
				}
			}
			repeat_event = { id = soh.11932 days = 30 random = 60 } # Try again
		}
	}
	
	immediate = {
		set_variable = {
			which = immortality_potion_quality
			value = 0
		}
		set_variable = {
			which = immortality_potion_ingredients
			value = 0
		}
		set_variable = {
			which = immortality_potion_progress
			value = 0
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11932 # I will come up with something of my own!
		
		hidden_tooltip = {
			random_list = {
				5 = {
					trigger = {
						intrigue >= 15
						check_variable = {
							which = alchemist_poison_knowledge
							value >= 50
						}
						is_dumb_trigger = no
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_poison_knowledge
							value >= 75
						}
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_poison_knowledge
							value >= 100
						}
					}
					
					mult_modifier = {
						factor = 2
						trait = physician
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 20
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 25
					}
					
					character_event = { id = soh.11933 days = 10 random = 20 } # You got a great idea
				}
				
				10 = {
					trigger = {
						intrigue >= 10
						check_variable = {
							which = alchemist_poison_knowledge
							value >= 25
						}
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_poison_knowledge
							value >= 75
						}
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_poison_knowledge
							value >= 100
						}
					}
					
					mult_modifier = {
						factor = 2
						trait = physician
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 20
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 25
					}
					
					character_event = { id = soh.11934 days = 10 random = 20 } # You got some decent ideas
				}
				
				25 = {
					trigger = {
						OR = {
							intrigue < 10
							check_variable = {
								which = alchemist_poison_knowledge
								value < 25
							}
						}
					}
					
					character_event = { id = soh.11935 days = 10 random = 20 } # You got one uncertain idea
				}
				
				50 = {
					trigger = {
						OR = {
							intrigue < 10
							check_variable = {
								which = alchemist_poison_knowledge
								value < 25
							}
						}
					}
					
					mult_modifier = {
						factor = 2
						intrigue < 10
						check_variable = {
							which = alchemist_poison_knowledge
							value < 25
						}
					}
					
					mult_modifier = {
						factor = 2
						intrigue < 5
					}
					
					mult_modifier = {
						factor = 2
						is_dumb_trigger = yes
					}
					
					character_event = { id = soh.11936 days = 10 random = 20 } # You have no ideas
				}
			}
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					intrigue < 10
					trait = humble
					OR = {
						any_artifact = {
							has_artifact_flag = book
							has_artifact_flag = alchemy
							has_artifact_flag = taoist
						}
						intrigue >= 10
					}
				}
			}
			
			mult_modifier = {
				factor = 5
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 50
				}
			}
			
			mult_modifier = {
				factor = 2
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 25
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = physician
			}
			
			mult_modifier = {
				factor = 5
				trait = lunatic
			}
			
			mult_modifier = {
				factor = 2
				trait = diligent
			}
			
			mult_modifier = {
				factor = 2
				intrigue >= 15
			}
			
			mult_modifier = {
				factor = 2
				intrigue >= 20
			}
			
			mult_modifier = {
				factor = 2
				intrigue >= 25
			}
		}
	}
	
	option = {
		trigger = {
			any_artifact = {
				has_artifact_flag = book
				has_artifact_flag = alchemy
				has_artifact_flag = taoist
			}
		}
		
		name = EVTOPTB_SOH_11932 # I will look something up in a book!
		
		hidden_tooltip = {
			random_list = {
				5 = {
					trigger = {
						learning >= 15
						check_variable = {
							which = alchemist_poison_knowledge
							value >= 50
						}
						is_dumb_trigger = no
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_poison_knowledge
							value >= 75
						}
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_poison_knowledge
							value >= 100
						}
					}
					
					mult_modifier = {
						factor = 2
						trait = physician
					}
					
					mult_modifier = {
						factor = 2
						trait = erudite
					}
					
					mult_modifier = {
						factor = 2
						trait = scholar
					}
					
					mult_modifier = {
						factor = 2
						learning >= 20
					}
					
					mult_modifier = {
						factor = 2
						learning >= 25
					}
					
					character_event = { id = soh.11937 days = 10 random = 20 } # You got a great idea
				}
				
				10 = {
					trigger = {
						learning >= 10
						check_variable = {
							which = alchemist_poison_knowledge
							value >= 25
						}
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_poison_knowledge
							value >= 75
						}
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_poison_knowledge
							value >= 100
						}
					}
					
					mult_modifier = {
						factor = 2
						trait = physician
					}
					
					mult_modifier = {
						factor = 2
						trait = erudite
					}
					
					mult_modifier = {
						factor = 2
						trait = scholar
					}
					
					mult_modifier = {
						factor = 2
						learning >= 20
					}
					
					mult_modifier = {
						factor = 2
						learning >= 25
					}
					
					character_event = { id = soh.11938 days = 10 random = 20 } # You got some decent ideas
				}
				
				25 = {
					trigger = {
						OR = {
							learning < 10
							check_variable = {
								which = alchemist_poison_knowledge
								value < 25
							}
						}
					}
					
					character_event = { id = soh.11812 days = 10 random = 20 } # You got one uncertain idea
				}
				
				50 = {
					trigger = {
						OR = {
							learning < 10
							check_variable = {
								which = alchemist_poison_knowledge
								value < 25
							}
						}
					}
					
					mult_modifier = {
						factor = 2
						learning < 10
						check_variable = {
							which = alchemist_poison_knowledge
							value < 25
						}
					}
					
					mult_modifier = {
						factor = 2
						learning < 5
					}
					
					mult_modifier = {
						factor = 2
						is_dumb_trigger = yes
					}
					
					character_event = { id = soh.11813 days = 10 random = 20 } # You have no ideas
				}
			}
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = proud
				}
			}
			
			mult_modifier = {
				factor = 5
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 50
				}
			}
			
			mult_modifier = {
				factor = 2
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 25
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = scholar
			}
			
			mult_modifier = {
				factor = 5
				trait = erudite
			}
			
			mult_modifier = {
				factor = 2
				trait = diligent
			}
			
			mult_modifier = {
				factor = 2
				learning >= 15
			}
			
			mult_modifier = {
				factor = 2
				learning >= 20
			}
			
			mult_modifier = {
				factor = 2
				learning >= 25
			}
		}
	}
	
	option = {
		trigger = {
			intrigue >= 10
		}
		
		name = EVTOPTC_SOH_11932 # My agents will find the answer!
		
		hidden_tooltip = {
			random_list = {
				5 = {
					trigger = {
						intrigue >= 15
						check_variable = {
							which = alchemist_poison_knowledge
							value >= 50
						}
						is_dumb_trigger = no
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_poison_knowledge
							value >= 75
						}
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_poison_knowledge
							value >= 100
						}
					}
					
					mult_modifier = {
						factor = 2
						trait = master_schemer
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 20
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 25
					}
					
					character_event = { id = soh.11814 days = 10 random = 20 } # You got a great idea
				}
				
				10 = {
					trigger = {
						intrigue >= 10
						check_variable = {
							which = alchemist_poison_knowledge
							value >= 25
						}
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_poison_knowledge
							value >= 75
						}
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_poison_knowledge
							value >= 100
						}
					}
					
					mult_modifier = {
						factor = 2
						trait = master_schemer
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 20
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 25
					}
					
					character_event = { id = soh.11815 days = 10 random = 20 } # You got some decent ideas
				}
				
				25 = {
					trigger = {
						OR = {
							intrigue < 10
							check_variable = {
								which = alchemist_poison_knowledge
								value < 25
							}
						}
					}
					
					character_event = { id = soh.11816 days = 10 random = 20 } # You got one uncertain idea
				}
				
				50 = {
					trigger = {
						OR = {
							intrigue < 10
							check_variable = {
								which = alchemist_poison_knowledge
								value < 25
							}
						}
					}
					
					mult_modifier = {
						factor = 2
						intrigue < 10
						check_variable = {
							which = alchemist_poison_knowledge
							value < 25
						}
					}
					
					mult_modifier = {
						factor = 2
						intrigue < 5
					}
					
					mult_modifier = {
						factor = 2
						is_dumb_trigger = yes
					}
					
					character_event = { id = soh.11817 days = 10 random = 20 } # You have no ideas
				}
			}
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = proud
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = master_schemer
			}
			
			mult_modifier = {
				factor = 5
				trait = deceitful
			}
			
			mult_modifier = {
				factor = 5
				trait = slothful
			}
			
			mult_modifier = {
				factor = 2
				intrigue >= 15
			}
			
			mult_modifier = {
				factor = 2
				intrigue >= 20
			}
			
			mult_modifier = {
				factor = 2
				intrigue >= 25
			}
		}
	}
}

# Own skills - you have a great idea
character_event = {
	id = soh.11933
	desc = EVTDESC_SOH_11933
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	prisoner = no
	
	trigger = {
		has_character_flag = brewing_immortality_potion_poison
		is_actually_incapable_trigger = no
		persistent_event_target:getting_immortality_potion = {
			is_alive = yes
		}
	}
	
	fail_trigger_effect = {
		if = {
			limit = {
				persistent_event_target:getting_immortality_potion = {
					is_alive = yes
				}
			}
			repeat_event = { id = soh.11933 days = 30 random = 60 } # Try again
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11933 # I know just what to brew!
		
		hidden_tooltip = {
			change_variable = {
				which = immortality_potion_quality
				value = 5
			}
		}
		
		character_event = { id = soh.11945 days = 30 random = 60 } # Hidden progress event selection
	}
}

# Own skills - you have some decent ideas
character_event = {
	id = soh.11934
	desc = EVTDESC_SOH_11934
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	prisoner = no
	
	trigger = {
		has_character_flag = brewing_immortality_potion_poison
		is_actually_incapable_trigger = no
		persistent_event_target:getting_immortality_potion = {
			is_alive = yes
		}
	}
	
	fail_trigger_effect = {
		if = {
			limit = {
				persistent_event_target:getting_immortality_potion = {
					is_alive = yes
				}
			}
			repeat_event = { id = soh.11934 days = 30 random = 60 } # Try again
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11934 # I think I know what to do...
		
		hidden_tooltip = {
			change_variable = {
				which = immortality_potion_quality
				value = 2
			}
		}
		
		character_event = { id = soh.11945 days = 30 random = 60 } # Hidden progress event selection
	}
}

# Own skills - you have one very uncertain idea
character_event = {
	id = soh.11935
	desc = EVTDESC_SOH_11935
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	prisoner = no
	
	trigger = {
		has_character_flag = brewing_immortality_potion_poison
		is_actually_incapable_trigger = no
		persistent_event_target:getting_immortality_potion = {
			is_alive = yes
		}
	}
	
	fail_trigger_effect = {
		if = {
			limit = {
				persistent_event_target:getting_immortality_potion = {
					is_alive = yes
				}
			}
			repeat_event = { id = soh.11935 days = 30 random = 60 } # Try again
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11935 # Maybe this will work...
		
		hidden_tooltip = {
			random_list = {
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = 1
					}
				}
				25 = {
					# No change
				}
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = -1
					}
				}
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = -2
					}
				}
			}
		}
		
		character_event = { id = soh.11945 days = 30 random = 60 } # Hidden progress event selection
	}
}

# Own skills - you have no ideas
character_event = {
	id = soh.11936
	desc = EVTDESC_SOH_11936
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	prisoner = no
	
	trigger = {
		has_character_flag = brewing_immortality_potion_poison
		is_actually_incapable_trigger = no
		persistent_event_target:getting_immortality_potion = {
			is_alive = yes
		}
	}
	
	fail_trigger_effect = {
		if = {
			limit = {
				persistent_event_target:getting_immortality_potion = {
					is_alive = yes
				}
			}
			repeat_event = { id = soh.11936 days = 30 random = 60 } # Try again
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11936 # I will figure it out...
		
		hidden_tooltip = {
			random_list = {
				25 = {
					# No change
				}
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = -1
					}
				}
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = -2
					}
				}
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = -3
					}
				}
			}
		}
		
		character_event = { id = soh.11945 days = 30 random = 60 } # Hidden progress event selection
	}
}

# Book - you get a great idea
character_event = {
	id = soh.11937
	desc = EVTDESC_SOH_11937
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	prisoner = no
	
	trigger = {
		has_character_flag = brewing_immortality_potion_poison
		is_actually_incapable_trigger = no
		persistent_event_target:getting_immortality_potion = {
			is_alive = yes
		}
	}
	
	fail_trigger_effect = {
		if = {
			limit = {
				persistent_event_target:getting_immortality_potion = {
					is_alive = yes
				}
			}
			repeat_event = { id = soh.11937 days = 30 random = 60 } # Try again
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11937 # I know just what to brew!
		
		hidden_tooltip = {
			change_variable = {
				which = immortality_potion_quality
				value = 5
			}
		}
		
		character_event = { id = soh.11945 days = 30 random = 60 } # Hidden progress event selection
	}
}

# Book - you get some decent ideas
character_event = {
	id = soh.11938
	desc = EVTDESC_SOH_11938
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	prisoner = no
	
	trigger = {
		has_character_flag = brewing_immortality_potion_poison
		is_actually_incapable_trigger = no
		persistent_event_target:getting_immortality_potion = {
			is_alive = yes
		}
	}
	
	fail_trigger_effect = {
		if = {
			limit = {
				persistent_event_target:getting_immortality_potion = {
					is_alive = yes
				}
			}
			repeat_event = { id = soh.11938 days = 30 random = 60 } # Try again
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11938 # I think I know what to do...
		
		hidden_tooltip = {
			change_variable = {
				which = immortality_potion_quality
				value = 2
			}
		}
		
		character_event = { id = soh.11945 days = 30 random = 60 } # Hidden progress event selection
	}
}

# Book - you get one very uncertain idea
character_event = {
	id = soh.11939
	desc = EVTDESC_SOH_11939
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	prisoner = no
	
	trigger = {
		has_character_flag = brewing_immortality_potion_poison
		is_actually_incapable_trigger = no
		persistent_event_target:getting_immortality_potion = {
			is_alive = yes
		}
	}
	
	fail_trigger_effect = {
		if = {
			limit = {
				persistent_event_target:getting_immortality_potion = {
					is_alive = yes
				}
			}
			repeat_event = { id = soh.11939 days = 30 random = 60 } # Try again
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11939 # Maybe this will work...
		
		hidden_tooltip = {
			random_list = {
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = 1
					}
				}
				25 = {
					# No change
				}
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = -1
					}
				}
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = -2
					}
				}
			}
		}
		
		character_event = { id = soh.11945 days = 30 random = 60 } # Hidden progress event selection
	}
}

# Book - you get no ideas
character_event = {
	id = soh.11940
	desc = EVTDESC_SOH_11940
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	prisoner = no
	
	trigger = {
		has_character_flag = brewing_immortality_potion_poison
		is_actually_incapable_trigger = no
		persistent_event_target:getting_immortality_potion = {
			is_alive = yes
		}
	}
	
	fail_trigger_effect = {
		if = {
			limit = {
				persistent_event_target:getting_immortality_potion = {
					is_alive = yes
				}
			}
			repeat_event = { id = soh.11940 days = 30 random = 60 } # Try again
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11940 # I will figure it out...
		
		hidden_tooltip = {
			random_list = {
				25 = {
					# No change
				}
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = -1
					}
				}
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = -2
					}
				}
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = -3
					}
				}
			}
		}
		
		character_event = { id = soh.11945 days = 30 random = 60 } # Hidden progress event selection
	}
}

# Looking for ideas - your agents discover a great idea
character_event = {
	id = soh.11941
	desc = EVTDESC_SOH_11941
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	prisoner = no
	
	trigger = {
		has_character_flag = brewing_immortality_potion_poison
		is_actually_incapable_trigger = no
		persistent_event_target:getting_immortality_potion = {
			is_alive = yes
		}
	}
	
	fail_trigger_effect = {
		if = {
			limit = {
				persistent_event_target:getting_immortality_potion = {
					is_alive = yes
				}
			}
			repeat_event = { id = soh.11941 days = 30 random = 60 } # Try again
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11941 # I know just what to brew!
		
		hidden_tooltip = {
			change_variable = {
				which = immortality_potion_quality
				value = 5
			}
		}
		
		character_event = { id = soh.11945 days = 30 random = 60 } # Hidden progress event selection
	}
}

# Looking for ideas - your agents discover some decent ideas
character_event = {
	id = soh.11942
	desc = EVTDESC_SOH_11942
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	prisoner = no
	
	trigger = {
		has_character_flag = brewing_immortality_potion_poison
		is_actually_incapable_trigger = no
		persistent_event_target:getting_immortality_potion = {
			is_alive = yes
		}
	}
	
	fail_trigger_effect = {
		if = {
			limit = {
				persistent_event_target:getting_immortality_potion = {
					is_alive = yes
				}
			}
			repeat_event = { id = soh.11942 days = 30 random = 60 } # Try again
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11942 # I think I know what to do...
		
		hidden_tooltip = {
			change_variable = {
				which = immortality_potion_quality
				value = 2
			}
		}
		
		character_event = { id = soh.11945 days = 30 random = 60 } # Hidden progress event selection
	}
}

# Looking for ideas - your agents discover a very uncertain idea
character_event = {
	id = soh.11943
	desc = EVTDESC_SOH_11943
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	prisoner = no
	
	trigger = {
		has_character_flag = brewing_immortality_potion_poison
		is_actually_incapable_trigger = no
		persistent_event_target:getting_immortality_potion = {
			is_alive = yes
		}
	}
	
	fail_trigger_effect = {
		if = {
			limit = {
				persistent_event_target:getting_immortality_potion = {
					is_alive = yes
				}
			}
			repeat_event = { id = soh.11943 days = 30 random = 60 } # Try again
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11943 # Maybe this will work...
		
		hidden_tooltip = {
			random_list = {
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = 1
					}
				}
				25 = {
					# No change
				}
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = -1
					}
				}
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = -2
					}
				}
			}
		}
		
		character_event = { id = soh.11945 days = 30 random = 60 } # Hidden progress event selection
	}
}

# Looking for ideas - your agents discover no ideas
character_event = {
	id = soh.11944
	desc = EVTDESC_SOH_11944
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	prisoner = no
	
	trigger = {
		has_character_flag = brewing_immortality_potion_poison
		is_actually_incapable_trigger = no
		persistent_event_target:getting_immortality_potion = {
			is_alive = yes
		}
	}
	
	fail_trigger_effect = {
		if = {
			limit = {
				persistent_event_target:getting_immortality_potion = {
					is_alive = yes
				}
			}
			repeat_event = { id = soh.11944 days = 30 random = 60 } # Try again
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11944 # I will figure it out...
		
		hidden_tooltip = {
			random_list = {
				25 = {
					# No change
				}
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = -1
					}
				}
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = -2
					}
				}
				25 = {
					change_variable = {
						which = immortality_potion_quality
						value = -3
					}
				}
			}
		}
		
		character_event = { id = soh.11945 days = 30 random = 60 } # Hidden progress event selection
	}
}

# Hidden progression event selection
character_event = {
	id = soh.11945
	hide_window = yes
	
	is_triggered_only = yes
	
	prisoner = no
	
	trigger = {
		has_character_flag = brewing_immortality_potion_poison
		is_actually_incapable_trigger = no
		persistent_event_target:getting_immortality_potion = {
			is_alive = yes
		}
		NOR = {
			has_character_flag = immortality_potion_finished
			has_character_flag = asked_about_immortality_potion
		}
	}
	
	fail_trigger_effect = {
		if = {
			limit = {
				persistent_event_target:getting_immortality_potion = {
					is_alive = yes
				}
				NOT = {
					has_character_flag = immortality_potion_finished
				}
			}
			repeat_event = { id = soh.11945 days = 30 random = 30 } # Try again
		}
	}
	
	immediate = {
		if = {
			limit = {
				NOR = {
					AND = {
						check_variable = {
							which = immortality_potion_ingredients
							value >= 10
						}
						check_variable = {
							which = immortality_potion_progress
							value >= 25
						}
					}
					AND = {
						check_variable = {
							which = immortality_potion_ingredients
							value >= 5
						}
						check_variable = {
							which = immortality_potion_progress
							value >= 50
						}
					}
				}
			}
			
			change_variable = {
				which = immortality_potion_progress
				value = 1
			}
			
			random_list = {
				100 = {
					mult_modifier = {
						factor = 10
						check_variable = {
							which = immortality_potion_ingredients
							value = 0
						}
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = immortality_potion_ingredients
							value < 2
						}
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = immortality_potion_ingredients
							value < 5
						}
					}
					
					randomize_immortality_potion_ingredient_effect = yes
					
					if = {
						limit = {
							has_immortality_potion_ingredient_trigger = yes
						}
						
						character_event = { id = soh.11946 } # You have just the ingredient you need
					}
					
					else = {
						if = {
							limit = {
								persistent_event_target:getting_immortality_potion = {
									OR = {
										character = ROOT
										is_inaccessible_or_incapable_trigger = yes
									}
								}
							}
							
							character_event = { id = soh.11952 } # You need to get a specific ingredient yourself
						}
						
						else = {
							character_event = { id = soh.11947 } # You need a specific ingredient - ask the target?
						}
					}
				}
				
				25 = {
					trigger = {
						has_unused_alchemy_book_trigger = yes
					}
					
					mult_modifier = {
						factor = 2
						trait = scholar
					}
					
					mult_modifier = {
						factor = 2
						trait = erudite
					}
					
					character_event = { id = soh.11958 } # Make use of an alchemy-related book
				}
				
				25 = {
					trigger = {
						has_unused_alchemy_book_trigger = no
						unused_alchemy_book_exists_trigger = yes
						OR = {
							getting_immortality_potion_has_unused_alchemy_book_trigger = yes
							persistent_event_target:getting_immortality_potion = {
								NOT = {
									character = ROOT
								}
								scaled_wealth >= 1
								wealth >= 100
							}
						}
					}
					
					mult_modifier = {
						factor = 2
						trait = scholar
					}
					
					mult_modifier = {
						factor = 2
						trait = erudite
					}
					
					character_event = { id = soh.11959 } # Ask for book or the money for it?
				}
				
				25 = {
					trigger = {
						has_unused_alchemy_book_trigger = no
						unused_alchemy_book_exists_trigger = yes
						NOR = {
							getting_immortality_potion_has_unused_alchemy_book_trigger = yes
							persistent_event_target:getting_immortality_potion = {
								NOT = {
									character = ROOT
								}
								scaled_wealth >= 1
								wealth >= 100
							}
						}
						scaled_wealth >= 1
						wealth >= 100
					}
					
					mult_modifier = {
						factor = 2
						trait = scholar
					}
					
					mult_modifier = {
						factor = 2
						trait = erudite
					}
					
					character_event = { id = soh.11964 } # Purchase the book you need?
				}
				
				10 = {
					trigger = {
						intrigue > 10
						NOT = {
							has_character_flag = immortality_potion_goes_well
						}
						any_artifact = {
							has_artifact_flag = ingredient
							has_been_used_in_immortality_potion_trigger = no
						}
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 15
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 20
					}
					
					mult_modifier = {
						factor = 2
						trait = physician
					}
					
					character_event = { id = soh.11965 } # Throw in some other ingredients?
				}
				
				25 = {
					trigger = {
						NOT = {
							has_character_flag = immortality_potion_lost_notes
						}
					}
					
					mult_modifier = {
						factor = 2
						trait = wroth
					}
					
					mult_modifier = {
						factor = 2
						is_dumb_trigger = yes
					}
					
					character_event = { id = soh.11966 } # Lost notes
				}
				
				50 = {
					trigger = {
						any_society_member = {
							society_member_of = the_alchemists
							is_inaccessible_or_incapable_trigger = no
							NOR = {
								character = ROOT
								ROOT = {
									persistent_event_target:getting_immortality_potion = {
										character = PREVPREV
									}
								}
							}
						}
					}
					
					random_society_member = {
						limit = {
							society_member_of = the_alchemists
							is_inaccessible_or_incapable_trigger = no
							NOR = {
								character = ROOT
								ROOT = {
									persistent_event_target:getting_immortality_potion = {
										character = PREVPREV
									}
								}
							}
						}
						
						preferred_limit = {
							society_rank == 4
							OR = {
								is_friend = ROOT
								is_lover = ROOT
								is_rival = ROOT
								persistent_event_target:getting_immortality_potion = {
									is_friend = PREV
									is_lover = PREV
									is_rival = PREV
								}
							}
						}
						
						preferred_limit = {
							society_rank == 3
							OR = {
								is_friend = ROOT
								is_lover = ROOT
								is_rival = ROOT
								persistent_event_target:getting_immortality_potion = {
									is_friend = PREV
									is_lover = PREV
									is_rival = PREV
								}
							}
						}
						
						preferred_limit = {
							society_rank == 2
							OR = {
								is_friend = ROOT
								is_lover = ROOT
								is_rival = ROOT
								persistent_event_target:getting_immortality_potion = {
									is_friend = PREV
									is_lover = PREV
									is_rival = PREV
								}
							}
						}
						
						preferred_limit = {
							society_rank == 4
						}
						
						preferred_limit = {
							society_rank == 3
						}
						
						preferred_limit = {
							society_rank == 2
						}
						
						character_event = { id = soh.11967 } # Other society member might offer to help (or "help")
					}
				}
				
				25 = {
					trigger = {
						any_artifact = {
							has_artifact_flag = ingredient
							has_been_used_in_immortality_potion_trigger = no
						}
					}
					
					mult_modifier = {
						factor = 2
						trait = wroth
					}
					
					mult_modifier = {
						factor = 2
						is_dumb_trigger = yes
					}
					
					character_event = { id = soh.11980 } # Wrong ingredient
				}
				
				50 = {
					trigger = {
						trait = lunatic
						any_artifact = {
							has_artifact_flag = ingredient
							has_been_used_in_immortality_potion_trigger = no
						}
					}
					
					character_event = { id = soh.11983 } # Lunatic is feeling inspired
				}
				
				50 = {
					trigger = {
						trait = possessed
						any_artifact = {
							has_artifact_flag = ingredient
							has_been_used_in_immortality_potion_trigger = no
						}
					}
					
					character_event = { id = soh.11984 } # Possessed character just throws something in
				}
				
				25 = {
					trigger = {
						NOR = {
							has_character_flag = hidden_lab
							has_character_flag = very_hidden_lab
						}
						employer = {
							any_courtier = {
								is_adult = yes
								is_actually_incapable_trigger = no
								OR = {
									AND = {
										is_rival = ROOT
										ROOT = {
											persistent_event_target:getting_immortality_potion = {
												NOR = {
													is_friend = PREVPREV
													is_lover = PREVPREV
												}
											}
										}
									}
									ROOT = {
										persistent_event_target:getting_immortality_potion = {
											is_rival = PREVPREV
										}
									}
								}
							}
						}
					}
					
					employer = {
						random_courtier = {
							limit = {
								is_adult = yes
								is_actually_incapable_trigger = no
								OR = {
									AND = {
										is_rival = ROOT
										ROOT = {
											persistent_event_target:getting_immortality_potion = {
												NOR = {
													is_friend = PREVPREV
													is_lover = PREVPREV
												}
											}
										}
									}
									ROOT = {
										persistent_event_target:getting_immortality_potion = {
											is_rival = PREVPREV
										}
									}
								}
							}
							
							preferred_limit = {
								is_rival = ROOT
								ROOT = {
									persistent_event_target:getting_immortality_potion = {
										is_rival = PREVPREV
									}
								}
							}
							
							preferred_limit = {
								is_rival = ROOT
							}
							
							character_event = { id = soh.11985 } # Courtier might attempt sabotage
						}
					}
				}
				
				25 = {
					trigger = {
						persistent_event_target:getting_immortality_potion = {
							is_rival = ROOT
						}
						OR = {
							AND = {
								check_variable = {
									which = immortality_potion_progress
									value >= 10
								}
								OR = {
									trait = cynical
									trait = paranoid
								}
								check_variable = {
									which = immortality_potion_quality
									value < 25
								}
							}
							AND = {
								OR = {
									check_variable = {
										which = immortality_potion_ingredients
										value >= 5
									}
									check_variable = {
										which = immortality_potion_progress
										value >= 25
									}
								}
								check_variable = {
									which = immortality_potion_quality
									value < 50
								}
							}
						}
						NOT = {
							has_character_flag = immortality_potion_second_thoughts_high_quality
						}
					}
					
					character_event = { id = soh.11989 } # Having second thoughts
				}
				
				25 = {
					trigger = {
						persistent_event_target:getting_immortality_potion = {
							OR = {
								is_friend = ROOT
								is_lover = ROOT
								reverse_opinion = {
									who = ROOT
									value >= 50
								}
							}
						}
						check_variable = {
							which = immortality_potion_quality
							value < 25
						}
						NOT = {
							has_character_flag = immortality_potion_second_thoughts_friend
						}
					}
					
					character_event = { id = soh.11993 } # Having second thoughts
				}
				
				#25 = {
				#	trigger = {
				#		check_variable = {
				#			which = immortality_potion_progress
				#			value >= 10
				#		}
				#		check_variable = {
				#			which = immortality_potion_quality
				#			value < 25
				#		}
				#	}
				#	
				#	mult_modifier = {
				#		factor = 0.1
				#		has_character_flag = immortality_potion_slow_down
				#	}
				#	
				#	character_event = { id = soh.11994 } # Work more slowly?
				#}
				
				10 = {
					trigger = {
						check_variable = {
							which = immortality_potion_ingredients
							value >= 2
						}
					}
					
					repeat_event = { id = soh.11945 days = 30 random = 90 } # Nothing for now
				}
			}
		}
		
		else = {
			if = {
				limit = {
					persistent_event_target:getting_immortality_potion = {
						is_inaccessible_or_incapable_trigger = no
					}
				}
				character_event = { id = soh.12130 } # Potion is ready
			}
			
			else = {
				repeat_event = { id = soh.11881 days = 30 } # Try again
			}
		}
	}
}

# Another ingredient needed - you've got it
character_event = {
	id = soh.11946
	desc = EVTDESC_SOH_11946
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		random_artifact = {
			limit = {
				ingredient_matches_immortality_potion_trigger = yes
			}
			
			save_event_target_as = target_immortality_potion_ingredient
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11946 # I should add it to the potion!
		
		custom_tooltip = {
			text = ingredient_will_be_added_to_immortality_potion
			
			if = {
				limit = {
					check_variable = {
						which = alchemist_poison_knowledge
						value >= 50
					}
					
					event_target:target_immortality_potion_ingredient = {
						NOT = {
							ingredient_is_unhealthy_trigger = yes
						}
						
						OR = {
							new_ingredient_trigger = no
							ROOT = {
								OR = {
									intrigue >= 15
									AND = {
										trait = deceitful
										is_dumb_trigger = no
									}
								}
							}
						}
					}
				}
				
				character_event = { id = soh.11955 } # Attempt to purify ingredient?
			}
			
			else = {
				add_ingredient_to_immortality_potion_poison_effect = yes
			
				event_target:target_immortality_potion_ingredient = {
					unsafe_destroy_artifact = yes
				}
				
				character_event = { id = soh.11945 days = 30 random = 90 } # Next step
			}
		}
	}
}

# Another ingredient needed - ask the person that is getting the potion?
character_event = {
	id = soh.11947
	desc = EVTDESC_SOH_11947
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11947 # I should ask them!
		
		persistent_event_target:getting_immortality_potion = {
			character_event = { id = soh.11948 } # Receiver is asked
		}
	}
}

# Asked for ingredient
character_event = {
	id = soh.11948
	desc = EVTDESC_SOH_11948
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		any_artifact = {
			limit = {
				is_froms_immortality_potion_ingredient_trigger = yes
			}
			
			save_event_target_as = target_immortality_potion_ingredient
		}
	}
	
	option = {
		trigger = {
			event_target:target_immortality_potion_ingredient = {
				always = yes
			}
		}
		
		name = EVTOPTA_SOH_11948 # I can provide that ingredient!
		
		event_target:target_immortality_potion_ingredient = {
			transfer_artifact = {
				from = ROOT
				to = FROM
			}
		}
		
		FROM = {
			character_event = { id = soh.11949 } # Inform FROM
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				OR = {
					society_member_of = hermetics
					society_member_of = the_alchemists
				}
				trait = greedy
			}
		}
	}
	
	option = {
		trigger = {
			wealth >= 0
		}
		
		name = EVTOPTB_SOH_11948 # I can provide some money...
		
		wealth = -25
		
		FROM = {
			wealth = 25
			character_event = { id = soh.11950 } # Inform FROM
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = greedy
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = charitable
			}
		}
	}
	
	option = {
		name = EVTOPTC_SOH_11948 # I should not have to provide that!
		
		FROM = {
			character_event = { id = soh.11951 } # Inform FROM
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					OR = {
						is_friend = FROM
						is_lover = FROM
					}
					OR = {
						wealth >= 0
						event_target:target_immortality_potion_ingredient = {
							always = yes
						}
					}
					NOT = {
						trait = greedy
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = greedy
			}
		}
	}
}

# Got ingredient
character_event = {
	id = soh.11949
	desc = EVTDESC_SOH_11949
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11949 # I should add it to the potion!
		
		custom_tooltip = {
			text = ingredient_will_be_added_to_immortality_potion
			
			if = {
				limit = {
					check_variable = {
						which = alchemist_poison_knowledge
						value >= 50
					}
					
					event_target:target_immortality_potion_ingredient = {
						NOT = {
							ingredient_is_unhealthy_trigger = yes
						}
						
						OR = {
							new_ingredient_trigger = no
							ROOT = {
								OR = {
									intrigue >= 15
									AND = {
										trait = deceitful
										is_dumb_trigger = no
									}
								}
							}
						}
					}
				}
				
				character_event = { id = soh.11955 } # Attempt to purify ingredient?
			}
			
			else = {
				add_ingredient_to_immortality_potion_poison_effect = yes
			
				event_target:target_immortality_potion_ingredient = {
					unsafe_destroy_artifact = yes
				}
				
				character_event = { id = soh.11945 days = 30 random = 90 } # Next step
			}
		}
		
		ai_chance = {
			factor = 100
		}
	}
}

# Got money instead
character_event = {
	id = soh.11950
	desc = EVTDESC_SOH_11950
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11950 # I will purchase the ingredient right away!
		
		wealth = -25
		
		custom_tooltip = {
			text = ingredient_will_be_added_to_immortality_potion
			
			add_target_immortality_potion_ingredient_effect = yes
			
			if = {
				limit = {
					check_variable = {
						which = alchemist_poison_knowledge
						value >= 50
					}
					
					event_target:target_immortality_potion_ingredient = {
						NOT = {
							ingredient_is_unhealthy_trigger = yes
						}
						
						OR = {
							new_ingredient_trigger = no
							ROOT = {
								OR = {
									intrigue >= 15
									AND = {
										trait = deceitful
										is_dumb_trigger = no
									}
								}
							}
						}
					}
				}
				
				character_event = { id = soh.11955 } # Attempt to purify ingredient?
			}
			
			else = {
				add_ingredient_to_immortality_potion_poison_effect = yes
			
				event_target:target_immortality_potion_ingredient = {
					unsafe_destroy_artifact = yes
				}
				
				character_event = { id = soh.11945 days = 30 random = 90 } # Next step
			}
		}
		
		ai_chance = {
			factor = 100
		}
	}
}

# Did not get help
character_event = {
	id = soh.11951
	desc = EVTDESC_SOH_11951
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11951 # And here I thought they wanted me to finish the potion!
		
		opinion = {
			who = FROM
			modifier = opinion_did_not_provide_immortality_potion_ingredient
		}
	}
}

# Another ingredient needed - you need to get it
character_event = {
	id = soh.11952
	desc = EVTDESC_SOH_11952
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11952 # I guess I will have to find it...
	}
}

# AI adds ingredient on_yearly_pulse
character_event = {
	id = soh.11953
	hide_window = yes
	
	is_triggered_only = yes # on_yearly_pulse
	
	min_age = 16
	is_in_society = yes
	prisoner = no
	
	trigger = {
		has_character_modifier = brewing_immortality_potion
		has_character_flag = brewing_immortality_potion_poison
		is_actually_incapable_trigger = no
		has_immortality_potion_ingredient_trigger = yes
	}
	
	immediate = {
		add_target_immortality_potion_ingredient_effect = yes
		
		if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 50
				}
				
				event_target:target_immortality_potion_ingredient = {
					NOT = {
						ingredient_is_unhealthy_trigger = yes
					}
					
					OR = {
						new_ingredient_trigger = no
						ROOT = {
							OR = {
								intrigue >= 15
								AND = {
									trait = deceitful
									is_dumb_trigger = no
								}
							}
						}
					}
				}
			}
			
			character_event = { id = soh.11955 } # Attempt to purify ingredient?
		}
		
		else = {
			add_ingredient_to_immortality_potion_poison_effect = yes
			
			event_target:target_immortality_potion_ingredient = {
				unsafe_destroy_artifact = yes
			}
			
			character_event = { id = soh.11945 days = 30 random = 90 } # Next step
		}
	}
}

# Used decision to add ingredient
character_event = {
	id = soh.11954
	desc = EVTDESC_SOH_11954
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes # add_ingredient_to_immortality_potion decision
	
	immediate = {
		random_artifact = {
			limit = {
				ingredient_matches_immortality_potion_trigger = yes
			}
			
			save_event_target_as = target_immortality_potion_ingredient
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11954 # Time to add it to the potion!
		
		custom_tooltip = {
			text = ingredient_will_be_added_to_immortality_potion
			
			if = {
				limit = {
					check_variable = {
						which = alchemist_poison_knowledge
						value >= 50
					}
					
					event_target:target_immortality_potion_ingredient = {
						NOT = {
							ingredient_is_unhealthy_trigger = yes
						}
						
						OR = {
							new_ingredient_trigger = no
							ROOT = {
								OR = {
									intrigue >= 15
									AND = {
										trait = deceitful
										is_dumb_trigger = no
									}
								}
							}
						}
					}
				}
				
				character_event = { id = soh.11955 } # Attempt to purify ingredient?
			}
			
			else = {
				add_ingredient_to_immortality_potion_poison_effect = yes
			
				event_target:target_immortality_potion_ingredient = {
					unsafe_destroy_artifact = yes
				}
				
				character_event = { id = soh.11945 days = 30 random = 90 } # Next step
			}
		}
	}
}

# Ingredient might be beneficial - attempt to "purify" it?
character_event = {
	id = soh.11955
	desc = EVTDESC_SOH_11955
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11955 # I will attempt to purify it!
		
		custom_tooltip = {
			text = ingredient_will_be_purified
		
			save_immortality_potion_ingredient_for_purification_effect = yes
					
			event_target:target_immortality_potion_ingredient = {
				unsafe_destroy_artifact = yes
			}
			
			random_list = {
				50 = {
					trigger = {
						intrigue >= 15
					}
					
					mult_modifier = {
						factor = 2
						trait = master_schemer
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 20
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 25
					}
					
					character_event = { id = soh.11956 days = 7 random = 7 } # Purified the ingredient
				}
				
				50 = {
					trigger = {
						intrigue < 30
					}
					
					character_event = { id = soh.11957 days = 7 random = 7 } # Failed to purify the ingredient
				}
			}
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = slothful
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11955 # I think I know how to use it...
		
		custom_tooltip = {
			text = ingredient_will_be_added_to_immortality_potion
		
			add_ingredient_to_immortality_potion_poison_effect = yes
					
			event_target:target_immortality_potion_ingredient = {
				unsafe_destroy_artifact = yes
			}
			
			character_event = { id = soh.11945 days = 30 random = 90 } # Next step
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					trait = cynical
					trait = paranoid
				}
			}
		}
	}
}

# Purified ingredient
character_event = {
	id = soh.11956
	desc = EVTDESC_SOH_11956
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11956 # Excellent!
		
		custom_tooltip = {
			text = purified_ingredient_will_be_added_to_immortality_potion
		
			add_purified_ingredient_to_immortality_potion_poison_effect = yes
			
			character_event = { id = soh.11945 days = 30 random = 90 } # Next step
		}
	}
}

# Failed to purify ingredient
character_event = {
	id = soh.11957
	desc = EVTDESC_SOH_11957
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11957 # Oh, well...
		
		custom_tooltip = {
			text = non_purified_ingredient_will_be_added_to_immortality_potion
		
			add_non_purified_ingredient_to_immortality_potion_poison_effect = yes
			
			character_event = { id = soh.11945 days = 30 random = 90 } # Next step
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11957 # I should get more and try again...
		
		ai_chance = {
			factor = 0
		}
	}
}

# You have a useful book - make use of it
character_event = {
	id = soh.11958
	desc = EVTDESC_SOH_11958
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		random_artifact = {
			limit = {
				is_unused_alchemy_book_trigger = yes
			}
			
			save_event_target_as = target_alchemy_book
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11958 # Knowledge is power!
		
		custom_tooltip = {
			text = improve_immortality_potion_quality_book
			
			improve_immortality_potion_quality_book_effect = yes
			
			character_event = { id = soh.11945 days = 30 random = 90 } # Next step
		}
	}
}

# You might need a useful book - ask the person that is getting the potion?
character_event = {
	id = soh.11959
	desc = EVTDESC_SOH_11959
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11959 # I should ask them!
		
		persistent_event_target:getting_immortality_potion = {
			character_event = { id = soh.11960 } # Receiver is asked
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11959 # I should not bother them...
		
		character_event = { id = soh.11945 days = 30 random = 90 } # Next step
		
		ai_chance = {
			factor = 0
		}
	}
}

# Asked for book
character_event = {
	id = soh.11960
	desc = EVTDESC_SOH_11960
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		any_artifact = {
			limit = {
				is_unused_alchemy_book_from_trigger = yes
			}
			
			save_event_target_as = target_alchemy_book
		}
	}
	
	option = {
		trigger = {
			event_target:target_alchemy_book = {
				always = yes
			}
		}
		
		name = EVTOPTA_SOH_11960 # I can provide a book!
		
		event_target:target_alchemy_book = {
			transfer_artifact = {
				from = ROOT
				to = FROM
			}
		}
		
		FROM = {
			character_event = { id = soh.11961 } # Inform FROM
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.5
				trait = erudite
			}
			
			mult_modifier = {
				factor = 0.5
				trait = scholar
			}
		}
	}
	
	option = {
		trigger = {
			wealth >= 0
		}
		
		name = EVTOPTB_SOH_11960 # I can provide some money...
		
		wealth = -100
		
		FROM = {
			wealth = 100
			character_event = { id = soh.11962 } # Inform FROM
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = greedy
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = charitable
			}
		}
	}
	
	option = {
		name = EVTOPTC_SOH_11960 # I should not have to provide that!
		
		FROM = {
			character_event = { id = soh.11963 } # Inform FROM
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					OR = {
						is_friend = FROM
						is_lover = FROM
					}
					OR = {
						wealth >= 0
						event_target:target_alchemy_book = {
							always = yes
						}
					}
					NOT = {
						trait = greedy
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = greedy
			}
		}
	}
}

# Got liege's book
character_event = {
	id = soh.11961
	desc = EVTDESC_SOH_11961
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		random_artifact = {
			limit = {
				is_unused_alchemy_book_trigger = yes
			}
			
			save_event_target_as = target_alchemy_book
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11961 # Knowledge is power!
		
		custom_tooltip = {
			text = improve_immortality_potion_quality_book
			
			improve_immortality_potion_quality_book_effect = yes
			
			character_event = { id = soh.11945 days = 30 random = 90 } # Next step
		}
	}
}

# Got money for book
character_event = {
	id = soh.11962
	desc = EVTDESC_SOH_11962
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11962 # Knowledge is power!
		
		wealth = -100
		
		add_random_new_alchemy_book_effect = yes
		
		custom_tooltip = {
			text = improve_immortality_potion_quality_book
			
			improve_immortality_potion_quality_book_effect = yes
			
			character_event = { id = soh.11945 days = 30 random = 90 } # Next step
		}
		
		ai_chance = {
			factor = 100
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11962 # Actually, I think I will hang on to this...
		
		character_event = { id = soh.11945 days = 30 random = 90 } # Next step
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					OR = {
						is_friend = FROM
						is_lover = FROM
					}
					NOR = {
						trait = deceitful
						trait = greedy
					}
				}
			}
			
			mult_modifier = {
				factor = 2
				trait = deceitful
			}
			
			mult_modifier = {
				factor = 2
				trait = greedy
			}
			
			mult_modifier = {
				factor = 2
				opinion = {
					who = FROM
					value < 25
				}
			}
			
			mult_modifier = {
				factor = 2
				opinion = {
					who = FROM
					value < 0
				}
			}
		}
	}
}

# Got nothing
character_event = {
	id = soh.11963
	desc = EVTDESC_SOH_11963
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11963 # And here I thought they wanted me to finish the potion!
		
		character_event = { id = soh.11945 days = 30 random = 90 } # Next step
		
		opinion = {
			who = FROM
			modifier = opinion_did_not_provide_immortality_potion_book
		}
	}
}

# You might need a useful book - purchase it?
character_event = {
	id = soh.11964
	desc = EVTDESC_SOH_11964
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11964 # Knowledge is power!
		
		wealth = -100
		
		add_random_new_alchemy_book_effect = yes
		
		custom_tooltip = {
			text = improve_immortality_potion_quality_book
			
			improve_immortality_potion_quality_book_effect = yes
			
			character_event = { id = soh.11945 days = 30 random = 90 } # Next step
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = greedy
				}
			}
			
			mult_modifier = {
				factor = 2
				trait = erudite
			}
			
			mult_modifier = {
				factor = 2
				trait = scholar
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11964 # I will make do without it...
		
		character_event = { id = soh.11945 days = 30 random = 90 } # Next step
		
		ai_chance = {
			factor = 100
		}
	}
}

# Think of some potentially useful ingredients you know of - add them?
character_event = {
	id = soh.11965
	desc = EVTDESC_SOH_11965
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		random_artifact = {
			limit = {
				has_artifact_flag = ingredient
				has_been_used_in_immortality_potion_trigger = no
			}
			
			save_event_target_as = target_immortality_potion_ingredient
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11965 # I should add it to the potion!
		
		custom_tooltip = {
			text = ingredient_will_be_added_to_immortality_potion
			
			if = {
				limit = {
					check_variable = {
						which = alchemist_poison_knowledge
						value >= 50
					}
					
					event_target:target_immortality_potion_ingredient = {
						NOT = {
							ingredient_is_unhealthy_trigger = yes
						}
						
						OR = {
							new_ingredient_trigger = no
							ROOT = {
								OR = {
									intrigue >= 15
									AND = {
										trait = deceitful
										is_dumb_trigger = no
									}
								}
							}
						}
					}
				}
				
				character_event = { id = soh.11955 } # Attempt to purify ingredient?
			}
			
			else = {
				add_ingredient_to_immortality_potion_poison_effect = yes
			
				event_target:target_immortality_potion_ingredient = {
					unsafe_destroy_artifact = yes
				}
				
				character_event = { id = soh.11945 days = 30 random = 90 } # Next step
			}
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					trait = stubborn
					NOR = {
						trait = wroth
						trait = arbitrary
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				event_target:target_immortality_potion_ingredient = {
					ingredient_is_unhealthy_trigger = yes
					new_ingredient_trigger = no
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11965 # I should stick with my initial recipie...
		
		character_event = { id = soh.11945 days = 30 random = 90 } # Next step
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = wroth
			}
		}
	}
}

# Lost notes - write them from memory?
character_event = {
	id = soh.11966
	desc = EVTDESC_SOH_11966
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11966 # I will try to remember...
		
		hidden_tooltip = {
			random_list = {
				5 = {
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_poison_knowledge
							value >= 50
						}
					}
					
					change_variable = {
						which = immortality_potion_quality
						value = 2
					}
				}
				10 = {
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_poison_knowledge
							value >= 50
						}
					}
					
					change_variable = {
						which = immortality_potion_quality
						value = 1
					}
				}
				50 = {
					# Nothing
				}
				10 = {
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_poison_knowledge
							value < 50
						}
					}
					
					change_variable = {
						which = immortality_potion_quality
						value = -1
					}
				}
				5 = {
					mult_modifier = {
						factor = 2
						check_variable = {
							which = alchemist_poison_knowledge
							value < 50
						}
					}
					
					change_variable = {
						which = immortality_potion_quality
						value = -2
					}
				}
			}
		}
		
		character_event = { id = soh.11945 days = 30 random = 90 } # Next step
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = cynical
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = wroth
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11966 # This will set me back...
		
		hidden_tooltip = {
			change_variable = {
				which = immortality_potion_progress
				value = -2
			}
		}
		
		character_event = { id = soh.11945 days = 30 random = 90 } # Next step
		
		ai_chance = {
			factor = 100
		}
	}
}

# Other society member might get to offer assitance (or "assitance")
character_event = {
	id = soh.11967
	desc = EVTDESC_SOH_11967
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11967 # I will offer my assistance!
		
		FROM = {
			character_event = { id = soh.11968 } # Alchemist approached
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					FROM = {
						persistent_event_target:getting_immortality_potion = {
							is_rival = ROOT
						}
					}
					is_rival = FROM
					trait = greedy
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = slothful
			}
			
			mult_modifier = {
				factor = 0.1
				trait = ambitious
			}
		}
	}
	
	option = {
		trigger = {
			has_dlc = "Conclave"
			NOR = {
				holds_favor_on = FROM
				owes_favor_to = FROM
			}
		}
		
		name = EVTOPTB_SOH_11967 # I will offer to help, for a Favor...
		
		FROM = {
			character_event = { id = soh.11971 } # Alchemist approached
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					FROM = {
						persistent_event_target:getting_immortality_potion = {
							OR = {
								is_friend = ROOT
								is_lover = ROOT
							}
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = content
			}
			
			mult_modifier = {
				factor = 0.1
				trait = greedy
			}
		}
	}
	
	option = {
		trigger = {
			has_dlc = "Conclave"
			owes_favor_to = FROM
		}
		
		name = EVTOPTC_SOH_11967 # I will offer to help, if they are willing to consider it a Favor...
		
		FROM = {
			character_event = { id = soh.11974 } # Alchemist approached
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					FROM = {
						persistent_event_target:getting_immortality_potion = {
							OR = {
								is_friend = ROOT
								is_lover = ROOT
							}
						}
					}
					trait = trusting
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = paranoid
			}
			
			mult_modifier = {
				factor = 0.1
				trait = greedy
			}
		}
	}
	
	option = {
		name = EVTOPTD_SOH_11967 # My help will cost FROM...
		
		FROM = {
			character_event = { id = soh.11977 } # Alchemist approached
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = charitable
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = greedy
			}
			
			mult_modifier = {
				factor = 0.1
				trait = ambitious
			}
		}
	}
	
	option = {
		name = EVTOPTE_SOH_11967 # I don't want to get involved...
		
		FROM = {
			character_event = { id = soh.11945 days = 30 random = 90 } # Next step
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					OR = {
						AND = {
							FROM = {
								persistent_event_target:getting_immortality_potion = {
									is_rival = ROOT
								}
							}
							NOR = {
								trait = kind
								trait = just
								trait = honest
							}
						}
						FROM = {
							persistent_event_target:getting_immortality_potion = {
								OR = {
									is_friend = ROOT
									is_lover = ROOT
								}
							}
						}
					}
					NOT = {
						trait = slothful
					}
				}
			}
		}
	}
}

# Offered assistance - asking for nothing
character_event = {
	id = soh.11968
	desc = EVTDESC_SOH_11968
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11968 # Certainly!
		
		character_event = { id = soh.11945 days = 30 random = 90 } # Next step
		
		FROM = {
			character_event = { id = soh.11969 days = 2 }
		}
		
		ai_chance = { # TIANXIATODO: Invert
			factor = 100
			
			trigger = {
				NOR = {
					trait = proud
					AND = {
						is_rival = FROM
						NOT = {
							trait = trusting
						}
					}
					AND = {
						persistent_event_target:getting_immortality_potion = {
							is_rival = FROM
							OR = {
								is_friend = ROOT
								is_lover = ROOT
							}
						}
						NOT = {
							trait = trusting
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				persistent_event_target:getting_immortality_potion = {
					is_rival = FROM
					NOT = {
						is_rival = ROOT
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = paranoid
			}
			
			mult_modifier = {
				factor = 0.1
				trait = stubborn
			}
			
			mult_modifier = {
				factor = 10
				trait = trusting
			}
			
			mult_modifier = {
				factor = 10
				trait = slothful
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11968 # I don't need their help!
		
		character_event = { id = soh.11945 days = 30 random = 90 } # Next step
		
		FROM = {
			character_event = { id = soh.11970 days = 2 }
		}
		
		ai_chance = { # TIANXIATODO: Invert
			factor = 100
			
			trigger = {
				NAND = {
					OR = {
						is_friend = FROM
						is_lover = FROM
					}
					persistent_event_target:getting_immortality_potion = {
						OR = {
							is_friend = FROM
							is_lover = FROM
						}
					}
					NOR = {
						trait = paranoid
						trait = stubborn
						trait = proud
					}
				}
			}
			
			mult_modifier = {
				factor = 2
				FROM = {
					society_rank >= 2
				}
			}
			
			mult_modifier = {
				factor = 5
				FROM = {
					society_rank >= 2
				}
			}
		}
	}
}

# Offer accepted
character_event = {
	id = soh.11969
	desc = EVTDESC_SOH_11969
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11969 # This will help!
		
		custom_tooltip = {
			text = this_will_make_the_potion_healthier
			
			worsen_froms_immortality_potion_poison_effect = yes
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						NOT = {
							is_rival = ROOT
						}
					}
				}
			}
			
			mult_modifier = {	
				factor = 10
				OR = {
					is_friend = FROM
					is_lover = FROM
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = kind
			}
			
			mult_modifier = {
				factor = 10
				trait = honest
			}
			
			mult_modifier = {
				factor = 10
				trait = just
			}
			
			mult_modifier = {
				factor = 0.5
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value < 0
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.2
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value < -25
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value < -50
						}
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11969 # This will help... kill the target!
		
		custom_tooltip = {
			text = this_will_make_the_potion_less_healthy
			
			improve_froms_immortality_potion_poison_effect = yes
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						NOR = {
							is_friend = ROOT
							is_lover = ROOT
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				is_rival = FROM
			}
			
			mult_modifier = {
				factor = 10
				trait = cruel
			}
			
			mult_modifier = {
				factor = 10
				trait = deceitful
			}
			
			mult_modifier = {
				factor = 10
				trait = arbitrary
			}
			
			mult_modifier = {
				factor = 0.5
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value >= 25
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.2
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value >= 50
						}
					}
				}
			}
		}
	}
}

# Offer refused
character_event = {
	id = soh.11970
	desc = EVTDESC_SOH_11970
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11970 # I see...
	}
}

# Offered assistance - asking for Favor
character_event = {
	id = soh.11971
	desc = EVTDESC_SOH_11971
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11971 # Certainly!
		
		character_event = { id = soh.11945 days = 30 random = 90 } # Next step
		
		FROM = {
			add_favor = ROOT
			
			character_event = { id = soh.11972 days = 2 }
		}
		
		ai_chance = { # TIANXIATODO: Invert
			factor = 100
			
			trigger = {
				NOR = {
					trait = proud
					AND = {
						is_rival = FROM
						NOT = {
							trait = trusting
						}
					}
					AND = {
						persistent_event_target:getting_immortality_potion = {
							is_rival = FROM
							OR = {
								is_friend = ROOT
								is_lover = ROOT
							}
						}
						NOT = {
							trait = trusting
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				persistent_event_target:getting_immortality_potion = {
					is_rival = FROM
					NOT = {
						is_rival = ROOT
					}
				}
			}
			
			mult_modifier = {
				factor = 0.01
				trait = paranoid
			}
			
			mult_modifier = {
				factor = 0.1
				trait = stubborn
			}
			
			mult_modifier = {
				factor = 10
				trait = trusting
			}
			
			mult_modifier = {
				factor = 10
				trait = slothful
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11971 # I don't need their help!
		
		character_event = { id = soh.11945 days = 30 random = 90 } # Next step
		
		FROM = {
			character_event = { id = soh.11973 days = 2 }
		}
		
		ai_chance = { # TIANXIATODO: Invert
			factor = 100
			
			trigger = {
				NAND = {
					OR = {
						is_friend = FROM
						is_lover = FROM
					}
					persistent_event_target:getting_immortality_potion = {
						OR = {
							is_friend = FROM
							is_lover = FROM
						}
					}
					NOR = {
						trait = paranoid
						trait = stubborn
						trait = proud
					}
				}
			}
			
			mult_modifier = {
				factor = 2
				FROM = {
					society_rank >= 2
				}
			}
			
			mult_modifier = {
				factor = 5
				FROM = {
					society_rank >= 2
				}
			}
		}
	}
}

# Offer accepted
character_event = {
	id = soh.11972
	desc = EVTDESC_SOH_11972
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11972 # This will help!
		
		custom_tooltip = {
			text = this_will_make_the_potion_healthier
			
			worsen_froms_immortality_potion_poison_effect = yes
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						NOT = {
							is_rival = ROOT
						}
					}
				}
			}
			
			mult_modifier = {	
				factor = 10
				OR = {
					is_friend = FROM
					is_lover = FROM
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = kind
			}
			
			mult_modifier = {
				factor = 10
				trait = honest
			}
			
			mult_modifier = {
				factor = 10
				trait = just
			}
			
			mult_modifier = {
				factor = 0.5
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value < 0
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.2
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value < -25
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value < -50
						}
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11972 # This will help... kill the target!
		
		custom_tooltip = {
			text = this_will_make_the_potion_less_healthy
			
			improve_froms_immortality_potion_poison_effect = yes
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						NOR = {
							is_friend = ROOT
							is_lover = ROOT
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				is_rival = FROM
			}
			
			mult_modifier = {
				factor = 10
				trait = cruel
			}
			
			mult_modifier = {
				factor = 10
				trait = deceitful
			}
			
			mult_modifier = {
				factor = 10
				trait = arbitrary
			}
			
			mult_modifier = {
				factor = 0.5
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value >= 25
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.2
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value >= 50
						}
					}
				}
			}
		}
	}
}

# Offer refused
character_event = {
	id = soh.11973
	desc = EVTDESC_SOH_11973
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11973 # I see...
	}
}

# Offered assistance - asking for Favor to be considered repaid
character_event = {
	id = soh.11974
	desc = EVTDESC_SOH_11974
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11974 # Certainly!
		
		character_event = { id = soh.11945 days = 30 random = 90 } # Next step
		
		remove_favor = FROM
		
		FROM = {
			character_event = { id = soh.11975 days = 2 }
		}
		
		ai_chance = { # TIANXIATODO: Invert
			factor = 100
			
			trigger = {
				NOR = {
					trait = proud
					AND = {
						is_rival = FROM
						NOT = {
							trait = trusting
						}
					}
					AND = {
						persistent_event_target:getting_immortality_potion = {
							is_rival = FROM
							OR = {
								is_friend = ROOT
								is_lover = ROOT
							}
						}
						NOT = {
							trait = trusting
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				persistent_event_target:getting_immortality_potion = {
					is_rival = FROM
					NOT = {
						is_rival = ROOT
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = paranoid
			}
			
			mult_modifier = {
				factor = 0.1
				trait = ambitious
			}
			
			mult_modifier = {
				factor = 0.1
				trait = stubborn
			}
			
			mult_modifier = {
				factor = 10
				trait = trusting
			}
			
			mult_modifier = {
				factor = 10
				trait = slothful
			}
			
			mult_modifier = {
				factor = 10
				trait = content
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11974 # I don't need their help!
		
		character_event = { id = soh.11945 days = 30 random = 90 } # Next step
		
		FROM = {
			character_event = { id = soh.11976 days = 2 }
		}
		
		ai_chance = { # TIANXIATODO: Invert
			factor = 100
			
			trigger = {
				NAND = {
					OR = {
						is_friend = FROM
						is_lover = FROM
					}
					persistent_event_target:getting_immortality_potion = {
						OR = {
							is_friend = FROM
							is_lover = FROM
						}
					}
					NOR = {
						trait = paranoid
						trait = stubborn
						trait = proud
					}
				}
			}
			
			mult_modifier = {
				factor = 2
				FROM = {
					society_rank >= 2
				}
			}
			
			mult_modifier = {
				factor = 5
				FROM = {
					society_rank >= 2
				}
			}
		}
	}
}

# Offer accepted
character_event = {
	id = soh.11975
	desc = EVTDESC_SOH_11975
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11975 # This will help!
		
		custom_tooltip = {
			text = this_will_make_the_potion_healthier
			
			worsen_froms_immortality_potion_poison_effect = yes
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						NOT = {
							is_rival = ROOT
						}
					}
				}
			}
			
			mult_modifier = {	
				factor = 10
				OR = {
					is_friend = FROM
					is_lover = FROM
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = kind
			}
			
			mult_modifier = {
				factor = 10
				trait = honest
			}
			
			mult_modifier = {
				factor = 10
				trait = just
			}
			
			mult_modifier = {
				factor = 0.5
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value < 0
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.2
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value < -25
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value < -50
						}
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11975 # This will help... kill the target!
		
		custom_tooltip = {
			text = this_will_make_the_potion_less_healthy
			
			improve_froms_immortality_potion_poison_effect = yes
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						NOR = {
							is_friend = ROOT
							is_lover = ROOT
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				is_rival = FROM
			}
			
			mult_modifier = {
				factor = 10
				trait = cruel
			}
			
			mult_modifier = {
				factor = 10
				trait = deceitful
			}
			
			mult_modifier = {
				factor = 10
				trait = arbitrary
			}
			
			mult_modifier = {
				factor = 0.5
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value >= 25
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.2
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value >= 50
						}
					}
				}
			}
		}
	}
}

# Offer refused
character_event = {
	id = soh.11976
	desc = EVTDESC_SOH_11976
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11976 # I see...
	}
}

# Offered assistance - asking for money
character_event = {
	id = soh.11977
	desc = EVTDESC_SOH_11977
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11977 # Certainly!
		
		character_event = { id = soh.11945 days = 30 random = 90 } # Next step
		
		if = {
			limit = {
				society_rank == 4
			}
			
			transfer_scaled_wealth = {
				to = FROM
				value = 0.2
				min = 100
				max = 400
			}
		}
		
		else_if = {
			limit = {
				society_rank == 3
			}
			
			transfer_scaled_wealth = {
				to = FROM
				value = 0.15
				min = 75
				max = 300
			}
		}
		
		else_if = {
			limit = {
				society_rank == 2
			}
			
			transfer_scaled_wealth = {
				to = FROM
				value = 0.1
				min = 50
				max = 200
			}
		}
		
		else = {
			transfer_scaled_wealth = {
				to = FROM
				value = 0.05
				min = 25
				max = 100
			}
		}
		
		FROM = {
			character_event = { id = soh.11978 days = 2 }
		}
		
		ai_chance = { # TIANXIATODO: Invert
			factor = 100
			
			trigger = {
				NOR = {
					trait = proud
					AND = {
						is_rival = FROM
						NOT = {
							trait = trusting
						}
					}
					AND = {
						persistent_event_target:getting_immortality_potion = {
							is_rival = FROM
							OR = {
								is_friend = ROOT
								is_lover = ROOT
							}
						}
						NOT = {
							trait = trusting
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				persistent_event_target:getting_immortality_potion = {
					is_rival = FROM
					NOT = {
						is_rival = ROOT
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = paranoid
			}
			
			mult_modifier = {
				factor = 0.1
				trait = stubborn
			}
			
			mult_modifier = {
				factor = 10
				trait = trusting
			}
			
			mult_modifier = {
				factor = 0.1
				trait = greedy
			}
			
			mult_modifier = {
				factor = 10
				trait = charitable
			}
			
			mult_modifier = {
				factor = 10
				trait = slothful
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11977 # I don't need their help!
		
		character_event = { id = soh.11945 days = 30 random = 90 } # Next step
		
		FROM = {
			character_event = { id = soh.11979 days = 2 }
		}
		
		ai_chance = { # TIANXIATODO: Invert
			factor = 100
			
			trigger = {
				NAND = {
					OR = {
						is_friend = FROM
						is_lover = FROM
					}
					persistent_event_target:getting_immortality_potion = {
						OR = {
							is_friend = FROM
							is_lover = FROM
						}
					}
					NOR = {
						trait = paranoid
						trait = stubborn
						trait = proud
					}
				}
			}
			
			mult_modifier = {
				factor = 2
				FROM = {
					society_rank >= 2
				}
			}
			
			mult_modifier = {
				factor = 5
				FROM = {
					society_rank >= 2
				}
			}
		}
	}
}

# Offer accepted
character_event = {
	id = soh.11978
	desc = EVTDESC_SOH_11978
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11978 # This will help!
		
		custom_tooltip = {
			text = this_will_make_the_potion_healthier
			
			worsen_froms_immortality_potion_poison_effect = yes
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						NOT = {
							is_rival = ROOT
						}
					}
				}
			}
			
			mult_modifier = {	
				factor = 10
				OR = {
					is_friend = FROM
					is_lover = FROM
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = kind
			}
			
			mult_modifier = {
				factor = 10
				trait = honest
			}
			
			mult_modifier = {
				factor = 10
				trait = just
			}
			
			mult_modifier = {
				factor = 0.5
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value < 0
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.2
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value < -25
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value < -50
						}
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11978 # This will help... kill the target!
		
		custom_tooltip = {
			text = this_will_make_the_potion_less_healthy
			
			improve_froms_immortality_potion_poison_effect = yes
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						NOR = {
							is_friend = ROOT
							is_lover = ROOT
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				is_rival = FROM
			}
			
			mult_modifier = {
				factor = 10
				trait = cruel
			}
			
			mult_modifier = {
				factor = 10
				trait = deceitful
			}
			
			mult_modifier = {
				factor = 10
				trait = arbitrary
			}
			
			mult_modifier = {
				factor = 0.5
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value >= 25
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.2
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value >= 50
						}
					}
				}
			}
		}
	}
}

# Offer refused
character_event = {
	id = soh.11979
	desc = EVTDESC_SOH_11979
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11979 # I see...
	}
}

# Accidentally poured the wrong thing in the potion - keep going or attempt to recreate what you had?
character_event = {
	id = soh.11980
	desc = EVTDESC_SOH_11980
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		random_artifact = {
			limit = {
				has_artifact_flag = ingredient
				has_been_used_in_immortality_potion_trigger = no
			}
			
			save_event_target_as = target_immortality_potion_ingredient
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11980 # It's fine...
		
		custom_tooltip = {
			text = ingredient_will_be_added_to_immortality_potion
			
			add_ingredient_to_immortality_potion_poison_effect = yes
		
			event_target:target_immortality_potion_ingredient = {
				unsafe_destroy_artifact = yes
			}
			
			character_event = { id = soh.11945 days = 30 random = 90 } # Next step
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					persistent_event_target:getting_immortality_potion = {
						character = ROOT
					}
					trait = paranoid
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = slothful
			}
			
			mult_modifier = {
				factor = 10
				is_dumb_trigger = yes
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11980 # It's fine...
		
		hidden_tooltip = {
			random_list = {
				50 = {
					trigger = {
						intrigue >= 15
					}
					
					mult_modifier = {
						factor = 2
						trait = master_schemer
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 20
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 25
					}
					
					character_event = { id = soh.11981 days = 7 random = 7 } # Recovery went well
				}
				
				50 = {
					trigger = {
						intrigue < 30
					}
					
					character_event = { id = soh.11982 days = 7 random = 7 } # Setback
				}
			}
		}
		
		custom_tooltip = {
			text = ingredient_will_be_added_to_immortality_potion
			
			add_ingredient_to_immortality_potion_poison_effect = yes
		
			event_target:target_immortality_potion_ingredient = {
				unsafe_destroy_artifact = yes
			}
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 10
				trait = diligent
			}
			
			mult_modifier = {
				factor = 10
				trait = physician
			}
		}
	}
}

# Recreated potion - it went well
character_event = {
	id = soh.11981
	desc = EVTDESC_SOH_11981
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11981 # That went well enough...
		
		hidden_tooltip = {
			if = {
				limit = {
					check_variable = {
						which = alchemist_poison_knowledge
						value >= 100
					}
				}
				change_variable = {
					which = immortality_potion_quality
					value = 5
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_poison_knowledge
						value >= 75
					}
				}
				change_variable = {
					which = immortality_potion_quality
					value = 4
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_poison_knowledge
						value >= 50
					}
				}
				change_variable = {
					which = immortality_potion_quality
					value = 3
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_poison_knowledge
						value >= 25
					}
				}
				change_variable = {
					which = immortality_potion_quality
					value = 2
				}
			}
			
			else = {
				change_variable = {
					which = immortality_potion_quality
					value = 1
				}
			}
		}
		
		character_event = { id = soh.11945 days = 30 random = 90 } # Next step
	}
}

# Recreated potion - setback
character_event = {
	id = soh.11982
	desc = EVTDESC_SOH_11982
	picture = GFX_evt_experiments_failed
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11982 # Curses!
		
		hidden_tooltip = {
			if = {
				limit = {
					check_variable = {
						which = alchemist_poison_knowledge
						value >= 100
					}
				}
				change_variable = {
					which = immortality_potion_quality
					value = -1
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_poison_knowledge
						value >= 75
					}
				}
				change_variable = {
					which = immortality_potion_quality
					value = -2
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_poison_knowledge
						value >= 50
					}
				}
				change_variable = {
					which = immortality_potion_quality
					value = -3
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_poison_knowledge
						value >= 25
					}
				}
				change_variable = {
					which = immortality_potion_quality
					value = -4
				}
			}
			
			else = {
				change_variable = {
					which = immortality_potion_quality
					value = -5
				}
			}
		}
		
		character_event = { id = soh.11945 days = 30 random = 90 } # Next step
	}
}

# Lunatic gets inspired, for good or for bad
character_event = {
	id = soh.11983
	desc = EVTDESC_SOH_11983
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		random_artifact = {
			limit = {
				has_artifact_flag = ingredient
				has_been_used_in_immortality_potion_trigger = no
			}
			
			save_event_target_as = target_immortality_potion_ingredient
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11983 # I should add it to the potion!
		
		custom_tooltip = {
			text = ingredient_will_be_added_to_immortality_potion
			
			add_ingredient_to_immortality_potion_poison_effect = yes
		
			event_target:target_immortality_potion_ingredient = {
				unsafe_destroy_artifact = yes
			}
			
			character_event = { id = soh.11945 days = 30 random = 90 } # Next step
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11983 # Let's not...
		
		character_event = { id = soh.11945 days = 30 random = 90 } # Next step
		
		ai_chance = {
			factor = 0
		}
	}
}

# Possessed character tosses something into the potion
character_event = {
	id = soh.11984
	desc = EVTDESC_SOH_11984
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		random_artifact = {
			limit = {
				has_artifact_flag = ingredient
				has_been_used_in_immortality_potion_trigger = no
			}
			
			save_event_target_as = target_immortality_potion_ingredient
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11984 # I should add it to the potion!
		
		custom_tooltip = {
			text = ingredient_will_be_added_to_immortality_potion
			
			add_ingredient_to_immortality_potion_poison_effect = yes
		
			event_target:target_immortality_potion_ingredient = {
				unsafe_destroy_artifact = yes
			}
			
			character_event = { id = soh.11945 days = 30 random = 90 } # Next step
		}
	}
}

# Courtier in the same court might attempt sabotage (if not having a secret lab)
character_event = {
	id = soh.11985
	desc = EVTDESC_SOH_11985
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11985 # Let's do it!
		
		hidden_tooltip = {
			random_list = {
				50 = {
					trigger = {
						intrigue >= 10
						attribute_diff = {
							who = FROM
							attribute = intrigue
							value >= -5
						}
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 15
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 20
					}
					
					mult_modifier = {
						factor = 2
						attribute_diff = {
							who = FROM
							attribute = intrigue
							value >= 0
						}
					}
					
					mult_modifier = {
						factor = 2
						attribute_diff = {
							who = FROM
							attribute = intrigue
							value >= 5
						}
					}
					
					mult_modifier = {
						factor = 2
						attribute_diff = {
							who = FROM
							attribute = intrigue
							value >= 10
						}
					}
					
					FROM = {
						character_event = { id = soh.11986 } # Sabotage discovered, perpetrator unknown
					}
				}
				
				50 = {
					character_event = { id = soh.11987 } # Sabotage attempt failed
				}
			}
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						NOR = {
							is_friend = ROOT
							is_lover = ROOT
						}
					}
				}
				NAND = {
					trait = kind
					trait = honest
					trait = just
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = kind
			}
			
			mult_modifier = {
				factor = 0.1
				trait = honest
			}
			
			mult_modifier = {
				factor = 0.1
				trait = just
			}
			
			mult_modifier = {
				factor = 0.1
				trait = paranoid
			}
			
			mult_modifier = {
				factor = 0.1
				OR = {
					is_friend = FROM
					is_lover = FROM
				}
			}
			
			mult_modifier = {
				factor = 2
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value < 0
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 5
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value < -25
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				FROM = {
					persistent_event_target:getting_immortality_potion = {
						reverse_opinion = {
							who = ROOT
							value < 10
						}
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11985 # It is too risky
		
		FROM = {
			character_event = { id = soh.11945 days = 30 random = 90 } # Next step
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					OR = {
						trait = lunatic
						trait = possessed
					}
					FROM = {
						persistent_event_target:getting_immortality_potion = {
							is_rival = ROOT
						}
					}
					NOR = {
						trait = kind
						trait = honest
						trait = just
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = cruel
			}
			
			mult_modifier = {
				factor = 0.1
				trait = deceitful
			}
			
			mult_modifier = {
				factor = 0.1
				trait = arbitrary
			}
			
			mult_modifier = {
				factor = 10
				trait = slothful
			}
		}
	}
}

# Sabotage discovered - perpetrator unknown
character_event = {
	id = soh.11986
	desc = EVTDESC_SOH_11986
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_intrigue
	
	hide_from = yes
	
	is_triggered_only = yes
	
	immediate = {
		# TIANXIATODO: Base on courtier's skill and alchemical knowledge?
		change_variable = {
			which = immortality_potion_quality
			value = 5
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11986 # If only I knew who to thank...
		
		character_event = { id = soh.11945 days = 30 random = 90 } # Next step
	}
}

# Sabotage attempt discovered - courtier caught
character_event = {
	id = soh.11987
	desc = EVTDESC_SOH_11987
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11987 # Uh oh...
		
		FROMFROM = {
			character_event = { id = soh.11988 } # Inform the alchemist
		}
	}
}

# Alchemist informed of courtier being caught
character_event = {
	id = soh.11988
	desc = EVTDESC_SOH_11988
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11988 # How dare you (get caught)!
		
		opinion = {
			who = FROM
			modifier = opinion_potion_sabotage
		}
		
		character_event = { id = soh.11945 days = 30 random = 90 } # Next step
	}
	
	option = {
		trigger = {
			is_landed = yes
		}
		
		name = EVTOPTB_SOH_11988 # Guards! Seize them!
		
		FROM = {
			imprison = ROOT
		}
		
		opinion = {
			who = FROM
			modifier = opinion_potion_sabotage
		}
		
		character_event = { id = soh.11945 days = 30 random = 90 } # Next step
	}
}

# Having second thoughts - potion might be too healthy
character_event = {
	id = soh.11989
	desc = EVTDESC_SOH_11989
	picture = GFX_evt_stressed_ruler
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11989 # I will keep at it...
		
		character_event = { id = soh.11945 days = 30 random = 90 } # Next step
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				persistent_event_target:getting_immortality_potion = {
					OR = {
						is_friend = ROOT
						is_lover = ROOT
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11989 # I should stop...
		
		# TIANXIATODO: Fail quest
		
		persistent_event_target:getting_immortality_potion = {
			character_event = { id = soh.11990 } # Inform target
		}
		
		# TIANXIATODO: Cleanup
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = diligent
			}
			
			mult_modifier = {
				factor = 0.1
				trait = stubborn
			}
		}
	}
	
	option = {
		trigger = {
			persistent_event_target:getting_immortality_potion = {
				OR = {
					is_friend = ROOT
					is_lover = ROOT
				}
			}
		}
		
		name = EVTOPTC_SOH_11989 # Good! Good!
		
		custom_tooltip = {
			text = will_swap_to_brewing_actual
			
			clr_character_flag = brewing_immortality_potion_poison
			set_character_flag = brewing_immortality_potion_actual
			
			invert_immortality_potion_quality_effect = yes
		
			character_event = { id = soh.11818 days = 30 random = 90 } # Next step
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 10
				trait = kind
			}
			
			mult_modifier = {
				factor = 10
				trait = honest
			}
			
			mult_modifier = {
				factor = 10
				trait = just
			}
			
			mult_modifier = {
				factor = 0.1
				trait = cruel
			}
			
			mult_modifier = {
				factor = 0.1
				trait = arbitrary
			}
			
			mult_modifier = {
				factor = 0.1
				trait = deceitful
			}
		}
	}
}

# Inform target - alchemist stopped brewing potion
character_event = {
	id = soh.11990
	desc = EVTDESC_SOH_11990
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11990 # Perhaps for the best...
		
		FROM = {
			character_event = { id = soh.11991 } # Inform alchemist
		}
		
		opinion = {
			who = FROM
			modifier = opinion_stopped_brewing_immortality_potion_minor
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					AND = {
						trait = paranoid
						NOT = {
							is_rival = FROM
						}
					}
					trait = wroth
					NOR = {
						is_friend = FROM
						is_lover = FROM
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = kind
			}
			
			mult_modifier = {
				factor = 10
				is_friend = FROM
			}
			
			mult_modifier = {
				factor = 10
				is_lover = FROM
			}
		}
	}
	
	option = {
		trigger = {
			NOT = {
				trait = trusting
			}
		}
		
		name = EVTOPTB_SOH_11990 # I don't trust the explanation given...
		
		FROM = {
			character_event = { id = soh.11992 } # Inform alchemist
		}
		
		opinion = {
			who = FROM
			modifier = opinion_stopped_brewing_immortality_potion_major
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 10
				trait = paranoid
			}
			
			mult_modifier = {
				factor = 10
				trait = wroth
			}
			
			mult_modifier = {
				factor = 10
				is_rival = FROM
			}
		}
	}
}

# Inform alchemist - target accepted apology
character_event = {
	id = soh.11991
	desc = EVTDESC_SOH_11991
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11991 # Good to hear!
	}
}

# Inform alchemist - target got imprisonment reason
character_event = {
	id = soh.11992
	desc = EVTDESC_SOH_11992
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11992 # This might be bad...
	}
}

# Having second thoughts - perhaps you like the target enough to actually try?
character_event = {
	id = soh.11993
	desc = EVTDESC_SOH_11993
	picture = GFX_evt_china_diplomatic_success
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11993 # I will keep brewing a poison...
		
		character_event = { id = soh.11945 days = 30 random = 90 } # Next step
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					persistent_event_target:getting_immortality_potion = {
						OR = {
							is_friend = ROOT
							is_lover = ROOT
						}
					}
					NAND = {
						trait = cruel
						trait = arbitrary
						trait = deceitful
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = kind
			}
			
			mult_modifier = {
				factor = 0.1
				trait = honest
			}
			
			mult_modifier = {
				factor = 0.1
				trait = just
			}
			
			mult_modifier = {
				factor = 10
				trait = slothful
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11993 # I should stop...
		
		# TIANXIATODO: Fail quest
		
		persistent_event_target:getting_immortality_potion = {
			character_event = { id = soh.11990 } # Inform target
		}
		
		# TIANXIATODO: Cleanup
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = diligent
			}
			
			mult_modifier = {
				factor = 0.1
				trait = stubborn
			}
			
			mult_modifier = {
				factor = 0.1
				persistent_event_target:getting_immortality_potion = {
					OR = {
						is_friend = ROOT
						is_lover = ROOT
					}
				}
				trait = kind
			}
			
			mult_modifier = {
				factor = 0.1
				persistent_event_target:getting_immortality_potion = {
					OR = {
						is_friend = ROOT
						is_lover = ROOT
					}
				}
				trait = just
			}
			
			mult_modifier = {
				factor = 0.1
				persistent_event_target:getting_immortality_potion = {
					OR = {
						is_friend = ROOT
						is_lover = ROOT
					}
				}
				trait = honest
			}
		}
	}
	
	option = {
		name = EVTOPTC_SOH_11993 # I should actually try...
		
		custom_tooltip = {
			text = will_swap_to_brewing_actual
			
			clr_character_flag = brewing_immortality_potion_poison
			set_character_flag = brewing_immortality_potion_actual
			
			invert_immortality_potion_quality_effect = yes
		
			character_event = { id = soh.11818 days = 30 random = 90 } # Next step
		}
		
		ai_chance = {
			factor = 100
		}
	}
}

## Maybe you should drag things out, to avoid the target not liking the result?
#character_event = {
#	id = soh.11994
#	desc = EVTDESC_SOH_11994
#	picture = GFX_evt_stressed_ruler
#	border = GFX_event_normal_frame_intrigue
#	
#	is_triggered_only = yes
#	
#	option = {
#		name = EVTOPTA_SOH_11994 # I will keep at it...
#		
#		character_event = { id = soh.11945 days = 30 random = 90 } # Next step
#		
#		ai_chance = {
#			factor = 100
#			
#			mult_modifier = {
#				factor = 0.1
#				trait = slothful
#			}
#			
#			mult_modifier = {
#				factor = 0.1
#				trait = paranoid
#			}
#			
#			mult_modifier = {
#				factor = 0.1
#				trait = cynical
#			}
#			
#			mult_modifier = {
#				factor = 0.1
#				trait = patient
#			}
#			
#			mult_modifier = {
#				factor = 0.1
#				trait = deceitful
#			}
#		}
#	}
#	
#	option = {
#		name = EVTOPTB_SOH_11994 # I will work a bit more slowly
#		
#		character_event = { id = soh.11945 days = 30 random = 90 } # Next step
#		
#		ai_chance = {
#			factor = 100
#			
#			mult_modifier = {
#				factor = 0.1
#				trait = diligent
#			}
#			
#			mult_modifier = {
#				factor = 0.1
#				trait = patient
#			}
#			
#			mult_modifier = {
#				factor = 0.1
#				trait = honest
#			}
#		}
#	}
#}



### Impatient target

# Target might get impatient
character_event = {
	id = soh.11995
	desc = EVTDESC_SOH_11995
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes # on_five_year_pulse
	
	has_dlc = "Mystics"
	min_age = 16
	prisoner = no
	only_playable = yes
	
	trigger = {
		is_actually_incapable_trigger = no
		has_character_modifier = getting_immortality_potion
		persistent_event_target:giving_me_immortality_potion = {
			NOT = {
				character = ROOT
			}
			is_inaccessible_or_incapable_trigger = no
			
			had_character_flag = {
				flag = started_brewing_immortality_potion
				days = 900
			}
			
			# TIANXIATODO: Some kind of check for not being in the middle of the "asking for ingredient/book" events
		}
	}
	
	option = {
		name = EVTOPTA_SOH_11995 # I'm sure they're working as quickly as possible!
		
		random = {
			chance = 5
			add_trait_partially_trusting_effect = yes
		}
		
		random = {
			chance = 5
			add_trait_partially_patient_effect = yes
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					trait = paranoid
					trait = wroth
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = paranoid
			}
			
			mult_modifier = {
				factor = 0.1
				trait = wroth
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11995 # I will ask how it is going...
		
		persistent_event_target:giving_me_immortality_potion = {
			set_character_flag = asked_about_immortality_potion
			
			character_event = { id = soh.11996 } # Alchemist is asked about progress
			
			character_event = { id = soh.12010 days = 10 } # Flag cleanup
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					trait = trusting
					trait = patient
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = trusting
			}
			
			mult_modifier = {
				factor = 0.1
				trait = patient
			}
		}
	}
}

# Impatient target - asked about progress
character_event = {
	id = soh.11996
	desc = EVTDESC_SOH_11996
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11996 # It is going well enough!
		
		FROM = {
			character_event = { id = soh.11997 days = 2 } # Inform the target
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				OR = {
					trait = proud
					trait = deceitful
					trait = stubborn
					check_variable = {
						which = immortality_potion_ingredients
						value >= 5
					}
					check_variable = {
						which = immortality_potion_progress
						value < 10
					}
				}
			}
			
			mult_modifier = {
				factor = 2
				check_variable = {
					which = immortality_potion_ingredients
					value >= 5
				}
			}
			
			mult_modifier = {
				factor = 5
				check_variable = {
					which = immortality_potion_ingredients
					value >= 8
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = proud
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11996 # I am struggling a bit...
		
		FROM = {
			character_event = { id = soh.12000 days = 2 } # Inform the target
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				OR = {
					trait = humble
					trait = honest
					check_variable = {
						which = immortality_potion_ingredients
						value < 2
					}
				}
				check_variable = {
					which = immortality_potion_ingredients
					value < 10
				}
			}
		}
	}
}

# Target told everything is going as planned
character_event = {
	id = soh.11997
	desc = EVTDESC_SOH_11997
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11997 # That's a relief!
		
		prestige = -25
		
		FROM = {
			character_event = { id = soh.11998 } # Inform alchemist
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					OR = {
						trait = wroth
						trait = paranoid
					}
					NOR = {
						trait = patient
						trait = trusting
					}
					OR = {
						is_friend = FROM
						is_lover = FROM
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				is_friend = FROM
			}
			
			mult_modifier = {
				factor = 10
				is_lover = FROM
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_11997 # I still think you are working too slowly!
		
		random = {
			chance = 5
			add_trait_partially_paranoid_effect = yes
		}
		
		random = {
			chance = 5
			add_trait_partially_wroth_effect = yes
		}
		
		opinion = {
			who = FROM
			modifier = opinion_lazy_alchemist
		}
		
		FROM = {
			character_event = { id = soh.11999 } # Inform alchemist
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					OR = {
						trait = patient
						trait = trusting
					}
					NOR = {
						trait = wroth
						trait = paranoid
					}
					OR = {
						is_friend = FROM
						is_lover = FROM
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = wroth
			}
			
			mult_modifier = {
				factor = 10
				trait = paranoid
			}
		}
	}
}

# Target seemed pleased enough
character_event = {
	id = soh.11998
	desc = EVTDESC_SOH_11998
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11998 # That's a relief!
	}
}

# Target unhappy
character_event = {
	id = soh.11999
	desc = EVTDESC_SOH_11999
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_11999 # I see...
		
		prestige = -100
		
		reverse_opinion = {
			who = FROM
			modifier = opinion_lazy_alchemist
		}
	}
}

# Target told things are going a bit more slowly than expected
character_event = {
	id = soh.12000
	desc = EVTDESC_SOH_12000
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12000 # Well, I hope you figure it out...
		
		prestige = -25
		
		FROM = {
			character_event = { id = soh.12001 } # Inform alchemist
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					OR = {
						trait = wroth
						trait = paranoid
					}
					NOR = {
						trait = patient
						trait = trusting
					}
					OR = {
						is_friend = FROM
						is_lover = FROM
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				is_friend = FROM
			}
			
			mult_modifier = {
				factor = 10
				is_lover = FROM
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_12000 # You should work faster!
		
		opinion = {
			who = FROM
			modifier = opinion_lazy_alchemist
		}
		
		FROM = {
			character_event = { id = soh.12002 } # Inform alchemist
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					OR = {
						trait = patient
						trait = trusting
					}
					NOR = {
						trait = wroth
						trait = paranoid
					}
					OR = {
						is_friend = FROM
						is_lover = FROM
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = wroth
			}
			
			mult_modifier = {
				factor = 10
				trait = paranoid
			}
		}
	}
	
	option = {
		name = EVTOPTC_SOH_12000 # Give me that potion, now!
		
		add_trait_partially_wroth_effect = yes
		
		FROM = {
			character_event = { id = soh.12003 } # Inform alchemist
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					trait = paranoid
					AND = {
						is_rival = FROM
						NOT = {
							trait = trusting
						}
					}
					trait = content
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = wroth
			}
			
			mult_modifier = {
				factor = 2
				trait = ambitious
			}
		}
	}
}

# Target understanding
character_event = {
	id = soh.12001
	desc = EVTDESC_SOH_12001
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12001 # That's a relief!
	}
}

# Impatient target - lectured
character_event = {
	id = soh.12002
	desc = EVTDESC_SOH_12002
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12002 # I see...
		
		prestige = -100
		
		reverse_opinion = {
			who = FROM
			modifier = opinion_lazy_alchemist
		}
	}
}

# Impatient target - given ultimatum
character_event = {
	id = soh.12003
	desc = EVTDESC_SOH_12003
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12003 # I'm sorry, but it isn't ready yet!
		
		prestige = -100
		
		FROM = {
			character_event = { id = soh.12004 days = 2 } # Inform target
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				has_character_flag = brewing_immortality_potion_poison
			}
			
			mult_modifier = {
				factor = 0.1
				trait = slothful
			}
			
			mult_modifier = {
				factor = 10
				is_friend = FROM
			}
			
			mult_modifier = {
				factor = 10
				is_lover = FROM
			}
			
			mult_modifier = {
				factor = 10
				trait = honest
				NOT = {
					has_character_flag = brewing_immortality_potion_poison
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_12003 # Well, if you really insist...
		
		prestige = -100
		
		set_character_flag = immortality_potion_finished
		
		custom_tooltip = {
			text = will_finish_immortality_potion_in_a_rush
			
			while = { # Ensure there's something in the potion
				limit = {
					check_variable = {
						which = immortality_potion_ingredients
						value < 2
					}
				}
				
				add_random_ingredient_to_immortality_potion_effect = yes
			}
		}
		
		hidden_tooltip = {
			trigger_switch = {
				on_trigger = has_character_flag
				
				brewing_immortality_potion_actual = { finalize_immortality_potion_setup_actual_effect = yes }
				brewing_immortality_potion_placebo = { finalize_immortality_potion_setup_placebo_effect = yes }
				brewing_immortality_potion_poison = { finalize_immortality_potion_setup_poison_effect = yes }
			}
		}
		
		trigger_switch = {
			on_trigger = has_character_flag
			
			brewing_immortality_potion_actual = { FROM = { character_event = { id = soh.12007 } } } # Target gets actual immortality potion
			brewing_immortality_potion_placebo = { FROM = { character_event = { id = soh.12008 } } } # Target gets placebo
			brewing_immortality_potion_poison = { FROM = { character_event = { id = soh.12009 } } } # Target gets poison
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 10
				is_rival = FROM
				NOT = {
					has_character_flag = brewing_immortality_potion_actual
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = stubborn
			}
			
			mult_modifier = {
				factor = 10
				trait = deceitful
				has_character_flag = brewing_immortality_potion_poison
			}
		}
	}
}

# Target told potion isn't ready despite ultimatum
character_event = {
	id = soh.12004
	desc = EVTDESC_SOH_12004
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12004 # Well, I suppose you know best...
		
		opinion = {
			who = FROM
			modifier = opinion_lazy_alchemist
		}
		
		prestige = -100
		
		FROM = {
			character_event = { id = soh.12005 } # Inform alchemist
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					is_rival = FROM
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_12004 # You are a lying liar who lies!
		
		opinion = {
			who = FROM
			modifier = opinion_criminal_alchemist
		}
		
		FROM = {
			character_event = { id = soh.12006 } # Inform alchemist
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					OR = {
						is_friend = FROM
						is_lover = FROM
					}
					trait = trusting
				}
			}
		}
	}
}

# Informed that target relented
character_event = {
	id = soh.12005
	desc = EVTDESC_SOH_12005
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12005 # Phew!
		
		reverse_opinion = {
			who = FROM
			modifier = opinion_lazy_alchemist
		}
	}
}

# Informed of imprisonment reason
character_event = {
	id = soh.12006
	desc = EVTDESC_SOH_12006
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12006 # This might be bad...
		
		reverse_opinion = {
			who = FROM
			modifier = opinion_criminal_alchemist
		}
	}
}

# Target given half-finished immortality potion - actual potion
character_event = {
	id = soh.12007
	desc = EVTDESC_SOH_12007
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		set_variable = {
			which = consumed_immortality_potion_quality
			value = 0
		}
		
		while = {
			limit = {
				FROM = {
					NOT = {
						is_variable_equal = {
							which = immortality_potion_quality
							value = 0
						}
					}
				}
			}
			
			if = {
				limit = {
					FROM = {
						check_variable = {
							which = immortality_potion_quality
							value >= 100
						}
					}
				}
				
				FROM = {
					change_variable = {
						which = immortality_potion_quality
						value = -100
					}
				}
				
				change_variable = {
					which = consumed_immortality_potion_quality
					value = 100
				}
			}
			
			else_if = {
				limit = {
					FROM = {
						check_variable = {
							which = immortality_potion_quality
							value >= 10
						}
					}
				}
				
				FROM = {
					change_variable = {
						which = immortality_potion_quality
						value = -10
					}
				}
				
				change_variable = {
					which = consumed_immortality_potion_quality
					value = 10
				}
			}
			
			else_if = {
				limit = {
					FROM = {
						check_variable = {
							which = immortality_potion_quality
							value >= 1
						}
					}
				}
				
				FROM = {
					change_variable = {
						which = immortality_potion_quality
						value = -1
					}
				}
				
				change_variable = {
					which = consumed_immortality_potion_quality
					value = 1
				}
			}
			
			else_if = {
				limit = {
					FROM = {
						check_variable = {
							which = immortality_potion_quality
							value >= 0.05
						}
					}
				}
				
				FROM = {
					change_variable = {
						which = immortality_potion_quality
						value = -0.05
					}
				}
				
				change_variable = {
					which = consumed_immortality_potion_quality
					value = 0.05
				}
			}
			
			else_if = {
				limit = {
					FROM = {
						check_variable = {
							which = immortality_potion_quality
							value <= -100
						}
					}
				}
				
				FROM = {
					change_variable = {
						which = immortality_potion_quality
						value = 100
					}
				}
				
				change_variable = {
					which = consumed_immortality_potion_quality
					value = -100
				}
			}
			
			else_if = {
				limit = {
					FROM = {
						check_variable = {
							which = immortality_potion_quality
							value <= -10
						}
					}
				}
				
				FROM = {
					change_variable = {
						which = immortality_potion_quality
						value = 10
					}
				}
				
				change_variable = {
					which = consumed_immortality_potion_quality
					value = -10
				}
			}
			
			else_if = {
				limit = {
					FROM = {
						check_variable = {
							which = immortality_potion_quality
							value <= -1
						}
					}
				}
				
				FROM = {
					change_variable = {
						which = immortality_potion_quality
						value = 1
					}
				}
				
				change_variable = {
					which = consumed_immortality_potion_quality
					value = -1
				}
			}
			
			else = {
				FROM = {
					change_variable = {
						which = immortality_potion_quality
						value = 0.05
					}
				}
				
				change_variable = {
					which = consumed_immortality_potion_quality
					value = -0.05
				}
			}
		}
		
		FROM = {
			save_event_target_as = target_alchemist
		}
		
		copy_consumed_immortality_potion_ingredient_flags_effect = yes
		
		FROM = {
			clr_character_flag = brewing_immortality_potion_actual
		}
	}
	
	option = {
		name = EVTOPTA_SOH_12007 # Finally!
		
		character_event = { id = soh.12016 } # Decide whether to drink it all at once or in installments
	}
}

# Target given half-finished immortality potion - placebo
character_event = {
	id = soh.12008
	desc = EVTDESC_SOH_12008
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		set_variable = {
			which = consumed_immortality_potion_quality
			value = 0
		}
		
		while = {
			limit = {
				FROM = {
					NOT = {
						is_variable_equal = {
							which = immortality_potion_quality
							value = 0
						}
					}
				}
			}
			
			if = {
				limit = {
					FROM = {
						check_variable = {
							which = immortality_potion_quality
							value >= 100
						}
					}
				}
				
				FROM = {
					change_variable = {
						which = immortality_potion_quality
						value = -100
					}
				}
				
				change_variable = {
					which = consumed_immortality_potion_quality
					value = 100
				}
			}
			
			else_if = {
				limit = {
					FROM = {
						check_variable = {
							which = immortality_potion_quality
							value >= 10
						}
					}
				}
				
				FROM = {
					change_variable = {
						which = immortality_potion_quality
						value = -10
					}
				}
				
				change_variable = {
					which = consumed_immortality_potion_quality
					value = 10
				}
			}
			
			else_if = {
				limit = {
					FROM = {
						check_variable = {
							which = immortality_potion_quality
							value >= 1
						}
					}
				}
				
				FROM = {
					change_variable = {
						which = immortality_potion_quality
						value = -1
					}
				}
				
				change_variable = {
					which = consumed_immortality_potion_quality
					value = 1
				}
			}
			
			else_if = {
				limit = {
					FROM = {
						check_variable = {
							which = immortality_potion_quality
							value >= 0.05
						}
					}
				}
				
				FROM = {
					change_variable = {
						which = immortality_potion_quality
						value = -0.05
					}
				}
				
				change_variable = {
					which = consumed_immortality_potion_quality
					value = 0.05
				}
			}
			
			else_if = {
				limit = {
					FROM = {
						check_variable = {
							which = immortality_potion_quality
							value <= -100
						}
					}
				}
				
				FROM = {
					change_variable = {
						which = immortality_potion_quality
						value = 100
					}
				}
				
				change_variable = {
					which = consumed_immortality_potion_quality
					value = -100
				}
			}
			
			else_if = {
				limit = {
					FROM = {
						check_variable = {
							which = immortality_potion_quality
							value <= -10
						}
					}
				}
				
				FROM = {
					change_variable = {
						which = immortality_potion_quality
						value = 10
					}
				}
				
				change_variable = {
					which = consumed_immortality_potion_quality
					value = -10
				}
			}
			
			else_if = {
				limit = {
					FROM = {
						check_variable = {
							which = immortality_potion_quality
							value <= -1
						}
					}
				}
				
				FROM = {
					change_variable = {
						which = immortality_potion_quality
						value = 1
					}
				}
				
				change_variable = {
					which = consumed_immortality_potion_quality
					value = -1
				}
			}
			
			else = {
				FROM = {
					change_variable = {
						which = immortality_potion_quality
						value = 0.05
					}
				}
				
				change_variable = {
					which = consumed_immortality_potion_quality
					value = -0.05
				}
			}
		}
		
		FROM = {
			save_event_target_as = target_alchemist
		}
		
		copy_consumed_immortality_potion_ingredient_flags_effect = yes
		
		FROM = {
			clr_character_flag = brewing_immortality_potion_placebo
		}
	}
	
	option = {
		name = EVTOPTA_SOH_12008 # Finally!
		
		character_event = { id = soh.12077 } # Decide whether to drink it all at once or in installments
	}
}

# Target given half-finished immortality potion - poison
character_event = {
	id = soh.12009
	desc = EVTDESC_SOH_12009
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		set_variable = {
			which = consumed_immortality_potion_quality
			value = 0
		}
		
		while = {
			limit = {
				FROM = {
					NOT = {
						is_variable_equal = {
							which = immortality_potion_quality
							value = 0
						}
					}
				}
			}
			
			if = {
				limit = {
					FROM = {
						check_variable = {
							which = immortality_potion_quality
							value >= 100
						}
					}
				}
				
				FROM = {
					change_variable = {
						which = immortality_potion_quality
						value = -100
					}
				}
				
				change_variable = {
					which = consumed_immortality_potion_quality
					value = 100
				}
			}
			
			else_if = {
				limit = {
					FROM = {
						check_variable = {
							which = immortality_potion_quality
							value >= 10
						}
					}
				}
				
				FROM = {
					change_variable = {
						which = immortality_potion_quality
						value = -10
					}
				}
				
				change_variable = {
					which = consumed_immortality_potion_quality
					value = 10
				}
			}
			
			else_if = {
				limit = {
					FROM = {
						check_variable = {
							which = immortality_potion_quality
							value >= 1
						}
					}
				}
				
				FROM = {
					change_variable = {
						which = immortality_potion_quality
						value = -1
					}
				}
				
				change_variable = {
					which = consumed_immortality_potion_quality
					value = 1
				}
			}
			
			else_if = {
				limit = {
					FROM = {
						check_variable = {
							which = immortality_potion_quality
							value >= 0.05
						}
					}
				}
				
				FROM = {
					change_variable = {
						which = immortality_potion_quality
						value = -0.05
					}
				}
				
				change_variable = {
					which = consumed_immortality_potion_quality
					value = 0.05
				}
			}
			
			else_if = {
				limit = {
					FROM = {
						check_variable = {
							which = immortality_potion_quality
							value <= -100
						}
					}
				}
				
				FROM = {
					change_variable = {
						which = immortality_potion_quality
						value = 100
					}
				}
				
				change_variable = {
					which = consumed_immortality_potion_quality
					value = -100
				}
			}
			
			else_if = {
				limit = {
					FROM = {
						check_variable = {
							which = immortality_potion_quality
							value <= -10
						}
					}
				}
				
				FROM = {
					change_variable = {
						which = immortality_potion_quality
						value = 10
					}
				}
				
				change_variable = {
					which = consumed_immortality_potion_quality
					value = -10
				}
			}
			
			else_if = {
				limit = {
					FROM = {
						check_variable = {
							which = immortality_potion_quality
							value <= -1
						}
					}
				}
				
				FROM = {
					change_variable = {
						which = immortality_potion_quality
						value = 1
					}
				}
				
				change_variable = {
					which = consumed_immortality_potion_quality
					value = -1
				}
			}
			
			else = {
				FROM = {
					change_variable = {
						which = immortality_potion_quality
						value = 0.05
					}
				}
				
				change_variable = {
					which = consumed_immortality_potion_quality
					value = -0.05
				}
			}
		}
		
		copy_consumed_immortality_potion_ingredient_flags_effect = yes
		
		FROM = {
			clr_character_flag = brewing_immortality_potion_poison
		}
	}
	
	option = {
		name = EVTOPTA_SOH_12009 # Finally!
		
		character_event = { id = soh.12134 } # Decide whether to drink it all at once or in installments
	}
}

# Flag cleanup
character_event = {
	id = soh.12010
	hide_window = yes
	
	is_triggered_only = yes
	
	has_character_flag = asked_about_immortality_potion
	
	immediate = {
		clr_character_flag = asked_about_immortality_potion
	}
}



### Immortality Potion is ready

# Potion is ready - brewing for self
character_event = {
	id = soh.12011
	desc = EVTDESC_SOH_12011
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = target_alchemist
		
		finalize_immortality_potion_setup_actual_effect = yes
	}
	
	option = {
		name = EVTOPTA_SOH_12011 # Time to drink it!
	
		hidden_tooltip = {
			set_variable = {
				which = consumed_immortality_potion_quality
				which = immortality_potion_quality
			}
			
			copy_consumed_immortality_potion_ingredient_flags_effect = yes
		}
		
		character_event = { id = soh.12016 } # Decide whether to drink it all at once or in installments
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					trait = depressed
					AND = {
						trait = craven
						trait = paranoid
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = craven
			}
			
			mult_modifier = {
				factor = 0.1
				trait = paranoid
			}
			
			mult_modifier = {
				factor = 0.1
				trait = content
			}
			
			mult_modifier = {
				factor = 0.1
				check_variable = {
					which = immortality_potion_quality
					value < 25
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_12011 # It is too dangerous...
		
		# TIANXIATODO: Cleanup
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					trait = brave
					trait = trusting
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = brave
			}
			
			mult_modifier = {
				factor = 0.1
				trait = trusting
			}
			
			mult_modifier = {
				factor = 0.1
				trait = ambitious
			}
			
			mult_modifier = {
				factor = 0.5
				check_variable = {
					which = immortality_potion_quality
					value >= 50
				}
			}
			
			mult_modifier = {
				factor = 0.2
				check_variable = {
					which = immortality_potion_quality
					value >= 75
				}
			}
		}
	}
}

# Potion is ready - brewing for other
character_event = {
	id = soh.12012
	desc = EVTDESC_SOH_12012
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = target_alchemist
		
		finalize_immortality_potion_setup_actual_effect = yes
	}
	
	option = {
		name = EVTOPTA_SOH_12012 # Time to deliver it!
		
		persistent_event_target:getting_immortality_potion = {
			character_event = { id = soh.12013 } # Potion delivered
		}
	}
}

# Target received potion
character_event = {
	id = soh.12013
	desc = EVTDESC_SOH_12013
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12013 # Time to drink it!
	
		hidden_tooltip = {
			set_variable = {
				which = consumed_immortality_potion_quality
				value = 0
			}
			
			while = {
				limit = {
					FROM = {
						NOT = {
							is_variable_equal = {
								which = immortality_potion_quality
								value = 0
							}
						}
					}
				}
				
				if = {
					limit = {
						FROM = {
							check_variable = {
								which = immortality_potion_quality
								value >= 100
							}
						}
					}
					
					FROM = {
						change_variable = {
							which = immortality_potion_quality
							value = -100
						}
					}
					
					change_variable = {
						which = consumed_immortality_potion_quality
						value = 100
					}
				}
				
				else_if = {
					limit = {
						FROM = {
							check_variable = {
								which = immortality_potion_quality
								value >= 10
							}
						}
					}
					
					FROM = {
						change_variable = {
							which = immortality_potion_quality
							value = -10
						}
					}
					
					change_variable = {
						which = consumed_immortality_potion_quality
						value = 10
					}
				}
				
				else_if = {
					limit = {
						FROM = {
							check_variable = {
								which = immortality_potion_quality
								value >= 1
							}
						}
					}
					
					FROM = {
						change_variable = {
							which = immortality_potion_quality
							value = -1
						}
					}
					
					change_variable = {
						which = consumed_immortality_potion_quality
						value = 1
					}
				}
				
				else_if = {
					limit = {
						FROM = {
							check_variable = {
								which = immortality_potion_quality
								value >= 0.05
							}
						}
					}
					
					FROM = {
						change_variable = {
							which = immortality_potion_quality
							value = -0.05
						}
					}
					
					change_variable = {
						which = consumed_immortality_potion_quality
						value = 0.05
					}
				}
				
				else_if = {
					limit = {
						FROM = {
							check_variable = {
								which = immortality_potion_quality
								value <= -100
							}
						}
					}
					
					FROM = {
						change_variable = {
							which = immortality_potion_quality
							value = 100
						}
					}
					
					change_variable = {
						which = consumed_immortality_potion_quality
						value = -100
					}
				}
				
				else_if = {
					limit = {
						FROM = {
							check_variable = {
								which = immortality_potion_quality
								value <= -10
							}
						}
					}
					
					FROM = {
						change_variable = {
							which = immortality_potion_quality
							value = 10
						}
					}
					
					change_variable = {
						which = consumed_immortality_potion_quality
						value = -10
					}
				}
				
				else_if = {
					limit = {
						FROM = {
							check_variable = {
								which = immortality_potion_quality
								value <= -1
							}
						}
					}
					
					FROM = {
						change_variable = {
							which = immortality_potion_quality
							value = 1
						}
					}
					
					change_variable = {
						which = consumed_immortality_potion_quality
						value = -1
					}
				}
				
				else = {
					FROM = {
						change_variable = {
							which = immortality_potion_quality
							value = 0.05
						}
					}
					
					change_variable = {
						which = consumed_immortality_potion_quality
						value = -0.05
					}
				}
			}
			
			copy_consumed_immortality_potion_ingredient_flags_effect = yes
		}
		
		FROM = {
			character_event = { id = soh.12014 } # Inform the alchemist
		}
		
		character_event = { id = soh.12016 } # Decide whether to drink it all at once or in installments
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					trait = depressed
					AND = {
						trait = craven
						trait = paranoid
					}
					AND = {
						is_rival = FROM
						NOT = {
							trait = trusting
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = craven
			}
			
			mult_modifier = {
				factor = 0.1
				trait = paranoid
			}
			
			mult_modifier = {
				factor = 0.1
				trait = content
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_12013 # It is too dangerous...
		
		FROM = {
			character_event = { id = soh.12015 } # Inform the alchemist
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					trait = brave
					trait = trusting
					NAND = {
						is_rival = FROM
						NOT = {
							trait = trusting
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = brave
			}
			
			mult_modifier = {
				factor = 0.1
				trait = trusting
			}
			
			mult_modifier = {
				factor = 0.1
				trait = ambitious
			}
		}
	}
}

# Target accepted potion
character_event = {
	id = soh.12014
	desc = EVTDESC_SOH_12014
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12014 # Let's hope it works out...
	}
}

# Target had second thoughts, drink it yourself?
character_event = {
	id = soh.12015
	desc = EVTDESC_SOH_12015
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			NOR = {
				trait = immortal
				trait = kitsune
			}
		}
		
		name = EVTOPTA_SOH_12015 # I guess *I* shall drink it, then...
	
		hidden_tooltip = {
			save_persistent_event_target = {
				name = getting_immortality_potion
				scope = ROOT
			}
			
			set_variable = {
				which = consumed_immortality_potion_quality
				which = immortality_potion_quality
			}
			
			save_event_target_as = target_alchemist
			
			copy_consumed_immortality_potion_ingredient_flags_effect = yes
		}
		
		character_event = { id = soh.12016 } # Decide whether to drink it all at once or in installments
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					trait = depressed
					AND = {
						trait = craven
						trait = paranoid
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = craven
			}
			
			mult_modifier = {
				factor = 0.1
				trait = paranoid
			}
			
			mult_modifier = {
				factor = 0.1
				trait = content
			}
			
			mult_modifier = {
				factor = 0.1
				check_variable = {
					which = immortality_potion_quality
					value < 25
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_12015 # It is too dangerous...
		
		opinion = {
			who = FROM
			modifier = opinion_wasted_immortality_potion
		}
		
		# TIANXIATODO: Cleanup
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					trait = brave
					trait = trusting
					NOR = {
						trait = immortal
						trait = kitsune
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = brave
			}
			
			mult_modifier = {
				factor = 0.1
				trait = trusting
			}
			
			mult_modifier = {
				factor = 0.1
				trait = ambitious
			}
			
			mult_modifier = {
				factor = 0.5
				check_variable = {
					which = immortality_potion_quality
					value >= 50
				}
			}
			
			mult_modifier = {
				factor = 0.2
				check_variable = {
					which = immortality_potion_quality
					value >= 75
				}
			}
		}
	}
}

# Drinking the potion - drink it all at once, or take a little at a time?
character_event = {
	id = soh.12016
	desc = EVTDESC_SOH_12016
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12016 # I will drink it all at once!
		
		custom_tooltip = {
			text = will_drink_the_immortality_potion_rapidly
			
			determine_final_immortality_potion_actual_outcome_effect = yes
			
			character_event = { id = soh.12018 days = 1 } # Outcome revealed
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					trait = craven
					trait = patient
					trait = paranoid
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = craven
			}
			
			mult_modifier = {
				factor = 0.1
				trait = patient
			}
			
			mult_modifier = {
				factor = 0.1
				trait = paranoid
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_12016 # I will take a little at a time...
		
		custom_tooltip = {
			text = will_drink_the_immortality_potion_slowly
		
			determine_final_immortality_potion_actual_outcome_effect = yes
			
			random_list = {
				20 = {
					set_variable = {
						which = immortality_potion_installments
						value = 0
					}
				}
				20 = {
					set_variable = {
						which = immortality_potion_installments
						value = 1
					}
				}
				20 = {
					set_variable = {
						which = immortality_potion_installments
						value = 3
					}
				}
				20 = {
					set_variable = {
						which = immortality_potion_installments
						value = 5
					}
				}
				20 = {
					set_variable = {
						which = immortality_potion_installments
						value = 7
					}
				}
			}
			
			set_variable = {
				which = immortality_potion_health_change
				value = 0
			}
			
			clr_character_flag = immortality_potion_lunatic
			
			character_event = { id = soh.12034 days = 10 random = 5 } # First installment
			
			persistent_event_target:giving_me_immortality_potion = {
				character_event = { id = soh.12017 days = 1 } # Inform alchemist - target is taking the potion in installments
			}
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					trait = brave
					trait = wroth
					trait = trusting
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = brave
			}
			
			mult_modifier = {
				factor = 0.1
				trait = wroth
			}
			
			mult_modifier = {
				factor = 0.1
				trait = trusting
			}
		}
	}
}

# Inform alchemist - target is taking the potion in installments
character_event = {
	id = soh.12017
	desc = EVTDESC_SOH_12017
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12017 # I see...
	}
}

# Determine the outcome - drank it all at once
character_event = {
	id = soh.12018
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		NOR = {
			trait = kitsune
			trait = immortal
		}
	}
	
	immediate = {
		trigger_switch = {
			on_trigger = has_character_flag
			
			consumed_immortality_potion_immortality = { character_event = { id = soh.12019 } } # The potion worked!
			consumed_immortality_potion_health = { character_event = { id = soh.12021 } } # The potion improved your health
			consumed_immortality_potion_nothing = { character_event = { id = soh.12024 } } # The potion did nothing
			consumed_immortality_potion_harmful = { character_event = { id = soh.12027 } } # The potion worsened your health
			consumed_immortality_potion_mad = { character_event = { id = soh.12030 } } # The potion drove you mad
			consumed_immortality_potion_deadly = { character_event = { id = soh.12032 } } # The potion killed you
		}
	}
}

# Potion worked - you are now immortal!
character_event = {
	id = soh.12019
	desc = EVTDESC_SOH_12019
	picture = GFX_evt_religious_exultation
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12019 # Excellent!
		
		add_trait_immortal_effect = yes
		
		save_event_target_as = immortality_potion_receiver
		
		if = {
			limit = {
				persistent_event_target:getting_immortality_potion = {
					character = ROOT
				}
				has_quest = quest_alchemist_immortality_potion
			}
			letter_event = { id = soh.11420 } # Quest completion
		}
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12020 } # Inform the alchemist
		}
	}
}

# Inform alchemist
character_event = {
	id = soh.12020
	desc = EVTDESC_SOH_12020
	picture = GFX_evt_religious_exultation
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12020 # Excellent!
		
		prestige = 1000
		
		if = {
			limit = {
				has_quest = quest_alchemist_immortality_potion
			}
			letter_event = { id = soh.11420 } # Quest completion
		}
	}
}

# Potion improved your health
character_event = {
	id = soh.12021
	desc = EVTDESC_SOH_12021
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		health = 2
	}
	
	option = {
		name = EVTOPTA_SOH_12021 # I'll take it!
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12022 } # Inform the alchemist
		}
		
		ai_chance = {
			factor = 90
			
			trigger = {
				NOR = {
					persistent_event_target:giving_me_immortality_potion = {
						is_rival = ROOT
					}
					trait = wroth
				}
			}
			
			mult_modifier = {
				factor = 0.5
				persistent_event_target:giving_me_immortality_potion = {
					NOR = {
						is_friend = ROOT
						is_lover = ROOT
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				persistent_event_target:giving_me_immortality_potion = {
					reverse_opinion = {
						who = ROOT
						value < 0
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = ambitious
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_12021 # This is not what I asked for!
		
		opinion = {
			who = persistent_event_target:giving_me_immortality_potion
			modifier = opinion_gave_me_bad_immortality_potion
		}
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12023 } # Inform the alchemist
		}
		
		ai_chance = {
			factor = 10
			
			mult_modifier = {
				factor = 0.1
				trait = kind
			}
			
			mult_modifier = {
				factor = 0.1
				trait = content
			}
			
			mult_modifier = {
				factor = 0.1
				trait = humble
			}
			
			mult_modifier = {
				factor = 10
				trait = proud
			}
		}
	}
}

# Inform alchemist - target did not care
character_event = {
	id = soh.12022
	desc = EVTDESC_SOH_12022
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12022 # Good to hear!
		
		prestige = 100
	}
}

# Inform alchemist - imprisonment reason
character_event = {
	id = soh.12023
	desc = EVTDESC_SOH_12023
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12023 # This might be bad...
	}
}

# Potion did nothing
character_event = {
	id = soh.12024
	desc = EVTDESC_SOH_12024
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12024 # I suppose it could have been worse...
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12025 } # Inform the alchemist
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					persistent_event_target:giving_me_immortality_potion = {
						is_rival = ROOT
					}
					trait = wroth
				}
			}
			
			mult_modifier = {
				factor = 0.5
				persistent_event_target:giving_me_immortality_potion = {
					NOR = {
						is_friend = ROOT
						is_lover = ROOT
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				persistent_event_target:giving_me_immortality_potion = {
					reverse_opinion = {
						who = ROOT
						value < 0
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = ambitious
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_12024 # This is not what I asked for!
		
		opinion = {
			who = persistent_event_target:giving_me_immortality_potion
			modifier = opinion_gave_me_bad_immortality_potion
		}
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12026 } # Inform the alchemist
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = kind
			}
			
			mult_modifier = {
				factor = 0.1
				trait = content
			}
			
			mult_modifier = {
				factor = 0.1
				trait = humble
			}
			
			mult_modifier = {
				factor = 10
				trait = proud
			}
		}
	}
}

# Inform alchemist - target did not care
character_event = {
	id = soh.12025
	desc = EVTDESC_SOH_12025
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12025 # Good to hear!
	}
}

# Inform alchemist - imprisonment reason
character_event = {
	id = soh.12026
	desc = EVTDESC_SOH_12026
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12026 # This might be bad...
	}
}

# Potion seems to have worsened your health
character_event = {
	id = soh.12027
	desc = EVTDESC_SOH_12027
	picture = GFX_evt_stressed_ruler
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		health = -2
	}
	
	option = {
		name = EVTOPTA_SOH_12027 # At least I am alive...
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12028 } # Inform the alchemist
		}
		
		ai_chance = {
			factor = 10
			
			trigger = {
				NOR = {
					persistent_event_target:giving_me_immortality_potion = {
						is_rival = ROOT
					}
					trait = wroth
				}
			}
			
			mult_modifier = {
				factor = 0.5
				persistent_event_target:giving_me_immortality_potion = {
					NOR = {
						is_friend = ROOT
						is_lover = ROOT
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				persistent_event_target:giving_me_immortality_potion = {
					reverse_opinion = {
						who = ROOT
						value < 0
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = ambitious
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_12027 # This is not what I asked for!
		
		opinion = {
			who = persistent_event_target:giving_me_immortality_potion
			modifier = opinion_gave_me_bad_immortality_potion
		}
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12029 } # Inform the alchemist
		}
		
		ai_chance = {
			factor = 90
			
			mult_modifier = {
				factor = 0.1
				trait = kind
			}
			
			mult_modifier = {
				factor = 0.1
				trait = content
			}
			
			mult_modifier = {
				factor = 0.1
				trait = humble
			}
			
			mult_modifier = {
				factor = 10
				trait = proud
			}
		}
	}
}

# Inform alchemist - target did not care
character_event = {
	id = soh.12028
	desc = EVTDESC_SOH_12028
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12028 # Good to hear!
	}
}

# Inform alchemist - imprisonment reason
character_event = {
	id = soh.12029
	desc = EVTDESC_SOH_12029
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12029 # This might be bad...
	}
}

# Potion seems to have made you quite mad
character_event = {
	id = soh.12030
	desc = EVTDESC_SOH_12030
	picture = GFX_evt_lunatic
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12030 # I think this is great!
		
		add_trait_lunatic_effect = yes
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12031 } # Inform the alchemist
		}
	}
}

# Inform alchemist - target has gone quite mad
character_event = {
	id = soh.12031
	desc = EVTDESC_SOH_12031
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12031 # I see...
	}
}

# Potion killed you
character_event = {
	id = soh.12032
	desc = EVTDESC_SOH_12032
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12032 # So it ends...
		
		opinion = {
			who = persistent_event_target:giving_me_immortality_potion
			modifier = opinion_fatal_immortality_potion # Inherited, gives imprisonment and execution reasons
		}
		
		death = {
			death_reason = death_immortality_potion
		}
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12033 } # Inform the alchemist
		}
	}
}

# Inform alchemist - potion killed target
character_event = {
	id = soh.12033
	desc = EVTDESC_SOH_12033
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12033 # I see...
	}
}

# Looping progress from the smaller installments
character_event = {
	id = soh.12034
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		NOR = {
			trait = kitsune
			trait = immortal
		}
	}
	
	immediate = {
		change_variable = {
			which = immortality_potion_installments
			value = 1
		}
		
		if = {
			limit = {
				check_variable = {
					which = immortality_potion_installments
					value < 10
				}
			}
			
			random_list = {
				25 = {
					mult_modifier = {
						factor = 2
						OR = {
							has_character_flag = consumed_immortality_potion_immortality
							has_character_flag = consumed_immortality_potion_health
						}
					}
					
					mult_modifier = {
						factor = 0.5
						OR = {
							has_character_flag = consumed_immortality_potion_harmful
							has_character_flag = consumed_immortality_potion_deadly
						}
					}
					
					change_variable = {
						which = immortality_potion_health_change
						value = 0.1
					}
					
					character_event = { id = soh.12035 } # You seem to be getting healthier
				}
				
				100 = {
					mult_modifier = {
						factor = 0.5
						OR = {
							has_character_flag = consumed_immortality_potion_harmful
							has_character_flag = consumed_immortality_potion_deadly
						}
					}
					
					character_event = { id = soh.12037 } # Nothing
				}
				
				25 = {
					mult_modifier = {
						factor = 2
						OR = {
							has_character_flag = consumed_immortality_potion_harmful
							has_character_flag = consumed_immortality_potion_deadly
						}
					}
					
					mult_modifier = {
						factor = 0.5
						OR = {
							has_character_flag = consumed_immortality_potion_immortality
							has_character_flag = consumed_immortality_potion_health
						}
					}
					
					change_variable = {
						which = immortality_potion_health_change
						value = -0.1
					}
					
					character_event = { id = soh.12043 } # You seem to be getting less healthy
				}
				
				25 = {
					trigger = {
						NOT = {
							has_character_flag = consumed_immortality_potion_mad
						}
					}
					
					mult_modifier = {
						factor = 2
						has_character_flag = consumed_immortality_potion_contains_ingredient_metal_exotic2
					}
					
					mult_modifier = {
						factor = 2
						has_character_flag = consumed_immortality_potion_contains_ingredient_mineral_1
					}
					
					set_character_flag = immortality_potion_lunatic
					
					character_event = { id = soh.12052 } # You have gone quite mad
				}
				
				25 = {
					trigger = {
						has_character_flag = consumed_immortality_potion_deadly
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = consumed_immortality_potion_quality
							value < 25
						}
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = consumed_immortality_potion_quality
							value < 0
						}
					}
					
					character_event = { id = soh.12054 } # You have died
				}
			}
		}
		
		else = {
			if = {
				limit = {
					check_variable = {
						which = immortality_potion_health_change
						value > 0
					}
				}
				
				while = {
					limit = {
						check_variable = {
							which = immortality_potion_health_change
							value > 0
						}
					}
					
					change_variable = {
						which = immortality_potion_health_change
						value = -0.1
					}
					
					health = -0.1
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = immortality_potion_health_change
						value < 0
					}
				}
				
				while = {
					limit = {
						check_variable = {
							which = immortality_potion_health_change
							value < 0
						}
					}
					
					change_variable = {
						which = immortality_potion_health_change
						value = 0.1
					}
					
					health = 0.1
				}
			}
			
			trigger_switch = {
				on_trigger = has_character_flag
				
				consumed_immortality_potion_immortality = { character_event = { id = soh.12056 } } # The potion worked!
				consumed_immortality_potion_health = { character_event = { id = soh.12058 } } # The potion improved your health
				consumed_immortality_potion_nothing = { character_event = { id = soh.12061 } } # The potion did nothing
				consumed_immortality_potion_harmful = { character_event = { id = soh.12064 } } # The potion worsened your health
				consumed_immortality_potion_mad = { character_event = { id = soh.12067 } } # The potion drove you mad
				consumed_immortality_potion_deadly = { character_event = { id = soh.12069 } } # The potion killed you
			}
		}
	}
}

# Progress update - your health seems to be improving
character_event = {
	id = soh.12035
	desc = EVTDESC_SOH_12035
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		health = 0.1
	}
	
	option = {
		name = EVTOPTA_SOH_12035 # That's great!
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12036 } # Inform the alchemist
		}
		
		character_event = { id = soh.12034 days = 10 random = 5 } # Keep going
	}
}

# Inform alchemist - target's health seems to be improving
character_event = {
	id = soh.12036
	desc = EVTDESC_SOH_12036
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12036 # That's good to know!
	}
}

# Progress update - nothing seems to have changed
character_event = {
	id = soh.12037
	desc = EVTDESC_SOH_12037
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12037 # I'm sure it'll change!
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12038 } # Inform the alchemist
		}
		
		character_event = { id = soh.12034 days = 10 random = 5 } # Keep going
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = paranoid
				}
			}
		}
	}
	
	option = {
		trigger = {
			persistent_event_target:giving_me_immortality_potion = {
				is_alive = yes
				is_inaccessible_or_incapable_trigger = no
			}
		}
		
		name = EVTOPTB_SOH_12037 # Why haven't I gotten better?
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12039 } # The alchemist is approached
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = trusting
				}
			}
		}
	}
	
	option = {
		trigger = {
			persistent_event_target:giving_me_immortality_potion = {
				OR = {
					is_alive = no
					is_inaccessible_or_incapable_trigger = yes
				}
			}
		}
		
		name = EVTOPTC_SOH_12037 # I should stop...
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12042 } # Inform alchemist
		}
		
		ai_chance = {
			factor = 0
		}
	}
}

# Inform alchemist - target seems unconcerned
character_event = {
	id = soh.12038
	desc = EVTDESC_SOH_12038
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12038 # I see...
	}
}

# Inform alchemist - target seems very concerned
character_event = {
	id = soh.12039
	desc = EVTDESC_SOH_12039
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12039 # Give it time!
		
		hidden_tooltip = {
			random_list = {
				50 = {
					trigger = {
						diplomacy >= 10
					}
					
					mult_modifier = {
						factor = 2
						diplomacy >= 15
					}
					
					mult_modifier = {
						factor = 2
						diplomacy >= 20
					}
					
					mult_modifier = {
						factor = 2
						diplomacy >= 25
					}
					
					FROM = {
						character_event = { id = soh.12040 days = 1 } # Alchemist was reassuring
					}
				}
				
				50 = {
					trigger = {
						diplomacy < 30
					}
					
					FROM = {
						character_event = { id = soh.12041 days = 1 } # Alchemist was not very reassuring
					}
				}
			}
		}
	}
}

# Alchemist is reassuring
character_event = {
	id = soh.12040
	desc = EVTDESC_SOH_12040
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12040 # That's good to hear!
		
		character_event = { id = soh.12034 days = 10 random = 5 } # Keep going
	}
	
	option = {
		name = EVTOPTB_SOH_12040 # I should stop...
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12042 } # Inform alchemist
		}
		
		ai_chance = {
			factor = 0
		}
	}
}

# Alchemist was not very reassuring
character_event = {
	id = soh.12041
	desc = EVTDESC_SOH_12041
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12041 # I might as well keep going...
		
		character_event = { id = soh.12034 days = 10 random = 5 } # Keep going
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = paranoid
				}
			}
			
			mult_modifier = {
				factor = 0.5
				trait = craven
			}
			
			mult_modifier = {
				factor = 0.5
				trait = content
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_12041 # I should stop...
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12042 } # Inform alchemist
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = trusting
				}
			}
			
			mult_modifier = {
				factor = 0.5
				trait = brave
			}
			
			mult_modifier = {
				factor = 0.5
				trait = ambitious
			}
		}
	}
}

# Inform alchemist - target decided to stop taking the potion
character_event = {
	id = soh.12042
	desc = EVTDESC_SOH_12042
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12042 # I see...
	}
}

# Progress update - your health seems to be worsening
character_event = {
	id = soh.12043
	desc = EVTDESC_SOH_12043
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		health = -0.1
	}
	
	option = {
		name = EVTOPTA_SOH_12043 # I'm sure it'll change!
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12044 } # Inform the alchemist
		}
		
		character_event = { id = soh.12034 days = 10 random = 5 } # Keep going
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = paranoid
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = craven
			}
		}
	}
	
	option = {
		trigger = {
			persistent_event_target:giving_me_immortality_potion = {
				is_alive = yes
				is_inaccessible_or_incapable_trigger = no
			}
		}
		
		name = EVTOPTB_SOH_12043 # Why have I gotten worse?
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12045 } # The alchemist is approached
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = trusting
				}
			}
		}
	}
	
	option = {
		trigger = {
			persistent_event_target:giving_me_immortality_potion = {
				is_alive = yes
			}
			trait = paranoid
		}
		
		name = EVTOPTC_SOH_12043 # You gave me a poison!
		
		opinion = {
			who = persistent_event_target:giving_me_immortality_potion
			modifier = opinion_gave_me_bad_immortality_potion_crime
		}
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12046 } # Inform alchemist
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 10
				trait = wroth
			}
			
			mult_modifier = {
				factor = 0.1
				trait = kind
			}
		}
	}
	
	option = {
		trigger = {
			persistent_event_target:giving_me_immortality_potion = {
				OR = {
					is_alive = no
					is_inaccessible_or_incapable_trigger = yes
				}
			}
		}
		
		name = EVTOPTD_SOH_12043 # I should stop...
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12050 } # Inform alchemist
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = brave
			}
		}
	}
}

# Inform alchemist - target seems unconcerned
character_event = {
	id = soh.12044
	desc = EVTDESC_SOH_12044
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12044 # I see...
	}
}

# Inform alchemist - target seems very concerned
character_event = {
	id = soh.12045
	desc = EVTDESC_SOH_12045
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12045 # Give it time!
		
		hidden_tooltip = {
			random_list = {
				50 = {
					trigger = {
						diplomacy >= 10
					}
					
					mult_modifier = {
						factor = 2
						diplomacy >= 15
					}
					
					mult_modifier = {
						factor = 2
						diplomacy >= 20
					}
					
					mult_modifier = {
						factor = 2
						diplomacy >= 25
					}
					
					FROM = {
						character_event = { id = soh.12047 days = 1 } # Alchemist was reassuring
					}
				}
				
				50 = {
					trigger = {
						diplomacy < 30
					}
					
					FROM = {
						character_event = { id = soh.12048 days = 1 } # Alchemist was not very reassuring
					}
				}
			}
		}
	}
}

# Inform alchemist - imprisonment reason
character_event = {
	id = soh.12046
	desc = EVTDESC_SOH_12046
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12046 # This is bad...
	}
}

# Alchemist is reassuring
character_event = {
	id = soh.12047
	desc = EVTDESC_SOH_12047
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12047 # That's good to hear!
		
		character_event = { id = soh.12034 days = 10 random = 5 } # Keep going
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = craven
			}
			
			mult_modifier = {
				factor = 0.1
				trait = paranoid
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_12047 # I should stop...
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12050 } # Inform alchemist
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = brave
			}
			
			mult_modifier = {
				factor = 0.1
				trait = trusting
			}
		}
	}
}

# Alchemist was not very reassuring
character_event = {
	id = soh.12048
	desc = EVTDESC_SOH_12048
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12048 # I might as well keep going...
		
		character_event = { id = soh.12034 days = 10 random = 5 } # Keep going
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = paranoid
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = craven
			}
			
			mult_modifier = {
				factor = 0.1
				trait = content
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_12048 # I should stop...
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12050 } # Inform alchemist
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = trusting
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = brave
			}
			
			mult_modifier = {
				factor = 0.1
				trait = ambitious
			}
		}
	}
	
	option = {
		trigger = {
			trait = paranoid
		}
		
		name = EVTOPTC_SOH_12048 # You gave me a poison!
		
		opinion = {
			who = persistent_event_target:giving_me_immortality_potion
			modifier = opinion_gave_me_bad_immortality_potion_crime
		}
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12051 } # Inform alchemist
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 10
				trait = wroth
			}
			
			mult_modifier = {
				factor = 0.1
				trait = kind
			}
		}
	}
}

# 12049 unused

# Inform alchemist - target decided to stop taking the potion
character_event = {
	id = soh.12050
	desc = EVTDESC_SOH_12050
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12050 # I see...
	}
}

# Inform alchemist - target decided to stop taking the poison and got an imprisonment reason
character_event = {
	id = soh.12051
	desc = EVTDESC_SOH_12051
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12051 # This is bad...
	}
}

# Progress update - you have gone quite mad
character_event = {
	id = soh.12052
	desc = EVTDESC_SOH_12052
	picture = GFX_evt_lunatic
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12052 # I think this is great!
		
		add_trait_lunatic_effect = yes
		
		character_event = { id = soh.12034 days = 10 random = 5 } # Keep going
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12053 } # Inform the alchemist
		}
	}
}

# Inform alchemist - target has gone quite mad
character_event = {
	id = soh.12053
	desc = EVTDESC_SOH_12053
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12053 # I see...
	}
}

# Progress update - you have died
character_event = {
	id = soh.12054
	desc = EVTDESC_SOH_12054
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12054 # So it ends...
		
		opinion = {
			who = persistent_event_target:giving_me_immortality_potion
			modifier = opinion_fatal_immortality_potion # Inherited, gives imprisonment and execution reasons
		}
		
		death = {
			death_reason = death_immortality_potion
		}
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12055 } # Inform the alchemist
		}
	}
}

# Inform alchemist - target died
character_event = {
	id = soh.12055
	desc = EVTDESC_SOH_12055
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12055 # I see...
	}
}

# Final sip - you are now immortal!
character_event = {
	id = soh.12056
	desc = EVTDESC_SOH_12056
	picture = GFX_evt_religious_exultation
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12056 # Excellent!
		
		add_trait_immortal_effect = yes
		
		save_event_target_as = immortality_potion_receiver
		
		if = {
			limit = {
				persistent_event_target:getting_immortality_potion = {
					character = ROOT
				}
				has_quest = quest_alchemist_immortality_potion
			}
			letter_event = { id = soh.11420 } # Quest completion
		}
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12057 } # Inform the alchemist
		}
	}
}

# Inform alchemist
character_event = {
	id = soh.12057
	desc = EVTDESC_SOH_12057
	picture = GFX_evt_religious_exultation
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12057 # Excellent!
		
		prestige = 1000
		
		if = {
			limit = {
				has_quest = quest_alchemist_immortality_potion
			}
			letter_event = { id = soh.11420 } # Quest completion
		}
	}
}

# Final sip - potion improved your health
character_event = {
	id = soh.12058
	desc = EVTDESC_SOH_12058
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		health = 2
	}
	
	option = {
		name = EVTOPTA_SOH_12058 # I'll take it!
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12059 } # Inform the alchemist
		}
		
		ai_chance = {
			factor = 90
			
			trigger = {
				NOR = {
					persistent_event_target:giving_me_immortality_potion = {
						is_rival = ROOT
					}
					trait = wroth
				}
			}
			
			mult_modifier = {
				factor = 0.5
				persistent_event_target:giving_me_immortality_potion = {
					NOR = {
						is_friend = ROOT
						is_lover = ROOT
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				persistent_event_target:giving_me_immortality_potion = {
					reverse_opinion = {
						who = ROOT
						value < 0
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = ambitious
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_12058 # This is not what I asked for!
		
		opinion = {
			who = persistent_event_target:giving_me_immortality_potion
			modifier = opinion_gave_me_bad_immortality_potion
		}
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12060 } # Inform the alchemist
		}
		
		ai_chance = {
			factor = 10
			
			mult_modifier = {
				factor = 0.1
				trait = kind
			}
			
			mult_modifier = {
				factor = 0.1
				trait = content
			}
			
			mult_modifier = {
				factor = 0.1
				trait = humble
			}
			
			mult_modifier = {
				factor = 10
				trait = proud
			}
		}
	}
}

# Inform alchemist - target did not care
character_event = {
	id = soh.12059
	desc = EVTDESC_SOH_12059
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12059 # Good to hear!
		
		prestige = 100
	}
}

# Inform alchemist - imprisonment reason
character_event = {
	id = soh.12060
	desc = EVTDESC_SOH_12060
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12060 # This might be bad...
	}
}

# Final sip - potion did nothing
character_event = {
	id = soh.12061
	desc = EVTDESC_SOH_12061
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12061 # I suppose it could have been worse...
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12062 } # Inform the alchemist
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					persistent_event_target:giving_me_immortality_potion = {
						is_rival = ROOT
					}
					trait = wroth
				}
			}
			
			mult_modifier = {
				factor = 0.5
				persistent_event_target:giving_me_immortality_potion = {
					NOR = {
						is_friend = ROOT
						is_lover = ROOT
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				persistent_event_target:giving_me_immortality_potion = {
					reverse_opinion = {
						who = ROOT
						value < 0
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = ambitious
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_12061 # This is not what I asked for!
		
		opinion = {
			who = persistent_event_target:giving_me_immortality_potion
			modifier = opinion_gave_me_bad_immortality_potion
		}
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12063 } # Inform the alchemist
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = kind
			}
			
			mult_modifier = {
				factor = 0.1
				trait = content
			}
			
			mult_modifier = {
				factor = 0.1
				trait = humble
			}
			
			mult_modifier = {
				factor = 10
				trait = proud
			}
		}
	}
}

# Inform alchemist - target did not care
character_event = {
	id = soh.12062
	desc = EVTDESC_SOH_12062
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12062 # Good to hear!
	}
}

# Inform alchemist - imprisonment reason
character_event = {
	id = soh.12063
	desc = EVTDESC_SOH_12063
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12063 # This might be bad...
	}
}

# Final sip - potion seems to have worsened your health
character_event = {
	id = soh.12064
	desc = EVTDESC_SOH_12064
	picture = GFX_evt_stressed_ruler
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		health = -2
	}
	
	option = {
		name = EVTOPTA_SOH_12064 # At least I am alive...
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12065 } # Inform the alchemist
		}
		
		ai_chance = {
			factor = 10
			
			trigger = {
				NOR = {
					persistent_event_target:giving_me_immortality_potion = {
						is_rival = ROOT
					}
					trait = wroth
				}
			}
			
			mult_modifier = {
				factor = 0.5
				persistent_event_target:giving_me_immortality_potion = {
					NOR = {
						is_friend = ROOT
						is_lover = ROOT
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				persistent_event_target:giving_me_immortality_potion = {
					reverse_opinion = {
						who = ROOT
						value < 0
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = ambitious
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_12064 # This is not what I asked for!
		
		opinion = {
			who = persistent_event_target:giving_me_immortality_potion
			modifier = opinion_gave_me_bad_immortality_potion
		}
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12066 } # Inform the alchemist
		}
		
		ai_chance = {
			factor = 90
			
			mult_modifier = {
				factor = 0.1
				trait = kind
			}
			
			mult_modifier = {
				factor = 0.1
				trait = content
			}
			
			mult_modifier = {
				factor = 0.1
				trait = humble
			}
			
			mult_modifier = {
				factor = 10
				trait = proud
			}
		}
	}
}

# Inform alchemist - target did not care
character_event = {
	id = soh.12065
	desc = EVTDESC_SOH_12065
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12065 # Good to hear!
	}
}

# Inform alchemist - imprisonment reason
character_event = {
	id = soh.12066
	desc = EVTDESC_SOH_12066
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12066 # This might be bad...
	}
}

# Final sip - potion seems to have made you quite mad
character_event = {
	id = soh.12067
	desc = EVTDESC_SOH_12067
	picture = GFX_evt_lunatic
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12067 # I think this is great!
		
		add_trait_lunatic_effect = yes
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12068 } # Inform the alchemist
		}
	}
}

# Inform alchemist - target has gone quite mad
character_event = {
	id = soh.12068
	desc = EVTDESC_SOH_12068
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12068 # I see...
	}
}

# Final sip - potion killed you
character_event = {
	id = soh.12069
	desc = EVTDESC_SOH_12069
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12069 # So it ends...
		
		opinion = {
			who = persistent_event_target:giving_me_immortality_potion
			modifier = opinion_fatal_immortality_potion # Inherited, gives imprisonment and execution reasons
		}
		
		death = {
			death_reason = death_immortality_potion
		}
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12070 } # Inform the alchemist
		}
	}
}

# Inform alchemist - potion killed target
character_event = {
	id = soh.12070
	desc = EVTDESC_SOH_12070
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12070 # I see...
	}
}

# Death of potion target
character_event = {
	id = soh.12071
	hide_window = yes
	
	is_triggered_only = yes # on_death
	
	has_character_flag = consuming_immortality_potion
	
	immediate = {
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12072 } # Inform alchemist
		}
	}
}

# Potion target died - inform alchemist
character_event = {
	id = soh.12072
	desc = EVTDESC_SOH_12072
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12072 # I see...
	}
}



### Placebo is ready

# Potion is ready
character_event = {
	id = soh.12073
	desc = EVTDESC_SOH_12073
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = target_alchemist
		
		finalize_immortality_potion_setup_placebo_effect = yes
	}
	
	option = {
		name = EVTOPTA_SOH_12073 # Time to deliver it!
		
		persistent_event_target:getting_immortality_potion = {
			character_event = { id = soh.12074 } # Potion delivered
		}
	}
}

# Target received potion
character_event = {
	id = soh.12074
	desc = EVTDESC_SOH_12074
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12074 # Time to drink it!
	
		hidden_tooltip = {
			set_variable = {
				which = consumed_immortality_potion_quality
				value = 0
			}
			
			while = {
				limit = {
					FROM = {
						NOT = {
							is_variable_equal = {
								which = immortality_potion_quality
								value = 0
							}
						}
					}
				}
				
				if = {
					limit = {
						FROM = {
							check_variable = {
								which = immortality_potion_quality
								value >= 100
							}
						}
					}
					
					FROM = {
						change_variable = {
							which = immortality_potion_quality
							value = -100
						}
					}
					
					change_variable = {
						which = consumed_immortality_potion_quality
						value = 100
					}
				}
				
				else_if = {
					limit = {
						FROM = {
							check_variable = {
								which = immortality_potion_quality
								value >= 10
							}
						}
					}
					
					FROM = {
						change_variable = {
							which = immortality_potion_quality
							value = -10
						}
					}
					
					change_variable = {
						which = consumed_immortality_potion_quality
						value = 10
					}
				}
				
				else_if = {
					limit = {
						FROM = {
							check_variable = {
								which = immortality_potion_quality
								value >= 1
							}
						}
					}
					
					FROM = {
						change_variable = {
							which = immortality_potion_quality
							value = -1
						}
					}
					
					change_variable = {
						which = consumed_immortality_potion_quality
						value = 1
					}
				}
				
				else_if = {
					limit = {
						FROM = {
							check_variable = {
								which = immortality_potion_quality
								value >= 0.05
							}
						}
					}
					
					FROM = {
						change_variable = {
							which = immortality_potion_quality
							value = -0.05
						}
					}
					
					change_variable = {
						which = consumed_immortality_potion_quality
						value = 0.05
					}
				}
				
				else_if = {
					limit = {
						FROM = {
							check_variable = {
								which = immortality_potion_quality
								value <= -100
							}
						}
					}
					
					FROM = {
						change_variable = {
							which = immortality_potion_quality
							value = 100
						}
					}
					
					change_variable = {
						which = consumed_immortality_potion_quality
						value = -100
					}
				}
				
				else_if = {
					limit = {
						FROM = {
							check_variable = {
								which = immortality_potion_quality
								value <= -10
							}
						}
					}
					
					FROM = {
						change_variable = {
							which = immortality_potion_quality
							value = 10
						}
					}
					
					change_variable = {
						which = consumed_immortality_potion_quality
						value = -10
					}
				}
				
				else_if = {
					limit = {
						FROM = {
							check_variable = {
								which = immortality_potion_quality
								value <= -1
							}
						}
					}
					
					FROM = {
						change_variable = {
							which = immortality_potion_quality
							value = 1
						}
					}
					
					change_variable = {
						which = consumed_immortality_potion_quality
						value = -1
					}
				}
				
				else = {
					FROM = {
						change_variable = {
							which = immortality_potion_quality
							value = 0.05
						}
					}
					
					change_variable = {
						which = consumed_immortality_potion_quality
						value = -0.05
					}
				}
			}
			
			copy_consumed_immortality_potion_ingredient_flags_effect = yes
		}
		
		FROM = {
			character_event = { id = soh.12075 } # Inform the alchemist
		}
		
		character_event = { id = soh.12077 } # Decide whether to drink it all at once or in installments
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					trait = depressed
					AND = {
						trait = craven
						trait = paranoid
					}
					AND = {
						is_rival = FROM
						NOT = {
							trait = trusting
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = craven
			}
			
			mult_modifier = {
				factor = 0.1
				trait = paranoid
			}
			
			mult_modifier = {
				factor = 0.1
				trait = content
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_12074 # It is too dangerous...
		
		FROM = {
			character_event = { id = soh.12076 } # Inform the alchemist
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					trait = brave
					trait = trusting
					NAND = {
						is_rival = FROM
						NOT = {
							trait = trusting
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = brave
			}
			
			mult_modifier = {
				factor = 0.1
				trait = trusting
			}
			
			mult_modifier = {
				factor = 0.1
				trait = ambitious
			}
		}
	}
}

# Target accepted potion
character_event = {
	id = soh.12075
	desc = EVTDESC_SOH_12075
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12075 # Let's hope it works out...
	}
}

# Target had second thoughts
character_event = {
	id = soh.12076
	desc = EVTDESC_SOH_12076
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12076 # Possibly for the best...
		
		opinion = {
			who = FROM
			modifier = opinion_wasted_immortality_potion
		}
		
		# TIANXIATODO: Cleanup
	}
}

# Drinking the potion - drink it all at once, or take a little at a time?
character_event = {
	id = soh.12077
	desc = EVTDESC_SOH_12077
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12077 # I will drink it all at once!
		
		custom_tooltip = {
			text = will_drink_the_immortality_potion_rapidly
			
			determine_final_immortality_potion_placebo_outcome_effect = yes
			
			character_event = { id = soh.12079 days = 1 } # Outcome revealed
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					trait = craven
					trait = patient
					trait = paranoid
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = craven
			}
			
			mult_modifier = {
				factor = 0.1
				trait = patient
			}
			
			mult_modifier = {
				factor = 0.1
				trait = paranoid
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_12077 # I will take a little at a time...
		
		custom_tooltip = {
			text = will_drink_the_immortality_potion_slowly
		
			determine_final_immortality_potion_placebo_outcome_effect = yes
			
			random_list = {
				20 = {
					set_variable = {
						which = immortality_potion_installments
						value = 0
					}
				}
				20 = {
					set_variable = {
						which = immortality_potion_installments
						value = 1
					}
				}
				20 = {
					set_variable = {
						which = immortality_potion_installments
						value = 3
					}
				}
				20 = {
					set_variable = {
						which = immortality_potion_installments
						value = 5
					}
				}
				20 = {
					set_variable = {
						which = immortality_potion_installments
						value = 7
					}
				}
			}
			
			set_variable = {
				which = immortality_potion_health_change
				value = 0
			}
			
			clr_character_flag = immortality_potion_lunatic
			
			character_event = { id = soh.12093 days = 10 random = 5 } # First installment
			
			persistent_event_target:giving_me_immortality_potion = {
				character_event = { id = soh.12078 days = 1 } # Inform alchemist - target is taking the potion in installments
			}
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					trait = brave
					trait = wroth
					trait = trusting
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = brave
			}
			
			mult_modifier = {
				factor = 0.1
				trait = wroth
			}
			
			mult_modifier = {
				factor = 0.1
				trait = trusting
			}
		}
	}
}

# Inform alchemist - target is taking the potion in installments
character_event = {
	id = soh.12078
	desc = EVTDESC_SOH_12078
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12078 # I see...
	}
}

# Determine the outcome - drank it all at once
character_event = {
	id = soh.12079
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		NOR = {
			trait = kitsune
			trait = immortal
		}
	}
	
	immediate = {
		trigger_switch = {
			on_trigger = has_character_flag
			
			consumed_immortality_potion_health = { character_event = { id = soh.12080 } } # The potion improved your health
			consumed_immortality_potion_nothing = { character_event = { id = soh.12083 } } # The potion did nothing
			consumed_immortality_potion_harmful = { character_event = { id = soh.12086 } } # The potion worsened your health
			consumed_immortality_potion_mad = { character_event = { id = soh.12089 } } # The potion drove you mad
			consumed_immortality_potion_deadly = { character_event = { id = soh.12091 } } # The potion killed you
		}
	}
}

# Potion improved your health
character_event = {
	id = soh.12080
	desc = EVTDESC_SOH_12080
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		health = 2
	}
	
	option = {
		name = EVTOPTA_SOH_12080 # I'll take it!
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12081 } # Inform the alchemist
		}
		
		ai_chance = {
			factor = 90
			
			trigger = {
				NOR = {
					persistent_event_target:giving_me_immortality_potion = {
						is_rival = ROOT
					}
					trait = wroth
				}
			}
			
			mult_modifier = {
				factor = 0.5
				persistent_event_target:giving_me_immortality_potion = {
					NOR = {
						is_friend = ROOT
						is_lover = ROOT
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				persistent_event_target:giving_me_immortality_potion = {
					reverse_opinion = {
						who = ROOT
						value < 0
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = ambitious
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_12080 # This is not what I asked for!
		
		opinion = {
			who = persistent_event_target:giving_me_immortality_potion
			modifier = opinion_gave_me_bad_immortality_potion
		}
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12082 } # Inform the alchemist
		}
		
		ai_chance = {
			factor = 10
			
			mult_modifier = {
				factor = 0.1
				trait = kind
			}
			
			mult_modifier = {
				factor = 0.1
				trait = content
			}
			
			mult_modifier = {
				factor = 0.1
				trait = humble
			}
			
			mult_modifier = {
				factor = 10
				trait = proud
			}
		}
	}
}

# Inform alchemist - target did not care
character_event = {
	id = soh.12081
	desc = EVTDESC_SOH_12081
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12081 # Good to hear!
		
		prestige = 100
	}
}

# Inform alchemist - imprisonment reason
character_event = {
	id = soh.12082
	desc = EVTDESC_SOH_12082
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12082 # This might be bad...
	}
}

# Potion did nothing
character_event = {
	id = soh.12083
	desc = EVTDESC_SOH_12083
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12083 # I suppose it could have been worse...
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12084 } # Inform the alchemist
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					persistent_event_target:giving_me_immortality_potion = {
						is_rival = ROOT
					}
					trait = wroth
				}
			}
			
			mult_modifier = {
				factor = 0.5
				persistent_event_target:giving_me_immortality_potion = {
					NOR = {
						is_friend = ROOT
						is_lover = ROOT
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				persistent_event_target:giving_me_immortality_potion = {
					reverse_opinion = {
						who = ROOT
						value < 0
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = ambitious
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_12083 # This is not what I asked for!
		
		opinion = {
			who = persistent_event_target:giving_me_immortality_potion
			modifier = opinion_gave_me_bad_immortality_potion
		}
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12085 } # Inform the alchemist
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = kind
			}
			
			mult_modifier = {
				factor = 0.1
				trait = content
			}
			
			mult_modifier = {
				factor = 0.1
				trait = humble
			}
			
			mult_modifier = {
				factor = 10
				trait = proud
			}
		}
	}
}

# Inform alchemist - target did not care
character_event = {
	id = soh.12084
	desc = EVTDESC_SOH_12084
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12084 # Good to hear!
	}
}

# Inform alchemist - imprisonment reason
character_event = {
	id = soh.12085
	desc = EVTDESC_SOH_12085
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12085 # This might be bad...
	}
}

# Potion seems to have worsened your health
character_event = {
	id = soh.12086
	desc = EVTDESC_SOH_12086
	picture = GFX_evt_stressed_ruler
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		health = -2
	}
	
	option = {
		name = EVTOPTA_SOH_12086 # At least I am alive...
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12087 } # Inform the alchemist
		}
		
		ai_chance = {
			factor = 10
			
			trigger = {
				NOR = {
					persistent_event_target:giving_me_immortality_potion = {
						is_rival = ROOT
					}
					trait = wroth
				}
			}
			
			mult_modifier = {
				factor = 0.5
				persistent_event_target:giving_me_immortality_potion = {
					NOR = {
						is_friend = ROOT
						is_lover = ROOT
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				persistent_event_target:giving_me_immortality_potion = {
					reverse_opinion = {
						who = ROOT
						value < 0
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = ambitious
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_12086 # This is not what I asked for!
		
		opinion = {
			who = persistent_event_target:giving_me_immortality_potion
			modifier = opinion_gave_me_bad_immortality_potion
		}
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12088 } # Inform the alchemist
		}
		
		ai_chance = {
			factor = 90
			
			mult_modifier = {
				factor = 0.1
				trait = kind
			}
			
			mult_modifier = {
				factor = 0.1
				trait = content
			}
			
			mult_modifier = {
				factor = 0.1
				trait = humble
			}
			
			mult_modifier = {
				factor = 10
				trait = proud
			}
		}
	}
}

# Inform alchemist - target did not care
character_event = {
	id = soh.12087
	desc = EVTDESC_SOH_12087
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12087 # Good to hear!
	}
}

# Inform alchemist - imprisonment reason
character_event = {
	id = soh.12088
	desc = EVTDESC_SOH_12088
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12088 # This might be bad...
	}
}

# Potion seems to have made you quite mad
character_event = {
	id = soh.12089
	desc = EVTDESC_SOH_12089
	picture = GFX_evt_lunatic
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12089 # I think this is great!
		
		add_trait_lunatic_effect = yes
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12090 } # Inform the alchemist
		}
	}
}

# Inform alchemist - target has gone quite mad
character_event = {
	id = soh.12090
	desc = EVTDESC_SOH_12090
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12090 # I see...
	}
}

# Potion killed you
character_event = {
	id = soh.12091
	desc = EVTDESC_SOH_12091
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12091 # So it ends...
		
		opinion = {
			who = persistent_event_target:giving_me_immortality_potion
			modifier = opinion_fatal_immortality_potion # Inherited, gives imprisonment and execution reasons
		}
		
		death = {
			death_reason = death_immortality_potion
		}
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12092 } # Inform the alchemist
		}
	}
}

# Inform alchemist - potion killed target
character_event = {
	id = soh.12092
	desc = EVTDESC_SOH_12092
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12092 # I see...
	}
}

# Looping progress from the smaller installments
character_event = {
	id = soh.12093
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		NOR = {
			trait = kitsune
			trait = immortal
		}
	}
	
	immediate = {
		change_variable = {
			which = immortality_potion_installments
			value = 1
		}
		
		if = {
			limit = {
				check_variable = {
					which = immortality_potion_installments
					value < 10
				}
			}
			
			random_list = {
				10 = {
					mult_modifier = {
						factor = 2
						has_character_flag = consumed_immortality_potion_health
					}
					
					mult_modifier = {
						factor = 0.5
						OR = {
							has_character_flag = consumed_immortality_potion_harmful
							has_character_flag = consumed_immortality_potion_deadly
						}
					}
					
					change_variable = {
						which = immortality_potion_health_change
						value = 0.1
					}
					
					character_event = { id = soh.12094 } # You seem to be getting healthier
				}
				
				100 = {
					mult_modifier = {
						factor = 0.5
						OR = {
							has_character_flag = consumed_immortality_potion_harmful
							has_character_flag = consumed_immortality_potion_deadly
						}
					}
					
					character_event = { id = soh.12096 } # Nothing
				}
				
				10 = {
					mult_modifier = {
						factor = 2
						OR = {
							has_character_flag = consumed_immortality_potion_harmful
							has_character_flag = consumed_immortality_potion_deadly
						}
					}
					
					mult_modifier = {
						factor = 0.5
						has_character_flag = consumed_immortality_potion_health
					}
					
					change_variable = {
						which = immortality_potion_health_change
						value = -0.1
					}
					
					character_event = { id = soh.12102 } # You seem to be getting less healthy
				}
				
				25 = {
					trigger = {
						NOT = {
							has_character_flag = consumed_immortality_potion_mad
						}
					}
					
					mult_modifier = {
						factor = 2
						has_character_flag = consumed_immortality_potion_contains_ingredient_metal_exotic2
					}
					
					mult_modifier = {
						factor = 2
						has_character_flag = consumed_immortality_potion_contains_ingredient_mineral_1
					}
					
					set_character_flag = immortality_potion_lunatic
					
					character_event = { id = soh.12111 } # You have gone quite mad
				}
				
				25 = {
					trigger = {
						has_character_flag = consumed_immortality_potion_deadly
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = consumed_immortality_potion_quality
							value < 25
						}
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = consumed_immortality_potion_quality
							value < 0
						}
					}
					
					character_event = { id = soh.12113 } # You have died
				}
			}
		}
		
		else = {
			if = {
				limit = {
					check_variable = {
						which = immortality_potion_health_change
						value > 0
					}
				}
				
				while = {
					limit = {
						check_variable = {
							which = immortality_potion_health_change
							value > 0
						}
					}
					
					change_variable = {
						which = immortality_potion_health_change
						value = -0.1
					}
					
					health = -0.1
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = immortality_potion_health_change
						value < 0
					}
				}
				
				while = {
					limit = {
						check_variable = {
							which = immortality_potion_health_change
							value < 0
						}
					}
					
					change_variable = {
						which = immortality_potion_health_change
						value = 0.1
					}
					
					health = 0.1
				}
			}
			
			trigger_switch = {
				on_trigger = has_character_flag
				
				consumed_immortality_potion_health = { character_event = { id = soh.12115 } } # The potion improved your health
				consumed_immortality_potion_nothing = { character_event = { id = soh.12118 } } # The potion did nothing
				consumed_immortality_potion_harmful = { character_event = { id = soh.12121 } } # The potion worsened your health
				consumed_immortality_potion_mad = { character_event = { id = soh.12124 } } # The potion drove you mad
				consumed_immortality_potion_deadly = { character_event = { id = soh.12126 } } # The potion killed you
			}
		}
	}
}

# Progress update - your health seems to be improving
character_event = {
	id = soh.12094
	desc = EVTDESC_SOH_12094
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		health = 0.1
	}
	
	option = {
		name = EVTOPTA_SOH_12094 # That's great!
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12095 } # Inform the alchemist
		}
		
		character_event = { id = soh.12093 days = 10 random = 5 } # Keep going
	}
}

# Inform alchemist - target's health seems to be improving
character_event = {
	id = soh.12095
	desc = EVTDESC_SOH_12095
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12095 # That's good to know!
	}
}

# Progress update - nothing seems to have changed
character_event = {
	id = soh.12096
	desc = EVTDESC_SOH_12096
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12096 # I'm sure it'll change!
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12097 } # Inform the alchemist
		}
		
		character_event = { id = soh.12093 days = 10 random = 5 } # Keep going
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = paranoid
				}
			}
		}
	}
	
	option = {
		trigger = {
			persistent_event_target:giving_me_immortality_potion = {
				is_alive = yes
				is_inaccessible_or_incapable_trigger = no
			}
		}
		
		name = EVTOPTB_SOH_12096 # Why haven't I gotten better?
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12098 } # The alchemist is approached
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = trusting
				}
			}
		}
	}
	
	option = {
		trigger = {
			persistent_event_target:giving_me_immortality_potion = {
				OR = {
					is_alive = no
					is_inaccessible_or_incapable_trigger = yes
				}
			}
		}
		
		name = EVTOPTC_SOH_12096 # I should stop...
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12101 } # Inform alchemist
		}
		
		ai_chance = {
			factor = 0
		}
	}
}

# Inform alchemist - target seems unconcerned
character_event = {
	id = soh.12097
	desc = EVTDESC_SOH_12097
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12097 # I see...
	}
}

# Inform alchemist - target seems very concerned
character_event = {
	id = soh.12098
	desc = EVTDESC_SOH_12098
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12098 # Give it time!
		
		hidden_tooltip = {
			random_list = {
				50 = {
					trigger = {
						intrigue >= 10
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 15
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 20
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 25
					}
					
					FROM = {
						character_event = { id = soh.12099 days = 1 } # Alchemist was reassuring
					}
				}
				
				50 = {
					trigger = {
						intrigue < 30
					}
					
					FROM = {
						character_event = { id = soh.12100 days = 1 } # Alchemist was not very reassuring
					}
				}
			}
		}
	}
}

# Alchemist is reassuring
character_event = {
	id = soh.12099
	desc = EVTDESC_SOH_12099
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12099 # That's good to hear!
		
		character_event = { id = soh.12093 days = 10 random = 5 } # Keep going
	}
	
	option = {
		name = EVTOPTB_SOH_12099 # I should stop...
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12101 } # Inform alchemist
		}
		
		ai_chance = {
			factor = 0
		}
	}
}

# Alchemist was not very reassuring
character_event = {
	id = soh.12100
	desc = EVTDESC_SOH_12100
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12100 # I might as well keep going...
		
		character_event = { id = soh.12093 days = 10 random = 5 } # Keep going
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = paranoid
				}
			}
			
			mult_modifier = {
				factor = 0.5
				trait = craven
			}
			
			mult_modifier = {
				factor = 0.5
				trait = content
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_12100 # I should stop...
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12101 } # Inform alchemist
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = trusting
				}
			}
			
			mult_modifier = {
				factor = 0.5
				trait = brave
			}
			
			mult_modifier = {
				factor = 0.5
				trait = ambitious
			}
		}
	}
}

# Inform alchemist - target decided to stop taking the potion
character_event = {
	id = soh.12101
	desc = EVTDESC_SOH_12101
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12101 # I see...
	}
}

# Progress update - your health seems to be worsening
character_event = {
	id = soh.12102
	desc = EVTDESC_SOH_12102
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		health = -0.1
	}
	
	option = {
		name = EVTOPTA_SOH_12102 # I'm sure it'll change!
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12103 } # Inform the alchemist
		}
		
		character_event = { id = soh.12093 days = 10 random = 5 } # Keep going
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = paranoid
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = craven
			}
		}
	}
	
	option = {
		trigger = {
			persistent_event_target:giving_me_immortality_potion = {
				is_alive = yes
				is_inaccessible_or_incapable_trigger = no
			}
		}
		
		name = EVTOPTB_SOH_12102 # Why have I gotten worse?
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12104 } # The alchemist is approached
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = trusting
				}
			}
		}
	}
	
	option = {
		trigger = {
			persistent_event_target:giving_me_immortality_potion = {
				is_alive = yes
			}
			trait = paranoid
		}
		
		name = EVTOPTC_SOH_12102 # You gave me a poison!
		
		opinion = {
			who = persistent_event_target:giving_me_immortality_potion
			modifier = opinion_gave_me_bad_immortality_potion_crime
		}
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12105 } # Inform alchemist
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 10
				trait = wroth
			}
			
			mult_modifier = {
				factor = 0.1
				trait = kind
			}
		}
	}
	
	option = {
		trigger = {
			persistent_event_target:giving_me_immortality_potion = {
				OR = {
					is_alive = no
					is_inaccessible_or_incapable_trigger = yes
				}
			}
		}
		
		name = EVTOPTD_SOH_12102 # I should stop...
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12109 } # Inform alchemist
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = brave
			}
		}
	}
}

# Inform alchemist - target seems unconcerned
character_event = {
	id = soh.12103
	desc = EVTDESC_SOH_12103
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12103 # I see...
	}
}

# Inform alchemist - target seems very concerned
character_event = {
	id = soh.12104
	desc = EVTDESC_SOH_12104
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12104 # Give it time!
		
		hidden_tooltip = {
			random_list = {
				50 = {
					trigger = {
						intrigue >= 10
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 15
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 20
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 25
					}
					
					FROM = {
						character_event = { id = soh.12106 days = 1 } # Alchemist was reassuring
					}
				}
				
				50 = {
					trigger = {
						intrigue < 30
					}
					
					FROM = {
						character_event = { id = soh.12107 days = 1 } # Alchemist was not very reassuring
					}
				}
			}
		}
	}
}

# Inform alchemist - imprisonment reason
character_event = {
	id = soh.12105
	desc = EVTDESC_SOH_12105
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12105 # This is bad...
	}
}

# Alchemist is reassuring
character_event = {
	id = soh.12106
	desc = EVTDESC_SOH_12106
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12106 # That's good to hear!
		
		character_event = { id = soh.12093 days = 10 random = 5 } # Keep going
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = craven
			}
			
			mult_modifier = {
				factor = 0.1
				trait = paranoid
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_12106 # I should stop...
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12109 } # Inform alchemist
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = brave
			}
			
			mult_modifier = {
				factor = 0.1
				trait = trusting
			}
		}
	}
}

# Alchemist was not very reassuring
character_event = {
	id = soh.12107
	desc = EVTDESC_SOH_12107
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12107 # I might as well keep going...
		
		character_event = { id = soh.12093 days = 10 random = 5 } # Keep going
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = paranoid
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = craven
			}
			
			mult_modifier = {
				factor = 0.1
				trait = content
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_12107 # I should stop...
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12109 } # Inform alchemist
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = trusting
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = brave
			}
			
			mult_modifier = {
				factor = 0.1
				trait = ambitious
			}
		}
	}
	
	option = {
		trigger = {
			trait = paranoid
		}
		
		name = EVTOPTC_SOH_12107 # You gave me a poison!
		
		opinion = {
			who = persistent_event_target:giving_me_immortality_potion
			modifier = opinion_gave_me_bad_immortality_potion_crime
		}
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12110 } # Inform alchemist
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 10
				trait = wroth
			}
			
			mult_modifier = {
				factor = 0.1
				trait = kind
			}
		}
	}
}

# 12108 unused

# Inform alchemist - target decided to stop taking the potion
character_event = {
	id = soh.12109
	desc = EVTDESC_SOH_12109
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12109 # I see...
	}
}

# Inform alchemist - target decided to stop taking the poison and got an imprisonment reason
character_event = {
	id = soh.12110
	desc = EVTDESC_SOH_12110
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12110 # This is bad...
	}
}

# Progress update - you have gone quite mad
character_event = {
	id = soh.12111
	desc = EVTDESC_SOH_12111
	picture = GFX_evt_lunatic
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12111 # I think this is great!
		
		add_trait_lunatic_effect = yes
		
		character_event = { id = soh.12093 days = 10 random = 5 } # Keep going
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12112 } # Inform the alchemist
		}
	}
}

# Inform alchemist - target has gone quite mad
character_event = {
	id = soh.12112
	desc = EVTDESC_SOH_12112
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12112 # I see...
	}
}

# Progress update - you have died
character_event = {
	id = soh.12113
	desc = EVTDESC_SOH_12113
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12113 # So it ends...
		
		opinion = {
			who = persistent_event_target:giving_me_immortality_potion
			modifier = opinion_fatal_immortality_potion # Inherited, gives imprisonment and execution reasons
		}
		
		death = {
			death_reason = death_immortality_potion
		}
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12114 } # Inform the alchemist
		}
	}
}

# Inform alchemist - target died
character_event = {
	id = soh.12114
	desc = EVTDESC_SOH_12114
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12114 # I see...
	}
}

# Final sip - potion improved your health
character_event = {
	id = soh.12115
	desc = EVTDESC_SOH_12115
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		health = 2
	}
	
	option = {
		name = EVTOPTA_SOH_12115 # I'll take it!
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12116 } # Inform the alchemist
		}
		
		ai_chance = {
			factor = 90
			
			trigger = {
				NOR = {
					persistent_event_target:giving_me_immortality_potion = {
						is_rival = ROOT
					}
					trait = wroth
				}
			}
			
			mult_modifier = {
				factor = 0.5
				persistent_event_target:giving_me_immortality_potion = {
					NOR = {
						is_friend = ROOT
						is_lover = ROOT
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				persistent_event_target:giving_me_immortality_potion = {
					reverse_opinion = {
						who = ROOT
						value < 0
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = ambitious
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_12115 # This is not what I asked for!
		
		opinion = {
			who = persistent_event_target:giving_me_immortality_potion
			modifier = opinion_gave_me_bad_immortality_potion
		}
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12117 } # Inform the alchemist
		}
		
		ai_chance = {
			factor = 10
			
			mult_modifier = {
				factor = 0.1
				trait = kind
			}
			
			mult_modifier = {
				factor = 0.1
				trait = content
			}
			
			mult_modifier = {
				factor = 0.1
				trait = humble
			}
			
			mult_modifier = {
				factor = 10
				trait = proud
			}
		}
	}
}

# Inform alchemist - target did not care
character_event = {
	id = soh.12116
	desc = EVTDESC_SOH_12116
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12116 # Good to hear!
		
		prestige = 100
	}
}

# Inform alchemist - imprisonment reason
character_event = {
	id = soh.12117
	desc = EVTDESC_SOH_12117
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12117 # This might be bad...
	}
}

# Final sip - potion did nothing
character_event = {
	id = soh.12118
	desc = EVTDESC_SOH_12118
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12118 # I suppose it could have been worse...
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12119 } # Inform the alchemist
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					persistent_event_target:giving_me_immortality_potion = {
						is_rival = ROOT
					}
					trait = wroth
				}
			}
			
			mult_modifier = {
				factor = 0.5
				persistent_event_target:giving_me_immortality_potion = {
					NOR = {
						is_friend = ROOT
						is_lover = ROOT
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				persistent_event_target:giving_me_immortality_potion = {
					reverse_opinion = {
						who = ROOT
						value < 0
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = ambitious
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_12118 # This is not what I asked for!
		
		opinion = {
			who = persistent_event_target:giving_me_immortality_potion
			modifier = opinion_gave_me_bad_immortality_potion
		}
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12120 } # Inform the alchemist
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = kind
			}
			
			mult_modifier = {
				factor = 0.1
				trait = content
			}
			
			mult_modifier = {
				factor = 0.1
				trait = humble
			}
			
			mult_modifier = {
				factor = 10
				trait = proud
			}
		}
	}
}

# Inform alchemist - target did not care
character_event = {
	id = soh.12119
	desc = EVTDESC_SOH_12119
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12119 # Good to hear!
	}
}

# Inform alchemist - imprisonment reason
character_event = {
	id = soh.12120
	desc = EVTDESC_SOH_12120
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12120 # This might be bad...
	}
}

# Final sip - potion seems to have worsened your health
character_event = {
	id = soh.12121
	desc = EVTDESC_SOH_12121
	picture = GFX_evt_stressed_ruler
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		health = -2
	}
	
	option = {
		name = EVTOPTA_SOH_12121 # At least I am alive...
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12122 } # Inform the alchemist
		}
		
		ai_chance = {
			factor = 10
			
			trigger = {
				NOR = {
					persistent_event_target:giving_me_immortality_potion = {
						is_rival = ROOT
					}
					trait = wroth
				}
			}
			
			mult_modifier = {
				factor = 0.5
				persistent_event_target:giving_me_immortality_potion = {
					NOR = {
						is_friend = ROOT
						is_lover = ROOT
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				persistent_event_target:giving_me_immortality_potion = {
					reverse_opinion = {
						who = ROOT
						value < 0
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = ambitious
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_12121 # This is not what I asked for!
		
		opinion = {
			who = persistent_event_target:giving_me_immortality_potion
			modifier = opinion_gave_me_bad_immortality_potion
		}
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12123 } # Inform the alchemist
		}
		
		ai_chance = {
			factor = 90
			
			mult_modifier = {
				factor = 0.1
				trait = kind
			}
			
			mult_modifier = {
				factor = 0.1
				trait = content
			}
			
			mult_modifier = {
				factor = 0.1
				trait = humble
			}
			
			mult_modifier = {
				factor = 10
				trait = proud
			}
		}
	}
}

# Inform alchemist - target did not care
character_event = {
	id = soh.12122
	desc = EVTDESC_SOH_12122
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12122 # Good to hear!
	}
}

# Inform alchemist - imprisonment reason
character_event = {
	id = soh.12123
	desc = EVTDESC_SOH_12123
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12123 # This might be bad...
	}
}

# Final sip - potion seems to have made you quite mad
character_event = {
	id = soh.12124
	desc = EVTDESC_SOH_12124
	picture = GFX_evt_lunatic
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12124 # I think this is great!
		
		add_trait_lunatic_effect = yes
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12125 } # Inform the alchemist
		}
	}
}

# Inform alchemist - target has gone quite mad
character_event = {
	id = soh.12125
	desc = EVTDESC_SOH_12125
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12125 # I see...
	}
}

# Final sip - potion killed you
character_event = {
	id = soh.12126
	desc = EVTDESC_SOH_12126
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12126 # So it ends...
		
		opinion = {
			who = persistent_event_target:giving_me_immortality_potion
			modifier = opinion_fatal_immortality_potion # Inherited, gives imprisonment and execution reasons
		}
		
		death = {
			death_reason = death_immortality_potion
		}
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12127 } # Inform the alchemist
		}
	}
}

# Inform alchemist - potion killed target
character_event = {
	id = soh.12127
	desc = EVTDESC_SOH_12127
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12127 # I see...
	}
}

# Death of potion target
character_event = {
	id = soh.12128
	hide_window = yes
	
	is_triggered_only = yes # on_death
	
	has_character_flag = consuming_immortality_potion
	
	immediate = {
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12129 } # Inform alchemist
		}
	}
}

# Potion target died - inform alchemist
character_event = {
	id = soh.12129
	desc = EVTDESC_SOH_12129
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12129 # I see...
	}
}



### Poison is ready - note that potion quality is inverted (high means more deadly)

# Potion is ready
character_event = {
	id = soh.12130
	desc = EVTDESC_SOH_12130
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = target_alchemist
		
		finalize_immortality_potion_setup_poison_effect = yes
	}
	
	option = {
		name = EVTOPTA_SOH_12130 # Time to deliver it!
		
		persistent_event_target:getting_immortality_potion = {
			character_event = { id = soh.12131 } # Potion delivered
		}
	}
}

# Target received potion
character_event = {
	id = soh.12131
	desc = EVTDESC_SOH_12131
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12131 # Time to drink it!
	
		hidden_tooltip = {
			set_variable = {
				which = consumed_immortality_potion_quality
				value = 0
			}
			
			while = {
				limit = {
					FROM = {
						NOT = {
							is_variable_equal = {
								which = immortality_potion_quality
								value = 0
							}
						}
					}
				}
				
				if = {
					limit = {
						FROM = {
							check_variable = {
								which = immortality_potion_quality
								value >= 100
							}
						}
					}
					
					FROM = {
						change_variable = {
							which = immortality_potion_quality
							value = -100
						}
					}
					
					change_variable = {
						which = consumed_immortality_potion_quality
						value = 100
					}
				}
				
				else_if = {
					limit = {
						FROM = {
							check_variable = {
								which = immortality_potion_quality
								value >= 10
							}
						}
					}
					
					FROM = {
						change_variable = {
							which = immortality_potion_quality
							value = -10
						}
					}
					
					change_variable = {
						which = consumed_immortality_potion_quality
						value = 10
					}
				}
				
				else_if = {
					limit = {
						FROM = {
							check_variable = {
								which = immortality_potion_quality
								value >= 1
							}
						}
					}
					
					FROM = {
						change_variable = {
							which = immortality_potion_quality
							value = -1
						}
					}
					
					change_variable = {
						which = consumed_immortality_potion_quality
						value = 1
					}
				}
				
				else_if = {
					limit = {
						FROM = {
							check_variable = {
								which = immortality_potion_quality
								value >= 0.05
							}
						}
					}
					
					FROM = {
						change_variable = {
							which = immortality_potion_quality
							value = -0.05
						}
					}
					
					change_variable = {
						which = consumed_immortality_potion_quality
						value = 0.05
					}
				}
				
				else_if = {
					limit = {
						FROM = {
							check_variable = {
								which = immortality_potion_quality
								value <= -100
							}
						}
					}
					
					FROM = {
						change_variable = {
							which = immortality_potion_quality
							value = 100
						}
					}
					
					change_variable = {
						which = consumed_immortality_potion_quality
						value = -100
					}
				}
				
				else_if = {
					limit = {
						FROM = {
							check_variable = {
								which = immortality_potion_quality
								value <= -10
							}
						}
					}
					
					FROM = {
						change_variable = {
							which = immortality_potion_quality
							value = 10
						}
					}
					
					change_variable = {
						which = consumed_immortality_potion_quality
						value = -10
					}
				}
				
				else_if = {
					limit = {
						FROM = {
							check_variable = {
								which = immortality_potion_quality
								value <= -1
							}
						}
					}
					
					FROM = {
						change_variable = {
							which = immortality_potion_quality
							value = 1
						}
					}
					
					change_variable = {
						which = consumed_immortality_potion_quality
						value = -1
					}
				}
				
				else = {
					FROM = {
						change_variable = {
							which = immortality_potion_quality
							value = 0.05
						}
					}
					
					change_variable = {
						which = consumed_immortality_potion_quality
						value = -0.05
					}
				}
			}
			
			copy_consumed_immortality_potion_ingredient_flags_effect = yes
		}
		
		FROM = {
			character_event = { id = soh.12132 } # Inform the alchemist
		}
		
		character_event = { id = soh.12134 } # Decide whether to drink it all at once or in installments
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					trait = depressed
					AND = {
						trait = craven
						trait = paranoid
					}
					AND = {
						is_rival = FROM
						NOT = {
							trait = trusting
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = craven
			}
			
			mult_modifier = {
				factor = 0.1
				trait = paranoid
			}
			
			mult_modifier = {
				factor = 0.1
				trait = content
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_12131 # It is too dangerous...
		
		FROM = {
			character_event = { id = soh.12133 } # Inform the alchemist
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					trait = brave
					trait = trusting
					NAND = {
						is_rival = FROM
						NOT = {
							trait = trusting
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = brave
			}
			
			mult_modifier = {
				factor = 0.1
				trait = trusting
			}
			
			mult_modifier = {
				factor = 0.1
				trait = ambitious
			}
		}
	}
}

# Target accepted potion
character_event = {
	id = soh.12132
	desc = EVTDESC_SOH_12132
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12132 # Let's hope it works out...
	}
}

# Target had second thoughts
character_event = {
	id = soh.12133
	desc = EVTDESC_SOH_12133
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12133 # Possibly for the best...
		
		opinion = {
			who = FROM
			modifier = opinion_wasted_immortality_potion
		}
		
		# TIANXIATODO: Cleanup
	}
}

# Drinking the potion - drink it all at once, or take a little at a time?
character_event = {
	id = soh.12134
	desc = EVTDESC_SOH_12134
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12134 # I will drink it all at once!
		
		custom_tooltip = {
			text = will_drink_the_immortality_potion_rapidly
			
			determine_final_immortality_potion_poison_outcome_effect = yes
			
			character_event = { id = soh.12136 days = 1 } # Outcome revealed
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					trait = craven
					trait = patient
					trait = paranoid
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = craven
			}
			
			mult_modifier = {
				factor = 0.1
				trait = patient
			}
			
			mult_modifier = {
				factor = 0.1
				trait = paranoid
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_12134 # I will take a little at a time...
		
		custom_tooltip = {
			text = will_drink_the_immortality_potion_slowly
		
			determine_final_immortality_potion_poison_outcome_effect = yes
			
			random_list = {
				20 = {
					set_variable = {
						which = immortality_potion_installments
						value = 0
					}
				}
				20 = {
					set_variable = {
						which = immortality_potion_installments
						value = 1
					}
				}
				20 = {
					set_variable = {
						which = immortality_potion_installments
						value = 3
					}
				}
				20 = {
					set_variable = {
						which = immortality_potion_installments
						value = 5
					}
				}
				20 = {
					set_variable = {
						which = immortality_potion_installments
						value = 7
					}
				}
			}
			
			set_variable = {
				which = immortality_potion_health_change
				value = 0
			}
			
			clr_character_flag = immortality_potion_lunatic
			
			character_event = { id = soh.12150 days = 10 random = 5 } # First installment
			
			persistent_event_target:giving_me_immortality_potion = {
				character_event = { id = soh.12135 days = 1 } # Inform alchemist - target is taking the potion in installments
			}
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					trait = brave
					trait = wroth
					trait = trusting
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = brave
			}
			
			mult_modifier = {
				factor = 0.1
				trait = wroth
			}
			
			mult_modifier = {
				factor = 0.1
				trait = trusting
			}
		}
	}
}

# Inform alchemist - target is taking the potion in installments
character_event = {
	id = soh.12135
	desc = EVTDESC_SOH_12135
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12135 # I see...
	}
}

# Determine the outcome - drank it all at once
character_event = {
	id = soh.12136
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		NOR = {
			trait = kitsune
			trait = immortal
		}
	}
	
	immediate = {
		trigger_switch = {
			on_trigger = has_character_flag
			
			consumed_immortality_potion_health = { character_event = { id = soh.12137 } } # The potion improved your health
			consumed_immortality_potion_nothing = { character_event = { id = soh.12140 } } # The potion did nothing
			consumed_immortality_potion_harmful = { character_event = { id = soh.12143 } } # The potion worsened your health
			consumed_immortality_potion_mad = { character_event = { id = soh.12146 } } # The potion drove you mad
			consumed_immortality_potion_deadly = { character_event = { id = soh.12148 } } # The potion killed you
		}
	}
}

# Potion improved your health
character_event = {
	id = soh.12137
	desc = EVTDESC_SOH_12137
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		health = 2
	}
	
	option = {
		name = EVTOPTA_SOH_12137 # I'll take it!
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12138 } # Inform the alchemist
		}
		
		ai_chance = {
			factor = 90
			
			trigger = {
				NOR = {
					persistent_event_target:giving_me_immortality_potion = {
						is_rival = ROOT
					}
					trait = wroth
				}
			}
			
			mult_modifier = {
				factor = 0.5
				persistent_event_target:giving_me_immortality_potion = {
					NOR = {
						is_friend = ROOT
						is_lover = ROOT
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				persistent_event_target:giving_me_immortality_potion = {
					reverse_opinion = {
						who = ROOT
						value < 0
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = ambitious
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_12137 # This is not what I asked for!
		
		opinion = {
			who = persistent_event_target:giving_me_immortality_potion
			modifier = opinion_gave_me_bad_immortality_potion
		}
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12139 } # Inform the alchemist
		}
		
		ai_chance = {
			factor = 10
			
			mult_modifier = {
				factor = 0.1
				trait = kind
			}
			
			mult_modifier = {
				factor = 0.1
				trait = content
			}
			
			mult_modifier = {
				factor = 0.1
				trait = humble
			}
			
			mult_modifier = {
				factor = 10
				trait = proud
			}
		}
	}
}

# Inform alchemist - target did not care
character_event = {
	id = soh.12138
	desc = EVTDESC_SOH_12138
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12138 # Not my preferred outcome...
		
		prestige = 100
	}
}

# Inform alchemist - imprisonment reason
character_event = {
	id = soh.12139
	desc = EVTDESC_SOH_12139
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12139 # This might be bad...
	}
}

# Potion did nothing
character_event = {
	id = soh.12140
	desc = EVTDESC_SOH_12140
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12140 # I suppose it could have been worse...
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12141 } # Inform the alchemist
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					persistent_event_target:giving_me_immortality_potion = {
						is_rival = ROOT
					}
					trait = wroth
				}
			}
			
			mult_modifier = {
				factor = 0.5
				persistent_event_target:giving_me_immortality_potion = {
					NOR = {
						is_friend = ROOT
						is_lover = ROOT
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				persistent_event_target:giving_me_immortality_potion = {
					reverse_opinion = {
						who = ROOT
						value < 0
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = ambitious
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_12140 # This is not what I asked for!
		
		opinion = {
			who = persistent_event_target:giving_me_immortality_potion
			modifier = opinion_gave_me_bad_immortality_potion
		}
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12142 } # Inform the alchemist
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = kind
			}
			
			mult_modifier = {
				factor = 0.1
				trait = content
			}
			
			mult_modifier = {
				factor = 0.1
				trait = humble
			}
			
			mult_modifier = {
				factor = 10
				trait = proud
			}
		}
	}
}

# Inform alchemist - target did not care
character_event = {
	id = soh.12141
	desc = EVTDESC_SOH_12141
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12141 # I see...
	}
}

# Inform alchemist - imprisonment reason
character_event = {
	id = soh.12142
	desc = EVTDESC_SOH_12142
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12142 # This might be bad...
	}
}

# Potion seems to have worsened your health
character_event = {
	id = soh.12143
	desc = EVTDESC_SOH_12143
	picture = GFX_evt_stressed_ruler
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		health = -2
	}
	
	option = {
		name = EVTOPTA_SOH_12143 # At least I am alive...
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12144 } # Inform the alchemist
		}
		
		ai_chance = {
			factor = 10
			
			trigger = {
				NOR = {
					persistent_event_target:giving_me_immortality_potion = {
						is_rival = ROOT
					}
					trait = wroth
				}
			}
			
			mult_modifier = {
				factor = 0.5
				persistent_event_target:giving_me_immortality_potion = {
					NOR = {
						is_friend = ROOT
						is_lover = ROOT
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				persistent_event_target:giving_me_immortality_potion = {
					reverse_opinion = {
						who = ROOT
						value < 0
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = ambitious
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_12143 # This is not what I asked for!
		
		opinion = {
			who = persistent_event_target:giving_me_immortality_potion
			modifier = opinion_gave_me_bad_immortality_potion
		}
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12145 } # Inform the alchemist
		}
		
		ai_chance = {
			factor = 90
			
			mult_modifier = {
				factor = 0.1
				trait = kind
			}
			
			mult_modifier = {
				factor = 0.1
				trait = content
			}
			
			mult_modifier = {
				factor = 0.1
				trait = humble
			}
			
			mult_modifier = {
				factor = 10
				trait = proud
			}
		}
	}
}

# Inform alchemist - target did not care
character_event = {
	id = soh.12144
	desc = EVTDESC_SOH_12144
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12144 # Not quite what I wanted...
	}
}

# Inform alchemist - imprisonment reason
character_event = {
	id = soh.12145
	desc = EVTDESC_SOH_12145
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12145 # This might be bad...
	}
}

# Potion seems to have made you quite mad
character_event = {
	id = soh.12146
	desc = EVTDESC_SOH_12146
	picture = GFX_evt_lunatic
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12146 # I think this is great!
		
		add_trait_lunatic_effect = yes
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12147 } # Inform the alchemist
		}
	}
}

# Inform alchemist - target has gone quite mad
character_event = {
	id = soh.12147
	desc = EVTDESC_SOH_12147
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12147 # I see...
	}
}

# Potion killed you
character_event = {
	id = soh.12148
	desc = EVTDESC_SOH_12148
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12148 # So it ends...
		
		opinion = {
			who = persistent_event_target:giving_me_immortality_potion
			modifier = opinion_fatal_immortality_potion # Inherited, gives imprisonment and execution reasons
		}
		
		death = {
			death_reason = death_immortality_potion
		}
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12149 } # Inform the alchemist
		}
	}
}

# Inform alchemist - potion killed target
character_event = {
	id = soh.12149
	desc = EVTDESC_SOH_12149
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12149 # Excellent!
	}
}

# Looping progress from the smaller installments
character_event = {
	id = soh.12150
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		NOR = {
			trait = kitsune
			trait = immortal
		}
	}
	
	immediate = {
		change_variable = {
			which = immortality_potion_installments
			value = 1
		}
		
		if = {
			limit = {
				check_variable = {
					which = immortality_potion_installments
					value < 10
				}
			}
			
			random_list = {
				10 = {
					mult_modifier = {
						factor = 2
						has_character_flag = consumed_immortality_potion_health
					}
					
					mult_modifier = {
						factor = 0.5
						OR = {
							has_character_flag = consumed_immortality_potion_harmful
							has_character_flag = consumed_immortality_potion_deadly
						}
					}
					
					change_variable = {
						which = immortality_potion_health_change
						value = 0.1
					}
					
					character_event = { id = soh.12151 } # You seem to be getting healthier
				}
				
				100 = {
					mult_modifier = {
						factor = 0.5
						OR = {
							has_character_flag = consumed_immortality_potion_harmful
							has_character_flag = consumed_immortality_potion_deadly
						}
					}
					
					character_event = { id = soh.12153 } # Nothing
				}
				
				10 = {
					mult_modifier = {
						factor = 2
						OR = {
							has_character_flag = consumed_immortality_potion_harmful
							has_character_flag = consumed_immortality_potion_deadly
						}
					}
					
					mult_modifier = {
						factor = 0.5
						has_character_flag = consumed_immortality_potion_health
					}
					
					change_variable = {
						which = immortality_potion_health_change
						value = -0.1
					}
					
					character_event = { id = soh.12159 } # You seem to be getting less healthy
				}
				
				25 = {
					trigger = {
						NOT = {
							has_character_flag = consumed_immortality_potion_mad
						}
					}
					
					mult_modifier = {
						factor = 2
						has_character_flag = consumed_immortality_potion_contains_ingredient_metal_exotic2
					}
					
					mult_modifier = {
						factor = 2
						has_character_flag = consumed_immortality_potion_contains_ingredient_mineral_1
					}
					
					set_character_flag = immortality_potion_lunatic
					
					character_event = { id = soh.12167 } # You have gone quite mad
				}
				
				25 = {
					trigger = {
						has_character_flag = consumed_immortality_potion_deadly
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = consumed_immortality_potion_quality
							value > 100
						}
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = consumed_immortality_potion_quality
							value > 75
						}
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = consumed_immortality_potion_quality
							value > 50
						}
					}
					
					character_event = { id = soh.12169 } # You have died
				}
			}
		}
		
		else = {
			if = {
				limit = {
					check_variable = {
						which = immortality_potion_health_change
						value > 0
					}
				}
				
				while = {
					limit = {
						check_variable = {
							which = immortality_potion_health_change
							value > 0
						}
					}
					
					change_variable = {
						which = immortality_potion_health_change
						value = -0.1
					}
					
					health = -0.1
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = immortality_potion_health_change
						value < 0
					}
				}
				
				while = {
					limit = {
						check_variable = {
							which = immortality_potion_health_change
							value < 0
						}
					}
					
					change_variable = {
						which = immortality_potion_health_change
						value = 0.1
					}
					
					health = 0.1
				}
			}
			
			trigger_switch = {
				on_trigger = has_character_flag
				
				consumed_immortality_potion_health = { character_event = { id = soh.12171 } } # The potion improved your health
				consumed_immortality_potion_nothing = { character_event = { id = soh.12174 } } # The potion did nothing
				consumed_immortality_potion_harmful = { character_event = { id = soh.12177 } } # The potion worsened your health
				consumed_immortality_potion_mad = { character_event = { id = soh.12180 } } # The potion drove you mad
				consumed_immortality_potion_deadly = { character_event = { id = soh.12182 } } # The potion killed you
			}
		}
	}
}

# Progress update - your health seems to be improving
character_event = {
	id = soh.12151
	desc = EVTDESC_SOH_12151
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		health = 0.1
	}
	
	option = {
		name = EVTOPTA_SOH_12151 # That's great!
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12152 } # Inform the alchemist
		}
		
		character_event = { id = soh.12150 days = 10 random = 5 } # Keep going
	}
}

# Inform alchemist - target's health seems to be improving
character_event = {
	id = soh.12152
	desc = EVTDESC_SOH_12152
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12152 # Not as planned, that...
	}
}

# Progress update - nothing seems to have changed
character_event = {
	id = soh.12153
	desc = EVTDESC_SOH_12153
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12153 # I'm sure it'll change!
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12154 } # Inform the alchemist
		}
		
		character_event = { id = soh.12150 days = 10 random = 5 } # Keep going
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = paranoid
				}
			}
		}
	}
	
	option = {
		trigger = {
			persistent_event_target:giving_me_immortality_potion = {
				is_alive = yes
				is_inaccessible_or_incapable_trigger = no
			}
		}
		
		name = EVTOPTB_SOH_12153 # Why haven't I gotten better?
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12155 } # The alchemist is approached
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = trusting
				}
			}
		}
	}
	
	option = {
		trigger = {
			persistent_event_target:giving_me_immortality_potion = {
				OR = {
					is_alive = no
					is_inaccessible_or_incapable_trigger = yes
				}
			}
		}
		
		name = EVTOPTC_SOH_12153 # I should stop...
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12158 } # Inform alchemist
		}
		
		ai_chance = {
			factor = 0
		}
	}
}

# Inform alchemist - target seems unconcerned
character_event = {
	id = soh.12154
	desc = EVTDESC_SOH_12154
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12154 # I see...
	}
}

# Inform alchemist - target seems very concerned
character_event = {
	id = soh.12155
	desc = EVTDESC_SOH_12155
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12155 # Give it time!
		
		hidden_tooltip = {
			random_list = {
				50 = {
					trigger = {
						intrigue >= 10
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 15
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 20
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 25
					}
					
					FROM = {
						character_event = { id = soh.12156 days = 1 } # Alchemist was reassuring
					}
				}
				
				50 = {
					trigger = {
						intrigue < 30
					}
					
					FROM = {
						character_event = { id = soh.12157 days = 1 } # Alchemist was not very reassuring
					}
				}
			}
		}
	}
}

# Alchemist is reassuring
character_event = {
	id = soh.12156
	desc = EVTDESC_SOH_12156
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12156 # That's good to hear!
		
		character_event = { id = soh.12150 days = 10 random = 5 } # Keep going
	}
	
	option = {
		name = EVTOPTB_SOH_12156 # I should stop...
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12158 } # Inform alchemist
		}
		
		ai_chance = {
			factor = 0
		}
	}
}

# Alchemist was not very reassuring
character_event = {
	id = soh.12157
	desc = EVTDESC_SOH_12157
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12157 # I might as well keep going...
		
		character_event = { id = soh.12150 days = 10 random = 5 } # Keep going
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = paranoid
				}
			}
			
			mult_modifier = {
				factor = 0.5
				trait = craven
			}
			
			mult_modifier = {
				factor = 0.5
				trait = content
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_12157 # I should stop...
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12158 } # Inform alchemist
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = trusting
				}
			}
			
			mult_modifier = {
				factor = 0.5
				trait = brave
			}
			
			mult_modifier = {
				factor = 0.5
				trait = ambitious
			}
		}
	}
}

# Inform alchemist - target decided to stop taking the potion
character_event = {
	id = soh.12158
	desc = EVTDESC_SOH_12158
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12158 # I see...
	}
}

# Progress update - your health seems to be worsening
character_event = {
	id = soh.12159
	desc = EVTDESC_SOH_12159
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		health = -0.1
	}
	
	option = {
		name = EVTOPTA_SOH_12159 # I'm sure it'll change!
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12160 } # Inform the alchemist
		}
		
		character_event = { id = soh.12150 days = 10 random = 5 } # Keep going
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = paranoid
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = craven
			}
		}
	}
	
	option = {
		trigger = {
			persistent_event_target:giving_me_immortality_potion = {
				is_alive = yes
				is_inaccessible_or_incapable_trigger = no
			}
		}
		
		name = EVTOPTB_SOH_12159 # Why have I gotten worse?
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12161 } # The alchemist is approached
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = trusting
				}
			}
		}
	}
	
	option = {
		trigger = {
			persistent_event_target:giving_me_immortality_potion = {
				is_alive = yes
			}
			trait = paranoid
		}
		
		name = EVTOPTC_SOH_12159 # You gave me a poison!
		
		opinion = {
			who = persistent_event_target:giving_me_immortality_potion
			modifier = opinion_gave_me_bad_immortality_potion_crime
		}
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12162 } # Inform alchemist
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 10
				trait = wroth
			}
			
			mult_modifier = {
				factor = 0.1
				trait = kind
			}
		}
	}
	
	option = {
		trigger = {
			persistent_event_target:giving_me_immortality_potion = {
				OR = {
					is_alive = no
					is_inaccessible_or_incapable_trigger = yes
				}
			}
		}
		
		name = EVTOPTD_SOH_12159 # I should stop...
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12165 } # Inform alchemist
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = brave
			}
		}
	}
}

# Inform alchemist - target seems unconcerned
character_event = {
	id = soh.12160
	desc = EVTDESC_SOH_12160
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12160 # Good! Good!
	}
}

# Inform alchemist - target seems very concerned
character_event = {
	id = soh.12161
	desc = EVTDESC_SOH_12161
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12161 # Give it time!
		
		hidden_tooltip = {
			random_list = {
				50 = {
					trigger = {
						intrigue >= 10
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 15
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 20
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 25
					}
					
					FROM = {
						character_event = { id = soh.12163 days = 1 } # Alchemist was reassuring
					}
				}
				
				50 = {
					trigger = {
						intrigue < 30
					}
					
					FROM = {
						character_event = { id = soh.12164 days = 1 } # Alchemist was not very reassuring
					}
				}
			}
		}
	}
}

# Inform alchemist - imprisonment reason
character_event = {
	id = soh.12162
	desc = EVTDESC_SOH_12162
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12162 # This is bad...
	}
}

# Alchemist is reassuring
character_event = {
	id = soh.12163
	desc = EVTDESC_SOH_12163
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12163 # That's good to hear!
		
		character_event = { id = soh.12150 days = 10 random = 5 } # Keep going
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = craven
			}
			
			mult_modifier = {
				factor = 0.1
				trait = paranoid
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_12163 # I should stop...
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12165 } # Inform alchemist
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = brave
			}
			
			mult_modifier = {
				factor = 0.1
				trait = trusting
			}
		}
	}
}

# Alchemist was not very reassuring
character_event = {
	id = soh.12164
	desc = EVTDESC_SOH_12164
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12164 # I might as well keep going...
		
		character_event = { id = soh.12150 days = 10 random = 5 } # Keep going
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = paranoid
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = craven
			}
			
			mult_modifier = {
				factor = 0.1
				trait = content
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_12164 # I should stop...
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12165 } # Inform alchemist
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = trusting
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = brave
			}
			
			mult_modifier = {
				factor = 0.1
				trait = ambitious
			}
		}
	}
	
	option = {
		trigger = {
			trait = paranoid
		}
		
		name = EVTOPTC_SOH_12164 # You gave me a poison!
		
		opinion = {
			who = persistent_event_target:giving_me_immortality_potion
			modifier = opinion_gave_me_bad_immortality_potion_crime
		}
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12166 } # Inform alchemist
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 10
				trait = wroth
			}
			
			mult_modifier = {
				factor = 0.1
				trait = kind
			}
		}
	}
}

# Inform alchemist - target decided to stop taking the potion
character_event = {
	id = soh.12165
	desc = EVTDESC_SOH_12165
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12165 # I see...
	}
}

# Inform alchemist - target decided to stop taking the poison and got an imprisonment reason
character_event = {
	id = soh.12166
	desc = EVTDESC_SOH_12166
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12166 # This is bad...
	}
}

# Progress update - you have gone quite mad
character_event = {
	id = soh.12167
	desc = EVTDESC_SOH_12167
	picture = GFX_evt_lunatic
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12167 # I think this is great!
		
		add_trait_lunatic_effect = yes
		
		character_event = { id = soh.12150 days = 10 random = 5 } # Keep going
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12168 } # Inform the alchemist
		}
	}
}

# Inform alchemist - target has gone quite mad
character_event = {
	id = soh.12168
	desc = EVTDESC_SOH_12168
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12168 # I see...
	}
}

# Progress update - you have died
character_event = {
	id = soh.12169
	desc = EVTDESC_SOH_12169
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12169 # So it ends...
		
		opinion = {
			who = persistent_event_target:giving_me_immortality_potion
			modifier = opinion_fatal_immortality_potion # Inherited, gives imprisonment and execution reasons
		}
		
		death = {
			death_reason = death_immortality_potion
		}
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12170 } # Inform the alchemist
		}
	}
}

# Inform alchemist - target died
character_event = {
	id = soh.12170
	desc = EVTDESC_SOH_12170
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12170 # I see...
	}
}

# Final sip - potion improved your health
character_event = {
	id = soh.12171
	desc = EVTDESC_SOH_12171
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		health = 2
	}
	
	option = {
		name = EVTOPTA_SOH_12171 # I'll take it!
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12172 } # Inform the alchemist
		}
		
		ai_chance = {
			factor = 90
			
			trigger = {
				NOR = {
					persistent_event_target:giving_me_immortality_potion = {
						is_rival = ROOT
					}
					trait = wroth
				}
			}
			
			mult_modifier = {
				factor = 0.5
				persistent_event_target:giving_me_immortality_potion = {
					NOR = {
						is_friend = ROOT
						is_lover = ROOT
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				persistent_event_target:giving_me_immortality_potion = {
					reverse_opinion = {
						who = ROOT
						value < 0
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = ambitious
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_12171 # This is not what I asked for!
		
		opinion = {
			who = persistent_event_target:giving_me_immortality_potion
			modifier = opinion_gave_me_bad_immortality_potion
		}
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12173 } # Inform the alchemist
		}
		
		ai_chance = {
			factor = 10
			
			mult_modifier = {
				factor = 0.1
				trait = kind
			}
			
			mult_modifier = {
				factor = 0.1
				trait = content
			}
			
			mult_modifier = {
				factor = 0.1
				trait = humble
			}
			
			mult_modifier = {
				factor = 10
				trait = proud
			}
		}
	}
}

# Inform alchemist - target did not care
character_event = {
	id = soh.12172
	desc = EVTDESC_SOH_12172
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12172 # Not at all what I wanted...
		
		prestige = 100
	}
}

# Inform alchemist - imprisonment reason
character_event = {
	id = soh.12173
	desc = EVTDESC_SOH_12173
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12173 # This might be bad...
	}
}

# Final sip - potion did nothing
character_event = {
	id = soh.12174
	desc = EVTDESC_SOH_12174
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12174 # I suppose it could have been worse...
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12175 } # Inform the alchemist
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					persistent_event_target:giving_me_immortality_potion = {
						is_rival = ROOT
					}
					trait = wroth
				}
			}
			
			mult_modifier = {
				factor = 0.5
				persistent_event_target:giving_me_immortality_potion = {
					NOR = {
						is_friend = ROOT
						is_lover = ROOT
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				persistent_event_target:giving_me_immortality_potion = {
					reverse_opinion = {
						who = ROOT
						value < 0
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = ambitious
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_12174 # This is not what I asked for!
		
		opinion = {
			who = persistent_event_target:giving_me_immortality_potion
			modifier = opinion_gave_me_bad_immortality_potion
		}
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12176 } # Inform the alchemist
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = kind
			}
			
			mult_modifier = {
				factor = 0.1
				trait = content
			}
			
			mult_modifier = {
				factor = 0.1
				trait = humble
			}
			
			mult_modifier = {
				factor = 10
				trait = proud
			}
		}
	}
}

# Inform alchemist - target did not care
character_event = {
	id = soh.12175
	desc = EVTDESC_SOH_12175
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12175 # I guess it could have been worse...
	}
}

# Inform alchemist - imprisonment reason
character_event = {
	id = soh.12176
	desc = EVTDESC_SOH_12176
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12176 # This might be bad...
	}
}

# Final sip - potion seems to have worsened your health
character_event = {
	id = soh.12177
	desc = EVTDESC_SOH_12177
	picture = GFX_evt_stressed_ruler
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		health = -2
	}
	
	option = {
		name = EVTOPTA_SOH_12177 # At least I am alive...
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12178 } # Inform the alchemist
		}
		
		ai_chance = {
			factor = 10
			
			trigger = {
				NOR = {
					persistent_event_target:giving_me_immortality_potion = {
						is_rival = ROOT
					}
					trait = wroth
				}
			}
			
			mult_modifier = {
				factor = 0.5
				persistent_event_target:giving_me_immortality_potion = {
					NOR = {
						is_friend = ROOT
						is_lover = ROOT
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				persistent_event_target:giving_me_immortality_potion = {
					reverse_opinion = {
						who = ROOT
						value < 0
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = ambitious
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_12177 # This is not what I asked for!
		
		opinion = {
			who = persistent_event_target:giving_me_immortality_potion
			modifier = opinion_gave_me_bad_immortality_potion
		}
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12179 } # Inform the alchemist
		}
		
		ai_chance = {
			factor = 90
			
			mult_modifier = {
				factor = 0.1
				trait = kind
			}
			
			mult_modifier = {
				factor = 0.1
				trait = content
			}
			
			mult_modifier = {
				factor = 0.1
				trait = humble
			}
			
			mult_modifier = {
				factor = 10
				trait = proud
			}
		}
	}
}

# Inform alchemist - target did not care
character_event = {
	id = soh.12178
	desc = EVTDESC_SOH_12178
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12178 # It helped, at least...
	}
}

# Inform alchemist - imprisonment reason
character_event = {
	id = soh.12179
	desc = EVTDESC_SOH_12179
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12179 # This might be bad...
	}
}

# Final sip - potion seems to have made you quite mad
character_event = {
	id = soh.12180
	desc = EVTDESC_SOH_12180
	picture = GFX_evt_lunatic
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12180 # I think this is great!
		
		add_trait_lunatic_effect = yes
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12181 } # Inform the alchemist
		}
	}
}

# Inform alchemist - target has gone quite mad
character_event = {
	id = soh.12181
	desc = EVTDESC_SOH_12181
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12181 # I see...
	}
}

# Final sip - potion killed you
character_event = {
	id = soh.12182
	desc = EVTDESC_SOH_12182
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12182 # So it ends...
		
		opinion = {
			who = persistent_event_target:giving_me_immortality_potion
			modifier = opinion_fatal_immortality_potion # Inherited, gives imprisonment and execution reasons
		}
		
		death = {
			death_reason = death_immortality_potion
		}
		
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12183 } # Inform the alchemist
		}
	}
}

# Inform alchemist - potion killed target
character_event = {
	id = soh.12183
	desc = EVTDESC_SOH_12183
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12183 # Just as planned!
	}
}

# Death of potion target
character_event = {
	id = soh.12184
	hide_window = yes
	
	is_triggered_only = yes # on_death
	
	has_character_flag = consuming_immortality_potion
	
	immediate = {
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12185 } # Inform alchemist
		}
	}
}

# Potion target died - inform alchemist
character_event = {
	id = soh.12185
	desc = EVTDESC_SOH_12185
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12185 # I'll take it!
	}
}



### Alchemist unable to continue

# Death of alchemist
character_event = {
	id = soh.12186
	hide_window = yes
	
	is_triggered_only = yes # on_death
	
	has_dlc = "Mystics"
	min_age = 16
	is_in_society = yes
	
	trigger = {
		society_member_of = the_alchemists
		has_character_modifier = brewing_immortality_potion
		persistent_event_target:getting_immortality_potion = {
			is_alive = yes
			NOR = {
				character = ROOT
				has_character_flag = consuming_immortality_potion
			}
		}
	}
	
	immediate = {
		persistent_event_target:getting_immortality_potion = {
			character_event = { id = soh.12187 days = 1 } # Inform target
		}
	}
}

# Inform target - alchemist died
character_event = {
	id = soh.12187
	desc = EVTDESC_SOH_12187
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_12187 # Unfortunate...
	}
}

# Inform target - alchemist is no longer part of the RAS
character_event = {
	id = soh.12188
	desc = EVTDESC_SOH_12188
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes # Society leaving scripted_effect; TIANXIATODO
	
	option = {
		name = EVTOPTA_SOH_12188 # I see...
	}
}

# You became immortal in some other way - inform alchemist
character_event = {
	id = soh.12189
	desc = EVTDESC_SOH_12189
	picture = GFX_evt_religious_exultation
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes # add_trait_immortal_effect
	
	option = {
		name = EVTOPTA_SOH_12189 # Works for me!
		
		# TIANXIATODO: Cleanup
	}
}

# Target became immortal in some other way - inform alchemist
character_event = {
	id = soh.12190
	desc = EVTDESC_SOH_12190
	picture = GFX_evt_religious_exultation
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes # add_trait_immortal_effect
	
	option = {
		trigger = {
			NOR = {
				trait = immortal
				trait = kitsune
			}
			has_character_flag = brewing_immortality_potion_actual
		}
		
		name = EVTOPTA_SOH_12190 # I guess I could keep brewing it for myself...
	
		save_persistent_event_target = {
			name = getting_immortality_potion
			scope = ROOT
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					trait = depressed
					AND = {
						trait = craven
						trait = paranoid
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = craven
			}
			
			mult_modifier = {
				factor = 0.1
				trait = paranoid
			}
			
			mult_modifier = {
				factor = 0.1
				trait = content
			}
			
			mult_modifier = {
				factor = 0.1
				check_variable = {
					which = immortality_potion_quality
					value < 25
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_12190 # I guess that's that...
		
		opinion = {
			who = FROM
			modifier = opinion_wasted_immortality_potion
		}
		
		# TIANXIATODO: Cleanup
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					trait = brave
					trait = trusting
					NOR = {
						trait = immortal
						trait = kitsune
					}
					has_character_flag = brewing_immortality_potion_actual
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = brave
			}
			
			mult_modifier = {
				factor = 0.1
				trait = trusting
			}
			
			mult_modifier = {
				factor = 0.1
				trait = ambitious
			}
			
			mult_modifier = {
				factor = 0.5
				check_variable = {
					which = immortality_potion_quality
					value >= 50
				}
			}
			
			mult_modifier = {
				factor = 0.2
				check_variable = {
					which = immortality_potion_quality
					value >= 75
				}
			}
		}
	}
}

# Death of target
character_event = {
	id = soh.12191
	hide_window = yes
	
	is_triggered_only = yes # on_death
	
	min_age = 16
	
	trigger = {
		society_member_of = the_alchemists
		has_character_modifier = getting_immortality_potion
		NOT = {
			has_character_flag = consuming_immortality_potion
		}
		persistent_event_target:giving_me_immortality_potion = {
			is_alive = yes
			NOT = {
				character = ROOT
			}
		}
	}
	
	immediate = {
		persistent_event_target:giving_me_immortality_potion = {
			character_event = { id = soh.12192 days = 1 } # Inform alchemist
		}
	}
}

# Death of target - alchemist informed
character_event = {
	id = soh.12192
	desc = EVTDESC_SOH_12192
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			NOR = {
				trait = immortal
				trait = kitsune
			}
			has_character_flag = brewing_immortality_potion_actual
		}
		
		name = EVTOPTA_SOH_12192 # I guess I could keep brewing it for myself...
	
		save_persistent_event_target = {
			name = getting_immortality_potion
			scope = ROOT
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					trait = depressed
					AND = {
						trait = craven
						trait = paranoid
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = craven
			}
			
			mult_modifier = {
				factor = 0.1
				trait = paranoid
			}
			
			mult_modifier = {
				factor = 0.1
				trait = content
			}
			
			mult_modifier = {
				factor = 0.1
				check_variable = {
					which = immortality_potion_quality
					value < 25
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_12192 # I guess that's that...
		
		# TIANXIATODO: Cleanup
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					trait = brave
					trait = trusting
					NOR = {
						trait = immortal
						trait = kitsune
					}
					has_character_flag = brewing_immortality_potion_actual
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = brave
			}
			
			mult_modifier = {
				factor = 0.1
				trait = trusting
			}
			
			mult_modifier = {
				factor = 0.1
				trait = ambitious
			}
			
			mult_modifier = {
				factor = 0.5
				check_variable = {
					which = immortality_potion_quality
					value >= 50
				}
			}
			
			mult_modifier = {
				factor = 0.2
				check_variable = {
					which = immortality_potion_quality
					value >= 75
				}
			}
		}
	}
}