# Aclla events
# Partially based on work done by Keizer Harm
# Expanded upon by Silverswee(e)per

namespace = sri

# sri.101-300 reserved



##### Maintenance events

# Fire on_yearly_pulse; find e_inca_empire: if active, activate this and put it under the Sapa Inca, and fill it up. Otherwise do nothing.
character_event = {
	id = sri.101
	hide_window = yes
	
	is_triggered_only = yes # on_yearly_pulse
	
	has_dlc = "Sunset Invasion"
	only_playable = yes
	has_global_flag = sunrise_invasion_happened

	trigger = {
		owns = event_target:pulse_province
		
		e_inca_empire = {
			holder_scope = {
				religion_openly_inca_or_reformed_trigger = yes
			}
		}
		
		NOT = {
			e_inca_empire = {
				holder_scope = {
					any_courtier_or_vassal = {
						has_landed_title = d_acllahuasi
					}
				}
			}
		}
		
		trigger_if = {
			limit = {
				inca_pagan = {
					has_flag = has_been_reformed
				}
			}
			
			inca_pagan_reformed = {
				NOR = {
					has_religion_feature = religion_matriarchal
					has_religion_feature = religion_equal
				}
			}
		}
	}
	
	immediate = {
		if = {
			limit = {
				NOT = {
					is_title_active = d_acllahuasi
				}
			}
			
			activate_title = {
				title = d_acllahuasi
				status = yes
			}
		}
		
		if = {
			limit = {
				d_acllahuasi = {
					holder_scope = {
						is_female = yes
						age = 35
						has_education_learning_trigger = yes
						religion_openly_inca_or_reformed_trigger = yes
					}
				}
			}
			
			d_acllahuasi = {
				de_jure_liege = e_inca_empire
				
				holder_scope = {
					set_defacto_liege = e_inca_empire
					fill_acllahuasi = yes
				}
			}
		}
		
		else = {
			e_inca_empire = {
				holder_scope = {
					create_random_priest = {
						age = 50
						health = 7
						fertility = 0
						female = yes
						random_traits = yes
						culture = quechua
						religion = inca_pagan
						trait = aclla
					}
					
					new_character = {
						if = {
							limit = {
								inca_pagan = {
									has_flag = has_been_reformed
								}
							}
							religion = inca_pagan_reformed
						}
						
						set_government_type = theocracy_government
						
						d_acllahuasi = {
							grant_title = PREV
							
							add_law = succ_open_elective
							add_law = enatic_succession
							
							de_jure_liege = e_inca_empire
							
							holder_scope = {
								fill_acllahuasi = yes
							}
						}
						
						set_defacto_liege = PREV
					}
				}
			}
		}
	}
}

# Fire on_death for aclla holder to ensure right successor
character_event = {
	id = sri.102
	hide_window = yes
	
	is_triggered_only = yes # on_death
	
	has_dlc = "Sunset Invasion"
	only_rulers = yes
	has_global_flag = sunrise_invasion_happened
	
	trigger = {
		has_landed_title = d_acllahuasi
	}
	
	immediate = {
		create_random_priest = {
			age = 50
			health = 7
			fertility = 0
			female = yes
			random_traits = yes
			culture = quechua
			religion = inca_pagan
			trait = aclla
		}
					
		new_character = {
			if = {
				limit = {
					inca_pagan = {
						has_flag = has_been_reformed
					}
				}
				religion = inca_pagan_reformed
			}
			
			set_government_type = theocracy_government
			
			d_acllahuasi = {
				grant_title = PREV
				
				add_law = succ_open_elective
				add_law = enatic_succession
				
				de_jure_liege = e_inca_empire
				
				holder_scope = {
					fill_acllahuasi = yes
				}
			}
		}
	}
}

##### Aclla recruitment

# Sapa Inca won war - can a daughter be claimed?
character_event = {
	id = sri.103
	hide_window = yes
	
	is_triggered_only = yes # on_war_ended_defeat
	
	has_dlc = "Sunset Invasion"
	
	only_playable = yes
	
	has_global_flag = sunrise_invasion_happened
	
	trigger = {
		FROM = { # Attacker
			has_landed_title = e_inca_empire
			
			any_realm_lord = {
				has_landed_title = d_acllahuasi
				religion_openly_inca_or_reformed_trigger = yes
			}
			
			religion_openly_inca_or_reformed_trigger = yes
			
			NOR = {
				has_religion_feature = religion_matriarchal
				has_religion_feature = religion_equal
			}
		}
		
		top_liege = {
			has_landed_title = e_inca_empire
		}
		
		any_child = {
			is_female = yes
			is_married = no # In case someone is pre-scripted or something odd has happened
			is_consort = no # In case someone is pre-scripted or something odd has happened
			age = 7
			NOT = { age = 11 }
			host = { character = ROOT }
			has_ugly_trait_trigger = no
			is_landed = no
			NOT = {
				has_character_flag = ex_aclla # Rescued
			}
		}
	}
	
	immediate = {
		# Find daughter to seize
		random_child = {
			limit = {
				is_female = yes
				is_married = no # In case someone is pre-scripted or something odd has happened
				is_consort = no # In case someone is pre-scripted or something odd has happened
				age = 7
				NOT = { age = 11 }
				host = { character = ROOT }
				has_ugly_trait_trigger = no
				is_landed = no
				NOT = {
					has_character_flag = ex_aclla # Rescued
				}
			}
			
			preferred_limit = {
				trait = attractive
				religion_openly_inca_or_reformed_trigger = yes
			}
			
			preferred_limit = {
				trait = groomed
				religion_openly_inca_or_reformed_trigger = yes
			}
			
			preferred_limit = {
				trait = attractive
			}
			
			preferred_limit = {
				trait = groomed
			}
			
			save_event_target_as = child_to_seize
		}
		
		d_acllahuasi = {
			holder_scope = {
				character_event = { id = sri.104 } # Ping
			}
		}
	}
}

# Ping Acllahuasi
character_event = {
	id = sri.104
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		create_character = {
			age = 30
			female = no
			random_traits = yes
			culture = quechua
			religion = ROOT
		}
		
		new_character = {
			set_character_flag = apupanaca
			save_event_target_as = apupanaca
			character_event = { id = sri.105 } # Ping the apupanaca
		}
	}
}

# Ping Apupanaca
character_event = {
	id = sri.105
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		FROMFROM = {
			long_character_event = { id = sri.106 } # The "offer" arrives
		}
	}
}

# An offer you can't refuse...
long_character_event = {
	id = sri.106
	desc = EVTDESC_SRI_106
	border = GFX_event_long_frame_religion
	
	is_triggered_only = yes
	
	picture = {
		trigger = {
			is_female = yes
		}
		picture = GFX_evt_daughter_asking_mother
	}
	picture = {
		trigger = {
			is_female = no
		}
		picture = GFX_evt_daughter_asking_father
	}
	
	option = {
		trigger = {
			event_target:child_to_seize = {
				is_betrothed = no
			}
		}
		
		name = EVTOPTA_SRI_6 # Oh no!
	}
	
	option = {
		trigger = {
			event_target:child_to_seize = {
				is_betrothed = yes
			}
		}
		
		name = EVTOPTB_SRI_106 # Her betrothal will have to be broken
		
		event_target:child_to_seize = {
			betrothed = {
				break_betrothal = PREV
			}
		}
	}
	
	after = {
		hidden_tooltip = {
			character_event = { id = sri.113 } # Time to say goodbye...
		}
	}
}

# Random chance that someone comes along and asks nicely if you're a vassal and have a decent candidate - on_bi_yearly_pulse
character_event = {
	id = sri.108
	hide_window = yes
	
	has_dlc = "Sunset Invasion"
	
	is_triggered_only = yes # on_bi_yearly_pulse, aclla_events
	
	only_playable = yes
	
	has_global_flag = sunrise_invasion_happened
	
	trigger = {
		NOR = {
			has_landed_title = e_inca_empire
			#has_landed_title = d_sapa_inca # TIANXIATODO
		}
		
		is_inaccessible_or_incapable_trigger = no
		
		top_liege = {
			has_landed_title = e_inca_empire
			religion_openly_inca_or_reformed_trigger = yes
			
			any_realm_lord = {
				has_landed_title = d_acllahuasi
				religion_openly_inca_or_reformed_trigger = yes
			}
			
			NOR = {
				has_religion_feature = religion_matriarchal
				has_religion_feature = religion_equal
			}
		}
		
		any_child = {
			is_female = yes
			is_married = no # In case someone is pre-scripted or something odd has happened
			is_consort = no # In case someone is pre-scripted or something odd has happened
			age = 7
			NOT = { age = 11 }
			host = { character = ROOT }
			has_ugly_trait_trigger = no
			is_landed = no
			NOT = {
				has_character_flag = ex_aclla # Rescued
			}
		}
		
		NOT = { has_character_flag = ruler_supplied_acllahuasi } 
	}

	immediate = {
		# Find daughter to seize
		random_child = {
			limit = {
				is_female = yes
				is_married = no # In case someone is pre-scripted or something odd has happened
				is_consort = no # In case someone is pre-scripted or something odd has happened
				age = 7
				NOT = { age = 11 }
				host = { character = ROOT }
				has_ugly_trait_trigger = no
				is_landed = no
				NOT = {
					has_character_flag = ex_aclla # Rescued
				}
			}
			
			preferred_limit = {
				trait = attractive
				religion_openly_inca_or_reformed_trigger = yes
			}
			
			preferred_limit = {
				trait = groomed
				religion_openly_inca_or_reformed_trigger = yes
			}
			
			preferred_limit = {
				trait = attractive
			}
			
			preferred_limit = {
				trait = groomed
			}
			
			save_event_target_as = child_to_seize
		}
		
		d_acllahuasi = {
			holder_scope = {
				character_event = { id = sri.109 } # Ping
			}
		}
	}
	
}

# Ping Acllahuasi
character_event = {
	id = sri.109
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		create_character = {
			age = 30
			female = no
			random_traits = yes
			culture = quechua
			religion = ROOT
		}
		
		new_character = {
			set_character_flag = apupanaca
			save_event_target_as = apupanaca
			character_event = { id = sri.110 } # Ping
		}
	}
}

# Ping Apupanaca
character_event = {
	id = sri.110
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		FROMFROM = {
			long_character_event = { id = sri.111 } # The "offer" arrives
		}
	}
}

# Apupanaca arrives
long_character_event = {
	id = sri.111
	desc = EVTDESC_SRI_111
	picture = GFX_evt_emissary
	border = GFX_event_long_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_111 # Sure
		
		trigger = {
			event_target:child_to_seize = {
				is_betrothed = no
			}
		}
		
		prestige = 100
		
		hidden_tooltip = {
			character_event = { id = sri.113 }
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					trait = zealous
					true_inca_religion_trigger = no
				}
			}
			
			mult_modifier = {
				factor = 0.1
				true_inca_religion_trigger = no
			}
			
			mult_modifier = {
				factor = 0.1
				trait = proud
				true_inca_religion_trigger = no
			}
		}
	}
	
	option = {
		trigger = {
			event_target:child_to_seize = {
				is_betrothed = yes
			}
		}
		
		name = EVTOPTB_SRI_111 # Her betrothal will have to be broken...
		
		event_target:child_to_seize = {
			betrothed = {
				break_betrothal = PREV
			}
		}
		
		hidden_tooltip = {
			character_event = { id = sri.113 }
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					trait = zealous
					true_inca_religion_trigger = no
				}
			}
			
			mult_modifier = {
				factor = 0.1
				true_inca_religion_trigger = no
			}
			
			mult_modifier = {
				factor = 0.1
				trait = proud
				true_inca_religion_trigger = no
			}
		}
	}
	
	option = {
		name = EVTOPTC_SRI_111 # Never!
		
		custom_tooltip = { text = EVTOPTC_SRI_111_TOOLTIP } # This may have repercussions... 
		
		hidden_tooltip = {
			event_target:apupanaca = {
				death = {
					death_reason = death_missing
				}
			}
			if = {
				limit = {
					NOT = {
						intrigue >= 16
					}
				}
				character_event = { id = sri.112 days = 30 random = 60 } # Repercussions
			}
		}
		
		if = {
			limit = {
				religion_openly_inca_or_reformed_trigger = yes
			}
			
			piety = -100
			prestige = -100
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					trait = zealous
					religion_openly_inca_or_reformed_trigger = yes
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = craven
			}
			
			mult_modifier = {
				factor = 2
				trait = wroth
			}
			
			mult_modifier = {
				factor = 2
				trait = cruel
			}
			
			mult_modifier = {
				factor = 0.1
				religion_openly_inca_or_reformed_trigger = yes
			}
		}
	}
	
	option = {
		trigger = {
			wealth = 1000
		}
		
		name = EVTOPTD_SRI_111 # How about I pay you instead?
		
		wealth = -1000
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					trait = zealous
					religion_openly_inca_or_reformed_trigger = yes
				}
			}
			
			mult_modifier = {
				factor = 0.01
				trait = greedy
			}
		}
	}
}

# Repercussions for not obeying the Sapa Inca
character_event = {
	id = sri.112 
	desc = EVTDESC_SRI_112
	picture = GFX_evt_scandal
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	trigger = {
		top_liege = {
			has_landed_title = e_inca_empire
			religion_openly_inca_or_reformed_trigger = yes
		}
	}
	
	option = {
		name = EVTOPTA_SRI_112 # Oh noes!
		
		prestige = -100
		
		any_playable_ruler = {
			limit = {
				OR = {
					religion_openly_inca_or_reformed_trigger = yes
					same_realm = ROOT
				}
			}
			
			opinion = {
				modifier = opinion_refused_acllahuasi
				who = ROOT
			}
		}
	}
}

# Time to say goodbye
character_event = {
	id = sri.113
	desc = EVTDESC_SRI_113
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	picture = {
		trigger = {
			is_female = yes
		}
		picture = GFX_evt_daughter_asking_mother
	}
	picture = {
		trigger = {
			is_female = no
		}
		picture = GFX_evt_daughter_asking_father
	}
	
	immediate = {
		event_target:child_to_seize = {
			move_character = FROMFROMFROM
			set_character_flag = acllakuna
			add_trait = aclla
			set_character_flag = no_court_invites
		}
	}
	
	option = {
		name = EVTOPTA_SRI_113 # Be strong!
		
		# GRACETODO
		
		event_target:child_to_seize = {
			random_list = {
				20 = {
					trigger = {
						NOR = {
							is_strong_trigger = yes
							trait = weak
						}
					}
					
					if = {
						limit = {
							trait = frail
						}
						remove_trait = frail
					}
					else = {
						add_trait = brawny
					}
				}
				
				20 = {
					add_trait = stressed
				}
				
				40 = {
					add_trait = proud
				}
				
				20 = {}
			}
		}
		
		prestige = 50
	}
	
	option = {
		trigger = {
			true_inca_religion_trigger = yes
		}
		
		name = EVTOPTB_SRI_113 # It is for Inti!
		
		# GRACETODO
		
		event_target:child_to_seize = {
			random_list = {
				40 = { 
					add_trait = zealous
				}
				
				40 = {
					add_trait = depressed
				}
				
				20 = {}
			}
		}
		
		piety = 100
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = cynical
				}
			}
			
			mult_modifier = {
				factor = 100
				trait = zealous
			}
		}
	}
	
	option = {
		name = EVTOPTC_SRI_113 # I *will* come back for you.
		
		# GRACETODO
		
		event_target:child_to_seize = {
			random_list = {
				40 = { 
					add_trait = deceitful
				}
				
				40 = {
					add_trait = depressed
				}
				
				20 = {}
			}
			
			opinion = {
				who = ROOT
				modifier = opinion_aclla_rescuer
			}
		}
		
		if = {
			limit = {
				true_inca_religion_trigger = yes
			}
			piety = -100
		}
		
		custom_tooltip = {
			text = SRI_113_GET_BACK_DAUGHTER
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					trait = zealous
					
					NOR = {
						trait = arbitrary
						trait = deceitful
					}
					
					true_inca_religion_trigger = yes
				}
			}
		}
	}
	
	after = {
		set_character_flag = ruler_supplied_acllahuasi
		
		top_liege = {
			any_realm_lord = {
				limit = {
					religion_openly_inca_or_reformed_trigger = yes
				}
				
				opinion = {
					modifier = opinion_supplied_acllahuasi
					who = ROOT
				}
			}
			
			opinion = {
				modifier = opinion_supplied_acllahuasi
				who = ROOT
			}
		}
		
		hidden_tooltip = {
			event_target:apupanaca = {
				death = {
					death_reason = death_missing
				}
			}
		}
		
		character_event = { id = sri.114 days = 3650 random = 3650 } # Flag cleanup
	}
}

# Flag cleanup (delayed a bit)
character_event = {
	id = sri.114
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		clr_character_flag = ruler_supplied_acllahuasi
	}
}



### Aclla training

# on_childhood_pulse - let's see what happens
character_event = {
	id = sri.115
	hide_window = yes
	
	is_triggered_only = yes # on_childhood_pulse
	
	has_dlc = "Sunset Invasion"
	
	only_women = yes
	
	has_global_flag = sunrise_invasion_happened
	
	trigger = {
		is_inaccessible_or_incapable_trigger = no
		trait = aclla
	}
	
	immediate = {
		if = {
			limit = {
				NOT = {
					host = {
						has_landed_title = d_acllahuasi
					}
				}
			}
			
			remove_trait = aclla
		}
		
		else = {
			random_list = {
				1 = {
					trigger = {
						NOR = {
							culture = quechua
							trait = proud
						}
					}
					
					mult_modifier = {
						factor = 10
						trait = humble
					}
					
					# Aclla becomes Quechua
					culture = quechua
				}
				
				1 = {
					trigger = {
						religion_openly_inca_or_reformed_trigger = no
						NAND = {
							trait = zealous
							true_inca_religion_trigger = no
						}
					}
					
					mult_modifier = {
						factor = 10
						trait = cynical
					}
					
					mult_modifier = {
						factor = 10
						true_inca_religion_trigger = no
					}
				
					# Aclla converts religion
					if = {
						limit = {
							inca_pagan = {
								has_flag = has_been_reformed
							}
						}
						
						religion = inca_pagan_reformed
					}
					
					else = {
						religion = inca_pagan
					}
				}
				
				1 = {
					trigger = {
						religion_openly_inca_or_reformed_trigger = no
						trait = zealous
					}
					
					character_event = { id = sri.118 } # Zealous Aclla gets into trouble
				}
				
				1 = {
					trigger = {
						NOT = {
							trait = zealous
						}
					}
					
					# Aclla becomes more Zealous
					add_trait_partially_silently_zealous_effect = yes
				}
				
				1 = {
					trigger = {
						NOT = {
							trait = cynical
						}
					}
					
					# Aclla becomes more Cynical
					add_trait_partially_silently_cynical_effect = yes
				}
				
				1 = {
					trigger = {
						NOT = {
							trait = proud
						}
					}
					
					# Aclla becomes more Proud
					add_trait_partially_silently_proud_effect = yes
				}
				
				1 = {
					trigger = {
						NOT = {
							trait = groomed
						}
					}
					
					# Aclla becomes more Groomed
					add_trait_partially_silently_groomed_effect = yes
				}
				
				1 = {
					trigger = {
						NOR = {
							has_character_modifier = aclla_okay_weaver
							has_character_modifier = aclla_good_weaver
							has_character_modifier = aclla_prodigious_weaver
						}
					}
					
					# Aclla learns to weave
					random_list = {
						30 = {
							mult_modifier = {
								factor = 6
								is_dumb_trigger = yes
							}
							
							add_character_modifier = {
								modifier = aclla_okay_weaver
								duration = -1
							}
							
							prestige = 25
						}
						
						20 = {
							add_character_modifier = {
								modifier = aclla_good_weaver
								duration = -1
							}
							
							prestige = 50
						}
						
						10 = {
							mult_modifier = {
								factor = 6
								is_smart_trigger = yes
							}
							
							add_character_modifier = {
								modifier = aclla_prodigious_weaver
								duration = -1
							}
							
							prestige = 100
						}
					}
				}
				
				1 = {
					trigger = {
						NOT = {
							has_character_modifier = aclla_brewer
						}
					}
					# Aclla learns to brew chica
					
					add_character_modifier = {
						modifier = aclla_brewer
						duration = -1
					}
					
					prestige = 25
					piety = 25
				}
				
				1 = {
					trigger = {
						NOT = {
							has_character_modifier = aclla_cook
						}
					}
					
					# Aclla learns to prepare sancu
					add_character_modifier = {
						modifier = aclla_cook
						duration = -1
					}
					
					prestige = 50
				}
				
				1 = {
					trigger = {
						NOT = {
							has_character_modifier = aclla_singer
						}
					}
					
					# Aclla learns to sing
					add_character_modifier = {
						modifier = aclla_singer
						duration = -1
					}
					
					prestige = 50
				}
				
				1 = {
					trigger = {
						NOT = {
							has_character_modifier = aclla_dancer
						}
					}
					
					# Aclla learns to dance
					add_character_modifier = {
						modifier = aclla_dancer
						duration = -1
					}
					
					prestige = 50
				}
				
				10 = {} # Nothing
			}
		}
	}
}

# Aclla becomes Quechua - handled in sri.115
#character_event = {
#	id = sri.116
#	hide_window = yes
#	
#	is_triggered_only = yes
#	
#	immediate = {
#		culture = quechua
#		
#		prestige = 25
#	}
#}

# Character becomes Inca religion - handled in sri.115
#character_event = {
#	id = sri.117
#	hide_window = yes
#	is_triggered_only = yes
#	
#	immediate = {
#		if = {
#			limit = {
#				NOT = {
#					inca_pagan = {
#						has_flag = has_been_reformed
#					}
#				}
#			}
#			
#			religion = inca_pagan
#		}
#		
#		else = {
#			religion = inca_pagan_reformed
#		}
#		
#		piety = 25
#	}
#}

# Zealous non-Inca might get into trouble
character_event = {
	id = sri.118
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				d_acllahuasi = {
					holder_scope = {
						NOT = {
							true_religion = ROOT
						}
					}
				}
			}
			
			d_acllahuasi = {
				holder_scope = {
					character_event = { id = sri.119 } # How do you want to handle this?
				}
			}
		}
		
		piety = 25
	}
}

# Handling of Zealous non-Inca
character_event = {
	id = sri.119
	desc = EVTDESC_SRI_119
	picture = GFX_evt_daughter_asking_mother
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_119 # It's not worth making a fuss...
		
		piety = -25
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = zealous
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SRI_119 # Try to change her mind
		
		random_list = {
			25 = {
				mult_modifier = {
					factor = 10
					diplomacy >= 15
				}
				
				FROM = {
					remove_trait = zealous
				}
			}
			
			75 = {
				FROM = {
					add_trait = stubborn
				}
			}
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = cynical
				}
			}
		}
	}
	
	option = {
		name = EVTOPTC_SRI_119 # You asked for it!
		
		prestige = 25
		
		# GRACETODO
		
		ROOT = {
			FROM = { save_event_target_as = kinslayer_target }
			add_kinslayer_trait_effect = yes
		}
		
		FROM = {
			death = {
				death_reason = death_execution
				killer = ROOT
			}
			
			any_close_relative = {
				character_event = { id = sri.120 } # Inform relatives
			}
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				trait = cruel
			}
		}
	}
}

# Inform the family
character_event = {
	id = sri.120
	desc = EVTDESC_SRI_120
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			religion_openly_inca_or_reformed_trigger = yes
			trait = zealous
		}
		
		name = EVTOPTA_SRI_120 # She will pay for this!
		
		add_rival = FROM
	}
	
	option = {
		trigger = {
			religion_openly_inca_or_reformed_trigger = yes
		}
		
		add_rival = FROM
		
		name = EVTOPTB_SRI_120 # She will pay for this!
	}
	
	option = {
		trigger = {
			religion_openly_inca_or_reformed_trigger = no
			trait = zealous
		}
		
		name = EVTOPTC_SRI_120 # She did the right thing!
		
		piety = 25
	}
}

# Character learns to weave - handled in sri.115
#character_event = {
#	id = sri.121
#	hide_window = yes
#	
#	is_triggered_only = yes
#	
#	immediate = {
#		random_list = {
#			30 = {
#				mult_modifier = {
#					factor = 6
#					is_dumb_trigger = yes
#				}
#				add_character_modifier = {
#					modifier = aclla_okay_weaver
#					duration = -1
#				}
#				prestige = 25
#			}
#			20 = {
#				add_character_modifier = {
#					modifier = aclla_good_weaver
#					duration = -1
#				}
#				prestige = 50
#			}
#			10 = {
#				mult_modifier = {
#					factor = 6
#					is_smart_trigger = yes
#				}
#				add_character_modifier = {
#					modifier = aclla_prodigious_weaver
#					duration = -1
#				}
#				prestige = 100
#			}
#		}
#	}
#}

# Character learns to brew chica - handled in sri.115
#character_event = {
#	id = sri.122
#	hide_window = yes
#	
#	is_triggered_only = yes
#	
#	immediate = {
#		add_character_modifier = {
#			modifier = aclla_brewer
#			duration = -1
#		}
#		prestige = 25
#		piety = 25
#	}
#}

# Character learns to prepare sancu - handled in sri.115
#character_event = {
#	id = sri.123
#	hide_window = yes
#	
#	is_triggered_only = yes
#	
#	immediate = {
#		add_character_modifier = {
#			modifier = aclla_cook
#			duration = -1
#		}
#		prestige = 50
#	}
#}

# Character learns to sing - handled in sri.115
#character_event = {
#	id = sri.124
#	hide_window = yes
#	
#	is_triggered_only = yes
#	
#	immediate = {
#		add_character_modifier = {
#			modifier = aclla_singer
#			duration = -1
#		}
#		prestige = 50
#	}
#}

# Character learns to dance - handled in sri.115
#character_event = {
#	id = sri.125
#	hide_window = yes
#	
#	is_triggered_only = yes
#	
#	immediate = {
#		add_character_modifier = {
#			modifier = aclla_dancer
#			duration = -1
#		}
#		prestige = 50
#	}
#}

# Character becomes more groomed - handled in sri.115
#character_event = {
#	id = sri.126
#	hide_window = yes
#	
#	is_triggered_only = yes
#	
#	immediate = {
#		if = {
#			limit = {
#				trait = uncouth
#			}
#			remove_trait = uncouth
#		}
#		else = {
#			add_trait = groomed
#		}
#		prestige = 25
#	}
#}

### Rescue chain

# on_yearly_pulse - see if we see an opportunity
character_event = {
	id = sri.127
	hide_window = yes
	
	is_triggered_only = yes # on_yearly_pulse
	
	has_dlc = "Sunset Invasion"
	
	only_playable = yes
	
	has_global_flag = sunrise_invasion_happened
	
	min_age = 16
	
	only_capable = yes
	
	trigger = {
		has_global_flag = sunrise_invasion_happened
		
		top_liege = {
			has_landed_title = e_inca_empire
		}
		
		is_inaccessible_or_incapable_trigger = no
		
		any_opinion_modifier_target = {
			has_opinion_modifier = {
				who = ROOT
				modifier = opinion_aclla_rescuer
			}
			
			trait = aclla
			
			NOR = {
				has_character_flag = aclla_being_rescued
				has_character_flag = aclla_rescue_attempt_lover
				has_character_flag = aclla_rescue_attempt_snitch
				has_character_flag = aclla_being_married
				has_character_flag = aclla_sacrifice_in_progress # Too late to rescue her
			}
		}
	}
	
	immediate = {
		random_list = {
			25 = {
				mult_modifier = {
					factor = 2
					is_smart_trigger = yes
				}
				
				mult_modifier = {
					factor = 2
					intrigue >= 40
				}
				
				mult_modifier = {
					factor = 2
					intrigue >= 36
				}
				
				mult_modifier = {
					factor = 2
					intrigue >= 32
				}
				
				mult_modifier = {
					factor = 2
					intrigue >= 28
				}
				
				mult_modifier = {
					factor = 2
					intrigue >= 24
				}
				
				mult_modifier = {
					factor = 2
					intrigue >= 20
				}
				
				mult_modifier = {
					factor = 2
					intrigue >= 16
				}
				
				mult_modifier = {
					factor = 2
					combat_rating >= 200
				}
				
				mult_modifier = {
					factor = 2
					combat_rating >= 175
				}
				
				mult_modifier = {
					factor = 2
					combat_rating >= 150
				}
				
				mult_modifier = {
					factor = 2
					combat_rating >= 125
				}
				
				mult_modifier = {
					factor = 2
					combat_rating >= 100
				}
				
				mult_modifier = {
					factor = 2
					combat_rating >= 75
				}
				
				mult_modifier = {
					factor = 5
					any_opinion_modifier_target = {
						has_opinion_modifier = {
							who = ROOT
							modifier = opinion_aclla_rescuer
						}
						
						trait = aclla
						
						has_character_flag = aclla_being_sacrificed
					}
				}
				
				character_event = { id = sri.128 } # You see an opportunity
			}
			
			75 = {
				mult_modifier = {
					factor = 2
					is_dumb_trigger = yes
				}
				
				mult_modifier = {
					factor = 2
					intrigue < 12
				}
				
				mult_modifier = {
					factor = 2
					intrigue < 8
				}
				
				mult_modifier = {
					factor = 2
					intrigue < 4
				}
				
				mult_modifier = {
					factor = 2
					combat_rating < 50
				}
				
				mult_modifier = {
					factor = 2
					combat_rating < 25
				}
				
				mult_modifier = {
					factor = 2
					combat_rating < 0
				}
				
				# No opportunity
			}
		}
	}
}

# You see an opportunity
character_event = {
	id = sri.128
	desc = EVTDESC_SRI_128
	picture = GFX_evt_jailbreak
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	immediate = {
		random_opinion_modifier_target = {
			limit = {
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_aclla_rescuer
				}
				
				trait = aclla
				
				NOR = {
					has_character_flag = aclla_being_rescued
					has_character_flag = aclla_rescue_attempt_lover
					has_character_flag = aclla_rescue_attempt_snitch
					has_character_flag = aclla_being_married
					has_character_flag = aclla_sacrifice_in_progress # Too late to rescue her
				}
			}
			
			preferred_limit = {
				has_character_flag = aclla_being_sacrificed
			}
			
			save_event_target_as = aclla_to_rescue
		}
	}
	
	option = {
		name = EVTOPTA_SRI_128 # I must rescue her!
		
		if = {
			limit = {
				true_inca_religion_trigger = yes
			}
			
			piety = -25
		}
		
		add_trait = travelling
		set_character_flag = do_not_disturb
		
		hidden_tooltip = {
			event_target:aclla_to_rescue = {
				set_character_flag = aclla_being_rescued # Keeps various events from targeting her
			}
		}
		
		character_event = { id = sri.129 days = 30 random = 30 } # Dealing with the guards
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					trait = zealous
					true_inca_religion_trigger = yes
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = craven
			}
			
			mult_modifier = {
				factor = 0.1
				trait = humble
			}
			
			mult_modifier = {
				factor = 0.1
				trait = just
			}
			
			mult_modifier = {
				factor = 100
				event_target:aclla_to_rescue = {
					has_character_flag = aclla_being_sacrificed
				}
				
				true_inca_religion_trigger = no
			}
		}
	}
	
	option = {
		name = EVTOPTB_SRI_128 # It is too dangerous...
		
		prestige = -25
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					trait = zealous
					true_inca_religion_trigger = no
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = brave
			}
			
			mult_modifier = {
				factor = 0.1
				trait = proud
			}
			
			mult_modifier = {
				factor = 0.1
				trait = arbitrary
			}
		}
	}
	
	option = {
		name = EVTOPTC_SRI_128 # I will give up on this...
		
		prestige = -100
		
		event_target:aclla_to_rescue = {
			remove_opinion = {
				who = ROOT
				modifier = opinion_aclla_rescuer
			}
		}
		
		ai_chance = {
			factor = 0
		}
	}
}

# Arrival - how do you handle the situation?
character_event = {
	id = sri.129
	desc = EVTDESC_SRI_129
	picture = GFX_evt_jailbreak
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_129 # I will fight the guards!
		
		random_list = {
			20 = {
				trigger = {
					combat_rating >= 25
				}
				
				mult_modifier = {
					factor = 2
					combat_rating >= 75
				}
				
				random_list = {
					50 = {
						mult_modifier = {
							factor = 2
							intrigue >= 40
						}
						
						mult_modifier = {
							factor = 2
							intrigue >= 36
						}
						
						mult_modifier = {
							factor = 2
							intrigue >= 32
						}
						
						mult_modifier = {
							factor = 2
							intrigue >= 28
						}
						
						mult_modifier = {
							factor = 2
							intrigue >= 24
						}
						
						mult_modifier = {
							factor = 2
							intrigue >= 20
						}
						
						mult_modifier = {
							factor = 2
							intrigue >= 16
						}
						
						character_event = { id = sri.131 days = 1 } # Clean victory
					}
					50 = {
						mult_modifier = {
							factor = 2
							intrigue < 12
						}
						
						mult_modifier = {
							factor = 2
							intrigue < 8
						}
						
						mult_modifier = {
							factor = 2
							intrigue < 4
						}
						
						character_event = { id = sri.132 days = 1 } # Noisy
					}
				}
			}
			
			20 = {
				trigger = {
					combat_rating < 100
				}
				
				random_list = {
					50 = {
						mult_modifier = {
							factor = 2
							intrigue >= 40
						}
						
						mult_modifier = {
							factor = 2
							intrigue >= 36
						}
						
						mult_modifier = {
							factor = 2
							intrigue >= 32
						}
						
						mult_modifier = {
							factor = 2
							intrigue >= 28
						}
						
						mult_modifier = {
							factor = 2
							intrigue >= 24
						}
						
						mult_modifier = {
							factor = 2
							intrigue >= 20
						}
						
						mult_modifier = {
							factor = 2
							intrigue >= 16
						}
						
						character_event = { id = sri.133 days = 1 } # Wounded
					}
					50 = {
						mult_modifier = {
							factor = 2
							intrigue < 12
						}
						
						mult_modifier = {
							factor = 2
							intrigue < 8
						}
						
						mult_modifier = {
							factor = 2
							intrigue < 4
						}
						
						character_event = { id = sri.134 days = 1 } # Wounded and noisy
					}
				}
			}
			
			20 = {
				trigger = {
					combat_rating < 75
				}
				
				random_list = {
					50 = {
						mult_modifier = {
							factor = 2
							intrigue >= 40
						}
						
						mult_modifier = {
							factor = 2
							intrigue >= 36
						}
						
						mult_modifier = {
							factor = 2
							intrigue >= 32
						}
						
						mult_modifier = {
							factor = 2
							intrigue >= 28
						}
						
						mult_modifier = {
							factor = 2
							intrigue >= 24
						}
						
						mult_modifier = {
							factor = 2
							intrigue >= 20
						}
						
						mult_modifier = {
							factor = 2
							intrigue >= 16
						}
						
						character_event = { id = sri.135 days = 1 } # Maimed
					}
					50 = {
						mult_modifier = {
							factor = 2
							intrigue < 12
						}
						
						mult_modifier = {
							factor = 2
							intrigue < 8
						}
						
						mult_modifier = {
							factor = 2
							intrigue < 4
						}
						
						character_event = { id = sri.136 days = 1 } # Maimed and noisy
					}
				}
			}
			
			20 = {
				trigger = {
					combat_rating < 75
				}
				
				mult_modifier = {
					factor = 0.5
					combat_rating >= 50
				}
				
				mult_modifier = {
					factor = 2
					intrigue < 12
				}
				
				mult_modifier = {
					factor = 2
					intrigue < 8
				}
				mult_modifier = {
					factor = 2
					intrigue < 4
				}
				
				character_event = { id = sri.137 days = 1 } # Captured
			}
			
			20 = {
				trigger = {
					combat_rating < 50
				}
				
				character_event = { id = sri.140 days = 1 } # Killed
			}
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = craven
				}
			}
			
			mult_modifier = {
				factor = 0.1
				combat_rating < 50
			}
			
			mult_modifier = {
				factor = 0.1
				trait = deceitful
			}
		}
	}
	
	option = {
		name = EVTOPTB_SRI_129 # I will bribe them!
		
		random_list = {
			33 = {
				mult_modifier = {
					factor = 2
					diplomacy >= 40
				}
				
				mult_modifier = {
					factor = 2
					diplomacy >= 36
				}
				
				mult_modifier = {
					factor = 2
					diplomacy >= 32
				}
				
				mult_modifier = {
					factor = 2
					diplomacy >= 28
				}
				
				mult_modifier = {
					factor = 2
					diplomacy >= 24
				}
				
				mult_modifier = {
					factor = 2
					diplomacy >= 20
				}
				
				mult_modifier = {
					factor = 2
					diplomacy >= 16
				}
				
				character_event = { id = sri.141 days = 1 } # It worked
			}
			
			34 = {
				character_event = { id = sri.142 days = 1 } # They refuse
			}
			
			33 = {
				mult_modifier = {
					factor = 2
					diplomacy < 12
				}
				
				mult_modifier = {
					factor = 2
					diplomacy < 8
				}
				
				mult_modifier = {
					factor = 2
					diplomacy < 4
				}
				
				character_event = { id = sri.143 days = 1 } # They try to arrest you
			}
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = greedy
				}
			}
			
			mult_modifier = {
				factor = 0.1
				wealth < 100
			}
			
			mult_modifier = {
				factor = 0.1
				trait = deceitful
			}
			
			mult_modifier = {
				factor = 10
				trait = gregarious
			}
		}
	}
	
	option = {
		name = EVTOPTC_SRI_129 # I will sneak inside!
		
		random_list = {
			33 = {
				mult_modifier = {
					factor = 2
					intrigue >= 40
				}
				
				mult_modifier = {
					factor = 2
					intrigue >= 36
				}
				
				mult_modifier = {
					factor = 2
					intrigue >= 32
				}
				
				mult_modifier = {
					factor = 2
					intrigue >= 28
				}
				
				mult_modifier = {
					factor = 2
					intrigue >= 24
				}
				
				mult_modifier = {
					factor = 2
					intrigue >= 20
				}
				
				mult_modifier = {
					factor = 2
					intrigue >= 16
				}
				
				character_event = { id = sri.144 days = 1 } # It worked
			}
			
			34 = {
				character_event = { id = sri.145 days = 1 } # You made too much noise - fight or leave?
			}
			
			33 = {
				mult_modifier = {
					factor = 2
					intrigue < 12
				}
				
				mult_modifier = {
					factor = 2
					intrigue < 8
				}
				
				mult_modifier = {
					factor = 2
					intrigue < 4
				}
				
				character_event = { id = sri.146 days = 1 } # Guards arrive to arrest you
			}
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = brave
				}
			}
			
			mult_modifier = {
				factor = 0.1
				intrigue < 10
			}
			
			mult_modifier = {
				factor = 0.1
				trait = honest
			}
		}
	}
	
	option = {
		name = EVTOPTD_SRI_129 # This is too dangerous...
		
		prestige = -25
		
		character_event = { id = sri.130 days = 30 random = 30 } # Returned home
		
		event_target:aclla_to_rescue = {
			clr_character_flag = aclla_being_rescued
		}
		
		ai_chance = {
			factor = 0
		}
	}
}

# Aborted rescue attempt - returned home
character_event = {
	id = sri.130
	desc = EVTDESC_SRI_130
	picture = GFX_evt_stressed_ruler
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_130 # Maybe I'll do it in the future...
		
		remove_trait = travelling
		clr_character_flag = do_not_disturb
		clr_character_flag = aclla_no_more_guards
	}
}

# You fought the guards - won
character_event = {
	id = sri.131
	desc = EVTDESC_SRI_131
	picture = GFX_evt_dueling_knights_hf
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_131 # I knew I could do it!
		
		prestige = 25
		
		character_event = { id = sri.147 days = 1 } # Inside - now what?
		
		set_character_flag = aclla_no_more_guards
	}
}

# You fought the guards - won but made too much noise
character_event = {
	id = sri.132
	desc = EVTDESC_SRI_132
	picture = GFX_evt_dueling_knights_hf
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_132 # Curses!
		
		prestige = -5
		
		character_event = { id = sri.130 days = 30 random = 30 } # Return home
		
		event_target:aclla_to_rescue = {
			clr_character_flag = aclla_being_rescued
		}
	}
}

# You fought the guards - wounded
character_event = {
	id = sri.133
	desc = EVTDESC_SRI_133
	picture = GFX_evt_dueling_knights_hf
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_133 # I knew I could do it!
		
		prestige = 10
		
		add_trait = wounded
		
		character_event = { id = sri.147 days = 1 } # Inside - now what?
		
		set_character_flag = aclla_no_more_guards
	}
}

# You fought the guards - wounded and made too much noise
character_event = {
	id = sri.134
	desc = EVTDESC_SRI_134
	picture = GFX_evt_dueling_knights_hf
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_134 # Curses!
		
		prestige = -15
		
		add_trait = wounded
		
		character_event = { id = sri.130 days = 30 random = 30 } # Return home
		
		event_target:aclla_to_rescue = {
			clr_character_flag = aclla_being_rescued
		}
	}
}

# You fought the guards - maimed
character_event = {
	id = sri.135
	desc = EVTDESC_SRI_135
	picture = GFX_evt_dueling_knights_hf
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_135 # I knew I could do it!
		
		add_maimed_trait_effect = yes
		
		character_event = { id = sri.147 days = 1 } # Inside - now what?
		
		set_character_flag = aclla_no_more_guards
	}
}

# You fought the guards - maimed and made too much noise
character_event = {
	id = sri.136
	desc = EVTDESC_SRI_136
	picture = GFX_evt_dueling_knights_hf
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_136 # Curses!
		
		prestige = -25
		
		add_maimed_trait_effect = yes
		
		character_event = { id = sri.130 days = 30 random = 30 } # Return home
		
		event_target:aclla_to_rescue = {
			clr_character_flag = aclla_being_rescued
		}
	}
}

# You fought the guards - captured
character_event = {
	id = sri.137
	desc = EVTDESC_SRI_137
	picture = GFX_evt_into_the_dungeon
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_137 # This is bad...
		
		prestige = -25
		
		# GRACETODO
		
		d_acllahuasi = {
			holder_scope = {
				reverse_imprison = ROOT
				
				character_event = { id = sri.138 days = 1 }
			}
		}
		
		event_target:aclla_to_rescue = {
			clr_character_flag = aclla_being_rescued
		}
	}
}

# Aclla leader notified - might make an example of your kinswoman
character_event = {
	id = sri.138
	desc = EVTDESC_SRI_138
	picture = GFX_evt_into_the_dungeon
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_138 # This is what FROM deserves!
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					event_target:aclla_to_rescue = {
						any_rival = {
							character = ROOT
						}
						
						NOT = {
							has_character_flag = aclla_being_sacrificed
						}
					}
					
					AND = {
						trait = cruel
						event_target:aclla_to_rescue = {
							NOR = {
								any_friend = {
									character = ROOT
								}
								any_lover = {
									character = ROOT
								}
							}
						}
						
						NOT = {
							has_character_flag = aclla_being_sacrificed
						}
					}
				}
			}
		}
	}
	
	option = {
		trigger = {
			event_target:aclla_to_rescue = {
				NOT = {
					has_character_flag = aclla_being_sacrificed
				}
			}
		}
		
		name = EVTOPTB_SRI_138 # Time to make an example!
		
		# GRACETODO
		
		ROOT = {
			event_target:aclla_to_rescue = { save_event_target_as = kinslayer_target }
			add_kinslayer_trait_effect = yes
		}
		
		event_target:aclla_to_rescue = {
			death = {
				death_reason = death_execution
				killer = ROOT
			}
		}
		
		FROM = {
			character_event = { id = sri.139 } # Inform FROM!
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				OR = {
					event_target:aclla_to_rescue = {
						any_rival = {
							character = ROOT
						}
					}
					
					AND = {
						trait = cruel
						event_target:aclla_to_rescue = {
							NOR = {
								any_friend = {
									character = ROOT
								}
								any_lover = {
									character = ROOT
								}
							}
						}
					}
				}
			}
		}
	}
}

# Notified that an example was made
character_event = {
	id = sri.139
	desc = EVTDESC_SRI_139
	picture = GFX_evt_slit_throat_hf
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_139 # You will pay for this!
		
		add_rival = FROM
	}
}

# You fought the guards - killed
character_event = {
	id = sri.140
	desc = EVTDESC_SRI_140
	picture = GFX_evt_bloody_man
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_140 # This cannot be!
		
		prestige = -25
		
		death = {
			death_reason = death_battle
		}
		
		event_target:aclla_to_rescue = {
			clr_character_flag = aclla_being_rescued
		}
	}
}

# Bribery succeded
character_event = {
	id = sri.141
	desc = EVTDESC_SRI_141
	picture = GFX_evt_jailbreak
	border = GFX_event_normal_frame_economy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_141 # Just as planned!
		
		wealth = -100
		
		character_event = { id = sri.147 days = 1 } # Inside - now what?
		
		set_character_flag = aclla_no_more_guards
	}
}

# Bribery failed - the guards tell you to leave - fight?
character_event = {
	id = sri.142
	desc = EVTDESC_SRI_142
	picture = GFX_evt_jailbreak
	border = GFX_event_normal_frame_economy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_142 # I guess it's time to fight...
		
		random_list = { # No noise penalty
			20 = {
				trigger = {
					combat_rating >= 25
				}
				
				mult_modifier = {
					factor = 2
					combat_rating >= 75
				}
				
				character_event = { id = sri.131 days = 1 } # Clean victory
			}
			
			20 = {
				trigger = {
					combat_rating < 100
				}
				
				character_event = { id = sri.133 days = 1 } # Wounded
			}
			
			20 = {
				trigger = {
					combat_rating < 75
				}
				
				character_event = { id = sri.135 days = 1 } # Maimed
			}
			
			20 = {
				trigger = {
					combat_rating < 75
				}
				
				mult_modifier = {
					factor = 0.5
					combat_rating >= 50
				}
				
				character_event = { id = sri.137 days = 1 } # Captured
			}
			
			20 = {
				trigger = {
					combat_rating < 50
				}
				
				character_event = { id = sri.140 days = 1 } # Killed
			}
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = craven
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SRI_142 # I guess it's time to leave...
		
		prestige = -25
		
		character_event = { id = sri.130 days = 30 random = 30 } # Return home
		
		event_target:aclla_to_rescue = {
			clr_character_flag = aclla_being_rescued
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = brave
				}
			}
		}
	}
}

# Bribery crit failed - time to fight!
character_event = {
	id = sri.143
	desc = EVTDESC_SRI_143
	picture = GFX_evt_jailbreak
	border = GFX_event_normal_frame_economy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_143 # I guess it's time to fight...
		
		random_list = { # No noise penalty
			20 = {
				trigger = {
					combat_rating >= 25
				}
				
				mult_modifier = {
					factor = 2
					combat_rating >= 75
				}
				
				character_event = { id = sri.131 days = 1 } # Clean victory
			}
			
			20 = {
				trigger = {
					combat_rating < 100
				}
				
				character_event = { id = sri.133 days = 1 } # Wounded
			}
			
			20 = {
				trigger = {
					combat_rating < 75
				}
				
				character_event = { id = sri.135 days = 1 } # Maimed
			}
			
			20 = {
				trigger = {
					combat_rating < 75
				}
				
				mult_modifier = {
					factor = 0.5
					combat_rating >= 50
				}
				
				character_event = { id = sri.137 days = 1 } # Captured
			}
			
			20 = {
				trigger = {
					combat_rating < 50
				}
				
				character_event = { id = sri.140 days = 1 } # Killed
			}
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = craven
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SRI_143 # I will come quietly!
		
		prestige = -25
		
		# GRACETODO
		
		d_acllahuasi = {
			holder_scope = {
				reverse_imprison = ROOT
				
				character_event = { id = sri.138 days = 1 }
			}
		}
		
		event_target:aclla_to_rescue = {
			clr_character_flag = aclla_being_rescued
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = brave
				}
			}
		}
	}
}

# Sneaking in - you succeed
character_event = {
	id = sri.144
	desc = EVTDESC_SRI_144
	picture = GFX_evt_jailbreak
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_144 # Just as planned!
		
		prestige = 25
		
		character_event = { id = sri.147 days = 1 } # Inside - now what?
	}
}

# Sneaking in - can't find a way - try another method?
character_event = {
	id = sri.145
	desc = EVTDESC_SRI_145
	picture = GFX_evt_jailbreak
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_145 # I guess it's time to fight...
		
		random_list = { # No noise penalty
			20 = {
				trigger = {
					combat_rating >= 25
				}
				
				mult_modifier = {
					factor = 2
					combat_rating >= 75
				}
				
				character_event = { id = sri.131 days = 1 } # Clean victory
			}
			
			20 = {
				trigger = {
					combat_rating < 100
				}
				
				character_event = { id = sri.133 days = 1 } # Wounded
			}
			
			20 = {
				trigger = {
					combat_rating < 75
				}
				
				character_event = { id = sri.135 days = 1 } # Maimed
			}
			
			20 = {
				trigger = {
					combat_rating < 75
				}
				
				mult_modifier = {
					factor = 0.5
					combat_rating >= 50
				}
				
				character_event = { id = sri.137 days = 1 } # Captured
			}
			
			20 = {
				trigger = {
					combat_rating < 50
				}
				
				character_event = { id = sri.140 days = 1 } # Killed
			}
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = craven
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SRI_142 # I guess it's time to leave...
		
		prestige = -25
		
		character_event = { id = sri.130 days = 30 random = 30 } # Return home
		
		event_target:aclla_to_rescue = {
			clr_character_flag = aclla_being_rescued
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = brave
				}
			}
		}
	}
}

# Sneaking in - crit failed - time to fight!
character_event = {
	id = sri.146
	desc = EVTDESC_SRI_146
	picture = GFX_evt_jailbreak
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_146 # I guess it's time to fight...
		
		random_list = { # No noise penalty
			20 = {
				trigger = {
					combat_rating >= 25
				}
				
				mult_modifier = {
					factor = 2
					combat_rating >= 75
				}
				
				character_event = { id = sri.131 days = 1 } # Clean victory
			}
			
			20 = {
				trigger = {
					combat_rating < 100
				}
				
				character_event = { id = sri.133 days = 1 } # Wounded
			}
			
			20 = {
				trigger = {
					combat_rating < 75
				}
				
				character_event = { id = sri.135 days = 1 } # Maimed
			}
			
			20 = {
				trigger = {
					combat_rating < 75
				}
				
				mult_modifier = {
					factor = 0.5
					combat_rating >= 50
				}
				
				character_event = { id = sri.137 days = 1 } # Captured
			}
			
			20 = {
				trigger = {
					combat_rating < 50
				}
				
				character_event = { id = sri.140 days = 1 } # Killed
			}
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = craven
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SRI_146 # I will come quietly!
		
		prestige = -25
		
		# GRACETODO
		
		d_acllahuasi = {
			holder_scope = {
				reverse_imprison = ROOT
				
				character_event = { id = sri.138 days = 1 }
			}
		}
		
		event_target:aclla_to_rescue = {
			clr_character_flag = aclla_being_rescued
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = brave
				}
			}
		}
	}
}

# Inside - let's see what happens
character_event = {
	id = sri.147
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		random_list = {
			1 = {
				trigger = {
					intrigue < 20
					
					d_acllahuasi = {
						holder_scope = {
							any_courtier = {
								is_inaccessible_or_incapable_trigger = no
								
								NOR = {
									has_character_flag = aclla_being_rescued
									has_character_flag = aclla_rescue_attempt_lover
									has_character_flag = aclla_rescue_attempt_snitch
									has_character_flag = aclla_being_married
									has_character_flag = aclla_being_sacrificed
								}
								
								trait = aclla
								intrigue >= 10
								
								OR = {
									true_inca_religion_trigger = yes
									trait = cruel
									trait = just
									trait = honest
									AND = {
										religion_openly_inca_or_reformed_trigger = yes
										trait = zealous
									}
								}
							}
						}
					}
				}
				
				d_acllahuasi = {
					holder_scope = {
						random_courtier = {
							limit = {
								is_inaccessible_or_incapable_trigger = no
								
								NOR = {
									has_character_flag = aclla_being_rescued
									has_character_flag = aclla_rescue_attempt_lover
									has_character_flag = aclla_rescue_attempt_snitch
									has_character_flag = aclla_being_married
									has_character_flag = aclla_being_sacrificed
								}
								
								trait = aclla
								intrigue >= 10
								
								OR = {
									true_inca_religion_trigger = yes
									trait = cruel
									trait = just
									trait = honest
									AND = {
										religion_openly_inca_or_reformed_trigger = yes
										trait = zealous
									}
								}
							}
							set_character_flag = aclla_rescue_attempt_snitch
							save_event_target_as = aclla_rescue_attempt_snitch
						}
					}
				}
				
				if = {
					limit = {
						has_character_flag = aclla_no_more_guards
					}
					character_event = { id = sri.148 } # No guards!
				}
				
				else = {
					character_event = { id = sri.149 } # Guards!
				}
			}
			
			1 = {
				trigger = {
					d_acllahuasi = {
						holder_scope = {
							any_courtier = {
								is_inaccessible_or_incapable_trigger = no
								
								NOR = {
									has_character_flag = aclla_being_rescued
									has_character_flag = aclla_rescue_attempt_lover
									has_character_flag = aclla_rescue_attempt_snitch
									has_character_flag = aclla_being_married
									has_character_flag = aclla_being_sacrificed
								}
								
								is_attractive_trigger = yes
								is_unattractive_trigger = no
								
								trait = aclla
								is_valid_romance_target = ROOT
							}
						}
					}
				}
				
				d_acllahuasi = {
					holder_scope = {
						random_courtier = {
							limit = {
								is_inaccessible_or_incapable_trigger = no
								
								NOR = {
									has_character_flag = aclla_being_rescued
									has_character_flag = aclla_rescue_attempt_lover
									has_character_flag = aclla_rescue_attempt_snitch
									has_character_flag = aclla_being_married
									has_character_flag = aclla_being_sacrificed
								}
								
								is_attractive_trigger = yes
								is_unattractive_trigger = no
								
								trait = aclla
								is_valid_romance_target = ROOT
							}
							
							set_character_flag = aclla_rescue_attempt_lover
							save_event_target_as = aclla_rescue_attempt_lover
						}
					}
				}
				
				character_event = { id = sri.155 } # Possible tumbling
			}
			
			1 = {
				trigger = {
					true_inca_religion_trigger = yes
				}
				
				mult_modifier = {
					factor = 10
					trait = zealous
				}
				
				# Possible second thoughts
				character_event = { id = sri.163 days = 1 }
			}
			
			5 = {
			
				# Go directly to kinswoman
				character_event = { id = sri.164 days = 1 }
			}
		}
	}
}

# No guards arrive - how do you deal with the snitch?
character_event = {
	id = sri.148
	desc = EVTDESC_SRI_148
	picture = GFX_evt_jailbreak
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_148 # Get lost!
		
		piety = 5
		
		character_event = { id = sri.164 days = 1 }
		
		event_target:aclla_rescue_attempt_snitch = {
			clr_character_flag = aclla_rescue_attempt_snitch
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					trait = cruel
					AND = {
						NOT = {
							trait = kind
						}
						event_target:aclla_rescue_attempt_snitch = {
							any_rival = {
								character = ROOT
							}
						}
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SRI_148 # And now you die!
		
		piety = -10
		
		character_event = { id = sri.164 days = 1 }
		
		event_target:aclla_rescue_attempt_snitch = {
			death = {
				death_reason = death_murder_unknown
				killer = ROOT
			}
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				OR = {
					trait = cruel
					event_target:aclla_rescue_attempt_snitch = {
						any_rival = {
							character = ROOT
						}
					}
				}
				
				NAND = {
					trait = kind
					event_target:aclla_rescue_attempt_snitch = {
						OR = {
							any_friend = {
								character = ROOT
							}
							any_lover = {
								character = ROOT
							}
						}
					}
				}
			}
		}
	}
}

# Spotted by someone sneaky - she calls the guards
character_event = {
	id = sri.149
	desc = EVTDESC_SRI_149
	picture = GFX_evt_jailbreak
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_149 # I guess it's time to fight...
		
		random_list = { # No noise penalty
			20 = {
				trigger = {
					combat_rating > 25
				}
				
				mult_modifier = {
					factor = 2
					combat_rating >= 75
				}
				
				character_event = { id = sri.150 days = 1 } # Clean victory
			}
			
			20 = {
				trigger = {
					combat_rating < 100
				}
				
				character_event = { id = sri.151 days = 1 } # Wounded
			}
			
			20 = {
				trigger = {
					combat_rating < 75
				}
				
				character_event = { id = sri.152 days = 1 } # Maimed
			}
			
			20 = {
				trigger = {
					combat_rating < 75
				}
				
				mult_modifier = {
					factor = 0.5
					combat_rating >= 50
				}
				character_event = { id = sri.153 days = 1 } # Captured
			}
			
			20 = {
				trigger = {
					combat_rating < 50
				}
				
				character_event = { id = sri.154 days = 1 } # Killed
			}
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = craven
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SRI_149 # I will come quietly!
		
		prestige = -25
		
		# GRACETODO
		
		d_acllahuasi = {
			holder_scope = {
				reverse_imprison = ROOT
				
				character_event = { id = sri.138 days = 1 }
			}
		}
		
		event_target:aclla_to_rescue = {
			clr_character_flag = aclla_being_rescued
		}
		
		event_target:aclla_rescue_attempt_snitch = {
			clr_character_flag = aclla_rescue_attempt_snitch
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = brave
				}
			}
		}
	}
}

# You fought the guards - won - how deal with the snitch?
character_event = {
	id = sri.150
	desc = EVTDESC_SRI_150
	picture = GFX_evt_jailbreak
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_150 # Get lost!
		
		prestige = 25
		piety = 5
		
		character_event = { id = sri.164 days = 1 }
		
		event_target:aclla_rescue_attempt_snitch = {
			clr_character_flag = aclla_rescue_attempt_snitch
		}
		
		set_character_flag = aclla_no_more_guards
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					trait = cruel
					AND = {
						NOT = {
							trait = kind
						}
						event_target:aclla_rescue_attempt_snitch = {
							any_rival = {
								character = ROOT
							}
						}
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SRI_150 # And now you die!
		
		prestige = 25
		piety = -10
		
		character_event = { id = sri.164 days = 1 }
		
		set_character_flag = aclla_no_more_guards
		
		event_target:aclla_rescue_attempt_snitch = {
			death = {
				death_reason = death_murder_unknown
				killer = ROOT
			}
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				OR = {
					trait = cruel
					event_target:aclla_rescue_attempt_snitch = {
						any_rival = {
							character = ROOT
						}
					}
				}
				
				NAND = {
					trait = kind
					event_target:aclla_rescue_attempt_snitch = {
						OR = {
							any_friend = {
								character = ROOT
							}
							any_lover = {
								character = ROOT
							}
						}
					}
				}
			}
		}
	}
}

# You fought the guards - wounded
character_event = {
	id = sri.151
	desc = EVTDESC_SRI_151
	picture = GFX_evt_jailbreak
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_150 # Get lost!
		
		prestige = 10
		add_trait = wounded
		piety = 5
		
		character_event = { id = sri.164 days = 1 }
		
		event_target:aclla_rescue_attempt_snitch = {
			clr_character_flag = aclla_rescue_attempt_snitch
		}
		
		set_character_flag = aclla_no_more_guards
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					trait = cruel
					AND = {
						NOT = {
							trait = kind
						}
						event_target:aclla_rescue_attempt_snitch = {
							any_rival = {
								character = ROOT
							}
						}
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SRI_151 # And now you die!
		
		prestige = 10
		piety = -10
		add_trait = wounded
		
		character_event = { id = sri.164 days = 1 }
		
		event_target:aclla_rescue_attempt_snitch = {
			death = {
				death_reason = death_murder_unknown
				killer = ROOT
			}
		}
		
		set_character_flag = aclla_no_more_guards
		
		ai_chance = {
			factor = 100
			trigger = {
				OR = {
					trait = cruel
					event_target:aclla_rescue_attempt_snitch = {
						any_rival = {
							character = ROOT
						}
					}
				}
				
				NAND = {
					trait = kind
					event_target:aclla_rescue_attempt_snitch = {
						OR = {
							any_friend = {
								character = ROOT
							}
							any_lover = {
								character = ROOT
							}
						}
					}
				}
			}
		}
	}
}

# You fought the guards - maimed
character_event = {
	id = sri.152
	desc = EVTDESC_SRI_152
	picture = GFX_evt_jailbreak
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_150 # Get lost!
		
		add_maimed_trait_effect = yes
		piety = 5
		
		character_event = { id = sri.164 days = 1 }
		
		event_target:aclla_rescue_attempt_snitch = {
			clr_character_flag = aclla_rescue_attempt_snitch
		}
		
		set_character_flag = aclla_no_more_guards
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					trait = cruel
					AND = {
						NOT = {
							trait = kind
						}
						event_target:aclla_rescue_attempt_snitch = {
							any_rival = {
								character = ROOT
							}
						}
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SRI_152 # And now you die!
		
		piety = -10
		add_maimed_trait_effect = yes
		
		character_event = { id = sri.164 days = 1 }
		
		event_target:aclla_rescue_attempt_snitch = {
			death = {
				death_reason = death_murder_unknown
				killer = ROOT
			}
		}
		
		set_character_flag = aclla_no_more_guards
		
		ai_chance = {
			factor = 100
			
			trigger = {
				OR = {
					trait = cruel
					event_target:aclla_rescue_attempt_snitch = {
						any_rival = {
							character = ROOT
						}
					}
				}
				
				NAND = {
					trait = kind
					event_target:aclla_rescue_attempt_snitch = {
						OR = {
							any_friend = {
								character = ROOT
							}
							any_lover = {
								character = ROOT
							}
						}
					}
				}
			}
		}
	}
}

# You fought the guards - captured
character_event = {
	id = sri.153
	desc = EVTDESC_SRI_153
	picture = GFX_evt_into_the_dungeon
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_153 # This is bad...
		
		prestige = -25
		
		# GRACETODO
		
		d_acllahuasi = {
			holder_scope = {
				reverse_imprison = ROOT
				character_event = { id = sri.138 days = 1 }
			}
		}
		
		event_target:aclla_rescue_attempt_snitch = {
			clr_character_flag = aclla_rescue_attempt_snitch
		}
		
		event_target:aclla_to_rescue = {
			clr_character_flag = aclla_being_rescued
		}
	}
}

# You fought the guards - killed
character_event = {
	id = sri.154
	desc = EVTDESC_SRI_154
	picture = GFX_evt_bloody_man
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_154 # This cannot be!
		
		prestige = -25
		
		death = {
			death_reason = death_battle
		}
		
		event_target:aclla_rescue_attempt_snitch = {
			clr_character_flag = aclla_rescue_attempt_snitch
		}
		
		event_target:aclla_to_rescue = {
			clr_character_flag = aclla_being_rescued
		}
	}
}

# Adult aclla is quite pretty - try to tumble?
character_event = {
	id = sri.155
	desc = EVTDESC_SRI_155
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_155 # I have time for a detour...
		
		piety = -10
		
		random_list = {
			33 = {
				trigger = {
					NOR = {
						event_target:aclla_rescue_attempt_lover = {
							OR = {
								any_rival = {
									character = ROOT
								}
								trait = celibate
								trait = chaste
								AND = {
									true_inca_religion_trigger = yes
									trait = zealous
								}
							}
						}
						is_unattractive_trigger = yes
					}
				}
				
				mult_modifier = {
					factor = 10
					OR = {
						trait = master_seducer
						trait = master_seductress
					}
				}
				
				character_event = { id = sri.156 days = 1 }
			}
			
			34 = {
				trigger = {
					NOR = {
						is_rival = event_target:aclla_rescue_attempt_lover
						is_lover = event_target:aclla_rescue_attempt_lover
					}
				}
				
				character_event = { id = sri.160 days = 1 }
			}
			
			33 = {
				trigger = {
					NOR = {
						event_target:aclla_rescue_attempt_lover = {
							OR = {
								any_friend = {
									character = ROOT
								}
								any_lover = {
									character = ROOT
								}
								trait = lustful
							}
						}
						is_attractive_trigger = yes
						trait = master_seducer
						trait = master_seductress
					}
				}
				
				mult_modifier = {
					factor = 10
					event_target:aclla_rescue_attempt_lover = {
						true_inca_religion_trigger = yes
						trait = zealous
					}
				}
				
				# Crit fail
				event_target:aclla_rescue_attempt_lover = {
					clr_character_flag = aclla_rescue_attempt_lover
					save_event_target_as = aclla_rescue_attempt_snitch
					set_character_flag = aclla_rescue_attempt_snitch
					
					if = {
						limit = {
							has_character_flag = aclla_no_more_guards
						}
						character_event = { id = sri.161 } # No guards!
					}
					
					else = {
						character_event = { id = sri.162 } # Guards!
					}
				}
			}
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					trait = chaste
					trait = celibate
					AND = {
						true_inca_religion_trigger = yes
						trait = zealous
						NOT = {
							trait = lustful
						}
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = content
			}
			
			mult_modifier = {
				factor = 0.1
				event_target:aclla_rescue_attempt_lover = {
					is_unattractive_trigger = yes
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SRI_155 # I must focus!
		
		piety = 10
		
		character_event = { id = sri.164 days = 1 }
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = lustful
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = ambitious
			}
			
			mult_modifier = {
				factor = 0.1
				event_target:aclla_rescue_attempt_lover = {
					is_attractive_trigger = yes
				}
			}
		}
	}
}

# Tumbling attempt succeeded - take her with you (and make her a lover) or leave?
character_event = {
	id = sri.156
	desc = EVTDESC_SRI_156
	picture = GFX_evt_lovers
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_156 # Come with me if you want to leave!
		
		event_target:aclla_rescue_attempt_lover = {
			save_event_target_as = sex_partner
		}
		
		unprotected_sex_effect_event_target = yes
		
		add_lover = event_target:aclla_rescue_attempt_lover
		
		character_event = { id = sri.164 days = 1 }
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = cruel
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SRI_156 # Bye!
		
		remove_trait_kind_effect = yes
		
		event_target:aclla_rescue_attempt_lover = {
			piety = -10
			save_event_target_as = sex_partner
		}
		
		unprotected_sex_effect_event_target = yes
		
		event_target:aclla_rescue_attempt_lover = {
			character_event = { id = sri.157 }
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = kind
				}
			}
		}
	}
	
	option = {
		name = EVTOPTC_SRI_156 # I can't afford a loose end...
		
		piety = -25
		
		add_trait_fully_cruel_effect = yes
		
		character_event = { id = sri.164 days = 1 }
		
		event_target:aclla_rescue_attempt_lover = {
			piety = -10
			save_event_target_as = sex_partner
		}
		
		unprotected_sex_effect_event_target = yes
		
		event_target:aclla_rescue_attempt_lover = {
			death = {
				death_reason = death_murder_unknown
				killer = ROOT
			}
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				trait = cruel
			}
		}
	}
}

# Left her behind - does she call the guards?
character_event = {
	id = sri.157
	desc = EVTDESC_SRI_157
	picture = GFX_evt_lovers
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_157 # It's probably for the best...
		
		prestige = -10
		
		FROM = {
			character_event = { id = sri.164 days = 1 }
		}
		
		clr_character_flag = aclla_rescue_attempt_lover
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					trait = proud
					trait = cruel
					trait = wroth
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = proud
			}
			
			mult_modifier = {
				factor = 0.1
				trait = cruel
			}
			
			mult_modifier = {
				factor = 0.1
				trait = wroth
			}
		}
	}
	
	option = {
		name = EVTOPTB_SRI_157 # Hell hath no fury...
		
		add_rival = FROM
		
		save_event_target_as = aclla_rescue_attempt_snitch
		clr_character_flag = aclla_rescue_attempt_lover
		set_character_flag = aclla_rescue_attempt_snitch
		
		if = {
			limit = {
				has_character_flag = aclla_no_more_guards
			}
			
			character_event = { id = sri.158 } # No guards!
		}
		
		else = {
			character_event = { id = sri.159 } # Guards!
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					trait = humble
					trait = kind
					trait = content
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = humble
			}
			
			mult_modifier = {
				factor = 0.1
				trait = kind
			}
			
			mult_modifier = {
				factor = 0.1
				trait = content
			}
		}
	}
}

# No guards arrive - how deal with the snitch?
character_event = {
	id = sri.158
	desc = EVTDESC_SRI_158
	picture = GFX_evt_jailbreak
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_158 # Get lost!
		
		piety = 5
		
		character_event = { id = sri.164 days = 1 }
		
		event_target:aclla_rescue_attempt_snitch = {
			clr_character_flag = aclla_rescue_attempt_snitch
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					trait = cruel
					AND = {
						NOT = {
							trait = kind
						}
						event_target:aclla_rescue_attempt_snitch = {
							any_rival = {
								character = ROOT
							}
						}
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SRI_158 # And now you die!
		
		piety = -10
		
		character_event = { id = sri.164 days = 1 }
		
		event_target:aclla_rescue_attempt_snitch = {
			death = {
				death_reason = death_murder_unknown
				killer = ROOT
			}
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				OR = {
					trait = cruel
					event_target:aclla_rescue_attempt_snitch = {
						any_rival = {
							character = ROOT
						}
					}
				}
				
				NAND = {
					trait = kind
					event_target:aclla_rescue_attempt_snitch = {
						OR = {
							any_friend = {
								character = ROOT
							}
							any_lover = {
								character = ROOT
							}
						}
					}
				}
			}
		}
	}
}

# Woman scorned calls guards
character_event = {
	id = sri.159
	desc = EVTDESC_SRI_159
	picture = GFX_evt_jailbreak
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_159 # I guess it's time to fight...
		
		random_list = { # No noise penalty
			20 = {
				trigger = {
					combat_rating >= 25
				}
				
				mult_modifier = {
					factor = 2
					combat_rating >= 75
				}
				
				character_event = { id = sri.150 days = 1 } # Clean victory
			}
			
			20 = {
				trigger = {
					combat_rating < 100
				}
				
				character_event = { id = sri.151 days = 1 } # Wounded
			}
			
			20 = {
				trigger = {
					combat_rating < 75
				}
				
				character_event = { id = sri.152 days = 1 } # Maimed
			}
			
			20 = {
				trigger = {
					combat_rating < 75
				}
				
				mult_modifier = {
					factor = 0.5
					combat_rating >= 50
				}
				character_event = { id = sri.153 days = 1 } # Captured
			}
			
			20 = {
				trigger = {
					combat_rating < 50
				}
				
				character_event = { id = sri.154 days = 1 } # Killed
			}
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = craven
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SRI_159 # I will come quietly!
		
		prestige = -25
		
		# GRACETODO
		
		d_acllahuasi = {
			holder_scope = {
				reverse_imprison = ROOT
				
				character_event = { id = sri.138 days = 1 }
			}
		}
		
		event_target:aclla_to_rescue = {
			clr_character_flag = aclla_being_rescued
		}
		
		event_target:aclla_rescue_attempt_snitch = {
			clr_character_flag = aclla_rescue_attempt_snitch
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = brave
				}
			}
		}
	}
}

# Tumbling attempt failed - she promises to stay silent
character_event = {
	id = sri.160
	desc = EVTDESC_SRI_160
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_160 # Bye!
		
		character_event = { id = sri.164 days = 1 }
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					trait = cruel
					trait = paranoid
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SRI_160 # I can't afford a loose end...
		
		piety = -25
		
		character_event = { id = sri.164 days = 1 }
		
		event_target:aclla_rescue_attempt_lover = {
			death = {
				death_reason = death_murder_unknown
				killer = ROOT
			}
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				OR = {
					trait = cruel
					trait = paranoid
				}
			}
		}
	}
}

# Tumbling attempt crit failed - guards called but don't arrive
character_event = {
	id = sri.161
	desc = EVTDESC_SRI_161
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_158 # Get lost!
		
		piety = 5
		
		character_event = { id = sri.164 days = 1 }
		
		event_target:aclla_rescue_attempt_snitch = {
			clr_character_flag = aclla_rescue_attempt_snitch
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					trait = cruel
					AND = {
						NOT = {
							trait = kind
						}
						event_target:aclla_rescue_attempt_snitch = {
							any_rival = {
								character = ROOT
							}
						}
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SRI_161 # And now you die!
		
		piety = -10
		
		character_event = { id = sri.164 days = 1 }
		
		event_target:aclla_rescue_attempt_snitch = {
			death = {
				death_reason = death_murder_unknown
				killer = ROOT
			}
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				OR = {
					trait = cruel
					event_target:aclla_rescue_attempt_snitch = {
						any_rival = {
							character = ROOT
						}
					}
				}
				
				NAND = {
					trait = kind
					event_target:aclla_rescue_attempt_snitch = {
						OR = {
							any_friend = {
								character = ROOT
							}
							any_lover = {
								character = ROOT
							}
						}
					}
				}
			}
		}
	}
}

# Tumbling attempt crit failed - guards called
character_event = {
	id = sri.162
	desc = EVTDESC_SRI_162
	picture = GFX_evt_jailbreak
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_162 # I guess it's time to fight...
		
		random_list = { # No noise penalty
			20 = {
				trigger = {
					combat_rating >= 25
				}
				
				mult_modifier = {
					factor = 2
					combat_rating >= 75
				}
				
				character_event = { id = sri.150 days = 1 } # Clean victory
			}
			
			20 = {
				trigger = {
					combat_rating < 100
				}
				
				character_event = { id = sri.151 days = 1 } # Wounded
			}
			
			20 = {
				trigger = {
					combat_rating < 75
				}
				
				character_event = { id = sri.152 days = 1 } # Maimed
			}
			
			20 = {
				trigger = {
					combat_rating < 75
				}
				
				mult_modifier = {
					factor = 0.5
					combat_rating >= 50
				}
				character_event = { id = sri.153 days = 1 } # Captured
			}
			
			20 = {
				trigger = {
					combat_rating < 50
				}
				
				character_event = { id = sri.154 days = 1 } # Killed
			}
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = craven
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SRI_162 # I will come quietly!
		
		prestige = -25
		
		# GRACETODO
		
		d_acllahuasi = {
			holder_scope = {
				reverse_imprison = ROOT
				
				character_event = { id = sri.138 days = 1 }
			}
		}
		
		event_target:aclla_to_rescue = {
			clr_character_flag = aclla_being_rescued
		}
		
		event_target:aclla_rescue_attempt_snitch = {
			clr_character_flag = aclla_rescue_attempt_snitch
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = brave
				}
			}
		}
	}
}

# Zealous Inca - second thoughts
character_event = {
	id = sri.163
	desc = EVTDESC_SRI_163
	picture = GFX_evt_jailbreak
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_163 # I came here for a reason!
		
		piety = -25
		
		remove_trait_zealous_effect = yes
		
		character_event = { id = sri.164 days = 1 }
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = zealous
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SRI_163 # I guess I should leave...
		
		piety = 25
		
		remove_trait_cynical_effect = yes
		
		character_event = { id = sri.130 days = 30 random = 30 } # Returned home
		
		event_target:aclla_to_rescue = {
			clr_character_flag = aclla_being_rescued
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = cynical
				}
			}
		}
	}
}

# You finally reach your kinswoman
character_event = {
	id = sri.164
	desc = EVTDESC_SRI_164
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_164 # Come with me if you want to leave!
		
		random_list = {
			50 = {
				trigger = {
					NOT = {
						event_target:aclla_to_rescue = {
							true_inca_religion_trigger = yes
							OR = {
								AND = {
									NOT = {
										has_character_flag = aclla_being_sacrificed
									}
									trait = zealous
								}
								NOT = {
									trait = cynical
								}
							}
						}
					}
				}
				
				mult_modifier = {
					factor = 0.1
					any_rival = {
						character = event_target:aclla_to_rescue
					}
				}
				
				# She's willing to leave
				character_event = { id = sri.165 }
			}
			
			40 = {
				trigger = {
					NOR = {
						event_target:aclla_to_rescue = {
							true_inca_religion_trigger = no
							trait = zealous
						}
						event_target:aclla_to_rescue = {
							has_character_flag = aclla_being_sacrificed
							NOT = {
								trait = zealous
							}
						}
					}
				}
				
				mult_modifier = {
					factor = 0.1
					any_rival = {
						character = event_target:aclla_to_rescue
					}
				}
				
				mult_modifier = {
					factor = 0.1
					any_friend = {
						character = event_target:aclla_to_rescue
					}
				}
				
				mult_modifier = {
					factor = 0.1
					any_lover = { # Extremely unlikely to be relevant...
						character = event_target:aclla_to_rescue
					}
				}
				
				# She's unwilling to leave
				character_event = { id = sri.166 }
			}
			
			10 = {
				trigger = {
					event_target:aclla_to_rescue = {
						true_inca_religion_trigger = yes
						
						OR = {
							NOT = {
								has_character_flag = aclla_being_sacrificed
							}
							trait = zealous
						}
					}
				}
				
				mult_modifier = {
					factor = 0.1
					any_friend = {
						character = event_target:aclla_to_rescue
					}
				}
				
				mult_modifier = {
					factor = 0.1
					any_lover = { # Extremely unlikely to be relevant...
						character = event_target:aclla_to_rescue
					}
				}
				
				# She's extremely unwilling to leave
				event_target:aclla_to_rescue = {
					character_event = { id = sri.168 }
				}
			}
		}
	}
}

# Your kinswoman is willing - time to leave
character_event = {
	id = sri.165
	desc = EVTDESC_SRI_165
	picture = GFX_evt_jailbreak
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_165 # We out!
		
		if = {
			limit = {
				event_target:aclla_rescue_attempt_lover = {
					any_lover = {
						character = ROOT
					}
					host = {
						has_landed_title = d_acllahuasi
					}
				}
			}
			
			event_target:aclla_rescue_attempt_lover = {
				move_character = ROOT
				add_trait = travelling
				set_character_flag = do_not_disturb
				set_character_flag = ex_aclla # Rescued
				clr_character_flag = no_court_invites
				remove_trait = aclla
				
				character_event = { id = sri.184 days = 61 } # Safety flag cleanup
				
				ROOT = {
					set_character_flag = aclla_lover_is_coming_along
				}
			}
		}
		
		event_target:aclla_to_rescue = {
			move_character = ROOT
			add_trait = travelling
			set_character_flag = do_not_disturb
			set_character_flag = ex_aclla # Rescued
			clr_character_flag = no_court_invites
			remove_trait = aclla
			clr_character_flag = aclla_being_sacrificed
			clr_character_flag = aclla_sacrifice_in_progress
			remove_character_modifier = qhapaq_hucha
			
			character_event = { id = sri.184 days = 61 } # Safety flag cleanup
		}
		
		ROOT = {
			set_character_flag = aclla_is_willing
		}
		
		character_event = { id = sri.176 days = 1 } # Escape
	}
}

# Your kinswoman is unwilling - drag her along or leave her?
character_event = {
	id = sri.166
	desc = EVTDESC_SRI_166
	picture = GFX_evt_jailbreak
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_166 # Fine!
		
		if = {
			limit = {
				event_target:aclla_rescue_attempt_lover = {
					any_lover = {
						character = ROOT
					}
					host = {
						has_landed_title = d_acllahuasi
					}
				}
			}
			
			event_target:aclla_rescue_attempt_lover = {
				move_character = ROOT
				add_trait = travelling
				set_character_flag = do_not_disturb
				set_character_flag = ex_aclla # Rescued
				clr_character_flag = no_court_invites
				remove_trait = aclla
				
				character_event = { id = sri.184 days = 61 } # Safety flag cleanup
				
				ROOT = {
					set_character_flag = aclla_lover_is_coming_along
				}
			}
		}
		
		character_event = { id = sri.176 days = 1 } # Escape
		
		event_target:aclla_to_rescue = {
			clr_character_flag = aclla_being_rescued
			
			remove_opinion = {
				who = ROOT
				modifier = opinion_aclla_rescuer
			}
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					religion_openly_inca_or_reformed_trigger = no
					trait = zealous
				}
			}
			
			mult_modifier = {
				factor = 0.1
				religion_openly_inca_or_reformed_trigger = no
			}
			
			mult_modifier = {
				factor = 0.1
				trait = stubborn
			}
		}
	}
	
	option = {
		name = EVTOPTB_SRI_166 # It wasn't a request!
		
		event_target:aclla_to_rescue = {
			character_event = { id = sri.167 days = 1 } # Call guards?
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					religion_openly_inca_or_reformed_trigger = yes
					trait = zealous
				}
			}
			
			mult_modifier = {
				factor = 0.1
				religion_openly_inca_or_reformed_trigger = yes
			}
			
			mult_modifier = {
				factor = 0.1
				trait = kind
			}
		}
	}
}

# If dragged along, do you want to call the guards?
character_event = {
	id = sri.167
	desc = EVTDESC_SRI_167
	picture = GFX_evt_jailbreak
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_167 # Fine!
		
		if = {
			limit = {
				event_target:aclla_rescue_attempt_lover = {
					any_lover = {
						character = FROM
					}
					host = {
						has_landed_title = d_acllahuasi
					}
				}
			}
			
			event_target:aclla_rescue_attempt_lover = {
				move_character = FROM
				add_trait = travelling
				set_character_flag = do_not_disturb
				set_character_flag = ex_aclla # Rescued
				clr_character_flag = no_court_invites
				remove_trait = aclla
				
				character_event = { id = sri.184 days = 61 } # Safety flag cleanup
				
				FROM = {
					set_character_flag = aclla_lover_is_coming_along
				}
			}
			
			move_character = FROM
			add_trait = travelling
			set_character_flag = do_not_disturb
			set_character_flag = ex_aclla # Rescued
			clr_character_flag = no_court_invites
			clr_character_flag = aclla_being_sacrificed
			clr_character_flag = aclla_sacrifice_in_progress
			remove_character_modifier = qhapaq_hucha
			remove_trait = aclla
			
			character_event = { id = sri.184 days = 61 } # Safety flag cleanup
		}
		
		FROM = {
			set_character_flag = aclla_is_unwilling
			character_event = { id = sri.176 days = 1 } # Escape
		}
		
		event_target:aclla_to_rescue = {
			clr_character_flag = aclla_being_rescued
			
			remove_opinion = {
				who = FROM
				modifier = opinion_aclla_rescuer
			}
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					true_inca_religion_trigger = yes
					trait = zealous
				}
			}
			
			mult_modifier = {
				factor = 0.1
				religion_openly_inca_or_reformed_trigger = yes
			}
			
			mult_modifier = {
				factor = 0.1
				trait = stubborn
			}
		}
	}
	
	option = {
		name = EVTOPTB_SRI_167 # Guards!
		
		if = {
			limit = {
				FROM = {
					has_character_flag = aclla_no_more_guards
				}
			}
			
			FROM = {
				character_event = { id = sri.169 days = 1 } # No guards
			}
		}
		
		else = {
			FROM = {
				character_event = { id = sri.170 days = 1 } # Guards
			}
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				true_inca_religion_trigger = yes
			}
			
			mult_modifier = {
				factor = 0.1
				religion_openly_inca_or_reformed_trigger = no
			}
			
			mult_modifier = {
				factor = 10
				true_inca_religion_trigger = yes
				trait = zealous
			}
		}
	}
}

# Your kinswoman is extremely unwilling - calls guards
character_event = {
	id = sri.168
	desc = EVTDESC_SRI_168
	picture = GFX_evt_jailbreak
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_168 # Guards!
		
		add_rival = FROM
		
		if = {
			limit = {
				FROM = {
					has_character_flag = aclla_no_more_guards
				}
			}
			
			FROM = {
				character_event = { id = sri.169 days = 1 } # No guards
			}
		}
		
		else = {
			FROM = {
				character_event = { id = sri.170 days = 1 } # Guards
			}
		}
	}
}

# No guards arrive - how deal with kinswoman?
character_event = {
	id = sri.169
	desc = EVTDESC_SRI_169
	picture = GFX_evt_jailbreak
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_169 # Shut up!
		
		if = {
			limit = {
				event_target:aclla_rescue_attempt_lover = {
					any_lover = {
						character = ROOT
					}
					host = {
						has_landed_title = d_acllahuasi
					}
				}
			}
			
			event_target:aclla_rescue_attempt_lover = {
				move_character = ROOT
				add_trait = travelling
				set_character_flag = do_not_disturb
				set_character_flag = ex_aclla # Rescued
				clr_character_flag = no_court_invites
				remove_trait = aclla
				
				character_event = { id = sri.184 days = 61 } # Safety flag cleanup
				
				ROOT = {
					set_character_flag = aclla_lover_is_coming_along
				}
			}
		}
		
		event_target:aclla_to_rescue = {
			move_character = ROOT
			add_trait = travelling
			set_character_flag = do_not_disturb
			set_character_flag = ex_aclla # Rescued
			clr_character_flag = no_court_invites
			clr_character_flag = aclla_being_sacrificed
			clr_character_flag = aclla_sacrifice_in_progress
			remove_character_modifier = qhapaq_hucha
			remove_trait = aclla
			
			character_event = { id = sri.184 days = 61 } # Safety flag cleanup
		}
		
		ROOT = {
			set_character_flag = aclla_is_unwilling
		}
		
		character_event = { id = sri.176 days = 1 } # Escape
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					trait = cruel
					AND = {
						NOT = {
							trait = kind
						}
						event_target:aclla_rescue_attempt_snitch = {
							any_rival = {
								character = ROOT
							}
						}
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SRI_169 # You want to stay? STAY FOREVER!
		
		piety = -10
		
		if = {
			limit = {
				event_target:aclla_rescue_attempt_lover = {
					any_lover = {
						character = ROOT
					}
					host = {
						has_landed_title = d_acllahuasi
					}
				}
			}
			
			event_target:aclla_rescue_attempt_lover = {
				move_character = ROOT
				add_trait = travelling
				set_character_flag = do_not_disturb
				set_character_flag = ex_aclla # Rescued
				clr_character_flag = no_court_invites
				remove_trait = aclla
				
				character_event = { id = sri.184 days = 61 } # Safety flag cleanup
				
				ROOT = {
					set_character_flag = aclla_lover_is_coming_along
				}
			}
		}
		
		character_event = { id = sri.176 days = 1 } # Escape
		
		event_target:aclla_to_rescue = {
			death = {
				death_reason = death_murder_unknown
				killer = ROOT
			}
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				OR = {
					trait = cruel
					event_target:aclla_rescue_attempt_snitch = {
						any_rival = {
							character = ROOT
						}
					}
				}
				
				NAND = {
					trait = kind
					event_target:aclla_rescue_attempt_snitch = {
						OR = {
							any_friend = {
								character = ROOT
							}
							any_lover = {
								character = ROOT
							}
						}
					}
				}
			}
		}
	}
}

# Guards - time to fight!
character_event = {
	id = sri.170
	desc = EVTDESC_SRI_170
	picture = GFX_evt_jailbreak
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_170 # I guess it's time to fight...
		
		random_list = { # No noise penalty
			20 = {
				trigger = {
					combat_rating >= 25
				}
				
				mult_modifier = {
					factor = 2
					combat_rating >= 75
				}
				character_event = { id = sri.171 days = 1 } # Clean victory
			}
			
			20 = {
				trigger = {
					combat_rating < 100
				}
				
				character_event = { id = sri.172 days = 1 } # Wounded
			}
			
			20 = {
				trigger = {
					combat_rating < 75
				}
				
				character_event = { id = sri.173 days = 1 } # Maimed
			}
			
			20 = {
				trigger = {
					combat_rating < 75
				}
				
				
				mult_modifier = {
					factor = 0.5
					combat_rating >= 50
				}
				character_event = { id = sri.174 days = 1 } # Captured
			}
			
			20 = {
				trigger = {
					combat_rating < 50
				}
				
				character_event = { id = sri.175 days = 1 } # Killed
			}
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = craven
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SRI_170 # I will come quietly!
		
		prestige = -25
		
		# GRACETODO
		
		d_acllahuasi = {
			holder_scope = {
				reverse_imprison = ROOT
				
				character_event = { id = sri.138 days = 1 }
			}
		}
		
		event_target:aclla_to_rescue = {
			clr_character_flag = aclla_being_rescued
		}
		
		event_target:aclla_rescue_attempt_lover = {
			clr_character_flag = aclla_rescue_attempt_lover
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = brave
				}
			}
		}
	}
}

# You fought the guards - won - how deal with kinswoman?
character_event = {
	id = sri.171
	desc = EVTDESC_SRI_171
	picture = GFX_evt_jailbreak
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_171 # You ARE coming with me!
		
		if = {
			limit = {
				event_target:aclla_rescue_attempt_lover = {
					any_lover = {
						character = ROOT
					}
					host = {
						has_landed_title = d_acllahuasi
					}
				}
			}
			
			event_target:aclla_rescue_attempt_lover = {
				move_character = ROOT
				add_trait = travelling
				set_character_flag = do_not_disturb
				set_character_flag = ex_aclla # Rescued
				clr_character_flag = no_court_invites
				remove_trait = aclla
				
				character_event = { id = sri.184 days = 61 } # Safety flag cleanup
				
				ROOT = {
					set_character_flag = aclla_lover_is_coming_along
				}
			}
		}
		
		event_target:aclla_to_rescue = {
			move_character = ROOT
			add_trait = travelling
			set_character_flag = do_not_disturb
			set_character_flag = ex_aclla # Rescued
			clr_character_flag = no_court_invites
			clr_character_flag = aclla_being_sacrificed
			clr_character_flag = aclla_sacrifice_in_progress
			remove_character_modifier = qhapaq_hucha
			remove_trait = aclla
			
			character_event = { id = sri.184 days = 61 } # Safety flag cleanup
		}
		
		ROOT = {
			set_character_flag = aclla_is_unwilling
		}
		
		character_event = { id = sri.176 days = 1 } # Escape
		
		prestige = 25
		piety = 5
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					trait = cruel
					AND = {
						NOT = {
							trait = kind
						}
						event_target:aclla_rescue_attempt_snitch = {
							any_rival = {
								character = ROOT
							}
						}
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SRI_171 # And now you die!
		
		prestige = 25
		piety = -10
		
		event_target:aclla_to_rescue = {
			death = {
				death_reason = death_murder_unknown
				killer = ROOT
			}
		}
		
		if = {
			limit = {
				event_target:aclla_rescue_attempt_lover = {
					any_lover = {
						character = ROOT
					}
					host = {
						has_landed_title = d_acllahuasi
					}
				}
			}
			
			event_target:aclla_rescue_attempt_lover = {
				move_character = ROOT
				add_trait = travelling
				set_character_flag = do_not_disturb
				set_character_flag = ex_aclla # Rescued
				clr_character_flag = no_court_invites
				remove_trait = aclla
				
				character_event = { id = sri.184 days = 61 } # Safety flag cleanup
				
				ROOT = {
					set_character_flag = aclla_lover_is_coming_along
				}
			}
		}
		
		character_event = { id = sri.176 days = 1 } # Escape
		
		ai_chance = {
			factor = 100
			
			trigger = {
				OR = {
					trait = cruel
					event_target:aclla_rescue_attempt_snitch = {
						any_rival = {
							character = ROOT
						}
					}
				}
				
				NAND = {
					trait = kind
					event_target:aclla_rescue_attempt_snitch = {
						OR = {
							any_friend = {
								character = ROOT
							}
							any_lover = {
								character = ROOT
							}
						}
					}
				}
			}
		}
	}
}

# You fought the guards - wounded - how deal with kinswoman?
character_event = {
	id = sri.172
	desc = EVTDESC_SRI_172
	picture = GFX_evt_jailbreak
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_172 # You ARE coming with me!
		
		if = {
			limit = {
				event_target:aclla_rescue_attempt_lover = {
					any_lover = {
						character = ROOT
					}
					host = {
						has_landed_title = d_acllahuasi
					}
				}
			}
			
			event_target:aclla_rescue_attempt_lover = {
				move_character = ROOT
				add_trait = travelling
				set_character_flag = do_not_disturb
				set_character_flag = ex_aclla # Rescued
				clr_character_flag = no_court_invites
				remove_trait = aclla
				
				character_event = { id = sri.184 days = 61 } # Safety flag cleanup
				
				ROOT = {
					set_character_flag = aclla_lover_is_coming_along
				}
			}
		}
		
		event_target:aclla_to_rescue = {
			move_character = ROOT
			add_trait = travelling
			set_character_flag = do_not_disturb
			set_character_flag = ex_aclla # Rescued
			clr_character_flag = no_court_invites
			clr_character_flag = aclla_being_sacrificed
			clr_character_flag = aclla_sacrifice_in_progress
			remove_character_modifier = qhapaq_hucha
			remove_trait = aclla
			
			character_event = { id = sri.184 days = 61 } # Safety flag cleanup
			
			ROOT = {
				set_character_flag = aclla_is_unwilling
			}
		}
		
		character_event = { id = sri.176 days = 1 } # Escape
		
		prestige = 10
		add_trait = wounded
		piety = 5
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					trait = cruel
					AND = {
						NOT = {
							trait = kind
						}
						event_target:aclla_rescue_attempt_snitch = {
							any_rival = {
								character = ROOT
							}
						}
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SRI_172 # And now you die!
		
		prestige = 10
		piety = -10
		add_trait = wounded
		
		event_target:aclla_to_rescue = {
			death = {
				death_reason = death_murder_unknown
				killer = ROOT
			}
		}
		
		if = {
			limit = {
				event_target:aclla_rescue_attempt_lover = {
					any_lover = {
						character = ROOT
					}
					host = {
						has_landed_title = d_acllahuasi
					}
				}
			}
			
			event_target:aclla_rescue_attempt_lover = {
				move_character = ROOT
				add_trait = travelling
				set_character_flag = do_not_disturb
				set_character_flag = ex_aclla # Rescued
				clr_character_flag = no_court_invites
				remove_trait = aclla
				
				character_event = { id = sri.184 days = 61 } # Safety flag cleanup
				
				ROOT = {
					set_character_flag = aclla_lover_is_coming_along
				}
			}
		}
		
		character_event = { id = sri.176 days = 1 } # Escape
		
		ai_chance = {
			factor = 100
			
			trigger = {
				OR = {
					trait = cruel
					event_target:aclla_rescue_attempt_snitch = {
						any_rival = {
							character = ROOT
						}
					}
				}
				
				NAND = {
					trait = kind
					event_target:aclla_rescue_attempt_snitch = {
						OR = {
							any_friend = {
								character = ROOT
							}
							any_lover = {
								character = ROOT
							}
						}
					}
				}
			}
		}
	}
}

# You fought the guards - maimed - how deal with kinswoman?
character_event = {
	id = sri.173
	desc = EVTDESC_SRI_173
	picture = GFX_evt_jailbreak
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_173 # You ARE coming with me!
		
		if = {
			limit = {
				event_target:aclla_rescue_attempt_lover = {
					any_lover = {
						character = ROOT
					}
					host = {
						has_landed_title = d_acllahuasi
					}
				}
			}
			
			event_target:aclla_rescue_attempt_lover = {
				move_character = ROOT
				add_trait = travelling
				set_character_flag = do_not_disturb
				set_character_flag = ex_aclla # Rescued
				clr_character_flag = no_court_invites
				remove_trait = aclla
				
				character_event = { id = sri.184 days = 61 } # Safety flag cleanup
				
				ROOT = {
					set_character_flag = aclla_lover_is_coming_along
				}
			}
		}
		
		event_target:aclla_to_rescue = {
			move_character = ROOT
			add_trait = travelling
			set_character_flag = do_not_disturb
			set_character_flag = ex_aclla # Rescued
			clr_character_flag = no_court_invites
			clr_character_flag = aclla_being_sacrificed
			clr_character_flag = aclla_sacrifice_in_progress
			remove_character_modifier = qhapaq_hucha
			remove_trait = aclla
			
			character_event = { id = sri.184 days = 61 } # Safety flag cleanup
			
			ROOT = {
				set_character_flag = aclla_is_unwilling
			}
		}
		
		character_event = { id = sri.176 days = 1 } # Escape
		
		add_maimed_trait_effect = yes
		piety = 5
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					trait = cruel
					AND = {
						NOT = {
							trait = kind
						}
						event_target:aclla_rescue_attempt_snitch = {
							any_rival = {
								character = ROOT
							}
						}
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SRI_173 # And now you die!
		
		piety = -10
		add_maimed_trait_effect = yes
		
		event_target:aclla_to_rescue = {
			death = {
				death_reason = death_murder_unknown
				killer = ROOT
			}
		}
		
		if = {
			limit = {
				event_target:aclla_rescue_attempt_lover = {
					any_lover = {
						character = ROOT
					}
					host = {
						has_landed_title = d_acllahuasi
					}
				}
			}
			
			event_target:aclla_rescue_attempt_lover = {
				move_character = ROOT
				add_trait = travelling
				set_character_flag = do_not_disturb
				set_character_flag = ex_aclla # Rescued
				clr_character_flag = no_court_invites
				remove_trait = aclla
				
				character_event = { id = sri.184 days = 61 } # Safety flag cleanup
				
				ROOT = {
					set_character_flag = aclla_lover_is_coming_along
				}
			}
		}
		
		character_event = { id = sri.176 days = 1 } # Escape
		
		ai_chance = {
			factor = 100
			
			trigger = {
				OR = {
					trait = cruel
					event_target:aclla_rescue_attempt_snitch = {
						any_rival = {
							character = ROOT
						}
					}
				}
				
				NAND = {
					trait = kind
					event_target:aclla_rescue_attempt_snitch = {
						OR = {
							any_friend = {
								character = ROOT
							}
							any_lover = {
								character = ROOT
							}
						}
					}
				}
			}
		}
	}
}

# You fought the guards - captured
character_event = {
	id = sri.174
	desc = EVTDESC_SRI_174
	picture = GFX_evt_into_the_dungeon
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_174 # This is bad...
		
		prestige = -25
		
		# GRACETODO
		
		d_acllahuasi = {
			holder_scope = {
				reverse_imprison = ROOT
				
				character_event = { id = sri.138 days = 1 }
			}
		}
		
		event_target:aclla_rescue_attempt_lover = {
			clr_character_flag = aclla_rescue_attempt_lover
		}
		
		event_target:aclla_to_rescue = {
			clr_character_flag = aclla_being_rescued
		}
	}
}

# You fought the guards - killed
character_event = {
	id = sri.175
	desc = EVTDESC_SRI_175
	picture = GFX_evt_bloody_man
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_175 # This cannot be!
		
		prestige = -25
		
		death = {
			death_reason = death_battle
		}
		
		event_target:aclla_rescue_attempt_lover = {
			clr_character_flag = aclla_rescue_attempt_lover
		}
		
		event_target:aclla_to_rescue = {
			clr_character_flag = aclla_being_rescued
		}
	}
}

# Check which version of the next event to fire
character_event = {
	id = sri.176
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				has_character_flag = aclla_is_willing
				has_character_flag = aclla_lover_is_coming_along
			}
			character_event = { id = sri.177 }
		}
		
		else_if = {
			limit = {
				has_character_flag = aclla_is_unwilling
				has_character_flag = aclla_lover_is_coming_along
			}
			character_event = { id = sri.178 }
		}
		
		else_if = {
			limit = {
				has_character_flag = aclla_is_willing
			}
			character_event = { id = sri.179 }
		}
		
		else_if = {
			limit = {
				has_character_flag = aclla_is_unwilling
			}
			character_event = { id = sri.180 }
		}
		
		else_if = {
			limit = {
				has_character_flag = aclla_lover_is_coming_along
			}
			character_event = { id = sri.181 }
		}
		
		else = {
			character_event = { id = sri.182 }
		}
	}
}

# Succesful escape with willing kinswoman + lover
character_event = {
	id = sri.177
	desc = EVTDESC_SRI_177
	picture = GFX_evt_jailbreak
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_177 # We out!
		
		character_event = { id = sri.183 days = 30 random = 30 }
	}
}

# Succesful escape with unwilling kinswoman + lover
character_event = {
	id = sri.178
	desc = EVTDESC_SRI_178
	picture = GFX_evt_jailbreak
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_178 # We out!
		
		character_event = { id = sri.183 days = 30 random = 30 }
	}
}

# Succesful escape with willing kinswoman
character_event = {
	id = sri.179
	desc = EVTDESC_SRI_179
	picture = GFX_evt_jailbreak
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_179 # We out!
		
		character_event = { id = sri.183 days = 30 random = 30 }
	}
}

# Succesful escape with unwilling kinswoman
character_event = {
	id = sri.180
	desc = EVTDESC_SRI_180
	picture = GFX_evt_jailbreak
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_180 # We out!
		
		character_event = { id = sri.183 days = 30 random = 30 }
	}
}

# Succesful escape with lover
character_event = {
	id = sri.181
	desc = EVTDESC_SRI_181
	picture = GFX_evt_jailbreak
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_181 # We out!
		
		character_event = { id = sri.183 days = 30 random = 30 }
	}
}

# Succesful escape alone
character_event = {
	id = sri.182
	desc = EVTDESC_SRI_182
	picture = GFX_evt_jailbreak
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_182 # We out!
		
		character_event = { id = sri.183 days = 30 random = 30 }
	}
}

# Returned home - flag and trait cleanup for ROOT and target/lover
character_event = {
	id = sri.183
	desc = EVTDESC_SRI_183
	picture = GFX_evt_relaxed_ruler
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_183 # Home at last!
		
		remove_trait = travelling
		clr_character_flag = do_not_disturb
		clr_character_flag = aclla_no_more_guards
		clr_character_flag = aclla_lover_is_coming_along
		clr_character_flag = aclla_is_unwilling
		clr_character_flag = aclla_is_willing
		
		if = {
			limit = {
				has_character_flag = aclla_lover_is_coming_along
			}
			
			prestige = 25
			
			event_target:aclla_rescue_attempt_lover = {
				remove_trait = travelling
				clr_character_flag = do_not_disturb
				
				character_event = { id = sri.185 days = 30 random = 30 } # See if lover wants to be more
			}
		}
		
		if = {
			limit = {
				OR = {
					has_character_flag = aclla_is_willing
					has_character_flag = aclla_is_unwilling
				}
			}
			
			prestige = 25
			
			event_target:aclla_to_rescue = {
				remove_trait = travelling
				clr_character_flag = do_not_disturb
			}
		}
	}
}

# DND flag and trait cleanup for rescue target/lover
character_event = {
	id = sri.184
	desc = EVTDESC_SRI_184
	picture = GFX_evt_relaxed_ruler
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_184 # Home at last!
		
		remove_trait = travelling
		clr_character_flag = do_not_disturb
	}
}

# See if lover wants to be more
character_event = {
	id = sri.185
	desc = EVTDESC_SRI_185
	picture = GFX_evt_lovers
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	trigger = {
		FROM = {
			is_female = no
			is_inaccessible_or_incapable_trigger = no
			is_alive = yes
			OR = {
				is_married = no
				AND = {
					OR = {
						has_religion_feature = religion_harems
						has_religion_feature = religion_feature_tengri
						has_religion_feature = religion_feature_zun
						has_religion_feature = religion_feature_nivkh
					}
					NOT = {
						num_of_spouses = 4
					}
				}
			}
			OR = {
				is_consort = no
				is_senior_consort_party = yes
			}
			is_betrothed = no
			any_lover = {
				character = ROOT
			}
		}
	}
	
	option = {
		trigger = {
			FROM = {
				OR = {
					is_married = no
					AND = {
						OR = {
							has_religion_feature = religion_harems
							has_religion_feature = religion_feature_tengri
							has_religion_feature = religion_feature_zun
							has_religion_feature = religion_feature_nivkh
						}
						NOT = {
							num_of_spouses = 4
						}
					}
				}
			}
		}
		
		name = EVTOPTA_SRI_185 # I want to marry FROM!
		
		add_trait_ambitious_effect = yes
		
		FROM = {
			character_event = { id = sri.186 } # FROM approached
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = content
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = humble
			}
		}
	}
	
	option = {
		trigger = {
			is_landed = no
			FROM = {
				OR = {
					AND = {
						OR = {
							has_concubinage = yes
							government = tribal_government
							government = nomadic_government
						}
						
						num_of_consorts < 3
					}
					
					AND = {
						government = eastern_imperial_government
						
						num_of_consorts < 10
					}
					
					AND = {
						OR = { # Theoretically possible to max out consorts, but yeah...
							government = chinese_imperial_government
							government = japanese_imperial_government
							government = divine_imperial_government
						}
						
						num_of_consorts < 100
					}
				}
			}
		}
		
		add_trait_ambitious_effect = yes
		
		name = EVTOPTB_SRI_185 # I want to be a consort!
		
		FROM = {
			character_event = { id = sri.187 } # FROM approached
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					FROM = {
						is_married = yes
					}
					trait = content
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = humble
			}
		}
	}
	
	option = {
		name = EVTOPTC_SRI_185 # This is fine...
		
		add_trait_content_effect = yes
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = ambitious
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = proud
			}
			
			mult_modifier = {
				factor = 0.1
				trait = envious
			}
		}
	}
}

# Lover asks to become wife
character_event = {
	id = sri.186
	desc = EVTDESC_SRI_186
	picture = GFX_evt_daughter_asking_father
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_186 # Sure!
		
		add_spouse = FROM
	}
	
	option = {
		name = EVTOPTB_SRI_186 # Nope!
		
		remove_lover = FROM
	}
}

# Lover asks to become consort
character_event = {
	id = sri.187
	desc = EVTDESC_SRI_187
	picture = GFX_evt_daughter_asking_father
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_187 # Sure!
		
		add_consort = FROM
	}
	
	option = {
		name = EVTOPTB_SRI_187 # Nope!
		
		remove_lover = FROM
	}
}



##### on_adulthood events

# Let's see what kind of aclla she is
character_event = {
	id = sri.188
	hide_window = yes
	
	is_triggered_only = yes # on_adulthood
	
	has_dlc = "Sunset Invasion"
	
	only_women = yes
	
	has_global_flag = sunrise_invasion_happened
	
	trigger = {
		trait = aclla
		
		host = {
			has_landed_title = d_acllahuasi
			
			any_liege = {
				has_landed_title = e_inca_empire
				
				religion_openly_inca_or_reformed_trigger = yes
				
				NOR = {
					has_religion_feature = religion_matriarchal
					has_religion_feature = religion_equal
				}
			}
		}
	}
	
	immediate = {
		if = {
			limit = {
				OR = {
					has_character_flag = aclla_being_rescued
					has_character_flag = aclla_rescue_attempt_snitch
				}
			}
			
			repeat_event = { id = sri.188 days = 30 random = 60 } # We don't want the other chain to collide with this one...
		}
		
		else = {
			random_list = {
				20 = { # Tier 1, sacrifice
					mult_modifier = {
						factor = 2
						trait = attractive
					}
					
					mult_modifier = {
						factor = 2
						trait = groomed
					}
					
					mult_modifier = {
						factor = 2
						is_smart_trigger = yes
					}
					
					mult_modifier = {
						factor = 1.5
						has_character_modifier = aclla_prodigious_weaver
					}
					
					mult_modifier = {
						factor = 1.4
						trait = zealous
						religion_openly_inca_or_reformed_trigger = yes
					}
					
					add_character_modifier = {
						modifier = yurac_aclla
						duration = -1
					}
					
					prestige = 250
					
					any_close_relative = {
						limit = {
							is_landed = yes
						}
						character_event = { id = sri.189 } # Alert family 
					}
				}
				
				20 = { # Tier 2, marrige to Sapa Inca
					
					trigger = {
						e_inca_empire = {
							holder_scope = {
								NOR = {
									is_female = yes
									
									AND = {
										is_married = yes
										NOT = {
											has_religion_feature = religion_harems
										}
									}
									num_of_spouses = 4
									
									AND = {
										is_close_relative = ROOT
										
										NOR = {
											any_sibling = {
												character = ROOT
											}
											has_religion_feature = religion_holy_family
										}
									}
								}
							}
						}
					}
					
					mult_modifier = {
						factor = 1.5
						trait = attractive
					}
					
					mult_modifier = {
						factor = 1.5
						has_character_modifier = aclla_prodigious_weaver
					}
					
					mult_modifier = {
						factor = 6
						is_smart_trigger = yes
					}
					
					add_character_modifier = {
						modifier = huayru_aclla
						duration = -1
					}
					
					prestige = 199
					
					set_character_flag = aclla_being_married
					
					e_inca_empire = {
						holder_scope = {
							character_event = { id = sri.190 } # Sapa Inca asked about marriage
						}
					}
				}
				
				40 = { # Tier 3, marriage to vassal
					add_character_modifier = {
						modifier = pacu_aclla
						duration = -1
					}
					
					prestige = 100
					
					set_character_flag = aclla_being_married
					
					character_event = { id = sri.192 } # Ping to set up vassal marriage
				}
				
				20 = { # Tier 4, servitude
					trigger = {
						OR = {
							has_character_modifier = aclla_cook
							has_character_modifier = aclla_dancer
							has_character_modifier = aclla_singer
							has_character_modifier = aclla_brewer
						}
					}
					
					mult_modifier = {
						factor = 1.5
						has_character_modifier = aclla_dancer
					}
					
					mult_modifier = {
						factor = 1.5
						has_character_modifier = aclla_singer
					}
					
					mult_modifier = {
						factor = 1.5
						has_character_modifier = aclla_brewer
					}
					
					mult_modifier = {
						factor = 1.5
						has_character_modifier = aclla_cook
					}
					
					add_character_modifier = {
						modifier = yana_aclla
						duration = -1
					}
					
					prestige = 50
					
					e_inca_empire = {
						holder_scope = {
							random_realm_lord = {
								preferred_limit = {
									religion_openly_inca_or_reformed_trigger = yes
									reverse_opinion = {
										who = PREV
										value = 25
									}
								}
								
								preferred_limit = {
									religion_openly_inca_or_reformed_trigger = yes
									reverse_opinion = {
										who = PREV
										value = 0
									}
								}
								
								preferred_limit = {
									reverse_opinion = {
										who = PREV
										value = 25
									}
								}
								
								preferred_limit = {
									reverse_opinion = {
										who = PREV
										value = 0
									}
								}
								
								character_event = { id = sri.195 } # Have a servant!
							}
						}
					}
				}
			}
		}
	}
}

# Notify family if aclla might be sacrifice
character_event = {
	id = sri.189
	desc = EVTDESC_SRI_189
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			true_inca_religion_trigger = yes
		}
		
		name = EVTOPTA_SRI_189 # That's great!
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = cynical
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SRI_189 # Not my daughter/sister/aunt!
		
		if = {
			limit = {
				true_inca_religion_trigger = yes
			}
			remove_trait_zealous_effect = yes
		}
		
		FROM = {
			opinion = {
				who = ROOT
				modifier = opinion_aclla_rescuer
			}
		}
		
		custom_tooltip = {
			text = SRI_189_GET_BACK_DAUGHTER
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					true_inca_religion_trigger = yes
					trait = zealous
				}
			}
		}
	}
}

# Does Sapa Inca wish to marry the newest Huayru Aclla?
character_event = {
	id = sri.190
	desc = EVTDESC_SRI_190
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		random_child = {
			limit = {
				is_female = no
				is_adult = yes
				is_ascetic_trigger = no
				
				NOT = { trait = eunuch }
				NOT = { trait = celibate }
				
				NOR = {
					AND = {
						is_married = yes
						NOR = {
							has_religion_feature = religion_harems
							has_religion_feature = religion_feature_zun
							has_religion_feature = religion_feature_tengri
							has_religion_feature = religion_feature_nivkh
						}
					}
					
					num_of_spouses = 4
					
					AND = {
						is_close_relative = FROM
						
						NOR = {
							any_sibling = {
								character = FROM
							}
							has_religion_feature = religion_holy_family
							has_religion_feature = religion_feature_zun
							religion = messalian
							religion = zoroastrian
						}
					}
				}
				
				host = { character = PREV }
				is_landed = no
			}
			
			save_event_target_as = relative_to_marry_aclla
		}
	}
	
	option = {
		name = EVTOPTA_SRI_190 # Sure!
		
		FROM = {
			clr_character_flag = aclla_being_married
			clr_character_flag = no_court_invites
			remove_trait = aclla # Marriage blocker
		}
		
		add_spouse = FROM
		prestige = 250
		piety = 150
		
		hidden_tooltip = {
			FROM = {
				any_close_relative = {
					character_event = { id = sri.191 } # Inform family
				}
			}
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 100
				trait = zealous
			}
			
			mult_modifier = {
				factor = 0.01
				trait = cynical
			}
			
			mult_modifier = {
				factor = 0
				trait = homosexual
			}
		}
	}
	
	option = {
		trigger = {
			event_target:relative_to_marry_aclla = {
				always = yes
			}
		}
		
		name = EVTOPTB_SRI_190 # Something for my kinsman, perhaps?
		
		event_target:relative_to_marry_aclla = {
			FROM = {
				clr_character_flag = aclla_being_married
				clr_character_flag = no_court_invites
				remove_trait = aclla # Marriage blocker
			}
			
			add_spouse = FROM
			prestige = 150
			piety = 100
		}
		
		hidden_tooltip = {
			FROM = {
				any_close_relative = {
					character_event = { id = sri.194 } # Inform her family
				}
			}
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 100
				trait = zealous
			}
			
			mult_modifier = {
				factor = 0.01
				trait = cynical
			}
			
			mult_modifier = {
				factor = 0
				event_target:relative_to_marry_aclla = {
					trait = homosexual
				}
			}
		}
	}

	option = {
		name = EVTOPTC_SRI_190 # Nah, let the vassals have her.
		
		piety = -50
		
		FROM = {
			remove_character_modifier = huayru_aclla
			
			add_character_modifier = {
				modifier = pacu_aclla
				duration = -1
			}
			
			prestige = -100
			
			hidden_tooltip = {
				character_event = { id = sri.192 } # Ping
			}
		}
	}
}

# Daughter/sister/aunt grew up to marry the Sapa Inca!
character_event = {
	id = sri.191
	desc = EVTDESC_SRI_191
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_191 # So proud of her!
		prestige = 150
	}
}

# Marry to vassal setup event
character_event = {
	id = sri.192
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		change_variable = { which = no_of_tries value = 1 } # To prevent bouncing between vassals endlessly
		if = {
			limit = {
				NOT = {
					check_variable = { which = no_of_tries value = 6 }
				}
			}
			
			e_inca_empire = {
				holder_scope = {
					random_realm_lord = {
						limit = {
							is_female = no
							NOR = {
								AND = {
									is_married = yes
									NOR = {
										has_religion_feature = religion_harems
										has_religion_feature = religion_feature_zun
										has_religion_feature = religion_feature_tengri
										has_religion_feature = religion_feature_nivkh
									}
								}
								
								num_of_spouses = 4
								
								AND = {
									is_close_relative = ROOT
									NOR = {
										any_sibling = {
											character = ROOT
										}
										has_religion_feature = religion_holy_family
										has_religion_feature = religion_feature_zun
										religion = messalian
										religion = zoroastrian
									}
								}
							}
						}
						
						preferred_limit = {
							religion_openly_inca_or_reformed_trigger = yes
							reverse_opinion = {
								who = PREV
								value = 25
							}
						}
						
						preferred_limit = {
							religion_openly_inca_or_reformed_trigger = yes
							reverse_opinion = {
								who = PREV
								value = 0
							}
						}
						
						preferred_limit = {
							reverse_opinion = {
								who = PREV
								value = 25
							}
						}
						
						preferred_limit = {
							reverse_opinion = {
								who = PREV
								value = 0
							}
						}
						
						character_event = {
							id = sri.193 # Here, have a wife!
						}
					}
				}
			}
		}
		
		else = {
			clr_character_flag = aclla_being_married
			remove_character_modifier = pacu_aclla
			
			add_character_modifier = {
				modifier = yana_aclla
				duration = -1
			}
			
			prestige = -100
			
			e_inca_empire = {
				holder_scope = {
					random_realm_lord = {
						preferred_limit = {
							religion_openly_inca_or_reformed_trigger = yes
							reverse_opinion = {
								who = PREV
								value = 25
							}
						}
						
						preferred_limit = {
							religion_openly_inca_or_reformed_trigger = yes
							reverse_opinion = {
								who = PREV
								value = 0
							}
						}
						
						preferred_limit = {
							reverse_opinion = {
								who = PREV
								value = 25
							}
						}
						
						preferred_limit = {
							reverse_opinion = {
								who = PREV
								value = 0
							}
						}
						
						character_event = { id = sri.195 } # Here, have a servant!
					}
				}
			}
		}
	}
}

# Vassal is offered wife from Acllahuasi
character_event = {
	id = sri.193
	desc = EVTDESC_SRI_193
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		random_child = {
			limit = {
				is_female = no
				is_adult = yes
				is_ascetic_trigger = no
				
				NOT = { trait = eunuch }
				NOT = { trait = celibate }
				
				NOR = {
					AND = {
						is_married = yes
						NOR = {
							has_religion_feature = religion_harems
							has_religion_feature = religion_feature_zun
							has_religion_feature = religion_feature_tengri
							has_religion_feature = religion_feature_nivkh
						}
					}
					
					num_of_spouses = 4
					
					AND = {
						is_close_relative = FROM
						NOR = {
							any_sibling = {
								character = FROM
							}
							has_religion_feature = religion_holy_family
							has_religion_feature = religion_feature_zun
							religion = messalian
							religion = zoroastrian
						}
					}
				}
				
				host = { character = PREV }
				is_landed = no
			}
			
			save_event_target_as = relative_to_marry_aclla
		}
	}
	
	
	option = {
		name = EVTOPTA_SRI_193 # Sure!
		
		FROM = {
			clr_character_flag = aclla_being_married
			clr_character_flag = no_court_invites
			remove_trait = aclla # Marriage blocker
		}
		
		add_spouse = FROM
		prestige = 250
		piety = 150
		
		hidden_tooltip = {
			FROM = {
				any_close_relative = {
					character_event = { id = sri.191 } # Inform family
				}
			}
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 100
				trait = zealous
				religion_openly_inca_or_reformed_trigger = yes
			}
			
			mult_modifier = {
				factor = 0.01
				trait = cynical
				religion_openly_inca_or_reformed_trigger = yes
			}
			
			mult_modifier = {
				factor = 0
				trait = homosexual
			}
		}
	}
	
	option = {
		trigger = {
			event_target:relative_to_marry_aclla = {
				always = yes
			}
		}
		
		name = EVTOPTB_SRI_193 # Something for my kinsman, perhaps?
		
		event_target:relative_to_marry_aclla = {
			FROM = {
				clr_character_flag = aclla_being_married
				clr_character_flag = no_court_invites
				remove_trait = aclla # Marriage blocker
			}
			
			add_spouse = FROM
			prestige = 150
			piety = 100
		}
		
		hidden_tooltip = {
			FROM = {
				any_close_relative = {
					character_event = { id = sri.194 } # Inform her family
				}
			}
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 100
				trait = zealous
				religion_openly_inca_or_reformed_trigger = yes
			}
			
			mult_modifier = {
				factor = 0.01
				trait = cynical
				religion_openly_inca_or_reformed_trigger = yes
			}
			
			mult_modifier = {
				factor = 0
				event_target:relative_to_marry_aclla = {
					trait = homosexual
				}
			}
		}
	}

	option = {
		name = EVTOPTC_SRI_193 # Nothing for me.
		
		FROM = {
			prestige = -10
			hidden_tooltip = {
				character_event = { id = sri.192 days = 30 random = 30 } # Try again
			}
		}
	}
}

# Daughter/sister/aunt grew up to marry this realm lord!
character_event = {
	id = sri.194
	desc = EVTDESC_SRI_194
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_194 # Proud of her!
		prestige = 50
	}
}

# Have a servant!
character_event = {
	id = sri.195
	desc = EVTDESC_SRI_195
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_195 # She'll come in handy!
		prestige = 50
		
		FROM = {
			move_character = ROOT
			remove_trait = aclla
		}
	}
}

##### Servant events

# Dancer dances; triggered on_bi_yearly_pulse
character_event = {
	id = sri.196
	desc = EVTDESC_SRI_196
	picture = GFX_evt_dancing
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes # on_bi_yearly_pulse, aclla_events
	
	has_dlc = "Sunset Invasion"
	
	only_playable = yes
	
	has_global_flag = sunrise_invasion_happened
	
	trigger = {
		any_courtier = {
			has_character_modifier = aclla_dancer
		}
		
		OR = {
			trait = stressed
			trait = depressed
			trait = paranoid
		}
	}
	
	immediate = {
		random_courtier = {
			limit = {
				has_character_modifier = aclla_dancer
			}
			save_event_target_as = aclla_servant
		}
	}
	
	option = {
		name = EVTOPTA_SRI_196 # Entrancing...
		
		random_list = {
			10 = {
				trigger = {
					trait = stressed
				}
				
				remove_trait_stressed_effect = yes
			}
			
			10 = {
				trigger = {
					trait = depressed
				}
				
				remove_trait_depressed_effect = yes
			}
			
			10 = {
				trigger = {
					trait = paranoid
				}
				
				remove_trait_paranoid_effect = yes
			}
		}
	}
}

# Singer sings; triggered on_bi_yearly_pulse
character_event = {
	id = sri.197
	desc = EVTDESC_SRI_197
	picture = GFX_evt_dancing
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes # on_bi_yearly_pulse, aclla_events
	
	has_dlc = "Sunset Invasion"
	
	only_playable = yes
	
	has_global_flag = sunrise_invasion_happened
	
	trigger = {
		any_courtier = {
			has_character_modifier = aclla_singer
		}
	}
	
	immediate = {
		random_courtier = {
			limit = {
				has_character_modifier = aclla_singer
			}
			save_event_target_as = aclla_servant
		}
	}
	
	option = {
		name = EVTOPTA_SRI_197 # Entrancing...
		
		prestige = 25
		
		random = {
			chance = 30
			add_trait_partially_proud_effect = yes
		}
	}
}

# Brewer brews; triggered on_bi_yearly_pulse
character_event = {
	id = sri.198
	desc = EVTDESC_SRI_198
	picture = GFX_evt_feast
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes # on_bi_yearly_pulse, aclla_events
	
	has_dlc = "Sunset Invasion"
	
	only_playable = yes
	
	has_global_flag = sunrise_invasion_happened
	
	trigger = {
		OR = {
			trait = stressed
			trait = depressed
			trait = paranoid
		}
		
		any_courtier = {
			has_character_modifier = aclla_brewer
		}
	}
	
	immediate = {
		random_courtier = {
			limit = {
				has_character_modifier = aclla_brewer
			}
			save_event_target_as = aclla_servant
		}
	}
	
	option = {
		name = EVTOPTA_SRI_198 # Delicious!
		
		random_list = {
			10 = {
				trigger = {
					trait = stressed
				}
				
				remove_trait_stressed_effect = yes
			}
			
			10 = {
				trigger = {
					trait = depressed
				}
				
				remove_trait_depressed_effect = yes
			}
			
			10 = {
				trigger = {
					trait = paranoid
				}
				
				remove_trait_paranoid_effect = yes
			}
		}
		
		random = {
			chance = 30
			add_trait_partially_drunkard_effect = yes
		}
	}
}

# Cook cooks; triggered on_bi_yearly_pulse
character_event = {
	id = sri.199
	desc = EVTDESC_SRI_199
	picture = GFX_evt_fancy_feast
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes # on_bi_yearly_pulse, aclla_events
	
	has_dlc = "Sunset Invasion"
	
	only_playable = yes
	
	has_global_flag = sunrise_invasion_happened
	
	trigger = {
		OR = {
			trait = stressed
			trait = depressed
			trait = paranoid
		}
		
		any_courtier = {
			has_character_modifier = aclla_cook
		}
	}
	
	immediate = {
		random_courtier = {
			limit = {
				has_character_modifier = aclla_cook
			}
			save_event_target_as = aclla_servant
		}
	}
	
	option = {
		name = EVTOPTA_SRI_199 # Delicious!
		
		random_list = {
			10 = {
				trigger = {
					trait = stressed
				}
				
				remove_trait_stressed_effect = yes
			}
			
			10 = {
				trigger = {
					trait = depressed
				}
				
				remove_trait_depressed_effect = yes
			}
			
			10 = {
				trigger = {
					trait = paranoid
				}
				
				remove_trait_paranoid_effect = yes
			}
		}
		
		random = {
			chance = 30
			add_trait_partially_gluttonous_effect = yes
		}
	}
}



##### Sacrifice events

### Startup

# on_new_holder (any_kind) for e_inca_empire
character_event = {
	id = sri.200
	hide_window = yes
	
	is_triggered_only = yes
	
	has_dlc = "Sunset Invasion"
	
	only_independent = yes
	
	has_global_flag = sunrise_invasion_happened
	
	trigger = {
		FROM = {
			title = e_inca_empire # TIANXIATODO: Rel head
		}
		
		religion_openly_inca_or_reformed_trigger = yes
		
		NOR = {
			has_religion_feature = religion_matriarchal
			has_religion_feature = religion_equal
		}
	}
	
	immediate = {
		character_event = { id = sri.204 days = 1 } # Delay by one day to handle possible title deactivation
	}
}

# on_war_ended_defeat for e_inca_empire - e_inca_empire was the attacker
character_event = {
	id = sri.201
	hide_window = yes
	
	is_triggered_only = yes # on_war_ended_defeat
	
	has_dlc = "Sunset Invasion"
	
	only_playable = yes
	
	has_global_flag = sunrise_invasion_happened
	
	trigger = {
		FROM = { # Attacker
			has_landed_title = e_inca_empire # TIANXIATODO: Rel head
			
			religion_openly_inca_or_reformed_trigger = yes
			
			NOR = {
				has_religion_feature = religion_matriarchal
				has_religion_feature = religion_equal
			}
		}
	}
	
	immediate = {
		FROM = {
			character_event = { id = sri.202 } # Ping
		}
	}
}

# Ping e_inca_empire's holder
character_event = {
	id = sri.202
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		character_event = { id = sri.204 days = 1 } # Delay by one day to handle possible title deactivation
	}
}

# on_war_ended_defeat for e_inca_empire - e_inca_empire was the defender
character_event = {
	id = sri.203
	hide_window = yes
	
	is_triggered_only = yes # on_war_ended_defeat
	
	has_dlc = "Sunset Invasion"
	
	only_independent = yes
	
	has_global_flag = sunrise_invasion_happened
	
	trigger = {
		has_landed_title = e_inca_empire
		
		religion_openly_inca_or_reformed_trigger = yes
		
		NOR = {
			has_religion_feature = religion_matriarchal
			has_religion_feature = religion_equal
		}
	}
	
	immediate = {
		character_event = { id = sri.204 days = 1 } # Delay by one day to handle possible title deactivation
	}
}

# Ping self - delayed one day to see if e_inca_empire was disabled
character_event = {
	id = sri.204
	hide_window = yes
	
	is_triggered_only = yes
	only_rulers = yes
	
	immediate = {
		if = {
			limit = {
				has_landed_title = e_inca_empire
				
				religion_openly_inca_or_reformed_trigger = yes
				
				NOR = {
					has_religion_feature = religion_matriarchal
					has_religion_feature = religion_equal
				}
			}
			
			d_acllahuasi = {
				holder_scope = {
					character_event = { id = sri.205 } # Ping
				}
			}
		}
	}
}

# Ping d_acllahuasi
character_event = {
	id = sri.205
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		random_courtier = {
			limit = {
				trait = aclla
				
				NOT = {
					has_character_flag = aclla_being_sacrificed
				}
				
				has_character_modifier = yurac_aclla
			}
			
			preferred_limit = {
				NOR = {
					has_character_flag = aclla_being_rescued
					has_character_flag = aclla_rescue_attempt_lover
					has_character_flag = aclla_rescue_attempt_snitch
					has_character_flag = aclla_being_married
				}
				
				NOT = {
					any_dynasty_member = {
						OR = {
							has_landed_title = e_inca_empire
							#has_landed_title = d_sapa_inca # TIANXIATODO
						}
					}
				}
			}
			
			preferred_limit = {
				NOR = {
					has_character_flag = aclla_being_rescued
					has_character_flag = aclla_rescue_attempt_lover
					has_character_flag = aclla_rescue_attempt_snitch
				}
				
				NOT = {
					any_dynasty_member = {
						OR = {
							has_landed_title = e_inca_empire
							#has_landed_title = d_sapa_inca # TIANXIATODO
						}
					}
				}
			}
			
			preferred_limit = {
				NOR = {
					has_character_flag = aclla_being_rescued
					has_character_flag = aclla_rescue_attempt_lover
				}
				
				NOT = {
					any_dynasty_member = {
						OR = {
							has_landed_title = e_inca_empire
							#has_landed_title = d_sapa_inca # TIANXIATODO
						}
					}
				}
			}
			
			preferred_limit = {
				NOT = {
					has_character_flag = aclla_being_rescued
				}
				
				NOT = {
					any_dynasty_member = {
						OR = {
							has_landed_title = e_inca_empire
							#has_landed_title = d_sapa_inca # TIANXIATODO
						}
					}
				}
			}
			
			preferred_limit = {
				NOR = {
					has_character_flag = aclla_being_rescued
					has_character_flag = aclla_rescue_attempt_lover
					has_character_flag = aclla_rescue_attempt_snitch
					has_character_flag = aclla_being_married
				}
			}
			
			preferred_limit = {
				NOR = {
					has_character_flag = aclla_being_rescued
					has_character_flag = aclla_rescue_attempt_lover
					has_character_flag = aclla_rescue_attempt_snitch
				}
			}
			
			preferred_limit = {
				NOR = {
					has_character_flag = aclla_being_rescued
					has_character_flag = aclla_rescue_attempt_lover
				}
			}
			
			preferred_limit = {
				NOT = {
					has_character_flag = aclla_being_rescued
				}
			}
			
			add_character_modifier = {
				modifier = qhapaq_hucha
				duration = -1
			}
			
			add_trait = groomed
			character_event = { id = sri.206 }
		}
	}
}

# Ping aclla
character_event = {
	id = sri.206
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		set_character_flag = aclla_being_sacrificed
		
		any_close_relative = {
			limit = {
				is_landed = yes
			}
			character_event = { id = sri.207 } # Inform family
		}
		
		character_event = {	id = sri.208 days = 199 } # Stage 1 - zealous
	}
}

# Inform family of pending sacrifice, possibly resulting in a rescue attempt
character_event = {
	id = sri.207
	desc = EVTDESC_SRI_207
	picture = GFX_evt_religious_exultation
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			true_inca_religion_trigger = yes
		}
		
		name = EVTOPTA_SRI_207 # It is for Inti!
		
		piety = 100
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = cynical
				}
			}
			
			mult_modifier = {
				factor = 100
				trait = zealous
			}
		}
	}
	
	option = {
		name = EVTOPTB_SRI_207 # I *will* rescue her!
		
		FROM = {
			opinion = {
				who = ROOT
				modifier = opinion_aclla_rescuer
			}
		}
		
		if = {
			limit = {
				true_inca_religion_trigger = yes
			}
			piety = -100
		}
		
		custom_tooltip = {
			text = SRI_207_GET_BACK_DAUGHTER
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					trait = zealous
					
					NOR = {
						trait = arbitrary
						trait = deceitful
					}
					
					true_inca_religion_trigger = yes
				}
			}
		}
	}
}

# Preparation - zealous (works even if you're not of the right religion because you *really* don't like these weird ways!)
character_event = {
	id = sri.208
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		is_landed = no
		trait = aclla
	}
	
	immediate = {
		if = {
			limit = {
				has_character_flag = aclla_being_sacrificed
				
				e_inca_empire = {
					has_holder = yes
					
					holder_scope = {
						religion_openly_inca_or_reformed_trigger = yes
						
						NOR = {
							has_religion_feature = religion_matriarchal
							has_religion_feature = religion_equal
						}
					}
				}
			}
			
			remove_trait = cynical
			
			random = {
				chance = 75
				add_trait = zealous
			}
			
			character_event = {	id = sri.209 days = 100 }
		}
		
		else = {
			clr_character_flag = aclla_being_sacrificed
			remove_character_modifier = qhapaq_hucha
		}
	}
}

# Preparation - fed well
character_event = {
	id = sri.209
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		is_landed = no
		trait = aclla
	}
	
	immediate = {
		if = {
			limit = {
				has_character_flag = aclla_being_sacrificed
				
				e_inca_empire = {
					has_holder = yes
					
					holder_scope = {
						religion_openly_inca_or_reformed_trigger = yes
						
						NOR = {
							has_religion_feature = religion_matriarchal
							has_religion_feature = religion_equal
						}
					}
				}
			}
			
			remove_trait = malnourished
			remove_trait = frail
			
			if = {
				limit = {
					NOT = {
						is_strong_trigger = yes
					}
				}
				
				random = {
					chance = 50
					add_trait = sturdy
				}
			}
			
			set_character_flag = aclla_sacrifice_in_progress # No furter rescue attempts possible
			
			if = {
				limit = {
					has_character_flag = aclla_being_rescued
				}
				
				character_event = { id = sri.210 days = 75 } # Slight delay
			}
			
			else = {
				character_event = { id = sri.210 days = 50 }
			}
		}
		
		else = {
			clr_character_flag = aclla_being_sacrificed
			remove_character_modifier = qhapaq_hucha
		}
	}
}

# Preparation - drugged
character_event = {
	id = sri.210
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		is_landed = no
		trait = aclla
	}
	
	immediate = {
		if = {
			limit = {
				has_character_flag = aclla_being_sacrificed
				
				e_inca_empire = {
					has_holder = yes
					
					holder_scope = {
						religion_openly_inca_or_reformed_trigger = yes
						
						NOR = {
							has_religion_feature = religion_matriarchal
							has_religion_feature = religion_equal
						}
					}
				}
			}
			
			add_trait = content
			
			random = {
				chance = 50
				add_trait = drunkard
			}
			
			random = {
				chance = 50
				add_trait = dull
			}
			
			random_list = {
				50 = { # Sacrifice in Cuzco
					character_event = { id = sri.211 days = 50 }
				}
				
				50 = { # Sacrifice in home province
					mult_modifier = {
						factor = 0
						NOT = {
							any_close_relative = {
								is_landed = yes
								top_liege = {
									has_landed_title = e_inca_empire
								}
							}
						}
					}
					
					mult_modifier = {
						factor = 0
						any_dynasty_member = {
							OR = {
								has_landed_title = e_inca_empire
								#has_landed_title = d_sapa_inca # TIANXIATODO
							}
						}
					}
					
					character_event = { id = sri.214 days = 50 }
				}
			}
		}
		
		else = {
			clr_character_flag = aclla_being_sacrificed
			clr_character_flag = aclla_sacrifice_in_progress
			remove_character_modifier = qhapaq_hucha
		}
	}
}

### Sacrifice in Cuzco

# Ping sacrifice
character_event = {
	id = sri.211
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		is_landed = no
		trait = aclla
	}
	
	immediate = {
		if = {
			limit = {
				has_character_flag = aclla_being_sacrificed
				
				e_inca_empire = {
					has_holder = yes
					
					holder_scope = {
						religion_openly_inca_or_reformed_trigger = yes
						
						NOR = {
							has_religion_feature = religion_matriarchal
							has_religion_feature = religion_equal
						}
					}
				}
			}
			
			e_inca_empire = {
				holder_scope = {
					character_event = { id = sri.212 }
				}
			}
		}
		
		else = {
			clr_character_flag = aclla_being_sacrificed
			clr_character_flag = aclla_sacrifice_in_progress
			remove_character_modifier = qhapaq_hucha
		}
	}
}

# Sacrifice happens - Sapa Inca
character_event = {
	id = sri.212
	desc = EVTDESC_SRI_212
	picture = GFX_evt_religious_exultation
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_212 # Glory to Inti!
		piety = 300
		
		# GRACETODO
		
		FROM = {
			event_target:target_victim = {
				save_event_target_as = kinslayer_target
			}

			add_kinslayer_trait_effect = yes
			
			death = {
				death_reason = death_sacrificed
				killer = ROOT
			}
		}
		
		hidden_tooltip = {
			FROM = {
				any_close_relative = {
					character_event = { id = sri.213 } # Inform family
				}
			}
		}
	}
}

# Sacrifice happened - relatives
character_event = {
	id = sri.213
	desc = EVTDESC_SRI_213
	picture = GFX_evt_religious_exultation
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			true_inca_religion_trigger = yes
		}
		
		name = EVTOPTA_SRI_213 # It is for Inti!
		
		piety = 100
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = cynical
				}
			}
			
			mult_modifier = {
				factor = 100
				trait = zealous
			}
		}
	}
	
	option = {
		name = EVTOPTB_SRI_213 # I *will* avenge her!
		
		add_rival = FROM
		
		if = {
			limit = {
				true_inca_religion_trigger = yes
			}
			piety = -100
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					trait = zealous
					
					NOR = {
						trait = arbitrary
						trait = deceitful
					}
					
					true_inca_religion_trigger = yes
				}
			}
		}
	}
}

### Sacrifice at home

# Ping sacrifice
character_event = {
	id = sri.214
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		is_landed = no
		trait = aclla
	}
	
	immediate = {
		if = {
			limit = {
				has_character_flag = aclla_being_sacrificed
				
				e_inca_empire = {
					has_holder = yes
					
					holder_scope = {
						religion_openly_inca_or_reformed_trigger = yes
						
						NOR = {
							has_religion_feature = religion_matriarchal
							has_religion_feature = religion_equal
						}
					}
				}
			}
			
			if = {
				limit = {
					any_close_relative = {
						is_landed = yes
						top_liege = {
							has_landed_title = e_inca_empire
						}
					}
				}
				
				random_close_relative = {
					limit = {
						is_landed = yes
						top_liege = {
							has_landed_title = e_inca_empire
						}
					}
					
					long_character_event = { id = sri.215 } # Inform family
				}
				
				character_event = { id = sri.222 days = 15 } # Fallback sacrifice
			}
			else = {
				character_event = { id = sri.211 } # Fallback: Cuzco
			}
		}
		
		else = {
			clr_character_flag = aclla_being_sacrificed
			clr_character_flag = aclla_sacrifice_in_progress
			remove_character_modifier = qhapaq_hucha
		}
	}
}	

# Sacrifice arrives - last chance to attempt a rescue
long_character_event = {
	id = sri.215
	desc = EVTDESC_SRI_215
	picture = GFX_evt_emissary
	border = GFX_event_long_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SRI_215 # It is for Inti!
		
		piety = 100
		
		FROM = {
			save_event_target_as = qhapaq_hucha
		}
		
		character_event = { id = sri.216 days = 10 } # Sacrifice in progress
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					trait = zealous
					true_inca_religion_trigger = no
				}
			}
					
			mult_modifier = {
				factor = 100
				trait = zealous
				true_inca_religion_trigger = yes
			}
			
			mult_modifier = {
				factor = 0.1
				trait = brave
			}
		}
	}
	
	option = {
		name = EVTOPTB_SRI_215 # I *will* rescue her!
		
		if = {
			limit = {
				true_inca_religion_trigger = yes
			}
			piety = -100
		}
		
		FROM = {
			save_event_target_as = qhapaq_hucha
		}
		
		character_event = { id = sri.217 days = 10 } # Rescue attempt
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NAND = {
					trait = zealous
					
					NOR = {
						trait = arbitrary
						trait = deceitful
					}
					
					true_inca_religion_trigger = yes
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = craven
			}
		}
	}
}

# Going towards the place where the sacrifice will take place - no rescue attempt
character_event = {
	id = sri.216
	desc = EVTDESC_SRI_216
	picture = GFX_evt_religious_exultation
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	trigger = {
		event_target:qhapaq_hucha = {
			is_alive = yes
			trait = aclla
			is_landed = no
		}
	}
	
	option = {
		name = EVTOPTA_SRI_216 # She's not much of a talker now
		
		character_event = { id = sri.221 days = 1 } # Go up the mountain
	}
}

# Going towards the place where the sacrifice will take place - rescue attempt
character_event = {
	id = sri.217
	desc = EVTDESC_SRI_217
	picture = GFX_evt_religious_exultation
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	trigger = {
		event_target:qhapaq_hucha = {
			is_alive = yes
			trait = aclla
			is_landed = no
		}
	}
	
	option = {
		name = EVTOPTA_SRI_217 # Come with me if you want to live!
		if = {
			limit = {
				event_target:qhapaq_hucha = {
					NAND = {
						true_inca_religion_trigger = yes
						trait = zealous
					}
				}
			}
			
			random_list = {
				50 = {
					mult_modifier = {
						factor = 2
						intrigue >= 40
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 36
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 32
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 28
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 24
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 20
					}
					
					mult_modifier = {
						factor = 2
						intrigue >= 16
					}
					
					mult_modifier = {
						factor = 2
						event_target:qhapaq_hucha = {
							intrigue >= 40
						}
					}
					
					mult_modifier = {
						factor = 2
						event_target:qhapaq_hucha = {
							intrigue >= 36
						}
					}
					
					mult_modifier = {
						factor = 2
						event_target:qhapaq_hucha = {
							intrigue >= 32
						}
					}
					
					mult_modifier = {
						factor = 2
						event_target:qhapaq_hucha = {
							intrigue >= 24
						}
					}
					
					mult_modifier = {
						factor = 2
						event_target:qhapaq_hucha = {
							intrigue >= 20
						}
					}
					
					mult_modifier = {
						factor = 2
						event_target:qhapaq_hucha = {
							intrigue >= 16
						}
					}
					
					character_event = { id = sri.218 days = 1 } # Succesful rescue
				}
				
				50 = {
					trigger = {
						any_courtier_or_vassal = {
							ai = yes
							true_inca_religion_trigger = yes
						}
					}
				
					mult_modifier = {
						factor = 2
						intrigue < 12
					}
					
					mult_modifier = {
						factor = 2
						intrigue < 8
					}
					
					mult_modifier = {
						factor = 2
						intrigue < 4
					}
					
					mult_modifier = {
						factor = 2
						event_target:qhapaq_hucha = {
							intrigue < 12
						}
					}
					
					mult_modifier = {
						factor = 2
						event_target:qhapaq_hucha = {
							intrigue < 8
						}
					}
					
					mult_modifier = {
						factor = 2
						event_target:qhapaq_hucha = {
							intrigue < 4
						}
					}
					
					random_courtier_or_vassal = {
						limit = {
							ai = yes
							true_inca_religion_trigger = yes
						}
						
						preferred_limit = {
							trait = zealous
							
							NOR = {
								any_friend = {
									character = ROOT
								}
								any_lover = {
									character = ROOT
								}
								opinion = {
									who = ROOT
									value >= 50
								}
							}
							
							NOR = {
								any_friend = {
									character = event_target:qhapaq_hucha
								}
								any_lover = {
									character = event_target:qhapaq_hucha
								}
								opinion = {
									who = event_target:qhapaq_hucha
									value >= 50
								}
							}
						}
						
						preferred_limit = {
							trait = zealous
							NOR = {
								any_friend = {
									character = ROOT
								}
								any_lover = {
									character = ROOT
								}
							}
							
							NOR = {
								any_friend = {
									character = event_target:qhapaq_hucha
								}
								any_lover = {
									character = event_target:qhapaq_hucha
								}
							}
						}
						
						preferred_limit = {
							trait = zealous
							NOR = {
								any_friend = {
									character = ROOT
								}
							}
							
							NOR = {
								any_friend = {
									character = event_target:qhapaq_hucha
								}
							}
						}
						
						preferred_limit = {
							trait = zealous
						}
						
						save_event_target_as = meddlesome_vassal
					}
					
					character_event = { id = sri.219 days = 1 } # Not-quite successful rescue
				}
			}
		}
		
		else = {
			character_event = { id = sri.220 days = 1 } # She's a lost cause
		}
	}
}

# Rescue attempt goes well
character_event = {
	id = sri.218
	desc = EVTDESC_SRI_218
	picture = GFX_evt_religious_exultation
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	trigger = {
		event_target:qhapaq_hucha = {
			is_alive = yes
			trait = aclla
			is_landed = no
		}
	}
	
	option = {
		name = EVTOPTA_SRI_218 # You're safe now!
		
		prestige = 100
		
		add_friend = event_target:qhapaq_hucha
		
		event_target:qhapaq_hucha = {
			move_character = ROOT
			remove_trait = aclla
			
			clr_character_flag = aclla_being_sacrificed
			clr_character_flag = aclla_sacrifice_in_progress
			remove_character_modifier = qhapaq_hucha
		}
	}
}

# Rescue attempt goes semi-well - someone spots you - gain a rival and gain a crime modifier from all inca_pagan/inca_pagan_reformed realm lords
character_event = {
	id = sri.219
	desc = EVTDESC_SRI_219
	picture = GFX_evt_religious_exultation
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	trigger = {
		event_target:qhapaq_hucha = {
			is_alive = yes
			trait = aclla
			is_landed = no
		}
	}
	
	option = {
		name = EVTOPTA_SRI_219 # At least she's safe...
		
		prestige = -100
		
		add_rival = event_target:meddlesome_vassal
		
		add_friend = event_target:qhapaq_hucha
		
		# GRACETODO
		
		event_target:qhapaq_hucha = {
			prestige = -100
			
			add_rival = event_target:meddlesome_vassal
			
			move_character = ROOT
			remove_trait = aclla
			
			clr_character_flag = aclla_being_sacrificed
			clr_character_flag = aclla_sacrifice_in_progress
			remove_character_modifier = qhapaq_hucha
		}
		
		any_playable_ruler = {
			limit = {
				OR = {
					religion_openly_inca_or_reformed_trigger = yes
					same_realm = ROOT
				}
			}
			
			opinion = {
				modifier = opinion_meddled_with_sacrifice
				who = ROOT
			}
		}
	}
}

# Rescue attempt fails - sacrifice is convinced she wants to go ahead with the sacrifice
character_event = {
	id = sri.220
	desc = EVTDESC_SRI_220
	picture = GFX_evt_religious_exultation
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	trigger = {
		event_target:qhapaq_hucha = {
			is_alive = yes
		}
	}
	
	option = {
		name = EVTOPTA_SRI_220 # She's truly lost to me...
		
		prestige = -100
		
		character_event = { id = sri.221 days = 1 }
	}
}

# The sacrifice takes place
character_event = {
	id = sri.221
	desc = EVTDESC_SRI_221
	picture = GFX_evt_religious_exultation
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			OR = {
				religion_openly_inca_or_reformed_trigger = yes
				true_inca_religion_trigger = yes
			}
		}
		
		name = EVTOPTA_SRI_221 # Glory... to Inti.
		
		prestige = 100
		if = {
			limit = {
				true_inca_religion_trigger = yes
			}
			piety = 100
		}
		
		event_target:qhapaq_hucha = {
			death = {
				death_reason = death_sacrificed
			}
		}
		
		if = {
			limit = {
				true_inca_religion_trigger = yes
				trait = zealous
			}
			
			random = {
				chance = 50
				remove_trait_zealous_effect = yes
			}
		}
		
		random = {
			chance = 50
			add_trait_depressed_effect = yes
		}
	}
	
	option = {
		trigger = {
			religion_openly_inca_or_reformed_trigger = no
		}
		
		name = EVTOPTB_SRI_221 # Curse these savages!
		
		prestige = -100
		
		if = {
			limit = {
				true_inca_religion_trigger = yes
			}
			piety = -100
		}
		
		else = {
			random = {
				chance = 50
				add_trait_zealous_effect = yes
			}
		}
		
		random = {
			chance = 50
			add_trait_ambitious_effect = yes
		}
		
		random = {
			chance = 50
			add_trait_wroth_effect = yes
		}
		
		event_target:qhapaq_hucha = {
			death = {
				death_reason = death_sacrificed
			}
		}
		
		random = {
			chance = 50
			add_trait_depressed_effect = yes
		}
	}
}

# If the sacrifice somehow is alive too late, kill her!
character_event = {
	id = sri.222
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				trait = aclla
				is_landed = no
			}
			death = {
				death_reason = death_sacrificed
			}
		}
		
		else = {
			remove_trait = aclla
			remove_character_modifier = qhapaq_hucha
			clr_character_flag = aclla_being_sacrificed
			clr_character_flag = aclla_sacrifice_in_progress
		}
	}
}