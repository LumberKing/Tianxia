# Grace events related to Boons
# By Silverswee(e)per

namespace = soh

# soh.6201-6400 reserved

# Partially inspired by JD logic; MUST be JD-locked



##### Request Truce

### Independent

# on_yearly_pulse event for the AI
character_event = { # TIANXIATODO: Improve
	id = soh.6201
	hide_window = yes
	
	is_triggered_only = yes # on_yearly_pulse
	
	only_independent = yes
	
	has_dlc = "Jade Dragon"
	
	war = yes
	
	min_age = 16
	
	capable_only = yes
	
	prisoner = no
	
	ai = yes
	
	trigger = {
		any_war = {
			attacker = {
				is_chinese_emperor_trigger = yes
			}
			defender = {
				character = ROOT 
			}
		}
		
		top_liege = {
			NOT = {
				government = chinese_imperial_government # Either under a pretender or a vassal of China
			}
		}
		
		e_china = {
			holder_scope = {
				is_inaccessible_or_incapable_trigger = no
			}
		}
		
		is_new_world_invader_or_vassal_trigger = no
		is_close_to_china_or_along_the_silk_road_trigger = yes
		
		is_inaccessible_or_incapable_trigger = no
		has_regent = no
		
		check_variable = {
			which = grace
			value >= 500
		}
		
		mercenary = no
		holy_order = no
	}
	
	immediate = {
		clear_grace_decision_flags_effect = yes
		
		e_china = {
			holder_scope = {
				save_event_target_as = eoc
			}
		}
		
		random_list = {
			75 = {
				mult_modifier = {
					factor = 0.1
					relative_power = {
						who = event_target:eoc
						power < 0.5
					}
				}
				
				mult_modifier = {
					factor = 0.25
					relative_power = {
						who = event_target:eoc
						power < 1
					}
				}
				
				mult_modifier = {
					factor = 0.1
					any_war = {
						attacker = {
							character = event_target:eoc
						}
						defender = {
							character = ROOT 
						}
						war_score > 25
					}
				}
				
				# Do nothing
			}
			
			25 = {
				trigger = {
					NOT = {
						any_war = {
							attacker = {
								character = event_target:eoc
							}
							defender = {
								character = ROOT 
							}
							war_score <= -50
						}
					}
					
					relative_power = {
						who = event_target:eoc
						power < 2
					}
				}
				
				mult_modifier = {
					factor = 0.1
					is_dumb_trigger = yes
				}
				
				mult_modifier = {
					factor = 0.2
					trait = brave
				}
				
				mult_modifier = {
					factor = 0.5
					trait = proud
				}
				
				mult_modifier = {
					factor = 5
					trait = craven
				}
				
				mult_modifier = {
					factor = 2
					trait = humble
				}
				
				mult_modifier = {
					factor = 0.5
					root_hates_china_trigger = yes
				}
				
				# Request Truce
				change_variable = {
					which = grace
					value = -500
				}
				
				save_event_target_as = grace_decision_taker
				
				if = {
					limit = {
						china_would_refuse_truce_root_trigger = yes
					}
					set_character_flag = grace_refuse_offer
				}
				
				else_if = {
					limit = {
						china_would_accept_truce_root_trigger = yes
					}
					set_character_flag = grace_accept_offer
				}
				
				else = {
					set_character_flag = grace_neutral_offer
				}
				
				if = {
					limit = {
						event_target:eoc = {
							primary_title = {
								OR = {
									has_law = grand_chancellor_law_1
									has_law = grand_chancellor_law_2
								}
							}
							
							persistent_event_target:my_grand_chancellor = {
								always = yes
							}
						}
					}
					
					event_target:eoc = {
						persistent_event_target:my_grand_chancellor = {
							narrative_event = { id = soh.6203 } # EoC's GC has a say
						}
					}
				}
				
				else = {
					event_target:eoc = {
						narrative_event = { id = soh.6204 } # EoC gets request
					}
				}
			}
		}
	}
}

# Ping EoC and set up scopes if triggered from decision
character_event = {
	id = soh.6202
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = eoc
		
		FROMFROM = {
			clear_grace_decision_flags_effect = yes
			save_event_target_as = grace_decision_taker
		}
		
		if = {
			limit = {
				china_would_refuse_truce_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_refuse_offer
			}
		}
		
		else_if = {
			limit = {
				china_would_accept_truce_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_accept_offer
			}
		}
		
		else = {
			FROMFROM = {
				set_character_flag = grace_neutral_offer
			}
		}
		
		if = {
			limit = {
				event_target:eoc = {
					primary_title = {
						OR = {
							has_law = grand_chancellor_law_1
							has_law = grand_chancellor_law_2
						}
					}
					
					persistent_event_target:my_grand_chancellor = {
						always = yes
					}
				}
			}
			
			event_target:eoc = {
				persistent_event_target:my_grand_chancellor = {
					narrative_event = { id = soh.6203 } # EoC's GC has a say
				}
			}
		}
		
		else = {
			event_target:eoc = {
				narrative_event = { id = soh.6204 } # EoC gets request
			}
		}
	}
}

# GC might have a say
narrative_event = {
	id = soh.6203
	title = EVTTITLE_SOH_6203
	
	desc = {
		text = EVTDESCA_SOH_6203
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6203
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6203
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6203 # Indicate that the EoC should accept
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_accept_offer_gc
		}
		
		gc_accept_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_accept_grace_score = yes
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6203 # Indicate that the EoC should refuse
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_refuse_offer_gc
		}
		
		gc_refuse_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_refuse_grace_score = yes
		}
	}
	
	option = {
		name = EVTOPTC_SOH_6203 # Indicate no strong preference
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_neutral_offer_gc
		}
		
		gc_neutral_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_neutral_grace_score = yes
		}
	}
	
	after = {
		event_target:eoc = {
			narrative_event = { id = soh.6204 } # EoC informed of the request and the GC's position
		}
	}
}

# EoC gets the request (and possible recommendation)
narrative_event = {
	id = soh.6204
	title = EVTTITLE_SOH_6204
	
	desc = {
		text = EVTDESCA_SOH_6204
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6204
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6204
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCD_SOH_6204
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCE_SOH_6204
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCF_SOH_6204
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCG_SOH_6204
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCH_SOH_6204
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCI_SOH_6204
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCJ_SOH_6204
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCK_SOH_6204
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCL_SOH_6204
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6204 # Accept the request
		
		log = "[Root.GetBestName] accepted [grace_decision_taker.GetBestName]'s truce Boon request!"
		
		any_war = {
			limit = {
				attacker = {
					character = ROOT 
				}
				defender = {
					character = event_target:grace_decision_taker
				}
			}
			
			end_war = invalid
		}
		
		set_truce = {
			who = event_target:grace_decision_taker
			years = 10
		}
		
		event_target:grace_decision_taker = {
			set_truce = {
				who = ROOT 
				years = 10
			}
		}
		
		eoc_accept_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6205 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_accept_boon_score = yes
			
			mult_modifier = {
				factor = 10
				trait = craven
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6204 # Refuse
		
		log = "[Root.GetBestName] refused [grace_decision_taker.GetBestName]'s truce Boon request!"
		
		eoc_refuse_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6206 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_refuse_boon_score = yes
			
			mult_modifier = {
				factor = 10
				trait = wroth
			}
		}
	}
}

# Request accepted
letter_event = {
	id = soh.6205
	desc = EVTDESC_SOH_6205
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6205 # Great!
		
		set_character_flag = grace_character
	}
}

# Request refused
letter_event = {
	id = soh.6206
	desc = EVTDESC_SOH_6206
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6206 # Really?
		
		opinion = {
			who = FROM
			modifier = opinion_china_grace_refused_truce_boon
		}
	}
}



##### Request Peace Deal

### Independent

# Ping EoC and set up scopes if triggered from decision
character_event = {
	id = soh.6208
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = eoc
		
		FROMFROM = {
			clear_grace_decision_flags_effect = yes
			save_event_target_as = grace_decision_taker
		}
		
		if = {
			limit = {
				china_would_refuse_peace_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_refuse_offer
			}
		}
		
		else_if = {
			limit = {
				china_would_accept_peace_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_accept_offer
			}
		}
		
		else = {
			FROMFROM = {
				set_character_flag = grace_neutral_offer
			}
		}
		
		if = {
			limit = {
				event_target:eoc = {
					primary_title = {
						OR = {
							has_law = grand_chancellor_law_1
							has_law = grand_chancellor_law_2
						}
					}
					persistent_event_target:my_grand_chancellor = {
						always = yes
					}
				}
			}
			
			event_target:eoc = {
				persistent_event_target:my_grand_chancellor = {
					narrative_event = { id = soh.6209 } # EoC's GC has a say
				}
			}
		}
		
		else = {
			event_target:eoc = {
				narrative_event = { id = soh.6210 } # EoC gets request
			}
		}
	}
}

# GC might have a say
narrative_event = {
	id = soh.6209
	title = EVTTITLE_SOH_6209
	
	desc = {
		text = EVTDESCA_SOH_6209
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6209
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6209
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6209 # Indicate that the EoC should accept
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_accept_offer_gc
		}
		
		gc_accept_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_accept_grace_score = yes
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6209 # Indicate that the EoC should refuse
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_refuse_offer_gc
		}
		
		gc_refuse_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_refuse_grace_score = yes
		}
	}
	
	option = {
		name = EVTOPTC_SOH_6209 # Indicate no strong preference
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_neutral_offer_gc
		}
		
		gc_neutral_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_neutral_grace_score = yes
		}
	}
	
	after = {
		event_target:eoc = {
			narrative_event = { id = soh.6210 } # EoC informed of the request and the GC's position
		}
	}
}

# EoC gets the request (and possible recommendation)
narrative_event = {
	id = soh.6210
	title = EVTTITLE_SOH_6210
	
	desc = {
		text = EVTDESCA_SOH_6210
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6210
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6210
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCD_SOH_6210
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCE_SOH_6210
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCF_SOH_6210
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCG_SOH_6210
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCH_SOH_6210
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCI_SOH_6210
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCJ_SOH_6210
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCK_SOH_6210
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCL_SOH_6210
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6210 # Accept the request
		
		log = "[Root.GetBestName] accepted [grace_decision_taker.GetBestName]'s peace deal Boon request!"
		
		event_target:grace_decision_taker = {
			add_character_modifier = {
				inherit = yes
				name = peace_deal_with_china
				years = 25
			}
		}
		
		eoc_accept_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6211 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_accept_boon_score = yes
			
			mult_modifier = {
				factor = 10
				trait = craven
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6210 # Refuse
		
		log = "[Root.GetBestName] refused [grace_decision_taker.GetBestName]'s peace deal Boon request!"
		
		eoc_refuse_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6212 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_refuse_boon_score = yes
			
			mult_modifier = {
				factor = 10
				trait = wroth
			}
		}
	}
}

# Request accepted
letter_event = {
	id = soh.6211
	desc = EVTDESC_SOH_6211
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6211 # Great!
		
		set_character_flag = grace_character
	}
}

# Request refused
letter_event = {
	id = soh.6212
	desc = EVTDESC_SOH_6212
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6212 # Really?
		
		opinion = {
			who = FROM
			modifier = opinion_china_grace_refused_peace_deal_boon
		}
	}
}



##### Request Favor

### Vassal

# Ping EoC and set up scopes if triggered from decision
character_event = {
	id = soh.6214
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = eoc
		
		FROMFROM = {
			clear_grace_decision_flags_effect = yes
			save_event_target_as = grace_decision_taker
		}
		
		if = {
			limit = {
				china_would_refuse_grant_favor_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_refuse_offer
			}
		}
		
		else_if = {
			limit = {
				china_would_accept_grant_favor_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_accept_offer
			}
		}
		
		else = {
			FROMFROM = {
				set_character_flag = grace_neutral_offer
			}
		}
		
		if = {
			limit = {
				event_target:eoc = {
					primary_title = {
						OR = {
							has_law = grand_chancellor_law_1
							has_law = grand_chancellor_law_2
						}
					}
					
					persistent_event_target:my_grand_chancellor = {
						NOT = {
							character = FROMFROM
						}
					}
				}
			}
			
			event_target:eoc = {
				persistent_event_target:my_grand_chancellor = {
					narrative_event = { id = soh.6215 } # EoC's GC has a say
				}
			}
		}
		
		else = {
			if = {
				limit = {
					event_target:eoc = {
						primary_title = {
							OR = {
								has_law = grand_chancellor_law_1
								has_law = grand_chancellor_law_2
							}
						}
						
						persistent_event_target:my_grand_chancellor = {
							character = FROMFROM
						}
					}
				}
				
				FROMFROM = {
					set_character_flag = grace_accept_offer_gc
				}
			}
			
			event_target:eoc = {
				narrative_event = { id = soh.6216 } # EoC gets offer
			}
		}
	}
}

# GC might have a say
narrative_event = {
	id = soh.6215
	title = EVTTITLE_SOH_6215
	
	desc = {
		text = EVTDESCA_SOH_6215
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6215
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6215
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6215 # Indicate that the EoC should accept
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_accept_offer_gc
		}
		
		gc_accept_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_accept_grace_score = yes
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6215 # Indicate that the EoC should refuse
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_refuse_offer_gc
		}
		
		gc_refuse_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_refuse_grace_score = yes
		}
	}
	
	option = {
		name = EVTOPTC_SOH_6215 # Indicate no strong preference
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_neutral_offer_gc
		}
		
		gc_neutral_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_neutral_grace_score = yes
		}
	}
	
	after = {
		event_target:eoc = {
			narrative_event = { id = soh.6216 } # EoC informed of the request and the GC's position
		}
	}
}

# EoC gets the request (and possible recommendation)
narrative_event = {
	id = soh.6216
	title = EVTTITLE_SOH_6216
	
	desc = {
		text = EVTDESCA_SOH_6216
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6216
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6216
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCD_SOH_6216
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCE_SOH_6216
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCF_SOH_6216
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCG_SOH_6216
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCH_SOH_6216
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCI_SOH_6216
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCJ_SOH_6216
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCK_SOH_6216
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCL_SOH_6216
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6216 # Accept the request
		
		log = "[Root.GetBestName] accepted [grace_decision_taker.GetBestName]'s grant Favor Boon request!"
		
		reverse_add_favor = event_target:grace_decision_taker
		
		eoc_accept_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6217 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_accept_boon_score = yes
			
			mult_modifier = {
				factor = 10
				trait = trusting
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6216 # Refuse
		
		log = "[Root.GetBestName] refused [grace_decision_taker.GetBestName]'s grant Favor Boon request!"
		
		eoc_refuse_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6218 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_refuse_boon_score = yes
			
			mult_modifier = {
				factor = 10
				trait = paranoid
			}
		}
	}
}

# Request accepted
letter_event = {
	id = soh.6217
	desc = EVTDESC_SOH_6217
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6217 # Great!
		
		set_character_flag = grace_character
	}
}

# Request refused
letter_event = {
	id = soh.6218
	desc = EVTDESC_SOH_6218
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6218 # Really?
		
		opinion = {
			who = FROM
			modifier = opinion_china_grace_refused_grant_favor_boon
		}
	}
}



##### Cancel Favor (Boon)

### Vassal

# Ping EoC and set up scopes if triggered from decision
character_event = {
	id = soh.6220
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = eoc
		
		FROMFROM = {
			clear_grace_decision_flags_effect = yes
			save_event_target_as = grace_decision_taker
		}
		
		if = {
			limit = {
				china_would_refuse_cancel_own_favor_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_refuse_offer
			}
		}
		
		else_if = {
			limit = {
				china_would_accept_cancel_own_favor_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_accept_offer
			}
		}
		
		else = {
			FROMFROM = {
				set_character_flag = grace_neutral_offer
			}
		}
		
		if = {
			limit = {
				event_target:eoc = {
					primary_title = {
						OR = {
							has_law = grand_chancellor_law_1
							has_law = grand_chancellor_law_2
						}
					}
					
					persistent_event_target:my_grand_chancellor = {
						NOT = {
							character = FROMFROM
						}
					}
				}
			}
			
			event_target:eoc = {
				persistent_event_target:my_grand_chancellor = {
					narrative_event = { id = soh.6221 } # EoC's GC has a say
				}
			}
		}
		
		else = {
			if = {
				limit = {
					event_target:eoc = {
						primary_title = {
							OR = {
								has_law = grand_chancellor_law_1
								has_law = grand_chancellor_law_2
							}
						}
						
						persistent_event_target:my_grand_chancellor = {
							character = FROMFROM
						}
					}
				}
				
				FROMFROM = {
					set_character_flag = grace_accept_offer_gc
				}
			}
			
			event_target:eoc = {
				narrative_event = { id = soh.6222 } # EoC gets offer
			}
		}
	}
}

# GC might have a say
narrative_event = {
	id = soh.6221
	title = EVTTITLE_SOH_6221
	
	desc = {
		text = EVTDESCA_SOH_6221
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6221
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6221
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6221 # Indicate that the EoC should accept
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_accept_offer_gc
		}
		
		gc_accept_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_accept_grace_score = yes
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6221 # Indicate that the EoC should refuse
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_refuse_offer_gc
		}
		
		gc_refuse_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_refuse_grace_score = yes
		}
	}
	
	option = {
		name = EVTOPTC_SOH_6221 # Indicate no strong preference
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_neutral_offer_gc
		}
		
		gc_neutral_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_neutral_grace_score = yes
		}
	}
	
	after = {
		event_target:eoc = {
			narrative_event = { id = soh.6222 } # EoC informed of the request and the GC's position
		}
	}
}

# EoC gets the request (and possible recommendation)
narrative_event = {
	id = soh.6222
	title = EVTTITLE_SOH_6222
	
	desc = {
		text = EVTDESCA_SOH_6222
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6222
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6222
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCD_SOH_6222
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCE_SOH_6222
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCF_SOH_6222
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCG_SOH_6222
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCH_SOH_6222
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCI_SOH_6222
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCJ_SOH_6222
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCK_SOH_6222
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCL_SOH_6222
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6222 # Accept the request
		
		log = "[Root.GetBestName] accepted [grace_decision_taker.GetBestName]'s renounce Favor Boon request!"
		
		remove_favor = event_target:grace_decision_taker
		
		eoc_accept_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6223 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_accept_boon_score = yes
			
			mult_modifier = {
				factor = 10
				trait = content
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6222 # Refuse
		
		log = "[Root.GetBestName] refused [grace_decision_taker.GetBestName]'s renounce Favor Boon request!"
		
		eoc_refuse_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6224 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_refuse_boon_score = yes
			
			mult_modifier = {
				factor = 10
				trait = ambitious
			}
		}
	}
}

# Request accepted
letter_event = {
	id = soh.6223
	desc = EVTDESC_SOH_6223
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6223 # Great!
		
		set_character_flag = grace_character
	}
}

# Request refused
letter_event = {
	id = soh.6224
	desc = EVTDESC_SOH_6224
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6224 # Really?
		
		opinion = {
			who = FROM
			modifier = opinion_china_grace_refused_cancel_favor_boon
		}
	}
}



##### Request County (self)

### Vassal

# Ping EoC and set up scopes if triggered from decision
character_event = {
	id = soh.6226
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = eoc
		
		FROMFROM = {
			clear_grace_decision_flags_effect = yes
			save_event_target_as = grace_decision_taker
		}
		
		if = {
			limit = {
				china_would_refuse_grant_county_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_refuse_offer
			}
		}
		
		else_if = {
			limit = {
				china_would_accept_grant_county_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_accept_offer
			}
		}
		
		else = {
			FROMFROM = {
				set_character_flag = grace_neutral_offer
			}
		}
		
		if = {
			limit = {
				event_target:eoc = {
					primary_title = {
						OR = {
							has_law = grand_chancellor_law_1
							has_law = grand_chancellor_law_2
						}
					}
					
					persistent_event_target:my_grand_chancellor = {
						NOT = {
							character = FROMFROM
						}
					}
				}
			}
			
			event_target:eoc = {
				persistent_event_target:my_grand_chancellor = {
					narrative_event = { id = soh.6227 } # EoC's GC has a say
				}
			}
		}
		
		else = {
			if = {
				limit = {
					event_target:eoc = {
						primary_title = {
							OR = {
								has_law = grand_chancellor_law_1
								has_law = grand_chancellor_law_2
							}
						}
						
						persistent_event_target:my_grand_chancellor = {
							character = FROMFROM
						}
					}
				}
				
				FROMFROM = {
					set_character_flag = grace_accept_offer_gc
				}
			}
			
			event_target:eoc = {
				narrative_event = { id = soh.6228 } # EoC gets offer
			}
		}
	}
}

# GC might have a say
narrative_event = {
	id = soh.6227
	title = EVTTITLE_SOH_6227
	
	desc = {
		text = EVTDESCA_SOH_6227
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6227
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6227
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6227 # Indicate that the EoC should accept
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_accept_offer_gc
		}
		
		gc_accept_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_accept_grace_score = yes
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6227 # Indicate that the EoC should refuse
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_refuse_offer_gc
		}
		
		gc_refuse_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_refuse_grace_score = yes
		}
	}
	
	option = {
		name = EVTOPTC_SOH_6227 # Indicate no strong preference
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_neutral_offer_gc
		}
		
		gc_neutral_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_neutral_grace_score = yes
		}
	}
	
	after = {
		event_target:eoc = {
			narrative_event = { id = soh.6228 } # EoC informed of the request and the GC's position
		}
	}
}

# EoC gets the request (and possible recommendation)
narrative_event = {
	id = soh.6228
	title = EVTTITLE_SOH_6228
	
	desc = {
		text = EVTDESCA_SOH_6228
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6228
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6228
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCD_SOH_6228
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCE_SOH_6228
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCF_SOH_6228
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCG_SOH_6228
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCH_SOH_6228
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCI_SOH_6228
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCJ_SOH_6228
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCK_SOH_6228
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCL_SOH_6228
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				primary_title = {
					NOR = {
						has_law = ci_vassal_law_3
						has_law = ci_vassal_law_4
					}
				}
			}
			
			random_realm_lord = {
				limit = {
					war = no
					NOT = {
						character = event_target:grace_decision_taker
					}
					NOT = {
						has_minor_title = title_grand_chancellor
					}
					any_demesne_title = {
						count = 2
						tier = count
						location = {
							capital_holding = {
								holding_type = castle
							}
						}
					}
				}
				
				preferred_limit = {
					NOR = {
						is_friend = ROOT
						is_lover = ROOT
						dynasty = ROOT 
					}
				}
				
				save_event_target_as = vassal_to_take_county_from
				
				random_demesne_title = {
					limit = {
						tier = count
						location = {
							capital_holding = {
								holding_type = castle
							}
						}
					}
					
					preferred_limit = {
						location = {
							NOT = {
								event_target:vassal_to_take_county_from = {
									capital_scope = {
										NOT = {
											province = PREVPREV
										}
									}
								}
							}
						}
					}
					
					save_event_target_as = vassal_county_to_take
				}
			}
		}
		
		if = {
			limit = {
				any_demesne_title = {
					count = 2
					tier = count
					location = {
						capital_holding = {
							holding_type = castle
						}
					}
				}
			}
			
			random_demesne_title = {
				limit = {
					tier = count
					location = {
						capital_holding = {
							holding_type = castle
						}
					}
				}
				
				preferred_limit = {
					location = {
						NOT = {
							ROOT = {
								capital_scope = {
									NOT = {
										province = PREVPREV
									}
								}
							}
						}
					}
				}
				
				save_event_target_as = county_to_take
			}
		}
	}
	
	option = {
		trigger = {
			event_target:county_to_take = {
				always = yes
			}
		}
		
		name = EVTOPTA_SOH_6228 # Accept the request
		
		log = "[Root.GetBestName] accepted [grace_decision_taker.GetBestName]'s county Boon request (self)!"
		
		event_target:grace_decision_taker = {
			grant_title_no_opinion = event_target:county_to_take
		}
		
		eoc_accept_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6229 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_accept_boon_score = yes
			
			mult_modifier = {
				factor = 10
				trait = trusting
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6228 # Refuse
		
		log = "[Root.GetBestName] refused [grace_decision_taker.GetBestName]'s county Boon request!"
		
		eoc_refuse_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6230 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_refuse_boon_score = yes
			
			mult_modifier = {
				factor = 10
				trait = greedy
			}
		}
	}
	
	option = {
		trigger = {
			event_target:vassal_county_to_take = {
				always = yes
			}
		}
		
		name = EVTOPTC_SOH_6228 # Accept the request, using a vassal_county
		
		log = "[Root.GetBestName] accepted [grace_decision_taker.GetBestName]'s county Boon request (other)!"
		
		event_target:vassal_county_to_take = {
			save_event_target_as = county_to_take
		}
		
		event_target:grace_decision_taker = {
			grant_title_no_opinion = event_target:vassal_county_to_take
		}
		
		character_event = { id = soh.6231 } # Give the other vassal something?
		
		eoc_accept_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6229 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_refuse_boon_score = yes
			
			mult_modifier = {
				factor = 10
				event_target:vassal_to_take_county_from = {
					china_eoc_hates_this_trigger = yes
				}
			}
			
			mult_modifier = {
				factor = 0.1
				is_friend = event_target:vassal_to_take_county_from
			}
			
			mult_modifier = {
				factor = 0.1
				is_lover = event_target:vassal_to_take_county_from
			}
			
			mult_modifier = {
				factor = 10
				is_rival = event_target:vassal_to_take_county_from
			}
			
			mult_modifier = {
				factor = 10
				trait = arbitrary
			}
			
			mult_modifier = {
				factor = 10
				trait = deceitful
			}
		}
	}
}

# Request accepted
letter_event = {
	id = soh.6229
	desc = EVTDESC_SOH_6229
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6229 # Great!
		
		set_character_flag = grace_character
	}
}

# Request refused
letter_event = {
	id = soh.6230
	desc = EVTDESC_SOH_6230
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6230 # Really?
		
		opinion = {
			who = FROM
			modifier = opinion_china_grace_refused_grant_county_boon
		}
	}
}

# If county was taken from someone else, the EoC is asked to repay them
character_event = {
	id = soh.6231
	desc = EVTDESC_SOH_6231
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6231 # Give the vassal some Grace
		
		custom_tooltip = {
			text = vassal_gets_grace
		}
		
		event_target:vassal_to_take_county_from = {
			letter_event = { id = soh.6232 } # Inform the vassal
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = proud
			}
			
			mult_modifier = {
				factor = 10
				trait = just
			}
		}
	}
	
	option = {
		trigger = {
			has_dlc = "Conclave"
			NOT = {
				owes_favor_to = event_target:vassal_to_take_county_from
			}
		}
		
		name = EVTOPTB_SOH_6231 # Give the vassal a Favor
		
		reverse_add_favor = event_target:vassal_to_take_county_from
		
		event_target:vassal_to_take_county_from = {
			letter_event = { id = soh.6233 } # Inform the vassal
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = paranoid
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = trusting
			}
		}
	}
	
	option = {
		trigger = {
			wealth >= 500
		}
		
		name = EVTOPTC_SOH_6231 # Give the vassal some money
		
		wealth = -500
		
		event_target:vassal_to_take_county_from = {
			letter_event = { id = soh.6234 } # Inform the vassal
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = greedy
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = charitable
			}
		}
	}
	
	option = {
		name = EVTOPTD_SOH_6231 # Give the vassal nothing
		
		event_target:vassal_to_take_county_from = {
			opinion = {
				who = ROOT 
				modifier = opinion_tyrant
			}
			
			letter_event = { id = soh.6235 } # Inform the vassal
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 10
				trait = arbitrary
			}
			
			mult_modifier = {
				factor = 0.1
				is_friend = event_target:vassal_to_take_county_from
			}
			
			mult_modifier = {
				factor = 0.1
				is_lover = event_target:vassal_to_take_county_from
			}
			
			mult_modifier = {
				factor = 10
				event_target:vassal_to_take_county_from = {
					china_eoc_hates_this_trigger = yes
				}
			}
			
			mult_modifier = {
				factor = 100
				is_rival = event_target:vassal_to_take_county_from
			}
		}
	}
}

# Vassal informed of loss of county and repayment - Grace
letter_event = {
	id = soh.6232
	desc = EVTDESC_SOH_6232
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6232 # I suppose I can live with that...
		
		change_variable = {
			which = grace
			value = 500
		}
	}
}

# Vassal informed of loss of county and repayment - Favor
letter_event = {
	id = soh.6233
	desc = EVTDESC_SOH_6233
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6233 # I suppose I can live with that...
		
		add_favor = FROM
	}
}

# Vassal informed of loss of county and repayment - money
letter_event = {
	id = soh.6234
	desc = EVTDESC_SOH_6234
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6234 # I suppose I can live with that...
		
		wealth = 500
	}
}

# Vassal informed of loss of county and repayment - nothing
letter_event = {
	id = soh.6235
	desc = EVTDESC_SOH_6235
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6235 # I will not forget this!
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					is_rival = event_target:grace_decision_taker
					is_rival = FROM
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = wroth
			}
			
			mult_modifier = {
				factor = 0.1
				trait = envious
			}
			
			mult_modifier = {
				factor = 0.1
				trait = proud
			}
			
			mult_modifier = {
				factor = 10
				trait = humble
			}
			
			mult_modifier = {
				factor = 10
				trait = kind
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6235 # I will never forgive this!
		
		if = {
			limit = {
				NOR = {
					is_friend = FROM
					is_lover = FROM
				}
			}
			
			add_rival = FROM
		}
		
		else = {
			if = {
				limit = {
					is_friend = FROM
				}
				remove_friend = FROM
			}
			
			if = {
				limit = {
					is_lover = FROM
				}
				remove_lover = FROM
			}
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					is_friend = FROM
					is_lover = FROM
					is_friend = event_target:grace_decision_taker
					is_lover = event_target:grace_decision_taker
				}
			}
		}
	}
}



##### Request County (other)

### Vassal

# Ping EoC and set up scopes if triggered from decision
character_event = {
	id = soh.6237
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = eoc
		
		FROMFROM = {
			clear_grace_decision_flags_effect = yes
			save_event_target_as = grace_decision_taker
		}
		
		if = {
			limit = {
				china_would_refuse_grant_county_other_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_refuse_offer
			}
		}
		
		else_if = {
			limit = {
				china_would_accept_grant_county_other_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_accept_offer
			}
		}
		
		else = {
			FROMFROM = {
				set_character_flag = grace_neutral_offer
			}
		}
		
		if = {
			limit = {
				event_target:eoc = {
					primary_title = {
						OR = {
							has_law = grand_chancellor_law_1
							has_law = grand_chancellor_law_2
						}
					}
					
					persistent_event_target:my_grand_chancellor = {
						NOT = {
							character = FROMFROM
						}
					}
				}
			}
			
			event_target:eoc = {
				persistent_event_target:my_grand_chancellor = {
					narrative_event = { id = soh.6238 } # EoC's GC has a say
				}
			}
		}
		
		else = {
			if = {
				limit = {
					event_target:eoc = {
						primary_title = {
							OR = {
								has_law = grand_chancellor_law_1
								has_law = grand_chancellor_law_2
							}
						}
						
						persistent_event_target:my_grand_chancellor = {
							character = FROMFROM
						}
					}
				}
				
				FROMFROM = {
					set_character_flag = grace_accept_offer_gc
				}
			}
			
			event_target:eoc = {
				narrative_event = { id = soh.6239 } # EoC gets offer
			}
		}
	}
}

# GC might have a say
narrative_event = {
	id = soh.6238
	title = EVTTITLE_SOH_6238
	
	desc = {
		text = EVTDESCA_SOH_6238
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6238
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6238
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6238 # Indicate that the EoC should accept
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_accept_offer_gc
		}
		
		gc_accept_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 10
				event_target:grace_decision_taker = {
					has_character_flag = grace_accept_offer
				}
			}
			
			mult_modifier = {
				factor = 0.1
				event_target:character_getting_county = {
					root_hates_this_trigger = yes
				}
			}
			
			mult_modifier = {
				factor = 10
				is_friend = event_target:character_getting_county
			}
			
			mult_modifier = {
				factor = 10
				is_lover = event_target:character_getting_county
			}
			
			mult_modifier = {
				factor = 0.01
				is_rival = event_target:character_getting_county
			}
			
			mult_modifier = {
				factor = 5
				event_target:grace_decision_taker = {
					has_character_flag = grace_accept_offer
				}
				trait = just
			}
			
			mult_modifier = {
				factor = 2
				event_target:grace_decision_taker = {
					has_character_flag = grace_accept_offer
				}
				trait = honest
			}
			
			mult_modifier = {
				factor = 0.5
				event_target:grace_decision_taker = {
					has_character_flag = grace_accept_offer
				}
				trait = deceitful
			}
			
			mult_modifier = {
				factor = 0.2
				event_target:grace_decision_taker = {
					has_character_flag = grace_accept_offer
				}
				trait = arbitrary
			}
		}
	}
	
	option = {
		name = EVTOPTA_SOH_6238 # Indicate that the EoC should refuse
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_refuse_offer_gc
		}
		
		gc_refuse_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 10
				event_target:grace_decision_taker = {
					has_character_flag = grace_refuse_offer
				}
			}
			
			mult_modifier = {
				factor = 10
				event_target:character_getting_county = {
					root_hates_this_trigger = yes
				}
			}
			
			mult_modifier = {
				factor = 0.1
				is_friend = event_target:character_getting_county
			}
			
			mult_modifier = {
				factor = 0.1
				is_lover = event_target:character_getting_county
			}
			
			mult_modifier = {
				factor = 100
				is_rival = event_target:character_getting_county
			}
			
			mult_modifier = {
				factor = 5
				event_target:grace_decision_taker = {
					has_character_flag = grace_refuse_offer
				}
				trait = just
			}
			
			mult_modifier = {
				factor = 2
				event_target:grace_decision_taker = {
					has_character_flag = grace_refuse_offer
				}
				trait = honest
			}
			
			mult_modifier = {
				factor = 0.5
				event_target:grace_decision_taker = {
					has_character_flag = grace_refuse_offer
				}
				trait = deceitful
			}
			
			mult_modifier = {
				factor = 0.2
				event_target:grace_decision_taker = {
					has_character_flag = grace_refuse_offer
				}
				trait = arbitrary
			}
		}
	}
	
	option = {
		name = EVTOPTC_SOH_6238 # Indicate no strong preference
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_neutral_offer_gc
		}
		
		gc_neutral_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 10
				event_target:grace_decision_taker = {
					has_character_flag = grace_neutral_offer
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = proud
			}
			
			mult_modifier = {
				factor = 0.1
				trait = stubborn
			}
			
			mult_modifier = {
				factor = 10
				trait = shy
			}
			
			mult_modifier = {
				factor = 2
				trait = arbitrary
			}
			
			mult_modifier = {
				factor = 0.1
				OR = {
					is_rival = event_target:grace_decision_taker
					is_friend = event_target:grace_decision_taker
					is_lover = event_target:grace_decision_taker
				}
			}
			
			mult_modifier = {
				factor = 0.1
				dynasty = event_target:grace_decision_taker
			}
			
			mult_modifier = {
				factor = 0.1
				OR = {
					is_rival = event_target:character_getting_county
					is_friend = event_target:character_getting_county
					is_lover = event_target:character_getting_county
				}
			}
			
			mult_modifier = {
				factor = 0.1
				dynasty = event_target:character_getting_county
			}
			
			mult_modifier = {
				factor = 10
				trait = humble
			}
			
			mult_modifier = {
				factor = 5
				trait = slothful
			}
			
			mult_modifier = {
				factor = 0.2
				trait = diligent
			}
			
			mult_modifier = {
				factor = 5
				trait = content
			}
			
			mult_modifier = {
				factor = 0.2
				trait = ambitious
			}
		}
	}
	
	after = {
		event_target:eoc = {
			narrative_event = { id = soh.6239 } # EoC informed of the request and the GC's position
		}
	}
}

# EoC gets the request (and possible recommendation)
narrative_event = {
	id = soh.6239
	title = EVTTITLE_SOH_6239
	
	desc = {
		text = EVTDESCA_SOH_6239
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6239
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6239
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCD_SOH_6239
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCE_SOH_6239
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCF_SOH_6239
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCG_SOH_6239
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCH_SOH_6239
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCI_SOH_6239
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCJ_SOH_6239
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCK_SOH_6239
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCL_SOH_6239
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				primary_title = {
					NOR = {
						has_law = ci_vassal_law_3
						has_law = ci_vassal_law_4
					}
				}
			}
			random_realm_lord = {
				limit = {
					war = no
					NOT = {
						has_minor_title = title_grand_chancellor
					}
					any_demesne_title = {
						count = 2
						tier = count
						location = {
							capital_holding = {
								holding_type = castle
							}
						}
					}
				}
				
				preferred_limit = {
					NOR = {
						is_friend = ROOT
						is_lover = ROOT
						dynasty = ROOT 
						character = event_target:grace_decision_taker
					}
				}
				
				save_event_target_as = vassal_to_take_county_from
				
				random_demesne_title = {
					limit = {
						tier = count
						location = {
							capital_holding = {
								holding_type = castle
							}
						}
					}
					
					preferred_limit = {
						location = {
							NOT = {
								event_target:vassal_to_take_county_from = {
									capital_scope = {
										NOT = {
											province = PREVPREV
										}
									}
								}
							}
						}
					}
					
					save_event_target_as = vassal_county_to_take
				}
			}
		}
		
		if = {
			limit = {
				any_demesne_title = {
					count = 2
					tier = count
					location = {
						capital_holding = {
							holding_type = castle
						}
					}
				}
			}
			
			random_demesne_title = {
				limit = {
					tier = count
					location = {
						capital_holding = {
							holding_type = castle
						}
					}
				}
				
				preferred_limit = {
					location = {
						NOT = {
							ROOT = {
								capital_scope = {
									NOT = {
										province = PREVPREV
									}
								}
							}
						}
					}
				}
				
				save_event_target_as = county_to_take
			}
		}
	}
	
	option = {
		trigger = {
			event_target:county_to_take = {
				always = yes
			}
		}
		
		name = EVTOPTA_SOH_6239 # Accept the request
		
		log = "[Root.GetBestName] accepted [grace_decision_taker.GetBestName]'s county (other) Boon request (self)!"
		
		event_target:character_getting_county = {
			grant_title_no_opinion = event_target:county_to_take
			set_defacto_liege = ROOT 
			opinion = {
				who = event_target:grace_decision_taker
				modifier = got_me_a_boon
			}
		}
		
		eoc_accept_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6240 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_refuse_boon_score = yes
			
			mult_modifier = {
				factor = 0.1
				event_target:character_getting_county = {
					china_eoc_hates_this_trigger = yes
				}
			}
			
			mult_modifier = {
				factor = 10
				is_friend = event_target:character_getting_county
			}
			
			mult_modifier = {
				factor = 10
				is_lover = event_target:character_getting_county
			}
			
			mult_modifier = {
				factor = 0.01
				is_rival = event_target:character_getting_county
			}
			
			mult_modifier = {
				factor = 10
				trait = trusting
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6239 # Refuse
		
		log = "[Root.GetBestName] refused [grace_decision_taker.GetBestName]'s county (other) Boon request!"
		
		eoc_refuse_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6241 } # Inform sender
		}
	}
	
	option = {
		trigger = {
			event_target:vassal_county_to_take = {
				always = yes
			}
		}
		
		name = EVTOPTC_SOH_6239 # Accept the request, using a vassal_county
		
		log = "[Root.GetBestName] accepted [grace_decision_taker.GetBestName]'s county (other) Boon request (other)!"
		
		event_target:vassal_county_to_take = {
			save_event_target_as = county_to_take
		}
		
		event_target:character_getting_county = {
			grant_title_no_opinion = event_target:vassal_county_to_take
			set_defacto_liege = ROOT 
			opinion = {
				who = event_target:grace_decision_taker
				modifier = got_me_a_boon
			}
		}
		
		if = {
			limit = {
				event_target:vassal_to_take_county_from = {
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			character_event = { id = soh.6242 } # Give the other vassal something?
		}
		
		eoc_accept_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6240 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_refuse_boon_score = yes
			
			mult_modifier = {
				factor = 10
				event_target:vassal_to_take_county_from = {
					china_eoc_hates_this_trigger = yes
				}
			}
			
			mult_modifier = {
				factor = 0.1
				is_friend = event_target:vassal_to_take_county_from
			}
			
			mult_modifier = {
				factor = 0.1
				is_lover = event_target:vassal_to_take_county_from
			}
			
			mult_modifier = {
				factor = 10
				is_rival = event_target:vassal_to_take_county_from
			}
			
			mult_modifier = {
				factor = 10
				trait = arbitrary
			}
			
			mult_modifier = {
				factor = 10
				trait = deceitful
			}
		}
	}
}

# Request accepted
letter_event = {
	id = soh.6240
	desc = EVTDESC_SOH_6240
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6240 # Great!
		
		set_character_flag = grace_character
	}
}

# Request refused
letter_event = {
	id = soh.6241
	desc = EVTDESC_SOH_6241
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6241 # Really?
		
		opinion = {
			who = FROM
			modifier = opinion_china_grace_refused_grant_county_boon
		}
	}
}

# If county was taken from someone else, the EoC is asked to repay them
character_event = {
	id = soh.6242
	desc = EVTDESC_SOH_6242
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6242 # Give the vassal some Grace
		
		custom_tooltip = {
			text = vassal_gets_grace
		}
		
		event_target:vassal_to_take_county_from = {
			letter_event = { id = soh.6243 } # Inform the vassal
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = proud
			}
			
			mult_modifier = {
				factor = 10
				trait = just
			}
		}
	}
	
	option = {
		trigger = {
			has_dlc = "Conclave"
			NOT = {
				owes_favor_to = event_target:vassal_to_take_county_from
			}
		}
		
		name = EVTOPTB_SOH_6242 # Give the vassal a Favor
		
		reverse_add_favor = event_target:vassal_to_take_county_from
		
		event_target:vassal_to_take_county_from = {
			letter_event = { id = soh.6244 } # Inform the vassal
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = paranoid
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = trusting
			}
		}
	}
	
	option = {
		trigger = {
			wealth >= 500
		}
		
		name = EVTOPTC_SOH_6242 # Give the vassal some money
		
		wealth = -500
		
		event_target:vassal_to_take_county_from = {
			letter_event = { id = soh.6245 } # Inform the vassal
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOT = {
					trait = greedy
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = charitable
			}
		}
	}
	
	option = {
		name = EVTOPTD_SOH_6242 # Give the vassal nothing
		
		event_target:vassal_to_take_county_from = {
			opinion = {
				who = ROOT 
				modifier = opinion_tyrant
			}
			
			letter_event = { id = soh.6246 } # Inform the vassal
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 10
				trait = arbitrary
			}
			
			mult_modifier = {
				factor = 0.1
				is_friend = event_target:vassal_to_take_county_from
			}
			
			mult_modifier = {
				factor = 0.1
				is_lover = event_target:vassal_to_take_county_from
			}
			
			mult_modifier = {
				factor = 10
				event_target:vassal_to_take_county_from = {
					china_eoc_hates_this_trigger = yes
				}
			}
			
			mult_modifier = {
				factor = 100
				is_rival = event_target:vassal_to_take_county_from
			}
		}
	}
}

# Vassal informed of loss of county and repayment - Grace
letter_event = {
	id = soh.6243
	desc = EVTDESC_SOH_6243
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6243 # I suppose I can live with that...
		
		change_variable = {
			which = grace
			value = 500
		}
	}
}

# Vassal informed of loss of county and repayment - Favor
letter_event = {
	id = soh.6244
	desc = EVTDESC_SOH_6244
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6244 # I suppose I can live with that...
		
		add_favor = FROM
	}
}

# Vassal informed of loss of county and repayment - money
letter_event = {
	id = soh.6245
	desc = EVTDESC_SOH_6245
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6245 # I suppose I can live with that...
		
		wealth = 500
	}
}

# Vassal informed of loss of county and repayment - nothing
letter_event = {
	id = soh.6246
	desc = EVTDESC_SOH_6246
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6246 # I will not forget this!
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					is_rival = event_target:character_getting_county
					is_rival = FROM
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = wroth
			}
			
			mult_modifier = {
				factor = 0.1
				trait = envious
			}
			
			mult_modifier = {
				factor = 0.1
				trait = proud
			}
			
			mult_modifier = {
				factor = 10
				trait = humble
			}
			
			mult_modifier = {
				factor = 10
				trait = kind
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6246 # I will never forgive this!
		
		if = {
			limit = {
				NOR = {
					is_friend = FROM
					is_lover = FROM
				}
			}
			
			add_rival = FROM
		}
		
		else = {
			if = {
				limit = {
					is_friend = FROM
				}
				remove_friend = FROM
			}
			
			if = {
				limit = {
					is_lover = FROM
				}
				remove_lover = FROM
			}
		}
		
		ai_chance = {
			factor = 100
			
			trigger = {
				NOR = {
					is_friend = FROM
					is_lover = FROM
					is_friend = event_target:character_getting_county
					is_lover = event_target:character_getting_county
				}
			}
		}
	}
}



##### Request Physician

### Independent

# Ping EoC and set up scopes if triggered from decision
character_event = {
	id = soh.6248
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = eoc
		
		FROMFROM = {
			clear_grace_decision_flags_effect = yes
			save_event_target_as = grace_decision_taker
		}
		
		if = {
			limit = {
				china_would_refuse_chinese_doctor_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_refuse_offer
			}
		}
		
		else_if = {
			limit = {
				china_would_accept_chinese_doctor_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_accept_offer
			}
		}
		
		else = {
			FROMFROM = {
				set_character_flag = grace_neutral_offer
			}
		}
		
		if = {
			limit = {
				event_target:eoc = {
					primary_title = {
						OR = {
							has_law = grand_chancellor_law_1
							has_law = grand_chancellor_law_2
						}
					}
					
					persistent_event_target:my_grand_chancellor = {
						always = yes
					}
				}
			}
			
			event_target:eoc = {
				persistent_event_target:my_grand_chancellor = {
					narrative_event = { id = soh.6249 } # EoC's GC has a say
				}
			}
		}
		
		else = {
			event_target:eoc = {
				narrative_event = { id = soh.6250 } # EoC gets request
			}
		}
	}
}

# GC might have a say
narrative_event = {
	id = soh.6249
	title = EVTTITLE_SOH_6249
	
	desc = {
		text = EVTDESCA_SOH_6249
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6249
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6249
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6249 # Indicate that the EoC should accept
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_accept_offer_gc
		}
		
		gc_accept_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_accept_grace_score = yes
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6249 # Indicate that the EoC should refuse
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_refuse_offer_gc
		}
		
		gc_refuse_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_refuse_grace_score = yes
		}
	}
	
	option = {
		name = EVTOPTC_SOH_6249 # Indicate no strong preference
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_neutral_offer_gc
		}
		
		gc_neutral_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_neutral_grace_score = yes
		}
	}
	
	after = {
		event_target:eoc = {
			narrative_event = { id = soh.6250 } # EoC informed of the request and the GC's position
		}
	}
}

# EoC gets the request (and possible recommendation)
narrative_event = {
	id = soh.6250
	title = EVTTITLE_SOH_6250
	
	desc = {
		text = EVTDESCA_SOH_6250
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6250
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6250
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCD_SOH_6250
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCE_SOH_6250
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCF_SOH_6250
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCG_SOH_6250
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCH_SOH_6250
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCI_SOH_6250
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCJ_SOH_6250
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCK_SOH_6250
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCL_SOH_6250
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6250 # Accept the request
		
		log = "[Root.GetBestName] accepted [grace_decision_taker.GetBestName]'s physician Boon request!"
		
		hidden_tooltip = {
			save_event_target_as = chinese_character_origin
			create_chinese_physician_effect = yes
			event_target:new_chinese_doctor = {
				move_character = event_target:grace_decision_taker
			}
		}
		
		eoc_accept_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6251 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_accept_boon_score = yes
			
			mult_modifier = {
				factor = 10
				trait = kind
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6250 # Refuse
		
		log = "[Root.GetBestName] refused [grace_decision_taker.GetBestName]'s physician Boon request!"
		
		eoc_refuse_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6252 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_refuse_boon_score = yes
		}
	}
}

# Request accepted
letter_event = {
	id = soh.6251
	desc = EVTDESC_SOH_6251
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6251 # Great!
		
		set_character_flag = grace_character
		
		event_target:new_chinese_doctor = {
			opinion = {
				who = ROOT
				modifier = opinion_servant
				months = 1200
			}
		}
		
		if = {
			limit = {
				NOT = {
					any_courtier_or_vassal = {
						has_minor_title = title_court_physician
					}
				}
			}
			event_target:new_chinese_doctor = {
				give_minor_title = title_court_physician
			}
		}
	}
}

# Request refused
letter_event = {
	id = soh.6252
	desc = EVTDESC_SOH_6252
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6252 # Really?
		
		opinion = {
			who = FROM
			modifier = opinion_china_grace_refused_physician_boon
		}
	}
}

### Vassal

# Ping EoC and set up scopes if triggered from decision
character_event = {
	id = soh.6254
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = eoc
		
		FROMFROM = {
			clear_grace_decision_flags_effect = yes
			save_event_target_as = grace_decision_taker
		}
		
		event_target:eoc = {
			character_event = { id = soh.6255 } # Inform EoC
		}
	}
}

# EoC gets the request
character_event = {
	id = soh.6255
	desc = EVTDESC_SOH_6255
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6255 # It's not like I can stop it...
		
		hidden_tooltip = {
			save_event_target_as = chinese_character_origin
			create_chinese_physician_effect = yes
			event_target:new_chinese_doctor = {
				move_character = event_target:grace_decision_taker
			}
		}
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6256 } # Inform sender
		}
	}
}

# Physician arrives
letter_event = {
	id = soh.6256
	desc = EVTDESC_SOH_6256
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6256 # Great!
		
		event_target:new_chinese_doctor = {
			opinion = {
				who = ROOT
				modifier = opinion_servant
				months = 1200
			}
		}
		
		set_character_flag = grace_character
		
		if = {
			limit = {
				NOT = {
					any_courtier_or_vassal = {
						has_minor_title = title_court_physician
					}
				}
			}
			
			event_target:new_chinese_doctor = {
				give_minor_title = title_court_physician
			}
		}
	}
}



##### Request Siege Engineer

### Independent

# Ping EoC and set up scopes if triggered from decision
character_event = {
	id = soh.6258
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = eoc
		
		FROMFROM = {
			clear_grace_decision_flags_effect = yes
			save_event_target_as = grace_decision_taker
		}
		
		if = {
			limit = {
				china_would_refuse_siege_engineer_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_refuse_offer
			}
		}
		
		else_if = {
			limit = {
				china_would_accept_siege_engineer_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_accept_offer
			}
		}
		
		else = {
			FROMFROM = {
				set_character_flag = grace_neutral_offer
			}
		}
		
		if = {
			limit = {
				event_target:eoc = {
					primary_title = {
						OR = {
							has_law = grand_chancellor_law_1
							has_law = grand_chancellor_law_2
						}
					}
					
					persistent_event_target:my_grand_chancellor = {
						always = yes
					}
				}
			}
			
			event_target:eoc = {
				persistent_event_target:my_grand_chancellor = {
					narrative_event = { id = soh.6259 } # EoC's GC has a say
				}
			}
		}
		
		else = {
			event_target:eoc = {
				narrative_event = { id = soh.6260 } # EoC gets request
			}
		}
	}
}

# GC might have a say
narrative_event = {
	id = soh.6259
	title = EVTTITLE_SOH_6259
	
	desc = {
		text = EVTDESCA_SOH_6259
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6259
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6259
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6259 # Indicate that the EoC should accept
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_accept_offer_gc
		}
		
		gc_accept_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_accept_grace_score = yes
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6259 # Indicate that the EoC should refuse
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_refuse_offer_gc
		}
		
		gc_refuse_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_refuse_grace_score = yes
		}
	}
	
	option = {
		name = EVTOPTC_SOH_6259 # Indicate no strong preference
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_neutral_offer_gc
		}
		
		gc_neutral_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_neutral_grace_score = yes
		}
	}
	
	after = {
		event_target:eoc = {
			narrative_event = { id = soh.6260 } # EoC informed of the request and the GC's position
		}
	}
}

# EoC gets the request (and possible recommendation)
narrative_event = {
	id = soh.6260
	title = EVTTITLE_SOH_6260
	
	desc = {
		text = EVTDESCA_SOH_6260
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6260
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6260
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCD_SOH_6260
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCE_SOH_6260
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCF_SOH_6260
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCG_SOH_6260
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCH_SOH_6260
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCI_SOH_6260
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCJ_SOH_6260
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCK_SOH_6260
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCL_SOH_6260
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6260 # Accept the request
		
		log = "[Root.GetBestName] accepted [grace_decision_taker.GetBestName]'s siege engineer Boon request!"
		
		hidden_tooltip = {
			save_event_target_as = chinese_character_origin
			create_chinese_siege_engineer_effect = yes
			event_target:new_siege_engineer = {
				move_character = event_target:grace_decision_taker
			}
		}
		
		eoc_accept_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6261 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_accept_boon_score = yes
			
			mult_modifier = {
				factor = 10
				trait = trusting
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6260 # Refuse
		
		log = "[Root.GetBestName] refused [grace_decision_taker.GetBestName]'s siege engineer Boon request!"
		
		eoc_refuse_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6262 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_refuse_boon_score = yes
		}
	}
}

# Request accepted
letter_event = {
	id = soh.6261
	desc = EVTDESC_SOH_6261
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6261 # Great!
		
		event_target:new_siege_engineer = {
			opinion = {
				who = ROOT
				modifier = opinion_servant
				months = 1200
			}
		}
		
		set_character_flag = grace_character
		
		if = {
			limit = {
				can_grant_title = title_commander
			}
			
			event_target:new_siege_engineer = {
				give_minor_title = title_commander
			}
		}
	}
}

# Request refused
letter_event = {
	id = soh.6262
	desc = EVTDESC_SOH_6262
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6262 # Really?
		
		opinion = {
			who = FROM
			modifier = opinion_china_grace_refused_siege_engineer_boon
		}
	}
}

### Vassal

# Ping EoC and set up scopes if triggered from decision
character_event = {
	id = soh.6264
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = eoc
		
		FROMFROM = {
			clear_grace_decision_flags_effect = yes
			save_event_target_as = grace_decision_taker
		}
		
		event_target:eoc = {
			character_event = { id = soh.6265 } # Inform EoC
		}
	}
}

# EoC gets the request
character_event = {
	id = soh.6265
	desc = EVTDESC_SOH_6265
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6265 # It's not like I can stop it...
		
		hidden_tooltip = {
			save_event_target_as = chinese_character_origin
			create_chinese_siege_engineer_effect = yes
			event_target:new_siege_engineer = {
				move_character = event_target:grace_decision_taker
			}
		}
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6266 } # Inform sender
		}
	}
}

# Siege engineer arrives
letter_event = {
	id = soh.6266
	desc = EVTDESC_SOH_6266
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6266 # Great!
		
		event_target:new_siege_engineer = {
			opinion = {
				who = ROOT
				modifier = opinion_servant
				months = 1200
			}
		}
		
		set_character_flag = grace_character
		
		if = {
			limit = {
				can_grant_title = title_commander
			}
			
			event_target:new_siege_engineer = {
				give_minor_title = title_commander
			}
		}
	}
}



##### Request Strategist

### Independent

# Ping EoC and set up scopes if triggered from decision
character_event = {
	id = soh.6268
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = eoc
		
		FROMFROM = {
			clear_grace_decision_flags_effect = yes
			save_event_target_as = grace_decision_taker
		}
		
		if = {
			limit = {
				china_would_refuse_chinese_strategist_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_refuse_offer
			}
		}
		
		else_if = {
			limit = {
				china_would_accept_chinese_strategist_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_accept_offer
			}
		}
		
		else = {
			FROMFROM = {
				set_character_flag = grace_neutral_offer
			}
		}
		
		if = {
			limit = {
				event_target:eoc = {
					primary_title = {
						OR = {
							has_law = grand_chancellor_law_1
							has_law = grand_chancellor_law_2
						}
					}
					
					persistent_event_target:my_grand_chancellor = {
						always = yes
					}
				}
			}
			
			event_target:eoc = {
				persistent_event_target:my_grand_chancellor = {
					narrative_event = { id = soh.6269 } # EoC's GC has a say
				}
			}
		}
		
		else = {
			event_target:eoc = {
				narrative_event = { id = soh.6270 } # EoC gets request
			}
		}
	}
}

# GC might have a say
narrative_event = {
	id = soh.6269
	title = EVTTITLE_SOH_6269
	
	desc = {
		text = EVTDESCA_SOH_6269
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6269
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6269
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6269 # Indicate that the EoC should accept
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_accept_offer_gc
		}
		
		gc_accept_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_accept_grace_score = yes
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6269 # Indicate that the EoC should refuse
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_refuse_offer_gc
		}
		
		gc_refuse_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_refuse_grace_score = yes
		}
	}
	
	option = {
		name = EVTOPTC_SOH_6269 # Indicate no strong preference
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_neutral_offer_gc
		}
		
		gc_neutral_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_neutral_grace_score = yes
		}
	}
	
	after = {
		event_target:eoc = {
			narrative_event = { id = soh.6270 } # EoC informed of the request and the GC's position
		}
	}
}

# EoC gets the request (and possible recommendation)
narrative_event = {
	id = soh.6270
	title = EVTTITLE_SOH_6270
	
	desc = {
		text = EVTDESCA_SOH_6270
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6270
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6270
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCD_SOH_6270
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCE_SOH_6270
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCF_SOH_6270
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCG_SOH_6270
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCH_SOH_6270
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCI_SOH_6270
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCJ_SOH_6270
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCK_SOH_6270
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCL_SOH_6270
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6270 # Accept the request
		
		log = "[Root.GetBestName] accepted [grace_decision_taker.GetBestName]'s strategist Boon request!"
		
		hidden_tooltip = {
			save_event_target_as = chinese_character_origin
			create_chinese_strategist_effect = yes
			event_target:new_strategist = {
				move_character = event_target:grace_decision_taker
			}
		}
		
		eoc_accept_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6271 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_accept_boon_score = yes
			
			mult_modifier = {
				factor = 10
				trait = trusting
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6270 # Refuse
		
		log = "[Root.GetBestName] refused [grace_decision_taker.GetBestName]'s strategist Boon request!"
		
		eoc_refuse_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6272 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_refuse_boon_score = yes
		}
	}
}

# Request accepted
letter_event = {
	id = soh.6271
	desc = EVTDESC_SOH_6271
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6271 # Great!
		
		event_target:new_strategist = {
			opinion = {
				who = ROOT
				modifier = opinion_servant
				months = 1200
			}
		}
		
		set_character_flag = grace_character
			
		if = {
			limit = {
				can_grant_title = title_strategist
			}
			
			event_target:new_strategist = {
				give_minor_title = title_strategist
			}
		}
		
		if = {
			limit = {
				can_grant_title = title_commander
			}
			
			event_target:new_strategist = {
				give_minor_title = title_commander
			}
		}
	}
}

# Request refused
letter_event = {
	id = soh.6272
	desc = EVTDESC_SOH_6272
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6272 # Really?
		
		opinion = {
			who = FROM
			modifier = opinion_china_grace_refused_strategist_boon
		}
	}
}

### Vassal

# Ping EoC and set up scopes if triggered from decision
character_event = {
	id = soh.6274
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = eoc
		
		FROMFROM = {
			clear_grace_decision_flags_effect = yes
			save_event_target_as = grace_decision_taker
		}
		
		event_target:eoc = {
			character_event = { id = soh.6275 } # Inform EoC
		}
	}
}

# EoC gets the request
character_event = {
	id = soh.6275
	desc = EVTDESC_SOH_6275
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6275 # It's not like I can stop it...
		
		hidden_tooltip = {
			save_event_target_as = chinese_character_origin
			create_chinese_strategist_effect = yes
			event_target:new_strategist = {
				move_character = event_target:grace_decision_taker
			}
		}
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6276 } # Inform sender
		}
	}
}

# Strategist arrives
letter_event = {
	id = soh.6276
	desc = EVTDESC_SOH_6276
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6276 # Great!
		
		event_target:new_strategist = {
			opinion = {
				who = ROOT
				modifier = opinion_servant
				months = 1200
			}
		}
		
		set_character_flag = grace_character
			
		if = {
			limit = {
				can_grant_title = title_strategist
			}
			
			event_target:new_strategist = {
				give_minor_title = title_strategist
			}
		}
		
		if = {
			limit = {
				can_grant_title = title_commander
			}
			
			event_target:new_strategist = {
				give_minor_title = title_commander
			}
		}
	}
}



##### Request Scholar-Bureaucrat

### Independent

# Ping EoC and set up scopes if triggered from decision
character_event = {
	id = soh.6278
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = eoc
		
		FROMFROM = {
			clear_grace_decision_flags_effect = yes
			save_event_target_as = grace_decision_taker
		}
		
		if = {
			limit = {
				china_would_refuse_chinese_administrator_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_refuse_offer
			}
		}
		
		else_if = {
			limit = {
				china_would_accept_chinese_administrator_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_accept_offer
			}
		}
		
		else = {
			FROMFROM = {
				set_character_flag = grace_neutral_offer
			}
		}
		
		if = {
			limit = {
				event_target:eoc = {
					primary_title = {
						OR = {
							has_law = grand_chancellor_law_1
							has_law = grand_chancellor_law_2
						}
					}
					
					persistent_event_target:my_grand_chancellor = {
						always = yes
					}
				}
			}
			
			event_target:eoc = {
				persistent_event_target:my_grand_chancellor = {
					narrative_event = { id = soh.6279 } # EoC's GC has a say
				}
			}
		}
		
		else = {
			event_target:eoc = {
				narrative_event = { id = soh.6280 } # EoC gets request
			}
		}
	}
}

# GC might have a say
narrative_event = {
	id = soh.6279
	title = EVTTITLE_SOH_6279
	
	desc = {
		text = EVTDESCA_SOH_6279
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6279
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6279
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6279 # Indicate that the EoC should accept
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_accept_offer_gc
		}
		
		gc_accept_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_accept_grace_score = yes
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6279 # Indicate that the EoC should refuse
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_refuse_offer_gc
		}
		
		gc_refuse_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_refuse_grace_score = yes
		}
	}
	
	option = {
		name = EVTOPTC_SOH_6279 # Indicate no strong preference
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_neutral_offer_gc
		}
		
		gc_neutral_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_neutral_grace_score = yes
		}
	}
	
	after = {
		event_target:eoc = {
			narrative_event = { id = soh.6280 } # EoC informed of the request and the GC's position
		}
	}
}

# EoC gets the request (and possible recommendation)
narrative_event = {
	id = soh.6280
	title = EVTTITLE_SOH_6280
	
	desc = {
		text = EVTDESCA_SOH_6280
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6280
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6280
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCD_SOH_6280
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCE_SOH_6280
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCF_SOH_6280
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCG_SOH_6280
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCH_SOH_6280
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCI_SOH_6280
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCJ_SOH_6280
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCK_SOH_6280
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCL_SOH_6280
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6280 # Accept the request
		
		log = "[Root.GetBestName] accepted [grace_decision_taker.GetBestName]'s scholar-bureaucrat Boon request!"
		
		hidden_tooltip = {
			save_event_target_as = chinese_character_origin
			create_chinese_administrator_effect = yes
			event_target:new_administrator = {
				move_character = event_target:grace_decision_taker
			}
		}
		
		eoc_accept_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6281 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_accept_boon_score = yes
			
			mult_modifier = {
				factor = 10
				trait = charitable
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6280 # Refuse
		
		log = "[Root.GetBestName] refused [grace_decision_taker.GetBestName]'s scholar-bureaucrat Boon request!"
		
		eoc_refuse_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6282 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_refuse_boon_score = yes
		}
	}
}

# Request accepted
letter_event = {
	id = soh.6281
	desc = EVTDESC_SOH_6281
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6281 # Great!
		
		event_target:new_administrator = {
			opinion = {
				who = ROOT
				modifier = opinion_servant
				months = 1200
			}
		}
		
		set_character_flag = grace_character
		
		if = {
			limit = {
				can_grant_title = title_administrator
			}
			
			event_target:new_administrator = {
				give_minor_title = title_administrator
			}
		}
	}
}

# Request refused
letter_event = {
	id = soh.6282
	desc = EVTDESC_SOH_6282
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6282 # Really?
		
		opinion = {
			who = FROM
			modifier = opinion_china_grace_refused_administrator_boon
		}
	}
}

### Vassal

# Ping EoC and set up scopes if triggered from decision
character_event = {
	id = soh.6284
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = eoc
		
		FROMFROM = {
			clear_grace_decision_flags_effect = yes
			save_event_target_as = grace_decision_taker
		}
		
		event_target:eoc = {
			character_event = { id = soh.6285 } # Inform EoC
		}
	}
}

# EoC gets the request
character_event = {
	id = soh.6285
	desc = EVTDESC_SOH_6285
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6285 # It's not like I can stop it...
		
		hidden_tooltip = {
			save_event_target_as = chinese_character_origin
			create_chinese_administrator_effect = yes
			event_target:new_administrator = {
				move_character = event_target:grace_decision_taker
			}
		}
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6286 } # Inform sender
		}
	}
}

# Scholar-bureaucrat arrives
letter_event = {
	id = soh.6286
	desc = EVTDESC_SOH_6286
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6286 # Great!
		
		event_target:new_administrator = {
			opinion = {
				who = ROOT
				modifier = opinion_servant
				months = 1200
			}
		}
		
		set_character_flag = grace_character
		
		if = {
			limit = {
				can_grant_title = title_administrator
			}
			
			event_target:new_administrator = {
				give_minor_title = title_administrator
			}
		}
	}
}



##### Request Master Engineer

### Independent

# Ping EoC and set up scopes if triggered from decision
character_event = {
	id = soh.6288
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = eoc
		
		FROMFROM = {
			clear_grace_decision_flags_effect = yes
			save_event_target_as = grace_decision_taker
		}
		
		if = {
			limit = {
				china_would_refuse_master_engineer_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_refuse_offer
			}
		}
		
		else_if = {
			limit = {
				china_would_accept_master_engineer_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_accept_offer
			}
		}
		
		else = {
			FROMFROM = {
				set_character_flag = grace_neutral_offer
			}
		}
		
		if = {
			limit = {
				event_target:eoc = {
					primary_title = {
						OR = {
							has_law = grand_chancellor_law_1
							has_law = grand_chancellor_law_2
						}
					}
					
					persistent_event_target:my_grand_chancellor = {
						always = yes
					}
				}
			}
			
			event_target:eoc = {
				persistent_event_target:my_grand_chancellor = {
					narrative_event = { id = soh.6289 } # EoC's GC has a say
				}
			}
		}
		
		else = {
			event_target:eoc = {
				narrative_event = { id = soh.6290 } # EoC gets request
			}
		}
	}
}

# GC might have a say
narrative_event = {
	id = soh.6289
	title = EVTTITLE_SOH_6289
	
	desc = {
		text = EVTDESCA_SOH_6289
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6289
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6289
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6289 # Indicate that the EoC should accept
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_accept_offer_gc
		}
		
		gc_accept_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_accept_grace_score = yes
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6289 # Indicate that the EoC should refuse
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_refuse_offer_gc
		}
		
		gc_refuse_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_refuse_grace_score = yes
		}
	}
	
	option = {
		name = EVTOPTC_SOH_6289 # Indicate no strong preference
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_neutral_offer_gc
		}
		
		gc_neutral_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_neutral_grace_score = yes
		}
	}
	
	after = {
		event_target:eoc = {
			narrative_event = { id = soh.6290 } # EoC informed of the request and the GC's position
		}
	}
}

# EoC gets the request (and possible recommendation)
narrative_event = {
	id = soh.6290
	title = EVTTITLE_SOH_6290
	
	desc = {
		text = EVTDESCA_SOH_6290
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6290
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6290
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCD_SOH_6290
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCE_SOH_6290
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCF_SOH_6290
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCG_SOH_6290
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCH_SOH_6290
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCI_SOH_6290
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCJ_SOH_6290
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCK_SOH_6290
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCL_SOH_6290
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6290 # Accept the request
		
		log = "[Root.GetBestName] accepted [grace_decision_taker.GetBestName]'s master engineer Boon request!"
		
		hidden_tooltip = {
			save_event_target_as = chinese_character_origin
			create_chinese_master_engineer_effect = yes
			event_target:new_master_engineer = {
				move_character = event_target:grace_decision_taker
			}
		}
		
		eoc_accept_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6291 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_accept_boon_score = yes
			
			mult_modifier = {
				factor = 10
				trait = charitable
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6290 # Refuse
		
		log = "[Root.GetBestName] refused [grace_decision_taker.GetBestName]'s master engineer Boon request!"
		
		eoc_refuse_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6292 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_refuse_boon_score = yes
		}
	}
}

# Request accepted
letter_event = {
	id = soh.6291
	desc = EVTDESC_SOH_6291
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6291 # Great!
		
		event_target:new_master_engineer = {
			opinion = {
				who = ROOT
				modifier = opinion_servant
				months = 1200
			}
		}
		
		set_character_flag = grace_character
		
		if = {
			limit = {
				can_grant_title = title_master_engineer
			}
			
			event_target:new_master_engineer = {
				give_minor_title = title_master_engineer
			}
		}
	}
}

# Request refused
letter_event = {
	id = soh.6292
	desc = EVTDESC_SOH_6292
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6292 # Really?
		
		opinion = {
			who = FROM
			modifier = opinion_china_grace_refused_master_engineer_boon
		}
	}
}

### Vassal

# Ping EoC and set up scopes if triggered from decision
character_event = {
	id = soh.6294
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = eoc
		
		FROMFROM = {
			clear_grace_decision_flags_effect = yes
			save_event_target_as = grace_decision_taker
		}
		
		event_target:eoc = {
			character_event = { id = soh.6295 } # Inform EoC
		}
	}
}

# EoC gets the request
character_event = {
	id = soh.6295
	desc = EVTDESC_SOH_6295
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6295 # It's not like I can stop it...
		
		hidden_tooltip = {
			save_event_target_as = chinese_character_origin
			create_chinese_master_engineer_effect = yes
			event_target:new_master_engineer = {
				move_character = event_target:grace_decision_taker
			}
		}
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6296 } # Inform sender
		}
	}
}

# Master engineer arrives
letter_event = {
	id = soh.6296
	desc = EVTDESC_SOH_6296
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6296 # Great!
		
		event_target:new_master_engineer = {
			opinion = {
				who = ROOT
				modifier = opinion_servant
				months = 1200
			}
		}
		
		set_character_flag = grace_character
		
		if = {
			limit = {
				can_grant_title = title_master_engineer
			}
			
			event_target:new_master_engineer = {
				give_minor_title = title_master_engineer
			}
		}
	}
}



##### Request Artifact

### Independent

# Ping EoC and set up scopes if triggered from decision
character_event = {
	id = soh.6298
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = eoc
		
		FROMFROM = {
			clear_grace_decision_flags_effect = yes
			save_event_target_as = grace_decision_taker
		}
		
		if = {
			limit = {
				china_would_refuse_artifact_boon_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_refuse_offer
			}
		}
		
		else_if = {
			limit = {
				china_would_accept_artifact_boon_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_accept_offer
			}
		}
		
		else = {
			FROMFROM = {
				set_character_flag = grace_neutral_offer
			}
		}
		
		if = {
			limit = {
				event_target:eoc = {
					primary_title = {
						OR = {
							has_law = grand_chancellor_law_1
							has_law = grand_chancellor_law_2
						}
					}
					
					persistent_event_target:my_grand_chancellor = {
						always = yes
					}
				}
			}
			
			event_target:eoc = {
				persistent_event_target:my_grand_chancellor = {
					narrative_event = { id = soh.6299 } # EoC's GC has a say
				}
			}
		}
		
		else = {
			event_target:eoc = {
				narrative_event = { id = soh.6300 } # EoC gets request
			}
		}
	}
}

# GC might have a say
narrative_event = {
	id = soh.6299
	title = EVTTITLE_SOH_6299
	
	desc = {
		text = EVTDESCA_SOH_6299
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6299
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6299
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6299 # Indicate that the EoC should accept
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_accept_offer_gc
		}
		
		gc_accept_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_accept_grace_score = yes
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6299 # Indicate that the EoC should refuse
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_refuse_offer_gc
		}
		
		gc_refuse_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_refuse_grace_score = yes
		}
	}
	
	option = {
		name = EVTOPTC_SOH_6299 # Indicate no strong preference
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_neutral_offer_gc
		}
		
		gc_neutral_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_neutral_grace_score = yes
		}
	}
	
	after = {
		event_target:eoc = {
			narrative_event = { id = soh.6300 } # EoC informed of the request and the GC's position
		}
	}
}

# EoC gets the request (and possible recommendation)
narrative_event = {
	id = soh.6300
	title = EVTTITLE_SOH_6300
	
	desc = {
		text = EVTDESCA_SOH_6300
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6300
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6300
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCD_SOH_6300
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCE_SOH_6300
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCF_SOH_6300
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCG_SOH_6300
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCH_SOH_6300
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCI_SOH_6300
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCJ_SOH_6300
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCK_SOH_6300
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCL_SOH_6300
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6300 # Accept the request
		
		log = "[Root.GetBestName] accepted [grace_decision_taker.GetBestName]'s artifact Boon request!"
		
		wealth = -500
		
		eoc_accept_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6301 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_accept_boon_score = yes
			
			mult_modifier = {
				factor = 10
				trait = charitable
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6300 # Refuse
		
		log = "[Root.GetBestName] refused [grace_decision_taker.GetBestName]'s artifact Boon request!"
		
		eoc_refuse_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6302 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_refuse_boon_score = yes
			
			mult_modifier = {
				factor = 10
				trait = greedy
			}
		}
	}
}

# Request accepted
letter_event = {
	id = soh.6301
	desc = EVTDESC_SOH_6301
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	immediate = {
		e_china = {
			holder_scope = {
				save_event_target_as = chinese_artifact_origin
			}
		}
		
		add_random_chinese_artifact_with_moh_weight_effect = yes
	}
	
	option = {
		name = EVTOPTA_SOH_6301 # Great!
		
		set_character_flag = grace_character
	}
}

# Request refused
letter_event = {
	id = soh.6302
	desc = EVTDESC_SOH_6302
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6302 # Really?
		
		opinion = {
			who = FROM
			modifier = opinion_china_grace_refused_artifact_boon
		}
	}
}

### Vassal

# Ping EoC and set up scopes if triggered from decision
character_event = {
	id = soh.6304
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = eoc
		
		FROMFROM = {
			clear_grace_decision_flags_effect = yes
			save_event_target_as = grace_decision_taker
		}
		
		event_target:eoc = {
			character_event = { id = soh.6305 } # Inform EoC
		}
	}
}

# EoC gets the request
character_event = {
	id = soh.6305
	desc = EVTDESC_SOH_6305
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6305 # I can spare some trinket...
		
		wealth = -500
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6306 } # Inform sender
		}
	}
}

# Vassal gets artifact
letter_event = {
	id = soh.6306
	desc = EVTDESC_SOH_6306
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	immediate = {
		e_china = {
			holder_scope = {
				save_event_target_as = chinese_artifact_origin
			}
		}
		
		add_random_chinese_artifact_with_moh_weight_effect = yes
	}
	
	option = {
		name = EVTOPTA_SOH_6306 # Great!
		
		set_character_flag = grace_character
	}
}



##### Dismiss Councillor

### Vassal

# Ping EoC and set up scopes if triggered from decision
character_event = {
	id = soh.6308
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = eoc
		
		FROMFROM = {
			clear_grace_decision_flags_effect = yes
			save_event_target_as = grace_decision_taker
		}
		
		if = {
			limit = {
				china_would_refuse_dismiss_councillor_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_refuse_offer
			}
		}
		
		else_if = {
			limit = {
				china_would_accept_dismiss_councillor_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_accept_offer
			}
		}
		
		else = {
			FROMFROM = {
				set_character_flag = grace_neutral_offer
			}
		}
		
		if = {
			limit = {
				event_target:eoc = {
					primary_title = {
						OR = {
							has_law = grand_chancellor_law_1
							has_law = grand_chancellor_law_2
						}
					}
					
					persistent_event_target:my_grand_chancellor = {
						NOT = {
							character = FROMFROM
						}
					}
				}
			}
			
			event_target:eoc = {
				persistent_event_target:my_grand_chancellor = {
					narrative_event = { id = soh.6309 } # EoC's GC has a say
				}
			}
		}
		
		else = {
			if = {
				limit = {
					event_target:eoc = {
						primary_title = {
							OR = {
								has_law = grand_chancellor_law_1
								has_law = grand_chancellor_law_2
							}
						}
						
						persistent_event_target:my_grand_chancellor = {
							character = FROMFROM
						}
					}
				}
				
				FROMFROM = {
					set_character_flag = grace_accept_offer_gc
				}
			}
			
			event_target:eoc = {
				narrative_event = { id = soh.6310 } # EoC gets offer
			}
		}
	}
}

# GC might have a say
narrative_event = {
	id = soh.6309
	title = EVTTITLE_SOH_6309
	
	desc = {
		text = EVTDESCA_SOH_6309
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6309
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6309
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6309 # Indicate that the EoC should accept
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_accept_offer_gc
		}
		
		gc_accept_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 10
				event_target:grace_decision_taker = {
					has_character_flag = grace_accept_offer
				}
			}
			
			mult_modifier = {
				factor = 0.1
				event_target:grace_decision_taker = {
					root_hates_this_trigger = yes
				}
			}
			
			mult_modifier = {
				factor = 10
				is_friend = event_target:grace_decision_taker
			}
			
			mult_modifier = {
				factor = 10
				is_lover = event_target:grace_decision_taker
			}
			
			mult_modifier = {
				factor = 0.01
				is_rival = event_target:grace_decision_taker
			}
			
			mult_modifier = {
				factor = 10
				event_target:councillor_to_fire = {
					root_hates_this_trigger = yes
				}
			}
			
			mult_modifier = {
				factor = 0.1
				is_friend = event_target:councillor_to_fire
			}
			
			mult_modifier = {
				factor = 0.1
				is_lover = event_target:councillor_to_fire
			}
			
			mult_modifier = {
				factor = 100
				is_rival = event_target:councillor_to_fire
			}
			
			mult_modifier = {
				factor = 5
				event_target:grace_decision_taker = {
					has_character_flag = grace_accept_offer
				}
				trait = just
			}
			
			mult_modifier = {
				factor = 2
				event_target:grace_decision_taker = {
					has_character_flag = grace_accept_offer
				}
				trait = honest
			}
			
			mult_modifier = {
				factor = 0.5
				event_target:grace_decision_taker = {
					has_character_flag = grace_accept_offer
				}
				trait = deceitful
			}
			
			mult_modifier = {
				factor = 0.2
				event_target:grace_decision_taker = {
					has_character_flag = grace_accept_offer
				}
				trait = arbitrary
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6309 # Indicate that the EoC should refuse
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_refuse_offer_gc
		}
		
		gc_refuse_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 10
				event_target:grace_decision_taker = {
					has_character_flag = grace_refuse_offer
				}
			}
			
			mult_modifier = {
				factor = 10
				event_target:grace_decision_taker = {
					root_hates_this_trigger = yes
				}
			}
			
			mult_modifier = {
				factor = 100
				event_target:councillor_to_fire = {
					character = ROOT
				}
				NOR = {
					trait = depressed
					trait = content
					trait = humble
				}
			}
			
			mult_modifier = {
				factor = 10
				event_target:councillor_to_fire = {
					root_hates_this_trigger = yes
				}
			}
			
			mult_modifier = {
				factor = 0.1
				is_friend = event_target:councillor_to_fire
			}
			
			mult_modifier = {
				factor = 0.1
				is_lover = event_target:councillor_to_fire
			}
			
			mult_modifier = {
				factor = 100
				is_rival = event_target:councillor_to_fire
			}
			
			mult_modifier = {
				factor = 0.1
				is_friend = event_target:grace_decision_taker
			}
			
			mult_modifier = {
				factor = 0.1
				is_lover = event_target:grace_decision_taker
			}
			
			mult_modifier = {
				factor = 100
				is_rival = event_target:grace_decision_taker
			}
			
			mult_modifier = {
				factor = 5
				event_target:grace_decision_taker = {
					has_character_flag = grace_refuse_offer
				}
				trait = just
			}
			
			mult_modifier = {
				factor = 2
				event_target:grace_decision_taker = {
					has_character_flag = grace_refuse_offer
				}
				trait = honest
			}
			
			mult_modifier = {
				factor = 0.5
				event_target:grace_decision_taker = {
					has_character_flag = grace_refuse_offer
				}
				trait = deceitful
			}
			
			mult_modifier = {
				factor = 0.2
				event_target:grace_decision_taker = {
					has_character_flag = grace_refuse_offer
				}
				trait = arbitrary
			}
		}
	}
	
	option = {
		name = EVTOPTC_SOH_6309 # Indicate no strong preference
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_neutral_offer_gc
		}
		
		gc_neutral_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_neutral_grace_score = yes
		}
	}
	
	after = {
		event_target:eoc = {
			narrative_event = { id = soh.6310 } # EoC informed of the request and the GC's position
		}
	}
}

# EoC gets the request (and possible recommendation)
narrative_event = {
	id = soh.6310
	title = EVTTITLE_SOH_6310
	
	desc = {
		text = EVTDESCA_SOH_6310
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6310
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6310
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCD_SOH_6310
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCE_SOH_6310
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCF_SOH_6310
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCG_SOH_6310
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCH_SOH_6310
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCI_SOH_6310
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCJ_SOH_6310
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCK_SOH_6310
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCL_SOH_6310
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6310 # Accept the request
		
		log = "[Root.GetBestName] accepted [grace_decision_taker.GetBestName]'s dismiss councillor Boon request!"
		
		event_target:councillor_to_fire = {
			character_event = { id = soh.6313 } # Inform the fired councillor
		}
		
		eoc_accept_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6311 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_accept_boon_score = yes
			
			mult_modifier = {
				factor = 10
				event_target:councillor_to_fire = {
					china_eoc_hates_this_trigger = yes
				}
			}
			
			mult_modifier = {
				factor = 0.1
				is_friend = event_target:councillor_to_fire
			}
			
			mult_modifier = {
				factor = 0.1
				is_lover = event_target:councillor_to_fire
			}
			
			mult_modifier = {
				factor = 100
				is_rival = event_target:councillor_to_fire
			}
			
			mult_modifier = {
				factor = 10
				trait = trusting
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6310 # Refuse
		
		log = "[Root.GetBestName] refused [grace_decision_taker.GetBestName]'s dismiss councillor Boon request!"
		
		eoc_refuse_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6312 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_refuse_boon_score = yes
			
			mult_modifier = {
				factor = 10
				trait = paranoid
			}
		}
	}
}

# Request accepted
letter_event = {
	id = soh.6311
	desc = EVTDESC_SOH_6311
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6311 # Great!
		
		set_character_flag = grace_character
	}
}

# Request refused
letter_event = {
	id = soh.6312
	desc = EVTDESC_SOH_6312
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6312 # Really?
		
		opinion = {
			who = FROM
			modifier = opinion_china_grace_refused_dismiss_councillor_boon
		}
	}
}

# Fired councillor informed
character_event = {
	id = soh.6313
	desc = EVTDESC_SOH_6313
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6313 # They dare?
		
		add_character_modifier = { # Five years
			modifier = forced_off_the_council
			months = 60
		}
		
		if = {
			limit = {
				OR = {
					is_friend = event_target:grace_decision_taker
					is_lover = event_target:grace_decision_taker
				}
			}
			
			if = {
				limit = {
					is_friend = event_target:grace_decision_taker
				}
				remove_friend = event_target:grace_decision_taker
			}
			
			else = {
				remove_lover = event_target:grace_decision_taker
			}
		}
		
		else_if = {
			limit = {
				NOT = {
					is_rival = event_target:grace_decision_taker
				}
			}
			random = {
				chance = 50
				add_rival = event_target:grace_decision_taker
			}
		}
		
		fire_councillor_effect = yes
		
		opinion = { # Ten years
			who = event_target:grace_decision_taker
			modifier = got_me_fired
		}
	}
}



##### Request Command

### Vassal

# Ping EoC and set up scopes if triggered from decision
character_event = {
	id = soh.6315
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = eoc
		
		FROMFROM = {
			clear_grace_decision_flags_effect = yes
			save_event_target_as = grace_decision_taker
		}
		
		if = {
			limit = {
				china_would_refuse_command_boon_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_refuse_offer
			}
		}
		
		else_if = {
			limit = {
				china_would_accept_command_boon_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_accept_offer
			}
		}
		
		else = {
			FROMFROM = {
				set_character_flag = grace_neutral_offer
			}
		}
		
		if = {
			limit = {
				event_target:eoc = {
					primary_title = {
						OR = {
							has_law = grand_chancellor_law_1
							has_law = grand_chancellor_law_2
						}
					}
					
					persistent_event_target:my_grand_chancellor = {
						NOT = {
							character = FROMFROM
						}
					}
				}
			}
			
			event_target:eoc = {
				persistent_event_target:my_grand_chancellor = {
					narrative_event = { id = soh.6316 } # EoC's GC has a say
				}
			}
		}
		
		else = {
			if = {
				limit = {
					event_target:eoc = {
						primary_title = {
							OR = {
								has_law = grand_chancellor_law_1
								has_law = grand_chancellor_law_2
							}
						}
						
						persistent_event_target:my_grand_chancellor = {
							character = FROMFROM
						}
					}
				}
				
				FROMFROM = {
					set_character_flag = grace_accept_offer_gc
				}
			}
			
			event_target:eoc = {
				narrative_event = { id = soh.6317 } # EoC gets offer
			}
		}
	}
}

# GC might have a say
narrative_event = {
	id = soh.6316
	title = EVTTITLE_SOH_6316
	
	desc = {
		text = EVTDESCA_SOH_6316
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6316
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6316
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6316 # Indicate that the EoC should accept
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_accept_offer_gc
		}
		
		gc_accept_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_accept_grace_score = yes
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6316 # Indicate that the EoC should refuse
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_refuse_offer_gc
		}
		
		gc_refuse_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_refuse_grace_score = yes
		}
	}
	
	option = {
		name = EVTOPTC_SOH_6316 # Indicate no strong preference
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_neutral_offer_gc
		}
		
		gc_neutral_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_neutral_grace_score = yes
		}
	}
	
	after = {
		event_target:eoc = {
			narrative_event = { id = soh.6317 } # EoC informed of the request and the GC's position
		}
	}
}

# EoC gets the request (and possible recommendation)
narrative_event = {
	id = soh.6317
	title = EVTTITLE_SOH_6317
	
	desc = {
		text = EVTDESCA_SOH_6317
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6317
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6317
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCD_SOH_6317
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCE_SOH_6317
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCF_SOH_6317
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCG_SOH_6317
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCH_SOH_6317
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCI_SOH_6317
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCJ_SOH_6317
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCK_SOH_6317
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCL_SOH_6317
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	immediate = {
		random_courtier_or_vassal = {
			limit = {
				has_minor_title = title_commander
			}
			
			preferred_limit = {
				NOT = {
					reverse_has_opinion_modifier = {
						who = ROOT 
						modifier = opinion_forced_commander
					}
				}
				is_voter = no
				is_rival = event_target:grace_decision_taker
				is_rival = ROOT
			}
			
			preferred_limit = {
				NOT = {
					reverse_has_opinion_modifier = {
						who = ROOT 
						modifier = opinion_forced_commander
					}
				}
				is_voter = no
				is_rival = event_target:grace_decision_taker
				NOR = {
					is_friend = ROOT
					is_lover = ROOT
				}
			}
			
			preferred_limit = {
				NOT = {
					reverse_has_opinion_modifier = {
						who = ROOT 
						modifier = opinion_forced_commander
					}
				}
				is_voter = no
				NOR = {
					is_friend = event_target:grace_decision_taker
					is_lover = event_target:grace_decision_taker
				}
				is_rival = ROOT
			}
			
			preferred_limit = {
				NOT = {
					reverse_has_opinion_modifier = {
						who = ROOT 
						modifier = opinion_forced_commander
					}
				}
				is_voter = no
				NOR = {
					is_friend = event_target:grace_decision_taker
					is_lover = event_target:grace_decision_taker
				}
			}
			
			preferred_limit = {
				NOT = {
					reverse_has_opinion_modifier = {
						who = ROOT 
						modifier = opinion_forced_commander
					}
				}
				is_rival = event_target:grace_decision_taker
				is_rival = ROOT
			}
			
			preferred_limit = {
				NOT = {
					reverse_has_opinion_modifier = {
						who = ROOT 
						modifier = opinion_forced_commander
					}
				}
				is_rival = event_target:grace_decision_taker
				NOR = {
					is_friend = ROOT
					is_lover = ROOT
				}
			}
			
			preferred_limit = {
				NOT = {
					reverse_has_opinion_modifier = {
						who = ROOT 
						modifier = opinion_forced_commander
					}
				}
				NOR = {
					is_friend = event_target:grace_decision_taker
					is_lover = event_target:grace_decision_taker
				}
				is_rival = ROOT
			}
			
			preferred_limit = {
				NOT = {
					reverse_has_opinion_modifier = {
						who = ROOT 
						modifier = opinion_forced_commander
					}
				}
				NOR = {
					is_friend = event_target:grace_decision_taker
					is_lover = event_target:grace_decision_taker
				}
			}
			
			preferred_limit = {
				NOT = {
					reverse_has_opinion_modifier = {
						who = ROOT 
						modifier = opinion_forced_commander
					}
				}
			}
			
			save_event_target_as = commander_to_replace
		}
	}
	
	option = {
		name = EVTOPTA_SOH_6317 # Accept the request
		
		log = "[Root.GetBestName] accepted [grace_decision_taker.GetBestName]'s grant command Boon request!"
		
		event_target:commander_to_replace = {
			remove_title = title_commander
			character_event = { id = soh.6320 } # Inform the fired commander
		}
		
		event_target:grace_decision_taker = {
			give_minor_title = title_commander
			reverse_opinion = {
				who = ROOT 
				modifier = opinion_forced_commander
			}
		}
		
		eoc_accept_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6318 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_accept_boon_score = yes
			
			mult_modifier = {
				factor = 10
				trait = trusting
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6317 # Refuse
		
		log = "[Root.GetBestName] refused [grace_decision_taker.GetBestName]'s grant command Boon request!"
		
		eoc_refuse_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6319 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_refuse_boon_score = yes
			
			mult_modifier = {
				factor = 10
				trait = paranoid
			}
		}
	}
}

# Request accepted
letter_event = {
	id = soh.6318
	desc = EVTDESC_SOH_6318
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6318 # Great!
		
		set_character_flag = grace_character
	}
}

# Request refused
letter_event = {
	id = soh.6319
	desc = EVTDESC_SOH_6319
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6319 # Really?
		
		opinion = {
			who = FROM
			modifier = opinion_china_grace_refused_request_command_boon
		}
	}
}

# Fired commander informed
character_event = {
	id = soh.6320
	desc = EVTDESC_SOH_6320
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6320 # I see...
	}
}



##### Become Grand Chancellor

# Handled with normal GC events - no events here!



##### Renounce Claims

### Vassal

# Ping EoC and set up scopes if triggered from decision
character_event = {
	id = soh.6322
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = eoc
		
		FROMFROM = {
			clear_grace_decision_flags_effect = yes
			save_event_target_as = grace_decision_taker
		}
		
		if = {
			limit = {
				china_would_refuse_renounce_claims_boon_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_refuse_offer
			}
		}
		
		else_if = {
			limit = {
				china_would_accept_renounce_claims_boon_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_accept_offer
			}
		}
		
		else = {
			FROMFROM = {
				set_character_flag = grace_neutral_offer
			}
		}
		
		if = {
			limit = {
				event_target:eoc = {
					primary_title = {
						OR = {
							has_law = grand_chancellor_law_1
							has_law = grand_chancellor_law_2
						}
					}
					
					persistent_event_target:my_grand_chancellor = {
						NOT = {
							character = FROMFROM
						}
					}
				}
			}
			
			event_target:eoc = {
				persistent_event_target:my_grand_chancellor = {
					narrative_event = { id = soh.6323 } # EoC's GC has a say
				}
			}
		}
		
		else = {
			if = {
				limit = {
					event_target:eoc = {
						primary_title = {
							OR = {
								has_law = grand_chancellor_law_1
								has_law = grand_chancellor_law_2
							}
						}
						
						persistent_event_target:my_grand_chancellor = {
							character = FROMFROM
						}
					}
				}
				
				FROMFROM = {
					set_character_flag = grace_accept_offer_gc
				}
			}
			
			event_target:eoc = {
				narrative_event = { id = soh.6324 } # EoC gets offer
			}
		}
	}
}

# GC might have a say
narrative_event = {
	id = soh.6323
	title = EVTTITLE_SOH_6323
	
	desc = {
		text = EVTDESCA_SOH_6323
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6323
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6323
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6323 # Indicate that the EoC should accept
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_accept_offer_gc
		}
		
		gc_accept_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_accept_grace_score = yes
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6323 # Indicate that the EoC should refuse
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_refuse_offer_gc
		}
		
		gc_refuse_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_refuse_grace_score = yes
		}
	}
	
	option = {
		name = EVTOPTC_SOH_6323 # Indicate no strong preference
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_neutral_offer_gc
		}
		
		gc_neutral_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_neutral_grace_score = yes
		}
	}
	
	after = {
		event_target:eoc = {
			narrative_event = { id = soh.6324 } # EoC informed of the request and the GC's position
		}
	}
}

# EoC gets the request (and possible recommendation)
narrative_event = {
	id = soh.6324
	title = EVTTITLE_SOH_6324
	
	desc = {
		text = EVTDESCA_SOH_6324
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6324
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6324
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCD_SOH_6324
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCE_SOH_6324
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCF_SOH_6324
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCG_SOH_6324
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCH_SOH_6324
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCI_SOH_6324
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCJ_SOH_6324
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCK_SOH_6324
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCL_SOH_6324
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6324 # Accept the request
		
		log = "[Root.GetBestName] accepted [grace_decision_taker.GetBestName]'s renounce claims Boon request!"
		
		custom_tooltip = {
			text = china_renounce_all_claims
			event_target:grace_decision_taker = {
				any_demesne_title = {
					limit = {
						claimed_by = ROOT 
					}
					remove_claim = ROOT 
				}
			}
		}
		
		eoc_accept_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6325 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_accept_boon_score = yes
			
			mult_modifier = {
				factor = 10
				trait = content
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6324 # Refuse
		
		log = "[Root.GetBestName] refuse [grace_decision_taker.GetBestName]'s renounce claims Boon request!"
		
		eoc_refuse_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6326 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_refuse_boon_score = yes
			
			mult_modifier = {
				factor = 10
				trait = envious
			}
			
			mult_modifier = {
				factor = 10
				trait = ambitious
			}
		}
	}
}

# Request accepted
letter_event = {
	id = soh.6325
	desc = EVTDESC_SOH_6325
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6325 # Great!
		
		set_character_flag = grace_character
	}
}

# Request refused
letter_event = {
	id = soh.6326
	desc = EVTDESC_SOH_6326
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6326 # Really?
		
		opinion = {
			who = FROM
			modifier = opinion_china_grace_refused_renounce_claims_boon
		}
	}
}



##### Request Imperial Praise

### Vassal

# Ping EoC and set up scopes if triggered from decision
character_event = {
	id = soh.6328
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = eoc
		
		FROMFROM = {
			clear_grace_decision_flags_effect = yes
			save_event_target_as = grace_decision_taker
		}
		
		if = {
			limit = {
				china_would_refuse_imperial_praise_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_refuse_offer
			}
		}
		
		else_if = {
			limit = {
				china_would_accept_imperial_praise_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_accept_offer
			}
		}
		
		else = {
			FROMFROM = {
				set_character_flag = grace_neutral_offer
			}
		}
		
		if = {
			limit = {
				event_target:eoc = {
					primary_title = {
						OR = {
							has_law = grand_chancellor_law_1
							has_law = grand_chancellor_law_2
						}
					}
					
					persistent_event_target:my_grand_chancellor = {
						NOT = {
							character = FROMFROM
						}
					}
				}
			}
			
			event_target:eoc = {
				persistent_event_target:my_grand_chancellor = {
					narrative_event = { id = soh.6329 } # EoC's GC has a say
				}
			}
		}
		
		else = {
			if = {
				limit = {
					event_target:eoc = {
						primary_title = {
							OR = {
								has_law = grand_chancellor_law_1
								has_law = grand_chancellor_law_2
							}
						}
						
						persistent_event_target:my_grand_chancellor = {
							character = FROMFROM
						}
					}
				}
				
				FROMFROM = {
					set_character_flag = grace_accept_offer_gc
				}
			}
			
			event_target:eoc = {
				narrative_event = { id = soh.6330 } # EoC gets offer
			}
		}
	}
}

# GC might have a say
narrative_event = {
	id = soh.6329
	title = EVTTITLE_SOH_6329
	
	desc = {
		text = EVTDESCA_SOH_6329
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6329
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6329
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6329 # Indicate that the EoC should accept
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_accept_offer_gc
		}
		
		gc_accept_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_accept_grace_score = yes
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6329 # Indicate that the EoC should refuse
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_refuse_offer_gc
		}
		
		gc_refuse_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_refuse_grace_score = yes
		}
	}
	
	option = {
		name = EVTOPTC_SOH_6329 # Indicate no strong preference
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_neutral_offer_gc
		}
		
		gc_neutral_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_neutral_grace_score = yes
		}
	}
	
	after = {
		event_target:eoc = {
			narrative_event = { id = soh.6330 } # EoC informed of the request and the GC's position
		}
	}
}

# EoC gets the request (and possible recommendation)
narrative_event = {
	id = soh.6330
	title = EVTTITLE_SOH_6330
	
	desc = {
		text = EVTDESCA_SOH_6330
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6330
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6330
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCD_SOH_6330
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCE_SOH_6330
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCF_SOH_6330
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCG_SOH_6330
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCH_SOH_6330
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCI_SOH_6330
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCJ_SOH_6330
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCK_SOH_6330
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCL_SOH_6330
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6330 # Accept the request
		
		log = "[Root.GetBestName] accepted [grace_decision_taker.GetBestName]'s imperial praise Boon request!"
		
		event_target:grace_decision_taker = {
			add_character_modifier = {
				modifier = imperial_praise_modifier
				days = 1825
			}
			
			custom_tooltip = {
				text = voters_and_vassals_approve
				
				ROOT = {
					any_voter = {
						limit = {
							is_landed = no
						}
						opinion = {
							who = event_target:grace_character
							modifier = got_imperial_praise
						}
					}
					
					any_vassal = {
						opinion = {
							who = event_target:grace_character
							modifier = got_imperial_praise
						}
						
						if = {
							limit = {
								ai = no
								NOT = {
									character = event_target:grace_decision_taker
								}
							}
							
							letter_event = { id = soh.6333 } # Inform players
						}
					}
				}
			}
		}
		
		eoc_accept_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6331 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_accept_boon_score = yes
			
			mult_modifier = {
				factor = 10
				trait = humble
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6330 # Refuse
		
		log = "[Root.GetBestName] refused [grace_decision_taker.GetBestName]'s imperial praise Boon request!"
		
		eoc_refuse_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6332 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_refuse_boon_score = yes
			
			mult_modifier = {
				factor = 10
				event_target:grace_decision_taker = {
					NOT = {
						dynasty = ROOT
					}
				}
				
				trait = paranoid
			}
		}
	}
}

# Request accepted
letter_event = {
	id = soh.6331
	desc = EVTDESC_SOH_6331
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6331 # Great!
		
		set_character_flag = grace_character
	}
}

# Request refused
letter_event = {
	id = soh.6332
	desc = EVTDESC_SOH_6332
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6332 # Really?
		
		opinion = {
			who = FROM
			modifier = opinion_china_grace_refused_imperial_praise_boon
		}
	}
}

# Other vassals informed
letter_event = {
	id = soh.6333
	desc = EVTDESC_SOH_6333
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6333 # Interesting...
	}
}



##### Ask to end mourning

### Vassal

# Ping EoC and set up scopes if triggered from decision
character_event = {
	id = soh.6335
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = eoc
		
		FROMFROM = {
			clear_grace_decision_flags_effect = yes
			save_event_target_as = grace_decision_taker
		}
		
		if = {
			limit = {
				china_would_refuse_end_mourning_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_refuse_offer
			}
		}
		
		else_if = {
			limit = {
				china_would_accept_end_mourning_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_accept_offer
			}
		}
		
		else = {
			FROMFROM = {
				set_character_flag = grace_neutral_offer
			}
		}
		
		if = {
			limit = {
				event_target:eoc = {
					primary_title = {
						OR = {
							has_law = grand_chancellor_law_1
							has_law = grand_chancellor_law_2
						}
					}
					
					persistent_event_target:my_grand_chancellor = {
						always = yes
					}
				}
			}
			
			event_target:eoc = {
				persistent_event_target:my_grand_chancellor = {
					narrative_event = { id = soh.6336 } # EoC's GC has a say
				}
			}
		}
		
		else = {
			event_target:eoc = {
				narrative_event = { id = soh.6337 } # EoC gets offer
			}
		}
	}
}

# GC might have a say
narrative_event = {
	id = soh.6336
	title = EVTTITLE_SOH_6336
	
	desc = {
		text = EVTDESCA_SOH_6336
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6336
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6336
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6336 # Indicate that the EoC should accept
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_accept_offer_gc
		}
		
		gc_accept_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_accept_grace_score = yes
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6336 # Indicate that the EoC should refuse
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_refuse_offer_gc
		}
		
		gc_refuse_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 10
				event_target:grace_decision_taker = {
					has_character_flag = grace_refuse_offer
				}
			}
			
			mult_modifier = {
				factor = 10
				event_target:grace_decision_taker = {
					root_hates_this_trigger = yes
				}
			}
			
			mult_modifier = {
				factor = 0.1
				dynasty = event_target:grace_decision_taker
			}
			
			mult_modifier = {
				factor = 0.1
				is_friend = event_target:grace_decision_taker
			}
			
			mult_modifier = {
				factor = 0.1
				is_lover = event_target:grace_decision_taker
			}
			
			mult_modifier = {
				factor = 100
				is_rival = event_target:grace_decision_taker
			}
			
			mult_modifier = {
				factor = 5
				event_target:grace_decision_taker = {
					has_character_flag = grace_refuse_offer
				}
				trait = just
			}
			
			mult_modifier = {
				factor = 2
				event_target:grace_decision_taker = {
					has_character_flag = grace_refuse_offer
				}
				trait = honest
			}
			
			mult_modifier = {
				factor = 0.5
				event_target:grace_decision_taker = {
					has_character_flag = grace_refuse_offer
				}
				trait = deceitful
			}
			
			mult_modifier = {
				factor = 0.2
				event_target:grace_decision_taker = {
					has_character_flag = grace_refuse_offer
				}
				trait = arbitrary
			}
			
			mult_modifier = {
				factor = 5
				religion = confucian
			}
			
			mult_modifier = {
				factor = 5
				OR = {
					has_religion_feature = religion_feature_family_focus
					has_religion_feature = religion_feature_batak
					has_religion_feature = religion_feature_miao
					has_religion_feature = religion_feature_sundanese
					has_religion_feature = religion_feature_viet
					has_religion_feature = religion_feature_yi
					has_religion_feature = religion_feature_zhuang
				}
			}
			
			mult_modifier = {
				factor = 5
				OR = {
					has_religion_feature = religion_beatification
					has_religion_feature = religion_feature_andamanese
					has_religion_feature = religion_feature_bai
					has_religion_feature = religion_feature_dayak
					has_religion_feature = religion_feature_dusun
					has_religion_feature = religion_feature_jurchen
					has_religion_feature = religion_feature_sanamahi
					has_religion_feature = religion_feature_zhuang
				}
			}
		}
	}
	
	option = {
		name = EVTOPTC_SOH_6336 # Indicate no strong preference
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_neutral_offer_gc
		}
		
		gc_neutral_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_neutral_grace_score = yes
		}
	}
	
	after = {
		event_target:eoc = {
			narrative_event = { id = soh.6337 } # EoC informed of the request and the GC's position
		}
	}
}

# EoC gets the request (and possible recommendation)
narrative_event = {
	id = soh.6337
	title = EVTTITLE_SOH_6337
	
	desc = {
		text = EVTDESCA_SOH_6337
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6337
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6337
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCD_SOH_6337
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCE_SOH_6337
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCF_SOH_6337
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCG_SOH_6337
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCH_SOH_6337
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCI_SOH_6337
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCJ_SOH_6337
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCK_SOH_6337
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCL_SOH_6337
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6337 # Accept the request
		
		log = "[Root.GetBestName] accepted [grace_decision_taker.GetBestName]'s end mourning Boon request!"
		
		any_vassal = {
			limit = {
				ai = no
				NOT = {
					character = event_target:grace_decision_taker
				}
			}
			character_event = { id = soh.6340 } # Inform players
		}
		
		eoc_accept_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6338 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_accept_boon_score = yes
			
			trigger = {
				NAND = {
					OR = {
						religion = confucian
						has_religion_feature = religion_feature_family_focus
						has_religion_feature = religion_feature_batak
						has_religion_feature = religion_feature_miao
						has_religion_feature = religion_feature_sundanese
						has_religion_feature = religion_feature_viet
						has_religion_feature = religion_feature_yi
						has_religion_feature = religion_feature_zhuang
						has_religion_feature = religion_beatification
						has_religion_feature = religion_feature_andamanese
						has_religion_feature = religion_feature_bai
						has_religion_feature = religion_feature_dayak
						has_religion_feature = religion_feature_dusun
						has_religion_feature = religion_feature_jurchen
						has_religion_feature = religion_feature_sanamahi
					}
					trait = zealous
				}
			}
			
			mult_modifier = {
				factor = 0.1
				dynasty = event_target:grace_decision_taker
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6337 # Refuse
		
		log = "[Root.GetBestName] refused [grace_decision_taker.GetBestName]'s end mourning Boon request!"
		
		eoc_refuse_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6339 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_refuse_boon_score = yes
			
			mult_modifier = {
				factor = 0.1
				trait = cynical
			}
			
			mult_modifier = {
				factor = 0.1
				NOT = {
					dynasty = event_target:grace_decision_taker
				}
				OR = {
					is_friend = event_target:grace_decision_taker
					is_lover = event_target:grace_decision_taker
				}
			}
		}
	}
}

# Request accepted
letter_event = {
	id = soh.6338
	desc = EVTDESC_SOH_6338
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6338 # Great!
		
		#end_mourning_effect = yes # TIANXIATODO
		
		set_character_flag = grace_character
	}
}

# Request refused
letter_event = {
	id = soh.6339
	desc = EVTDESC_SOH_6339
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6339 # Really?
		
		opinion = {
			who = FROM
			modifier = opinion_china_grace_refused_end_mourning_boon
		}
	}
}

# Other vassals informed
character_event = {
	id = soh.6340
	desc = EVTDESC_SOH_6340
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6340 # Interesting...
	}
}



##### Ask to Decreate Tributary Tier

### Independent

# Ping EoC and set up scopes if triggered from decision
character_event = {
	id = soh.6342
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = eoc
		
		FROMFROM = {
			clear_grace_decision_flags_effect = yes
			save_event_target_as = grace_decision_taker
		}
		
		if = {
			limit = {
				china_would_refuse_decrease_tributary_tier_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_refuse_offer
			}
		}
		
		else_if = {
			limit = {
				china_would_accept_decrease_tributary_tier_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_accept_offer
			}
		}
		
		else = {
			FROMFROM = {
				set_character_flag = grace_neutral_offer
			}
		}
		
		if = {
			limit = {
				event_target:eoc = {
					primary_title = {
						OR = {
							has_law = grand_chancellor_law_1
							has_law = grand_chancellor_law_2
						}
					}
					
					persistent_event_target:my_grand_chancellor = {
						always = yes
					}
				}
			}
			
			event_target:eoc = {
				persistent_event_target:my_grand_chancellor = {
					narrative_event = { id = soh.6343 } # EoC's GC has a say
				}
			}
		}
		
		else = {
			event_target:eoc = {
				narrative_event = { id = soh.6344 } # EoC gets offer
			}
		}
	}
}

# GC might have a say
narrative_event = {
	id = soh.6343
	title = EVTTITLE_SOH_6343
	
	desc = {
		text = EVTDESCA_SOH_6343
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6343
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6343
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6343 # Indicate that the EoC should accept
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_accept_offer_gc
		}
		
		gc_accept_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_accept_grace_score = yes
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6343 # Indicate that the EoC should refuse
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_refuse_offer_gc
		}
		
		gc_refuse_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_refuse_grace_score = yes
		}
	}
	
	option = {
		name = EVTOPTC_SOH_6343 # Indicate no strong preference
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_neutral_offer_gc
		}
		
		gc_neutral_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_neutral_grace_score = yes
		}
	}
	
	after = {
		event_target:eoc = {
			narrative_event = { id = soh.6344 } # EoC informed of the request and the GC's position
		}
	}
}

# EoC gets the request (and possible recommendation)
narrative_event = {
	id = soh.6344
	title = EVTTITLE_SOH_6344
	
	desc = {
		text = EVTDESCA_SOH_6344
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6344
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6344
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCD_SOH_6344
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCE_SOH_6344
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCF_SOH_6344
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCG_SOH_6344
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCH_SOH_6344
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCI_SOH_6344
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCJ_SOH_6344
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCK_SOH_6344
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCL_SOH_6344
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6344 # Accept the request
		
		log = "[Root.GetBestName] accepted [grace_decision_taker.GetBestName]'s decrease tributary tier request!"
		
		event_target:grace_decision_taker = {
			decrease_tributary_tier_or_release_effect = yes
		}
		
		eoc_accept_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6345 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_accept_boon_score = yes
			
			mult_modifier = {
				factor = 10
				trait = content
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6344 # Refuse
		
		log = "[Root.GetBestName] refused [grace_decision_taker.GetBestName]'s decrease tributary tier request!"
		
		eoc_refuse_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6346 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_refuse_boon_score = yes
			
			mult_modifier = {
				factor = 10
				trait = ambitious
			}
		}
	}
}

# Request accepted
letter_event = {
	id = soh.6345
	desc = EVTDESC_SOH_6345
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6345 # Great!
		
		set_character_flag = grace_character
	}
}

# Request refused
letter_event = {
	id = soh.6346
	desc = EVTDESC_SOH_6346
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6346 # Really?
		
		opinion = {
			who = FROM
			modifier = opinion_china_grace_refused_decrease_tributary_tier
		}
	}
}



##### Request Border Adjustment

### Independent

# Ping EoC and set up scopes if triggered from decision
character_event = {
	id = soh.6348
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = eoc
		
		FROMFROM = {
			clear_grace_decision_flags_effect = yes
			save_event_target_as = grace_decision_taker
		}
		
		if = {
			limit = {
				china_would_refuse_border_adjustment_boon_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_refuse_offer
			}
		}
		
		else_if = {
			limit = {
				china_would_accept_border_adjustment_boon_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_accept_offer
			}
		}
		
		else = {
			FROMFROM = {
				set_character_flag = grace_neutral_offer
			}
		}
		
		if = {
			limit = {
				event_target:eoc = {
					primary_title = {
						OR = {
							has_law = grand_chancellor_law_1
							has_law = grand_chancellor_law_2
						}
					}
					
					persistent_event_target:my_grand_chancellor = {
						always = yes
					}
				}
			}
			
			event_target:eoc = {
				persistent_event_target:my_grand_chancellor = {
					narrative_event = { id = soh.6349 } # EoC's GC has a say
				}
			}
		}
		
		else = {
			event_target:eoc = {
				narrative_event = { id = soh.6350 } # EoC gets offer
			}
		}
	}
}

# GC might have a say
narrative_event = {
	id = soh.6349
	title = EVTTITLE_SOH_6349
	
	desc = {
		text = EVTDESCA_SOH_6349
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6349
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6349
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6349 # Indicate that the EoC should accept
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_accept_offer_gc
		}
		
		gc_accept_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_accept_grace_score = yes
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6349 # Indicate that the EoC should refuse
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_refuse_offer_gc
		}
		
		gc_refuse_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_refuse_grace_score = yes
		}
	}
	
	option = {
		name = EVTOPTC_SOH_6349 # Indicate no strong preference
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_neutral_offer_gc
		}
		
		gc_neutral_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_neutral_grace_score = yes
		}
	}
	
	after = {
		event_target:eoc = {
			narrative_event = { id = soh.6350 } # EoC informed of the request and the GC's position
		}
	}
}

# EoC gets the request (and possible recommendation)
narrative_event = {
	id = soh.6350
	title = EVTTITLE_SOH_6350
	
	desc = {
		text = EVTDESCA_SOH_6350
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6350
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6350
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCD_SOH_6350
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCE_SOH_6350
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCF_SOH_6350
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCG_SOH_6350
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCH_SOH_6350
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCI_SOH_6350
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCJ_SOH_6350
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCK_SOH_6350
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCL_SOH_6350
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6350 # Accept the request
		
		log = "[Root.GetBestName] accepted [grace_decision_taker.GetBestName]'s border adjustment Boon!"
		
		event_target:border_adjustment_duchy = {
			any_direct_de_jure_vassal_title = {
				limit = {
					holder_scope = {
						top_liege = {
							character = ROOT 
						}
					}
				}
				
				if = {
					limit = {
						holder_scope = {
							NOR = {
								any_demesne_title = {
									NOR = {
										de_jure_liege_or_above = event_target:border_adjustment_duchy
										title = event_target:border_adjustment_duchy
									}
								}
								
								any_vassal = {
									any_demesne_title = {
										NOR = {
											de_jure_liege_or_above = event_target:border_adjustment_duchy
											title = event_target:border_adjustment_duchy
										}
									}
								}
							}
						}
					}
					
					holder_scope = {
						opinion = {
							who = ROOT 
							modifier = border_adjustment_happened
						}
						
						set_defacto_liege = event_target:grace_decision_taker
					}
				}
				
				else = {
					event_target:grace_decision_taker = {
						grant_title_no_opinion = PREV
					}
				}
			}
			
			if = {
				limit = {
					has_holder = yes
					holder_scope = {
						top_liege = {
							character = ROOT 
						}
					}
				}
				
				holder_scope = {
					opinion = {
						who = ROOT 
						modifier = border_adjustment_happened
					}
				}
				
				event_target:grace_decision_taker = {
					grant_title_no_opinion = PREV
				}
			}
		}
		
		any_opinion_modifier_target = {
			limit = {
				ai = no
				reverse_has_opinion_modifier = {
					who = ROOT 
					modifier = border_adjustment_happened
				}
			}
			
			letter_event = { id = soh.6353 } # Inform affected vassals
		}
		
		eoc_accept_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6351 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_accept_boon_score = yes
			
			mult_modifier = {
				factor = 10
				trait = charitable
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6350 # Refuse
		
		log = "[Root.GetBestName] refused [grace_decision_taker.GetBestName]'s border adjustment Boon!"
		
		eoc_refuse_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6352 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_refuse_boon_score = yes
			
			mult_modifier = {
				factor = 10
				trait = greedy
			}
		}
	}
}

# Request accepted
letter_event = {
	id = soh.6351
	desc = EVTDESC_SOH_6351
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6351 # Great!
		
		set_character_flag = grace_character
	}
}

# Request refused
letter_event = {
	id = soh.6352
	desc = EVTDESC_SOH_6352
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6352 # Really?
	}
}

# Affected vassals informed
letter_event = {
	id = soh.6353
	desc = EVTDESC_SOH_6353
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6353 # Really?
		
		opinion = {
			who = FROM
			modifier = opinion_china_grace_refused_border_adjustment_boon
		}
	}
}



##### Request Imperial Marriage (non-targeted)

### Independent

# Ping EoC and set up scopes if triggered from decision
character_event = {
	id = soh.6355
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = eoc
		
		FROMFROM = {
			clear_grace_decision_flags_effect = yes
			save_event_target_as = grace_decision_taker
		}
		
		if = {
			limit = {
				china_would_refuse_imperial_marriage_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_refuse_offer
			}
		}
		
		else_if = {
			limit = {
				china_would_accept_imperial_marriage_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_accept_offer
			}
		}
		
		else = {
			FROMFROM = {
				set_character_flag = grace_neutral_offer
			}
		}
		
		if = {
			limit = {
				event_target:eoc = {
					primary_title = {
						OR = {
							has_law = grand_chancellor_law_1
							has_law = grand_chancellor_law_2
						}
					}
					
					persistent_event_target:my_grand_chancellor = {
						always = yes
					}
				}
			}
			
			event_target:eoc = {
				persistent_event_target:my_grand_chancellor = {
					narrative_event = { id = soh.6356 } # EoC's GC has a say
				}
			}
		}
		
		else = {
			event_target:eoc = {
				narrative_event = { id = soh.6357 } # EoC gets offer
			}
		}
	}
}

# GC might have a say
narrative_event = {
	id = soh.6356
	title = EVTTITLE_SOH_6356
	
	desc = {
		text = EVTDESCA_SOH_6356
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6356
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6356
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTB_SOH_6356 # Indicate that the EoC should accept
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_accept_offer_gc
		}
		
		gc_accept_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 10
				event_target:grace_decision_taker = {
					has_character_flag = grace_accept_offer
				}
			}
			
			mult_modifier = {
				factor = 0.1
				event_target:grace_decision_taker = {
					root_hates_this_trigger = yes
				}
			}
			
			mult_modifier = {
				factor = 10
				is_friend = event_target:grace_decision_taker
			}
			
			mult_modifier = {
				factor = 10
				is_lover = event_target:grace_decision_taker
			}
			
			mult_modifier = {
				factor = 0.01
				is_rival = event_target:grace_decision_taker
			}
			
			mult_modifier = {
				factor = 0.1
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
					root_hates_this_trigger = yes
				}
			}
			
			mult_modifier = {
				factor = 10
				is_friend = event_target:husband_to_be
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				is_lover = event_target:husband_to_be
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				is_rival = event_target:husband_to_be
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 5
				event_target:grace_decision_taker = {
					has_character_flag = grace_accept_offer
				}
				trait = just
			}
			
			mult_modifier = {
				factor = 2
				event_target:grace_decision_taker = {
					has_character_flag = grace_accept_offer
				}
				trait = honest
			}
			
			mult_modifier = {
				factor = 0.5
				event_target:grace_decision_taker = {
					has_character_flag = grace_accept_offer
				}
				trait = deceitful
			}
			
			mult_modifier = {
				factor = 0.2
				event_target:grace_decision_taker = {
					has_character_flag = grace_accept_offer
				}
				trait = arbitrary
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6356 # Indicate that the EoC should refuse
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_refuse_offer_gc
		}
		
		gc_refuse_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 10
				event_target:grace_decision_taker = {
					has_character_flag = grace_refuse_offer
				}
			}
			
			mult_modifier = {
				factor = 10
				event_target:grace_decision_taker = {
					root_hates_this_trigger = yes
				}
			}
			
			mult_modifier = {
				factor = 0.1
				is_friend = event_target:grace_decision_taker
			}
			
			mult_modifier = {
				factor = 0.1
				is_lover = event_target:grace_decision_taker
			}
			
			mult_modifier = {
				factor = 100
				is_rival = event_target:grace_decision_taker
			}
			
			mult_modifier = {
				factor = 10
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
					root_hates_this_trigger = yes
				}
			}
			
			mult_modifier = {
				factor = 0.1
				is_friend = event_target:husband_to_be
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				is_lover = event_target:husband_to_be
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 100
				is_rival = event_target:husband_to_be
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 5
				event_target:grace_decision_taker = {
					has_character_flag = grace_refuse_offer
				}
				trait = just
			}
			
			mult_modifier = {
				factor = 2
				event_target:grace_decision_taker = {
					has_character_flag = grace_refuse_offer
				}
				trait = honest
			}
			
			mult_modifier = {
				factor = 0.5
				event_target:grace_decision_taker = {
					has_character_flag = grace_refuse_offer
				}
				trait = deceitful
			}
			
			mult_modifier = {
				factor = 0.2
				event_target:grace_decision_taker = {
					has_character_flag = grace_refuse_offer
				}
				trait = arbitrary
			}
		}
	}
	
	option = {
		name = EVTOPTC_SOH_6356 # Indicate no strong preference
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_neutral_offer_gc
		}
		
		gc_neutral_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 10
				event_target:grace_decision_taker = {
					has_character_flag = grace_neutral_offer
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = proud
			}
			
			mult_modifier = {
				factor = 0.1
				trait = stubborn
			}
			
			mult_modifier = {
				factor = 10
				trait = shy
			}
			
			mult_modifier = {
				factor = 2
				trait = arbitrary
			}
			
			mult_modifier = {
				factor = 0.1
				OR = {
					is_rival = event_target:grace_decision_taker
					is_friend = event_target:grace_decision_taker
					is_lover = event_target:grace_decision_taker
				}
			}
			
			mult_modifier = {
				factor = 0.1
				dynasty = event_target:grace_decision_taker
			}
			
			mult_modifier = {
				factor = 0.1
				OR = {
					is_rival = event_target:husband_to_be
					is_friend = event_target:husband_to_be
					is_lover = event_target:husband_to_be
				}
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				dynasty = event_target:husband_to_be
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = humble
			}
			
			mult_modifier = {
				factor = 5
				trait = slothful
			}
			
			mult_modifier = {
				factor = 0.2
				trait = diligent
			}
			
			mult_modifier = {
				factor = 5
				trait = content
			}
			
			mult_modifier = {
				factor = 0.2
				trait = ambitious
			}
		}
	}
	
	after = {
		event_target:eoc = {
			narrative_event = { id = soh.6357 } # EoC informed of the request and the GC's position
		}
	}
}

# EoC gets the request (and possible recommendation)
narrative_event = {
	id = soh.6357
	title = EVTTITLE_SOH_6357
	
	desc = {
		text = EVTDESCA_SOH_6357
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6357
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6357
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCD_SOH_6357
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCE_SOH_6357
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCF_SOH_6357
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCG_SOH_6357
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCH_SOH_6357
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCI_SOH_6357
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCJ_SOH_6357
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCK_SOH_6357
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCL_SOH_6357
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	immediate = {
		random_dynasty_member = {
			limit = {
				is_valid_dragon_bride_candidate = yes
			}
			
			preferred_limit = {
				NOT = {
					is_lover = ROOT
				}
			}
			
			save_event_target_as = dragon_bride_to_be
		}
	}
	
	option = {
		name = EVTOPTA_SOH_6357 # Accept the request
		
		log = "[Root.GetBestName] accepted [grace_decision_taker.GetBestName]'s Imperial Marriage Boon for [husband_to_be.GetBestName] (normal)!"
		
		event_target:dragon_bride_to_be = {
			show_portrait = yes
			event_target:husband_to_be = {
				show_portrait = yes
			}
			
			remove_trait = dragon_bride_unmarried
			
			add_trait = dragon_bride_married
			
			hidden_tooltip = {
				any_lover = {
					limit = {
						NOT = {
							character = event_target:husband_to_be
						}
					}
					
					random_list = {
						50 = {
							remove_lover = event_target:tribute_character
							mult_modifier = {
								factor = 0.1
								event_target:tribute_character = {
									trait = homosexual
								}
							}
						}
						50 = {}
					}
				}
			}
			
			move_character = event_target:husband_to_be
			force_host = event_target:husband_to_be
			
			event_target:husband_to_be = {
				add_spouse = PREV
			}
		}
		
		eoc_accept_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6358 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_accept_boon_score = yes
			
			mult_modifier = {
				factor = 0.1
				event_target:husband_to_be = {
					china_eoc_hates_this_trigger = yes
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				is_friend = event_target:husband_to_be
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				is_lover = event_target:husband_to_be
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 0.01
				is_rival = event_target:husband_to_be
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = humble
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6357 # Refuse
		
		log = "[Root.GetBestName] refused [grace_decision_taker.GetBestName]'s Imperial Marriage Boon for [husband_to_be.GetBestName]!"
		
		eoc_refuse_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6359 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_refuse_boon_score = yes
			
			mult_modifier = {
				factor = 10
				trait = proud
				event_target:husband_to_be = {
					lower_real_tier_than = king
				}
			}
		}
	}
	
	option = {
		trigger = {
			event_target:grace_decision_taker = {
				OR = {
					is_nomadic = yes
					is_tribal = yes
					independent = no
					lower_real_tier_than = king
					any_rival = {
						character = ROOT
					}
				}
			}
		}
		name = EVTOPTC_SOH_6357 # Let's pick some lesser bride...
		
		log = "[Root.GetBestName] accepted [grace_decision_taker.GetBestName]'s Imperial Marriage Boon for [husband_to_be.GetBestName] (special)!"
		
		character_event = { id = soh.6360 } # Pick some lesser bride
		
		ai_chance = {
			factor = 100
			
			eoc_refuse_boon_score = yes
			
			mult_modifier = {
				factor = 10
				event_target:grace_decision_taker = {
					china_eoc_hates_this_trigger = yes
				}
			}
			
			mult_modifier = {
				factor = 0.1
				is_friend = event_target:grace_decision_taker
			}
			
			mult_modifier = {
				factor = 0.1
				is_lover = event_target:grace_decision_taker
			}
			
			mult_modifier = {
				factor = 100
				is_rival = event_target:grace_decision_taker
			}
			
			mult_modifier = {
				factor = 10
				event_target:husband_to_be = {
					china_eoc_hates_this_trigger = yes
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				is_friend = event_target:husband_to_be
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				is_lover = event_target:husband_to_be
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 100
				is_rival = event_target:husband_to_be
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = proud
			}
		}
	}
}

# Request accepted
letter_event = {
	id = soh.6358
	desc = EVTDESC_SOH_6358
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6358 # Great!
		
		set_character_flag = grace_character
	}
}

# Request refused
letter_event = {
	id = soh.6359
	desc = EVTDESC_SOH_6359
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6359 # Really?
		
		opinion = {
			who = FROM
			modifier = opinion_china_grace_refused_imperial_marriage_boon
		}
	}
}

# Pick a lesser bride
character_event = {
	id = soh.6360
	desc = EVTDESC_SOH_6360
	picture = GFX_evt_marriage_taoist
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6360 # A famous courtesan!
		
		piety = -50
		
		create_chinese_courtesan_effect = yes
		
		hidden_tooltip = {
			event_target:not_a_dragon_bride = {
				move_character = event_target:husband_to_be
				force_host = event_target:husband_to_be
				
				event_target:husband_to_be = {
					add_spouse = PREV
				}
				
				if = {
					limit = {
						event_target:bastard_1 = {
							always = yes
						}
					}
					event_target:bastard_1 = {
						move_character = event_target:husband_to_be
						force_host = event_target:husband_to_be
					}
				}
				
				if = {
					limit = {
						event_target:bastard_2 = {
							always = yes
						}
					}
					event_target:bastard_2 = {
						move_character = event_target:husband_to_be
						force_host = event_target:husband_to_be
					}
				}
			}
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = poet
			}
			
			mult_modifier = {
				factor = 0.01
				trait = chaste
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6360 # A great beauty!
		
		create_chinese_beauty_effect = yes
		
		prestige = -100
		
		hidden_tooltip = {
			event_target:not_a_dragon_bride = {
				move_character = event_target:husband_to_be
				force_host = event_target:husband_to_be
				event_target:husband_to_be = {
					add_spouse = PREV
				}
				
				if = {
					limit = {
						event_target:bastard_1 = {
							always = yes
						}
					}
					event_target:bastard_1 = {
						move_character = event_target:husband_to_be
						force_host = event_target:husband_to_be
					}
				}
				
				if = {
					limit = {
						event_target:bastard_2 = {
							always = yes
						}
					}
					event_target:bastard_2 = {
						move_character = event_target:husband_to_be
						force_host = event_target:husband_to_be
					}
				}
			}
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = poet
			}
			
			mult_modifier = {
				factor = 0.01
				trait = envious
			}
		}
	}
	
	option = {
		name = EVTOPTC_SOH_6360 # A famous entertainer!
		
		create_chinese_entertainer_effect = yes
		
		wealth = -50
		
		hidden_tooltip = {
			event_target:not_a_dragon_bride = {
				move_character = event_target:husband_to_be
				force_host = event_target:husband_to_be
				event_target:husband_to_be = {
					add_spouse = PREV
				}
				
				if = {
					limit = {
						event_target:bastard_1 = {
							always = yes
						}
					}
					event_target:bastard_1 = {
						move_character = event_target:husband_to_be
						force_host = event_target:husband_to_be
					}
				}
				
				if = {
					limit = {
						event_target:bastard_2 = {
							always = yes
						}
					}
					event_target:bastard_2 = {
						move_character = event_target:husband_to_be
						force_host = event_target:husband_to_be
					}
				}
			}
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				is_dumb_trigger = yes
			}
		}
	}
	
	option = {
		trigger = {
			OR = {
				diplomacy >= 15
				intrigue >= 15
			}
		}
		
		name = EVTOPTD_SOH_6360 # A palace maid!
		
		hidden_tooltip = {
			create_character = {
				age = 17
				culture = ROOT
				religion = ROOT
				dynasty = none
				female = yes
				random_traits = yes
			}
			
			new_character = {
				save_event_target_as = not_a_dragon_bride
				set_character_flag = palace_maid
			}
			
			event_target:not_a_dragon_bride = {
				move_character = event_target:husband_to_be
				force_host = event_target:husband_to_be
				event_target:husband_to_be = {
					add_spouse = PREV
				}
			}
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				NOT = {
					trait = proud
				}
			}
		}
	}
	
	after = {
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6361 } # Inform the recipient
		}
	}
}

# Inform the recipient of a non-imperial bride
letter_event = {
	id = soh.6361
	
	desc = {
		text = EVTDESCA_SOH_6361
		trigger = {
			event_target:not_a_dragon_bride = {
				has_character_flag = chinese_courtesan
				NOT = {
					any_child = {
						always = yes
					}
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6361
		trigger = {
			event_target:not_a_dragon_bride = {
				has_character_flag = chinese_courtesan
				any_child = {
					always = yes
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6361
		trigger = {
			event_target:not_a_dragon_bride = {
				has_character_flag = chinese_beauty
			}
		}
	}
	
	desc = {
		text = EVTDESCD_SOH_6361
		trigger = {
			event_target:not_a_dragon_bride = {
				has_character_flag = chinese_entertainer
			}
		}
	}
	
	desc = {
		text = EVTDESCE_SOH_6361
		trigger = {
			event_target:not_a_dragon_bride = {
				has_character_flag = palace_maid
			}
		}
	}
	
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			event_target:not_a_dragon_bride = {
				has_character_flag = chinese_courtesan
			}
		}
		
		name = EVTOPTA_SOH_6361 # Works for me!
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = chaste
				event_target:husband_to_be = {
					character = ROOT
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = proud
			}
			
			mult_modifier = {
				factor = 0.1
				trait = ambitious
			}
		}
	}
	
	option = {
		trigger = {
			event_target:not_a_dragon_bride = {
				has_character_flag = chinese_beauty
			}
		}
		
		name = EVTOPTB_SOH_6361 # Works for me!
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = ambitious
			}
			
			mult_modifier = {
				factor = 10
				trait = lustful
				NOT = {
					trait = homosexual
				}
				event_target:husband_to_be = {
					character = ROOT
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = content
			}
		}
	}
	
	option = {
		trigger = {
			event_target:not_a_dragon_bride = {
				has_character_flag = chinese_entertainer
			}
		}
		
		name = EVTOPTC_SOH_6361 # Works for me!
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 10
				trait = kind
			}
			
			mult_modifier = {
				factor = 2
				trait = poet
			}
			
			mult_modifier = {
				factor = 2
				trait = scholar
			}
			
			mult_modifier = {
				factor = 2
				trait = gregarious
			}
			
			mult_modifier = {
				factor = 10
				trait = content
			}
		}
	}
	
	option = {
		trigger = {
			event_target:husband_to_be = {
				has_concubinage = yes
				OR = {
					NOR = {
						government = chinese_imperial_government
						government = eastern_imperial_government
						government = japanese_imperial_government
						government = divine_imperial_government
						num_of_consorts >= 3
					}
					
					AND = {
						government = eastern_imperial_government
						num_of_consorts < 9
					}
					
					government = japanese_imperial_government
					government = divine_imperial_government
				}
			}
		}
		
		name = EVTOPTD_SOH_6361 # She is only fit to be a concubine!
		
		event_target:husband_to_be = {
			remove_spouse = event_target:not_a_dragon_bride
			add_consort = event_target:not_a_dragon_bride
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = kind
			}
			
			mult_modifier = {
				factor = 0.1
				trait = humble
			}
			
			mult_modifier = {
				factor = 0.1
				trait = cruel
			}
			
			mult_modifier = {
				factor = 0.1
				event_target:not_a_dragon_bride = {
					trait = attractive
				}
				event_target:husband_to_be = {
					character = ROOT
				}
				NOT = {
					trait = homosexual
				}
			}
		}
	}
	
	option = {
		name = EVTOPTE_SOH_6361 # Get out of my sight!
		
		event_target:husband_to_be = {
			remove_spouse = event_target:not_a_dragon_bride
		}
		
		event_target:not_a_dragon_bride = {
			leave_court_effect = yes
		}
		
		opinion = {
			who = FROM
			modifier = opinion_china_grace_not_a_dragon_bride
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = kind
			}
			
			mult_modifier = {
				factor = 0.1
				trait = content
			}
		}
	}
	
	option = {
		trigger = {
			OR = {
				trait = cruel
				AND = {
					NOT = {
						trait = kind
					}
					trait = zealous
					event_target:not_a_dragon_bride = {
						NOT = {
							religion = ROOT
						}
					}
				}
			}
			
			NOT = {
				event_target:not_a_dragon_bride = {
					any_child = {
						always = yes
					}
				}
			}
		}
		
		name = EVTOPTF_SOH_6361 # Guards! Kill her!
		
		opinion = {
			who = FROM
			modifier = opinion_china_grace_not_a_dragon_bride
		}
		
		if = {
			limit = {
				NOT = {
					trait = cruel
				}
			}
			add_trait = cruel
		}
		
		event_target:husband_to_be = {
			remove_spouse = event_target:not_a_dragon_bride
		}
		
		event_target:not_a_dragon_bride = {
			death = {
				death_reason = death_execution_beheading
				killer = ROOT
			}
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.01
				NOT = {
					trait = cruel
				}
			}
		}
	}
	
	option = {
		trigger = {
			OR = {
				trait = cruel
				AND = {
					NOT = {
						trait = kind
					}
					trait = zealous
					event_target:not_a_dragon_bride = {
						NOT = {
							religion = ROOT
						}
					}
				}
			}
			
			event_target:not_a_dragon_bride = {
				any_child = {
					always = yes
				}
			}
		}
		
		name = EVTOPTG_SOH_6361 # Guards! Kill her... and the children too!
		
		opinion = {
			who = FROM
			modifier = opinion_china_grace_not_a_dragon_bride
		}
		
		if = {
			limit = {
				NOT = {
					trait = cruel
				}
			}
			add_trait = cruel
		}
		
		event_target:husband_to_be = {
			remove_spouse = event_target:not_a_dragon_bride
		}
		
		event_target:not_a_dragon_bride = {
			death = {
				death_reason = death_execution_beheading
				killer = ROOT
			}
		}
		
		event_target:bastard_1 = {
			death = {
				death_reason = death_execution_beheading
				killer = ROOT
			}
		}
		
		event_target:bastard_2 = {
			death = {
				death_reason = death_execution_beheading
				killer = ROOT
			}
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.01
				NOT = {
					trait = cruel
				}
			}
		}
	}
	
	option = {
		trigger = {
			event_target:not_a_dragon_bride = {
				has_character_flag = palace_maid
			}
		}
		
		name = EVTOPTH_SOH_6361 # Works for me!
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 10
				trait = humble
			}
			
			mult_modifier = {
				factor = 0.1
				trait = proud
			}
			
			mult_modifier = {
				factor = 0.1
				trait = ambitious
			}
		}
	}
}

### Vassal

# Ping EoC and set up scopes if triggered from decision
character_event = {
	id = soh.6363
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = eoc
		
		FROMFROM = {
			clear_grace_decision_flags_effect = yes
			save_event_target_as = grace_decision_taker
		}
		
		if = {
			limit = {
				china_would_refuse_imperial_marriage_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_refuse_offer
			}
		}
		
		else_if = {
			limit = {
				china_would_accept_imperial_marriage_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_accept_offer
			}
		}
		
		else = {
			FROMFROM = {
				set_character_flag = grace_neutral_offer
			}
		}
		
		if = {
			limit = {
				event_target:eoc = {
					primary_title = {
						OR = {
							has_law = grand_chancellor_law_1
							has_law = grand_chancellor_law_2
						}
					}
					
					persistent_event_target:my_grand_chancellor = {
						NOT = {
							character = FROMFROM
						}
					}
				}
			}
			
			event_target:eoc = {
				persistent_event_target:my_grand_chancellor = {
					narrative_event = { id = soh.6364 } # EoC's GC has a say
				}
			}
		}
		
		else = {
			if = {
				limit = {
					event_target:eoc = {
						primary_title = {
							OR = {
								has_law = grand_chancellor_law_1
								has_law = grand_chancellor_law_2
							}
						}
						
						persistent_event_target:my_grand_chancellor = {
							character = FROMFROM
						}
					}
				}
				
				FROMFROM = {
					set_character_flag = grace_accept_offer_gc
				}
			}
			
			event_target:eoc = {
				narrative_event = { id = soh.6365 } # EoC gets offer
			}
		}
	}
}

# GC might have a say
narrative_event = {
	id = soh.6364
	title = EVTTITLE_SOH_6364
	
	desc = {
		text = EVTDESCA_SOH_6364
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6364
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6364
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6364 # Indicate that the EoC should accept
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_accept_offer_gc
		}
		
		gc_accept_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 10
				event_target:grace_decision_taker = {
					has_character_flag = grace_accept_offer
				}
			}
			
			mult_modifier = {
				factor = 0.1
				event_target:grace_decision_taker = {
					root_hates_this_trigger = yes
				}
			}
			
			mult_modifier = {
				factor = 10
				is_friend = event_target:grace_decision_taker
			}
			
			mult_modifier = {
				factor = 10
				is_lover = event_target:grace_decision_taker
			}
			
			mult_modifier = {
				factor = 0.01
				is_rival = event_target:grace_decision_taker
			}
			
			mult_modifier = {
				factor = 0.1
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
					root_hates_this_trigger = yes
				}
			}
			
			mult_modifier = {
				factor = 10
				is_friend = event_target:husband_to_be
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				is_lover = event_target:husband_to_be
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 0.01
				is_rival = event_target:husband_to_be
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 5
				event_target:grace_decision_taker = {
					has_character_flag = grace_accept_offer
				}
				trait = just
			}
			
			mult_modifier = {
				factor = 2
				event_target:grace_decision_taker = {
					has_character_flag = grace_accept_offer
				}
				trait = honest
			}
			
			mult_modifier = {
				factor = 0.5
				event_target:grace_decision_taker = {
					has_character_flag = grace_accept_offer
				}
				trait = deceitful
			}
			
			mult_modifier = {
				factor = 0.2
				event_target:grace_decision_taker = {
					has_character_flag = grace_accept_offer
				}
				trait = arbitrary
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6364 # Indicate that the EoC should refuse
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_refuse_offer_gc
		}
		
		gc_refuse_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 10
				event_target:grace_decision_taker = {
					has_character_flag = grace_refuse_offer
				}
			}
			
			mult_modifier = {
				factor = 10
				event_target:grace_decision_taker = {
					root_hates_this_trigger = yes
				}
			}
			
			mult_modifier = {
				factor = 0.1
				is_friend = event_target:grace_decision_taker
			}
			
			mult_modifier = {
				factor = 0.1
				is_lover = event_target:grace_decision_taker
			}
			
			mult_modifier = {
				factor = 100
				is_rival = event_target:grace_decision_taker
			}
			
			mult_modifier = {
				factor = 10
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
					root_hates_this_trigger = yes
				}
			}
			
			mult_modifier = {
				factor = 0.1
				is_friend = event_target:husband_to_be
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				is_lover = event_target:husband_to_be
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 100
				is_rival = event_target:husband_to_be
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 5
				event_target:grace_decision_taker = {
					has_character_flag = grace_refuse_offer
				}
				trait = just
			}
			
			mult_modifier = {
				factor = 2
				event_target:grace_decision_taker = {
					has_character_flag = grace_refuse_offer
				}
				trait = honest
			}
			
			mult_modifier = {
				factor = 0.5
				event_target:grace_decision_taker = {
					has_character_flag = grace_refuse_offer
				}
				trait = deceitful
			}
			
			mult_modifier = {
				factor = 0.2
				event_target:grace_decision_taker = {
					has_character_flag = grace_refuse_offer
				}
				trait = arbitrary
			}
		}
	}
	
	option = {
		name = EVTOPTC_SOH_6364 # Indicate no strong preference
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_neutral_offer_gc
		}
		
		gc_neutral_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 10
				event_target:grace_decision_taker = {
					has_character_flag = grace_neutral_offer
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = proud
			}
			
			mult_modifier = {
				factor = 0.1
				trait = stubborn
			}
			
			mult_modifier = {
				factor = 10
				trait = shy
			}
			
			mult_modifier = {
				factor = 2
				trait = arbitrary
			}
			
			mult_modifier = {
				factor = 0.1
				OR = {
					is_rival = event_target:grace_decision_taker
					is_friend = event_target:grace_decision_taker
					is_lover = event_target:grace_decision_taker
				}
			}
			
			mult_modifier = {
				factor = 0.1
				dynasty = event_target:grace_decision_taker
			}
			
			mult_modifier = {
				factor = 0.1
				OR = {
					is_rival = event_target:husband_to_be
					is_friend = event_target:husband_to_be
					is_lover = event_target:husband_to_be
				}
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				dynasty = event_target:husband_to_be
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = humble
			}
			
			mult_modifier = {
				factor = 5
				trait = slothful
			}
			
			mult_modifier = {
				factor = 0.2
				trait = diligent
			}
			
			mult_modifier = {
				factor = 5
				trait = content
			}
			
			mult_modifier = {
				factor = 0.2
				trait = ambitious
			}
		}
	}
	
	after = {
		event_target:eoc = {
			narrative_event = { id = soh.6365 } # EoC informed of the request and the GC's position
		}
	}
}

# EoC gets the request (and possible recommendation)
narrative_event = {
	id = soh.6365
	title = EVTTITLE_SOH_6365
	
	desc = {
		text = EVTDESCA_SOH_6365
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6365
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6365
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCD_SOH_6365
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCE_SOH_6365
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCF_SOH_6365
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCG_SOH_6365
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCH_SOH_6365
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCI_SOH_6365
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCJ_SOH_6365
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCK_SOH_6365
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCL_SOH_6365
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	immediate = {
		random_dynasty_member = {
			limit = {
				is_valid_dragon_bride_candidate = yes
			}
			preferred_limit = {
				NOT = {
					any_lover = {
						character = ROOT
					}
				}
			}
			save_event_target_as = dragon_bride_to_be
		}
	}
	
	option = {
		name = EVTOPTA_SOH_6365 # Accept the request
		
		log = "[Root.GetBestName] accepted [grace_decision_taker.GetBestName]'s Imperial Marriage Boon for [husband_to_be.GetBestName] (normal)!"
		
		event_target:dragon_bride_to_be = {
			show_portrait = yes
			
			event_target:husband_to_be = {
				show_portrait = yes
			}
			
			remove_trait = dragon_bride_unmarried
			add_trait = dragon_bride_married
			
			move_character = event_target:husband_to_be
			force_host = event_target:husband_to_be
			
			event_target:husband_to_be = {
				add_spouse = PREV
			}
		}
		
		eoc_accept_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6366 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_accept_boon_score = yes
			
			mult_modifier = {
				factor = 0.1
				event_target:husband_to_be = {
					china_eoc_hates_this_trigger = yes
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				is_friend = event_target:husband_to_be
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				is_lover = event_target:husband_to_be
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 0.01
				is_rival = event_target:husband_to_be
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = humble
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6365 # Refuse
		
		log = "[Root.GetBestName] refused [grace_decision_taker.GetBestName]'s Imperial Marriage Boon for [husband_to_be.GetBestName]!"
		
		eoc_refuse_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6367 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_refuse_boon_score = yes
			
			mult_modifier = {
				factor = 10
				trait = proud
				event_target:husband_to_be = {
					lower_real_tier_than = king
				}
			}
		}
	}
}

# Request accepted
letter_event = {
	id = soh.6366
	desc = EVTDESC_SOH_6366
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6366 # Great!
		
		set_character_flag = grace_character
	}
}

# Request refused
letter_event = {
	id = soh.6367
	desc = EVTDESC_SOH_6367
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6367 # Really?
		
		opinion = {
			who = FROM
			modifier = opinion_china_grace_refused_imperial_marriage_boon
		}
	}
}



##### Request Imperial Marriage (targeted)

### Independent

# The AI does not do targeted Imperial Marriages

# Ping EoC and set up scopes if triggered from decision
character_event = {
	id = soh.6368
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = eoc
		
		FROMFROM = {
			clear_grace_decision_flags_effect = yes
			save_event_target_as = grace_decision_taker
		}
		
		if = {
			limit = {
				china_would_refuse_imperial_marriage_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_refuse_offer
			}
		}
		
		else_if = {
			limit = {
				china_would_accept_imperial_marriage_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_accept_offer
			}
		}
		
		else = {
			FROMFROM = {
				set_character_flag = grace_neutral_offer
			}
		}
		
		if = {
			limit = {
				event_target:eoc = {
					primary_title = {
						OR = {
							has_law = grand_chancellor_law_1
							has_law = grand_chancellor_law_2
						}
					}
					
					persistent_event_target:my_grand_chancellor = {
						always = yes
					}
				}
			}
			
			event_target:eoc = {
				persistent_event_target:my_grand_chancellor = {
					narrative_event = { id = soh.6369 } # EoC's GC has a say
				}
			}
		}
		
		else = {
			event_target:eoc = {
				narrative_event = { id = soh.6370 } # EoC gets offer
			}
		}
	}
}

# GC might have a say
narrative_event = {
	id = soh.6369
	title = EVTTITLE_SOH_6369
	
	desc = {
		text = EVTDESCA_SOH_6369
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6369
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6369
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6369 # Indicate that the EoC should accept
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_accept_offer_gc
		}
		
		gc_accept_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_accept_grace_score = yes
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6369 # Indicate that the EoC should refuse
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_refuse_offer_gc
		}
		
		gc_refuse_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 10
				event_target:grace_decision_taker = {
					has_character_flag = grace_refuse_offer
				}
			}
			
			mult_modifier = {
				factor = 10
				event_target:grace_decision_taker = {
					root_hates_this_trigger = yes
				}
			}
			
			mult_modifier = {
				factor = 0.1
				is_friend = event_target:grace_decision_taker
			}
			
			mult_modifier = {
				factor = 0.1
				is_lover = event_target:grace_decision_taker
			}
			
			mult_modifier = {
				factor = 100
				is_rival = event_target:grace_decision_taker
			}
			
			mult_modifier = {
				factor = 10
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
					root_hates_this_trigger = yes
				}
			}
			
			mult_modifier = {
				factor = 0.1
				is_friend = event_target:husband_to_be
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				is_lover = event_target:husband_to_be
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 100
				is_rival = event_target:husband_to_be
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 5
				event_target:grace_decision_taker = {
					has_character_flag = grace_refuse_offer
				}
				trait = just
			}
			
			mult_modifier = {
				factor = 2
				event_target:grace_decision_taker = {
					has_character_flag = grace_refuse_offer
				}
				trait = honest
			}
			
			mult_modifier = {
				factor = 0.5
				event_target:grace_decision_taker = {
					has_character_flag = grace_refuse_offer
				}
				trait = deceitful
			}
			
			mult_modifier = {
				factor = 0.2
				event_target:grace_decision_taker = {
					has_character_flag = grace_refuse_offer
				}
				trait = arbitrary
			}
		}
	}
	
	option = {
		name = EVTOPTC_SOH_6369 # Indicate no strong preference
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_neutral_offer_gc
		}
		
		gc_neutral_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 10
				event_target:grace_decision_taker = {
					has_character_flag = grace_neutral_offer
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = proud
			}
			
			mult_modifier = {
				factor = 0.1
				trait = stubborn
			}
			
			mult_modifier = {
				factor = 10
				trait = shy
			}
			
			mult_modifier = {
				factor = 2
				trait = arbitrary
			}
			
			mult_modifier = {
				factor = 0.1
				OR = {
					is_rival = event_target:grace_decision_taker
					is_friend = event_target:grace_decision_taker
					is_lover = event_target:grace_decision_taker
				}
			}
			
			mult_modifier = {
				factor = 0.1
				dynasty = event_target:grace_decision_taker
			}
			
			mult_modifier = {
				factor = 0.1
				OR = {
					is_rival = event_target:husband_to_be
					is_friend = event_target:husband_to_be
					is_lover = event_target:husband_to_be
				}
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				dynasty = event_target:husband_to_be
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = humble
			}
			
			mult_modifier = {
				factor = 5
				trait = slothful
			}
			
			mult_modifier = {
				factor = 0.2
				trait = diligent
			}
			
			mult_modifier = {
				factor = 5
				trait = content
			}
			
			mult_modifier = {
				factor = 0.2
				trait = ambitious
			}
		}
	}
	
	after = {
		event_target:eoc = {
			narrative_event = { id = soh.6370 } # EoC informed of the request and the GC's position
		}
	}
}

# EoC gets the request (and possible recommendation)
narrative_event = {
	id = soh.6370
	title = EVTTITLE_SOH_6370
	
	desc = {
		text = EVTDESCA_SOH_6370
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6370
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6370
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCD_SOH_6370
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCE_SOH_6370
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCF_SOH_6370
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCG_SOH_6370
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCH_SOH_6370
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCI_SOH_6370
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCJ_SOH_6370
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCK_SOH_6370
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCL_SOH_6370
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6370 # Accept the request
		
		log = "[Root.GetBestName] accepted [grace_decision_taker.GetBestName]'s Imperial Marriage Boon targeting [dragon_bride_to_be.GetBestName] for [husband_to_be.GetBestName] (normal)!"
		
		event_target:dragon_bride_to_be = {
			show_portrait = yes
			
			event_target:husband_to_be = {
				show_portrait = yes
			}
			
			remove_trait = dragon_bride_unmarried
			add_trait = dragon_bride_married
			
			hidden_tooltip = {
				any_lover = {
					limit = {
						NOT = {
							character = event_target:husband_to_be
						}
					}
					
					random_list = {
						50 = {
							remove_lover = event_target:tribute_character
							mult_modifier = {
								factor = 0.1
								event_target:tribute_character = {
									trait = homosexual
								}
							}
						}
						50 = {}
					}
				}
			}
			
			move_character = event_target:husband_to_be
			force_host = event_target:husband_to_be
			
			event_target:husband_to_be = {
				add_spouse = PREV
			}
		}
		
		event_target:grace_decision_taker = {
			add_character_modifier = {
				inherit = yes
				name = peace_deal_with_china
				years = 25
			}
		}
		
		eoc_accept_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6371 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_accept_boon_score = yes
			
			mult_modifier = {
				factor = 0.1
				event_target:husband_to_be = {
					china_eoc_hates_this_trigger = yes
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				is_friend = event_target:husband_to_be
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				is_lover = event_target:husband_to_be
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 0.01
				is_rival = event_target:husband_to_be
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = humble
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6370 # Refuse
		
		log = "[Root.GetBestName] refused [grace_decision_taker.GetBestName]'s Imperial Marriage Boon targeting [dragon_bride_to_be.GetBestName] for [husband_to_be.GetBestName]!"
		
		eoc_refuse_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6372 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_refuse_boon_score = yes
			
			mult_modifier = {
				factor = 10
				trait = proud
				event_target:husband_to_be = {
					lower_real_tier_than = king
				}
			}
		}
	}
	
	option = {
		trigger = {
			event_target:grace_decision_taker = {
				OR = {
					is_nomadic = yes
					is_tribal = yes
					independent = no
					lower_real_tier_than = king
					any_rival = {
						character = ROOT
					}
				}
			}
		}
		
		name = EVTOPTC_SOH_6370 # Let's pick some lesser bride...
		
		log = "[Root.GetBestName] accepted [grace_decision_taker.GetBestName]'s Imperial Marriage Boon targeting [dragon_bride_to_be.GetBestName] for [husband_to_be.GetBestName] (special)!"
		
		character_event = { id = soh.6373 } # Pick some lesser bride
		
		ai_chance = {
			factor = 100
			
			eoc_refuse_boon_score = yes
			
			mult_modifier = {
				factor = 10
				event_target:grace_decision_taker = {
					china_eoc_hates_this_trigger = yes
				}
			}
			
			mult_modifier = {
				factor = 0.1
				is_friend = event_target:grace_decision_taker
			}
			
			mult_modifier = {
				factor = 0.1
				is_lover = event_target:grace_decision_taker
			}
			
			mult_modifier = {
				factor = 100
				is_rival = event_target:grace_decision_taker
			}
			
			mult_modifier = {
				factor = 10
				event_target:husband_to_be = {
					china_eoc_hates_this_trigger = yes
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				is_friend = event_target:husband_to_be
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				is_lover = event_target:husband_to_be
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 100
				is_rival = event_target:husband_to_be
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = proud
			}
		}
	}
}

# Request accepted
letter_event = {
	id = soh.6371
	desc = EVTDESC_SOH_6371
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6371 # Great!
		
		set_character_flag = grace_character
	}
}

# Request refused
letter_event = {
	id = soh.6372
	desc = EVTDESC_SOH_6372
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6372 # Really?
		
		opinion = {
			who = FROM
			modifier = opinion_china_grace_refused_imperial_marriage_boon
		}
	}
}

# Pick a lesser bride
character_event = {
	id = soh.6373
	desc = EVTDESC_SOH_6373
	picture = GFX_evt_marriage_taoist
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6373 # A famous courtesan!
		
		piety = -50
		
		create_chinese_courtesan_effect = yes
		
		hidden_tooltip = {
			event_target:not_a_dragon_bride = {
				move_character = event_target:husband_to_be
				force_host = event_target:husband_to_be
				
				event_target:husband_to_be = {
					add_spouse = PREV
				}
				
				if = {
					limit = {
						event_target:bastard_1 = {
							always = yes
						}
					}
					event_target:bastard_1 = {
						move_character = event_target:husband_to_be
						force_host = event_target:husband_to_be
					}
				}
				
				if = {
					limit = {
						event_target:bastard_2 = {
							always = yes
						}
					}
					event_target:bastard_2 = {
						move_character = event_target:husband_to_be
						force_host = event_target:husband_to_be
					}
				}
			}
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = poet
			}
			
			mult_modifier = {
				factor = 0.01
				trait = chaste
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6373 # A great beauty!
		
		prestige = -100
		
		create_chinese_beauty_effect = yes
		
		hidden_tooltip = {
			event_target:not_a_dragon_bride = {
				move_character = event_target:husband_to_be
				force_host = event_target:husband_to_be
				
				event_target:husband_to_be = {
					add_spouse = PREV
				}
				
				if = {
					limit = {
						event_target:bastard_1 = {
							always = yes
						}
					}
					event_target:bastard_1 = {
						move_character = event_target:husband_to_be
						force_host = event_target:husband_to_be
					}
				}
				
				if = {
					limit = {
						event_target:bastard_2 = {
							always = yes
						}
					}
					event_target:bastard_2 = {
						move_character = event_target:husband_to_be
						force_host = event_target:husband_to_be
					}
				}
			}
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = poet
			}
			mult_modifier = {
				factor = 0.01
				trait = envious
			}
		}
	}
	
	option = {
		name = EVTOPTC_SOH_6373 # A famous entertainer!
		
		wealth = -100
		
		create_chinese_entertainer_effect = yes
		
		hidden_tooltip = {
			event_target:not_a_dragon_bride = {
				move_character = event_target:husband_to_be
				force_host = event_target:husband_to_be
				
				event_target:husband_to_be = {
					add_spouse = PREV
				}
				
				if = {
					limit = {
						event_target:bastard_1 = {
							always = yes
						}
					}
					event_target:bastard_1 = {
						move_character = event_target:husband_to_be
						force_host = event_target:husband_to_be
					}
				}
				
				if = {
					limit = {
						event_target:bastard_2 = {
							always = yes
						}
					}
					event_target:bastard_2 = {
						move_character = event_target:husband_to_be
						force_host = event_target:husband_to_be
					}
				}
			}
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				is_dumb_trigger = yes
			}
		}
	}
	
	option = {
		trigger = {
			OR = {
				diplomacy >= 15
				intrigue >= 15
			}
		}
		
		name = EVTOPTD_SOH_6373 # A palace maid!
		
		hidden_tooltip = {
			create_character = {
				age = 17
				culture = ROOT
				religion = ROOT
				dynasty = none
				female = yes
				random_traits = yes
			}
			
			new_character = {
				save_event_target_as = not_a_dragon_bride
				set_character_flag = palace_maid
			}
			
			event_target:not_a_dragon_bride = {
				move_character = event_target:husband_to_be
				force_host = event_target:husband_to_be
				event_target:husband_to_be = {
					add_spouse = PREV
				}
			}
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				NOT = {
					trait = proud
				}
			}
		}
	}
	
	after = {
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6374 } # Inform the recipient
		}
	}
}

# Inform the recipient of a non-imperial bride
letter_event = {
	id = soh.6374
	
	desc = {
		text = EVTDESCA_SOH_6374
		trigger = {
			event_target:not_a_dragon_bride = {
				has_character_flag = chinese_courtesan
				NOT = {
					any_child = {
						always = yes
					}
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6374
		trigger = {
			event_target:not_a_dragon_bride = {
				has_character_flag = chinese_courtesan
				any_child = {
					always = yes
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6374
		trigger = {
			event_target:not_a_dragon_bride = {
				has_character_flag = chinese_beauty
			}
		}
	}
	
	desc = {
		text = EVTDESCD_SOH_6374
		trigger = {
			event_target:not_a_dragon_bride = {
				has_character_flag = chinese_entertainer
			}
		}
	}
	
	desc = {
		text = EVTDESCE_SOH_6374
		trigger = {
			event_target:not_a_dragon_bride = {
				has_character_flag = palace_maid
			}
		}
	}
	
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			event_target:not_a_dragon_bride = {
				has_character_flag = chinese_courtesan
			}
		}
		
		name = EVTOPTA_SOH_6374 # Works for me!
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = chaste
				event_target:husband_to_be = {
					character = ROOT
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = proud
			}
			
			mult_modifier = {
				factor = 0.1
				trait = ambitious
			}
		}
	}
	
	option = {
		trigger = {
			event_target:not_a_dragon_bride = {
				has_character_flag = chinese_beauty
			}
		}
		
		name = EVTOPTB_SOH_6374 # Works for me!
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = ambitious
			}
			
			mult_modifier = {
				factor = 10
				trait = lustful
				NOT = {
					trait = homosexual
				}
				event_target:husband_to_be = {
					character = ROOT
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = content
			}
		}
	}
	
	option = {
		trigger = {
			event_target:not_a_dragon_bride = {
				has_character_flag = chinese_entertainer
			}
		}
		
		name = EVTOPTC_SOH_6374 # Works for me!
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 10
				trait = kind
			}
			
			mult_modifier = {
				factor = 2
				trait = poet
			}
			
			mult_modifier = {
				factor = 2
				trait = scholar
			}
			
			mult_modifier = {
				factor = 2
				trait = gregarious
			}
			
			mult_modifier = {
				factor = 10
				trait = content
			}
		}
	}
	
	option = {
		trigger = {
			event_target:husband_to_be = {
				has_concubinage = yes
				OR = {
					NOR = {
						government = chinese_imperial_government
						government = eastern_imperial_government
						government = japanese_imperial_government
						government = divine_imperial_government
						num_of_consorts >= 3
					}
					AND = {
						government = eastern_imperial_government
						num_of_consorts < 9
					}
					government = japanese_imperial_government
					government = divine_imperial_government
				}
			}
		}
		
		name = EVTOPTD_SOH_6374 # She is only fit to be a concubine!
		
		event_target:husband_to_be = {
			remove_spouse = event_target:not_a_dragon_bride
			add_consort = event_target:not_a_dragon_bride
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = kind
			}
			
			mult_modifier = {
				factor = 0.1
				trait = humble
			}
			
			mult_modifier = {
				factor = 0.1
				trait = cruel
			}
			
			mult_modifier = {
				factor = 0.1
				event_target:not_a_dragon_bride = {
					trait = attractive
				}
				event_target:husband_to_be = {
					character = ROOT
				}
				NOT = {
					trait = homosexual
				}
			}
		}
	}
	
	option = {
		name = EVTOPTE_SOH_6374 # Get out of my sight!
		
		event_target:husband_to_be = {
			remove_spouse = event_target:not_a_dragon_bride
		}
		
		event_target:not_a_dragon_bride = {
			leave_court_effect = yes
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = kind
			}
			
			mult_modifier = {
				factor = 0.1
				trait = content
			}
		}
	}
	
	option = {
		trigger = {
			OR = {
				trait = cruel
				AND = {
					NOT = {
						trait = kind
					}
					trait = zealous
					event_target:not_a_dragon_bride = {
						NOT = {
							religion = ROOT
						}
					}
				}
			}
			NOT = {
				event_target:not_a_dragon_bride = {
					any_child = {
						always = yes
					}
				}
			}
		}
		
		name = EVTOPTF_SOH_6374 # Guards! Kill her!
		
		if = {
			limit = {
				NOT = {
					trait = cruel
				}
			}
			add_trait = cruel
		}
		
		event_target:husband_to_be = {
			remove_spouse = event_target:not_a_dragon_bride
		}
		
		event_target:not_a_dragon_bride = {
			death = {
				death_reason = death_execution_beheading
				killer = ROOT
			}
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.01
				NOT = {
					trait = cruel
				}
			}
		}
	}
	
	option = {
		trigger = {
			OR = {
				trait = cruel
				AND = {
					NOT = {
						trait = kind
					}
					trait = zealous
					event_target:not_a_dragon_bride = {
						NOT = {
							religion = ROOT
						}
					}
				}
			}
			event_target:not_a_dragon_bride = {
				any_child = {
					always = yes
				}
			}
		}
		
		name = EVTOPTG_SOH_6374 # Guards! Kill her... and the children too!
		
		if = {
			limit = {
				NOT = {
					trait = cruel
				}
			}
			add_trait = cruel
		}
		
		event_target:husband_to_be = {
			remove_spouse = event_target:not_a_dragon_bride
		}
		
		event_target:not_a_dragon_bride = {
			death = {
				death_reason = death_execution_beheading
				killer = ROOT
			}
		}
		
		event_target:bastard_1 = {
			death = {
				death_reason = death_execution_beheading
				killer = ROOT
			}
		}
		
		event_target:bastard_2 = {
			death = {
				death_reason = death_execution_beheading
				killer = ROOT
			}
		}
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 0.01
				NOT = {
					trait = cruel
				}
			}
		}
	}
	
	option = {
		trigger = {
			event_target:not_a_dragon_bride = {
				has_character_flag = palace_maid
			}
		}
		
		name = EVTOPTH_SOH_6374 # Works for me!
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 10
				trait = humble
			}
			
			mult_modifier = {
				factor = 0.1
				trait = proud
			}
			
			mult_modifier = {
				factor = 0.1
				trait = ambitious
			}
		}
	}
}

### Vassal

# The AI does not do targeted Imperial Marriages

# Ping EoC and set up scopes if triggered from decision
character_event = {
	id = soh.6375
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = eoc
		
		FROMFROM = {
			clear_grace_decision_flags_effect = yes
			save_event_target_as = grace_decision_taker
		}
		
		if = {
			limit = {
				china_would_refuse_imperial_marriage_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_refuse_offer
			}
		}
		
		else_if = {
			limit = {
				china_would_accept_imperial_marriage_fromfrom_trigger = yes
			}
			FROMFROM = {
				set_character_flag = grace_accept_offer
			}
		}
		
		else = {
			FROMFROM = {
				set_character_flag = grace_neutral_offer
			}
		}
		
		if = {
			limit = {
				event_target:eoc = {
					primary_title = {
						OR = {
							has_law = grand_chancellor_law_1
							has_law = grand_chancellor_law_2
						}
					}
					
					persistent_event_target:my_grand_chancellor = {
						NOT = {
							character = FROMFROM
						}
					}
				}
			}
			
			event_target:eoc = {
				persistent_event_target:my_grand_chancellor = {
					narrative_event = { id = soh.6376 } # EoC's GC has a say
				}
			}
		}
		
		else = {
			if = {
				limit = {
					event_target:eoc = {
						primary_title = {
							OR = {
								has_law = grand_chancellor_law_1
								has_law = grand_chancellor_law_2
							}
						}
						
						persistent_event_target:my_grand_chancellor = {
							character = FROMFROM
						}
					}
				}
				
				FROMFROM = {
					set_character_flag = grace_accept_offer_gc
				}
			}
			
			event_target:eoc = {
				narrative_event = { id = soh.6377 } # EoC gets offer
			}
		}
	}
}

# GC might have a say
narrative_event = {
	id = soh.6376
	title = EVTTITLE_SOH_6376
	
	desc = {
		text = EVTDESCA_SOH_6376
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6376
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6376
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6376 # Indicate that the EoC should accept
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_accept_offer_gc
		}
		
		gc_accept_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			gc_accept_grace_score = yes
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6376 # Indicate that the EoC should refuse
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_refuse_offer_gc
		}
		
		gc_refuse_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 10
				event_target:grace_decision_taker = {
					has_character_flag = grace_refuse_offer
				}
			}
			
			mult_modifier = {
				factor = 10
				event_target:grace_decision_taker = {
					root_hates_this_trigger = yes
				}
			}
			
			mult_modifier = {
				factor = 0.1
				is_friend = event_target:grace_decision_taker
			}
			
			mult_modifier = {
				factor = 0.1
				is_lover = event_target:grace_decision_taker
			}
			
			mult_modifier = {
				factor = 100
				is_rival = event_target:grace_decision_taker
			}
			
			mult_modifier = {
				factor = 10
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
					root_hates_this_trigger = yes
				}
			}
			
			mult_modifier = {
				factor = 0.1
				is_friend = event_target:husband_to_be
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				is_lover = event_target:husband_to_be
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 100
				is_rival = event_target:husband_to_be
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 5
				event_target:grace_decision_taker = {
					has_character_flag = grace_refuse_offer
				}
				trait = just
			}
			
			mult_modifier = {
				factor = 2
				event_target:grace_decision_taker = {
					has_character_flag = grace_refuse_offer
				}
				trait = honest
			}
			
			mult_modifier = {
				factor = 0.5
				event_target:grace_decision_taker = {
					has_character_flag = grace_refuse_offer
				}
				trait = deceitful
			}
			
			mult_modifier = {
				factor = 0.2
				event_target:grace_decision_taker = {
					has_character_flag = grace_refuse_offer
				}
				trait = arbitrary
			}
		}
	}
	
	option = {
		name = EVTOPTC_SOH_6376 # Indicate no strong preference
		
		event_target:grace_decision_taker = {
			set_character_flag = grace_neutral_offer_gc
		}
		
		gc_neutral_grace_offer_effect = yes
		
		ai_chance = {
			factor = 100
			
			mult_modifier = {
				factor = 10
				event_target:grace_decision_taker = {
					has_character_flag = grace_neutral_offer
				}
			}
			
			mult_modifier = {
				factor = 0.1
				trait = proud
			}
			
			mult_modifier = {
				factor = 0.1
				trait = stubborn
			}
			
			mult_modifier = {
				factor = 10
				trait = shy
			}
			
			mult_modifier = {
				factor = 2
				trait = arbitrary
			}
			
			mult_modifier = {
				factor = 0.1
				OR = {
					is_rival = event_target:grace_decision_taker
					is_friend = event_target:grace_decision_taker
					is_lover = event_target:grace_decision_taker
				}
			}
			
			mult_modifier = {
				factor = 0.1
				dynasty = event_target:grace_decision_taker
			}
			
			mult_modifier = {
				factor = 0.1
				OR = {
					is_rival = event_target:husband_to_be
					is_friend = event_target:husband_to_be
					is_lover = event_target:husband_to_be
				}
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				dynasty = event_target:husband_to_be
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = humble
			}
			
			mult_modifier = {
				factor = 5
				trait = slothful
			}
			
			mult_modifier = {
				factor = 0.2
				trait = diligent
			}
			
			mult_modifier = {
				factor = 5
				trait = content
			}
			
			mult_modifier = {
				factor = 0.2
				trait = ambitious
			}
		}
	}
	
	after = {
		event_target:eoc = {
			narrative_event = { id = soh.6377 } # EoC informed of the request and the GC's position
		}
	}
}

# EoC gets the request (and possible recommendation)
narrative_event = {
	id = soh.6377
	title = EVTTITLE_SOH_6377
	
	desc = {
		text = EVTDESCA_SOH_6377
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCB_SOH_6377
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCC_SOH_6377
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCD_SOH_6377
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCE_SOH_6377
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCF_SOH_6377
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCG_SOH_6377
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCH_SOH_6377
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCI_SOH_6377
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				NOR = {
					has_character_flag = grace_accept_offer_gc
					has_character_flag = grace_neutral_offer_gc
					has_character_flag = grace_refuse_offer_gc
				}
			}
		}
	}
	
	desc = {
		text = EVTDESCJ_SOH_6377
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_accept_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCK_SOH_6377
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_neutral_offer_gc
			}
		}
	}
	
	desc = {
		text = EVTDESCL_SOH_6377
		trigger = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
				has_character_flag = grace_refuse_offer_gc
			}
		}
	}
	
	picture = GFX_evt_china_golden_age
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6377 # Accept the request
		
		log = "[Root.GetBestName] accepted [grace_decision_taker.GetBestName]'s Imperial Marriage Boon targeting [dragon_bride_to_be.GetBestName] for [husband_to_be.GetBestName] (normal)!"
		
		event_target:dragon_bride_to_be = {
			show_portrait = yes
			
			event_target:husband_to_be = {
				show_portrait = yes
			}
			
			remove_trait = dragon_bride_unmarried
			add_trait = dragon_bride_married
			
			move_character = event_target:husband_to_be
			force_host = event_target:husband_to_be
			
			event_target:husband_to_be = {
				add_spouse = PREV
			}
		}
		
		eoc_accept_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6378 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_accept_boon_score = yes
			
			mult_modifier = {
				factor = 0.1
				event_target:husband_to_be = {
					china_eoc_hates_this_trigger = yes
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				is_friend = event_target:husband_to_be
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				is_lover = event_target:husband_to_be
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 0.01
				is_rival = event_target:husband_to_be
				event_target:husband_to_be = {
					NOT = {
						character = event_target:grace_decision_taker
					}
				}
			}
			
			mult_modifier = {
				factor = 10
				trait = humble
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_6377 # Refuse
		
		log = "[Root.GetBestName] refused [grace_decision_taker.GetBestName]'s Imperial Marriage Boon targeting [dragon_bride_to_be.GetBestName] for [husband_to_be.GetBestName]!"
		
		eoc_refuse_grace_offer_effect = yes
		
		event_target:grace_decision_taker = {
			letter_event = { id = soh.6379 } # Inform sender
		}
		
		ai_chance = {
			factor = 100
			
			eoc_refuse_boon_score = yes
			
			mult_modifier = {
				factor = 10
				trait = proud
				event_target:husband_to_be = {
					lower_real_tier_than = king
				}
			}
		}
	}
}

# Request accepted
letter_event = {
	id = soh.6378
	desc = EVTDESC_SOH_6378
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6378 # Great!
		
		set_character_flag = grace_character
	}
}

# Request refused
letter_event = {
	id = soh.6379
	desc = EVTDESC_SOH_6379
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_6379 # Really?
		
		opinion = {
			who = FROM
			modifier = opinion_china_grace_refused_imperial_marriage_boon
		}
	}
}



##### AI Boon randomization events

# Delayed on_bi_yearly_pulse randomization event for vassals and below of the EoC
character_event = {
	id = soh.6380
	hide_window = yes
	
	is_triggered_only = yes # on_bi_yearly_pulse -> random_events -> grace_events
	
	only_playable = yes
	
	has_dlc = "Jade Dragon"
	
	min_age = 16
	
	capable_only = yes # Works fine here!
	
	prisoner = no
	
	has_character_flag = grace_character
	
	ai = yes
	
	trigger = {
		top_liege = {
			is_chinese_emperor_trigger = yes
			is_inaccessible_or_incapable_trigger = no
		}
		
		is_chinese_emperor_trigger = no # The EoC cannot pay tribute to himself!
		
		is_inaccessible_or_incapable_trigger = no
		has_regent = no
		
		mercenary = no
		holy_order = no
	}
	
	immediate = {
		clear_grace_decision_flags_effect = yes
		
		e_china = {
			holder_scope = {
				save_event_target_as = eoc
			}
		}
		
		log = "Vassal Grace boon event fired for [Root.GetTitledName]!"
		
		random_list = {
			500 =  {
				mult_modifier = {
					factor = 2
					check_variable = {
						which = grace
						value < 500
					}
				}
				
				mult_modifier = {
					factor = 2
					check_variable = {
						which = grace
						value < 1000
					}
				}
				
				# Do nothing
			}
			
			50 = {
				trigger = {
					has_dlc = "Conclave"
					NOR = {
						holds_favor_on = event_target:eoc
						owes_favor_to = event_target:eoc
					}
					check_variable = {
						which = grace
						value >= 1000
					}
				}
				
				mult_modifier = {
					factor = 0.1
					real_tier = count
				}
				
				mult_modifier = {
					factor = 0.1
					NAND = {
						liege = {
							character = event_target:eoc
						}
						OR = {
							is_voter = yes
							is_powerful_vassal = yes
						}
					}
				}
				
				mult_modifier = {
					factor = 0.1
					is_dumb_trigger = yes
				}
				
				mult_modifier = {
					factor = 10
					trait = ambitious
				}
				
				mult_modifier = {
					factor = 5
					trait = proud
				}
				
				mult_modifier = {
					factor = 5
					trait = envious
				}
				
				mult_modifier = {
					factor = 5
					trait = deceitful
				}
				
				mult_modifier = {
					factor = 5
					trait = arbitrary
				}
				
				mult_modifier = {
					factor = 0.1
					trait = content
				}
				
				mult_modifier = {
					factor = 0.1
					trait = humble
				}
				
				mult_modifier = {
					factor = 0.2
					trait = kind
				}
				
				mult_modifier = {
					factor = 0.2
					trait = honest
				}
				
				mult_modifier = {
					factor = 0.2
					trait = just
				}
				
				# Request Favor
				change_variable = {
					which = grace
					value = -1000
				}
				
				save_event_target_as = grace_decision_taker
				
				if = {
					limit = {
						china_would_refuse_grant_favor_root_trigger = yes
					}
					set_character_flag = grace_refuse_offer
				}
				
				else_if = {
					limit = {
						china_would_accept_grant_favor_root_trigger = yes
					}
					set_character_flag = grace_accept_offer
				}
				
				else = {
					set_character_flag = grace_neutral_offer
				}
				
				if = {
					limit = {
						event_target:eoc = {
							primary_title = {
								OR = {
									has_law = grand_chancellor_law_1
									has_law = grand_chancellor_law_2
								}
							}
							persistent_event_target:my_grand_chancellor = {
								NOT = {
									character = ROOT 
								}
							}
						}
					}
					
					event_target:eoc = {
						persistent_event_target:my_grand_chancellor = {
							narrative_event = { id = soh.6215 } # EoC's GC has a say
						}
					}
				}
				
				else = {
					if = {
						limit = {
							event_target:eoc = {
								primary_title = {
									OR = {
										has_law = grand_chancellor_law_1
										has_law = grand_chancellor_law_2
									}
								}
								
								persistent_event_target:my_grand_chancellor = {
									character = ROOT 
								}
							}
						}
						
						set_character_flag = grace_accept_offer_gc
					}
					
					event_target:eoc = {
						narrative_event = { id = soh.6216 } # EoC gets request
					}
				}
			}
			
			50 = {
				trigger = {
					has_dlc = "Conclave"
					owes_favor_to = event_target:eoc
					check_variable = {
						which = grace
						value >= 1000
					}
				}
				
				mult_modifier = {
					factor = 0.1
					is_dumb_trigger = yes
				}
				
				mult_modifier = {
					factor = 10
					trait = ambitious
				}
				
				mult_modifier = {
					factor = 5
					trait = proud
				}
				
				mult_modifier = {
					factor = 5
					trait = envious
				}
				
				mult_modifier = {
					factor = 5
					trait = deceitful
				}
				
				mult_modifier = {
					factor = 5
					trait = arbitrary
				}
				
				mult_modifier = {
					factor = 0.1
					trait = content
				}
				
				mult_modifier = {
					factor = 0.1
					trait = humble
				}
				
				mult_modifier = {
					factor = 0.2
					trait = kind
				}
				
				mult_modifier = {
					factor = 0.2
					trait = honest
				}
				
				mult_modifier = {
					factor = 0.2
					trait = just
				}
				
				# Cancel Favor
				
				change_variable = {
					which = grace
					value = -1000
				}
				
				save_event_target_as = grace_decision_taker
				
				if = {
					limit = {
						china_would_refuse_cancel_own_favor_root_trigger = yes
					}
					set_character_flag = grace_refuse_offer
				}
				
				else_if = {
					limit = {
						china_would_accept_cancel_own_favor_root_trigger = yes
					}
					set_character_flag = grace_accept_offer
				}
				
				else = {
					set_character_flag = grace_neutral_offer
				}
				
				if = {
					limit = {
						event_target:eoc = {
							primary_title = {
								OR = {
									has_law = grand_chancellor_law_1
									has_law = grand_chancellor_law_2
								}
							}
							persistent_event_target:my_grand_chancellor = {
								NOT = {
									character = ROOT 
								}
							}
						}
					}
					
					event_target:eoc = {
						persistent_event_target:my_grand_chancellor = {
							narrative_event = { id = soh.6221 } # EoC's GC has a say
						}
					}
				}
				
				else = {
					if = {
						limit = {
							event_target:eoc = {
								primary_title = {
									OR = {
										has_law = grand_chancellor_law_1
										has_law = grand_chancellor_law_2
									}
								}
								
								persistent_event_target:my_grand_chancellor = {
									character = ROOT 
								}
							}
						}
						
						set_character_flag = grace_accept_offer_gc
					}
					
					event_target:eoc = {
						narrative_event = { id = soh.6222 } # EoC gets request
					}
				}
			}
			
			50 = {
				trigger = {
					is_feudal = yes
					war = no
					
					OR = {
						check_variable = {
							which = grace
							value >= 2000
						}
						
						AND = {
							has_minor_title = title_grand_chancellor
							check_variable = {
								which = grace
								value >= 1500
							}
						}
					}
					
					event_target:eoc = {
						war = no
						OR = {
							any_demesne_title = {
								count = 2
								tier = count
								location = {
									capital_holding = {
										holding_type = castle
									}
								}
							}
							
							AND = {
								primary_title = {
									NOR = {
										has_law = ci_vassal_law_3
										has_law = ci_vassal_law_4
									}
								}
								
								any_realm_lord = {
									war = no
									
									NOR = {
										character = ROOT
										has_minor_title = title_grand_chancellor
									}
									
									any_demesne_title = {
										count = 2
										tier = count
										location = {
											capital_holding = {
												holding_type = castle
											}
										}
									}
								}
							}
						}
					}
					
					NOT = {
						trait = content
					}
				}
				
				mult_modifier = {
					factor = 10
					trait = ambitious
				}
				
				mult_modifier = {
					factor = 5
					trait = proud
				}
				
				mult_modifier = {
					factor = 5
					trait = envious
				}
				
				mult_modifier = {
					factor = 5
					trait = deceitful
				}
				
				mult_modifier = {
					factor = 5
					trait = arbitrary
				}
				
				mult_modifier = {
					factor = 0.1
					trait = humble
				}
				
				mult_modifier = {
					factor = 0.2
					trait = kind
				}
				
				mult_modifier = {
					factor = 0.2
					trait = honest
				}
				
				mult_modifier = {
					factor = 0.2
					trait = just
				}
				
				# Request County (self)
				if = {
					limit = {
						has_minor_title = title_grand_chancellor
					}
					change_variable = {
						which = grace
						value = -1500
					}
				}
				
				else = {
					change_variable = {
						which = grace
						value = -2000
					}
				}
				
				save_event_target_as = grace_decision_taker
				
				if = {
					limit = {
						china_would_refuse_grant_county_root_trigger = yes
					}
					set_character_flag = grace_refuse_offer
				}
				
				else_if = {
					limit = {
						china_would_accept_grant_county_root_trigger = yes
					}
					set_character_flag = grace_accept_offer
				}
				
				else = {
					set_character_flag = grace_neutral_offer
				}
				
				if = {
					limit = {
						event_target:eoc = {
							primary_title = {
								OR = {
									has_law = grand_chancellor_law_1
									has_law = grand_chancellor_law_2
								}
							}
							
							persistent_event_target:my_grand_chancellor = {
								NOT = {
									character = ROOT 
								}
							}
						}
					}
					
					event_target:eoc = {
						persistent_event_target:my_grand_chancellor = {
							narrative_event = { id = soh.6227 } # EoC's GC has a say
						}
					}
				}
				
				else = {
					if = {
						limit = {
							event_target:eoc = {
								primary_title = {
									OR = {
										has_law = grand_chancellor_law_1
										has_law = grand_chancellor_law_2
									}
								}
								
								persistent_event_target:my_grand_chancellor = {
									character = ROOT 
								}
							}
						}
						
						set_character_flag = grace_accept_offer_gc
					}
					
					event_target:eoc = {
						narrative_event = { id = soh.6228 } # EoC gets request
					}
				}
			}
			
			10 = {
				trigger = {
					is_feudal = yes
					war = no
					
					OR = {
						check_variable = {
							which = grace
							value >= 2000
						}
						
						AND = {
							has_minor_title = title_grand_chancellor
							check_variable = {
								which = grace
								value >= 1500
							}
						}
					}
					
					event_target:eoc = {
						war = no
						OR = {
							any_demesne_title = {
								count = 2
								tier = count
								location = {
									capital_holding = {
										holding_type = castle
									}
								}
							}
							
							AND = {
								primary_title = {
									NOR = {
										has_law = ci_vassal_law_3
										has_law = ci_vassal_law_4
									}
								}
								
								any_realm_lord = {
									war = no
									
									NOR = {
										character = ROOT
										has_minor_title = title_grand_chancellor
									}
									
									any_demesne_title = {
										count = 2
										tier = count
										location = {
											capital_holding = {
												holding_type = castle
											}
										}
									}
								}
							}
						}
					}
					
					any_courtier = {
						is_adult = yes
						is_landed = no
						prisoner = no
						OR = {
							AND = {
								is_female = no
								ROOT = {
									NOR = {
										has_religion_feature = religion_matriarchal
										has_religion_feature = religion_feature_minangkabau
									}
								}
							}
							AND = {
								is_female = yes
								ROOT = {
									OR = {
										gender_equality_trigger = yes
										has_religion_feature = religion_matriarchal
										has_religion_feature = religion_feature_minangkabau
									}
								}
							}
						}
						is_ill = no
						is_inaccessible_or_incapable_trigger = no
						NOR = {
							trait = inbred
							trait = imbecile
						}
						OR = {
							dynasty = ROOT 
							is_friend = ROOT
							is_lover = ROOT
							is_close_relative = ROOT 
						}
					}
				}
				
				mult_modifier = {
					factor = 0.1
					trait = ambitious
				}
				
				mult_modifier = {
					factor = 0.2
					trait = proud
				}
				
				mult_modifier = {
					factor = 0.2
					trait = envious
				}
				
				mult_modifier = {
					factor = 0.2
					trait = arbitrary
				}
				
				mult_modifier = {
					factor = 10
					trait = content
				}
				
				mult_modifier = {
					factor = 10
					trait = humble
				}
				
				mult_modifier = {
					factor = 5
					trait = kind
				}
				
				mult_modifier = {
					factor = 5
					trait = just
				}
				
				# Request County (other)
				if = {
					limit = {
						has_minor_title = title_grand_chancellor
					}
					change_variable = {
						which = grace
						value = -1500
					}
				}
				
				else = {
					change_variable = {
						which = grace
						value = -2000
					}
				}
				
				random_courtier = {
					limit = {
						is_adult = yes
						is_landed = no
						prisoner = no
						OR = {
							AND = {
								is_female = no
								ROOT = {
									NOR = {
										has_religion_feature = religion_matriarchal
										has_religion_feature = religion_feature_minangkabau
									}
								}
							}
							AND = {
								is_female = yes
								ROOT = {
									OR = {
										gender_equality_trigger = yes
										has_religion_feature = religion_matriarchal
										has_religion_feature = religion_feature_minangkabau
									}
								}
							}
						}
						is_ill = no
						is_inaccessible_or_incapable_trigger = no
						NOR = {
							trait = inbred
							trait = imbecile
						}
						OR = {
							dynasty = ROOT 
							is_friend = ROOT
							is_lover = ROOT
							is_close_relative = ROOT 
						}
					}
					
					preferred_limit = {
						NOT = {
							is_rival = ROOT
						}
						is_close_relative = ROOT
					}
					
					preferred_limit = {
						NOT = {
							is_rival = ROOT
						}
					}
					
					save_event_target_as = character_getting_county
				}
				
				save_event_target_as = grace_decision_taker
				
				if = {
					limit = {
						china_would_refuse_grant_county_other_root_trigger = yes
					}
					set_character_flag = grace_refuse_offer
				}
				
				else_if = {
					limit = {
						china_would_accept_grant_county_other_root_trigger = yes
					}
					set_character_flag = grace_accept_offer
				}
				
				else = {
					set_character_flag = grace_neutral_offer
				}
				
				if = {
					limit = {
						event_target:eoc = {
							primary_title = {
								OR = {
									has_law = grand_chancellor_law_1
									has_law = grand_chancellor_law_2
								}
							}
							
							persistent_event_target:my_grand_chancellor = {
								NOT = {
									character = ROOT 
								}
							}
						}
					}
					
					event_target:eoc = {
						persistent_event_target:my_grand_chancellor = {
							narrative_event = { id = soh.6238 } # EoC's GC has a say
						}
					}
				}
				
				else = {
					if = {
						limit = {
							event_target:eoc = {
								primary_title = {
									OR = {
										has_law = grand_chancellor_law_1
										has_law = grand_chancellor_law_2
									}
								}
								
								persistent_event_target:my_grand_chancellor = {
									character = ROOT 
								}
							}
						}
						
						set_character_flag = grace_accept_offer_gc
					}
					
					event_target:eoc = {
						narrative_event = { id = soh.6239 } # EoC gets request
					}
				}
			}
			
			25 = {
				trigger = {
					has_dlc = "Reapers"
					
					check_variable = {
						which = grace
						value >= 200
					}
					
					OR = {
						is_ill = yes
						any_demesne_province = {
							has_disease = yes
						}
						trait = paranoid
					}
				}
				
				mult_modifier = {
					factor = 0.2
					any_courtier_or_vassal = {
						has_minor_title = title_court_physician
						trait = physician
					}
				}
				
				mult_modifier = {
					factor = 0.5
					any_courtier_or_vassal = {
						has_minor_title = title_court_physician
					}
				}
				
				mult_modifier = {
					factor = 10
					is_ill = yes
				}
				
				mult_modifier = {
					factor = 5
					trait = paranoid
				}
				
				mult_modifier = {
					factor = 0.5
					trait = proud
				}
				
				mult_modifier = {
					factor = 0.1
					trait = depressed
				}
				
				mult_modifier = {
					factor = 5
					trait = kind
				}
				
				# Request Physician
				change_variable = {
					which = grace
					value = -200
				}
				
				save_event_target_as = grace_decision_taker
				
				event_target:eoc = {
					character_event = { id = soh.6255 } # Inform EoC
				}
			}
			
			50 = {
				trigger = {
					war = yes
					
					check_variable = {
						which = grace
						value >= 500
					}
				}
				
				mult_modifier = {
					factor = 5
					has_education_martial_trigger = yes
				}
				
				mult_modifier = {
					factor = 0.5
					trait = proud
				}
				
				mult_modifier = {
					factor = 2
					trait = ambitious
				}
				
				mult_modifier = {
					factor = 0.5
					trait = content
				}
				
				mult_modifier = {
					factor = 2
					trait = humble
				}
				
				# Request Siege Engineer
				change_variable = {
					which = grace
					value = -500
				}
				
				save_event_target_as = grace_decision_taker
				
				event_target:eoc = {
					character_event = { id = soh.6265 } # Inform EoC
				}
			}
			
			50 = {
				trigger = {
					war = yes
					can_grant_title = title_strategist
					
					NOT = {
						any_courtier_or_vassal = {
							has_minor_title = title_strategist
						}
					}
					
					check_variable = {
						which = grace
						value >= 750
					}
				}
				
				mult_modifier = {
					factor = 5
					has_education_martial_trigger = yes
				}
				
				mult_modifier = {
					factor = 0.5
					trait = proud
				}
				
				mult_modifier = {
					factor = 2
					trait = ambitious
				}
				
				mult_modifier = {
					factor = 0.5
					trait = content
				}
				
				mult_modifier = {
					factor = 2
					trait = humble
				}
				
				# Request Strategist
				change_variable = {
					which = grace
					value = -750
				}
				
				save_event_target_as = grace_decision_taker
				
				event_target:eoc = {
					character_event = { id = soh.6275 } # Inform EoC
				}
			}
			
			25 = {
				trigger = {
					is_tribal = no
					is_nomadic = no
					war = no
					
					check_variable = {
						which = grace
						value >= 750
					}
					
					NOT = {
						any_courtier_or_vassal = {
							has_minor_title = title_administrator
						}
					}
				}
				
				mult_modifier = {
					factor = 5
					has_education_stewardship_trigger = yes
				}
				
				mult_modifier = {
					factor = 0.5
					trait = proud
				}
				
				mult_modifier = {
					factor = 2
					trait = ambitious
				}
				
				mult_modifier = {
					factor = 0.5
					trait = content
				}
				
				mult_modifier = {
					factor = 2
					trait = humble
				}
				
				# Request Scholar-Bureaucrat
				change_variable = {
					which = grace
					value = -750
				}
				
				save_event_target_as = grace_decision_taker
				
				event_target:eoc = {
					character_event = { id = soh.6285 } # Inform EoC
				}
			}
			
			25 = {
				trigger = {
					is_tribal = no
					is_nomadic = no
					war = no
					
					check_variable = {
						which = grace
						value >= 750
					}
					
					NOT = {
						any_courtier_or_vassal = {
							has_minor_title = title_master_engineer
						}
					}
				}
				
				mult_modifier = {
					factor = 5
					has_education_stewardship_trigger = yes
				}
				
				mult_modifier = {
					factor = 0.5
					trait = proud
				}
				
				mult_modifier = {
					factor = 2
					trait = ambitious
				}
				
				mult_modifier = {
					factor = 0.5
					trait = content
				}
				
				mult_modifier = {
					factor = 2
					trait = humble
				}
				
				# Request Master Engineer
				change_variable = {
					which = grace
					value = -750
				}
				
				save_event_target_as = grace_decision_taker
				
				event_target:eoc = {
					character_event = { id = soh.6295 } # Inform EoC
				}
			}
			
			100 = {
				trigger = {
					war = no
					
					check_variable = {
						which = grace
						value >= 500
					}
				}
				
				mult_modifier = {
					factor = 5
					trait = envious
				}
				
				mult_modifier = {
					factor = 2
					trait = proud
				}
				
				mult_modifier = {
					factor = 5
					trait = greedy
				}
				
				mult_modifier = {
					factor = 0.5
					trait = content
				}
				
				mult_modifier = {
					factor = 0.5
					trait = humble
				}
				
				mult_modifier = {
					factor = 0.2
					trait = charitable
				}
				
				# Request Artifact
				change_variable = {
					which = grace
					value = -500
				}
				
				save_event_target_as = grace_decision_taker
				
				event_target:eoc = {
					character_event = { id = soh.6305 } # Inform EoC
				}
			}
			
			50 = {
				trigger = {
					event_target:eoc = {
						any_voter = {
							NOR = {
								character = ROOT 
								is_friend = ROOT
								is_lover = ROOT
							}
							
							OR = {
								AND = {
									has_minor_title = title_grand_chancellor
									e_china = {
										NOT = {
											has_law = grand_chancellor_law_2
										}
									}
									ROOT = {
										check_variable = {
											which = grace
											value >= 5000
										}
									}
								}
								
								AND = {
									NOT = {
										has_minor_title = title_grand_chancellor
									}
									is_landed = yes
									is_powerful_vassal = yes
									e_china = {
										NOR = {
											has_law = ci_vassal_law_3
											has_law = ci_vassal_law_4
										}
									}
									
									ROOT = {
										OR = {
											AND = {
												has_minor_title = title_grand_chancellor
												check_variable = {
													which = grace
													value >= 1000
												}
											}
											
											check_variable = {
												which = grace
												value >= 2000
											}
										}
									}
								}
								
								AND = {
									NOT = {
										has_minor_title = title_grand_chancellor
									}
									is_landed = yes
									is_powerful_vassal = no
									e_china = {
										NOT= {
											has_law = ci_vassal_law_4
										}
									}
									
									ROOT = {
										OR = {
											AND = {
												has_minor_title = title_grand_chancellor
												check_variable = {
													which = grace
													value >= 500
												}
											}
											check_variable = {
												which = grace
												value >= 1000
											}
										}
									}
								}
								
								AND = {
									NOT = {
										has_minor_title = title_grand_chancellor
									}
									is_landed = no
									is_council_eunuch_trigger = yes
									e_china = {
										NOR = {
											has_law = eunuch_law_3
											has_law = eunuch_law_4
										}
									}
									
									ROOT = {
										OR = {
											AND = {
												has_minor_title = title_grand_chancellor
												check_variable = {
													which = grace
													value >= 500
												}
											}
											
											check_variable = {
												which = grace
												value >= 1000
											}
										}
									}
								}
								
								AND = {
									NOT = {
										has_minor_title = title_grand_chancellor
									}
									is_landed = no
									is_council_eunuch_trigger = no
									e_china = {
										NOT= {
											has_law = ci_courtier_law_4
										}
									}
									
									ROOT = {
										OR = {
											AND = {
												has_minor_title = title_grand_chancellor
												check_variable = {
													which = grace
													value >= 500
												}
											}
											
											check_variable = {
												which = grace
												value >= 1000
											}
										}
									}
								}
							}
						}
					}
				}
				
				# Make the request
				mult_modifier = {
					factor = 0.01
					event_target:eoc = {
						NOT = {
							any_voter = {
								is_rival = ROOT
								#could_be_fired_by_root_trigger = yes # TIANXIATODO
							}
						}
					}
				}
				mult_modifier = {
					factor = 10
					event_target:eoc = {
						any_voter = {
							is_rival = ROOT
							#could_be_fired_by_root_trigger = yes # TIANXIATODO
						}
					}
				}
				
				mult_modifier = {
					factor = 5
					is_voter = yes
					liege = {
						character = event_target:eoc
					}
				}
				
				mult_modifier = {
					factor = 10
					trait = proud
				}
				
				mult_modifier = {
					factor = 10
					trait = envious
					is_voter = no
					liege = {
						character = event_target:eoc
					}
				}
				
				mult_modifier = {
					factor = 0.1
					trait = humble
				}
				
				mult_modifier = {
					factor = 0.1
					trait = content
				}
				
				mult_modifier = {
					factor = 2
					trait = deceitful
				}
				
				mult_modifier = {
					factor = 5
					trait = arbitrary
				}
				
				mult_modifier = {
					factor = 0.5
					trait = honest
				}
				
				mult_modifier = {
					factor = 0.2
					trait = just
				}
				
				mult_modifier = {
					factor = 10
					trait = ambitious
					OR = {
						AND = {
							is_voter = no
							liege = {
								character = event_target:eoc
							}
						}
						AND = {
							has_ambition = obj_become_grand_chancellor
							check_variable = {
								which = grace
								value < 5000
							}
						}
					}
				}
				mult_modifier = {
					factor = 0.1
					NOT = {
						liege = {
							character = event_target:eoc
						}
					}
				}
				
				# Dismiss Councillor
				event_target:eoc = {
					random_voter = {
						limit = {
							NOR = {
								character = ROOT
								is_friend = ROOT
								is_lover = ROOT
							}
							
							OR = {
								AND = {
									has_minor_title = title_grand_chancellor
									e_china = {
										NOT = {
											has_law = grand_chancellor_law_2
										}
									}
									ROOT = {
										check_variable = {
											which = grace
											value = 5000
										}
									}
								}
								
								AND = {
									NOT = {
										has_minor_title = title_grand_chancellor
									}
									is_landed = yes
									is_powerful_vassal = yes
									e_china = {
										NOR = {
											has_law = ci_vassal_law_3
											has_law = ci_vassal_law_4
										}
									}
									
									ROOT = {
										OR = {
											AND = {
												has_minor_title = title_grand_chancellor
												check_variable = {
													which = grace
													value = 1000
												}
											}
											check_variable = {
												which = grace
												value = 2000
											}
										}
									}
								}
								
								AND = {
									NOT = {
										has_minor_title = title_grand_chancellor
									}
									is_landed = yes
									is_powerful_vassal = no
									e_china = {
										NOT= {
											has_law = ci_vassal_law_4
										}
									}
									
									ROOT = {
										OR = {
											AND = {
												has_minor_title = title_grand_chancellor
												check_variable = {
													which = grace
													value = 500
												}
											}
											check_variable = {
												which = grace
												value = 1000
											}
										}
									}
								}
								
								AND = {
									NOT = {
										has_minor_title = title_grand_chancellor
									}
									is_landed = no
									is_council_eunuch_trigger = yes
									e_china = {
										NOR= {
											has_law = eunuch_law_3
											has_law = eunuch_law_4
										}
									}
									
									ROOT = {
										OR = {
											AND = {
												has_minor_title = title_grand_chancellor
												check_variable = {
													which = grace
													value = 500
												}
											}
											check_variable = {
												which = grace
												value = 1000
											}
										}
									}
								}
								
								AND = {
									NOT = {
										has_minor_title = title_grand_chancellor
									}
									is_landed = no
									is_council_eunuch_trigger = no
									e_china = {
										NOT= {
											has_law = ci_courtier_law_4
										}
									}
									
									ROOT = {
										OR = {
											AND = {
												has_minor_title = title_grand_chancellor
												check_variable = {
													which = grace
													value = 500
												}
											}
											check_variable = {
												which = grace
												value = 1000
											}
										}
									}
								}
							}
						}
						
						preferred_limit = {
							is_rival = ROOT
							NOT = {
								dynasty = ROOT 
							}
							NOT = {
								reverse_has_opinion_modifier = {
									who = ROOT 
									modifier = supporting_as_grand_chancellor
								}
							}
						}
						
						preferred_limit = {
							is_rival = ROOT
							NOT = {
								reverse_has_opinion_modifier = {
									who = ROOT 
									modifier = supporting_as_grand_chancellor
								}
							}
						}
						
						preferred_limit = {
							NOT = {
								dynasty = ROOT 
							}
							NOT = {
								reverse_has_opinion_modifier = {
									who = ROOT 
									modifier = supporting_as_grand_chancellor
								}
							}
						}
						
						preferred_limit = {
							NOT = {
								reverse_has_opinion_modifier = {
									who = ROOT 
									modifier = supporting_as_grand_chancellor
								}
							}
						}
						
						preferred_limit = {
							NOT = {
								dynasty = ROOT 
							}
						}
						
						save_event_target_as = councillor_to_fire
					}
				}
				if = {
					limit = {
						event_target:councillor_to_fire = {
							has_minor_title = title_grand_chancellor
						}
					}
					
					change_variable = {
						which = grace
						value = -5000
					}
				}
				
				else_if = {
					limit = {
						event_target:councillor_to_fire = {
							is_powerful_vassal = yes
						}
					}
					
					if = {
						limit = {
							has_minor_title = title_grand_chancellor
						}
						change_variable = {
							which = grace
							value = -1000
						}
					}
					
					else = {
						change_variable = {
							which = grace
							value = -2000
						}
					}
				}
				
				else = {
					if = {
						limit = {
							has_minor_title = title_grand_chancellor
						}
						change_variable = {
							which = grace
							value = -500
						}
					}
					
					else = {
						change_variable = {
							which = grace
							value = -1000
						}
					}
				}
				
				save_event_target_as = grace_decision_taker
				
				if = {
					limit = {
						china_would_refuse_dismiss_councillor_root_trigger = yes
					}
					set_character_flag = grace_refuse_offer
				}
				
				else_if = {
					limit = {
						china_would_accept_dismiss_councillor_root_trigger = yes
					}
					set_character_flag = grace_accept_offer
				}
				
				else = {
					set_character_flag = grace_neutral_offer
				}
				
				if = {
					limit = {
						event_target:eoc = {
							primary_title = {
								OR = {
									has_law = grand_chancellor_law_1
									has_law = grand_chancellor_law_2
								}
							}
							
							persistent_event_target:my_grand_chancellor = {
								NOT = {
									character = ROOT 
								}
							}
						}
					}
					
					event_target:eoc = {
						persistent_event_target:my_grand_chancellor = {
							narrative_event = { id = soh.6309 } # EoC's GC has a say
						}
					}
				}
				
				else = {
					if = {
						limit = {
							event_target:eoc = {
								primary_title = {
									OR = {
										has_law = grand_chancellor_law_1
										has_law = grand_chancellor_law_2
									}
								}
								
								persistent_event_target:my_grand_chancellor = {
									character = ROOT 
								}
							}
						}
						
						set_character_flag = grace_accept_offer_gc
					}
					
					event_target:eoc = {
						narrative_event = { id = soh.6310 } # EoC gets request
					}
				}
			}
			
			25 = {
				trigger = {
					war = no
					
					liege = {
						character = event_target:eoc
					}
					
					check_variable = {
						which = grace
						value >= 500
					}
					
					can_hold_title = title_commander
					
					NOR = {
						has_minor_title = title_commander
						trait = craven
					}
				}
				
				mult_modifier = {
					factor = 5
					trait = brave
				}
				
				mult_modifier = {
					factor = 2
					has_education_martial_trigger = yes
				}
				
				mult_modifier = {
					factor = 2
					has_lifestyle_martial_trigger = yes
				}
				
				mult_modifier = {
					factor = 10
					trait = proud
				}
				
				mult_modifier = {
					factor = 0.1
					trait = humble
				}
				
				mult_modifier = {
					factor = 0.1
					trait = content
				}
				
				mult_modifier = {
					factor = 2
					trait = ambitious
				}
				
				# Request Command
				change_variable = {
					which = grace
					value = -500
				}
				
				save_event_target_as = grace_decision_taker
				
				if = {
					limit = {
						china_would_refuse_command_boon_root_trigger = yes
					}
					set_character_flag = grace_refuse_offer
				}
				
				else_if = {
					limit = {
						china_would_accept_command_boon_root_trigger = yes
					}
					set_character_flag = grace_accept_offer
				}
				
				else = {
					set_character_flag = grace_neutral_offer
				}
				
				if = {
					limit = {
						event_target:eoc = {
							primary_title = {
								OR = {
									has_law = grand_chancellor_law_1
									has_law = grand_chancellor_law_2
								}
							}
							
							persistent_event_target:my_grand_chancellor = {
								NOT = {
									character = ROOT 
								}
							}
						}
					}
					
					event_target:eoc = {
						persistent_event_target:my_grand_chancellor = {
							narrative_event = { id = soh.6316 } # EoC's GC has a say
						}
					}
				}
				
				else = {
					if = {
						limit = {
							event_target:eoc = {
								primary_title = {
									OR = {
										has_law = grand_chancellor_law_1
										has_law = grand_chancellor_law_2
									}
								}
								
								persistent_event_target:my_grand_chancellor = {
									character = ROOT 
								}
							}
						}
						
						set_character_flag = grace_accept_offer_gc
					}
					
					event_target:eoc = {
						narrative_event = { id = soh.6317 } # EoC gets request
					}
				}
			}
			
			25 = {
				trigger = {
					any_demesne_title = {
						claimed_by = event_target:eoc
					}
					
					OR = {
						check_variable = {
							which = grace
							value >= 5000
						}
						
						AND = {
							has_minor_title = title_grand_chancellor
							check_variable = {
								which = grace
								value >= 2500
							}
						}
					}
					
					e_china = {
						NOR = {
							has_law = ci_vassal_law_3
							has_law = ci_vassal_law_4
						}
					}
					
					relative_power = {
						who = event_target:eoc 
						power < 2
					}
				}
				
				mult_modifier = {
					factor = 0.1
					relative_power = {
						who = event_target:eoc
						power >= 1
					}
				}
				
				mult_modifier = {
					factor = 0.1
					trait = brave
				}
				
				mult_modifier = {
					factor = 10
					trait = craven
				}
				
				mult_modifier = {
					factor = 5
					trait = proud
				}
				
				mult_modifier = {
					factor = 0.2
					trait = humble
				}
				
				# Renounce Claims
				if = {
					limit = {
						has_minor_title = title_grand_chancellor
					}
					change_variable = {
						which = grace
						value = -2500
					}
				}
				
				else = {
					change_variable = {
						which = grace
						value = -5000
					}
				}
				
				save_event_target_as = grace_decision_taker
				if = {
					limit = {
						china_would_refuse_renounce_claims_boon_root_trigger = yes
					}
					set_character_flag = grace_refuse_offer
				}
				
				else_if = {
					limit = {
						china_would_accept_renounce_claims_boon_root_trigger = yes
					}
					set_character_flag = grace_accept_offer
				}
				
				else = {
					set_character_flag = grace_neutral_offer
				}
				
				if = {
					limit = {
						event_target:eoc = {
							primary_title = {
								OR = {
									has_law = grand_chancellor_law_1
									has_law = grand_chancellor_law_2
								}
							}
							
							persistent_event_target:my_grand_chancellor = {
								NOT = {
									character = ROOT 
								}
							}
						}
					}
					
					event_target:eoc = {
						persistent_event_target:my_grand_chancellor = {
							narrative_event = { id = soh.6323 } # EoC's GC has a say
						}
					}
				}
				
				else = {
					if = {
						limit = {
							event_target:eoc = {
								primary_title = {
									OR = {
										has_law = grand_chancellor_law_1
										has_law = grand_chancellor_law_2
									}
								}
								
								persistent_event_target:my_grand_chancellor = {
									character = ROOT 
								}
							}
						}
						
						set_character_flag = grace_accept_offer_gc
					}
					
					event_target:eoc = {
						narrative_event = { id = soh.6324 } # EoC gets request
					}
				}
			}
			
			25 = {
				trigger = {
					OR = {
						check_variable = {
							which = grace
							value >= 2000
						}
						
						AND = {
							has_minor_title = title_grand_chancellor
							check_variable = {
								which = grace
								value >= 1000
							}
						}
					}
					
					NOT = {
						has_character_modifier = imperial_praise_modifier
					}
				}
				
				mult_modifier = {
					factor = 0.1
					trait = humble
				}
				
				mult_modifier = {
					factor = 10
					trait = proud
				}
				
				mult_modifier = {
					factor = 5
					trait = ambitious
				}
				
				mult_modifier = {
					factor = 0.2
					trait = content
				}
				
				mult_modifier = {
					factor = 0.2
					trait = shy
				}
				
				mult_modifier = {
					factor = 0.1
					trait = paranoid
				}
				
				mult_modifier = {
					factor = 5
					trait = envious
				}
				
				# Request Imperial Praise
				if = {
					limit = {
						has_minor_title = title_grand_chancellor
					}
					change_variable = {
						which = grace
						value = -1000
					}
				}
				
				else = {
					change_variable = {
						which = grace
						value = -2000
					}
				}
				
				save_event_target_as = grace_decision_taker
				
				if = {
					limit = {
						china_would_refuse_imperial_praise_root_trigger = yes
					}
					set_character_flag = grace_refuse_offer
				}
				
				else_if = {
					limit = {
						china_would_accept_imperial_praise_root_trigger = yes
					}
					set_character_flag = grace_accept_offer
				}
				
				else = {
					set_character_flag = grace_neutral_offer
				}
				
				if = {
					limit = {
						event_target:eoc = {
							primary_title = {
								OR = {
									has_law = grand_chancellor_law_1
									has_law = grand_chancellor_law_2
								}
							}
							
							persistent_event_target:my_grand_chancellor = {
								NOT = {
									character = ROOT 
								}
							}
						}
					}
					
					event_target:eoc = {
						persistent_event_target:my_grand_chancellor = {
							narrative_event = { id = soh.6329 } # EoC's GC has a say
						}
					}
				}
				
				else = {
					if = {
						limit = {
							event_target:eoc = {
								primary_title = {
									OR = {
										has_law = grand_chancellor_law_1
										has_law = grand_chancellor_law_2
									}
								}
								
								persistent_event_target:my_grand_chancellor = {
									character = ROOT 
								}
							}
						}
						
						set_character_flag = grace_accept_offer_gc
					}
					
					event_target:eoc = {
						narrative_event = { id = soh.6330 } # EoC gets request
					}
				}
			}
			
			10 = {
				trigger = {
					OR = {
						is_feudal = yes
						is_tribal = yes
						is_nomadic = yes
					}
					
					event_target:eoc = {
						any_dynasty_member = {
							is_valid_dragon_bride_candidate = yes
						}
					}
					
					OR = {
						check_variable = {
							which = grace
							value = 1000
						}
						AND = {
							has_minor_title = title_grand_chancellor
							check_variable = {
								which = grace
								value = 500
							}
						}
					}
					
					OR = {
						AND = {
							is_adult = yes
							is_married = no
							is_female = no
						}
						
						any_dynasty_member = {
							is_adult = yes
							is_married = no
							host = { character = ROOT }
							is_female = no
							is_landed = no
							prisoner = no
							NOT = { trait = incapable }
							is_inaccessible_trigger = no
							can_marry = yes
							is_betrothed = no
						}
							
						any_close_relative = {
							is_adult = yes
							is_married = no
							host = { character = ROOT }
							is_female = no
							is_landed = no
							prisoner = no
							NOT = { trait = incapable }
							is_inaccessible_trigger = no
							can_marry = yes
							is_betrothed = no
						}
					}
					
					NOT = {
						trait = content
					}
				}
				
				mult_modifier = {
					factor = 10
					trait = ambitious
				}
				
				mult_modifier = {
					factor = 5
					trait = proud
				}
				
				mult_modifier = {
					factor = 0.2
					trait = humble
				}
				
				mult_modifier = {
					factor = 0.5
					lower_real_tier_than = king
				}
				
				# Request Imperial Marriage
				random_list = {
					50 = {
						trigger = {
							is_adult = yes
							is_female = no
							is_married = no
							
							NOR = {
								dynasty = event_target:eoc
								trait = eunuch
								trait = celibate
							}
						}
						
						mult_modifier = {
							factor = 0.1
							trait = homosexual
						}
						
						
						mult_modifier = {
							factor = 5
							trait = lustful
							NOT = {
								trait = homosexual
							}
						}
						
						save_event_target_as = husband_to_be
					}
					
					50 = {
						trigger = {
							OR = {
								any_dynasty_member = {
									is_adult = yes
									is_married = no
									host = { character = ROOT }
									is_female = no
									is_landed = no
									prisoner = no
									NOT = { trait = incapable }
									is_inaccessible_trigger = no
									can_marry = yes
									is_betrothed = no
								}
								
								any_close_relative = {
									is_adult = yes
									is_married = no
									host = { character = ROOT }
									is_female = no
									is_landed = no
									prisoner = no
									NOT = { trait = incapable }
									is_inaccessible_trigger = no
									can_marry = yes
									is_betrothed = no
								}
							}
						}
						
						random_list = {
							90 = {
								random_dynasty_member = {
									limit = {
										is_adult = yes
										is_married = no
										host = { character = ROOT }
										is_female = no
										is_landed = no
										prisoner = no
										NOT = { trait = incapable }
										is_inaccessible_trigger = no
										can_marry = yes
										is_betrothed = no
									}
									
									preferred_limit = {
										is_close_relative = ROOT
										is_friend = ROOT
									}
									
									preferred_limit = {
										is_close_relative = ROOT
										NOT = {
											is_rival = ROOT
										}
									}
									
									preferred_limit = {
										is_friend = ROOT
									}
									
									preferred_limit = {
										NOT = {
											is_rival = ROOT
										}
									}
									
									save_event_target_as = husband_to_be
								}
							}
							
							10 = {
								random_close_relative = {
									limit = {
										is_adult = yes
										is_married = no
										host = { character = ROOT }
										is_female = no
										is_landed = no
										prisoner = no
										NOT = { trait = incapable }
										is_inaccessible_trigger = no
										can_marry = yes
										is_betrothed = no
									}
									
									preferred_limit = {
										dynasty = ROOT
										is_friend = ROOT
									}
									
									preferred_limit = {
										dynasty = ROOT
										NOT = {
											is_rival = ROOT
										}
									}
									
									preferred_limit = {
										dynasty = ROOT
									}
									
									preferred_limit = {
										NOT = {
											is_rival = ROOT
										}
									}
									
									save_event_target_as = husband_to_be
								}
							}
						}
					}
				}
				
				if = {
					limit = {
						has_minor_title = title_grand_chancellor
					}
					change_variable = {
						which = grace
						value = -500
					}
				}
				
				else = {
					change_variable = {
						which = grace
						value = -1000
					}
				}
				
				save_event_target_as = grace_decision_taker
				
				if = {
					limit = {
						china_would_refuse_imperial_marriage_root_trigger = yes
					}
					set_character_flag = grace_refuse_offer
				}
				
				else_if = {
					limit = {
						china_would_accept_imperial_marriage_root_trigger = yes
					}
					set_character_flag = grace_accept_offer
				}
				
				else = {
					set_character_flag = grace_neutral_offer
				}
				
				if = {
					limit = {
						event_target:eoc = {
							primary_title = {
								OR = {
									has_law = grand_chancellor_law_1
									has_law = grand_chancellor_law_2
								}
							}
							
							persistent_event_target:my_grand_chancellor = {
								NOT = {
									character = ROOT 
								}
							}
						}
					}
					
					event_target:eoc = {
						persistent_event_target:my_grand_chancellor = {
							narrative_event = { id = soh.6364 } # EoC's GC has a say
						}
					}
				}
				
				else = {
					if = {
						limit = {
							event_target:eoc = {
								primary_title = {
									OR = {
										has_law = grand_chancellor_law_1
										has_law = grand_chancellor_law_2
									}
								}
								
								persistent_event_target:my_grand_chancellor = {
									character = ROOT 
								}
							}
						}
						
						set_character_flag = grace_accept_offer_gc
					}
					
					event_target:eoc = {
						narrative_event = { id = soh.6364 } # EoC gets request
					}
				}
			}
		}
	}
}

# Delayed on_decade_pulse randomization event for rulers that might care to engage with the Grace system
character_event = {
	id = soh.6381
	hide_window = yes
	
	is_triggered_only = yes # on_decade_pulse -> random_events -> grace_events
	
	only_playable = yes
	
	has_dlc = "Jade Dragon"
	
	min_age = 16
	
	capable_only = yes # Works fine here!
	
	prisoner = no
	
	has_character_flag = grace_character
	
	ai = yes
	
	trigger = {
		OR = {
			independent = yes
			real_tier = king
			has_minor_title = title_grand_chancellor
			i_am_appropriate_regent_trigger = yes
			AND = {
				liege = {
					independent = yes
				}
				is_powerful_vassal = yes
			}
		}
		
		is_close_to_china_or_along_the_silk_road_trigger = yes
		
		top_liege = {
			NOR = {
				government = chinese_imperial_government # Either under a pretender or a vassal of China
				suzerain = {
					government = chinese_imperial_government
					is_chinese_emperor_trigger = no
				}
			}
		}
		
		e_china = {
			holder_scope = {
				is_inaccessible_or_incapable_trigger = no
				NOT = {
					war_with = ROOT
				}
			}
		}
		
		is_inaccessible_or_incapable_trigger = no
		has_regent = no
		
		is_new_world_invader_or_vassal_trigger = no
		
		mercenary = no
		holy_order = no
		
		is_chinese_emperor_trigger = no # The EoC cannot give boons to himself!
	}
	
	immediate = {
		clear_grace_decision_flags_effect = yes
		
		e_china = {
			holder_scope = {
				save_event_target_as = eoc
			}
		}
		
		log = "Grace boon event fired for [Root.GetTitledName]!"
		
		random_list = {
			500 =  {
				mult_modifier = {
					factor = 2
					check_variable = {
						which = grace
						value < 500
					}
				}
				
				mult_modifier = {
					factor = 2
					check_variable = {
						which = grace
						value < 1000
					}
				}
				
				# Do nothing
			}
			
			50 = {
				trigger = {
					independent = yes
					war = no
					
					NOR = {
						has_character_modifier = peace_deal_with_china
						e_china = {
							holder_scope = {
								has_non_aggression_pact_with = ROOT 
							}
						}
						suzerain = {
							is_chinese_emperor_trigger = yes
						}
					}
					
					check_variable = {
						which = grace
						value >= 500
					}
					
					relative_power = {
						who = event_target:eoc
						power < 2
					}
				}
				
				mult_modifier = {
					factor = 2
					relative_power = {
						who = event_target:eoc
						power < 0.5
					}
				}
				
				mult_modifier = {
					factor = 2
					relative_power = {
						who = event_target:eoc
						power < 1
					}
				}
				
				mult_modifier = {
					factor = 0.1
					is_dumb_trigger = yes
				}
				
				mult_modifier = {
					factor = 0.2
					trait = brave
				}
				
				mult_modifier = {
					factor = 0.5
					trait = proud
				}
				
				mult_modifier = {
					factor = 5
					trait = craven
				}
				
				mult_modifier = {
					factor = 2
					trait = humble
				}
				
				mult_modifier = {
					factor = 0.5
					root_hates_china_trigger = yes
				}
				
				# Request Peace Deal
				change_variable = {
					which = grace
					value = -500
				}
				
				save_event_target_as = grace_decision_taker
				
				if = {
					limit = {
						china_would_refuse_peace_root_trigger = yes
					}
					set_character_flag = grace_refuse_offer
				}
				
				else_if = {
					limit = {
						china_would_accept_peace_root_trigger = yes
					}
					set_character_flag = grace_accept_offer
				}
				
				else = {
					set_character_flag = grace_neutral_offer
				}
				
				if = {
					limit = {
						event_target:eoc = {
							primary_title = {
								OR = {
									has_law = grand_chancellor_law_1
									has_law = grand_chancellor_law_2
								}
							}
							
							persistent_event_target:my_grand_chancellor = {
								always = yes
							}
						}
					}
					
					event_target:eoc = {
						persistent_event_target:my_grand_chancellor = {
							narrative_event = { id = soh.6209 } # EoC's GC has a say
						}
					}
				}
				
				else = {
					event_target:eoc = {
						narrative_event = { id = soh.6210 } # EoC gets request
					}
				}
			}
			
			25 = {
				trigger = {
					has_dlc = "Reapers"
					
					NAND = {
						OR = {
							AND = {
								independent = no
								NOT = {
									any_demesne_province = {
										has_disease = yes
									}
								}
							}
							
							AND = {
								independent = yes
								NOT = {
									any_realm_province = {
										has_disease = yes
									}
								}
							}
						}
						
						is_ill = no
						NOT = {
							trait = paranoid
						}
					}
					
					OR = {
						check_variable = {
							which = grace
							value >= 400
						}
						AND = {
							suzerain = {
								is_chinese_emperor_trigger = yes
							}
							OR = {
								is_tributary = {
									type = chinese_protectorate
								}
								is_tributary = {
									type = chinese_client_state
								}
							}
							check_variable = {
								which = grace
								value >= 200
							}
						}
					}
				}
				
				mult_modifier = {
					factor = 0.2
					any_courtier_or_vassal = {
						has_minor_title = title_court_physician
						trait = physician
					}
				}
				
				mult_modifier = {
					factor = 0.5
					any_courtier_or_vassal = {
						has_minor_title = title_court_physician
					}
				}
				
				mult_modifier = {
					factor = 10
					is_ill = yes
				}
				
				mult_modifier = {
					factor = 5
					trait = paranoid
				}
				
				mult_modifier = {
					factor = 0.5
					trait = proud
				}
				
				mult_modifier = {
					factor = 0.1
					trait = depressed
				}
				
				mult_modifier = {
					factor = 5
					trait = kind
				}
				
				# Request Physician
				if = {
					limit = {
						suzerain = {
							is_chinese_emperor_trigger = yes
						}
						OR = {
							is_tributary = {
								type = chinese_protectorate
							}
							is_tributary = {
								type = chinese_client_state
							}
						}
					}
					
					change_variable = {
						which = grace
						value = -200
					}
				}
				
				else = {
					change_variable = {
						which = grace
						value = -400
					}
				}
				
				save_event_target_as = grace_decision_taker
				
				if = {
					limit = {
						china_would_refuse_chinese_doctor_root_trigger = yes
					}
					set_character_flag = grace_refuse_offer
				}
				
				else_if = {
					limit = {
						china_would_accept_chinese_doctor_root_trigger = yes
					}
					set_character_flag = grace_accept_offer
				}
				
				else = {
					set_character_flag = grace_neutral_offer
				}
				
				if = {
					limit = {
						event_target:eoc = {
							primary_title = {
								OR = {
									has_law = grand_chancellor_law_1
									has_law = grand_chancellor_law_2
								}
							}
							
							persistent_event_target:my_grand_chancellor = {
								always = yes
							}
						}
					}
					
					event_target:eoc = {
						persistent_event_target:my_grand_chancellor = {
							narrative_event = { id = soh.6249 } # EoC's GC has a say
						}
					}
				}
				
				else = {
					event_target:eoc = {
						narrative_event = { id = soh.6250 } # EoC gets request
					}
				}
			}
			
			50 = {
				trigger = {
					war = yes
					
					OR = {
						check_variable = {
							which = grace
							value >= 1000
						}
						AND = {
							suzerain = {
								is_chinese_emperor_trigger = yes
							}
							OR = {
								is_tributary = {
									type = chinese_protectorate
								}
								is_tributary = {
									type = chinese_client_state
								}
							}
							check_variable = {
								which = grace
								value >= 500
							}
						}
					}
				}
				
				mult_modifier = {
					factor = 5
					has_education_martial_trigger = yes
				}
				
				mult_modifier = {
					factor = 0.5
					trait = proud
				}
				
				mult_modifier = {
					factor = 2
					trait = ambitious
				}
				
				mult_modifier = {
					factor = 0.5
					trait = content
				}
				
				mult_modifier = {
					factor = 2
					trait = humble
				}
				
				# Request Siege Engineer
				if = {
					limit = {
						suzerain = {
							is_chinese_emperor_trigger = yes
						}
						OR = {
							is_tributary = {
								type = chinese_protectorate
							}
							is_tributary = {
								type = chinese_client_state
							}
						}
					}
					change_variable = {
						which = grace
						value = -500
					}
				}
				
				else = {
					change_variable = {
						which = grace
						value = -1000
					}
				}
				
				save_event_target_as = grace_decision_taker
				
				if = {
					limit = {
						china_would_refuse_siege_engineer_root_trigger = yes
					}
					set_character_flag = grace_refuse_offer
				}
				
				else_if = {
					limit = {
						china_would_accept_siege_engineer_root_trigger = yes
					}
					set_character_flag = grace_accept_offer
				}
				
				else = {
					set_character_flag = grace_neutral_offer
				}
				
				if = {
					limit = {
						event_target:eoc = {
							primary_title = {
								OR = {
									has_law = grand_chancellor_law_1
									has_law = grand_chancellor_law_2
								}
							}
							
							persistent_event_target:my_grand_chancellor = {
								always = yes
							}
						}
					}
					
					event_target:eoc = {
						persistent_event_target:my_grand_chancellor = {
							narrative_event = { id = soh.6259 } # EoC's GC has a say
						}
					}
				}
				
				else = {
					event_target:eoc = {
						narrative_event = { id = soh.6260 } # EoC gets request
					}
				}
			}
			
			50 = {
				trigger = {
					war = yes
					can_grant_title = title_strategist
					
					NOT = {
						any_courtier_or_vassal = {
							has_minor_title = title_strategist
						}
					}
					
					OR = {
						check_variable = {
							which = grace
							value >= 1500
						}
						AND = {
							suzerain = {
								is_chinese_emperor_trigger = yes
							}
							OR = {
								is_tributary = {
									type = chinese_protectorate
								}
								is_tributary = {
									type = chinese_client_state
								}
							}
							check_variable = {
								which = grace
								value >= 750
							}
						}
					}
				}
				
				mult_modifier = {
					factor = 5
					has_education_martial_trigger = yes
				}
				
				mult_modifier = {
					factor = 0.5
					trait = proud
				}
				
				mult_modifier = {
					factor = 2
					trait = ambitious
				}
				
				mult_modifier = {
					factor = 0.5
					trait = content
				}
				
				mult_modifier = {
					factor = 2
					trait = humble
				}
				
				# Request Strategist
				if = {
					limit = {
						suzerain = {
							is_chinese_emperor_trigger = yes
						}
						OR = {
							is_tributary = {
								type = chinese_protectorate
							}
							is_tributary = {
								type = chinese_client_state
							}
						}
					}
					change_variable = {
						which = grace
						value = -750
					}
				}
				
				else = {
					change_variable = {
						which = grace
						value = -1500
					}
				}
				
				save_event_target_as = grace_decision_taker
				
				if = {
					limit = {
						china_would_refuse_chinese_strategist_root_trigger = yes
					}
					set_character_flag = grace_refuse_offer
				}
				
				else_if = {
					limit = {
						china_would_accept_chinese_strategist_root_trigger = yes
					}
					set_character_flag = grace_accept_offer
				}
				
				else = {
					set_character_flag = grace_neutral_offer
				}
				
				if = {
					limit = {
						event_target:eoc = {
							primary_title = {
								OR = {
									has_law = grand_chancellor_law_1
									has_law = grand_chancellor_law_2
								}
							}
							
							persistent_event_target:my_grand_chancellor = {
								always = yes
							}
						}
					}
					
					event_target:eoc = {
						persistent_event_target:my_grand_chancellor = {
							narrative_event = { id = soh.6269 } # EoC's GC has a say
						}
					}
				}
				
				else = {
					event_target:eoc = {
						narrative_event = { id = soh.6270 } # EoC gets request
					}
				}
			}
			
			25 = {
				trigger = {
					is_tribal = no
					is_nomadic = no
					war = no
					
					OR = {
						check_variable = {
							which = grace
							value >= 1500
						}
						AND = {
							suzerain = {
								is_chinese_emperor_trigger = yes
							}
							OR = {
								is_tributary = {
									type = chinese_protectorate
								}
								is_tributary = {
									type = chinese_client_state
								}
							}
							check_variable = {
								which = grace
								value >= 750
							}
						}
					}
					
					NOT = {
						any_courtier_or_vassal = {
							has_minor_title = title_administrator
						}
					}
				}
				
				mult_modifier = {
					factor = 5
					has_education_stewardship_trigger = yes
				}
				
				mult_modifier = {
					factor = 0.5
					trait = proud
				}
				
				mult_modifier = {
					factor = 2
					trait = ambitious
				}
				
				mult_modifier = {
					factor = 0.5
					trait = content
				}
				
				mult_modifier = {
					factor = 2
					trait = humble
				}
				
				# Request Scholar-Bureaucrat
				if = {
					limit = {
						suzerain = {
							is_chinese_emperor_trigger = yes
						}
						OR = {
							is_tributary = {
								type = chinese_protectorate
							}
							is_tributary = {
								type = chinese_client_state
							}
						}
					}
					change_variable = {
						which = grace
						value = -750
					}
				}
				
				else = {
					change_variable = {
						which = grace
						value = -1500
					}
				}
				
				save_event_target_as = grace_decision_taker
				if = {
					limit = {
						china_would_refuse_chinese_administrator_root_trigger = yes
					}
					set_character_flag = grace_refuse_offer
				}
				
				else_if = {
					limit = {
						china_would_accept_chinese_administrator_root_trigger = yes
					}
					set_character_flag = grace_accept_offer
				}
				
				else = {
					set_character_flag = grace_neutral_offer
				}
				
				if = {
					limit = {
						event_target:eoc = {
							primary_title = {
								OR = {
									has_law = grand_chancellor_law_1
									has_law = grand_chancellor_law_2
								}
							}
							
							persistent_event_target:my_grand_chancellor = {
								always = yes
							}
						}
					}
					
					event_target:eoc = {
						persistent_event_target:my_grand_chancellor = {
							narrative_event = { id = soh.6279 } # EoC's GC has a say
						}
					}
				}
				
				else = {
					event_target:eoc = {
						narrative_event = { id = soh.6280 } # EoC gets request
					}
				}
			}
			
			25 = {
				trigger = {
					is_tribal = no
					is_nomadic = no
					war = no
					
					OR = {
						check_variable = {
							which = grace
							value >= 1500
						}
						AND = {
							suzerain = {
								is_chinese_emperor_trigger = yes
							}
							OR = {
								is_tributary = {
									type = chinese_protectorate
								}
								is_tributary = {
									type = chinese_client_state
								}
							}
							check_variable = {
								which = grace
								value >= 750
							}
						}
					}
					
					NOT = {
						any_courtier_or_vassal = {
							has_minor_title = title_master_engineer
						}
					}
				}
				
				mult_modifier = {
					factor = 5
					has_education_stewardship_trigger = yes
				}
				
				mult_modifier = {
					factor = 0.5
					trait = proud
				}
				
				mult_modifier = {
					factor = 2
					trait = ambitious
				}
				
				mult_modifier = {
					factor = 0.5
					trait = content
				}
				
				mult_modifier = {
					factor = 2
					trait = humble
				}
				
				# Request Master Engineer
				if = {
					limit = {
						suzerain = {
							is_chinese_emperor_trigger = yes
						}
						OR = {
							is_tributary = {
								type = chinese_protectorate
							}
							is_tributary = {
								type = chinese_client_state
							}
						}
					}
					change_variable = {
						which = grace
						value = -750
					}
				}
				
				else = {
					change_variable = {
						which = grace
						value = -1500
					}
				}
				
				save_event_target_as = grace_decision_taker
				
				if = {
					limit = {
						china_would_refuse_master_engineer_root_trigger = yes
					}
					set_character_flag = grace_refuse_offer
				}
				
				else_if = {
					limit = {
						china_would_accept_master_engineer_root_trigger = yes
					}
					set_character_flag = grace_accept_offer
				}
				
				else = {
					set_character_flag = grace_neutral_offer
				}
				
				if = {
					limit = {
						event_target:eoc = {
							primary_title = {
								OR = {
									has_law = grand_chancellor_law_1
									has_law = grand_chancellor_law_2
								}
							}
							
							persistent_event_target:my_grand_chancellor = {
								always = yes
							}
						}
					}
					
					event_target:eoc = {
						persistent_event_target:my_grand_chancellor = {
							narrative_event = { id = soh.6289 } # EoC's GC has a say
						}
					}
				}
				
				else = {
					event_target:eoc = {
						narrative_event = { id = soh.6290 } # EoC gets request
					}
				}
			}
			
			100 = {
				trigger = {
					war = no
					
					OR = {
						check_variable = {
							which = grace
							value >= 1000
						}
						AND = {
							suzerain = {
								is_chinese_emperor_trigger = yes
							}
							OR = {
								is_tributary = {
									type = chinese_protectorate
								}
								is_tributary = {
									type = chinese_client_state
								}
							}
							check_variable = {
								which = grace
								value >= 500
							}
						}
					}
				}
				
				mult_modifier = {
					factor = 5
					trait = envious
				}
				
				mult_modifier = {
					factor = 2
					trait = proud
				}
				
				mult_modifier = {
					factor = 5
					trait = greedy
				}
				
				mult_modifier = {
					factor = 0.5
					trait = content
				}
				
				mult_modifier = {
					factor = 0.5
					trait = humble
				}
				
				mult_modifier = {
					factor = 0.2
					trait = charitable
				}
				
				# Request Artifact
				if = {
					limit = {
						suzerain = {
							is_chinese_emperor_trigger = yes
						}
						OR = {
							is_tributary = {
								type = chinese_protectorate
							}
							is_tributary = {
								type = chinese_client_state
							}
						}
					}
					change_variable = {
						which = grace
						value = -500
					}
				}
				
				else = {
					change_variable = {
						which = grace
						value = -1000
					}
				}
				
				save_event_target_as = grace_decision_taker
				
				if = {
					limit = {
						china_would_refuse_artifact_boon_root_trigger = yes
					}
					set_character_flag = grace_refuse_offer
				}
				
				else_if = {
					limit = {
						china_would_accept_artifact_boon_root_trigger = yes
					}
					set_character_flag = grace_accept_offer
				}
				
				else = {
					set_character_flag = grace_neutral_offer
				}
				
				if = {
					limit = {
						event_target:eoc = {
							primary_title = {
								OR = {
									has_law = grand_chancellor_law_1
									has_law = grand_chancellor_law_2
								}
							}
							
							persistent_event_target:my_grand_chancellor = {
								always = yes
							}
						}
					}
					
					event_target:eoc = {
						persistent_event_target:my_grand_chancellor = {
							narrative_event = { id = soh.6299 } # EoC's GC has a say
						}
					}
				}
				
				else = {
					event_target:eoc = {
						narrative_event = { id = soh.6300 } # EoC gets request
					}
				}
			}
			
			50 = {
				trigger = {
					independent = yes
					war = no
					
					trigger_if = {
						limit = {
							is_tributary = {
								type = chinese_client_state
							}
						}
						
						OR = {
							AND = {
								NOT = { # If a Client State is too distant, China will be more willing to let them go
									any_realm_province = {
										any_neighbor_province = {
											OR = {
												AND = {
													has_owner = yes
													owner = {
														OR = {
															is_chinese_emperor_trigger = yes
															top_liege = {
																is_chinese_emperor_trigger = yes
															}
															is_tributary = {
																type = chinese_client_state
															}
															is_tributary = {
																type = chinese_protectorate
															}
															top_liege = {
																OR = {
																	is_tributary = {
																		type = chinese_client_state
																	}
																	is_tributary = {
																		type = chinese_protectorate
																	}
																}
															}
														}
														NOR = {
															character = ROOT 
															top_liege = {
																character = ROOT 
															}
														}
													}
												}
												
												AND = {
													is_land = no
													any_neighbor_province = {
														OR = {
															AND = {
																has_owner = yes
																owner = {
																	OR = {
																		is_chinese_emperor_trigger = yes
																		top_liege = {
																			is_chinese_emperor_trigger = yes
																		}
																		is_tributary = {
																			type = chinese_client_state
																		}
																		is_tributary = {
																			type = chinese_protectorate
																		}
																		top_liege = {
																			OR = {
																				is_tributary = {
																					type = chinese_client_state
																				}
																				is_tributary = {
																					type = chinese_protectorate
																				}
																			}
																		}
																	}
																	NOR = {
																		character = ROOT 
																		top_liege = {
																			character = ROOT 
																		}
																	}
																}
															}
															
															AND = {
																is_land = no
																any_neighbor_province = {
																	has_owner = yes
																	owner = {
																		OR = {
																			is_chinese_emperor_trigger = yes
																			top_liege = {
																				is_chinese_emperor_trigger = yes
																			}
																			is_tributary = {
																				type = chinese_client_state
																			}
																			is_tributary = {
																				type = chinese_protectorate
																			}
																			top_liege = {
																				OR = {
																					is_tributary = {
																						type = chinese_client_state
																					}
																					is_tributary = {
																						type = chinese_protectorate
																					}
																				}
																			}
																		}
																		NOR = {
																			character = ROOT 
																			top_liege = {
																				character = ROOT 
																			}
																		}
																	}
																}
															}
														}
													}
												}
											}
										}
									}
								}
								
								check_variable = {
									which = grace
									value >= 2500
								}
							}
							
							check_variable = {
								which = grace
								value >= 5000
							}
						}
					}
					
					trigger_else_if = {
						limit = {
							is_tributary = {
								type = chinese_protectorate
							}
						}
						
						OR = {
							AND = {
								NOT = { # If a Protectorate is too distant, China will be more willing to let them go
									any_realm_province = {
										any_neighbor_province = {
											OR = {
												AND = {
													has_owner = yes
													owner = {
														OR = {
															is_chinese_emperor_trigger = yes
															top_liege = {
																is_chinese_emperor_trigger = yes
															}
														}
													}
												}
												
												AND = {
													is_land = no
													any_neighbor_province = {
														OR = {
															AND = {
																has_owner = yes
																owner = {
																	OR = {
																		is_chinese_emperor_trigger = yes
																		top_liege = {
																			is_chinese_emperor_trigger = yes
																		}
																	}
																}
															}
															
															AND = {
																is_land = no
																any_neighbor_province = {
																	has_owner = yes
																	owner = {
																		OR = {
																			is_chinese_emperor_trigger = yes
																			top_liege = {
																				is_chinese_emperor_trigger = yes
																			}
																		}
																	}
																}
															}
														}
													}
												}
											}
										}
									}
								}
								
								check_variable = {
									which = grace
									value >= 1000
								}
							}
							
							check_variable = {
								which = grace
								value >= 2000
							}
						}
					}
					
					trigger_else_if = {
						limit = {
							is_tributary = {
								type = chinese_imperial_tributary
							}
						}
						
						check_variable = {
							which = grace
							value >= 500
						}
					}
					
					trigger_else = {
						check_variable = {
							which = grace
							value >= 250
						}
					}
				}
				
				mult_modifier = {
					factor = 10 # Make random distant realms more likely to try to break free
					NOT = {
						any_realm_province = {
							any_neighbor_province = {
								OR = {
									AND = {
										has_owner = yes
										owner = {
											OR = {
												is_chinese_emperor_trigger = yes
												top_liege = {
													OR = {
														is_chinese_emperor_trigger = yes
														suzerain = {
															is_chinese_emperor_trigger = yes
														}
													}
												}
												suzerain = {
													is_chinese_emperor_trigger = yes
												}
											}
										}
									}
									AND = {
										is_land = no
										any_neighbor_province = {
											OR = {
												AND = {
													has_owner = yes
													owner = {
														OR = {
															is_chinese_emperor_trigger = yes
															top_liege = {
																OR = {
																	is_chinese_emperor_trigger = yes
																	suzerain = {
																		is_chinese_emperor_trigger = yes
																	}
																}
															}
															suzerain = {
																is_chinese_emperor_trigger = yes
															}
														}
													}
												}
												AND = {
													is_land = no
													any_neighbor_province = {
														owner = {
															OR = {
																is_chinese_emperor_trigger = yes
																top_liege = {
																	OR = {
																		is_chinese_emperor_trigger = yes
																		suzerain = {
																			is_chinese_emperor_trigger = yes
																		}
																	}
																}
																suzerain = {
																	is_chinese_emperor_trigger = yes
																}
															}
														}
													}
												}
											}
										}
									}
								}
							}
						}
					}
				}
				
				# Kings and nomads are more likely to want to break free
				mult_modifier = {
					factor = 2
					OR = {
						real_tier = king
						is_nomadic = yes
					}
				}
				
				# Non-nomadic emperors want to break free very frequently
				mult_modifier = {
					factor = 10
					real_tier = emperor
					is_nomadic = no
				}
				
				# Small realms are more likely to be willing to remain tributaries
				mult_modifier = {
					factor = 0.25
					realm_size < 10
				}
				
				# Large realms are less likely to be willing to remain tributaries
				mult_modifier = {
					factor = 5
					realm_size >= 50
				}
				
				# At this size, the realm is too powerful to willingly remain a tributary
				mult_modifier = {
					factor = 10
					realm_size >= 100
				}
				# Wants to be independent due to traits
				mult_modifier = {
					factor = 10
					OR = {
						trait = proud
						trait = ambitious
						trait = brave
					}
					NOR = {
						trait = humble
						trait = content
						trait = craven
					}
				}
				
				# Wants to be independent due to traits
				mult_modifier = {
					factor = 5
					OR = {
						trait = proud
						trait = ambitious
						trait = brave
					}
					OR = {
						trait = humble
						trait = content
						trait = craven
					}
				}
				
				# Is likely to be scared of China
				mult_modifier = {
					factor = 0.1
					OR = {
						trait = humble
						trait = content
						trait = craven
					}
				}
				
				# China is less than twice as powerful
				mult_modifier = {
					factor = 2
					relative_power = {
						who = event_target:eoc
						power >= 0.5
					}
				}
				
				# China is less than four times as powerful
				mult_modifier = {
					factor = 2
					relative_power = {
						who = event_target:eoc
						power >= 0.25
					}
				}
				
				# China is more than ten times as powerful
				mult_modifier = {
					factor = 0.1
					relative_power = {
						who = event_target:eoc
						power < 0.1
					}
				}
				
				# Same culture
				mult_modifier = {
					factor = 0.1
					culture = event_target:eoc
				}
				
				# Same culture group
				mult_modifier = {
					factor = 0.5
					culture_group = event_target:eoc
					NOT = {
						culture = event_target:eoc
					}
				}
				
				mult_modifier = {
					factor = 100
					root_hates_china_trigger = yes # Dislikes the EoC
				}
				
				# Chinese
				mult_modifier = {
					factor = 0.25
					culture_group = chinese_group
				}
				
				# Is "Chinese enough"
				mult_modifier = {
					factor = 0.25
					can_have_confucian_bureaucracy_and_eastern_imperial_trigger = yes
				}
				
				# Is "Chinese enough"
				mult_modifier = {
					factor = 0.25
					government = chinese_vassal_government
				}
				
				# We are uncivilized
				mult_modifier = {
					factor = 10
					OR = {
						is_tribal = yes
						is_nomadic = yes
					}
				}
				
				# We won't willingly join China if we don't have a "Chinese enough" religion
				mult_modifier = {
					factor = 10
					is_tributary = {
						type = chinese_client_state
					}
					can_have_confucian_bureaucracy_and_eastern_imperial_trigger = no
				}
				
				# Is a Client State
				mult_modifier = {
					factor = 10
					is_tributary = {
						type = chinese_client_state
					}
				}
				
				# Is a Protectorate
				mult_modifier = {
					factor = 5
					is_tributary = {
						type = chinese_protectorate
					}
				}
				
				# Wants to break free on succession
				mult_modifier = {
					factor = 2
					is_tributary = {
						type = chinese_protectorate
					}
				}
				
				# Controls a religion, is a holy order, or is a mercenary and thus doesn't want to be a tributary
				mult_modifier = {
					factor = 100
					OR = {
						controls_religion = yes
						mercenary = yes
						holy_order = yes
					}
				}
				
				# I have strong neighbours and protection would be nice
				mult_modifier = {
					factor = 0.5
					any_neighbor_independent_ruler = {
						is_china_or_defended_chinese_tributary_trigger = no
						relative_power = {
							who = ROOT
							power >= 2
						}
					}
					NOT = {
						is_tributary = {
							type = chinese_client_state
						}
					}
				}
				
				mult_modifier = {
					factor = 0.5
					any_neighbor_independent_ruler = {
						is_china_or_defended_chinese_tributary_trigger = no
						relative_power = {
							who = ROOT
							power >= 4
						}
					}
					NOT = {
						is_tributary = {
							type = chinese_client_state
						}
					}
				}
				
				mult_modifier = {
					factor = 0.1
					any_neighbor_independent_ruler = {
						is_china_or_defended_chinese_tributary_trigger = no
						relative_power = {
							who = ROOT
							power >= 10
						}
					}
					NOT = {
						is_tributary = {
							type = chinese_client_state
						}
					}
				}
				
				# Less likely if China is doing well
				mult_modifier = {
					factor = 0.1
					event_target:eoc = {
						has_character_modifier = mandate_of_heaven_5
					}
				}
				
				mult_modifier = {
					factor = 0.25
					event_target:eoc = {
						has_character_modifier = mandate_of_heaven_4
					}
				}
				
				mult_modifier = {
					factor = 5
					event_target:eoc = {
						has_character_modifier = mandate_of_heaven_2
					}
				}
				
				mult_modifier = {
					factor = 10
					event_target:eoc = {
						has_character_modifier = mandate_of_heaven_1
					}
				}
				
				# If someone is just too different, they should want to be free a bit more often
				
				# If you have rather little Grace, perhaps you should stay a bit longer...
				mult_modifier = {
					factor = 0.01
					check_variable = {
						which = grace
						value < 1000
					}
				}
				
				# Pagans should be more unlikely to become tributaries
				mult_modifier = {
					factor = 5
					religion_group = pagan_group
					can_have_confucian_bureaucracy_and_eastern_imperial_trigger = no
					is_reformed_religion = no
				}
				
				# If we're not in China we should be a bit more likely to want to downgrade if we're a Client State
				mult_modifier = {
					factor = 10
					real_tier = king
					is_tributary = {
						type = chinese_client_state
					}
					NOT = {
						capital_scope = {
							OR = {
								region = world_china
								county = {
									de_jure_liege_or_above = e_china
								}
							}
						}
					}
				}
				
				mult_modifier = {
					factor = 5
					real_tier = duke
					is_tributary = {
						type = chinese_client_state
					}
					NOT = {
						capital_scope = {
							OR = {
								region = world_china
								county = {
									de_jure_liege_or_above = e_china
								}
							}
						}
					}
				}
				
				mult_modifier = {
					factor = 2
					real_tier = count
					is_tributary = {
						type = chinese_client_state
					}
					NOT = {
						capital_scope = {
							OR = {
								region = world_china
								county = {
									de_jure_liege_or_above = e_china
								}
							}
						}
					}
				}
				
				# Ask to decrease tributary tier
				
				if = {
					limit = {
						is_tributary = {
							type = chinese_client_state
						}
					}
					
					if = {
						limit = {
							NOT = { # If a Client State is too distant, China will be more willing to let them go
								any_realm_province = {
									any_neighbor_province = {
										OR = {
											AND = {
												has_owner = yes
												owner = {
													OR = {
														is_chinese_emperor_trigger = yes
														top_liege = {
															is_chinese_emperor_trigger = yes
														}
														is_tributary = {
															type = chinese_client_state
														}
														is_tributary = {
															type = chinese_protectorate
														}
														top_liege = {
															OR = {
																is_tributary = {
																	type = chinese_client_state
																}
																is_tributary = {
																	type = chinese_protectorate
																}
															}
														}
													}
													NOR = {
														character = ROOT 
														top_liege = {
															character = ROOT 
														}
													}
												}
											}
											
											AND = {
												is_land = no
												any_neighbor_province = {
													OR = {
														AND = {
															has_owner = yes
															owner = {
																OR = {
																	is_chinese_emperor_trigger = yes
																	top_liege = {
																		is_chinese_emperor_trigger = yes
																	}
																	is_tributary = {
																		type = chinese_client_state
																	}
																	is_tributary = {
																		type = chinese_protectorate
																	}
																	top_liege = {
																		OR = {
																			is_tributary = {
																				type = chinese_client_state
																			}
																			is_tributary = {
																				type = chinese_protectorate
																			}
																		}
																	}
																}
																NOR = {
																	character = ROOT 
																	top_liege = {
																		character = ROOT 
																	}
																}
															}
														}
														
														AND = {
															is_land = no
															any_neighbor_province = {
																has_owner = yes
																owner = {
																	OR = {
																		is_chinese_emperor_trigger = yes
																		top_liege = {
																			is_chinese_emperor_trigger = yes
																		}
																		is_tributary = {
																			type = chinese_client_state
																		}
																		is_tributary = {
																			type = chinese_protectorate
																		}
																		top_liege = {
																			OR = {
																				is_tributary = {
																					type = chinese_client_state
																				}
																				is_tributary = {
																					type = chinese_protectorate
																				}
																			}
																		}
																	}
																	NOR = {
																		character = ROOT 
																		top_liege = {
																			character = ROOT 
																		}
																	}
																}
															}
														}
													}
												}
											}
										}
									}
								}
							}
						}
						
						change_variable = {
							which = grace
							value = -1000
						}
					}
					
					else = {
						change_variable = {
							which = grace
							value = -2000
						}
					}
				}
				
				else_if = {
					limit = {
						is_tributary = {
							type = chinese_protectorate
						}
					}
					
					if = {
						limit = {
							NOT = { # If a Protectorate is too distant, China will be more willing to let them go
								any_realm_province = {
									any_neighbor_province = {
										OR = {
											AND = {
												has_owner = yes
												owner = {
													OR = {
														is_chinese_emperor_trigger = yes
														top_liege = {
															is_chinese_emperor_trigger = yes
														}
													}
												}
											}
											AND = {
												is_land = no
												any_neighbor_province = {
													OR = {
														AND = {
															has_owner = yes
															owner = {
																OR = {
																	is_chinese_emperor_trigger = yes
																	top_liege = {
																		is_chinese_emperor_trigger = yes
																	}
																}
															}
														}
														AND = {
															is_land = no
															any_neighbor_province = {
																has_owner = yes
																owner = {
																	OR = {
																		is_chinese_emperor_trigger = yes
																		top_liege = {
																			is_chinese_emperor_trigger = yes
																		}
																	}
																}
															}
														}
													}
												}
											}
										}
									}
								}
							}
						}
						
						change_variable = {
							which = grace
							value = -1000
						}
					}
					
					else = {
						change_variable = {
							which = grace
							value = -500
						}
					}
				}
				
				else_if = {
					limit = {
						is_tributary = {
							type = chinese_imperial_tributary
						}
					}
					
					change_variable = {
						which = grace
						value = -500
					}
				}
				
				else = {
					change_variable = {
						which = grace
						value = -250
					}
				}
				
				save_event_target_as = grace_decision_taker
				
				if = {
					limit = {
						china_would_refuse_decrease_tributary_tier_root_trigger = yes
					}
					set_character_flag = grace_refuse_offer
				}
				
				else_if = {
					limit = {
						china_would_accept_decrease_tributary_tier_root_trigger = yes
					}
					set_character_flag = grace_accept_offer
				}
				
				else = {
					set_character_flag = grace_neutral_offer
				}
				
				if = {
					limit = {
						event_target:eoc = {
							primary_title = {
								OR = {
									has_law = grand_chancellor_law_1
									has_law = grand_chancellor_law_2
								}
							}
							
							persistent_event_target:my_grand_chancellor = {
								always = yes
							}
						}
					}
					
					event_target:eoc = {
						persistent_event_target:my_grand_chancellor = {
							narrative_event = { id = soh.6343 } # EoC's GC has a say
						}
					}
				}
				
				else = {
					event_target:eoc = {
						narrative_event = { id = soh.6344 } # EoC gets request
					}
				}
			}
			
			50 = {
				trigger = {
					independent = yes
					
					is_tributary = {
						type = chinese_client_state
					}
					
					is_feudal = yes
					
					war = no
					event_target:eoc = {
						war = no
						NOT = {
							has_truce = ROOT 
						}
					}
					
					higher_tier_than = count
					
					check_variable = {
						which = grace
						value >= 5000 # Expensive, both because you're getting land from China and because it is meant to be a trap to drain your Grace so that you can't use that to avoid becoming a vassal
					}
					
					any_demesne_title = {
						OR = {
							AND = {
								tier = duke
								any_direct_de_jure_vassal_title = {
									holder_scope = {
										top_liege = {
											character = event_target:eoc
										}
									}
								}
							}
							
							AND = {
								higher_tier_than = duke
								
								any_de_jure_vassal_title = {
									tier = duke
									holder_scope = {
										top_liege = {
											character = event_target:eoc
										}
									}
								}
							}
						}
						
						NOR = {
							region = world_china
							de_jure_liege_or_above = e_china
						}
					}
					
					NOT = {
						trait = content
					}
				}
				
				mult_modifier = {
					factor = 10
					trait = ambitious
				}
				
				mult_modifier = {
					factor = 5
					trait = greedy
				}
				
				mult_modifier = {
					factor = 5
					trait = envious
				}
				
				mult_modifier = {
					factor = 2
					trait = proud
				}
				
				mult_modifier = {
					factor = 0.1
					trait = humble
				}
				
				mult_modifier = {
					factor = 0.25
					trait = charitable
				}
				
				mult_modifier = {
					factor = 10
					real_tier = emperor
				}
				
				mult_modifier = {
					factor = 5
					real_tier = king
				}
				
				# Request Border Adjustment
				event_target:eoc = {
					random_realm_title = {
						limit = {
							tier = count
							
							dejure_liege_title = {
								holder_scope = {
									OR = {
										character = ROOT
										
										de_jure_liege_or_above = ROOT
									}
								}
							}
							
							NOR = {
								region = world_china
								de_jure_liege_or_above = e_china
							}
						}
						
						preferred_limit = {
							ROOT = {
								primary_title = {
									any_de_jure_vassal_title = {
										title = PREVPREVPREV
									}
								}
							}
						}
						
						preferred_limit = {
							ROOT = {
								any_demesne_title = {
									tier = emperor
									any_de_jure_vassal_title = {
										title = PREVPREVPREV
									}
								}
							}
						}
						
						preferred_limit = {
							ROOT = {
								any_demesne_title = {
									tier = king
									any_de_jure_vassal_title = {
										title = PREVPREVPREV
									}
								}
							}
						}
						
						dejure_liege_title = {
							save_event_target_as = border_adjustment_duchy
						}
					}
				}
				
				change_variable = {
					which = grace
					value = -5000
				}
				
				save_event_target_as = grace_decision_taker
				
				if = {
					limit = {
						china_would_refuse_border_adjustment_boon_root_trigger = yes
					}
					set_character_flag = grace_refuse_offer
				}
				
				else_if = {
					limit = {
						china_would_accept_border_adjustment_boon_root_trigger = yes
					}
					set_character_flag = grace_accept_offer
				}
				
				else = {
					set_character_flag = grace_neutral_offer
				}
				
				if = {
					limit = {
						event_target:eoc = {
							primary_title = {
								OR = {
									has_law = grand_chancellor_law_1
									has_law = grand_chancellor_law_2
								}
							}
							
							persistent_event_target:my_grand_chancellor = {
								always = yes
							}
						}
					}
					
					event_target:eoc = {
						persistent_event_target:my_grand_chancellor = {
							narrative_event = { id = soh.6349 } # EoC's GC has a say
						}
					}
				}
				
				else = {
					event_target:eoc = {
						narrative_event = { id = soh.6350 } # EoC gets request
					}
				}
			}
			
			10 = {
				trigger = {
					OR = {
						is_feudal = yes
						is_tribal = yes
						is_nomadic = yes
					}
					
					event_target:eoc = {
						any_dynasty_member = {
							is_valid_dragon_bride_candidate = yes
						}
					}
					
					OR = {
						AND = {
							NOT = { has_character_modifier = peace_deal_with_china }
							OR = {
								check_variable = {
									which = grace
									value >= 2000
								}
								
								AND = {
									suzerain = {
										is_chinese_emperor_trigger = yes
									}
									
									OR = {
										is_tributary = {
											type = chinese_protectorate
										}
										is_tributary = {
											type = chinese_client_state
										}
									}
									
									check_variable = {
										which = grace
										value >= 1500
									}
								}
							}
						}
						
						AND = {
							has_character_modifier = peace_deal_with_china
							OR = {
								check_variable = {
									which = grace
									value >= 1500
								}
								
								AND = {
									suzerain = {
										is_chinese_emperor_trigger = yes
									}
									
									OR = {
										is_tributary = {
											type = chinese_protectorate
										}
										is_tributary = {
											type = chinese_client_state
										}
									}
									
									check_variable = {
										which = grace
										value >= 1000
									}
								}
							}
						}
					}
					
					OR = {
						AND = {
							is_adult = yes
							is_married = no
							is_female = no
						}
						
						any_dynasty_member = {
							is_adult = yes
							is_married = no
							host = { character = ROOT }
							is_female = no
							is_landed = no
							prisoner = no
							NOT = { trait = incapable }
							is_inaccessible_trigger = no
							can_marry = yes
							is_betrothed = no
						}
							
						any_close_relative = {
							is_adult = yes
							is_married = no
							host = { character = ROOT }
							is_female = no
							is_landed = no
							prisoner = no
							NOT = { trait = incapable }
							is_inaccessible_trigger = no
							can_marry = yes
							is_betrothed = no
						}
					}
					
					NOT = {
						trait = content
					}
				}
				
				mult_modifier = {
					factor = 0.1
					event_target:eoc = {
						NOT = {
							is_within_diplo_range = ROOT # If you're far from China, don't bother
						}
					}
				}
				
				mult_modifier = {
					factor = 10
					trait = ambitious
				}
				
				mult_modifier = {
					factor = 5
					trait = proud
				}
				
				mult_modifier = {
					factor = 0.2
					trait = humble
				}
				
				mult_modifier = {
					factor = 2
					real_tier = emperor
				}
				
				mult_modifier = {
					factor = 0.5
					lower_real_tier_than = duke
				}
				
				mult_modifier = {
					factor = 0.75
					independent = no
				}
				
				# Request Imperial Marriage
				random_list = {
					50 = {
						trigger = {
							is_adult = yes
							is_female = no
							is_married = no
							
							NOR = {
								dynasty = event_target:eoc
								trait = eunuch
								trait = celibate
							}
						}
						
						mult_modifier = {
							factor = 0.1
							trait = homosexual
						}
						
						
						mult_modifier = {
							factor = 5
							trait = lustful
							NOT = {
								trait = homosexual
							}
						}
						
						save_event_target_as = husband_to_be
					}
					
					50 = {
						trigger = {
							OR = {
								any_dynasty_member = {
									is_adult = yes
									is_married = no
									host = { character = ROOT }
									is_female = no
									is_landed = no
									prisoner = no
									NOT = { trait = incapable }
									is_inaccessible_trigger = no
									can_marry = yes
									is_betrothed = no
								}
								
								any_close_relative = {
									is_adult = yes
									is_married = no
									host = { character = ROOT }
									is_female = no
									is_landed = no
									prisoner = no
									NOT = { trait = incapable }
									is_inaccessible_trigger = no
									can_marry = yes
									is_betrothed = no
								}
							}
						}
						
						random_list = {
							90 = {
								random_dynasty_member = {
									limit = {
										is_adult = yes
										is_married = no
										host = { character = ROOT }
										is_female = no
										is_landed = no
										prisoner = no
										NOT = { trait = incapable }
										is_inaccessible_trigger = no
										can_marry = yes
										is_betrothed = no
									}
									
									preferred_limit = {
										is_close_relative = ROOT
										is_friend = ROOT
									}
									
									preferred_limit = {
										is_close_relative = ROOT
										NOT = {
											is_rival = ROOT
										}
									}
									
									preferred_limit = {
										is_friend = ROOT
									}
									
									preferred_limit = {
										NOT = {
											is_rival = ROOT
										}
									}
									
									save_event_target_as = husband_to_be
								}
							}
							
							10 = {
								random_close_relative = {
									limit = {
										is_adult = yes
										is_married = no
										host = { character = ROOT }
										is_female = no
										is_landed = no
										prisoner = no
										NOT = { trait = incapable }
										is_inaccessible_trigger = no
										can_marry = yes
										is_betrothed = no
									}
									
									preferred_limit = {
										dynasty = ROOT
										is_friend = ROOT
									}
									
									preferred_limit = {
										dynasty = ROOT
										NOT = {
											is_rival = ROOT
										}
									}
									
									preferred_limit = {
										dynasty = ROOT
									}
									
									preferred_limit = {
										NOT = {
											is_rival = ROOT
										}
									}
									
									save_event_target_as = husband_to_be
								}
							}
						}
					}
				}
				
				if = {
					limit = {
						suzerain = {
							is_chinese_emperor_trigger = yes
						}
						OR = {
							is_tributary = {
								type = chinese_protectorate
							}
							is_tributary = {
								type = chinese_client_state
							}
						}
					}
					
					if = {
						limit = {
							has_character_modifier = peace_deal_with_china
						}
						
						change_variable = {
							which = grace
							value = -1000
						}
					}
					
					else = {
						change_variable = {
							which = grace
							value = -1500
						}
					}	
				}
				
				else = {
					if = {
						limit = {
							has_character_modifier = peace_deal_with_china
						}
						
						change_variable = {
							which = grace
							value = -1500
						}
					}
					
					else = {
						change_variable = {
							which = grace
							value = -2000
						}
					}
				}
				
				save_event_target_as = grace_decision_taker
				
				if = {
					limit = {
						china_would_refuse_imperial_marriage_root_trigger = yes
					}
					set_character_flag = grace_refuse_offer
				}
				
				else_if = {
					limit = {
						china_would_accept_imperial_marriage_root_trigger = yes
					}
					set_character_flag = grace_accept_offer
				}
				
				else = {
					set_character_flag = grace_neutral_offer
				}
				
				if = {
					limit = {
						event_target:eoc = {
							primary_title = {
								OR = {
									has_law = grand_chancellor_law_1
									has_law = grand_chancellor_law_2
								}
							}
							persistent_event_target:my_grand_chancellor = {
								always = yes
							}
						}
					}
					
					event_target:eoc = {
						persistent_event_target:my_grand_chancellor = {
							narrative_event = { id = soh.6356 } # EoC's GC has a say
						}
					}
				}
				
				else = {
					event_target:eoc = {
						narrative_event = { id = soh.6357 } # EoC gets request
					}
				}
			}
		}
	}
}