# Treasure Fleet maintenance events
# by Silverswee(e)per

namespace = soh

# IDs 9601-9700 reserved

##### Return events

# Setup
province_event = {
	id = soh.9601
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		persistent_event_target:treasure_fleet_sender = {
			save_event_target_as = treasure_fleet_sender
		}
		
		persistent_event_target:treasure_fleet_original_sender = {
			save_event_target_as = treasure_fleet_original_sender
		}
		
		if = {
			limit = {
				has_province_flag = treasure_fleet_was_at_penglai
			}
			
			if = {
				limit = {
					has_province_flag = treasure_fleet_dragon_throne_getting_peach
				}
				
				e_china = {
					holder_scope = {
						narrative_event = { id = soh.9606 } # Inform EoC
					
						any_realm_lord = {
							if = {
								limit = {
									trait = treasure_fleet_voyage
									NOT = {
										has_character_flag = left_the_treasure_fleet
									}
								}
								
								narrative_event = { id = soh.9607 } # Inform those that returned
							}
							
							else_if = {
								limit = {
									ai = no
								}
								
								narrative_event = { id = soh.9608 } # Inform other players in China
							}
						}
					}
				}
				
				any_player = {
					limit = {
						top_liege = {
							NOT = {
								government = chinese_imperial_government
							}
						}
					}
					
					narrative_event = { id = soh.9609 } # Inform other players
				}
				
				any_independent_ruler = {
					limit = {
						government = chinese_imperial_government
						is_chinese_emperor_trigger = no
					}
					
					narrative_event = { id = soh.9609 } # Inform other CI rulers
				}
			}
			
			else = {
				e_china = {
					holder_scope = {
						narrative_event = { id = soh.9610 } # Inform EoC
					
						any_realm_lord = {
							if = {
								limit = {
									trait = treasure_fleet_voyage
									NOT = {
										has_character_flag = left_the_treasure_fleet
									}
								}
								
								narrative_event = { id = soh.9611 } # Inform those that returned
							}
							
							else_if = {
								limit = {
									ai = no
								}
								
								narrative_event = { id = soh.9612 } # Inform other players in China
							}
						}
					}
				}
				
				any_player = {
					limit = {
						top_liege = {
							NOT = {
								government = chinese_imperial_government
							}
						}
					}
					
					narrative_event = { id = soh.9613 } # Inform other players
				}
				
				any_independent_ruler = {
					limit = {
						government = chinese_imperial_government
						is_chinese_emperor_trigger = no
					}
					
					narrative_event = { id = soh.9613 } # Inform other CI rulers
				}
			}
		}
		
		else_if = {
			limit = {
				has_province_flag = treasure_fleet_was_at_utter_east
			}
			
			e_china = {
				holder_scope = {
					narrative_event = { id = soh.9614 } # Inform EoC
				
					any_realm_lord = {
						if = {
							limit = {
								trait = treasure_fleet_voyage
								NOT = {
									has_character_flag = left_the_treasure_fleet
								}
							}
							
							narrative_event = { id = soh.9615 } # Inform those that returned
						}
						
						else_if = {
							limit = {
								ai = no
							}
							
							narrative_event = { id = soh.9616 } # Inform other players in China
						}
					}
				}
			}
			
			any_player = {
				limit = {
					top_liege = {
						NOT = {
							government = chinese_imperial_government
						}
					}
				}
				
				narrative_event = { id = soh.9617 } # Inform other players
			}
			
			any_independent_ruler = {
				limit = {
					government = chinese_imperial_government
					is_chinese_emperor_trigger = no
				}
				
				narrative_event = { id = soh.9617 } # Inform other CI rulers
			}
		}
		
		else_if = {
			limit = {
				has_province_flag = treasure_fleet_was_at_rlyeh
			}
			
			e_china = {
				holder_scope = {
					narrative_event = { id = soh.9618 } # Inform EoC
				
					any_realm_lord = {
						if = {
							limit = {
								trait = treasure_fleet_voyage
								NOT = {
									has_character_flag = left_the_treasure_fleet
								}
							}
							
							narrative_event = { id = soh.9619 } # Inform those that returned
						}
						
						else_if = {
							limit = {
								ai = no
							}
							
							narrative_event = { id = soh.9620 } # Inform other players in China
						}
					}
				}
			}
			
			any_player = {
				limit = {
					top_liege = {
						NOT = {
							government = chinese_imperial_government
						}
					}
				}
				
				narrative_event = { id = soh.9621 } # Inform other players
			}
			
			any_independent_ruler = {
				limit = {
					government = chinese_imperial_government
					is_chinese_emperor_trigger = no
				}
				
				narrative_event = { id = soh.9621 } # Inform other CI rulers
			}
		}
		
		else_if = {
			limit = {
				has_province_flag = treasure_fleet_was_at_atlantis
			}
			
			e_china = {
				holder_scope = {
					narrative_event = { id = soh.9622 } # Inform EoC
				
					any_realm_lord = {
						if = {
							limit = {
								trait = treasure_fleet_voyage
								NOT = {
									has_character_flag = left_the_treasure_fleet
								}
							}
							
							narrative_event = { id = soh.9623 } # Inform those that returned
						}
						
						else_if = {
							limit = {
								ai = no
							}
							
							narrative_event = { id = soh.9624 } # Inform other players in China
						}
					}
				}
			}
			
			any_player = {
				limit = {
					top_liege = {
						NOT = {
							government = chinese_imperial_government
						}
					}
				}
				
				narrative_event = { id = soh.9625 } # Inform other players
			}
			
			any_independent_ruler = {
				limit = {
					government = chinese_imperial_government
					is_chinese_emperor_trigger = no
				}
				
				narrative_event = { id = soh.9625 } # Inform other CI rulers
			}
		}
		
		else_if = {
			limit = {
				has_province_flag = treasure_fleet_was_at_nazca
			}
			
			e_china = {
				holder_scope = {
					narrative_event = { id = soh.9626 } # Inform EoC
				
					any_realm_lord = {
						if = {
							limit = {
								trait = treasure_fleet_voyage
								NOT = {
									has_character_flag = left_the_treasure_fleet
								}
							}
							
							narrative_event = { id = soh.9627 } # Inform those that returned
						}
						
						else_if = {
							limit = {
								ai = no
							}
							
							narrative_event = { id = soh.9628 } # Inform other players in China
						}
					}
				}
			}
			
			any_player = {
				limit = {
					top_liege = {
						NOT = {
							government = chinese_imperial_government
						}
					}
				}
				
				narrative_event = { id = soh.9629 } # Inform other players
			}
			
			any_independent_ruler = {
				limit = {
					government = chinese_imperial_government
					is_chinese_emperor_trigger = no
				}
				
				narrative_event = { id = soh.9629 } # Inform other CI rulers
			}
		}
		
		else = {
			e_china = {
				holder_scope = {
					narrative_event = { id = soh.9602 } # Inform EoC
				
					any_realm_lord = {
						if = {
							limit = {
								trait = treasure_fleet_voyage
								NOT = {
									has_character_flag = left_the_treasure_fleet
								}
							}
							
							narrative_event = { id = soh.9603 } # Inform those that returned
						}
						
						else_if = {
							limit = {
								ai = no
							}
							
							narrative_event = { id = soh.9604 } # Inform other players in China
						}
					}
				}
			}
			
			any_player = {
				limit = {
					top_liege = {
						NOT = {
							government = chinese_imperial_government
						}
					}
				}
				
				narrative_event = { id = soh.9605 } # Inform other players
			}
			
			any_independent_ruler = {
				limit = {
					government = chinese_imperial_government
					is_chinese_emperor_trigger = no
				}
				
				narrative_event = { id = soh.9605 } # Inform other CI rulers
			}
		}
	
		province_event = { id = soh.9646 days = 10 } # Cleanup
	}
}



##### Return notifications

### Normal return

# Normal return - EoC
narrative_event = {
	id = soh.9602
	title = EVTTITLE_SOH_9602
	desc = EVTDESC_SOH_9602
	picture = GFX_evt_trade_post_republic_chinese_group
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_9602 # Truly an auspicious event!
		
		prestige = 1000
		
		take_treasure_fleet_wealth_effect = yes
		
		hidden_tooltip = {
			mandate_boost_large_effect = yes
		}
	}
}

# Normal return - vassals part of TF
narrative_event = {
	id = soh.9603
	title = EVTTITLE_SOH_9603
	desc = EVTDESC_SOH_9603
	picture = GFX_evt_trade_post_republic_chinese_group
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_9603 # Truly an auspicious event!
		
		prestige = 200
		
		remove_trait = treasure_fleet_voyage
		
		e_china = {
			holder_scope = {
				character_event = { id = soh.9630 days = 1 } # Possible reward
			}
		}
	}
}

# Normal return - vassals not part of TF
narrative_event = {
	id = soh.9604
	title = EVTTITLE_SOH_9604
	desc = EVTDESC_SOH_9604
	picture = GFX_evt_trade_post_republic_chinese_group
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_9604 # Truly an auspicious event!
	}
}

# Normal return - rest of the world
narrative_event = {
	id = soh.9605
	title = EVTTITLE_SOH_9605
	desc = EVTDESC_SOH_9605
	picture = GFX_evt_trade_post_republic_chinese_group
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			NOT = {
				government = chinese_imperial_government
			}
		}
		
		name = EVTOPTA_SOH_9605 # Interesting...
	}
	
	option = {
		trigger = {
			government = chinese_imperial_government
		}
		
		name = EVTOPTB_SOH_9605 # And here I was hoping it would sink...
		
		hidden_tooltip = {
			mandate_penalty_large_effect = yes
		}
	}
}

### Penglai return

# Penglai return - with peach - EoC
narrative_event = {
	id = soh.9606
	title = EVTTITLE_SOH_9606
	desc = EVTDESC_SOH_9606
	picture = GFX_evt_chinese_mythology
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_9606 # Ten thousand years for me!
		
		prestige = 1000
		
		add_trait = immortal
		
		take_treasure_fleet_wealth_effect = yes

		if = {
			limit = { has_dlc = "Holy Fury" }

			if = {
				limit = { is_female = no }

				create_bloodline = {
					type = immortal_bloodline_01
				}
			}
			else = {
				create_bloodline = {
					type = immortal_bloodline_01
					inheritance = matrilineal
				}
			}
		}
		
		hidden_tooltip = {
			mandate_boost_massive_effect = yes
		}
	}
}

# Penglai return - with peach - vassals part of TF
narrative_event = {
	id = soh.9607
	title = EVTTITLE_SOH_9607
	desc = EVTDESC_SOH_9607
	picture = GFX_evt_chinese_mythology
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_9607 # Ten thousand years!
		
		prestige = 200
		
		remove_trait = treasure_fleet_voyage
		
		e_china = {
			holder_scope = {
				character_event = { id = soh.9631 days = 1 } # Possible reward
			}
		}
	}
}

# Penglai return - with peach - vassals not part of TF
narrative_event = {
	id = soh.9608
	title = EVTTITLE_SOH_9608
	desc = EVTDESC_SOH_9608
	picture = GFX_evt_chinese_mythology
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_9608 # Ten thousand years!
	}
}

# Penglai return - with peach - rest of the world
narrative_event = {
	id = soh.9609
	title = EVTTITLE_SOH_9609
	desc = EVTDESC_SOH_9609
	picture = GFX_evt_chinese_mythology
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			NOT = {
				government = chinese_imperial_government
			}
		}
		
		name = EVTOPTA_SOH_9609 # Interesting...
	}
	
	option = {
		trigger = {
			government = chinese_imperial_government
		}
		
		name = EVTOPTB_SOH_9609 # Terrible news!
		
		hidden_tooltip = {
			mandate_penalty_massive_effect = yes
		}
	}
}

# Penglai return - no peach - EoC
narrative_event = {
	id = soh.9610
	title = EVTTITLE_SOH_9610
	desc = EVTDESC_SOH_9610
	picture = GFX_evt_chinese_mythology
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_9610 # Maybe I should launch an expedition...
		
		prestige = 500
		
		take_treasure_fleet_wealth_effect = yes
		
		hidden_tooltip = {
			mandate_boost_large_effect = yes
		}
	}
}

# Penglai return - no peach - vassals part of TF
narrative_event = {
	id = soh.9611
	title = EVTTITLE_SOH_9611
	desc = EVTDESC_SOH_9611
	picture = GFX_evt_chinese_mythology
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_9611 # The Dragon Throne seems interested...
		
		prestige = 100
		
		remove_trait = treasure_fleet_voyage
		
		e_china = {
			holder_scope = {
				character_event = { id = soh.9632 days = 1 } # Possible reward
			}
		}
	}
}

# Penglai return - no peach - vassals not part of TF
narrative_event = {
	id = soh.9612
	title = EVTTITLE_SOH_9612
	desc = EVTDESC_SOH_9612
	picture = GFX_evt_chinese_mythology
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_9612 # The Dragon Throne seems interested...
	}
}

# Penglai return - no peach - rest of the world
narrative_event = {
	id = soh.9613
	title = EVTTITLE_SOH_9613
	desc = EVTDESC_SOH_9613
	picture = GFX_evt_chinese_mythology
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			NOT = {
				government = chinese_imperial_government
			}
		}
		
		name = EVTOPTA_SOH_9613 # Interesting...
	}
	
	option = {
		trigger = {
			government = chinese_imperial_government
		}
		
		name = EVTOPTB_SOH_9613 # The Dragon Throne must be kept away!
		
		hidden_tooltip = {
			mandate_penalty_large_effect = yes
		}
	}
}

### Utter East return

# Utter East return - EoC
narrative_event = {
	id = soh.9614
	title = EVTTITLE_SOH_9614
	desc = EVTDESC_SOH_9614
	picture = GFX_evt_tropicana
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_9614 # They braved some dangers...
		
		prestige = 100
		
		take_treasure_fleet_wealth_effect = yes
		
		hidden_tooltip = {
			mandate_boost_medium_effect = yes
		}
	}
}

# Utter East return - vassals part of TF
narrative_event = {
	id = soh.9615
	title = EVTTITLE_SOH_9615
	desc = EVTDESC_SOH_9615
	picture = GFX_evt_tropicana
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_9615 # We survived, against all odds!
		
		prestige = 50
		
		remove_trait = treasure_fleet_voyage
		
		e_china = {
			holder_scope = {
				character_event = { id = soh.9633 days = 1 } # Possible reward
			}
		}
	}
}

# Utter East return - vassals not part of TF
narrative_event = {
	id = soh.9616
	title = EVTTITLE_SOH_9616
	desc = EVTDESC_SOH_9616
	picture = GFX_evt_tropicana
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_9616 # They braved some dangers...
	}
}

# Utter East return - rest of the world
narrative_event = {
	id = soh.9617
	title = EVTTITLE_SOH_9617
	desc = EVTDESC_SOH_9617
	picture = GFX_evt_tropicana
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			NOT = {
				government = chinese_imperial_government
			}
		}
		
		name = EVTOPTA_SOH_9617 # Interesting...
	}
	
	option = {
		trigger = {
			government = chinese_imperial_government
		}
		
		name = EVTOPTB_SOH_9617 # And here I was hoping it would sink...
		
		hidden_tooltip = {
			mandate_penalty_medium_effect = yes
		}
	}
}

### R'lyeh return

# R'lyeh return - EoC
narrative_event = {
	id = soh.9618
	title = EVTTITLE_SOH_9618
	desc = EVTDESC_SOH_9618
	picture = GFX_evt_lunatic
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_9618 # A tale of madmen!
		
		prestige = -100
		
		take_treasure_fleet_wealth_effect = yes
		
		hidden_tooltip = {
			mandate_penalty_small_effect = yes
		}
	}
}

# R'lyeh return - vassals part of TF
narrative_event = {
	id = soh.9619
	title = EVTTITLE_SOH_9619
	desc = EVTDESC_SOH_9619
	picture = GFX_evt_lunatic
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_9619 # It really happened!
		
		prestige = -100
		
		remove_trait = treasure_fleet_voyage
		
		e_china = {
			holder_scope = {
				character_event = { id = soh.9640 days = 1 } # Possible punishment
			}
		}
	}
}

# R'lyeh return - vassals not part of TF
narrative_event = {
	id = soh.9620
	title = EVTTITLE_SOH_9620
	desc = EVTDESC_SOH_9620
	picture = GFX_evt_lunatic
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_9620 # A tale of madmen!
	}
}

# R'lyeh return - rest of the world
narrative_event = {
	id = soh.9621
	title = EVTTITLE_SOH_9621
	desc = EVTDESC_SOH_9621
	picture = GFX_evt_lunatic
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			NOT = {
				government = chinese_imperial_government
			}
		}
		
		name = EVTOPTA_SOH_9621 # Interesting...
	}
	
	option = {
		trigger = {
			government = chinese_imperial_government
		}
		
		name = EVTOPTB_SOH_9621 # Not an auspicious ending...
		
		hidden_tooltip = {
			mandate_boost_small_effect = yes
		}
	}
}

### Atlantis return

# Atlantis return - EoC
narrative_event = {
	id = soh.9622
	title = EVTTITLE_SOH_9622
	desc = EVTDESC_SOH_9622
	picture = GFX_evt_hellenic_temple
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_9622 # A shame the island was lost...
		
		prestige = 100
		
		create_character = {
			female = 50
			culture = atlantean
			religion = hellenic_pagan
			dynasty = random
			age = 25
			random_traits = yes
			
			attributes = {
				diplomacy = 1
				martial = 5
				stewardship = 1
				intrigue = 1
				learning = 5
			}
		}
		
		create_character = {
			female = 50
			culture = atlantean
			religion = hellenic_pagan
			dynasty = random
			age = 30
			random_traits = yes
			
			attributes = {
				diplomacy = 1
				martial = 5
				stewardship = 1
				intrigue = 1
				learning = 5
			}
		}
		
		create_character = {
			female = 50
			culture = atlantean
			religion = hellenic_pagan
			dynasty = random
			age = 17
			random_traits = yes
			
			attributes = {
				diplomacy = 1
				martial = 5
				stewardship = 1
				intrigue = 1
				learning = 5
			}
		}
		
		take_treasure_fleet_wealth_effect = yes
		
		hidden_tooltip = {
			mandate_boost_medium_effect = yes
		}
	}
}

# Atlantis return - vassals part of TF
narrative_event = {
	id = soh.9623
	title = EVTTITLE_SOH_9623
	desc = EVTDESC_SOH_9623
	picture = GFX_evt_hellenic_temple
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_9623 # We did our best...
		
		prestige = 50
		
		remove_trait = treasure_fleet_voyage
		
		e_china = {
			holder_scope = {
				character_event = { id = soh.9634 days = 1 } # Possible reward
			}
		}
	}
}

# Atlantis return - vassals not part of TF
narrative_event = {
	id = soh.9624
	title = EVTTITLE_SOH_9624
	desc = EVTDESC_SOH_9624
	picture = GFX_evt_hellenic_temple
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_9624 # A shame the island was lost...
	}
}

# Atlantis return - rest of the world
narrative_event = {
	id = soh.9625
	title = EVTTITLE_SOH_9625
	desc = EVTDESC_SOH_9625
	picture = GFX_evt_hellenic_temple
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			NOT = {
				government = chinese_imperial_government
			}
		}
		
		name = EVTOPTA_SOH_9625 # Interesting...
	}
	
	option = {
		trigger = {
			government = chinese_imperial_government
		}
		
		name = EVTOPTB_SOH_9625 # A pity only the island sank...
		
		hidden_tooltip = {
			mandate_penalty_medium_effect = yes
		}
	}
}

### SI return

# SI return - EoC
narrative_event = {
	id = soh.9626
	title = EVTTITLE_SOH_9626
	desc = EVTDESC_SOH_9626
	picture = GFX_evt_aztec_arrival
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_9626 # Do you really expect me to believe this nonsense?
		
		prestige = -100
		
		take_treasure_fleet_wealth_effect = yes
		
		hidden_tooltip = {
			mandate_penalty_large_effect = yes
		}
	}
}

# SI return - vassals part of TF
narrative_event = {
	id = soh.9627
	title = EVTTITLE_SOH_9627
	desc = EVTDESC_SOH_9627
	picture = GFX_evt_aztec_arrival
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_9627 # They will come for us!
		
		prestige = -100
		
		remove_trait = treasure_fleet_voyage
		
		e_china = {
			holder_scope = {
				character_event = { id = soh.9641 days = 1 } # Possible punishment
			}
		}
	}
}

# SI return - vassals not part of TF
narrative_event = {
	id = soh.9628
	title = EVTTITLE_SOH_9628
	desc = EVTDESC_SOH_9628
	picture = GFX_evt_aztec_arrival
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_9628 # These tales can't be true... right?
	}
}

# SI return - rest of the world
narrative_event = {
	id = soh.9629
	title = EVTTITLE_SOH_9629
	desc = EVTDESC_SOH_9629
	picture = GFX_evt_aztec_arrival
	window = EventWindowOffmap
	background = GFX_event_window_news_from_china
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			NOT = {
				government = chinese_imperial_government
			}
		}
		
		name = EVTOPTA_SOH_9629 # Interesting...
	}
	
	option = {
		trigger = {
			government = chinese_imperial_government
		}
		
		name = EVTOPTB_SOH_9629 # A fantasy menace!
		
		hidden_tooltip = {
			mandate_boost_large_effect = yes
		}
	}
}



##### Rewards or punishments

### Rewards

# Reward TF member? - normal return
character_event = {
	id = soh.9630
	desc = EVTDESC_SOH_9630
	picture = GFX_evt_china_golden_age
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			wealth >= 200
		}
		
		name = EVTOPTA_SOH_9630 # FROM deserves some gold!
		
		wealth = -200
		
		FROM = {
			character_event = { id = soh.9635 } # Inform FROM
		}
		
		ai_chance = {
			trigger = {
				NOT = {
					trait = greedy
				}
			}
			
			factor = 100
			
			mult_modifier = {
				factor = 2
				trait = charitable
			}
			
			mult_modifier = {
				factor = 2
				trait = just
			}
		}
	}
	
	option = {
		trigger = {
			has_dlc = "Conclave"
			NOT = {
				owes_favor_to = FROM
			}
		}
		
		name = EVTOPTB_SOH_9630 # FROM deserves a Favor!
		
		FROM = {
			add_favor = ROOT
			
			character_event = { id = soh.9636 } # Inform FROM
		}
		
		ai_chance = {
			trigger = {
				NOR = {
					trait = paranoid
					is_rival = FROM
				}
			}
			
			factor = 100
			
			mult_modifier = {
				factor = 2
				trait = trusting
			}
		}
	}
	
	option = {
		trigger = {
			has_dlc = "Jade Dragon"
		}
		
		name = EVTOPTC_SOH_9630 # FROM deserves some Grace!
		
		FROM = {
			character_event = { id = soh.9637 } # Inform FROM
		}
		
		ai_chance = {
			trigger = {
				NOT = {
					trait = proud
				}
			}
			
			factor = 100
			
			mult_modifier = {
				factor = 2
				trait = humble
			}
			
			mult_modifier = {
				factor = 2
				trait = just
			}
		}
	}
	
	option = {
		trigger = {
			NAND = {
				wealth >= 200
				AND = {
					has_dlc = "Conclave"
					NOT = {
						owes_favor_to = FROM
					}
				}
				has_dlc = "Jade Dragon"
			}
			prestige >= 200
		}
		
		name = EVTOPTD_SOH_9630 # FROM deserves some recognition!
		
		prestige = -200
		
		FROM = {
			character_event = { id = soh.9638 } # Inform FROM
		}
		
		ai_chance = {
			trigger = {
				NOT = {
					trait = envious
				}
			}
			
			factor = 100
			
			mult_modifier = {
				factor = 2
				trait = humble
			}
			
			mult_modifier = {
				factor = 2
				trait = just
			}
		}
	}
	
	option = {
		name = EVTOPTE_SOH_9630 # FROM deserves nothing!
		
		FROM = {
			character_event = { id = soh.9639 } # Inform FROM
		}
		
		ai_chance = {
			trigger = {
				NOR = {
					is_friend = FROM
					is_lover = FROM
				}
			}
			
			factor = 100
			
			mult_modifier = {
				factor = 10
				is_rival = FROM
			}
			
			mult_modifier = {
				factor = 2
				trait = arbitrary
			}
		}
	}
}

# Reward TF member? - Penglai return - with peach
character_event = {
	id = soh.9631
	desc = EVTDESC_SOH_9631
	picture = GFX_evt_china_golden_age
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			wealth >= 200
		}
		
		name = EVTOPTA_SOH_9631 # FROM deserves some gold!
		
		wealth = -200
		
		FROM = {
			character_event = { id = soh.9635 } # Inform FROM
		}
		
		ai_chance = {
			trigger = {
				NOT = {
					trait = greedy
				}
			}
			
			factor = 100
			
			mult_modifier = {
				factor = 2
				trait = charitable
			}
			
			mult_modifier = {
				factor = 2
				trait = just
			}
		}
	}
	
	option = {
		trigger = {
			has_dlc = "Conclave"
			NOT = {
				owes_favor_to = FROM
			}
		}
		
		name = EVTOPTB_SOH_9631 # FROM deserves a Favor!
		
		FROM = {
			add_favor = ROOT
			
			character_event = { id = soh.9636 } # Inform FROM
		}
		
		ai_chance = {
			trigger = {
				NOR = {
					trait = paranoid
					is_rival = FROM
				}
			}
			
			factor = 100
			
			mult_modifier = {
				factor = 2
				trait = trusting
			}
		}
	}
	
	option = {
		trigger = {
			has_dlc = "Jade Dragon"
		}
		
		name = EVTOPTC_SOH_9631 # FROM deserves some Grace!
		
		FROM = {
			character_event = { id = soh.9637 } # Inform FROM
		}
		
		ai_chance = {
			trigger = {
				NOT = {
					trait = proud
				}
			}
			
			factor = 100
			
			mult_modifier = {
				factor = 2
				trait = humble
			}
			
			mult_modifier = {
				factor = 2
				trait = just
			}
		}
	}
	
	option = {
		trigger = {
			NAND = {
				wealth >= 200
				AND = {
					has_dlc = "Conclave"
					NOT = {
						owes_favor_to = FROM
					}
				}
				has_dlc = "Jade Dragon"
			}
			prestige >= 200
		}
		
		name = EVTOPTD_SOH_9631 # FROM deserves some recognition!
		
		prestige = -200
		
		FROM = {
			character_event = { id = soh.9638 } # Inform FROM
		}
		
		ai_chance = {
			trigger = {
				NOT = {
					trait = envious
				}
			}
			
			factor = 100
			
			mult_modifier = {
				factor = 2
				trait = humble
			}
			
			mult_modifier = {
				factor = 2
				trait = just
			}
		}
	}
	
	option = {
		name = EVTOPTE_SOH_9631 # FROM deserves nothing!
		
		FROM = {
			character_event = { id = soh.9639 } # Inform FROM
		}
		
		ai_chance = {
			trigger = {
				NOR = {
					is_friend = FROM
					is_lover = FROM
				}
			}
			
			factor = 100
			
			mult_modifier = {
				factor = 10
				is_rival = FROM
			}
			
			mult_modifier = {
				factor = 2
				trait = arbitrary
			}
		}
	}
}

# Reward TF member? - Penglai return - no peach
character_event = {
	id = soh.9632
	desc = EVTDESC_SOH_9632
	picture = GFX_evt_china_golden_age
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			wealth >= 200
		}
		
		name = EVTOPTA_SOH_9632 # FROM deserves some gold!
		
		wealth = -200
		
		FROM = {
			character_event = { id = soh.9635 } # Inform FROM
		}
		
		ai_chance = {
			trigger = {
				NOT = {
					trait = greedy
				}
			}
			
			factor = 100
			
			mult_modifier = {
				factor = 2
				trait = charitable
			}
			
			mult_modifier = {
				factor = 2
				trait = just
			}
		}
	}
	
	option = {
		trigger = {
			has_dlc = "Conclave"
			NOT = {
				owes_favor_to = FROM
			}
		}
		
		name = EVTOPTB_SOH_9632 # FROM deserves a Favor!
		
		FROM = {
			add_favor = ROOT
			
			character_event = { id = soh.9636 } # Inform FROM
		}
		
		ai_chance = {
			trigger = {
				NOR = {
					trait = paranoid
					is_rival = FROM
				}
			}
			
			factor = 100
			
			mult_modifier = {
				factor = 2
				trait = trusting
			}
		}
	}
	
	option = {
		trigger = {
			has_dlc = "Jade Dragon"
		}
		
		name = EVTOPTC_SOH_9632 # FROM deserves some Grace!
		
		FROM = {
			character_event = { id = soh.9637 } # Inform FROM
		}
		
		ai_chance = {
			trigger = {
				NOT = {
					trait = proud
				}
			}
			
			factor = 100
			
			mult_modifier = {
				factor = 2
				trait = humble
			}
			
			mult_modifier = {
				factor = 2
				trait = just
			}
		}
	}
	
	option = {
		trigger = {
			NAND = {
				wealth >= 200
				AND = {
					has_dlc = "Conclave"
					NOT = {
						owes_favor_to = FROM
					}
				}
				has_dlc = "Jade Dragon"
			}
			prestige >= 200
		}
		
		name = EVTOPTD_SOH_9632 # FROM deserves some recognition!
		
		prestige = -200
		
		FROM = {
			character_event = { id = soh.9638 } # Inform FROM
		}
		
		ai_chance = {
			trigger = {
				NOT = {
					trait = envious
				}
			}
			
			factor = 100
			
			mult_modifier = {
				factor = 2
				trait = humble
			}
			
			mult_modifier = {
				factor = 2
				trait = just
			}
		}
	}
	
	option = {
		name = EVTOPTE_SOH_9632 # FROM deserves nothing!
		
		FROM = {
			character_event = { id = soh.9639 } # Inform FROM
		}
		
		ai_chance = {
			trigger = {
				NOR = {
					is_friend = FROM
					is_lover = FROM
				}
			}
			
			factor = 100
			
			mult_modifier = {
				factor = 10
				is_rival = FROM
			}
			
			mult_modifier = {
				factor = 2
				trait = arbitrary
			}
		}
	}
}

# Reward TF member? - Utter East
character_event = {
	id = soh.9633
	desc = EVTDESC_SOH_9633
	picture = GFX_evt_china_golden_age
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			wealth >= 200
		}
		
		name = EVTOPTA_SOH_9633 # FROM deserves some gold!
		
		wealth = -200
		
		FROM = {
			character_event = { id = soh.9635 } # Inform FROM
		}
		
		ai_chance = {
			trigger = {
				NOT = {
					trait = greedy
				}
			}
			
			factor = 100
			
			mult_modifier = {
				factor = 2
				trait = charitable
			}
			
			mult_modifier = {
				factor = 2
				trait = just
			}
		}
	}
	
	option = {
		trigger = {
			has_dlc = "Conclave"
			NOT = {
				owes_favor_to = FROM
			}
		}
		
		name = EVTOPTB_SOH_9633 # FROM deserves a Favor!
		
		FROM = {
			add_favor = ROOT
			
			character_event = { id = soh.9636 } # Inform FROM
		}
		
		ai_chance = {
			trigger = {
				NOR = {
					trait = paranoid
					is_rival = FROM
				}
			}
			
			factor = 100
			
			mult_modifier = {
				factor = 2
				trait = trusting
			}
		}
	}
	
	option = {
		trigger = {
			has_dlc = "Jade Dragon"
		}
		
		name = EVTOPTC_SOH_9633 # FROM deserves some Grace!
		
		FROM = {
			character_event = { id = soh.9637 } # Inform FROM
		}
		
		ai_chance = {
			trigger = {
				NOT = {
					trait = proud
				}
			}
			
			factor = 100
			
			mult_modifier = {
				factor = 2
				trait = humble
			}
			
			mult_modifier = {
				factor = 2
				trait = just
			}
		}
	}
	
	option = {
		trigger = {
			NAND = {
				wealth >= 200
				AND = {
					has_dlc = "Conclave"
					NOT = {
						owes_favor_to = FROM
					}
				}
				has_dlc = "Jade Dragon"
			}
			prestige >= 200
		}
		
		name = EVTOPTD_SOH_9633 # FROM deserves some recognition!
		
		prestige = -200
		
		FROM = {
			character_event = { id = soh.9638 } # Inform FROM
		}
		
		ai_chance = {
			trigger = {
				NOT = {
					trait = envious
				}
			}
			
			factor = 100
			
			mult_modifier = {
				factor = 2
				trait = humble
			}
			
			mult_modifier = {
				factor = 2
				trait = just
			}
		}
	}
	
	option = {
		name = EVTOPTE_SOH_9633 # FROM deserves nothing!
		
		FROM = {
			character_event = { id = soh.9639 } # Inform FROM
		}
		
		ai_chance = {
			trigger = {
				NOR = {
					is_friend = FROM
					is_lover = FROM
				}
			}
			
			factor = 100
			
			mult_modifier = {
				factor = 10
				is_rival = FROM
			}
			
			mult_modifier = {
				factor = 2
				trait = arbitrary
			}
		}
	}
}

# Reward TF member? - Atlantis return
character_event = {
	id = soh.9634
	desc = EVTDESC_SOH_9634
	picture = GFX_evt_china_golden_age
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_9634 # FROM deserves some gold!
		
		wealth = -200
		
		FROM = {
			character_event = { id = soh.9635 } # Inform FROM
		}
		
		ai_chance = {
			trigger = {
				NOT = {
					trait = greedy
				}
			}
			
			factor = 100
			
			mult_modifier = {
				factor = 2
				trait = charitable
			}
			
			mult_modifier = {
				factor = 2
				trait = just
			}
			
			mult_modifier = {
				factor = 0.1
				wealth < 0
			}
		}
	}
	
	option = {
		trigger = {
			has_dlc = "Conclave"
			NOT = {
				owes_favor_to = FROM
			}
		}
		
		name = EVTOPTB_SOH_9634 # FROM deserves a Favor!
		
		FROM = {
			add_favor = ROOT
			
			character_event = { id = soh.9636 } # Inform FROM
		}
		
		ai_chance = {
			trigger = {
				NOR = {
					trait = paranoid
					is_rival = FROM
				}
			}
			
			factor = 100
			
			mult_modifier = {
				factor = 2
				trait = trusting
			}
		}
	}
	
	option = {
		trigger = {
			has_dlc = "Jade Dragon"
		}
		
		name = EVTOPTC_SOH_9634 # FROM deserves some Grace!
		
		FROM = {
			character_event = { id = soh.9637 } # Inform FROM
		}
		
		ai_chance = {
			trigger = {
				NOT = {
					trait = proud
				}
			}
			
			factor = 100
			
			mult_modifier = {
				factor = 2
				trait = humble
			}
			
			mult_modifier = {
				factor = 2
				trait = just
			}
		}
	}
	
	option = {
		trigger = {
			NAND = {
				AND = {
					has_dlc = "Conclave"
					NOT = {
						owes_favor_to = FROM
					}
				}
				has_dlc = "Jade Dragon"
			}
		}
		
		name = EVTOPTD_SOH_9634 # FROM deserves some recognition!
		
		prestige = -200
		
		FROM = {
			character_event = { id = soh.9638 } # Inform FROM
		}
		
		ai_chance = {
			trigger = {
				NOT = {
					trait = envious
				}
			}
			
			factor = 100
			
			mult_modifier = {
				factor = 2
				trait = humble
			}
			
			mult_modifier = {
				factor = 2
				trait = just
			}
		}
	}
	
	option = {
		name = EVTOPTE_SOH_9634 # FROM deserves nothing!
		
		FROM = {
			character_event = { id = soh.9639 } # Inform FROM
		}
		
		ai_chance = {
			trigger = {
				NOR = {
					is_friend = FROM
					is_lover = FROM
				}
			}
			
			factor = 100
			
			mult_modifier = {
				factor = 10
				is_rival = FROM
			}
			
			mult_modifier = {
				factor = 2
				trait = arbitrary
			}
		}
	}
}

# Rewarded with gold
character_event = {
	id = soh.9635
	desc = EVTDESC_SOH_9635
	picture = GFX_evt_china_diplomatic_success
	border = GFX_event_normal_frame_economy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_9635 # Excellent!
		
		wealth = 200
	}
}

# Rewarded with Favor
character_event = {
	id = soh.9636
	desc = EVTDESC_SOH_9636
	picture = GFX_evt_china_diplomatic_success
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_9636 # Excellent!
		
		add_favor = FROM
	}
}

# Rewarded with Grace
character_event = {
	id = soh.9637
	desc = EVTDESC_SOH_9637
	picture = GFX_evt_china_diplomatic_success
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_9637 # Excellent!
		
		add_grace_major_effect = yes
	}
}

# Rewarded with prestige
character_event = {
	id = soh.9638
	desc = EVTDESC_SOH_9638
	picture = GFX_evt_china_diplomatic_success
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_9638 # Excellent!
		
		prestige = 200
	}
}

# No reward
character_event = {
	id = soh.9639
	desc = EVTDESC_SOH_9639
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_9639 # Surely I deserve better!
		
		prestige = -50
		
		opinion = {
			who = FROM
			modifier = opinion_did_not_reward_me
		}
	}
}

### Punishment

# Punish TF member? - R'lyeh
character_event = {
	id = soh.9640
	desc = EVTDESC_SOH_9640
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_9640 # Imprison FROM!
		
		FROM = {
			imprison = ROOT
			character_event = { id = soh.9642 } # Inform FROM
		}
		
		ai_chance = {
			trigger = {
				NOR = {
					is_friend = FROM
					is_lover = FROM
				}
			}
			
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = trusting
			}
			
			mult_modifier = {
				factor = 0.1
				trait = kind
			}
			
			mult_modifier = {
				factor = 10
				is_rival = FROM
			}
			
			mult_modifier = {
				factor = 10
				trait = paranoid
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_9640 # Berate FROM!
		
		FROM = {
			character_event = { id = soh.9643 } # Inform FROM
		}
		
		ai_chance = {
			trigger = {
				NOR = {
					is_friend = FROM
					is_lover = FROM
				}
			}
			
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = shy
			}
			
			mult_modifier = {
				factor = 0.1
				trait = kind
			}
			
			mult_modifier = {
				factor = 2
				is_rival = FROM
			}
			
			mult_modifier = {
				factor = 10
				trait = gregarious
			}
			
			mult_modifier = {
				factor = 5
				trait = cruel
			}
		}
	}
	
	option = {
		name = EVTOPTC_SOH_9640 # Have FROM watched!
		
		FROM = {
			character_event = { id = soh.9644 } # Inform FROM
		}
		
		ai_chance = {
			trigger = {
				NOR = {
					is_friend = FROM
					is_lover = FROM
				}
			}
			
			factor = 100
			
			mult_modifier = {
				factor = 2
				trait = paranoid
			}
			
			mult_modifier = {
				factor = 0.1
				trait = trusting
			}
		}
	}
	
	option = {
		name = EVTOPTD_SOH_9640 # I'll do nothing...
		
		prestige = -50
		
		FROM = {
			character_event = { id = soh.9645 } # Inform FROM
		}
		
		ai_chance = {
			trigger = {
				NOT = {
					is_rival = FROM
				}
			}
			
			factor = 100
			
			mult_modifier = {
				factor = 0.5
				trait = proud
			}
			
			mult_modifier = {
				factor = 0.1
				trait = wroth
			}
		}
	}
}

# Punish TF member? - SI
character_event = {
	id = soh.9641
	desc = EVTDESC_SOH_9641
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_9641 # Imprison FROM!
		
		FROM = {
			imprison = ROOT
			character_event = { id = soh.9642 } # Inform FROM
		}
		
		ai_chance = {
			trigger = {
				NOR = {
					is_friend = FROM
					is_lover = FROM
				}
			}
			
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = trusting
			}
			
			mult_modifier = {
				factor = 0.1
				trait = kind
			}
			
			mult_modifier = {
				factor = 10
				is_rival = FROM
			}
			
			mult_modifier = {
				factor = 10
				trait = paranoid
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_9641 # Berate FROM!
		
		FROM = {
			character_event = { id = soh.9643 } # Inform FROM
		}
		
		ai_chance = {
			trigger = {
				NOR = {
					is_friend = FROM
					is_lover = FROM
				}
			}
			
			factor = 100
			
			mult_modifier = {
				factor = 0.1
				trait = shy
			}
			
			mult_modifier = {
				factor = 0.1
				trait = kind
			}
			
			mult_modifier = {
				factor = 2
				is_rival = FROM
			}
			
			mult_modifier = {
				factor = 10
				trait = gregarious
			}
			
			mult_modifier = {
				factor = 5
				trait = cruel
			}
		}
	}
	
	option = {
		name = EVTOPTC_SOH_9641 # Have FROM watched!
		
		FROM = {
			character_event = { id = soh.9644 } # Inform FROM
		}
		
		ai_chance = {
			trigger = {
				NOR = {
					is_friend = FROM
					is_lover = FROM
				}
			}
			
			factor = 100
			
			mult_modifier = {
				factor = 2
				trait = paranoid
			}
			
			mult_modifier = {
				factor = 0.1
				trait = trusting
			}
		}
	}
	
	option = {
		name = EVTOPTD_SOH_9641 # I'll do nothing...
		
		prestige = -50
		
		FROM = {
			character_event = { id = soh.9645 } # Inform FROM
		}
		
		ai_chance = {
			trigger = {
				NOT = {
					is_rival = FROM
				}
			}
			
			factor = 100
			
			mult_modifier = {
				factor = 0.5
				trait = proud
			}
			
			mult_modifier = {
				factor = 0.1
				trait = wroth
			}
		}
	}
}

# Imprisonment
character_event = {
	id = soh.9642
	desc = EVTDESC_SOH_9642
	picture = GFX_evt_into_the_dungeon
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_9642 # Curses!
	}
}

# Loss of prestige
character_event = {
	id = soh.9643
	desc = EVTDESC_SOH_9643
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_9643 # Curses!
		
		prestige = -200
		
		opinion = {
			who = FROM
			modifier = opinion_berated_me
		}
	}
}

# Under suspicion
character_event = {
	id = soh.9644
	desc = EVTDESC_SOH_9644
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_9644 # Curses!
		
		increase_visibility_effect = yes
	}
}

# No punishment
character_event = {
	id = soh.9645
	desc = EVTDESC_SOH_9645
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_9645 # Phew!
		
		opinion = {
			who = FROM
			modifier = opinion_did_not_blame_me
		}
	}
}



##### Cleanup

# Cleanup event
province_event = {
	id = soh.9646
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		clean_up_treasure_fleet_effect = yes
		
		set_global_flag = treasure_fleet_has_returned
	}
}