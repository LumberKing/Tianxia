# Chinese law events
# By Silverswee(e)per

namespace = soh

# soh.4501-4700 reserved

##### Initial setup for requests

# on_bi_yearly_pulse, decide if someone maybe should try to make a law change happen
character_event = {
	id = soh.4501
	hide_window = yes
	
	is_triggered_only = yes
	
	has_dlc = "Jade Dragon"
	has_dlc = "Conclave"
	
	only_independent = yes
	only_playable = yes
	
	min_age = 16
	only_capable = yes
	prisoner = no
	
	trigger = {
		tier = emperor
		OR = {
			government = chinese_imperial_government
			government = eastern_imperial_government
		}
		NOR = {
			has_character_modifier = ci_nuclear_option_in_effect
			has_character_modifier = ci_infighting_ongoing
		}
		has_regent = no
		primary_title = {
			NAND = { # Not if we already are in the worst possible spot
				has_law = eunuch_law_4
				has_law = grand_chancellor_law_2
				has_law = ci_courtier_law_4
				has_law = ci_vassal_law_4
			}
		}
	}
	
	immediate = {
		# See if something might happen
		random_list = {
			50 = {
				# Nothing happens
				modifier = {
					factor = 5
					has_character_modifier = mandate_of_heaven_5
				}
				modifier = {
					factor = 2
					has_character_modifier = mandate_of_heaven_4
				}
			}
			50 = {
				# Someone might get uppity
				modifier = {
					factor = 2
					has_character_modifier = mandate_of_heaven_2
				}
				modifier = {
					factor = 5
					has_character_modifier = mandate_of_heaven_1
				}
				random_list = {
					50 = {
						# Nothing
					}
					25 = {
						modifier = {
							factor = 0 # Maxed out
							primary_title = {
								has_law = eunuch_law_4
							}
						}
						modifier = {
							factor = 0
							has_character_modifier = recently_approached_by_eunuchs
						}
						character_event = { id = soh.4502 } # Eunuch - real character or not
					}
					25 = {
						modifier = {
							factor = 0 # Maxed out
							primary_title = {
								has_law = grand_chancellor_law_2
							}
						}
						modifier = {
							factor = 0
							NOT = {
								any_vassal = {
									has_minor_title = title_grand_chancellor
								}
							}
						}
						modifier = {
							factor = 0
							has_character_modifier = recently_approached_by_grand_chancellor
						}
						character_event = { id = soh.4503 } # Grand Chancellor
					}
					25 = {
						modifier = {
							factor = 0 # Maxed out
							primary_title = {
								has_law = ci_courtier_law_4
							}
						}
						modifier = {
							factor = 0
							has_character_modifier = recently_approached_by_ci_courtier
						}
						character_event = { id = soh.4504 } # Courtier - voter, spouse, consort, parent/grandparent
					}
					25 = {
						modifier = {
							factor = 0 # Maxed out
							primary_title = {
								has_law = ci_vassal_law_4
							}
						}
						modifier = {
							factor = 0
							has_character_modifier = recently_approached_by_ci_vassal
						}
						character_event = { id = soh.4505 } # Vassal - voter or powerful vassal
					}
				}
			}
		}
	}
}

# Eunuch selection - is there a sensible eunuch?
character_event = {
	id = soh.4502
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		clr_character_flag = actual_eunuch_for_ci_law_event
		clr_character_flag = fake_eunuch_for_ci_law_event
		if = {
			limit = {
				any_voter = {
					is_council_eunuch_trigger = yes
					NOT = {
						has_position = loyalist
					}
				}
			}
			random_voter = {
				limit = {
					is_council_eunuch_trigger = yes
					NOT = {
						has_position = loyalist
					}
				}
				preferred_limit = {
					OR = {
						any_rival = {
							character = ROOT
						}
						has_position = malcontent
						NOT = {
							opinion = {
								who = ROOT
								value = -25
							}
						}
						trait = ambitious
						trait = envious
						trait = schemer
						trait = greedy
						trait = arbitrary
					}
					NOR = {
						trait = content
						trait = slothful
						trait = just
					}
					NOR = {
						any_friend = {
							character = ROOT
						}
						any_lover = {
							character = ROOT
						}
					}
				}
				preferred_limit = {
					OR = {
						any_rival = {
							character = ROOT
						}
						has_position = malcontent
						NOT = {
							opinion = {
								who = ROOT
								value = -25
							}
						}
						trait = ambitious
						trait = envious
						trait = schemer
						trait = greedy
						trait = arbitrary
					}
					NOR = {
						any_friend = {
							character = ROOT
						}
						any_lover = {
							character = ROOT
						}
					}
				}
				preferred_limit = {
					OR = {
						any_rival = {
							character = ROOT
						}
						has_position = malcontent
						NOT = {
							opinion = {
								who = ROOT
								value = -25
							}
						}
						trait = ambitious
						trait = envious
						trait = schemer
						trait = greedy
						trait = arbitrary
					}
					NOR = {
						trait = content
						trait = slothful
						trait = just
					}
				}
				preferred_limit = {
					OR = {
						any_rival = {
							character = ROOT
						}
						has_position = malcontent
						NOT = {
							opinion = {
								who = ROOT
								value = -25
							}
						}
						trait = ambitious
						trait = envious
						trait = schemer
						trait = greedy
						trait = arbitrary
					}
				}
				save_event_target_as = chosen_eunuch
				ROOT = {
					set_character_flag = actual_eunuch_for_ci_law_event
				}
				character_event = { id = soh.4506 } # Eunuch decides whether to approach liege
			}
		}
		else_if = {
			limit = {
				any_courtier = {
					trait = eunuch
					is_voter = no
					prisoner = no
					is_adult = yes
					NOT = {
						dynasty = ROOT
					}
					is_inaccessible_or_incapable_trigger = no
				}
			}
			random_courtier = {
				limit = {
					trait = eunuch
					is_voter = no
					prisoner = no
					is_adult = yes
					NOT = {
						dynasty = ROOT
					}
					is_inaccessible_or_incapable_trigger = no
				}
				preferred_limit = {
					OR = {
						any_rival = {
							character = ROOT
						}
						NOT = {
							opinion = {
								who = ROOT
								value = -25
							}
						}
						trait = ambitious
						trait = envious
						trait = schemer
						trait = greedy
						trait = arbitrary
					}
					NOR = {
						trait = content
						trait = slothful
						trait = just
					}
					NOR = {
						any_friend = {
							character = ROOT
						}
						any_lover = {
							character = ROOT
						}
					}
				}
				preferred_limit = {
					OR = {
						any_rival = {
							character = ROOT
						}
						NOT = {
							opinion = {
								who = ROOT
								value = -25
							}
						}
						trait = ambitious
						trait = envious
						trait = schemer
						trait = greedy
						trait = arbitrary
					}
					NOR = {
						any_friend = {
							character = ROOT
						}
						any_lover = {
							character = ROOT
						}
					}
				}
				preferred_limit = {
					OR = {
						any_rival = {
							character = ROOT
						}
						NOT = {
							opinion = {
								who = ROOT
								value = -25
							}
						}
						trait = ambitious
						trait = envious
						trait = schemer
						trait = greedy
						trait = arbitrary
					}
					NOR = {
						trait = content
						trait = slothful
						trait = just
					}
				}
				preferred_limit = {
					OR = {
						any_rival = {
							character = ROOT
						}
						NOT = {
							opinion = {
								who = ROOT
								value = -25
							}
						}
						trait = ambitious
						trait = envious
						trait = schemer
						trait = greedy
						trait = arbitrary
					}
				}
				save_event_target_as = chosen_eunuch
				ROOT = {
					set_character_flag = actual_eunuch_for_ci_law_event
				}
				character_event = { id = soh.4506 } # Eunuch decides whether to approach liege
			}
		}
		else = {
			random = {
				chance = 50 # Not guaranteed
				set_character_flag = fake_eunuch_for_ci_law_event
				character_event = { id = soh.4507 } # Fake eunuch approaches liege
			}
		}
	}
}

# Grand Chancellor - would they maybe try?
character_event = {
	id = soh.4503
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				any_voter = {
					has_minor_title = title_grand_chancellor
					OR = {
						any_rival = {
							character = ROOT
						}
						has_position = malcontent
						NOT = {
							opinion = {
								who = ROOT
								value = -25
							}
						}
						trait = ambitious
						trait = envious
						trait = schemer
						trait = greedy
						trait = arbitrary
					}
					#NOR = {
					#	trait = content
					#	trait = slothful
					#	trait = just
					#}
					NOT = {
						has_position = loyalist
					}
					#NOR = {
					#	any_friend = {
					#		character = ROOT
					#	}
					#	any_lover = {
					#		character = ROOT
					#	}
					#}
				}
			}
			any_voter = {
				limit = {
					has_minor_title = title_grand_chancellor
				}
				save_event_target_as = grand_chancellor
				character_event = { id = soh.4540 } # Grand chancellor gets event
			}
		}
	}
}

# Courtier selection
character_event = {
	id = soh.4504
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		random_courtier = {
			limit = {
				is_adult = yes
				prisoner = no
				is_council_eunuch_trigger = no
				NAND = {
					dynasty = ROOT
					any_close_relative = {
						character = ROOT
					}
				}
				OR = {
					AND = {
						is_voter = yes
						NOT = {
							has_position = loyalist
						}
					}
					any_spouse = {
						character = ROOT
					}
					any_consort = {
						character = ROOT
					}
					any_child = {
						character = ROOT
					}
					any_child_even_if_dead = {
						any_child = {
							character = ROOT
						}
					}
				}
			}
			preferred_limit = {
				OR = {
					any_rival = {
						character = ROOT
					}
					AND = {
						is_voter = yes
						has_position = malcontent
					}
					NOT = {
						opinion = {
							who = ROOT
							value = -25
						}
					}
					trait = ambitious
					trait = envious
					trait = schemer
					trait = greedy
					trait = arbitrary
				}
				NOR = {
					trait = content
					trait = slothful
					trait = just
				}
				NOR = {
					any_friend = {
						character = ROOT
					}
					any_lover = {
						character = ROOT
					}
				}
			}
			preferred_limit = {
				OR = {
					any_rival = {
						character = ROOT
					}
					AND = {
						is_voter = yes
						has_position = malcontent
					}
					NOT = {
						opinion = {
							who = ROOT
							value = -25
						}
					}
					trait = ambitious
					trait = envious
					trait = schemer
					trait = greedy
					trait = arbitrary
				}
				NOR = {
					any_friend = {
						character = ROOT
					}
					any_lover = {
						character = ROOT
					}
				}
			}
			preferred_limit = {
				OR = {
					any_rival = {
						character = ROOT
					}
					AND = {
						is_voter = yes
						has_position = malcontent
					}
					NOT = {
						opinion = {
							who = ROOT
							value = -25
						}
					}
					trait = ambitious
					trait = envious
					trait = schemer
					trait = greedy
					trait = arbitrary
				}
				NOR = {
					trait = content
					trait = slothful
					trait = just
				}
			}
			preferred_limit = {
				OR = {
					any_rival = {
						character = ROOT
					}
					AND = {
						is_voter = yes
						has_position = malcontent
					}
					NOT = {
						opinion = {
							who = ROOT
							value = -25
						}
					}
					trait = ambitious
					trait = envious
					trait = schemer
					trait = greedy
					trait = arbitrary
				}
			}
			save_event_target_as = chosen_courtier
			character_event = { id = soh.4583 } # Courtier decides whether to approach liege
		}
	}
}

# Vassal selection
character_event = {
	id = soh.4505
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		random_vassal = {
			limit = {
				is_landed = yes
				is_adult = yes
				prisoner = no
				higher_tier_than = baron
				NAND = {
					dynasty = ROOT
					any_close_relative = {
						character = ROOT
					}
				}
				OR = {
					AND = {
						is_voter = yes
						NOT = {
							has_position = loyalist
						}
					}
					is_powerful_vassal = yes
				}
			}
			preferred_limit = {
				OR = {
					any_rival = {
						character = ROOT
					}
					AND = {
						is_voter = yes
						has_position = malcontent
					}
					NOT = {
						opinion = {
							who = ROOT
							value = -25
						}
					}
					trait = ambitious
					trait = envious
					trait = schemer
					trait = greedy
					trait = arbitrary
				}
				NOR = {
					trait = content
					trait = slothful
					trait = just
				}
				NOR = {
					any_friend = {
						character = ROOT
					}
					any_lover = {
						character = ROOT
					}
				}
			}
			preferred_limit = {
				OR = {
					any_rival = {
						character = ROOT
					}
					AND = {
						is_voter = yes
						has_position = malcontent
					}
					NOT = {
						opinion = {
							who = ROOT
							value = -25
						}
					}
					trait = ambitious
					trait = envious
					trait = schemer
					trait = greedy
					trait = arbitrary
				}
				NOR = {
					any_friend = {
						character = ROOT
					}
					any_lover = {
						character = ROOT
					}
				}
			}
			preferred_limit = {
				OR = {
					any_rival = {
						character = ROOT
					}
					AND = {
						is_voter = yes
						has_position = malcontent
					}
					NOT = {
						opinion = {
							who = ROOT
							value = -25
						}
					}
					trait = ambitious
					trait = envious
					trait = schemer
					trait = greedy
					trait = arbitrary
				}
				NOR = {
					trait = content
					trait = slothful
					trait = just
				}
			}
			preferred_limit = {
				OR = {
					any_rival = {
						character = ROOT
					}
					AND = {
						is_voter = yes
						has_position = malcontent
					}
					NOT = {
						opinion = {
							who = ROOT
							value = -25
						}
					}
					trait = ambitious
					trait = envious
					trait = schemer
					trait = greedy
					trait = arbitrary
				}
			}
			save_event_target_as = chosen_vassal
			character_event = { id = soh.4618 } # Vassal decides whether to approach liege
		}
	}
}



##### Eunuch does his thing

### Approaching liege

# Do you want to approach your liege?
character_event = {
	id = soh.4506
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		random_list = {
			50 = {
				modifier = {
					factor = 0.01
					OR = {
						any_friend = {
							character = FROM
						}
						any_lover = {
							character = FROM
						}
					}
				}
				modifier = {
					factor = 0
					trait = content
					NOR = {
						any_rival = {
							character = FROM
						}
						NOT = {
							opinion = {
								who = FROM
								value = 25
							}
						}
					}
				}
				modifier = {
					factor = 10
					has_position = malcontent
				}
				modifier = {
					factor = 5
					trait = envious
				}
				modifier = {
					factor = 5
					trait = schemer
				}
				modifier = {
					factor = 2
					trait = greedy
				}
				modifier = {
					factor = 2
					trait = arbitrary
				}
				modifier = {
					factor = 10
					trait = ambitious
				}
				modifier = {
					factor = 0.2
					trait = just
				}
				modifier = {
					factor = 0.5
					trait = slothful
				}
				FROM = {
					character_event = { id = soh.4507 } # Liege approached
				}
			}
			50 = {
				modifier = {
					factor = 0.001
					any_rival = {
						character = FROM
					}
				}
				modifier = {
					factor = 10
					trait = content
				}
				modifier = {
					factor = 0.1
					NOT = {
						opinion = {
							who = FROM
							value = -25
						}
					}
				}
				# Eunuch decides against it
			}
		}
	}
}

# Liege is approached
character_event = {
	id = soh.4507
	desc = {
		text = EVTDESC_SOH_4507_A
		trigger = {
			has_character_flag = actual_eunuch_for_ci_law_event
		}
	}
	desc = {
		text = EVTDESC_SOH_4507_B
		trigger = {
			has_character_flag = fake_eunuch_for_ci_law_event
		}
	}
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	immediate = {
		add_character_modifier = {
			modifier = recently_approached_by_eunuchs
			years = 10
		}
		clr_character_flag = ci_law_imperial_guards
		clr_character_flag = ci_law_grant_favor
		clr_character_flag = ci_law_cancel_favor
		clr_character_flag = ci_law_fire_rival
		clr_character_flag = ci_law_prestige
		clr_character_flag = ci_law_bribe
		clr_character_flag = ci_law_diplomacy
		clr_character_flag = ci_law_intrigue
		# Pick up to two special approaches
		random_list = {
			10 = {
				modifier = {
					factor = 0
					is_chinese_emperor_trigger = no # Only for the EoC, and only if CI!
				}
				modifier = {
					factor = 0
					primary_title = {
						has_law = eunuch_law_0 # Irrelevant
					}
				}
				modifier = {
					factor = 0.1
					primary_title = {
						has_law = eunuch_law_1 # Would be mostly harmless
					}
				}
				modifier = {
					factor = 0
					NOR = {
						d_yulin_guard = {
							NOT = {
								has_title_flag = eunuchs_in_control
							}
							holder_scope = {
								liege = {
									character = ROOT
								}
							}
						}
						d_longwu_guard = {
							NOT = {
								has_title_flag = eunuchs_in_control
							}
							holder_scope = {
								liege = {
									character = ROOT
								}
							}
						}
						d_shenwu_guard = {
							NOT = {
								has_title_flag = eunuchs_in_control
							}
							holder_scope = {
								liege = {
									character = ROOT
								}
							}
						}
						d_shence_guard = {
							NOT = {
								has_title_flag = eunuchs_in_control
							}
							holder_scope = {
								liege = {
									character = ROOT
								}
							}
						}
						d_pengri_guard = {
							NOT = {
								has_title_flag = eunuchs_in_control
							}
							holder_scope = {
								liege = {
									character = ROOT
								}
							}
						}
						d_tianwu_guard = {
							NOT = {
								has_title_flag = eunuchs_in_control
							}
							holder_scope = {
								liege = {
									character = ROOT
								}
							}
						}
						d_longwei_guard = {
							NOT = {
								has_title_flag = eunuchs_in_control
							}
							holder_scope = {
								liege = {
									character = ROOT
								}
							}
						}
						d_shenwei_guard = {
							NOT = {
								has_title_flag = eunuchs_in_control
							}
							holder_scope = {
								liege = {
									character = ROOT
								}
							}
						}
					}
				}
				set_character_flag = ci_law_imperial_guards
			}
			10 = {
				modifier = {
					factor = 0
					NOT = {
						has_character_flag = actual_eunuch_for_ci_law_event # Nothing would happen...
					}
				}
				modifier = {
					factor = 0
					owes_favor_to = FROM # Can't
				}
				set_character_flag = ci_law_grant_favor
			}
			10 = {
				modifier = {
					factor = 0
					NOT = {
						has_character_flag = actual_eunuch_for_ci_law_event # Nothing would happen...
					}
				}
				modifier = {
					factor = 0
					holds_favor_on = FROM # Can't
				}
				set_character_flag = ci_law_cancel_favor
			}
			10 = {
				modifier = {
					factor = 0
					NOT = {
						has_character_flag = actual_eunuch_for_ci_law_event # Nothing would happen...
					}
				}
				modifier = {
					factor = 0
					NOT = {
						any_voter = {
							NOT = {
								has_minor_title = title_grand_chancellor
							}
							OR = {
								any_rival = {
									character = FROM
								}
								NOT = {
									reverse_opinion = {
										who = FROM
										value = -50
									}
								}
							}
						}
					}
				}
				set_character_flag = ci_law_fire_rival
				random_voter = {
					limit = {
						NOT = {
							has_minor_title = title_grand_chancellor
						}
						OR = {
							any_rival = {
								character = FROM
							}
							NOT = {
								reverse_opinion = {
									who = FROM
									value = -50
								}
							}
						}
					}
					preferred_limit = {
						NOR = {
							any_friend = {
								character = ROOT
							}
							any_lover = {
								character = ROOT
							}
						}
					}
					save_event_target_as = councillor_to_fire
				}
			}
			20 = {
				# Nothing
			}
		}
		random_list = {
			10 = {
				modifier = {
					factor = 0
					NOR = {
						prestige = 1000
						AND = {
							learning = 20
							prestige = 500
						}
					}
				}
				set_character_flag = ci_law_prestige
			}
			10 = {
				modifier = {
					factor = 0
					NOR = {
						wealth = 1000
						AND = {
							stewardship = 20
							wealth = 500
						}
					}
				}
				set_character_flag = ci_law_bribe
			}
			10 = {
				modifier = {
					factor = 0.1
					NOT = {
						diplomacy = 10
					}
				}
				set_character_flag = ci_law_diplomacy
			}
			10 = {
				modifier = {
					factor = 0.1
					NOT = {
						intrigue = 10
					}
				}
				set_character_flag = ci_law_intrigue
			}
			20 = {
				# Nothing
			}
		}
	}
	
	option = {
		name = EVTOPTA_SOH_4507 # You make a good case!
		
		if = {
			limit = {
				primary_title = {
					has_law = eunuch_law_0
				}
			}
			primary_title = {
				add_law_w_cooldown = eunuch_law_1
			}
		}
		else_if = {
			limit = {
				primary_title = {
					has_law = eunuch_law_1
				}
			}
			primary_title = {
				add_law_w_cooldown = eunuch_law_2
			}
		}
		else_if = {
			limit = {
				primary_title = {
					has_law = eunuch_law_2
				}
			}
			primary_title = {
				add_law_w_cooldown = eunuch_law_3
			}
		}
		else_if = {
			limit = {
				primary_title = {
					has_law = eunuch_law_3
				}
			}
			primary_title = {
				add_law_w_cooldown = eunuch_law_4
			}
		}
		character_event = { id = eunuch.1 } # Generate council eunuchs
		
		any_realm_lord = {
			limit = {
				ai = no
			}
			character_event = { id = soh.4654 } # Inform player lords
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.1
				has_character_flag = fake_eunuch_for_ci_law_event
			}
			modifier = {
				factor = 0.5
				has_law = eunuch_law_1
			}
			modifier = {
				factor = 0.2
				has_law = eunuch_law_2
			}
			modifier = {
				factor = 0.01
				has_law = eunuch_law_3
			}
			modifier = {
				factor = 0.01
				trait = proud
			}
			modifier = {
				factor = 0.01
				trait = ambitious
			}
			modifier = {
				factor = 0.01
				any_rival = {
					character = FROM
				}
			}
			modifier = {
				factor = 10
				trait = slothful
			}
			modifier = {
				factor = 5
				trait = content
			}
			modifier = {
				factor = 10
				trait = trusting
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 2
				OR = {
					any_friend = {
						character = FROM
					}
					any_lover = {
						character = FROM
					}
				}
			}
			modifier = {
				factor = 10
				is_dumb_trigger = yes
			}
			modifier = {
				factor = 0.1
				has_character_modifier = mandate_of_heaven_5
			}
			modifier = {
				factor = 0.2
				has_character_modifier = mandate_of_heaven_4
			}
			modifier = {
				factor = 0.5
				has_character_modifier = mandate_of_heaven_3
			}
		}
	}
	
	option = {
		trigger = {
			has_character_flag = ci_law_imperial_guards
		}
		name = EVTOPTB_SOH_4507 # I'll give you command of a guard regiment instead!
		
		custom_tooltip = {
			text = eunuchs_get_a_guard_regiment
			random_list = {
				10 = {
					modifier = {
						factor = 0
						NOT = {
							d_yulin_guard = {
								NOT = {
									has_title_flag = eunuchs_in_control
								}
								holder_scope = {
									liege = {
										character = ROOT
									}
								}
							}
						}
					}
					d_yulin_guard = {
						set_title_flag = eunuchs_in_control
					}
				}
				10 = {
					modifier = {
						factor = 0
						NOT = {
							d_longwu_guard = {
								NOT = {
									has_title_flag = eunuchs_in_control
								}
								holder_scope = {
									liege = {
										character = ROOT
									}
								}
							}
						}
					}
					d_longwu_guard = {
						set_title_flag = eunuchs_in_control
					}
				}
				10 = {
					modifier = {
						factor = 0
						NOT = {
							d_shenwu_guard = {
								NOT = {
									has_title_flag = eunuchs_in_control
								}
								holder_scope = {
									liege = {
										character = ROOT
									}
								}
							}
						}
					}
					d_shenwu_guard = {
						set_title_flag = eunuchs_in_control
					}
				}
				10 = {
					modifier = {
						factor = 0
						NOT = {
							d_shence_guard = {
								NOT = {
									has_title_flag = eunuchs_in_control
								}
								holder_scope = {
									liege = {
										character = ROOT
									}
								}
							}
						}
					}
					d_shence_guard = {
						set_title_flag = eunuchs_in_control
					}
				}
				10 = {
					modifier = {
						factor = 0
						NOT = {
							d_pengri_guard = {
								NOT = {
									has_title_flag = eunuchs_in_control
								}
								holder_scope = {
									liege = {
										character = ROOT
									}
								}
							}
						}
					}
					d_pengri_guard = {
						set_title_flag = eunuchs_in_control
					}
				}
				10 = {
					modifier = {
						factor = 0
						NOT = {
							d_tianwu_guard = {
								NOT = {
									has_title_flag = eunuchs_in_control
								}
								holder_scope = {
									liege = {
										character = ROOT
									}
								}
							}
						}
					}
					d_tianwu_guard = {
						set_title_flag = eunuchs_in_control
					}
				}
				10 = {
					modifier = {
						factor = 0
						NOT = {
							d_longwei_guard = {
								NOT = {
									has_title_flag = eunuchs_in_control
								}
								holder_scope = {
									liege = {
										character = ROOT
									}
								}
							}
						}
					}
					d_longwei_guard = {
						set_title_flag = eunuchs_in_control
					}
				}
				10 = {
					modifier = {
						factor = 0
						NOT = {
							d_shenwei_guard = {
								NOT = {
									has_title_flag = eunuchs_in_control
								}
								holder_scope = {
									liege = {
										character = ROOT
									}
								}
							}
						}
					}
					d_shenwei_guard = {
						set_title_flag = eunuchs_in_control
					}
				}
			}
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.01
				trait = proud
			}
			modifier = {
				factor = 0.01
				trait = ambitious
			}
			modifier = {
				factor = 0.01
				trait = paranoid
			}
			modifier = {
				factor = 0.01
				any_rival = {
					character = FROM
				}
			}
			modifier = {
				factor = 5
				trait = content
			}
			modifier = {
				factor = 10
				trait = trusting
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 10
				is_dumb_trigger = yes
			}
			modifier = {
				factor = 0.1
				has_character_modifier = mandate_of_heaven_5
			}
			modifier = {
				factor = 0.2
				has_character_modifier = mandate_of_heaven_4
			}
			modifier = {
				factor = 0.5
				has_character_modifier = mandate_of_heaven_3
			}
			modifier = {
				factor = 0.1
				has_education_martial_trigger = yes
			}
			modifier = {
				factor = 0.2
				has_lifestyle_martial_trigger = yes
			}
			modifier = {
				factor = 0.01
				war = yes
			}
		}
	}
		
	option = {
		trigger = {
			has_character_flag = ci_law_grant_favor
		}
		name = EVTOPTC_SOH_4507 # Forget about this and I'll grant you a Favor!
		
		FROM = {
			add_favor = ROOT
		}
				
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.01
				trait = paranoid
			}
			modifier = {
				factor = 0.01
				any_rival = {
					character = FROM
				}
			}
			modifier = {
				factor = 5
				trait = content
			}
			modifier = {
				factor = 10
				trait = trusting
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 2
				OR = {
					any_friend = {
						character = FROM
					}
					any_lover = {
						character = FROM
					}
				}
			}
			modifier = {
				factor = 10
				is_dumb_trigger = yes
			}
		}
	}
		
	option = {
		trigger = {
			has_character_flag = ci_law_cancel_favor
		}
		name = EVTOPTD_SOH_4507 # You owe me; forget all about this and we're even!
		
		remove_favor = FROM
				
		ai_chance = {
			factor = 100
		}
	}
	
	option = {
		trigger = {
			has_character_flag = ci_law_fire_rival
		}
		name = EVTOPTE_SOH_4507 # Forget about this, and your rival will be fired!
		
		event_target:councillor_to_fire = {
			character_event = { id = soh.4508 } # Inform the fired councillor
			fire_councillor_effect = yes
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 100
				event_target:councillor_to_fire = {
					any_rival = {
						character = ROOT
					}
				}
			}
			modifier = {
				factor = 10
				event_target:councillor_to_fire = {
					has_position = malcontent
				}
			}
			modifier = {
				factor = 0.1
				event_target:councillor_to_fire = {
					has_position = loyalist
				}
			}
			modifier = {
				factor = 0.01
				event_target:councillor_to_fire = {
					OR = {
						any_friend = {
							character = ROOT
						}
						any_lover = {
							character = ROOT
						}
					}
				}
				NOT = {
					trait = arbitrary
				}
			}
			modifier = {
				factor = 0.01
				any_rival = {
					character = FROM
				}
			}
			modifier = {
				factor = 0.2
				event_target:councillor_to_fire = {
					is_powerful_vassal = yes
				}
			}
			modifier = {
				factor = 0.1
				has_character_modifier = mandate_of_heaven_5
			}
			modifier = {
				factor = 0.2
				has_character_modifier = mandate_of_heaven_4
			}
			modifier = {
				factor = 0.5
				has_character_modifier = mandate_of_heaven_3
			}
		}
	}
	
	option = {
		trigger = {
			has_character_flag = ci_law_prestige
		}
		name = EVTOPTF_SOH_4507 # I can refuse this using assorted means...
		
		if = {
			limit = {
				learning = 20
			}
			scaled_prestige = {
				value = -1
				min = -500
			}
		}
		else = {
			scaled_prestige = {
				value = -2
				min = -1000
			}
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.01
				trait = proud
			}
			modifier = {
				factor = 5
				trait = content
			}
			modifier = {
				factor = 100
				trait = humble
			}
			modifier = {
				factor = 10
				is_smart_trigger = yes
			}
		}
	}
	
	option = {
		trigger = {
			has_character_flag = ci_law_bribe
		}
		name = EVTOPTG_SOH_4507 # I think this will make you reconsider...
		
		if = {
			limit = {
				has_character_flag = actual_eunuch_for_ci_law_event
			}
			if = {
				limit = {
					stewardship = 20
				}
				# Since the liege probably will inherit the wealth, have 90 % go poof
				scaled_wealth = {
					value = -0.45
					min = -450
				}
				transfer_scaled_wealth = {
					to = FROM
					value = 0.05
					min = 50
				}
			}
			else = {
				# Since the liege probably will inherit the wealth, have 90 % go poof
				scaled_wealth = {
					value = -0.9
					min = -900
				}
				transfer_scaled_wealth = {
					to = event_target:chosen_eunuch
					value = 0.1
					min = 100
				}
			}
		}
		else = {
			if = {
				limit = {
					stewardship = 20
				}
				scaled_wealth = {
					value = -0.5
					min = -500
				}
			}
			else = {
				scaled_wealth = {
					value = -1
					min = -1000
				}
			}
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.01
				trait = greedy
			}
			modifier = {
				factor = 5
				trait = content
			}
			modifier = {
				factor = 100
				trait = charitable
			}
			modifier = {
				factor = 2
				is_smart_trigger = yes
			}
		}
	}
	
	option = {
		trigger = {
			has_character_flag = ci_law_diplomacy
		}
		name = EVTOPTH_SOH_4507 # I'm sure you'll reconsider when I tell you this!
		
		random_list = {
			50 = {
				modifier = {
					factor = 2
					diplomacy = 15
				}
				modifier = {
					factor = 2
					diplomacy = 20
				}
				modifier = {
					factor = 2
					diplomacy = 25
				}
				modifier = {
					factor = 2
					diplomacy = 30
				}
				character_event = { id = soh.4509 } # It worked!
			}
			50 = {
				modifier = {
					factor = 2
					NOT = {
						diplomacy = 10
					}
				}
				modifier = {
					factor = 2
					NOT = {
						diplomacy = 5
					}
				}
				if = {
					limit = {
						has_character_flag = actual_eunuch_for_ci_law_event
					}
					FROM = {
						character_event = { id = soh.4510 } # Eunuch gets upset and asks again
					}
				}
				else = {
					character_event = { id = soh.4511 } # The eunuch asks again
				}
			}
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.01
				trait = shy
			}
			modifier = {
				factor = 10
				trait = proud
			}
			modifier = {
				factor = 100
				trait = gregarious
			}
			modifier = {
				factor = 2
				is_smart_trigger = yes
			}
			modifier = {
				factor = 10
				trait = socializer
			}
			modifier = {
				factor = 2
				has_education_diplomacy_trigger = yes
			}
			modifier = {
				factor = 2
				has_lifestyle_diplomacy_trigger = yes
			}
		}
	}
	
	option = {
		trigger = {
			has_character_flag = ci_law_intrigue
		}
		name = EVTOPTI_SOH_4507 # It'd be a shame if something happened...
		
		random_list = {
			50 = {
				modifier = {
					factor = 2
					intrigue = 15
				}
				modifier = {
					factor = 2
					intrigue = 20
				}
				modifier = {
					factor = 2
					intrigue = 25
				}
				modifier = {
					factor = 2
					intrigue = 30
				}
				character_event = { id = soh.4512 } # It worked!
			}
			50 = {
				modifier = {
					factor = 2
					NOT = {
						intrigue = 10
					}
				}
				modifier = {
					factor = 2
					NOT = {
						intrigue = 5
					}
				}
				if = {
					limit = {
						has_character_flag = actual_eunuch_for_ci_law_event
					}
					FROM = {
						character_event = { id = soh.4513 } # Eunuch gets upset and asks again
					}
				}
				else = {
					character_event = { id = soh.4514 } # The eunuch asks again
				}
			}
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.01
				trait = shy
			}
			modifier = {
				factor = 10
				trait = proud
			}
			modifier = {
				factor = 100
				trait = gregarious
			}
			modifier = {
				factor = 2
				is_smart_trigger = yes
			}
			modifier = {
				factor = 10
				trait = schemer
			}
			modifier = {
				factor = 2
				has_education_intrigue_trigger = yes
			}
			modifier = {
				factor = 2
				has_lifestyle_intrigue_trigger = yes
			}
			modifier = {
				factor = 0.01
				FROM = {
					OR = {
						any_friend = {
							character = ROOT
						}
						any_lover = {
							character = ROOT
						}
					}
				}
			}
			modifier = {
				factor = 100
				FROM = {
					any_rival = {
						character = ROOT
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTJ_SOH_4507 # Never!
		
		character_event = { id = soh.4515 days = 7 random = 7 } # Fallout
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 10
				trait = brave
			}
			modifier = {
				factor = 10
				trait = proud
			}
			modifier = {
				factor = 10
				trait = ambitious
			}
			modifier = {
				factor = 100
				trait = paranoid
			}
			modifier = {
				factor = 100
				any_rival = {
					character = FROM
				}
			}
			modifier = {
				factor = 0.1
				trait = craven
			}
			modifier = {
				factor = 0.1
				trait = trusting
			}
			modifier = {
				factor = 0.1
				trait = slothful
			}
			modifier = {
				factor = 0.1
				trait = humble
			}
			modifier = {
				factor = 2
				is_smart_trigger = yes
			}
		}
	}
}

# Fired rival informed
character_event = {
	id = soh.4508
	desc = EVTDESC_SOH_4508
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4508 # Curse both their names!
		
		opinion = {
			who = event_target:chosen_eunuch
			modifier = got_me_fired
		}
	}
}

# Eunuch convinced with diplomacy - liege
character_event = {
	id = soh.4509
	desc = EVTDESC_SOH_4509
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4509 # That went well!
		
		prestige = 100
	}
}

# Liege was unconvincing with diplomacy
character_event = {
	id = soh.4510
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		opinion = {
			who = FROM
			modifier = unconvincing_diplomacy
		}
		
		FROM = {
			character_event = { id = soh.4511 } # Liege asked again
		}
	}
}

# Eunuch asks again
character_event = {
	id = soh.4511
	desc = {
		text = EVTDESC_SOH_4511_A
		trigger = {
			has_character_flag = actual_eunuch_for_ci_law_event
		}
	}
	desc = {
		text = EVTDESC_SOH_4511_B
		trigger = {
			has_character_flag = fake_eunuch_for_ci_law_event
		}
	}
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4511 # Fine; I'll do it!
		
		if = {
			limit = {
				primary_title = {
					has_law = eunuch_law_0
				}
			}
			primary_title = {
				add_law_w_cooldown = eunuch_law_1
			}
		}
		else_if = {
			limit = {
				primary_title = {
					has_law = eunuch_law_1
				}
			}
			primary_title = {
				add_law_w_cooldown = eunuch_law_2
			}
		}
		else_if = {
			limit = {
				primary_title = {
					has_law = eunuch_law_2
				}
			}
			primary_title = {
				add_law_w_cooldown = eunuch_law_3
			}
		}
		else_if = {
			limit = {
				primary_title = {
					has_law = eunuch_law_3
				}
			}
			primary_title = {
				add_law_w_cooldown = eunuch_law_4
			}
		}
		character_event = { id = eunuch.1 } # Generate council eunuchs
		
		any_realm_lord = {
			limit = {
				ai = no
			}
			character_event = { id = soh.4654 } # Inform player lords
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.1
				has_character_flag = fake_eunuch_for_ci_law_event
			}
			modifier = {
				factor = 0.5
				has_law = eunuch_law_1
			}
			modifier = {
				factor = 0.2
				has_law = eunuch_law_2
			}
			modifier = {
				factor = 0.01
				has_law = eunuch_law_3
			}
			modifier = {
				factor = 0.01
				trait = proud
			}
			modifier = {
				factor = 0.01
				trait = ambitious
			}
			modifier = {
				factor = 0.01
				any_rival = {
					character = event_target:chosen_eunuch
				}
			}
			modifier = {
				factor = 10
				trait = slothful
			}
			modifier = {
				factor = 5
				trait = content
			}
			modifier = {
				factor = 10
				trait = trusting
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 2
				OR = {
					any_friend = {
						character = event_target:chosen_eunuch
					}
					any_lover = {
						character = event_target:chosen_eunuch
					}
				}
			}
			modifier = {
				factor = 10
				is_dumb_trigger = yes
			}
			modifier = {
				factor = 0.1
				has_character_modifier = mandate_of_heaven_5
			}
			modifier = {
				factor = 0.2
				has_character_modifier = mandate_of_heaven_4
			}
			modifier = {
				factor = 0.5
				has_character_modifier = mandate_of_heaven_3
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_4511 # Never!
		
		character_event = { id = soh.4515 days = 7 random = 7 } # Fallout
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 10
				trait = brave
			}
			modifier = {
				factor = 10
				trait = proud
			}
			modifier = {
				factor = 10
				trait = ambitious
			}
			modifier = {
				factor = 100
				trait = paranoid
			}
			modifier = {
				factor = 100
				any_rival = {
					character = event_target:chosen_eunuch
				}
			}
			modifier = {
				factor = 0.1
				trait = craven
			}
			modifier = {
				factor = 0.1
				trait = trusting
			}
			modifier = {
				factor = 0.1
				trait = slothful
			}
			modifier = {
				factor = 0.1
				trait = humble
			}
			modifier = {
				factor = 2
				is_smart_trigger = yes
			}
		}
	}
}

# Eunuch convinced with intrigue - liege
character_event = {
	id = soh.4512
	desc = EVTDESC_SOH_4512
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4512 # That went well!
		
		prestige = 100
	}
}

# Liege was unconvincing with intrigue
character_event = {
	id = soh.4513
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		opinion = {
			who = FROM
			modifier = unconvincing_intrigue
		}
		
		FROM = {
			character_event = { id = soh.4513 } # Liege asked again
		}
	}
}

# Eunuch asks again
character_event = {
	id = soh.4514
	desc = {
		text = EVTDESC_SOH_4514_A
		trigger = {
			has_character_flag = actual_eunuch_for_ci_law_event
		}
	}
	desc = {
		text = EVTDESC_SOH_4514_B
		trigger = {
			has_character_flag = fake_eunuch_for_ci_law_event
		}
	}
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4514 # Fine; I'll do it!
		
		if = {
			limit = {
				primary_title = {
					has_law = eunuch_law_0
				}
			}
			primary_title = {
				add_law_w_cooldown = eunuch_law_1
			}
		}
		else_if = {
			limit = {
				primary_title = {
					has_law = eunuch_law_1
				}
			}
			primary_title = {
				add_law_w_cooldown = eunuch_law_2
			}
		}
		else_if = {
			limit = {
				primary_title = {
					has_law = eunuch_law_2
				}
			}
			primary_title = {
				add_law_w_cooldown = eunuch_law_3
			}
		}
		else_if = {
			limit = {
				primary_title = {
					has_law = eunuch_law_3
				}
			}
			primary_title = {
				add_law_w_cooldown = eunuch_law_4
			}
		}
		character_event = { id = eunuch.1 } # Generate council eunuchs
		
		any_realm_lord = {
			limit = {
				ai = no
			}
			character_event = { id = soh.4654 } # Inform player lords
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.1
				has_character_flag = fake_eunuch_for_ci_law_event
			}
			modifier = {
				factor = 0.5
				has_law = eunuch_law_1
			}
			modifier = {
				factor = 0.2
				has_law = eunuch_law_2
			}
			modifier = {
				factor = 0.01
				has_law = eunuch_law_3
			}
			modifier = {
				factor = 0.01
				trait = proud
			}
			modifier = {
				factor = 0.01
				trait = ambitious
			}
			modifier = {
				factor = 0.01
				any_rival = {
					character = event_target:chosen_eunuch
				}
			}
			modifier = {
				factor = 10
				trait = slothful
			}
			modifier = {
				factor = 5
				trait = content
			}
			modifier = {
				factor = 10
				trait = trusting
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 2
				OR = {
					any_friend = {
						character = event_target:chosen_eunuch
					}
					any_lover = {
						character = event_target:chosen_eunuch
					}
				}
			}
			modifier = {
				factor = 10
				is_dumb_trigger = yes
			}
			modifier = {
				factor = 0.1
				has_character_modifier = mandate_of_heaven_5
			}
			modifier = {
				factor = 0.2
				has_character_modifier = mandate_of_heaven_4
			}
			modifier = {
				factor = 0.5
				has_character_modifier = mandate_of_heaven_3
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_4514 # Never!
		
		character_event = { id = soh.4515 days = 7 random = 7 } # Fallout
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 10
				trait = brave
			}
			modifier = {
				factor = 10
				trait = proud
			}
			modifier = {
				factor = 10
				trait = ambitious
			}
			modifier = {
				factor = 100
				trait = paranoid
			}
			modifier = {
				factor = 100
				any_rival = {
					character = event_target:chosen_eunuch
				}
			}
			modifier = {
				factor = 0.1
				trait = craven
			}
			modifier = {
				factor = 0.1
				trait = trusting
			}
			modifier = {
				factor = 0.1
				trait = slothful
			}
			modifier = {
				factor = 0.1
				trait = humble
			}
			modifier = {
				factor = 2
				is_smart_trigger = yes
			}
		}
	}
}

### Liege refused - fallout

# Hidden event for liege to decide on fallout
character_event = {
	id = soh.4515
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		OR = {
			government = chinese_imperial_government
			government = eastern_imperial_government
		}
	}
	
	immediate = {
		clr_character_flag = eunuch_murder_attempt_actual_eunuch
		clr_character_flag = eunuch_murder_attempt_fake_eunuch
		random_list = {
			100 = {
				modifier = {
					factor = 0
					any_rival = {
						character = event_target:chosen_eunuch
					}
				}
				character_event = { id = soh.4516 } # Eunuch just shrugs
			}
			25 = {
				modifier = {
					factor = 0
					has_character_flag = fake_eunuch_for_ci_law_event
				}
				modifier = {
					factor = 0
					OR = {
						any_friend = {
							character = event_target:chosen_eunuch
						}
						any_lover = {
							character = event_target:chosen_eunuch
						}
					}
				}
				character_event = { id = soh.4517 } # Eunuch greatly upset
			}
			25 = {
				modifier = {
					factor = 0
					has_character_flag = fake_eunuch_for_ci_law_event
				}
				modifier = {
					factor = 0
					OR = {
						any_rival = {
							character = event_target:chosen_eunuch
						}
						any_friend = {
							character = event_target:chosen_eunuch
						}
						any_lover = {
							character = event_target:chosen_eunuch
						}
					}
				}
				character_event = { id = soh.4518 } # Eunuch becomes rival
			}
			25 = {
				modifier = {
					factor = 0
					has_character_flag = fake_eunuch_for_ci_law_event
				}
				modifier = {
					factor = 0
					NOT = {
						any_friend = {
							character = event_target:chosen_eunuch
						}
					}
				}
				character_event = { id = soh.4519 } # Eunuch ends friendship
			}
			25 = {
				modifier = {
					factor = 0
					has_character_flag = fake_eunuch_for_ci_law_event
				}
				modifier = {
					factor = 0
					NOT = {
						any_lover = {
							character = event_target:chosen_eunuch
						}
					}
				}
				character_event = { id = soh.4520 } # Eunuch stops being lover
			}
			25 = {
				modifier = {
					factor = 0
					has_character_flag = fake_eunuch_for_ci_law_event
				}
				modifier = {
					factor = 0
					primary_title = {
						OR = {
							has_law = eunuch_law_0
							has_law = eunuch_law_1
						}
					}
				}
				modifier = {
					factor = 0
					NOT = {
						any_friend = {
							character = event_target:chosen_eunuch
						}
					}
				}
				character_event = { id = soh.4521 } # Eunuch ends friendship
			}
			10 = {
				modifier = {
					factor = 0
					NOR = {
						any_spouse = {
							is_landed = no
							host = {
								character = ROOT
							}
							prisoner = no
						}
						any_consort = {
							is_landed = no
							host = {
								character = ROOT
							}
							prisoner = no
						}
					}
				}
				random_list = {
					50 = {
						set_character_flag = eunuch_murder_attempt_fake_eunuch
					}
					50 = {
						modifier = {
							factor = 0
							NOR = {
								any_spouse = {
									is_landed = no
									host = {
										character = ROOT
									}
									prisoner = no
									ROOT = {
										any_voter = {
											is_council_eunuch_trigger = yes
											PREVPREV = {
												OR = {
													any_rival = {
														character = PREV
													}
													NOT = {
														reverse_opinion = {
															who = PREV
															value = -50
														}
													}
												}
											}
										}
									}
								}
								any_consort = {
									is_landed = no
									host = {
										character = ROOT
									}
									prisoner = no
									ROOT = {
										any_voter = {
											is_council_eunuch_trigger = yes
											PREVPREV = {
												OR = {
													any_rival = {
														character = PREV
													}
													NOT = {
														reverse_opinion = {
															who = PREV
															value = -50
														}
													}
												}
											}
										}
									}
								}
							}
						}
						set_character_flag = eunuch_murder_attempt_actual_eunuch
					}
				}
				if = {
					limit = {
						has_character_flag = eunuch_murder_attempt_actual_eunuch
					}
					random_voter = {
						limit = {
							is_council_eunuch_trigger = yes
							ROOT = {
								OR = {
									any_spouse = {
										is_landed = no
										host = {
											character = ROOT
										}
										prisoner = no
										OR = {
											any_rival = {
												character = PREV
											}
											NOT = {
												reverse_opinion = {
													who = PREV
													value = -50
												}
											}
										}
									}
									any_consort = {
										is_landed = no
										host = {
											character = ROOT
										}
										prisoner = no
										OR = {
											any_rival = {
												character = PREV
											}
											NOT = {
												reverse_opinion = {
													who = PREV
													value = -50
												}
											}
										}
									}
								}
							}
						}
						save_event_target_as = eunuch_murderer
						ROOT = {
							random_list = {
								50 = {
									modifier = {
										factor = 0
										NOT = {
											any_spouse = {
												is_landed = no
												host = {
													character = ROOT
												}
												prisoner = no
												OR = {
													any_rival = {
														character = event_target:eunuch_murderer
													}
													NOT = {
														reverse_opinion = {
															who = event_target:eunuch_murderer
															value = -50
														}
													}
												}
											}
										}
									}
									random_spouse = {
										limit = {
											is_landed = no
											host = {
												character = ROOT
											}
											prisoner = no
											OR = {
												any_rival = {
													character = event_target:eunuch_murderer
												}
												NOT = {
													reverse_opinion = {
														who = event_target:eunuch_murderer
														value = -50
													}
												}
											}
										}
										preferred_limit = {
											any_lover = {
												character = ROOT
											}
										}
										preferred_limit = {
											any_friend = {
												character = ROOT
											}
										}
										preferred_limit = {
											NOT = {
												any_rival = {
													character = ROOT
												}
											}
										}
										save_event_target_as = eunuch_murder_victim
									}
								}
								50 = {
									modifier = {
										factor = 0
										NOT = {
											any_consort = {
												is_landed = no
												host = {
													character = ROOT
												}
												prisoner = no
												OR = {
													any_rival = {
														character = event_target:eunuch_murderer
													}
													NOT = {
														reverse_opinion = {
															who = event_target:eunuch_murderer
															value = -50
														}
													}
												}
											}
										}
									}
									random_consort = {
										limit = {
											is_landed = no
											host = {
												character = ROOT
											}
											prisoner = no
											OR = {
												any_rival = {
													character = event_target:eunuch_murderer
												}
												NOT = {
													reverse_opinion = {
														who = event_target:eunuch_murderer
														value = -50
													}
												}
											}
										}
										preferred_limit = {
											any_lover = {
												character = ROOT
											}
										}
										preferred_limit = {
											any_friend = {
												character = ROOT
											}
										}
										preferred_limit = {
											NOT = {
												any_rival = {
													character = ROOT
												}
											}
										}
										save_event_target_as = eunuch_murder_victim
									}
								}
							}
						}
					}
				}
				else = {
					random_list = {
						50 = {
							modifier = {
								factor = 0
								NOT = {
									any_spouse = {
										is_landed = no
										host = {
											character = ROOT
										}
										prisoner = no
									}
								}
							}
							random_spouse = {
								limit = {
									is_landed = no
									host = {
										character = ROOT
									}
									prisoner = no
								}
								save_event_target_as = eunuch_murder_victim
							}
						}
						50 = {
							modifier = {
								factor = 0
								NOT = {
									any_consort = {
										is_landed = no
										host = {
											character = ROOT
										}
										prisoner = no
									}
								}
							}
							random_consort = {
								limit = {
									is_landed = no
									host = {
										character = ROOT
									}
									prisoner = no
								}
								save_event_target_as = eunuch_murder_victim
							}
						}
					}
				}
				event_target:eunuch_murder_victim = {
					character_event = { id = soh.4522 } # A murder attempt is made
				}
			}
			10 = {
				modifier = {
					factor = 0
					NOT = {
						any_child = {
							is_landed = no
							host = {
								character = ROOT
							}
							prisoner = no
						}
					}
				}
				random_list = {
					50 = {
						set_character_flag = eunuch_murder_attempt_fake_eunuch
					}
					50 = {
						modifier = {
							factor = 0
							NOT = {
								any_child = {
									is_landed = no
									host = {
										character = ROOT
									}
									prisoner = no
									ROOT = {
										any_voter = {
											is_council_eunuch_trigger = yes
											PREVPREV = {
												OR = {
													any_rival = {
														character = PREV
													}
													NOT = {
														reverse_opinion = {
															who = PREV
															value = -50
														}
													}
												}
											}
										}
									}
								}
							}
						}
						set_character_flag = eunuch_murder_attempt_actual_eunuch
					}
				}
				if = {
					limit = {
						has_character_flag = eunuch_murder_attempt_actual_eunuch
					}
					random_voter = {
						limit = {
							is_council_eunuch_trigger = yes
							ROOT = {
								any_child = {
									is_landed = no
									host = {
										character = ROOT
									}
									prisoner = no
									OR = {
										any_rival = {
											character = PREV
										}
										NOT = {
											reverse_opinion = {
												who = PREV
												value = -50
											}
										}
									}
								}
							}
						}
						save_event_target_as = eunuch_murderer
						ROOT = {
							random_child = {
								limit = {
									is_landed = no
									host = {
										character = ROOT
									}
									prisoner = no
									OR = {
										any_rival = {
											character = event_target:eunuch_murderer
										}
										NOT = {
											reverse_opinion = {
												who = event_target:eunuch_murderer
												value = -50
											}
										}
									}
								}
								save_event_target_as = eunuch_murder_victim
							}
						}
					}
				}
				else = {
					random_child = {
						limit = {
							is_landed = no
							host = {
								character = ROOT
							}
							prisoner = no
							OR = {
								any_rival = {
									character = event_target:eunuch_murderer
								}
								NOT = {
									reverse_opinion = {
										who = event_target:eunuch_murderer
										value = -50
									}
								}
							}
						}
						save_event_target_as = eunuch_murder_victim
					}
				}
				event_target:eunuch_murder_victim = {
					character_event = { id = soh.4527 } # A murder attempt is made
				}
			}
			1 = {
				modifier = {
					factor = 10
					primary_title = {
						has_law = eunuch_law_3
					}
				}
				random_list = {
					50 = {
						set_character_flag = eunuch_murder_attempt_fake_eunuch
					}
					50 = {
						modifier = {
							factor = 0
							NOT = {
								any_voter = {
									is_council_eunuch_trigger = yes
									OR = {
										any_rival = {
											character = ROOT
										}
										NOT = {
											reverse_opinion = {
												who = ROOT
												value = -50
											}
										}
									}
								}
							}
						}
						set_character_flag = eunuch_murder_attempt_actual_eunuch
					}
				}
				if = {
					limit = {
						has_character_flag = eunuch_murder_attempt_actual_eunuch
					}
					random_voter = {
						limit = {
							is_council_eunuch_trigger = yes
							OR = {
								any_rival = {
									character = ROOT
								}
								NOT = {
									reverse_opinion = {
										who = ROOT
										value = -50
									}
								}
							}
						}
						save_event_target_as = eunuch_murderer
					}
				}
				event_target:eunuch_murder_victim = {
					character_event = { id = soh.4532 } # A murder attempt is made
				}
			}
			10 = {
				modifier = {
					factor = 0
					OR = {
						any_friend = {
							character = event_target:chosen_eunuch
						}
						any_lover = {
							character = event_target:chosen_eunuch
						}
					}
				}
				character_event = { id = soh.4537 } # Discredited by eunuch
			}
			10 = {
				modifier = {
					factor = 0
					OR = {
						any_friend = {
							character = event_target:chosen_eunuch
						}
						any_lover = {
							character = event_target:chosen_eunuch
						}
					}
				}
				character_event = { id = soh.4538 } # Vassals get upset
			}
		}
	}
}

# Eunuch just shrugs - inform liege
character_event = {
	id = soh.4516
	desc = EVTDESC_SOH_4516
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4516 # That's good!
	}
}

# Eunuch greatly upset - inform liege
character_event = {
	id = soh.4517
	desc = EVTDESC_SOH_4517
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4517 # Unsurprising...
		
		event_target:chosen_eunuch = {
			opinion = {
				who = ROOT
				modifier = ci_greatly_upset
			}
		}
	}
}

# Eunuch becomes rival - inform liege
character_event = {
	id = soh.4518
	desc = EVTDESC_SOH_4518
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4518 # Not unexpected...
		
		add_rival = event_target:chosen_eunuch
	}
}

# Eunuch ends friendship - inform liege
character_event = {
	id = soh.4519
	desc = EVTDESC_SOH_4519
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4519 # Some "friend"...
		
		remove_friend = event_target:chosen_eunuch
	}
}

# Eunuch stops being lover - inform liege
character_event = {
	id = soh.4520
	desc = EVTDESC_SOH_4520
	picture = GFX_evt_stressed_ruler
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4520 # He clearly never loved me!
		
		remove_lover = event_target:chosen_eunuch
	}
}

# All eunuchs upset - inform liege
character_event = {
	id = soh.4521
	desc = EVTDESC_SOH_4521
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4521 # What else is new?
		
		any_voter = {
			limit = {
				is_council_eunuch_trigger = yes
			}
			opinion = {
				who = ROOT
				modifier = ci_upset
			}
		}
	}
}

# Murder attempt on spouse/consort - spouse/consort
character_event = {
	id = soh.4522
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				FROM = {
					has_character_flag = eunuch_murder_attempt_actual_eunuch
				}
			}
			random_list = {
				50 = {
					modifier = {
						factor = 10
						attribute_diff = {
							character = event_target:eunuch_murderer
							attribute = intrigue
							value >= 15
						}
					}
					modifier = {
						factor = 2
						attribute_diff = {
							character = event_target:eunuch_murderer
							attribute = intrigue
							value >= 10
						}
					}
					modifier = {
						factor = 2
						attribute_diff = {
							character = event_target:eunuch_murderer
							attribute = intrigue
							value >= 5
						}
					}
					# Failure
					if = {
						limit = {
							event_target:eunuch_murderer = {
								intrigue >= 20
							}
						}
						FROM = {
							character_event = { id = soh.4523 } # Unknown assailant got away
						}
					}
					else_if = {
						limit = {
							event_target:eunuch_murderer = {
								intrigue >= 10
							}
						}
						random_list = {
							50 = {
								FROM = {
									character_event = { id = soh.4523 } # Unknown assailant got away
								}
							}
							50 = {
								FROM = {
									character_event = { id = soh.4524 } # Assailant caught
								}
							}
						}
					}
					else = {
						FROM = {
							character_event = { id = soh.4524 } # Assailant caught
						}
					}
				}
				50 = {
					modifier = {
						factor = 10
						attribute_diff = {
							character = event_target:eunuch_murderer
							attribute = intrigue
							value <= -15
						}
					}
					modifier = {
						factor = 2
						attribute_diff = {
							character = event_target:eunuch_murderer
							attribute = intrigue
							value <= -10
						}
					}
					modifier = {
						factor = 2
						attribute_diff = {
							character = event_target:eunuch_murderer
							attribute = intrigue
							value <= -5
						}
					}
					# Success
					if = {
						limit = {
							event_target:eunuch_murderer = {
								intrigue >= 20
							}
						}
						death = {
							death_reason = death_murder_unknown
							killer = event_target:eunuch_murderer
						}
						FROM = {
							character_event = { id = soh.4525 } # Unknown assailant got away
						}
					}
					else_if = {
						limit = {
							event_target:eunuch_murderer = {
								intrigue >= 10
							}
						}
						random_list = {
							50 = {
								death = {
									death_reason = death_murder_unknown
									killer = event_target:eunuch_murderer
								}
								FROM = {
									character_event = { id = soh.4525 } # Unknown assailant got away
								}
							}
							50 = {
								event_target:eunuch_murderer = {
									ROOT = { save_event_target_as = kinslayer_target }
									add_kinslayer_trait_effect = yes
								}
								death = {
									death_reason = death_murder
									killer = event_target:eunuch_murderer
								}
								FROM = {
									character_event = { id = soh.4526 } # Assailant caught
								}
							}
						}
					}
					else = {
						event_target:eunuch_murderer = {
							ROOT = { save_event_target_as = kinslayer_target }
							add_kinslayer_trait_effect = yes
						}
						death = {
							death_reason = death_murder
							killer = event_target:eunuch_murderer
						}
						FROM = {
							character_event = { id = soh.4526 } # Assailant caught
						}
					}
				}
			}
		}
		else = {
			random_list = {
				50 = {
					modifier = {
						factor = 10
						intrigue = 30
					}
					modifier = {
						factor = 2
						intrigue = 25
					}
					modifier = {
						factor = 2
						intrigue = 20
					}
					modifier = {
						factor = 2
						intrigue = 15
					}
					# Failure
					random_list = {
						50 = {
							FROM = {
								character_event = { id = soh.4523 } # Unknown ssailant got away
							}
						}
						50 = {
							FROM = {
								character_event = { id = soh.4524 } # Assailant caught
							}
						}
					}
				}
				50 = {
					modifier = {
						factor = 2
						NOT = {
							intrigue = 10
						}
					}
					modifier = {
						factor = 2
						NOT = {
							intrigue = 5
						}
					}
					# Success
					random_list = {
						50 = {
							death = {
								death_reason = death_murder_unknown
							}
							FROM = {
								character_event = { id = soh.4525 } # Unknown ssailant got away
							}
						}
						50 = {
							death = {
								death_reason = death_murder
							}
							FROM = {
								character_event = { id = soh.4526 } # Assailant caught
							}
						}
					}
				}
			}
		}
	}
}

# Murder attempt failed, perpetrator unknown - liege
character_event = {
	id = soh.4523
	desc = {
		text = EVTDESC_SOH_4523_A
		trigger = {
			has_character_flag = eunuch_murder_attempt_actual_eunuch
		}
	}
	desc = {
		text = EVTDESC_SOH_4523_B
		trigger = {
			has_character_flag = eunuch_murder_attempt_fake_eunuch
		}
	}
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			event_target:chosen_eunuch = {
				is_alive = yes
			}
		}
		name = EVTOPTA_SOH_4523 # Who was it? Maybe the one that asked?
		
		opinion = {
			who = event_target:chosen_eunuch
			modifier = ci_suspected_murderer
		}
	}
	
	option = {
		trigger = {
			NOT = {
				event_target:chosen_eunuch = {
					is_alive = yes
				}
			}
		}
		name = EVTOPTB_SOH_4523 # Who was it?
	}
}

# Murder attempt failed, perpetrator known - liege
character_event = {
	id = soh.4524
	desc = {
		text = EVTDESC_SOH_4524_A
		trigger = {
			has_character_flag = eunuch_murder_attempt_actual_eunuch
		}
	}
	desc = {
		text = EVTDESC_SOH_4524_B
		trigger = {
			has_character_flag = eunuch_murder_attempt_fake_eunuch
		}
	}
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4524 # Off with his head!
		
		event_target:eunuch_murderer = { save_event_target_as = kinslayer_target }
		add_kinslayer_trait_effect = yes
		event_target:eunuch_murderer = {
			death = {
				death_reason = death_execution
				killer = ROOT
			}
		}
	}
}

# Murder attempt succeded, perpetrator unknown - liege
character_event = {
	id = soh.4525
	desc = {
		text = EVTDESC_SOH_4525_A
		trigger = {
			has_character_flag = eunuch_murder_attempt_actual_eunuch
		}
	}
	desc = {
		text = EVTDESC_SOH_4525_B
		trigger = {
			has_character_flag = eunuch_murder_attempt_fake_eunuch
		}
	}
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			event_target:chosen_eunuch = {
				is_alive = yes
			}
		}
		name = EVTOPTA_SOH_4525 # Who was it? Maybe the one that asked?
		
		opinion = {
			who = event_target:chosen_eunuch
			modifier = ci_suspected_murderer
		}
	}
	
	option = {
		trigger = {
			NOT = {
				event_target:chosen_eunuch = {
					is_alive = yes
				}
			}
		}
		name = EVTOPTB_SOH_4525 # Who was it?
	}
}

# Murder attempt succeded, perpetrator known - liege
character_event = {
	id = soh.4526
	desc = {
		text = EVTDESC_SOH_4526_A
		trigger = {
			has_character_flag = eunuch_murder_attempt_actual_eunuch
		}
	}
	desc = {
		text = EVTDESC_SOH_4526_B
		trigger = {
			has_character_flag = eunuch_murder_attempt_fake_eunuch
		}
	}
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4526 # Off with his head!
		
		event_target:eunuch_murderer = { save_event_target_as = kinslayer_target }
		add_kinslayer_trait_effect = yes
		event_target:eunuch_murderer = {
			death = {
				death_reason = death_execution
				killer = ROOT
			}
		}
	}
}

# Murder attempt on child - child
character_event = {
	id = soh.4527
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				FROM = {
					has_character_flag = eunuch_murder_attempt_actual_eunuch
				}
			}
			random_list = {
				50 = {
					modifier = {
						factor = 10
						attribute_diff = {
							character = event_target:eunuch_murderer
							attribute = intrigue
							value >= 15
						}
					}
					modifier = {
						factor = 2
						attribute_diff = {
							character = event_target:eunuch_murderer
							attribute = intrigue
							value >= 10
						}
					}
					modifier = {
						factor = 2
						attribute_diff = {
							character = event_target:eunuch_murderer
							attribute = intrigue
							value >= 5
						}
					}
					# Failure
					if = {
						limit = {
							event_target:eunuch_murderer = {
								intrigue >= 20
							}
						}
						FROM = {
							character_event = { id = soh.4528 } # Unknown assailant got away
						}
					}
					else_if = {
						limit = {
							event_target:eunuch_murderer = {
								intrigue >= 10
							}
						}
						random_list = {
							50 = {
								FROM = {
									character_event = { id = soh.4528 } # Unknown assailant got away
								}
							}
							50 = {
								FROM = {
									character_event = { id = soh.4529 } # Assailant caught
								}
							}
						}
					}
					else = {
						FROM = {
							character_event = { id = soh.4529 } # Assailant caught
						}
					}
				}
				50 = {
					modifier = {
						factor = 10
						attribute_diff = {
							character = event_target:eunuch_murderer
							attribute = intrigue
							value <= -15
						}
					}
					modifier = {
						factor = 2
						attribute_diff = {
							character = event_target:eunuch_murderer
							attribute = intrigue
							value <= -10
						}
					}
					modifier = {
						factor = 2
						attribute_diff = {
							character = event_target:eunuch_murderer
							attribute = intrigue
							value <= -5
						}
					}
					# Success
					if = {
						limit = {
							event_target:eunuch_murderer = {
								intrigue >= 20
							}
						}
						death = {
							death_reason = death_murder_unknown
							killer = event_target:eunuch_murderer
						}
						FROM = {
							character_event = { id = soh.4530 } # Unknown assailant got away
						}
					}
					else_if = {
						limit = {
							event_target:eunuch_murderer = {
								intrigue >= 10
							}
						}
						random_list = {
							50 = {
								death = {
									death_reason = death_murder_unknown
									killer = event_target:eunuch_murderer
								}
								FROM = {
									character_event = { id = soh.4530 } # Unknown assailant got away
								}
							}
							50 = {
								event_target:eunuch_murderer = {
									ROOT = { save_event_target_as = kinslayer_target }
									add_kinslayer_trait_effect = yes
								}
								death = {
									death_reason = death_murder
									killer = event_target:eunuch_murderer
								}
								FROM = {
									character_event = { id = soh.4531 } # Assailant caught
								}
							}
						}
					}
					else = {
						event_target:eunuch_murderer = {
							ROOT = { save_event_target_as = kinslayer_target }
							add_kinslayer_trait_effect = yes
						}
						death = {
							death_reason = death_murder
							killer = event_target:eunuch_murderer
						}
						FROM = {
							character_event = { id = soh.4531 } # Assailant caught
						}
					}
				}
			}
		}
		else = {
			random_list = {
				50 = {
					modifier = {
						factor = 10
						intrigue = 30
					}
					modifier = {
						factor = 2
						intrigue = 25
					}
					modifier = {
						factor = 2
						intrigue = 20
					}
					modifier = {
						factor = 2
						intrigue = 15
					}
					# Failure
					random_list = {
						50 = {
							FROM = {
								character_event = { id = soh.4528 } # Unknown ssailant got away
							}
						}
						50 = {
							FROM = {
								character_event = { id = soh.4529 } # Assailant caught
							}
						}
					}
				}
				50 = {
					modifier = {
						factor = 2
						NOT = {
							intrigue = 10
						}
					}
					modifier = {
						factor = 2
						NOT = {
							intrigue = 5
						}
					}
					# Success
					random_list = {
						50 = {
							death = {
								death_reason = death_murder_unknown
							}
							FROM = {
								character_event = { id = soh.4530 } # Unknown ssailant got away
							}
						}
						50 = {
							death = {
								death_reason = death_murder
							}
							FROM = {
								character_event = { id = soh.4531 } # Assailant caught
							}
						}
					}
				}
			}
		}
	}
}

# Murder attempt failed, perpetrator unknown - liege
character_event = {
	id = soh.4528
	desc = {
		text = EVTDESC_SOH_4528_A
		trigger = {
			has_character_flag = eunuch_murder_attempt_actual_eunuch
		}
	}
	desc = {
		text = EVTDESC_SOH_4528_B
		trigger = {
			has_character_flag = eunuch_murder_attempt_fake_eunuch
		}
	}
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			event_target:chosen_eunuch = {
				is_alive = yes
			}
		}
		name = EVTOPTA_SOH_4528 # Who was it? Maybe the one that asked?
		
		opinion = {
			who = event_target:chosen_eunuch
			modifier = ci_suspected_murderer
		}
	}
	
	option = {
		trigger = {
			NOT = {
				event_target:chosen_eunuch = {
					is_alive = yes
				}
			}
		}
		name = EVTOPTB_SOH_4528 # Who was it?
	}
}

# Murder attempt failed, perpetrator known - liege
character_event = {
	id = soh.4529
	desc = {
		text = EVTDESC_SOH_4529_A
		trigger = {
			has_character_flag = eunuch_murder_attempt_actual_eunuch
		}
	}
	desc = {
		text = EVTDESC_SOH_4529_B
		trigger = {
			has_character_flag = eunuch_murder_attempt_fake_eunuch
		}
	}
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4529 # Off with his head!
		
		event_target:eunuch_murderer = { save_event_target_as = kinslayer_target }
		add_kinslayer_trait_effect = yes
		event_target:eunuch_murderer = {
			death = {
				death_reason = death_execution
				killer = ROOT
			}
		}
	}
}

# Murder attempt succeded, perpetrator unknown - liege
character_event = {
	id = soh.4530
	desc = {
		text = EVTDESC_SOH_4530_A
		trigger = {
			has_character_flag = eunuch_murder_attempt_actual_eunuch
		}
	}
	desc = {
		text = EVTDESC_SOH_4530_B
		trigger = {
			has_character_flag = eunuch_murder_attempt_fake_eunuch
		}
	}
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			event_target:chosen_eunuch = {
				is_alive = yes
			}
		}
		name = EVTOPTA_SOH_4530 # Who was it? Maybe the one that asked?
		
		opinion = {
			who = event_target:chosen_eunuch
			modifier = ci_suspected_murderer
		}
	}
	
	option = {
		trigger = {
			NOT = {
				event_target:chosen_eunuch = {
					is_alive = yes
				}
			}
		}
		name = EVTOPTB_SOH_4530 # Who was it?
	}
}

# Murder attempt succeded, perpetrator known - liege
character_event = {
	id = soh.4531
	desc = {
		text = EVTDESC_SOH_4531_A
		trigger = {
			has_character_flag = eunuch_murder_attempt_actual_eunuch
		}
	}
	desc = {
		text = EVTDESC_SOH_4531_B
		trigger = {
			has_character_flag = eunuch_murder_attempt_fake_eunuch
		}
	}
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4531 # Off with his head!
		
		event_target:eunuch_murderer = { save_event_target_as = kinslayer_target }
		add_kinslayer_trait_effect = yes
		event_target:eunuch_murderer = {
			death = {
				death_reason = death_execution
				killer = ROOT
			}
		}
	}
}

# Murder attempt on liege - liege
character_event = {
	id = soh.4532
	desc = EVTDESC_SOH_4532
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4532 # Guards! To me!
		if = {
			limit = {
				FROM = {
					has_character_flag = eunuch_murder_attempt_actual_eunuch
				}
			}
			random_list = {
				50 = {
					modifier = {
						factor = 10
						attribute_diff = {
							character = event_target:eunuch_murderer
							attribute = intrigue
							value >= 15
						}
					}
					modifier = {
						factor = 2
						attribute_diff = {
							character = event_target:eunuch_murderer
							attribute = intrigue
							value >= 10
						}
					}
					modifier = {
						factor = 2
						attribute_diff = {
							character = event_target:eunuch_murderer
							attribute = intrigue
							value >= 5
						}
					}
					# Failure
					if = {
						limit = {
							event_target:eunuch_murderer = {
								intrigue >= 20
							}
						}
						FROM = {
							character_event = { id = soh.4533 } # Unknown assailant got away
						}
					}
					else_if = {
						limit = {
							event_target:eunuch_murderer = {
								intrigue >= 10
							}
						}
						random_list = {
							50 = {
								FROM = {
									character_event = { id = soh.4533 } # Unknown assailant got away
								}
							}
							50 = {
								FROM = {
									character_event = { id = soh.4534 } # Assailant caught
								}
							}
						}
					}
					else = {
						FROM = {
							character_event = { id = soh.4534 } # Assailant caught
						}
					}
				}
				50 = {
					modifier = {
						factor = 10
						attribute_diff = {
							character = event_target:eunuch_murderer
							attribute = intrigue
							value <= -15
						}
					}
					modifier = {
						factor = 2
						attribute_diff = {
							character = event_target:eunuch_murderer
							attribute = intrigue
							value <= -10
						}
					}
					modifier = {
						factor = 2
						attribute_diff = {
							character = event_target:eunuch_murderer
							attribute = intrigue
							value <= -5
						}
					}
					# Success
					if = {
						limit = {
							event_target:eunuch_murderer = {
								intrigue >= 20
							}
						}
						FROM = {
							character_event = { id = soh.4535 } # Unknown assailant got away
						}
					}
					else_if = {
						limit = {
							event_target:eunuch_murderer = {
								intrigue >= 10
							}
						}
						random_list = {
							50 = {
								FROM = {
									character_event = { id = soh.4535 } # Unknown assailant got away
								}
							}
							50 = {
								FROM = {
									character_event = { id = soh.4536 } # Assailant caught
								}
							}
						}
					}
					else = {
						FROM = {
							character_event = { id = soh.4536 } # Assailant caught
						}
					}
				}
			}
		}
		else = {
			random_list = {
				50 = {
					modifier = {
						factor = 10
						intrigue = 30
					}
					modifier = {
						factor = 2
						intrigue = 25
					}
					modifier = {
						factor = 2
						intrigue = 20
					}
					modifier = {
						factor = 2
						intrigue = 15
					}
					# Failure
					random_list = {
						50 = {
							FROM = {
								character_event = { id = soh.4533 } # Unknown ssailant got away
							}
						}
						50 = {
							FROM = {
								character_event = { id = soh.4534 } # Assailant caught
							}
						}
					}
				}
				50 = {
					modifier = {
						factor = 2
						NOT = {
							intrigue = 10
						}
					}
					modifier = {
						factor = 2
						NOT = {
							intrigue = 5
						}
					}
					# Success
					random_list = {
						50 = {
							FROM = {
								character_event = { id = soh.4535 } # Unknown ssailant got away
							}
						}
						50 = {
							FROM = {
								character_event = { id = soh.4536 } # Assailant caught
							}
						}
					}
				}
			}
		}
	}
}

# Murder attempt failed, perpetrator unknown - liege
character_event = {
	id = soh.4533
	desc = {
		text = EVTDESC_SOH_4533_A
		trigger = {
			has_character_flag = eunuch_murder_attempt_actual_eunuch
		}
	}
	desc = {
		text = EVTDESC_SOH_4533_B
		trigger = {
			has_character_flag = eunuch_murder_attempt_fake_eunuch
		}
	}
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			event_target:chosen_eunuch = {
				is_alive = yes
			}
		}
		name = EVTOPTA_SOH_4533 # Who was it? Maybe the one that asked?
		
		opinion = {
			who = event_target:chosen_eunuch
			modifier = ci_suspected_murderer
		}
	}
	
	option = {
		trigger = {
			NOT = {
				event_target:chosen_eunuch = {
					is_alive = yes
				}
			}
		}
		name = EVTOPTB_SOH_4533 # Who was it?
	}
}

# Murder attempt failed, perpetrator known - liege
character_event = {
	id = soh.4534
	desc = {
		text = EVTDESC_SOH_4534_A
		trigger = {
			has_character_flag = eunuch_murder_attempt_actual_eunuch
		}
	}
	desc = {
		text = EVTDESC_SOH_4534_B
		trigger = {
			has_character_flag = eunuch_murder_attempt_fake_eunuch
		}
	}
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4534 # Off with his head!
		
		event_target:eunuch_murderer = { save_event_target_as = kinslayer_target }
		add_kinslayer_trait_effect = yes
		event_target:eunuch_murderer = {
			death = {
				death_reason = death_execution
				killer = ROOT
			}
		}
	}
}

# Murder attempt succeded, perpetrator unknown
character_event = {
	id = soh.4535
	desc = {
		text = EVTDESC_SOH_4535_A
		trigger = {
			has_character_flag = eunuch_murder_attempt_actual_eunuch
		}
	}
	desc = {
		text = EVTDESC_SOH_4535_B
		trigger = {
			has_character_flag = eunuch_murder_attempt_fake_eunuch
		}
	}
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			event_target:chosen_eunuch = {
				is_alive = yes
			}
		}
		name = EVTOPTA_SOH_4535 # Maybe... it was... that one...?
		
		opinion = {
			who = event_target:chosen_eunuch
			modifier = ci_suspected_murderer
		}
		
		if = {
			limit = {
				has_character_flag = eunuch_murder_attempt_actual_eunuch
			}
			death = {
				death_reason = death_murder_unknown
				killer = event_target:eunuch_murderer
			}
		}
		else = {
			death = {
				death_reason = death_murder_unknown
			}
		}
	}
	
	option = {
		trigger = {
			NOT = {
				event_target:chosen_eunuch = {
					is_alive = yes
				}
			}
		}
		name = EVTOPTB_SOH_4535 # Who... killed me...?
		
		if = {
			limit = {
				has_character_flag = eunuch_murder_attempt_actual_eunuch
			}
			death = {
				death_reason = death_murder_unknown
				killer = event_target:eunuch_murderer
			}
		}
		else = {
			death = {
				death_reason = death_murder_unknown
			}
		}
	}
}

# Murder attempt succeded, perpetrator known - liege
character_event = {
	id = soh.4536
	desc = {
		text = EVTDESC_SOH_4536_A
		trigger = {
			has_character_flag = eunuch_murder_attempt_actual_eunuch
		}
	}
	desc = {
		text = EVTDESC_SOH_4536_B
		trigger = {
			has_character_flag = eunuch_murder_attempt_fake_eunuch
		}
	}
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4536 # You? No!
		
		if = {
			limit = {
				has_character_flag = eunuch_murder_attempt_actual_eunuch
			}
			event_target:eunuch_murderer = {
				ROOT = { save_event_target_as = kinslayer_target }
				add_kinslayer_trait_effect = yes
			}
			death = {
				death_reason = death_murder
				killer = event_target:eunuch_murderer
			}
		}
		else = {
			death = {
				death_reason = death_murder
			}
		}
	}
}

# Discredited by eunuch - liege
character_event = {
	id = soh.4537
	desc = EVTDESC_SOH_4537
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4537 # Curses!
		
		prestige = -1000
	}
}

# Vassals upset by eunuch - liege
character_event = {
	id = soh.4538
	desc = EVTDESC_SOH_4538
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4538 # Curses!
		
		any_realm_lord = {
			limit = {
				higher_tier_than = baron
			}
			opinion = {
				who = ROOT
				modifier = ci_upset_vassal
			}
			if = {
				limit = {
					ai = no
				}
				character_event = { id = soh.4539 } # Inform vassals
			}
		}
	}
}

# Vassals upset by eunuch - vassals
character_event = {
	id = soh.4539
	desc = EVTDESC_SOH_4539
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4539 # I wouldn't normally trust a eunuch, but...
		
		opinion = {
			who = FROM
			modifier = ci_upset_vassal
		}
	}
}



##### Grand Chancellor does the thing

### Approaching liege

# Do you want to approach your liege?
character_event = {
	id = soh.4540
	desc = EVTDESC_SOH_4540
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4540 # Yes!
		
		FROM = {
			character_event = { id = soh.4541 } # Liege approached
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.01
				OR = {
					any_friend = {
						character = FROM
					}
					any_lover = {
						character = FROM
					}
				}
			}
			modifier = {
				factor = 0
				trait = content
				NOR = {
					any_rival = {
						character = FROM
					}
					NOT = {
						opinion = {
							who = FROM
							value = 25
						}
					}
				}
			}
			modifier = {
				factor = 10
				has_position = malcontent
			}
			modifier = {
				factor = 5
				trait = envious
			}
			modifier = {
				factor = 5
				trait = schemer
			}
			modifier = {
				factor = 2
				trait = greedy
			}
			modifier = {
				factor = 2
				trait = arbitrary
			}
			modifier = {
				factor = 10
				trait = ambitious
			}
			modifier = {
				factor = 0.2
				trait = just
			}
			modifier = {
				factor = 0.5
				trait = slothful
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_4540 # No!
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.001
				any_rival = {
					character = FROM
				}
			}
			modifier = {
				factor = 10
				trait = content
			}
			modifier = {
				factor = 0.1
				NOT = {
					opinion = {
						who = FROM
						value = -25
					}
				}
			}
		}
	}
}

# Approached by Grand Chancellor
character_event = {
	id = soh.4541
	desc = EVTDESC_SOH_4541
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	immediate = {
		add_character_modifier = {
			modifier = recently_approached_by_grand_chancellor
			years = 10
		}
		clr_character_flag = ci_law_grace
		clr_character_flag = ci_law_marriage
		clr_character_flag = ci_law_grant_favor
		clr_character_flag = ci_law_cancel_favor
		clr_character_flag = ci_law_fire_rival
		clr_character_flag = ci_law_prestige
		clr_character_flag = ci_law_bribe
		clr_character_flag = ci_law_diplomacy
		clr_character_flag = ci_law_intrigue
		# Pick up to two special approaches
		
		random_list = {
			10 = {
				modifier = {
					factor = 0
					is_chinese_emperor_trigger = no
				}
				set_character_flag = ci_law_grace
			}
			10 = {
				modifier = {
					factor = 0
					is_chinese_emperor_trigger = no
				}
				modifier = {
					factor = 0
					NOT = {
						any_dynasty_member = {
							is_adult = yes
							is_female = yes
							is_married = no
							is_consort = no
							is_betrothed = no
							trait = dragon_bride_unmarried
							prisoner = no
							NOT = {
								any_close_relative = {
									character = FROM
								}
							}
							NOT = {
								age = 35
							}
						}
					}
				}
				modifier = {
					factor = 0
					FROM = {
						NOR = {
							AND = {
								is_female = no
								OR = {
									is_married = no
									AND = {
										OR = {
											religion_group = muslim
											has_religion_feature = religion_harems
											has_religion_feature = religion_feature_zun
											has_religion_feature = religion_feature_tengri
										}
										NOT = {
											num_of_spouses = 4
										}
									}
								}
							}
							any_child = {
								is_adult = yes
								is_female = no
								host = {
									character = FROM
								}
								is_landed = no
								prisoner = no
								dynasty = PREV
								NOT = {
									trait = bastard
								}
								OR = {
									is_married = no
									AND = {
										OR = {
											religion_group = muslim
											has_religion_feature = religion_harems
											has_religion_feature = religion_feature_zun
											has_religion_feature = religion_feature_tengri
										}
										NOT = {
											num_of_spouses = 4
										}
									}
								}
							}
						}
					}
				}
				set_character_flag = ci_law_marriage
				random_dynasty_member = {
					limit = {
						is_adult = yes
						is_female = yes
						is_married = no
						is_consort = no
						is_betrothed = no
						trait = dragon_bride_unmarried
						prisoner = no
						NOT = {
							any_close_relative = {
								character = FROM
							}
						}
						NOT = {
							age = 35
						}
					}
					preferred_limit = {
						any_close_relative = {
							character = ROOT
						}
						NOT = {
							age = 20
						}
					}
					preferred_limit = {
						any_close_relative = {
							character = ROOT
						}
						NOT = {
							age = 25
						}
					}
					preferred_limit = {
						any_close_relative = {
							character = ROOT
						}
						NOT = {
							age = 30
						}
					}
					preferred_limit = {
						NOT = {
							age = 20
						}
					}
					preferred_limit = {
						NOT = {
							age = 25
						}
					}
					preferred_limit = {
						NOT = {
							age = 30
						}
					}
					save_event_target_as = bride_to_be
				}
				if = {
					limit = {
						FROM = {
							is_female = no
							OR = {
								is_married = no
								AND = {
									OR = {
										religion_group = muslim
										has_religion_feature = religion_harems
										has_religion_feature = religion_feature_zun
										has_religion_feature = religion_feature_tengri
									}
									NOT = {
										num_of_spouses = 4
									}
								}
							}
						}
					}
					FROM = {
						save_event_target_as = husband_to_be
					}
				}
				else = {
					FROM = {
						random_child = {
							limit = {
								is_adult = yes
								is_female = no
								host = {
									character = FROM
								}
								is_landed = no
								prisoner = no
								dynasty = PREV
								NOT = {
									trait = bastard
								}
								OR = {
									is_married = no
									AND = {
										OR = {
											religion_group = muslim
											has_religion_feature = religion_harems
											has_religion_feature = religion_feature_zun
											has_religion_feature = religion_feature_tengri
										}
										NOT = {
											num_of_spouses = 4
										}
									}
								}
							}
							preferred_limit = {
								is_married = no
								NOT = {
									num_of_consorts > 0
								}
								NOT = {
									any_child_even_if_dead = {
										is_alive = yes
									}
								}
								NOT = {
									any_sibling = {
										is_female = no
										is_older_than = PREV
									}
								}
							}
							preferred_limit = {
								is_married = no
								NOT = {
									any_child_even_if_dead = {
										is_alive = yes
									}
								}
								NOT = {
									any_sibling = {
										is_female = no
										is_older_than = PREV
									}
								}
							}
							preferred_limit = {
								is_married = no
								NOT = {
									num_of_consorts > 0
								}
								NOT = {
									any_sibling = {
										is_female = no
										is_older_than = PREV
									}
								}
							}
							preferred_limit = {
								is_married = no
								NOT = {
									num_of_consorts > 0
								}
							}
							preferred_limit = {
								is_married = no
							}
							save_event_target_as = husband_to_be
						}
					}
				}
			}
			10 = {
				modifier = {
					factor = 0
					owes_favor_to = FROM # Can't
				}
				set_character_flag = ci_law_grant_favor
			}
			10 = {
				modifier = {
					factor = 0
					holds_favor_on = FROM # Can't
				}
				set_character_flag = ci_law_cancel_favor
			}
			10 = {
				modifier = {
					factor = 0
					NOT = {
						any_voter = {
							OR = {
								any_rival = {
									character = FROM
								}
								NOT = {
									reverse_opinion = {
										who = FROM
										value = -50
									}
								}
							}
						}
					}
				}
				set_character_flag = ci_law_fire_rival
				random_voter = {
					limit = {
						OR = {
							any_rival = {
								character = FROM
							}
							NOT = {
								reverse_opinion = {
									who = FROM
									value = -50
								}
							}
						}
					}
					preferred_limit = {
						NOR = {
							any_friend = {
								character = ROOT
							}
							any_lover = {
								character = ROOT
							}
						}
					}
					save_event_target_as = councillor_to_fire
				}
			}
			20 = {
				# Nothing
			}
		}
		random_list = {
			10 = {
				modifier = {
					factor = 0
					NOR = {
						prestige = 1000
						AND = {
							learning = 20
							prestige = 500
						}
					}
				}
				set_character_flag = ci_law_prestige
			}
			10 = {
				modifier = {
					factor = 0
					NOR = {
						wealth = 1000
						AND = {
							stewardship = 20
							wealth = 500
						}
					}
				}
				set_character_flag = ci_law_bribe
			}
			10 = {
				modifier = {
					factor = 0.1
					NOT = {
						diplomacy = 10
					}
				}
				set_character_flag = ci_law_diplomacy
			}
			10 = {
				modifier = {
					factor = 0.1
					NOT = {
						intrigue = 10
					}
				}
				set_character_flag = ci_law_intrigue
			}
			20 = {
				# Nothing
			}
		}
	}
		
	option = {
		name = EVTOPTA_SOH_4541 # You make a good case!
		
		if = {
			limit = {
				primary_title = {
					has_law = grand_chancellor_law_0
				}
			}
			primary_title = {
				add_law_w_cooldown = grand_chancellor_law_1
			}
		}
		else_if = {
			limit = {
				primary_title = {
					has_law = grand_chancellor_law_1
				}
			}
			primary_title = {
				add_law_w_cooldown = grand_chancellor_law_2
			}
		}
		
		FROM = {
			character_event = { id = soh.4542 } # Inform GC
		}
		
		any_realm_lord = {
			limit = {
				ai = no
				NOT = {
					character = FROM
				}
			}
			character_event = { id = soh.4655 } # Inform player lords
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.1
				has_law = grand_chancellor_law_1
			}
			modifier = {
				factor = 0.01
				trait = proud
			}
			modifier = {
				factor = 0.01
				trait = ambitious
			}
			modifier = {
				factor = 0.01
				any_rival = {
					character = FROM
				}
			}
			modifier = {
				factor = 10
				trait = slothful
			}
			modifier = {
				factor = 5
				trait = content
			}
			modifier = {
				factor = 10
				trait = trusting
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 2
				OR = {
					any_friend = {
						character = FROM
					}
					any_lover = {
						character = FROM
					}
				}
			}
			modifier = {
				factor = 10
				is_dumb_trigger = yes
			}
			modifier = {
				factor = 0.1
				has_character_modifier = mandate_of_heaven_5
			}
			modifier = {
				factor = 0.2
				has_character_modifier = mandate_of_heaven_4
			}
			modifier = {
				factor = 0.5
				has_character_modifier = mandate_of_heaven_3
			}
		}
	}
	
	option = {
		trigger = {
			has_character_flag = ci_law_grace
		}
		name = EVTOPTB_SOH_4541 # Here; have some Grace and forget all about this!
		
		FROM = {
			character_event = { id = soh.4543 } # Inform GC
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.01
				any_rival = {
					character = FROM
				}
			}
			modifier = {
				factor = 5
				trait = content
			}
			modifier = {
				factor = 10
				trait = trusting
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 0.1
				has_character_modifier = mandate_of_heaven_5
			}
			modifier = {
				factor = 0.2
				has_character_modifier = mandate_of_heaven_4
			}
			modifier = {
				factor = 0.5
				has_character_modifier = mandate_of_heaven_3
			}
		}
	}
	
	option = {
		trigger = {
			has_character_flag = ci_law_marriage
			event_target:husband_to_be = {
				character = FROM
			}
		}
		name = EVTOPTC_SOH_4541 # I'll give you a marriage instead!
		
		event_target:husband_to_be = {
			add_spouse = event_target:bride_to_be
		}
		
		FROM = {
			character_event = { id = soh.4544 } # Inform GC
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.01
				any_rival = {
					character = FROM
				}
			}
			modifier = {
				factor = 5
				trait = content
			}
			modifier = {
				factor = 10
				trait = trusting
			}
			modifier = {
				factor = 0.01
				trait = paranoid
			}
			modifier = {
				factor = 5
				trait = humble
			}
			modifier = {
				factor = 0.1
				trait = proud
			}
			modifier = {
				factor = 0.1
				has_character_modifier = mandate_of_heaven_5
			}
			modifier = {
				factor = 0.2
				has_character_modifier = mandate_of_heaven_4
			}
			modifier = {
				factor = 0.5
				has_character_modifier = mandate_of_heaven_3
			}
			modifier = {
				factor = 10
				OR = {
					any_friend = {
						character = FROM
					}
					any_lover = {
						character = FROM
					}
				}
			}
			modifier = {
				factor = 10
				is_dumb_trigger = yes
			}
		}
	}
	
	option = {
		trigger = {
			has_character_flag = ci_law_marriage
			event_target:husband_to_be = {
				NOT = {
					character = FROM
				}
			}
		}
		name = EVTOPTD_SOH_4541 # I'll give your son a marriage instead!
		
		event_target:husband_to_be = {
			add_spouse = event_target:bride_to_be
		}
		
		FROM = {
			character_event = { id = soh.4545 } # Inform GC
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.01
				any_rival = {
					character = FROM
				}
			}
			modifier = {
				factor = 0.01
				any_rival = {
					character = event_target:husband_to_be
				}
			}
			modifier = {
				factor = 5
				trait = content
			}
			modifier = {
				factor = 10
				trait = trusting
			}
			modifier = {
				factor = 0.01
				trait = paranoid
			}
			modifier = {
				factor = 5
				trait = humble
			}
			modifier = {
				factor = 0.1
				trait = proud
			}
			modifier = {
				factor = 0.1
				has_character_modifier = mandate_of_heaven_5
			}
			modifier = {
				factor = 0.2
				has_character_modifier = mandate_of_heaven_4
			}
			modifier = {
				factor = 0.5
				has_character_modifier = mandate_of_heaven_3
			}
			modifier = {
				factor = 10
				OR = {
					any_friend = {
						character = FROM
					}
					any_lover = {
						character = FROM
					}
				}
			}
			modifier = {
				factor = 10
				OR = {
					any_friend = {
						character = event_target:husband_to_be
					}
					any_lover = {
						character = event_target:husband_to_be
					}
				}
			}
			modifier = {
				factor = 10
				is_dumb_trigger = yes
			}
		}
	}
	
	option = {
		trigger = {
			has_character_flag = ci_law_grant_favor
		}
		name = EVTOPTE_SOH_4541 # Forget about this and I'll grant you a Favor!
		
		FROM = {
			add_favor = ROOT
			character_event = { id = soh.4546 } # Inform GC
		}
				
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.01
				trait = paranoid
			}
			modifier = {
				factor = 0.01
				any_rival = {
					character = FROM
				}
			}
			modifier = {
				factor = 5
				trait = content
			}
			modifier = {
				factor = 10
				trait = trusting
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 2
				OR = {
					any_friend = {
						character = FROM
					}
					any_lover = {
						character = FROM
					}
				}
			}
			modifier = {
				factor = 10
				is_dumb_trigger = yes
			}
		}
	}
	
	option = {
		trigger = {
			has_character_flag = ci_law_cancel_favor
		}
		name = EVTOPTF_SOH_4541 # You owe me; forget all about this and we're even!
		
		remove_favor = FROM
		
		FROM = {
			character_event = { id = soh.4547 } # Inform GC
		}
				
		ai_chance = {
			factor = 100
		}
	}
	
	option = {
		trigger = {
			has_character_flag = ci_law_fire_rival
		}
		name = EVTOPTG_SOH_4541 # Forget about this, and your rival will be fired!
		
		event_target:councillor_to_fire = {
			character_event = { id = soh.4548 } # Inform the fired councillor
			fire_councillor_effect = yes
		}
		
		FROM = {
			character_event = { id = soh.4549 } # Inform GC
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 100
				event_target:councillor_to_fire = {
					any_rival = {
						character = ROOT
					}
				}
			}
			modifier = {
				factor = 10
				event_target:councillor_to_fire = {
					has_position = malcontent
				}
			}
			modifier = {
				factor = 0.1
				event_target:councillor_to_fire = {
					has_position = loyalist
				}
			}
			modifier = {
				factor = 0.01
				event_target:councillor_to_fire = {
					OR = {
						any_friend = {
							character = ROOT
						}
						any_lover = {
							character = ROOT
						}
					}
				}
				NOT = {
					trait = arbitrary
				}
			}
			modifier = {
				factor = 0.01
				any_rival = {
					character = FROM
				}
			}
			modifier = {
				factor = 0.2
				event_target:councillor_to_fire = {
					is_powerful_vassal = yes
				}
				FROM = {
					is_smart_trigger = no
				}
			}
			modifier = {
				factor = 0.1
				has_character_modifier = mandate_of_heaven_5
			}
			modifier = {
				factor = 0.2
				has_character_modifier = mandate_of_heaven_4
			}
			modifier = {
				factor = 0.5
				has_character_modifier = mandate_of_heaven_3
			}
		}
	}
	
	option = {
		trigger = {
			has_character_flag = ci_law_prestige
		}
		name = EVTOPTH_SOH_4541 # I can refuse this using assorted means...
		
		if = {
			limit = {
				learning = 20
			}
			scaled_prestige = {
				value = -1
				min = -500
			}
		}
		else = {
			scaled_prestige = {
				value = -2
				min = -1000
			}
		}
		
		FROM = {
			character_event = { id = soh.4550 } # Inform GC
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.01
				trait = proud
			}
			modifier = {
				factor = 5
				trait = content
			}
			modifier = {
				factor = 100
				trait = humble
			}
			modifier = {
				factor = 10
				is_smart_trigger = yes
			}
		}
	}
	
	option = {
		trigger = {
			has_character_flag = ci_law_bribe
		}
		name = EVTOPTI_SOH_4541 # I think this will make you reconsider...
		
		if = {
			limit = {
				stewardship = 20
			}
			transfer_scaled_wealth = {
				to = FROM
				value = 0.5
				min = 500
			}
		}
		else = {
			transfer_scaled_wealth = {
				to = FROM
				value = 1
				min = 1000
			}
		}
		
		FROM = {
			character_event = { id = soh.4551 } # Inform GC
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.01
				trait = greedy
			}
			modifier = {
				factor = 5
				trait = content
			}
			modifier = {
				factor = 100
				trait = charitable
			}
			modifier = {
				factor = 2
				is_smart_trigger = yes
			}
		}
	}
	
	option = {
		trigger = {
			has_character_flag = ci_law_diplomacy
		}
		name = EVTOPTJ_SOH_4541 # I'm sure you'll reconsider when I tell you this!
		
		random_list = {
			50 = {
				modifier = {
					factor = 2
					diplomacy = 15
				}
				modifier = {
					factor = 2
					diplomacy = 20
				}
				modifier = {
					factor = 2
					diplomacy = 25
				}
				modifier = {
					factor = 2
					diplomacy = 30
				}
				FROM = {
					character_event = { id = soh.4552 } # It worked!
				}
			}
			50 = {
				modifier = {
					factor = 2
					NOT = {
						diplomacy = 10
					}
				}
				modifier = {
					factor = 2
					NOT = {
						diplomacy = 5
					}
				}
				FROM = {
					character_event = { id = soh.4554 } # GC gets upset
				}
			}
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.01
				trait = shy
			}
			modifier = {
				factor = 10
				trait = proud
			}
			modifier = {
				factor = 100
				trait = gregarious
			}
			modifier = {
				factor = 2
				is_smart_trigger = yes
			}
			modifier = {
				factor = 10
				trait = socializer
			}
			modifier = {
				factor = 2
				has_education_diplomacy_trigger = yes
			}
			modifier = {
				factor = 2
				has_lifestyle_diplomacy_trigger = yes
			}
		}
	}
	
	option = {
		trigger = {
			has_character_flag = ci_law_intrigue
		}
		name = EVTOPTK_SOH_4541 # It'd be a shame if something happened...
		
		random_list = {
			50 = {
				modifier = {
					factor = 2
					intrigue = 15
				}
				modifier = {
					factor = 2
					intrigue = 20
				}
				modifier = {
					factor = 2
					intrigue = 25
				}
				modifier = {
					factor = 2
					intrigue = 30
				}
				FROM = {
					character_event = { id = soh.4556 } # It worked!
				}
			}
			50 = {
				modifier = {
					factor = 2
					NOT = {
						intrigue = 10
					}
				}
				modifier = {
					factor = 2
					NOT = {
						intrigue = 5
					}
				}
				FROM = {
					character_event = { id = soh.4558 } # GC gets upset and asks again
				}
			}
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.01
				trait = shy
			}
			modifier = {
				factor = 10
				trait = proud
			}
			modifier = {
				factor = 100
				trait = gregarious
			}
			modifier = {
				factor = 2
				is_smart_trigger = yes
			}
			modifier = {
				factor = 10
				trait = schemer
			}
			modifier = {
				factor = 2
				has_education_intrigue_trigger = yes
			}
			modifier = {
				factor = 2
				has_lifestyle_intrigue_trigger = yes
			}
			modifier = {
				factor = 0.01
				FROM = {
					OR = {
						any_friend = {
							character = ROOT
						}
						any_lover = {
							character = ROOT
						}
					}
				}
			}
			modifier = {
				factor = 100
				FROM = {
					any_rival = {
						character = ROOT
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTL_SOH_4541 # Never!
		
		character_event = { id = soh.4560 } # Fallout - no offset!
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 10
				trait = brave
			}
			modifier = {
				factor = 10
				trait = proud
			}
			modifier = {
				factor = 10
				trait = ambitious
			}
			modifier = {
				factor = 100
				trait = paranoid
			}
			modifier = {
				factor = 100
				any_rival = {
					character = FROM
				}
			}
			modifier = {
				factor = 0.1
				trait = craven
			}
			modifier = {
				factor = 0.1
				trait = trusting
			}
			modifier = {
				factor = 0.1
				trait = slothful
			}
			modifier = {
				factor = 0.1
				trait = humble
			}
			modifier = {
				factor = 2
				is_smart_trigger = yes
			}
		}
	}
}

# Liege accepted
character_event = {
	id = soh.4542
	desc = EVTDESC_SOH_4542
	picture = GFX_evt_china_diplomatic_success
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4542 # Mwahahaha! Etc.
	}
}

# Got Grace
character_event = {
	id = soh.4543
	desc = EVTDESC_SOH_4543
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4543 # I suppose I can work with this...
		
		add_grace_massive_effect = yes
	}
}

# Got an Imperial Marriage
character_event = {
	id = soh.4544
	desc = EVTDESC_SOH_4544
	picture = GFX_evt_chinese_concubine
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4544 # I think this could be advantageous...
		
		add_spouse = event_target:bride_to_be
	}
}

# Son got an Imperial Marriage
character_event = {
	id = soh.4545
	desc = EVTDESC_SOH_4545
	picture = GFX_evt_chinese_concubine
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4545 # I think this could be advantageous...
		
		event_target:husband_to_be = {
			add_spouse = event_target:bride_to_be
		}
	}
}

# Got a Favor
character_event = {
	id = soh.4546
	desc = EVTDESC_SOH_4546
	picture = GFX_evt_china_golden_age
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4546 # I think this could be advantageous...
	}
}

# Liege cancelled Favor
character_event = {
	id = soh.4547
	desc = EVTDESC_SOH_4547
	picture = GFX_evt_china_golden_age
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4547 # I suppose that's that...
	}
}

# Fired rival informed
character_event = {
	id = soh.4548
	desc = EVTDESC_SOH_4548
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4548 # Curse both their names!
		
		opinion = {
			who = FROMFROM
			modifier = got_me_fired
		}
	}
}

# Liege fired rival
character_event = {
	id = soh.4549
	desc = EVTDESC_SOH_4549
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4549 # I think this could be advantageous...
	}
}

# Got a bribe
character_event = {
	id = soh.4550
	desc = EVTDESC_SOH_4550
	picture = GFX_evt_china_diplomatic_success
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4550 # I think this could be advantageous...
	}
}

# Liege spent prestige
character_event = {
	id = soh.4551
	desc = EVTDESC_SOH_4551
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4551 # Well, that's that...
	}
}

# Liege convincingly used diplomacy
character_event = {
	id = soh.4552
	desc = EVTDESC_SOH_4552
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4552 # Well, that's that...
		
		FROM = {
			character_event = { id = soh.4553 } # Inform liege
		}
	}
}

# Liege convincingly used diplomacy - liege
character_event = {
	id = soh.4553
	desc = EVTDESC_SOH_4553
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4553 # And here I thought FROM never would buy it!
	}
}

# Liege tried to use diplomacy but failed
character_event = {
	id = soh.4554
	desc = EVTDESC_SOH_4554
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4554 # That was unconvincing; I'll ask again!
		
		opinion = {
			who = FROM
			modifier = unconvincing_diplomacy
		}
		
		FROM = {
			character_event = { id = soh.4555 } # Liege asked again
		}
	}
}

# Asked again
character_event = {
	id = soh.4555
	desc = EVTDESC_SOH_4555
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
		
	option = {
		name = EVTOPTA_SOH_4555 # You make a good case!
		
		if = {
			limit = {
				primary_title = {
					has_law = grand_chancellor_law_0
				}
			}
			primary_title = {
				add_law_w_cooldown = grand_chancellor_law_1
			}
		}
		else_if = {
			limit = {
				primary_title = {
					has_law = grand_chancellor_law_1
				}
			}
			primary_title = {
				add_law_w_cooldown = grand_chancellor_law_2
			}
		}
		
		FROM = {
			character_event = { id = soh.4542 } # Inform GC
		}
		
		any_realm_lord = {
			limit = {
				ai = no
				NOT = {
					character = FROM
				}
			}
			character_event = { id = soh.4655 } # Inform player lords
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.1
				has_law = grand_chancellor_law_1
			}
			modifier = {
				factor = 0.01
				trait = proud
			}
			modifier = {
				factor = 0.01
				trait = ambitious
			}
			modifier = {
				factor = 0.01
				any_rival = {
					character = FROM
				}
			}
			modifier = {
				factor = 10
				trait = slothful
			}
			modifier = {
				factor = 5
				trait = content
			}
			modifier = {
				factor = 10
				trait = trusting
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 2
				OR = {
					any_friend = {
						character = FROM
					}
					any_lover = {
						character = FROM
					}
				}
			}
			modifier = {
				factor = 10
				is_dumb_trigger = yes
			}
			modifier = {
				factor = 0.1
				has_character_modifier = mandate_of_heaven_5
			}
			modifier = {
				factor = 0.2
				has_character_modifier = mandate_of_heaven_4
			}
			modifier = {
				factor = 0.5
				has_character_modifier = mandate_of_heaven_3
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_4555 # Never!
		
		character_event = { id = soh.4560 } # Fallout - no offset!
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 10
				trait = brave
			}
			modifier = {
				factor = 10
				trait = proud
			}
			modifier = {
				factor = 10
				trait = ambitious
			}
			modifier = {
				factor = 100
				trait = paranoid
			}
			modifier = {
				factor = 100
				any_rival = {
					character = FROM
				}
			}
			modifier = {
				factor = 0.1
				trait = craven
			}
			modifier = {
				factor = 0.1
				trait = trusting
			}
			modifier = {
				factor = 0.1
				trait = slothful
			}
			modifier = {
				factor = 0.1
				trait = humble
			}
			modifier = {
				factor = 2
				is_smart_trigger = yes
			}
		}
	}
}

# Liege convincingly used intrigue
character_event = {
	id = soh.4556
	desc = EVTDESC_SOH_4556
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4556 # Well, that's that...
		
		FROM = {
			character_event = { id = soh.4557 } # Inform liege
		}
	}
}

# Liege convincingly used intrigue - liege
character_event = {
	id = soh.4557
	desc = EVTDESC_SOH_4557
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4557 # And here I thought FROM never would buy it!
	}
}

# Liege tried to use intrigue but failed
character_event = {
	id = soh.4558
	desc = EVTDESC_SOH_4558
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4558 # That was unconvincing; I'll ask again!
		
		opinion = {
			who = FROM
			modifier = unconvincing_intrigue
		}
		
		FROM = {
			character_event = { id = soh.4559 } # Liege asked again
		}
	}
}

# Asked again
character_event = {
	id = soh.4559
	desc = EVTDESC_SOH_4559
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
		
	option = {
		name = EVTOPTA_SOH_4559 # You make a good case!
		
		if = {
			limit = {
				primary_title = {
					has_law = grand_chancellor_law_0
				}
			}
			primary_title = {
				add_law_w_cooldown = grand_chancellor_law_1
			}
		}
		else_if = {
			limit = {
				primary_title = {
					has_law = grand_chancellor_law_1
				}
			}
			primary_title = {
				add_law_w_cooldown = grand_chancellor_law_2
			}
		}
		
		FROM = {
			character_event = { id = soh.4542 } # Inform GC
		}
		
		any_realm_lord = {
			limit = {
				ai = no
				NOT = {
					character = FROM
				}
			}
			character_event = { id = soh.4655 } # Inform player lords
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.1
				has_law = grand_chancellor_law_1
			}
			modifier = {
				factor = 0.01
				trait = proud
			}
			modifier = {
				factor = 0.01
				trait = ambitious
			}
			modifier = {
				factor = 0.01
				any_rival = {
					character = FROM
				}
			}
			modifier = {
				factor = 10
				trait = slothful
			}
			modifier = {
				factor = 5
				trait = content
			}
			modifier = {
				factor = 10
				trait = trusting
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 2
				OR = {
					any_friend = {
						character = FROM
					}
					any_lover = {
						character = FROM
					}
				}
			}
			modifier = {
				factor = 10
				is_dumb_trigger = yes
			}
			modifier = {
				factor = 0.1
				has_character_modifier = mandate_of_heaven_5
			}
			modifier = {
				factor = 0.2
				has_character_modifier = mandate_of_heaven_4
			}
			modifier = {
				factor = 0.5
				has_character_modifier = mandate_of_heaven_3
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_4559 # Never!
		
		character_event = { id = soh.4560 } # Fallout - no offset!
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 10
				trait = brave
			}
			modifier = {
				factor = 10
				trait = proud
			}
			modifier = {
				factor = 10
				trait = ambitious
			}
			modifier = {
				factor = 100
				trait = paranoid
			}
			modifier = {
				factor = 100
				any_rival = {
					character = FROM
				}
			}
			modifier = {
				factor = 0.1
				trait = craven
			}
			modifier = {
				factor = 0.1
				trait = trusting
			}
			modifier = {
				factor = 0.1
				trait = slothful
			}
			modifier = {
				factor = 0.1
				trait = humble
			}
			modifier = {
				factor = 2
				is_smart_trigger = yes
			}
		}
	}
}

### Liege refused - fallout

# Hidden event for liege to decide on fallout
character_event = {
	id = soh.4560
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		OR = {
			government = chinese_imperial_government
			government = eastern_imperial_government
		}
	}
	
	immediate = {
		random_list = {
			25 = {
				modifier = {
					factor = 0
					any_rival = {
						character = FROMFROM
					}
				}
				FROMFROM = {
					character_event = { id = soh.4561 } # GC just shrugs
				}
			}
			25 = {
				modifier = {
					factor = 0
					OR = {
						any_friend = {
							character = FROMFROM
						}
						any_lover = {
							character = FROMFROM
						}
					}
				}
				FROMFROM = {
					character_event = { id = soh.4563 } # GC greatly upset
				}
			}
			10 = {
				modifier = {
					factor = 0
					OR = {
						any_rival = {
							character = FROMFROM
						}
						any_friend = {
							character = FROMFROM
						}
						any_lover = {
							character = FROMFROM
						}
					}
				}
				FROMFROM = {
					character_event = { id = soh.4565 } # GC might rival liege
				}
			}
			10 = {
				modifier = {
					factor = 0
					NOT = {
						any_friend = {
							character = FROMFROM
						}
					}
				}
				FROMFROM = {
					character_event = { id = soh.4567 } # GC might end friendship
				}
			}
			10 = {
				modifier = {
					factor = 0
					NOT = {
						any_lover = {
							character = FROMFROM
						}
					}
				}
				FROMFROM = {
					character_event = { id = soh.4569 } # GC might stop being their liege's lover
				}
			}
			10 = {
				modifier = {
					factor = 0
					OR = {
						any_friend = {
							character = FROMFROM
						}
						any_lover = {
							character = FROMFROM
						}
					}
				}
				FROMFROM = {
					character_event = { id = soh.4571 } # GC might make vassals upset
				}
			}
			10 = {
				modifier = {
					factor = 0
					OR = {
						any_friend = {
							character = FROMFROM
						}
						any_lover = {
							character = FROMFROM
						}
					}
				}
				FROMFROM = {
					character_event = { id = soh.4574 } # GC might discredit liege
				}
			}
			10 = {
				modifier = {
					factor = 0
					FROMFROM = {
						OR = {
							trait = celibate
							trait = eunuch
						}
					}
				}
				modifier = {
					factor = 0
					NOR = {
						any_spouse = {
							is_landed = no
							prisoner = no
							host = {
								character = ROOT
							}
							NOR = {
								any_lover = {
									character = FROMFROM
								}
								is_close_relative = FROMFROM
							}
							OR = {
								AND = {
									is_female = yes
									NOT = {
										trait = homosexual
									}
									FROMFROM = {
										is_female = no
										NOT = {
											trait = homosexual
										}
									}
								}
								AND = {
									is_female = no
									NOT = {
										trait = homosexual
									}
									FROMFROM = {
										is_female = yes
										NOT = {
											trait = homosexual
										}
									}
								}
								AND = {
									is_female = yes
									trait = homosexual
									FROMFROM = {
										is_female = yes
										trait = homosexual
									}
								}
								AND = {
									is_female = no
									trait = homosexual
									FROMFROM = {
										is_female = no
										trait = homosexual
									}
								}
							}
						}
						any_consort = {
							is_landed = no
							prisoner = no
							host = {
								character = ROOT
							}
							NOR = {
								any_lover = {
									character = FROMFROM
								}
								is_close_relative = FROMFROM
							}
							OR = {
								AND = {
									is_female = yes
									NOT = {
										trait = homosexual
									}
									FROMFROM = {
										is_female = no
										NOT = {
											trait = homosexual
										}
									}
								}
								AND = {
									is_female = no
									NOT = {
										trait = homosexual
									}
									FROMFROM = {
										is_female = yes
										NOT = {
											trait = homosexual
										}
									}
								}
								AND = {
									is_female = yes
									trait = homosexual
									FROMFROM = {
										is_female = yes
										trait = homosexual
									}
								}
								AND = {
									is_female = no
									trait = homosexual
									FROMFROM = {
										is_female = no
										trait = homosexual
									}
								}
							}
						}
					}
				}
				random_list = {
					50 = {
						modifier = {
							factor = 0
							NOT = {
								any_spouse = {
									is_landed = no
									prisoner = no
									host = {
										character = ROOT
									}
									NOR = {
										any_lover = {
											character = FROMFROM
										}
										is_close_relative = FROMFROM
									}
									OR = {
										AND = {
											is_female = yes
											NOT = {
												trait = homosexual
											}
											FROMFROM = {
												is_female = no
												NOT = {
													trait = homosexual
												}
											}
										}
										AND = {
											is_female = no
											NOT = {
												trait = homosexual
											}
											FROMFROM = {
												is_female = yes
												NOT = {
													trait = homosexual
												}
											}
										}
										AND = {
											is_female = yes
											trait = homosexual
											FROMFROM = {
												is_female = yes
												trait = homosexual
											}
										}
										AND = {
											is_female = no
											trait = homosexual
											FROMFROM = {
												is_female = no
												trait = homosexual
											}
										}
									}
								}
							}
						}
						random_spouse = {
							limit = {
								is_landed = no
								prisoner = no
								host = {
									character = ROOT
								}
								NOR = {
									any_lover = {
										character = FROMFROM
									}
									is_close_relative = FROMFROM
								}
								OR = {
									AND = {
										is_female = yes
										NOT = {
											trait = homosexual
										}
										FROMFROM = {
											is_female = no
											NOT = {
												trait = homosexual
											}
										}
									}
									AND = {
										is_female = no
										NOT = {
											trait = homosexual
										}
										FROMFROM = {
											is_female = yes
											NOT = {
												trait = homosexual
											}
										}
									}
									AND = {
										is_female = yes
										trait = homosexual
										FROMFROM = {
											is_female = yes
											trait = homosexual
										}
									}
									AND = {
										is_female = no
										trait = homosexual
										FROMFROM = {
											is_female = no
											trait = homosexual
										}
									}
								}
							}
							preferred_limit = {
								trait = lustful
								NOT = {
									trait = celibate
								}
								NOT = {
									any_rival = {
										character = FROMFROM
									}
								}
								NOT = {
									age = 35
								}
								is_attractive_trigger = yes
								is_unattractive_trigger = no
							}
							preferred_limit = {
								NOT = {
									trait = chaste
								}
								NOT = {
									trait = celibate
								}
								NOT = {
									any_rival = {
										character = FROMFROM
									}
								}
								NOT = {
									age = 35
								}
								is_attractive_trigger = yes
								is_unattractive_trigger = no
							}
							preferred_limit = {
								NOT = {
									trait = celibate
								}
								NOT = {
									any_rival = {
										character = FROMFROM
									}
								}
								NOT = {
									age = 35
								}
								is_attractive_trigger = yes
								is_unattractive_trigger = no
							}
							preferred_limit = {
								NOT = {
									trait = celibate
								}
								NOT = {
									age = 35
								}
								is_attractive_trigger = yes
								is_unattractive_trigger = no
							}
							preferred_limit = {
								NOT = {
									trait = celibate
								}
								NOT = {
									age = 35
								}
								is_attractive_trigger = yes
							}
							preferred_limit = {
								NOT = {
									trait = celibate
								}
								NOT = {
									age = 35
								}
							}
							preferred_limit = {
								NOT = {
									trait = celibate
								}
							}
							save_event_target_as = possible_gc_lover
						}
					}
					50 = {
						modifier = {
							factor = 0
							NOT = {
								any_consort = {
									is_landed = no
									prisoner = no
									host = {
										character = ROOT
									}
									NOR = {
										any_lover = {
											character = FROMFROM
										}
										is_close_relative = FROMFROM
									}
									OR = {
										AND = {
											is_female = yes
											NOT = {
												trait = homosexual
											}
											FROMFROM = {
												is_female = no
												NOT = {
													trait = homosexual
												}
											}
										}
										AND = {
											is_female = no
											NOT = {
												trait = homosexual
											}
											FROMFROM = {
												is_female = yes
												NOT = {
													trait = homosexual
												}
											}
										}
										AND = {
											is_female = yes
											trait = homosexual
											FROMFROM = {
												is_female = yes
												trait = homosexual
											}
										}
										AND = {
											is_female = no
											trait = homosexual
											FROMFROM = {
												is_female = no
												trait = homosexual
											}
										}
									}
								}
							}
						}
						random_consort = {
							limit = {
								is_landed = no
								prisoner = no
								host = {
									character = ROOT
								}
								NOR = {
									any_lover = {
										character = FROMFROM
									}
									is_close_relative = FROMFROM
								}
								OR = {
									AND = {
										is_female = yes
										NOT = {
											trait = homosexual
										}
										FROMFROM = {
											is_female = no
											NOT = {
												trait = homosexual
											}
										}
									}
									AND = {
										is_female = no
										NOT = {
											trait = homosexual
										}
										FROMFROM = {
											is_female = yes
											NOT = {
												trait = homosexual
											}
										}
									}
									AND = {
										is_female = yes
										trait = homosexual
										FROMFROM = {
											is_female = yes
											trait = homosexual
										}
									}
									AND = {
										is_female = no
										trait = homosexual
										FROMFROM = {
											is_female = no
											trait = homosexual
										}
									}
								}
							}
							preferred_limit = {
								trait = lustful
								NOT = {
									trait = celibate
								}
								NOT = {
									any_rival = {
										character = FROMFROM
									}
								}
								NOT = {
									age = 35
								}
								is_attractive_trigger = yes
								is_unattractive_trigger = no
							}
							preferred_limit = {
								NOT = {
									trait = chaste
								}
								NOT = {
									trait = celibate
								}
								NOT = {
									any_rival = {
										character = FROMFROM
									}
								}
								NOT = {
									age = 35
								}
								is_attractive_trigger = yes
								is_unattractive_trigger = no
							}
							preferred_limit = {
								NOT = {
									trait = celibate
								}
								NOT = {
									any_rival = {
										character = FROMFROM
									}
								}
								NOT = {
									age = 35
								}
								is_attractive_trigger = yes
								is_unattractive_trigger = no
							}
							preferred_limit = {
								NOT = {
									trait = celibate
								}
								NOT = {
									age = 35
								}
								is_attractive_trigger = yes
								is_unattractive_trigger = no
							}
							preferred_limit = {
								NOT = {
									trait = celibate
								}
								NOT = {
									age = 35
								}
								is_attractive_trigger = yes
							}
							preferred_limit = {
								NOT = {
									trait = celibate
								}
								NOT = {
									age = 35
								}
							}
							preferred_limit = {
								NOT = {
									trait = celibate
								}
							}
							save_event_target_as = possible_gc_lover
						}
					}
				}
				FROMFROM = {
					character_event = { id = soh.4576 } # GC might attempt to tumble liege's spouse/consort
				}
			}
		}
	}
}

# Grand Chancellor just shrugs - GC
character_event = {
	id = soh.4561
	desc = EVTDESC_SOH_4561
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4561 # Oh, well...
		
		FROM = {
			character_event = { id = soh.4562 } # Inform liege
		}
	}
}

# Grand Chancellor just shrugs - liege
character_event = {
	id = soh.4562
	desc = EVTDESC_SOH_4562
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4562 # I see..
	}
}

# Grand Chancellor greatly upset - GC
character_event = {
	id = soh.4563
	desc = EVTDESC_SOH_4563
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4563 # I will remember this!
		
		opinion = {
			who = FROM
			modifier = ci_greatly_upset
		}
		
		FROM = {
			character_event = { id = soh.4564 } # Inform liege
		}
	}
}

# Grand Chancellor greatly upset - liege
character_event = {
	id = soh.4564
	desc = EVTDESC_SOH_4564
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4564 # Not unexpected...
	}
}

# Become rival with liege (just shrugs is fallback)?
character_event = {
	id = soh.4565
	desc = EVTDESC_SOH_4565
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4565 # I will never forgive this!
		
		add_rival = FROM
		
		FROM = {
			character_event = { id = soh.4566 } # Inform liege
		}
	}
	
	option = {
		name = EVTOPTB_SOH_4565 # I can let it slide...
		
		FROM = {
			character_event = { id = soh.4561 } # Inform liege
		}
		
		ai_chance = {
			factor = 0
		}
	}
}

# Grand Chancellor becomes rival - liege
character_event = {
	id = soh.4566
	desc = EVTDESC_SOH_4566
	picture = GFX_evt_stressed_ruler
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4566 # This could be bad...
		
		add_rival = FROM
	}
}

# End friendship with liege (just shrugs is fallback)?
character_event = {
	id = soh.4567
	desc = EVTDESC_SOH_4567
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4567 # We are no longer friends!
		
		remove_friend = FROM
		
		FROM = {
			character_event = { id = soh.4568 } # Inform liege
		}
	}
	
	option = {
		name = EVTOPTB_SOH_4567 # I can let it slide...
		
		FROM = {
			character_event = { id = soh.4561 } # Inform liege
		}
		
		ai_chance = {
			factor = 0
		}
	}
}

# Grand Chancellor ends friendship - liege
character_event = {
	id = soh.4568
	desc = EVTDESC_SOH_4568
	picture = GFX_evt_stressed_ruler
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4568 # With friends like these...
		
		remove_friend = FROM
	}
}

# Stop being liege's lover (just shrugs is fallback)?
character_event = {
	id = soh.4569
	desc = EVTDESC_SOH_4569
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4569 # I love FROM NOT!
		
		remove_lover = FROM
		
		FROM = {
			character_event = { id = soh.4570 } # Inform liege
		}
	}
	
	option = {
		name = EVTOPTB_SOH_4569 # I can let it slide...
		
		FROM = {
			character_event = { id = soh.4561 } # Inform liege
		}
		
		ai_chance = {
			factor = 0
		}
	}
}

# Grand Chancellor stops being lover - liege
character_event = {
	id = soh.4570
	desc = EVTDESC_SOH_4570
	picture = GFX_evt_stressed_ruler
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4570 # I hate you too!
		
		remove_lover = FROM
	}
}

# Upset vassals (just shrugs is fallback)?
character_event = {
	id = soh.4571
	desc = EVTDESC_SOH_4571
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4571 # Everyone will hear of this!
		
		FROM = {
			character_event = { id = soh.4572 } # Inform liege
		}
	}
	
	option = {
		name = EVTOPTB_SOH_4571 # I can let it slide...
		
		FROM = {
			character_event = { id = soh.4561 } # Inform liege
		}
		
		ai_chance = {
			factor = 0
		}
	}
}

# Grand Chancellor upset vassals - liege
character_event = {
	id = soh.4572
	desc = EVTDESC_SOH_4572
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4572 # Curses!
		
		any_realm_lord = {
			limit = {
				higher_tier_than = baron
			}
			opinion = {
				who = ROOT
				modifier = ci_upset_vassal
			}
			if = {
				limit = {
					ai = no
				}
				character_event = { id = soh.4573 } # Inform vassals
			}
		}
	}
}

# Grand Chancellor upsets vassals - vassals
character_event = {
	id = soh.4573
	desc = EVTDESC_SOH_4573
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4573 # Nobody treats a Grand Chancellor like that!
	}
}

# Discredit liege (just shrugs is fallback)?
character_event = {
	id = soh.4574
	desc = EVTDESC_SOH_4574
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4574 # Everyone will hear of this!
		
		FROM = {
			character_event = { id = soh.4575 } # Inform liege
		}
	}
	
	option = {
		name = EVTOPTB_SOH_4574 # I can let it slide...
		
		FROM = {
			character_event = { id = soh.4561 } # Inform liege
		}
		
		ai_chance = {
			factor = 0
		}
	}
}

# Grand Chancellor discredits liege - liege
character_event = {
	id = soh.4575
	desc = EVTDESC_SOH_4575
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4575 # Curses!
		
		prestige = -1000
	}
}

# Attempt to seduce spouse/consort of liege?
character_event = {
	id = soh.4576
	desc = EVTDESC_SOH_4576
	picture = GFX_evt_chinese_concubine
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4576 # I think I will!
		
		if = {
			limit = {
				trait = chaste
			}
			remove_trait = chaste
		}
		
		FROM = {
			character_event = { id = soh.4577 } # Liege thinks nothing happens
		}
		
		event_target:possible_gc_lover = {
			character_event = { id = soh.4578 } # Spouse/consort approached
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				trait = chaste
			}
			modifier = {
				factor = 0
				trait = celibate
			}
			modifier = {
				factor = 0
				is_ascetic_trigger = yes
				NOT = {
					trait = lustful
				}
			}
			modifier = {
				factor = 0.1
				event_target:possible_gc_lover = {
					is_unattractive_trigger = yes
				}
			}
			modifier = {
				factor = 5
				event_target:possible_gc_lover = {
					is_attractive_trigger = yes
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_4576 # Absolutely not!
		
		FROM = {
			character_event = { id = soh.4561 } # Inform liege
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				trait = lustful
				event_target:possible_gc_lover = {
					is_unattractive_trigger = no
				}
			}
			modifier = {
				factor = 0
				OR = {
					trait = seducer
					trait = seductress
				}
				event_target:possible_gc_lover = {
					is_unattractive_trigger = no
				}
			}
		}
	}
}

# Liege thinks nothing happens
character_event = {
	id = soh.4577
	desc = EVTDESC_SOH_4577
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4577 # I see...
	}
}

# Spouse/consort approached
character_event = {
	id = soh.4578
	desc = EVTDESC_SOH_4578
	picture = GFX_evt_chinese_concubine
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4578 # A lovely idea!
		
		FROM = {
			character_event = { id = soh.4579 days = 1 } # GC gets response
		}
		
		if = {
			limit = {
				trait = chaste
			}
			remove_trait = chaste
		}
		if = {
			limit = {
				trait = celibate
			}
			remove_trait = celibate
		}
		
		hidden_tooltip = {
			if = {
				limit = {
					FROM = {
						trait = celibate
					}
				}
				FROM = {
					set_character_flag = i_was_celibate
					remove_trait = celibate
				}
			}
		}
		unprotected_sex_effect = yes
		hidden_tooltip = {
			if = {
				limit = {
					FROM = {
						has_character_flag = i_was_celibate
					}
				}
				FROM = {
					clr_character_flag = i_was_celibate
					add_trait = celibate
				}
			}
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				trait = chaste
			}
			modifier = {
				factor = 0
				trait = celibate
			}
			modifier = {
				factor = 0
				is_ascetic_trigger = yes
				NOT = {
					trait = lustful
				}
			}
			modifier = {
				factor = 0.1
				FROM = {
					is_unattractive_trigger = yes
				}
			}
			modifier = {
				factor = 5
				FROM = {
					is_attractive_trigger = yes
				}
			}
			modifier = {
				factor = 0
				any_lover = {
					character = FROMFROM
				}
			}
			modifier = {
				factor = 10
				any_rival = {
					character = FROMFROM
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_4578 # I don't think so!
		
		FROM = {
			character_event = { id = soh.4582 days = 1 } # GC gets response
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				trait = lustful
				FROM = {
					is_unattractive_trigger = no
				}
			}
			modifier = {
				factor = 0
				FROM = {
					trait = seducer
					trait = seductress
				}
				FROM = {
					is_unattractive_trigger = no
				}
			}
		}
	}
}

# Tumbling - become lovers?
character_event = {
	id = soh.4579
	desc = EVTDESC_SOH_4579
	picture = GFX_evt_lovers
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4579 # We'll do this again, for sure!
		
		add_lover = FROM
		
		FROM = {
			character_event = { id = soh.4580 }
		}
		
		if = {
			limit = {
				trait = celibate
			}
			remove_trait = celibate
		}
	}
	
	option = {
		name = EVTOPTB_SOH_4579 # We'll do this again, for sure!
		
		add_lover = FROM
		
		FROM = {
			character_event = { id = soh.4581 }
		}
		
		if = {
			limit = {
				trait = celibate
			}
			remove_trait = celibate
		}
		
		ai_chance = {
			factor = 0
		}
	}
}

# Lovers
character_event = {
	id = soh.4580
	desc = EVTDESC_SOH_4580
	picture = GFX_evt_lovers
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4580 # Great!
		
		add_lover = FROM
	}
}

# Not lovers
character_event = {
	id = soh.4581
	desc = EVTDESC_SOH_4581
	picture = GFX_evt_lovers
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4581 # I suppose that's that...
	}
}

# No tumbling
character_event = {
	id = soh.4582
	desc = EVTDESC_SOH_4582
	picture = GFX_evt_stressed_ruler
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4582 # From.GetMenWomenCap!
	}
}



##### Courtier does the thing

### Approaching liege

# Do you want to approach your liege?
character_event = {
	id = soh.4583
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		random_list = {
			50 = {
				modifier = {
					factor = 0.01
					OR = {
						any_friend = {
							character = FROM
						}
						any_lover = {
							character = FROM
						}
					}
				}
				modifier = {
					factor = 0
					trait = content
					NOR = {
						any_rival = {
							character = FROM
						}
						NOT = {
							opinion = {
								who = FROM
								value = 25
							}
						}
					}
				}
				modifier = {
					factor = 10
					has_position = malcontent
				}
				modifier = {
					factor = 5
					trait = envious
				}
				modifier = {
					factor = 5
					trait = schemer
				}
				modifier = {
					factor = 2
					trait = greedy
				}
				modifier = {
					factor = 2
					trait = arbitrary
				}
				modifier = {
					factor = 10
					trait = ambitious
				}
				modifier = {
					factor = 0.2
					trait = just
				}
				modifier = {
					factor = 0.5
					trait = slothful
				}
				FROM = {
					character_event = { id = soh.4584 } # Liege approached
				}
			}
			50 = {
				modifier = {
					factor = 0.001
					any_rival = {
						character = FROM
					}
				}
				modifier = {
					factor = 10
					trait = content
				}
				modifier = {
					factor = 0.1
					NOT = {
						opinion = {
							who = FROM
							value = -25
						}
					}
				}
				# Courtier decides against it
			}
		}
	}
}

# Approached by courtier
character_event = {
	id = soh.4584
	desc = EVTDESC_SOH_4584
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	immediate = {
		add_character_modifier = {
			modifier = recently_approached_by_ci_courtier
			years = 10
		}
		clr_character_flag = ci_law_make_primary_spouse
		clr_character_flag = ci_law_marry_consort
		clr_character_flag = ci_law_increase_concubine_rank
		clr_character_flag = ci_law_marriage
		clr_character_flag = ci_law_grant_favor
		clr_character_flag = ci_law_cancel_favor
		clr_character_flag = ci_law_fire_rival
		clr_character_flag = ci_law_prestige
		clr_character_flag = ci_law_bribe
		clr_character_flag = ci_law_diplomacy
		clr_character_flag = ci_law_intrigue
		# Pick up to two special approaches
		
		random_list = {
			10 = {
				modifier = {
					factor = 0
					is_female = yes
				}
				modifier = {
					factor = 0
					NOT = {
						has_religion_feature = religion_harems
					}
				}
				modifier = {
					factor = 0
					NOT = {
						any_spouse = {
							character = FROM
						}
					}
				}
				modifier = {
					factor = 0
					spouse = {
						character = FROM
					}
				}
				modifier = {
					factor = 0
					spouse = {
						is_landed = yes
					}
				}
				set_character_flag = ci_law_make_primary_spouse
			}
			10 = {
				modifier = {
					factor = 0
					is_married = yes
				}
				modifier = {
					factor = 0
					NOT = {
						any_consort = {
							character = FROM
						}
					}
				}
				modifier = {
					factor = 0
					FROM = {
						has_opinion_modifier = {
							who = ROOT
							modifier = opinion_forced_consort
						}
					}
				}
				set_character_flag = ci_law_marry_consort
			}
			10 = {
				modifier = {
					factor = 0 # Only these have the relevant minor titles
					NOT = {
						government = chinese_imperial_government
					}
				}
				modifier = {
					factor = 0 # Only relevant for consorts
					NOT = {
						any_consort = {
							character = FROM
						}
					}
				}
				modifier = {
					factor = 0 # Can't increase rank
					FROM = {
						has_minor_title = title_fei
					}
				}
				modifier = {
					factor = 0 # Can't increase rank
					FROM = {
						has_minor_title = title_pin
					}
					NOT = {
						can_grant_title = title_fei
					}
				}
				modifier = {
					factor = 0 # Can't increase rank
					FROM = {
						NOR = {
							has_minor_title = title_fei
							has_minor_title = title_pin
						}
					}
					NOT = {
						can_grant_title = title_pin
					}
				}
				set_character_flag = ci_law_increase_concubine_rank
			}
			10 = {
				modifier = {
					factor = 0
					is_chinese_emperor_trigger = no
				}
				modifier = {
					factor = 0
					FROM = {
						dynasty = ROOT
					}
				}
				modifier = {
					factor = 0
					NOT = {
						any_dynasty_member = {
							is_adult = yes
							is_female = yes
							is_married = no
							is_consort = no
							is_betrothed = no
							trait = dragon_bride_unmarried
							prisoner = no
							NOT = {
								any_close_relative = {
									character = FROM
								}
							}
							NOT = {
								age = 35
							}
						}
					}
				}
				modifier = {
					factor = 0
					FROM = {
						NOR = {
							AND = {
								is_female = no
								OR = {
									is_married = no
									AND = {
										OR = {
											religion_group = muslim
											has_religion_feature = religion_harems
											has_religion_feature = religion_feature_zun
											has_religion_feature = religion_feature_tengri
										}
										NOT = {
											num_of_spouses = 4
										}
									}
								}
							}
							any_child = {
								is_adult = yes
								is_female = no
								host = {
									character = FROM
								}
								is_landed = no
								prisoner = no
								dynasty = PREV
								NOT = {
									trait = bastard
								}
								OR = {
									is_married = no
									AND = {
										OR = {
											religion_group = muslim
											has_religion_feature = religion_harems
											has_religion_feature = religion_feature_zun
											has_religion_feature = religion_feature_tengri
										}
										NOT = {
											num_of_spouses = 4
										}
									}
								}
							}
						}
					}
				}
				set_character_flag = ci_law_marriage
				random_dynasty_member = {
					limit = {
						is_adult = yes
						is_female = yes
						is_married = no
						is_consort = no
						is_betrothed = no
						trait = dragon_bride_unmarried
						prisoner = no
						NOT = {
							any_close_relative = {
								character = FROM
							}
						}
						NOT = {
							age = 35
						}
					}
					preferred_limit = {
						any_close_relative = {
							character = ROOT
						}
						NOT = {
							age = 20
						}
					}
					preferred_limit = {
						any_close_relative = {
							character = ROOT
						}
						NOT = {
							age = 25
						}
					}
					preferred_limit = {
						any_close_relative = {
							character = ROOT
						}
						NOT = {
							age = 30
						}
					}
					preferred_limit = {
						NOT = {
							age = 20
						}
					}
					preferred_limit = {
						NOT = {
							age = 25
						}
					}
					preferred_limit = {
						NOT = {
							age = 30
						}
					}
					save_event_target_as = bride_to_be
				}
				if = {
					limit = {
						FROM = {
							is_female = no
							OR = {
								is_married = no
								AND = {
									OR = {
										religion_group = muslim
										has_religion_feature = religion_harems
										has_religion_feature = religion_feature_zun
										has_religion_feature = religion_feature_tengri
									}
									NOT = {
										num_of_spouses = 4
									}
								}
							}
						}
					}
					FROM = {
						save_event_target_as = husband_to_be
					}
				}
				else = {
					FROM = {
						random_child = {
							limit = {
								is_adult = yes
								is_female = no
								host = {
									character = FROM
								}
								is_landed = no
								prisoner = no
								dynasty = PREV
								NOT = {
									trait = bastard
								}
								OR = {
									is_married = no
									AND = {
										OR = {
											religion_group = muslim
											has_religion_feature = religion_harems
											has_religion_feature = religion_feature_zun
											has_religion_feature = religion_feature_tengri
										}
										NOT = {
											num_of_spouses = 4
										}
									}
								}
							}
							preferred_limit = {
								is_married = no
								NOT = {
									num_of_consorts > 0
								}
								NOT = {
									any_child_even_if_dead = {
										is_alive = yes
									}
								}
								NOT = {
									any_sibling = {
										is_female = no
										is_older_than = PREV
									}
								}
							}
							preferred_limit = {
								is_married = no
								NOT = {
									any_child_even_if_dead = {
										is_alive = yes
									}
								}
								NOT = {
									any_sibling = {
										is_female = no
										is_older_than = PREV
									}
								}
							}
							preferred_limit = {
								is_married = no
								NOT = {
									num_of_consorts > 0
								}
								NOT = {
									any_sibling = {
										is_female = no
										is_older_than = PREV
									}
								}
							}
							preferred_limit = {
								is_married = no
								NOT = {
									num_of_consorts > 0
								}
							}
							preferred_limit = {
								is_married = no
							}
							save_event_target_as = husband_to_be
						}
					}
				}
			}
			10 = {
				modifier = {
					factor = 0
					owes_favor_to = FROM # Can't
				}
				modifier = {
					factor = 0
					FROM = {
						is_voter = no # Doesn't matter
					}
				}
				set_character_flag = ci_law_grant_favor
			}
			10 = {
				modifier = {
					factor = 0
					holds_favor_on = FROM # Can't
				}
				set_character_flag = ci_law_cancel_favor
			}
			10 = {
				modifier = {
					factor = 0
					NOT = {
						any_voter = {
							NOT = {
								has_minor_title = title_grand_chancellor
							}
							OR = {
								any_rival = {
									character = FROM
								}
								NOT = {
									reverse_opinion = {
										who = FROM
										value = -50
									}
								}
							}
						}
					}
				}
				set_character_flag = ci_law_fire_rival
				random_voter = {
					limit = {
						NOT = {
							has_minor_title = title_grand_chancellor
						}
						OR = {
							any_rival = {
								character = FROM
							}
							NOT = {
								reverse_opinion = {
									who = FROM
									value = -50
								}
							}
						}
					}
					preferred_limit = {
						NOR = {
							any_friend = {
								character = ROOT
							}
							any_lover = {
								character = ROOT
							}
						}
					}
					save_event_target_as = councillor_to_fire
				}
			}
			20 = {
				# Nothing
			}
		}
		random_list = {
			10 = {
				modifier = {
					factor = 0
					NOR = {
						prestige = 1000
						AND = {
							learning = 20
							prestige = 500
						}
					}
				}
				set_character_flag = ci_law_prestige
			}
			10 = {
				modifier = {
					factor = 0
					NOR = {
						wealth = 1000
						AND = {
							stewardship = 20
							wealth = 500
						}
					}
				}
				set_character_flag = ci_law_bribe
			}
			10 = {
				modifier = {
					factor = 0.1
					NOT = {
						diplomacy = 10
					}
				}
				set_character_flag = ci_law_diplomacy
			}
			10 = {
				modifier = {
					factor = 0.1
					NOT = {
						intrigue = 10
					}
				}
				set_character_flag = ci_law_intrigue
			}
			20 = {
				# Nothing
			}
		}
	}
	
	option = {
		name = EVTOPTA_SOH_4584 # You make a good case!
		
		if = {
			limit = {
				primary_title = {
					has_law = ci_courtier_law_0
				}
			}
			primary_title = {
				add_law_w_cooldown = ci_courtier_law_1
			}
		}
		else_if = {
			limit = {
				primary_title = {
					has_law = ci_courtier_law_1
				}
			}
			primary_title = {
				add_law_w_cooldown = ci_courtier_law_2
			}
		}
		else_if = {
			limit = {
				primary_title = {
					has_law = ci_courtier_law_2
				}
			}
			primary_title = {
				add_law_w_cooldown = ci_courtier_law_3
			}
		}
		else_if = {
			limit = {
				primary_title = {
					has_law = ci_courtier_law_3
				}
			}
			primary_title = {
				add_law_w_cooldown = ci_courtier_law_4
			}
		}
		
		any_realm_lord = {
			limit = {
				ai = no
			}
			character_event = { id = soh.4656 } # Inform player lords
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.5
				has_law = ci_courtier_law_1
			}
			modifier = {
				factor = 0.2
				has_law = ci_courtier_law_2
			}
			modifier = {
				factor = 0.01
				has_law = ci_courtier_law_3
			}
			modifier = {
				factor = 0.01
				trait = proud
			}
			modifier = {
				factor = 0.01
				trait = ambitious
			}
			modifier = {
				factor = 0.01
				any_rival = {
					character = FROM
				}
			}
			modifier = {
				factor = 10
				trait = slothful
			}
			modifier = {
				factor = 5
				trait = content
			}
			modifier = {
				factor = 10
				trait = trusting
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 2
				OR = {
					any_friend = {
						character = FROM
					}
					any_lover = {
						character = FROM
					}
				}
			}
			modifier = {
				factor = 10
				is_dumb_trigger = yes
			}
			modifier = {
				factor = 0.1
				has_character_modifier = mandate_of_heaven_5
			}
			modifier = {
				factor = 0.2
				has_character_modifier = mandate_of_heaven_4
			}
			modifier = {
				factor = 0.5
				has_character_modifier = mandate_of_heaven_3
			}
		}
	}
	
	option = {
		trigger = {
			has_character_flag = ci_law_make_primary_spouse
		}
		name = EVTOPTB_SOH_4584 # Forget about this and I'll make you my primary spouse!
		
		FROM = {
			make_primary_spouse = yes
		}
				
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.01
				trait = paranoid
			}
			modifier = {
				factor = 0.01
				any_rival = {
					character = FROM
				}
			}
			modifier = {
				factor = 5
				trait = content
			}
			modifier = {
				factor = 10
				trait = trusting
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 10
				any_friend = {
					character = FROM
				}
			}
			modifier = {
				factor = 100
				any_lover = {
					character = FROM
				}
			}
			modifier = {
				factor = 0.5
				NOR = {
					any_friend = {
						character = FROM
					}
					any_lover = {
						character = FROM
					}
				}
			}
			modifier = {
				factor = 0
				NOR = {
					any_friend = {
						character = FROM
					}
					any_lover = {
						character = FROM
					}
				}
				spouse = {
					OR = {
						any_friend = {
							character = FROM
						}
						any_lover = {
							character = FROM
						}
					}
				}
			}
			modifier = {
				factor = 100
				spouse = {
					any_rival = {
						character = ROOT
					}
				}
			}
		}
	}
	
	option = {
		trigger = {
			has_character_flag = ci_law_marry_consort
		}
		name = EVTOPTC_SOH_4584 # Forget about this and I'll marry you!
		
		if = {
			limit = {
				is_female = no
			}
			add_spouse = FROM
		}
		else = {
			add_spouse_matrilineal = FROM
		}
				
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.01
				trait = paranoid
			}
			modifier = {
				factor = 0.01
				any_rival = {
					character = FROM
				}
			}
			modifier = {
				factor = 5
				trait = content
			}
			modifier = {
				factor = 10
				trait = trusting
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 10
				any_friend = {
					character = FROM
				}
			}
			modifier = {
				factor = 100
				any_lover = {
					character = FROM
				}
			}
			modifier = {
				factor = 0.5
				NOR = {
					any_friend = {
						character = FROM
					}
					any_lover = {
						character = FROM
					}
				}
			}
		}
	}
	
	option = {
		trigger = {
			has_character_flag = ci_law_increase_concubine_rank
		}
		name = EVTOPTD_SOH_4584 # Forget about this and I'll increase your rank!
		
		if = {
			limit = {
				FROM = {
					has_minor_title = title_pin
				}
			}
			FROM = {
				give_minor_title = title_fei
			}
		}
		else = {
			FROM = {
				give_minor_title = title_pin
			}
		}
				
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.01
				trait = paranoid
			}
			modifier = {
				factor = 0.01
				any_rival = {
					character = FROM
				}
			}
			modifier = {
				factor = 5
				trait = content
			}
			modifier = {
				factor = 10
				trait = trusting
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 10
				any_friend = {
					character = FROM
				}
			}
			modifier = {
				factor = 100
				any_lover = {
					character = FROM
				}
			}
			modifier = {
				factor = 0.5
				NOR = {
					any_friend = {
						character = FROM
					}
					any_lover = {
						character = FROM
					}
				}
			}
		}
	}
	
	option = {
		trigger = {
			has_character_flag = ci_law_marriage
		}
		name = EVTOPTE_SOH_4584 # I'll give you a marriage instead!
		
		event_target:husband_to_be = {
			add_spouse = event_target:bride_to_be
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.01
				any_rival = {
					character = FROM
				}
			}
			modifier = {
				factor = 5
				trait = content
			}
			modifier = {
				factor = 10
				trait = trusting
			}
			modifier = {
				factor = 0.01
				trait = paranoid
			}
			modifier = {
				factor = 5
				trait = humble
			}
			modifier = {
				factor = 0.1
				trait = proud
			}
			modifier = {
				factor = 0.1
				has_character_modifier = mandate_of_heaven_5
			}
			modifier = {
				factor = 0.2
				has_character_modifier = mandate_of_heaven_4
			}
			modifier = {
				factor = 0.5
				has_character_modifier = mandate_of_heaven_3
			}
			modifier = {
				factor = 10
				OR = {
					any_friend = {
						character = FROM
					}
					any_lover = {
						character = FROM
					}
				}
			}
			modifier = {
				factor = 10
				is_dumb_trigger = yes
			}
		}
	}
	
	option = {
		trigger = {
			has_character_flag = ci_law_grant_favor
		}
		name = EVTOPTF_SOH_4584 # Forget about this and I'll grant you a Favor!
		
		FROM = {
			add_favor = ROOT
		}
				
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.01
				trait = paranoid
			}
			modifier = {
				factor = 0.01
				any_rival = {
					character = FROM
				}
			}
			modifier = {
				factor = 5
				trait = content
			}
			modifier = {
				factor = 10
				trait = trusting
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 2
				OR = {
					any_friend = {
						character = FROM
					}
					any_lover = {
						character = FROM
					}
				}
			}
			modifier = {
				factor = 10
				is_dumb_trigger = yes
			}
		}
	}
	
	option = {
		trigger = {
			has_character_flag = ci_law_cancel_favor
		}
		name = EVTOPTG_SOH_4584 # You owe me; forget all about this and we're even!
		
		remove_favor = FROM
				
		ai_chance = {
			factor = 100
		}
	}
	
	option = {
		trigger = {
			has_character_flag = ci_law_fire_rival
		}
		name = EVTOPTH_SOH_4584 # Forget about this, and your rival will be fired!
		
		event_target:councillor_to_fire = {
			character_event = { id = soh.4585 } # Inform the fired councillor
			fire_councillor_effect = yes
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 100
				event_target:councillor_to_fire = {
					any_rival = {
						character = ROOT
					}
				}
			}
			modifier = {
				factor = 10
				event_target:councillor_to_fire = {
					has_position = malcontent
				}
			}
			modifier = {
				factor = 0.1
				event_target:councillor_to_fire = {
					has_position = loyalist
				}
			}
			modifier = {
				factor = 0.01
				event_target:councillor_to_fire = {
					OR = {
						any_friend = {
							character = ROOT
						}
						any_lover = {
							character = ROOT
						}
					}
				}
				NOT = {
					trait = arbitrary
				}
			}
			modifier = {
				factor = 0.01
				any_rival = {
					character = FROM
				}
			}
			modifier = {
				factor = 0.2
				event_target:councillor_to_fire = {
					is_powerful_vassal = yes
				}
			}
			modifier = {
				factor = 0.1
				has_character_modifier = mandate_of_heaven_5
			}
			modifier = {
				factor = 0.2
				has_character_modifier = mandate_of_heaven_4
			}
			modifier = {
				factor = 0.5
				has_character_modifier = mandate_of_heaven_3
			}
		}
	}
	
	option = {
		trigger = {
			has_character_flag = ci_law_prestige
		}
		name = EVTOPTI_SOH_4584 # I can refuse this using assorted means...
		
		if = {
			limit = {
				learning = 20
			}
			scaled_prestige = {
				value = -1
				min = -500
			}
		}
		else = {
			scaled_prestige = {
				value = -2
				min = -1000
			}
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.01
				trait = proud
			}
			modifier = {
				factor = 5
				trait = content
			}
			modifier = {
				factor = 100
				trait = humble
			}
			modifier = {
				factor = 10
				is_smart_trigger = yes
			}
		}
	}
	
	option = {
		trigger = {
			has_character_flag = ci_law_bribe
		}
		name = EVTOPTJ_SOH_4584 # I think this will make you reconsider...
		
		if = {
			limit = {
				stewardship = 20
			}
			# Since the liege probably will inherit the wealth, have 90 % go poof
			scaled_wealth = {
				value = -0.45
				min = -450
			}
			transfer_scaled_wealth = {
				to = FROM
				value = 0.05
				min = 50
			}
		}
		else = {
			# Since the liege probably will inherit the wealth, have 90 % go poof
			scaled_wealth = {
				value = -0.9
				min = -900
			}
			transfer_scaled_wealth = {
				to = FROM
				value = 0.1
				min = 100
			}
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.01
				trait = greedy
			}
			modifier = {
				factor = 5
				trait = content
			}
			modifier = {
				factor = 100
				trait = charitable
			}
			modifier = {
				factor = 2
				is_smart_trigger = yes
			}
		}
	}
	
	option = {
		trigger = {
			has_character_flag = ci_law_diplomacy
		}
		name = EVTOPTK_SOH_4584 # I'm sure you'll reconsider when I tell you this!
		
		random_list = {
			50 = {
				modifier = {
					factor = 2
					diplomacy = 15
				}
				modifier = {
					factor = 2
					diplomacy = 20
				}
				modifier = {
					factor = 2
					diplomacy = 25
				}
				modifier = {
					factor = 2
					diplomacy = 30
				}
				character_event = { id = soh.4586 } # It worked!
			}
			50 = {
				modifier = {
					factor = 2
					NOT = {
						diplomacy = 10
					}
				}
				modifier = {
					factor = 2
					NOT = {
						diplomacy = 5
					}
				}
				FROM = {
					character_event = { id = soh.4587 } # Eunuch gets upset and asks again
				}
			}
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.01
				trait = shy
			}
			modifier = {
				factor = 10
				trait = proud
			}
			modifier = {
				factor = 100
				trait = gregarious
			}
			modifier = {
				factor = 2
				is_smart_trigger = yes
			}
			modifier = {
				factor = 10
				trait = socializer
			}
			modifier = {
				factor = 2
				has_education_diplomacy_trigger = yes
			}
			modifier = {
				factor = 2
				has_lifestyle_diplomacy_trigger = yes
			}
		}
	}
	
	option = {
		trigger = {
			has_character_flag = ci_law_intrigue
		}
		name = EVTOPTL_SOH_4584 # It'd be a shame if something happened...
		
		random_list = {
			50 = {
				modifier = {
					factor = 2
					intrigue = 15
				}
				modifier = {
					factor = 2
					intrigue = 20
				}
				modifier = {
					factor = 2
					intrigue = 25
				}
				modifier = {
					factor = 2
					intrigue = 30
				}
				character_event = { id = soh.4589 } # It worked!
			}
			50 = {
				modifier = {
					factor = 2
					NOT = {
						intrigue = 10
					}
				}
				modifier = {
					factor = 2
					NOT = {
						intrigue = 5
					}
				}
				FROM = {
					character_event = { id = soh.4590 } # Eunuch gets upset and asks again
				}
			}
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.01
				trait = shy
			}
			modifier = {
				factor = 10
				trait = proud
			}
			modifier = {
				factor = 100
				trait = gregarious
			}
			modifier = {
				factor = 2
				is_smart_trigger = yes
			}
			modifier = {
				factor = 10
				trait = schemer
			}
			modifier = {
				factor = 2
				has_education_intrigue_trigger = yes
			}
			modifier = {
				factor = 2
				has_lifestyle_intrigue_trigger = yes
			}
			modifier = {
				factor = 0.01
				FROM = {
					OR = {
						any_friend = {
							character = ROOT
						}
						any_lover = {
							character = ROOT
						}
					}
				}
			}
			modifier = {
				factor = 100
				FROM = {
					any_rival = {
						character = ROOT
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTM_SOH_4584 # Never!
		
		character_event = { id = soh.4592 days = 7 random = 7 } # Fallout
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 10
				trait = brave
			}
			modifier = {
				factor = 10
				trait = proud
			}
			modifier = {
				factor = 10
				trait = ambitious
			}
			modifier = {
				factor = 100
				trait = paranoid
			}
			modifier = {
				factor = 100
				any_rival = {
					character = FROM
				}
			}
			modifier = {
				factor = 0.1
				trait = craven
			}
			modifier = {
				factor = 0.1
				trait = trusting
			}
			modifier = {
				factor = 0.1
				trait = slothful
			}
			modifier = {
				factor = 0.1
				trait = humble
			}
			modifier = {
				factor = 2
				is_smart_trigger = yes
			}
		}
	}
}

# Fired rival informed
character_event = {
	id = soh.4585
	desc = EVTDESC_SOH_4585
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4585 # Curse both their names!
		
		opinion = {
			who = event_target:chosen_courtier
			modifier = got_me_fired
		}
	}
}

# Courtier convinced with diplomacy - liege
character_event = {
	id = soh.4586
	desc = EVTDESC_SOH_4586
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4586 # That went well!
		
		prestige = 100
	}
}

# Liege was unconvincing with diplomacy
character_event = {
	id = soh.4587
	desc = EVTDESC_SOH_4587
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4587 # That was unconvincing; I'll ask again!
		
		opinion = {
			who = FROM
			modifier = unconvincing_diplomacy
		}
		
		FROM = {
			character_event = { id = soh.4588 } # Liege asked again
		}
	}
}

# Courtier asks again
character_event = {
	id = soh.4588
	desc = EVTDESC_SOH_4588
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4588 # Fine; I'll do it!
		
		if = {
			limit = {
				primary_title = {
					has_law = ci_courtier_law_0
				}
			}
			primary_title = {
				add_law_w_cooldown = ci_courtier_law_1
			}
		}
		else_if = {
			limit = {
				primary_title = {
					has_law = ci_courtier_law_1
				}
			}
			primary_title = {
				add_law_w_cooldown = ci_courtier_law_2
			}
		}
		else_if = {
			limit = {
				primary_title = {
					has_law = ci_courtier_law_2
				}
			}
			primary_title = {
				add_law_w_cooldown = ci_courtier_law_3
			}
		}
		else_if = {
			limit = {
				primary_title = {
					has_law = ci_courtier_law_3
				}
			}
			primary_title = {
				add_law_w_cooldown = ci_courtier_law_4
			}
		}
		
		any_realm_lord = {
			limit = {
				ai = no
			}
			character_event = { id = soh.4656 } # Inform player lords
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.5
				has_law = ci_courtier_law_1
			}
			modifier = {
				factor = 0.2
				has_law = ci_courtier_law_2
			}
			modifier = {
				factor = 0.01
				has_law = ci_courtier_law_3
			}
			modifier = {
				factor = 0.01
				trait = proud
			}
			modifier = {
				factor = 0.01
				trait = ambitious
			}
			modifier = {
				factor = 0.01
				any_rival = {
					character = FROM
				}
			}
			modifier = {
				factor = 10
				trait = slothful
			}
			modifier = {
				factor = 5
				trait = content
			}
			modifier = {
				factor = 10
				trait = trusting
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 2
				OR = {
					any_friend = {
						character = FROM
					}
					any_lover = {
						character = FROM
					}
				}
			}
			modifier = {
				factor = 10
				is_dumb_trigger = yes
			}
			modifier = {
				factor = 0.1
				has_character_modifier = mandate_of_heaven_5
			}
			modifier = {
				factor = 0.2
				has_character_modifier = mandate_of_heaven_4
			}
			modifier = {
				factor = 0.5
				has_character_modifier = mandate_of_heaven_3
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_4588 # Never!
		
		character_event = { id = soh.4592 days = 7 random = 7 } # Fallout
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 10
				trait = brave
			}
			modifier = {
				factor = 10
				trait = proud
			}
			modifier = {
				factor = 10
				trait = ambitious
			}
			modifier = {
				factor = 100
				trait = paranoid
			}
			modifier = {
				factor = 100
				any_rival = {
					character = FROM
				}
			}
			modifier = {
				factor = 0.1
				trait = craven
			}
			modifier = {
				factor = 0.1
				trait = trusting
			}
			modifier = {
				factor = 0.1
				trait = slothful
			}
			modifier = {
				factor = 0.1
				trait = humble
			}
			modifier = {
				factor = 2
				is_smart_trigger = yes
			}
		}
	}
}

# Courtier convinced with intrigue - liege
character_event = {
	id = soh.4589
	desc = EVTDESC_SOH_4589
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4589 # That went well!
		
		prestige = 100
	}
}

# Liege was unconvincing with intrigue
character_event = {
	id = soh.4590
	desc = EVTDESC_SOH_4590
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4590 # That was unconvincing; I'll ask again!
		
		opinion = {
			who = FROM
			modifier = unconvincing_intrigue
		}
		
		FROM = {
			character_event = { id = soh.4591 } # Liege asked again
		}
	}
}

# Courtier asks again
character_event = {
	id = soh.4591
	desc = EVTDESC_SOH_4591
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4591 # Fine; I'll do it!
		
		if = {
			limit = {
				primary_title = {
					has_law = ci_courtier_law_0
				}
			}
			primary_title = {
				add_law_w_cooldown = ci_courtier_law_1
			}
		}
		else_if = {
			limit = {
				primary_title = {
					has_law = ci_courtier_law_1
				}
			}
			primary_title = {
				add_law_w_cooldown = ci_courtier_law_2
			}
		}
		else_if = {
			limit = {
				primary_title = {
					has_law = ci_courtier_law_2
				}
			}
			primary_title = {
				add_law_w_cooldown = ci_courtier_law_3
			}
		}
		else_if = {
			limit = {
				primary_title = {
					has_law = ci_courtier_law_3
				}
			}
			primary_title = {
				add_law_w_cooldown = ci_courtier_law_4
			}
		}
		
		any_realm_lord = {
			limit = {
				ai = no
			}
			character_event = { id = soh.4656 } # Inform player lords
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.5
				has_law = ci_courtier_law_1
			}
			modifier = {
				factor = 0.2
				has_law = ci_courtier_law_2
			}
			modifier = {
				factor = 0.01
				has_law = ci_courtier_law_3
			}
			modifier = {
				factor = 0.01
				trait = proud
			}
			modifier = {
				factor = 0.01
				trait = ambitious
			}
			modifier = {
				factor = 0.01
				any_rival = {
					character = FROM
				}
			}
			modifier = {
				factor = 10
				trait = slothful
			}
			modifier = {
				factor = 5
				trait = content
			}
			modifier = {
				factor = 10
				trait = trusting
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 2
				OR = {
					any_friend = {
						character = FROM
					}
					any_lover = {
						character = FROM
					}
				}
			}
			modifier = {
				factor = 10
				is_dumb_trigger = yes
			}
			modifier = {
				factor = 0.1
				has_character_modifier = mandate_of_heaven_5
			}
			modifier = {
				factor = 0.2
				has_character_modifier = mandate_of_heaven_4
			}
			modifier = {
				factor = 0.5
				has_character_modifier = mandate_of_heaven_3
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_4591 # Never!
		
		character_event = { id = soh.4592 days = 7 random = 7 } # Fallout
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 10
				trait = brave
			}
			modifier = {
				factor = 10
				trait = proud
			}
			modifier = {
				factor = 10
				trait = ambitious
			}
			modifier = {
				factor = 100
				trait = paranoid
			}
			modifier = {
				factor = 100
				any_rival = {
					character = FROM
				}
			}
			modifier = {
				factor = 0.1
				trait = craven
			}
			modifier = {
				factor = 0.1
				trait = trusting
			}
			modifier = {
				factor = 0.1
				trait = slothful
			}
			modifier = {
				factor = 0.1
				trait = humble
			}
			modifier = {
				factor = 2
				is_smart_trigger = yes
			}
		}
	}
}

### Liege refused - fallout

# Hidden event for liege to decide on fallout
character_event = {
	id = soh.4592
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		OR = {
			government = chinese_imperial_government
			government = eastern_imperial_government
		}
	}
	
	immediate = {
		random_list = {
			100 = {
				modifier = {
					factor = 0
					any_rival = {
						character = event_target:chosen_courtier
					}
				}
				character_event = { id = soh.4593 } # Courtier just shrugs
			}
			25 = {
				modifier = {
					factor = 0
					has_character_flag = fake_eunuch_for_ci_law_event
				}
				modifier = {
					factor = 0
					OR = {
						any_friend = {
							character = event_target:chosen_courtier
						}
						any_lover = {
							character = event_target:chosen_courtier
						}
					}
				}
				character_event = { id = soh.4594 } # Courtier greatly upset
			}
			25 = {
				modifier = {
					factor = 0
					OR = {
						any_rival = {
							character = event_target:chosen_courtier
						}
						any_friend = {
							character = event_target:chosen_courtier
						}
						any_lover = {
							character = event_target:chosen_courtier
						}
					}
				}
				character_event = { id = soh.4595 } # Courtier becomes rival
			}
			25 = {
				modifier = {
					factor = 0
					NOT = {
						any_friend = {
							character = event_target:chosen_courtier
						}
					}
				}
				character_event = { id = soh.4596 } # Courtier ends friendship
			}
			25 = {
				modifier = {
					factor = 0
					NOT = {
						any_lover = {
							character = event_target:chosen_courtier
						}
					}
				}
				character_event = { id = soh.4597 } # Courtier stops being lover
			}
			10 = {
				modifier = {
					factor = 0
					NOR = {
						any_spouse = {
							character = event_target:chosen_courtier
						}
						any_consort = {
							character = event_target:chosen_courtier
						}
					}
				}
				character_event = { id = soh.4598 } # All spouses/consorts upset
			}
			10 = {
				modifier = {
					factor = 0
					NOR = {
						any_spouse = {
							character = event_target:chosen_courtier
						}
						any_consort = {
							character = event_target:chosen_courtier
						}
					}
				}
				modifier = {
					factor = 0
					event_target:chosen_courtier = {
						OR = {
							trait = chaste
							trait = celibate
							any_lover = {
								character = ROOT
							}
						}
					}
				}
				modifier = {
					factor = 0
					NOT = {
						any_voter = {
							NOR = {
								trait = eunuch
								is_close_relative = event_target:chosen_courtier
								trait = celibate
								any_rival = {
									character = event_target:chosen_courtier
								}
							}
							OR = {
								AND = {
									is_female = no
									NOT = {
										trait = homosexual
									}
									event_target:chosen_courtier = {
										is_female = yes
										NOT = {
											trait = homosexual
										}
									}
								}
								AND = {
									is_female = yes
									NOT = {
										trait = homosexual
									}
									event_target:chosen_courtier = {
										is_female = no
										NOT = {
											trait = homosexual
										}
									}
								}
								AND = {
									is_female = no
									trait = homosexual
									event_target:chosen_courtier = {
										is_female = no
										trait = homosexual
									}
								}
								AND = {
									is_female = yes
									trait = homosexual
									event_target:chosen_courtier = {
										is_female = yes
										trait = homosexual
									}
								}
							}
						}
					}
				}
				random_voter = {
					limit = {
						NOR = {
							trait = eunuch
							is_close_relative = event_target:chosen_courtier
							trait = celibate
							any_rival = {
								character = event_target:chosen_courtier
							}
						}
						OR = {
							AND = {
								is_female = no
								NOT = {
									trait = homosexual
								}
								event_target:chosen_courtier = {
									is_female = yes
									NOT = {
										trait = homosexual
									}
								}
							}
							AND = {
								is_female = yes
								NOT = {
									trait = homosexual
								}
								event_target:chosen_courtier = {
									is_female = no
									NOT = {
										trait = homosexual
									}
								}
							}
							AND = {
								is_female = no
								trait = homosexual
								event_target:chosen_courtier = {
									is_female = no
									trait = homosexual
								}
							}
							AND = {
								is_female = yes
								trait = homosexual
								event_target:chosen_courtier = {
									is_female = yes
									trait = homosexual
								}
							}
						}
					}
					preferred_limit = {
						OR = {
							has_minor_title = title_grand_chancellor
							is_powerful_vassal = yes
						}
						trait = lustful
						NOT = {
							age = 35
						}
						is_attractive_trigger = yes
						is_unattractive_trigger = no
					}
					preferred_limit = {
						OR = {
							has_minor_title = title_grand_chancellor
							is_powerful_vassal = yes
						}
						NOT = {
							trait = chaste
						}
						NOT = {
							age = 35
						}
						is_attractive_trigger = yes
						is_unattractive_trigger = no
					}
					preferred_limit = {
						OR = {
							has_minor_title = title_grand_chancellor
							is_powerful_vassal = yes
						}
						NOT = {
							age = 35
						}
						is_attractive_trigger = yes
						is_unattractive_trigger = no
					}
					preferred_limit = {
						trait = lustful
						NOT = {
							age = 35
						}
						is_attractive_trigger = yes
						is_unattractive_trigger = no
					}
					preferred_limit = {
						NOT = {
							trait = chaste
						}
						NOT = {
							age = 35
						}
						is_attractive_trigger = yes
						is_unattractive_trigger = no
					}
					preferred_limit = {
						NOT = {
							age = 35
						}
						is_attractive_trigger = yes
						is_unattractive_trigger = no
					}
					preferred_limit = {
						OR = {
							has_minor_title = title_grand_chancellor
							is_powerful_vassal = yes
						}
						NOT = {
							age = 35
						}
						is_attractive_trigger = yes
					}
					preferred_limit = {
						OR = {
							has_minor_title = title_grand_chancellor
							is_powerful_vassal = yes
						}
						NOT = {
							age = 35
						}
					}
					preferred_limit = {
						OR = {
							has_minor_title = title_grand_chancellor
							is_powerful_vassal = yes
						}
					}
					preferred_limit = {
						NOT = {
							age = 35
						}
						is_attractive_trigger = yes
					}
					preferred_limit = {
						NOT = {
							age = 35
						}
					}
					save_event_target_as = possible_courtier_lover
				}
				character_event = { id = soh.4593 } # Courtier just shrugs... as far as the liege knows...
				event_target:chosen_courtier = {
					character_event = { id = soh.4599 } # Spouse/consort might cheat with someone
				}
			}
			10 = {
				modifier = {
					factor = 0
					NOR = {
						any_spouse = {
							character = event_target:chosen_courtier
						}
						any_consort = {
							character = event_target:chosen_courtier
						}
					}
				}
				modifier = {
					factor = 0
					NOR = {
						AND = {
							any_child = {
								is_landed = no
								host = {
									character = ROOT
								}
								prisoner = no
								OR = {
									father = {
										character = event_target:chosen_courtier
									}
									mother = {
										character = event_target:chosen_courtier
									}
								}
							}
							OR = {
								any_spouse = {
									is_landed = no
									host = {
										character = ROOT
									}
									prisoner = no
									NOT = {
										character = event_target:chosen_courtier
									}
								}
								any_consort = {
									is_landed = no
									host = {
										character = ROOT
									}
									prisoner = no
									NOT = {
										character = event_target:chosen_courtier
									}
								}
							}
						}
						any_child = {
							is_landed = no
							host = {
								character = ROOT
							}
							prisoner = no
							NOR = {
								father = {
									character = event_target:chosen_courtier
								}
								mother = {
									character = event_target:chosen_courtier
								}
							}
						}
					}
				}
				random_child = {
					limit = {
						is_landed = no
						host = {
							character = ROOT
						}
						prisoner = no
					}
					preferred_limit = {
						NOR = {
							father = {
								character = event_target:chosen_courtier
							}
							mother = {
								character = event_target:chosen_courtier
							}
						}
					}
					save_event_target_as = child_to_murder
				}
				random_list = {
					50 = {
						modifier = {
							factor = 0
							NOT = {
								any_spouse = {
									NOT = {
										any_child = {
											character = event_target:child_to_murder
										}
									}
								}
							}
						}
						random_spouse = {
							limit = {
								is_landed = no
								host = {
									character = ROOT
								}
								prisoner = no
							}
							preferred_limit = {
								OR = {
									any_rival = {
										character = event_target:child_to_murder
									}
									NOT = {
										reverse_opinion = {
											who = event_target:child_to_murder
											value = -50
										}
									}
								}
							}
							save_event_target_as = courtier_murderer
						}
					}
					50 = {
						modifier = {
							factor = 0
							NOT = {
								any_consort = {
									NOT = {
										any_child = {
											character = event_target:child_to_murder
										}
									}
								}
							}
						}
						random_consort = {
							limit = {
								is_landed = no
								host = {
									character = ROOT
								}
								prisoner = no
							}
							preferred_limit = {
								OR = {
									any_rival = {
										character = event_target:child_to_murder
									}
									NOT = {
										reverse_opinion = {
											who = event_target:child_to_murder
											value = -50
										}
									}
								}
							}
							save_event_target_as = courtier_murderer
						}
					}
				}
				event_target:child_to_murder = {
					character_event = { id = soh.4605 } # Spouse/consort might attempt to murder other spouse/consort's child
				}
			}
			1 = {
				modifier = {
					factor = 10
					primary_title = {
						has_law = ci_courtier_law_3
					}
				}
				modifier = {
					factor = 0
					NOT = {
						any_courtier = {
							is_adult = yes
							prisoner = no
							is_council_eunuch_trigger = no
							NAND = {
								dynasty = ROOT
								any_close_relative = {
									character = ROOT
								}
							}
							OR = {
								AND = {
									is_voter = yes
									NOT = {
										has_position = loyalist
									}
								}
								any_spouse = {
									character = ROOT
								}
								any_consort = {
									character = ROOT
								}
								any_child = {
									character = ROOT
								}
								any_child_even_if_dead = {
									any_child = {
										character = ROOT
									}
								}
							}
							OR = {
								any_rival = {
									character = ROOT
								}
								NOT = {
									reverse_opinion = {
										who = ROOT
										value = -50
									}
								}
							}
						}
					}
				}
				random_courtier = {
					limit = {
						is_adult = yes
						prisoner = no
						is_council_eunuch_trigger = no
						NAND = {
							dynasty = ROOT
							any_close_relative = {
								character = ROOT
							}
						}
						OR = {
							AND = {
								is_voter = yes
								NOT = {
									has_position = loyalist
								}
							}
							any_spouse = {
								character = ROOT
							}
							any_consort = {
								character = ROOT
							}
							any_child = {
								character = ROOT
							}
							any_child_even_if_dead = {
								any_child = {
									character = ROOT
								}
							}
						}
						OR = {
							any_rival = {
								character = ROOT
							}
							NOT = {
								reverse_opinion = {
									who = ROOT
									value = -50
								}
							}
						}
					}
					save_event_target_as = courtier_murderer
				}
				character_event = { id = soh.4610 } # Courtier attempts to murder liege
			}
			10 = {
				modifier = {
					factor = 0
					OR = {
						any_friend = {
							character = event_target:chosen_courtier
						}
						any_lover = {
							character = event_target:chosen_courtier
						}
					}
				}
				character_event = { id = soh.4615 } # Discredited by courtier
			}
			10 = {
				modifier = {
					factor = 0
					OR = {
						any_friend = {
							character = event_target:chosen_courtier
						}
						any_lover = {
							character = event_target:chosen_courtier
						}
					}
				}
				character_event = { id = soh.4616 } # Vassals get upset
			}
		}
	}
}

# Courtier just shrugs - inform liege
character_event = {
	id = soh.4593
	desc = EVTDESC_SOH_4593
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4593 # That's good!
	}
}

# Courtier greatly upset - inform liege
character_event = {
	id = soh.4594
	desc = EVTDESC_SOH_4594
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4594 # Unsurprising...
		
		event_target:chosen_courtier = {
			opinion = {
				who = ROOT
				modifier = ci_greatly_upset
			}
		}
	}
}

# Courtier becomes rival - inform liege
character_event = {
	id = soh.4595
	desc = EVTDESC_SOH_4595
	picture = GFX_evt_stressed_ruler
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4518 # Not unexpected...
		
		add_rival = event_target:chosen_courtier
	}
}

# Courtier ends friendship - inform liege
character_event = {
	id = soh.4596
	desc = EVTDESC_SOH_4596
	picture = GFX_evt_stressed_ruler
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4596 # Some "friend"...
		
		remove_friend = event_target:chosen_courtier
	}
}

# Courtier stops being lover - inform liege
character_event = {
	id = soh.4597
	desc = EVTDESC_SOH_4597
	picture = GFX_evt_stressed_ruler
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4597 # They clearly never loved me!
		
		remove_lover = event_target:chosen_courtier
	}
}

# All spouses/consorts upset - inform liege
character_event = {
	id = soh.4598
	desc = EVTDESC_SOH_4598
	picture = GFX_evt_stressed_ruler
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4521 # What else is new?
		
		any_spouse = {
			opinion = {
				who = ROOT
				modifier = ci_upset
			}
		}
		any_consort = {
			opinion = {
				who = ROOT
				modifier = ci_upset
			}
		}
	}
}

# Attempt to seduce a voter?
character_event = {
	id = soh.4599
	desc = EVTDESC_SOH_4599
	picture = GFX_evt_chinese_concubine
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4599 # I think I will!
		
		if = {
			limit = {
				trait = chaste
			}
			remove_trait = chaste
		}
		
		event_target:possible_courtier_lover = {
			character_event = { id = soh.4600 } # Voter
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				trait = chaste
			}
			modifier = {
				factor = 0
				trait = celibate
			}
			modifier = {
				factor = 0
				is_ascetic_trigger = yes
				NOT = {
					trait = lustful
				}
			}
			modifier = {
				factor = 0.1
				event_target:possible_courtier_lover = {
					is_unattractive_trigger = yes
				}
			}
			modifier = {
				factor = 5
				event_target:possible_courtier_lover = {
					is_attractive_trigger = yes
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_4599 # Absolutely not!
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				trait = lustful
				event_target:possible_courtier_lover = {
					is_unattractive_trigger = no
				}
			}
			modifier = {
				factor = 0
				OR = {
					trait = seducer
					trait = seductress
				}
				event_target:possible_courtier_lover = {
					is_unattractive_trigger = no
				}
			}
		}
	}
}

# Voter approached
character_event = {
	id = soh.4600
	desc = EVTDESC_SOH_4600
	picture = GFX_evt_chinese_concubine
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4600 # A lovely idea!
		
		FROM = {
			character_event = { id = soh.4601 days = 1 } # Courtier gets response
		}
		
		if = {
			limit = {
				trait = chaste
			}
			remove_trait = chaste
		}
		if = {
			limit = {
				trait = celibate
			}
			remove_trait = celibate
		}
		
		hidden_tooltip = {
			if = {
				limit = {
					FROM = {
						trait = celibate
					}
				}
				FROM = {
					set_character_flag = i_was_celibate
					remove_trait = celibate
				}
			}
		}
		unprotected_sex_effect = yes
		hidden_tooltip = {
			if = {
				limit = {
					FROM = {
						has_character_flag = i_was_celibate
					}
				}
				FROM = {
					clr_character_flag = i_was_celibate
					add_trait = celibate
				}
			}
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				trait = chaste
			}
			modifier = {
				factor = 0
				trait = celibate
			}
			modifier = {
				factor = 0
				is_ascetic_trigger = yes
				NOT = {
					trait = lustful
				}
			}
			modifier = {
				factor = 0.1
				FROM = {
					is_unattractive_trigger = yes
				}
			}
			modifier = {
				factor = 5
				FROM = {
					is_attractive_trigger = yes
				}
			}
			modifier = {
				factor = 0
				any_lover = {
					character = FROMFROM
				}
			}
			modifier = {
				factor = 10
				any_rival = {
					character = FROMFROM
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_4600 # I don't think so!
		
		FROM = {
			character_event = { id = soh.4604 days = 1 } # Courtier gets response
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				trait = lustful
				FROM = {
					is_unattractive_trigger = no
				}
			}
			modifier = {
				factor = 0
				FROM = {
					trait = seducer
					trait = seductress
				}
				FROM = {
					is_unattractive_trigger = no
				}
			}
		}
	}
}

# Tumbling - become lovers?
character_event = {
	id = soh.4601
	desc = EVTDESC_SOH_4601
	picture = GFX_evt_lovers
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4601 # We'll do this again, for sure!
		
		add_lover = FROM
		
		FROM = {
			character_event = { id = soh.4602 }
		}
		
		if = {
			limit = {
				trait = celibate
			}
			remove_trait = celibate
		}
	}
	
	option = {
		name = EVTOPTB_SOH_4601 # We'll do this again, for sure!
		
		add_lover = FROM
		
		FROM = {
			character_event = { id = soh.4603 }
		}
		
		if = {
			limit = {
				trait = celibate
			}
			remove_trait = celibate
		}
		
		ai_chance = {
			factor = 0
		}
	}
}

# Lovers
character_event = {
	id = soh.4602
	desc = EVTDESC_SOH_4602
	picture = GFX_evt_lovers
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4602 # Great!
		
		add_lover = FROM
	}
}

# Not lovers
character_event = {
	id = soh.4603
	desc = EVTDESC_SOH_4603
	picture = GFX_evt_lovers
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4603 # I suppose that's that...
	}
}

# No tumbling
character_event = {
	id = soh.4604
	desc = EVTDESC_SOH_4604
	picture = GFX_evt_stressed_ruler
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4604 # From.GetMenWomenCap!
	}
}

# Murder attempt on child - child
character_event = {
	id = soh.4605
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		random_list = {
			50 = {
				modifier = {
					factor = 10
					attribute_diff = {
						character = event_target:courtier_murderer
						attribute = intrigue
						value >= 15
					}
				}
				modifier = {
					factor = 2
					attribute_diff = {
						character = event_target:courtier_murderer
						attribute = intrigue
						value >= 10
					}
				}
				modifier = {
					factor = 2
					attribute_diff = {
						character = event_target:courtier_murderer
						attribute = intrigue
						value >= 5
					}
				}
				# Failure
				if = {
					limit = {
						event_target:courtier_murderer = {
							intrigue >= 20
						}
					}
					FROM = {
						character_event = { id = soh.4606 } # Unknown assailant got away
					}
				}
				else_if = {
					limit = {
						event_target:courtier_murderer = {
							intrigue >= 10
						}
					}
					random_list = {
						50 = {
							FROM = {
								character_event = { id = soh.4606 } # Unknown assailant got away
							}
						}
						50 = {
							FROM = {
								character_event = { id = soh.4607 } # Assailant caught
							}
						}
					}
				}
				else = {
					FROM = {
						character_event = { id = soh.4607 } # Assailant caught
					}
				}
			}
			50 = {
				modifier = {
					factor = 10
					attribute_diff = {
						character = event_target:courtier_murderer
						attribute = intrigue
						value <= -15
					}
				}
				modifier = {
					factor = 2
					attribute_diff = {
						character = event_target:courtier_murderer
						attribute = intrigue
						value <= -10
					}
				}
				modifier = {
					factor = 2
					attribute_diff = {
						character = event_target:courtier_murderer
						attribute = intrigue
						value <= -5
					}
				}
				# Success
				if = {
					limit = {
						event_target:courtier_murderer = {
							intrigue >= 20
						}
					}
					death = {
						death_reason = death_murder_unknown
						killer = event_target:courtier_murderer
					}
					FROM = {
						character_event = { id = soh.4608 } # Unknown assailant got away
					}
				}
				else_if = {
					limit = {
						event_target:courtier_murderer = {
							intrigue >= 10
						}
					}
					random_list = {
						50 = {
							death = {
								death_reason = death_murder_unknown
								killer = event_target:courtier_murderer
							}
							FROM = {
								character_event = { id = soh.4608 } # Unknown assailant got away
							}
						}
						50 = {
							event_target:courtier_murderer = {
								ROOT = { save_event_target_as = kinslayer_target }
								add_kinslayer_trait_effect = yes
							}
							death = {
								death_reason = death_murder
								killer = event_target:courtier_murderer
							}
							FROM = {
								character_event = { id = soh.4609 } # Assailant caught
							}
						}
					}
				}
				else = {
					event_target:courtier_murderer = {
						ROOT = { save_event_target_as = kinslayer_target }
						add_kinslayer_trait_effect = yes
					}
					death = {
						death_reason = death_murder
						killer = event_target:courtier_murderer
					}
					FROM = {
						character_event = { id = soh.4609 } # Assailant caught
					}
				}
			}
		}
	}
}

# Murder attempt failed, perpetrator unknown - liege
character_event = {
	id = soh.4606
	desc = EVTDESC_SOH_4606
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4606 # Who was it? Maybe the one that asked?
		
		opinion = {
			who = event_target:chosen_courtier
			modifier = ci_suspected_murderer
		}
	}
}

# Murder attempt failed, perpetrator known - liege
character_event = {
	id = soh.4607
	desc = EVTDESC_SOH_4607
	picture = GFX_evt_chinese_concubine
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4607 # Off with their head!
		
		event_target:courtier_murderer = { save_event_target_as = kinslayer_target }
		add_kinslayer_trait_effect = yes
		event_target:courtier_murderer = {
			death = {
				death_reason = death_execution
				killer = ROOT
			}
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				OR = {
					any_lover = {
						character = event_target:courtier_murderer
					}
					any_friend = {
						character = event_target:courtier_murderer
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_4607 # Throw them in a cell!
		
		event_target:courtier_murderer = {
			imprison = ROOT
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				any_rival = {
					character = event_target:courtier_murderer
				}
			}
		}
	}
}

# Murder attempt succeded, perpetrator unknown - liege
character_event = {
	id = soh.4608
	desc = EVTDESC_SOH_4608
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4608 # Who was it? Maybe the one that asked?
		
		opinion = {
			who = event_target:chosen_courtier
			modifier = ci_suspected_murderer
		}
	}
}

# Murder attempt succeded, perpetrator known - liege
character_event = {
	id = soh.4609
	desc = EVTDESC_SOH_4609
	picture = GFX_evt_chinese_concubine
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4609 # Off with their head!
		
		event_target:courtier_murderer = { save_event_target_as = kinslayer_target }
		add_kinslayer_trait_effect = yes
		event_target:courtier_murderer = {
			death = {
				death_reason = death_execution
				killer = ROOT
			}
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				OR = {
					any_lover = {
						character = event_target:courtier_murderer
					}
					any_friend = {
						character = event_target:courtier_murderer
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_4609 # Throw them in a cell!
		
		event_target:courtier_murderer = {
			imprison = ROOT
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				any_rival = {
					character = event_target:courtier_murderer
				}
			}
		}
	}
}

# Murder attempt on liege - liege
character_event = {
	id = soh.4610
	desc = EVTDESC_SOH_4610
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4610 # Guards! To me!
		random_list = {
			50 = {
				modifier = {
					factor = 10
					attribute_diff = {
						character = event_target:courtier_murderer
						attribute = intrigue
						value >= 15
					}
				}
				modifier = {
					factor = 2
					attribute_diff = {
						character = event_target:courtier_murderer
						attribute = intrigue
						value >= 10
					}
				}
				modifier = {
					factor = 2
					attribute_diff = {
						character = event_target:courtier_murderer
						attribute = intrigue
						value >= 5
					}
				}
				# Failure
				if = {
					limit = {
						event_target:courtier_murderer = {
							intrigue >= 20
						}
					}
					FROM = {
						character_event = { id = soh.4611 } # Unknown assailant got away
					}
				}
				else_if = {
					limit = {
						event_target:courtier_murderer = {
							intrigue >= 10
						}
					}
					random_list = {
						50 = {
							FROM = {
								character_event = { id = soh.4611 } # Unknown assailant got away
							}
						}
						50 = {
							FROM = {
								character_event = { id = soh.4612 } # Assailant caught
							}
						}
					}
				}
				else = {
					FROM = {
						character_event = { id = soh.4612 } # Assailant caught
					}
				}
			}
			50 = {
				modifier = {
					factor = 10
					attribute_diff = {
						character = event_target:courtier_murderer
						attribute = intrigue
						value <= -15
					}
				}
				modifier = {
					factor = 2
					attribute_diff = {
						character = event_target:courtier_murderer
						attribute = intrigue
						value <= -10
					}
				}
				modifier = {
					factor = 2
					attribute_diff = {
						character = event_target:courtier_murderer
						attribute = intrigue
						value <= -5
					}
				}
				# Success
				if = {
					limit = {
						event_target:courtier_murderer = {
							intrigue >= 20
						}
					}
					FROM = {
						character_event = { id = soh.4613 } # Unknown assailant got away
					}
				}
				else_if = {
					limit = {
						event_target:courtier_murderer = {
							intrigue >= 10
						}
					}
					random_list = {
						50 = {
							FROM = {
								character_event = { id = soh.4613 } # Unknown assailant got away
							}
						}
						50 = {
							FROM = {
								character_event = { id = soh.4614 } # Assailant caught
							}
						}
					}
				}
				else = {
					FROM = {
						character_event = { id = soh.4614 } # Assailant caught
					}
				}
			}
		}
	}
}

# Murder attempt failed, perpetrator unknown - liege
character_event = {
	id = soh.4611
	desc = EVTDESC_SOH_4611
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4611 # Who was it? Maybe the one that asked?
		
		opinion = {
			who = event_target:chosen_courtier
			modifier = ci_suspected_murderer
		}
	}
}

# Murder attempt failed, perpetrator known - liege
character_event = {
	id = soh.4612
	desc = EVTDESC_SOH_4612
	picture = GFX_evt_chinese_concubine
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4612 # Off with their head!
		
		event_target:courtier_murderer = { save_event_target_as = kinslayer_target }
		add_kinslayer_trait_effect = yes
		event_target:courtier_murderer = {
			death = {
				death_reason = death_execution
				killer = ROOT
			}
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				OR = {
					any_lover = {
						character = event_target:courtier_murderer
					}
					any_friend = {
						character = event_target:courtier_murderer
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_4612 # Throw them in a cell!
		
		event_target:courtier_murderer = {
			imprison = ROOT
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				any_rival = {
					character = event_target:courtier_murderer
				}
			}
		}
	}
}

# Murder attempt succeded, perpetrator unknown
character_event = {
	id = soh.4613
	desc = EVTDESC_SOH_4613
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4535 # Maybe... it was... that one...?
		
		opinion = {
			who = event_target:chosen_courtier
			modifier = ci_suspected_murderer
		}
		
		death = {
			death_reason = death_murder_unknown
			killer = event_target:courtier_murderer
		}
	}
}

# Murder attempt succeded, perpetrator known - liege
character_event = {
	id = soh.4614
	desc = EVTDESC_SOH_4614
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4536 # You? No!
		
		event_target:courtier_murderer = {
			ROOT = { save_event_target_as = kinslayer_target }
			add_kinslayer_trait_effect = yes
		}
		death = {
			death_reason = death_murder
			killer = event_target:courtier_murderer
		}
	}
}

# Discredited by courtier - liege
character_event = {
	id = soh.4615
	desc = EVTDESC_SOH_4615
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4615 # Curses!
		
		prestige = -1000
	}
}

# Vassals upset by courtier - liege
character_event = {
	id = soh.4616
	desc = EVTDESC_SOH_4616
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4616 # Curses!
		
		any_realm_lord = {
			limit = {
				higher_tier_than = baron
			}
			opinion = {
				who = ROOT
				modifier = ci_upset_vassal
			}
			if = {
				limit = {
					ai = no
				}
				character_event = { id = soh.4617 } # Inform vassals
			}
		}
	}
}

# Vassals upset by courtier - vassals
character_event = {
	id = soh.4617
	desc = EVTDESC_SOH_4617
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4617 # Trouble at court? Interesting...
	}
}



##### Vassal does the thing

### Approaching liege

# Do you want to approach your liege?
character_event = {
	id = soh.4618
	desc = EVTDESC_SOH_4618
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4618 # Yes!
		
		FROM = {
			character_event = { id = soh.4619 } # Liege approached
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.01
				OR = {
					any_friend = {
						character = FROM
					}
					any_lover = {
						character = FROM
					}
				}
			}
			modifier = {
				factor = 0
				trait = content
				NOR = {
					any_rival = {
						character = FROM
					}
					NOT = {
						opinion = {
							who = FROM
							value = 25
						}
					}
				}
			}
			modifier = {
				factor = 10
				has_position = malcontent
			}
			modifier = {
				factor = 5
				trait = envious
			}
			modifier = {
				factor = 5
				trait = schemer
			}
			modifier = {
				factor = 2
				trait = greedy
			}
			modifier = {
				factor = 2
				trait = arbitrary
			}
			modifier = {
				factor = 10
				trait = ambitious
			}
			modifier = {
				factor = 0.2
				trait = just
			}
			modifier = {
				factor = 0.5
				trait = slothful
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_4618 # No!
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.001
				any_rival = {
					character = FROM
				}
			}
			modifier = {
				factor = 10
				trait = content
			}
			modifier = {
				factor = 0.1
				NOT = {
					opinion = {
						who = FROM
						value = -25
					}
				}
			}
		}
	}
}

# Approached by vassal
character_event = {
	id = soh.4619
	desc = EVTDESC_SOH_4619
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	immediate = {
		add_character_modifier = {
			modifier = recently_approached_by_ci_vassal
			years = 10
		}
		clr_character_flag = ci_law_grace
		clr_character_flag = ci_law_marriage
		clr_character_flag = ci_law_grant_favor
		clr_character_flag = ci_law_cancel_favor
		clr_character_flag = ci_law_fire_rival
		clr_character_flag = ci_law_prestige
		clr_character_flag = ci_law_bribe
		clr_character_flag = ci_law_diplomacy
		clr_character_flag = ci_law_intrigue
		# Pick up to two special approaches
		
		random_list = {
			10 = {
				modifier = {
					factor = 0
					is_chinese_emperor_trigger = no
				}
				set_character_flag = ci_law_grace
			}
			10 = {
				modifier = {
					factor = 0
					is_chinese_emperor_trigger = no
				}
				modifier = {
					factor = 0
					NOT = {
						any_dynasty_member = {
							is_adult = yes
							is_female = yes
							is_married = no
							is_consort = no
							is_betrothed = no
							trait = dragon_bride_unmarried
							prisoner = no
							NOT = {
								any_close_relative = {
									character = FROM
								}
							}
							NOT = {
								age = 35
							}
						}
					}
				}
				modifier = {
					factor = 0
					FROM = {
						NOR = {
							AND = {
								is_female = no
								OR = {
									is_married = no
									AND = {
										OR = {
											religion_group = muslim
											has_religion_feature = religion_harems
											has_religion_feature = religion_feature_zun
											has_religion_feature = religion_feature_tengri
										}
										NOT = {
											num_of_spouses = 4
										}
									}
								}
							}
							any_child = {
								is_adult = yes
								is_female = no
								host = {
									character = FROM
								}
								is_landed = no
								prisoner = no
								dynasty = PREV
								NOT = {
									trait = bastard
								}
								OR = {
									is_married = no
									AND = {
										OR = {
											religion_group = muslim
											has_religion_feature = religion_harems
											has_religion_feature = religion_feature_zun
											has_religion_feature = religion_feature_tengri
										}
										NOT = {
											num_of_spouses = 4
										}
									}
								}
							}
						}
					}
				}
				set_character_flag = ci_law_marriage
				random_dynasty_member = {
					limit = {
						is_adult = yes
						is_female = yes
						is_married = no
						is_consort = no
						is_betrothed = no
						trait = dragon_bride_unmarried
						prisoner = no
						NOT = {
							any_close_relative = {
								character = FROM
							}
						}
						NOT = {
							age = 35
						}
					}
					preferred_limit = {
						any_close_relative = {
							character = ROOT
						}
						NOT = {
							age = 20
						}
					}
					preferred_limit = {
						any_close_relative = {
							character = ROOT
						}
						NOT = {
							age = 25
						}
					}
					preferred_limit = {
						any_close_relative = {
							character = ROOT
						}
						NOT = {
							age = 30
						}
					}
					preferred_limit = {
						NOT = {
							age = 20
						}
					}
					preferred_limit = {
						NOT = {
							age = 25
						}
					}
					preferred_limit = {
						NOT = {
							age = 30
						}
					}
					save_event_target_as = bride_to_be
				}
				if = {
					limit = {
						FROM = {
							is_female = no
							OR = {
								is_married = no
								AND = {
									OR = {
										religion_group = muslim
										has_religion_feature = religion_harems
										has_religion_feature = religion_feature_zun
										has_religion_feature = religion_feature_tengri
									}
									NOT = {
										num_of_spouses = 4
									}
								}
							}
						}
					}
					FROM = {
						save_event_target_as = husband_to_be
					}
				}
				else = {
					FROM = {
						random_child = {
							limit = {
								is_adult = yes
								is_female = no
								host = {
									character = FROM
								}
								is_landed = no
								prisoner = no
								dynasty = PREV
								NOT = {
									trait = bastard
								}
								OR = {
									is_married = no
									AND = {
										OR = {
											religion_group = muslim
											has_religion_feature = religion_harems
											has_religion_feature = religion_feature_zun
											has_religion_feature = religion_feature_tengri
										}
										NOT = {
											num_of_spouses = 4
										}
									}
								}
							}
							preferred_limit = {
								is_married = no
								NOT = {
									num_of_consorts > 0
								}
								NOT = {
									any_child_even_if_dead = {
										is_alive = yes
									}
								}
								NOT = {
									any_sibling = {
										is_female = no
										is_older_than = PREV
									}
								}
							}
							preferred_limit = {
								is_married = no
								NOT = {
									any_child_even_if_dead = {
										is_alive = yes
									}
								}
								NOT = {
									any_sibling = {
										is_female = no
										is_older_than = PREV
									}
								}
							}
							preferred_limit = {
								is_married = no
								NOT = {
									num_of_consorts > 0
								}
								NOT = {
									any_sibling = {
										is_female = no
										is_older_than = PREV
									}
								}
							}
							preferred_limit = {
								is_married = no
								NOT = {
									num_of_consorts > 0
								}
							}
							preferred_limit = {
								is_married = no
							}
							save_event_target_as = husband_to_be
						}
					}
				}
			}
			10 = {
				modifier = {
					factor = 0
					owes_favor_to = FROM # Can't
				}
				set_character_flag = ci_law_grant_favor
			}
			10 = {
				modifier = {
					factor = 0
					holds_favor_on = FROM # Can't
				}
				set_character_flag = ci_law_cancel_favor
			}
			10 = {
				modifier = {
					factor = 0
					NOT = {
						any_voter = {
							OR = {
								any_rival = {
									character = FROM
								}
								NOT = {
									reverse_opinion = {
										who = FROM
										value = -50
									}
								}
							}
						}
					}
				}
				set_character_flag = ci_law_fire_rival
				random_voter = {
					limit = {
						OR = {
							any_rival = {
								character = FROM
							}
							NOT = {
								reverse_opinion = {
									who = FROM
									value = -50
								}
							}
						}
					}
					preferred_limit = {
						NOR = {
							any_friend = {
								character = ROOT
							}
							any_lover = {
								character = ROOT
							}
						}
					}
					save_event_target_as = councillor_to_fire
				}
			}
			20 = {
				# Nothing
			}
		}
		random_list = {
			10 = {
				modifier = {
					factor = 0
					NOR = {
						prestige = 1000
						AND = {
							learning = 20
							prestige = 500
						}
					}
				}
				set_character_flag = ci_law_prestige
			}
			10 = {
				modifier = {
					factor = 0
					NOR = {
						wealth = 1000
						AND = {
							stewardship = 20
							wealth = 500
						}
					}
				}
				set_character_flag = ci_law_bribe
			}
			10 = {
				modifier = {
					factor = 0.1
					NOT = {
						diplomacy = 10
					}
				}
				set_character_flag = ci_law_diplomacy
			}
			10 = {
				modifier = {
					factor = 0.1
					NOT = {
						intrigue = 10
					}
				}
				set_character_flag = ci_law_intrigue
			}
			20 = {
				# Nothing
			}
		}
	}
		
	option = {
		name = EVTOPTA_SOH_4619 # You make a good case!
		
		if = {
			limit = {
				primary_title = {
					has_law = ci_vassal_law_0
				}
			}
			primary_title = {
				add_law_w_cooldown = ci_vassal_law_1
			}
		}
		else_if = {
			limit = {
				primary_title = {
					has_law = ci_vassal_law_1
				}
			}
			primary_title = {
				add_law_w_cooldown = ci_vassal_law_2
			}
		}
		else_if = {
			limit = {
				primary_title = {
					has_law = ci_vassal_law_2
				}
			}
			primary_title = {
				add_law_w_cooldown = ci_vassal_law_3
			}
		}
		else_if = {
			limit = {
				primary_title = {
					has_law = ci_vassal_law_3
				}
			}
			primary_title = {
				add_law_w_cooldown = ci_vassal_law_4
			}
		}
		
		FROM = {
			character_event = { id = soh.4620 } # Inform vassal
		}
		
		any_realm_lord = {
			limit = {
				ai = no
				NOT = {
					character = FROM
				}
			}
			character_event = { id = soh.4657 } # Inform player lords
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.5
				has_law = ci_vassal_law_1
			}
			modifier = {
				factor = 0.2
				has_law = ci_vassal_law_2
			}
			modifier = {
				factor = 0.01
				has_law = ci_vassal_law_3
			}
			modifier = {
				factor = 0.01
				trait = proud
			}
			modifier = {
				factor = 0.01
				trait = ambitious
			}
			modifier = {
				factor = 0.01
				any_rival = {
					character = FROM
				}
			}
			modifier = {
				factor = 10
				trait = slothful
			}
			modifier = {
				factor = 5
				trait = content
			}
			modifier = {
				factor = 10
				trait = trusting
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 2
				OR = {
					any_friend = {
						character = FROM
					}
					any_lover = {
						character = FROM
					}
				}
			}
			modifier = {
				factor = 10
				is_dumb_trigger = yes
			}
			modifier = {
				factor = 0.1
				has_character_modifier = mandate_of_heaven_5
			}
			modifier = {
				factor = 0.2
				has_character_modifier = mandate_of_heaven_4
			}
			modifier = {
				factor = 0.5
				has_character_modifier = mandate_of_heaven_3
			}
		}
	}
	
	option = {
		trigger = {
			has_character_flag = ci_law_grace
		}
		name = EVTOPTB_SOH_4619 # Here; have some Grace and forget all about this!
		
		FROM = {
			character_event = { id = soh.4621 } # Inform vassal
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.01
				any_rival = {
					character = FROM
				}
			}
			modifier = {
				factor = 5
				trait = content
			}
			modifier = {
				factor = 10
				trait = trusting
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 0.1
				has_character_modifier = mandate_of_heaven_5
			}
			modifier = {
				factor = 0.2
				has_character_modifier = mandate_of_heaven_4
			}
			modifier = {
				factor = 0.5
				has_character_modifier = mandate_of_heaven_3
			}
		}
	}
	
	option = {
		trigger = {
			has_character_flag = ci_law_marriage
			event_target:husband_to_be = {
				character = FROM
			}
		}
		name = EVTOPTC_SOH_4619 # I'll give you a marriage instead!
		
		event_target:husband_to_be = {
			add_spouse = event_target:bride_to_be
		}
		
		FROM = {
			character_event = { id = soh.4622 } # Inform vassal
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.01
				any_rival = {
					character = FROM
				}
			}
			modifier = {
				factor = 5
				trait = content
			}
			modifier = {
				factor = 10
				trait = trusting
			}
			modifier = {
				factor = 0.01
				trait = paranoid
			}
			modifier = {
				factor = 5
				trait = humble
			}
			modifier = {
				factor = 0.1
				trait = proud
			}
			modifier = {
				factor = 0.1
				has_character_modifier = mandate_of_heaven_5
			}
			modifier = {
				factor = 0.2
				has_character_modifier = mandate_of_heaven_4
			}
			modifier = {
				factor = 0.5
				has_character_modifier = mandate_of_heaven_3
			}
			modifier = {
				factor = 10
				OR = {
					any_friend = {
						character = FROM
					}
					any_lover = {
						character = FROM
					}
				}
			}
			modifier = {
				factor = 10
				is_dumb_trigger = yes
			}
		}
	}
	
	option = {
		trigger = {
			has_character_flag = ci_law_marriage
			event_target:husband_to_be = {
				NOT = {
					character = FROM
				}
			}
		}
		name = EVTOPTD_SOH_4619 # I'll give your son a marriage instead!
		
		event_target:husband_to_be = {
			add_spouse = event_target:bride_to_be
		}
		
		FROM = {
			character_event = { id = soh.4623 } # Inform vassal
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.01
				any_rival = {
					character = FROM
				}
			}
			modifier = {
				factor = 0.01
				any_rival = {
					character = event_target:husband_to_be
				}
			}
			modifier = {
				factor = 5
				trait = content
			}
			modifier = {
				factor = 10
				trait = trusting
			}
			modifier = {
				factor = 0.01
				trait = paranoid
			}
			modifier = {
				factor = 5
				trait = humble
			}
			modifier = {
				factor = 0.1
				trait = proud
			}
			modifier = {
				factor = 0.1
				has_character_modifier = mandate_of_heaven_5
			}
			modifier = {
				factor = 0.2
				has_character_modifier = mandate_of_heaven_4
			}
			modifier = {
				factor = 0.5
				has_character_modifier = mandate_of_heaven_3
			}
			modifier = {
				factor = 10
				OR = {
					any_friend = {
						character = FROM
					}
					any_lover = {
						character = FROM
					}
				}
			}
			modifier = {
				factor = 10
				OR = {
					any_friend = {
						character = event_target:husband_to_be
					}
					any_lover = {
						character = event_target:husband_to_be
					}
				}
			}
			modifier = {
				factor = 10
				is_dumb_trigger = yes
			}
		}
	}
	
	option = {
		trigger = {
			has_character_flag = ci_law_grant_favor
		}
		name = EVTOPTE_SOH_4619 # Forget about this and I'll grant you a Favor!
		
		FROM = {
			add_favor = ROOT
			character_event = { id = soh.4624 } # Inform vassal
		}
				
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.01
				trait = paranoid
			}
			modifier = {
				factor = 0.01
				any_rival = {
					character = FROM
				}
			}
			modifier = {
				factor = 5
				trait = content
			}
			modifier = {
				factor = 10
				trait = trusting
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 2
				OR = {
					any_friend = {
						character = FROM
					}
					any_lover = {
						character = FROM
					}
				}
			}
			modifier = {
				factor = 10
				is_dumb_trigger = yes
			}
		}
	}
	
	option = {
		trigger = {
			has_character_flag = ci_law_cancel_favor
		}
		name = EVTOPTF_SOH_4619 # You owe me; forget all about this and we're even!
		
		remove_favor = FROM
		
		FROM = {
			character_event = { id = soh.4625 } # Inform vassal
		}
				
		ai_chance = {
			factor = 100
		}
	}
	
	option = {
		trigger = {
			has_character_flag = ci_law_fire_rival
		}
		name = EVTOPTG_SOH_4619 # Forget about this, and your rival will be fired!
		
		event_target:councillor_to_fire = {
			character_event = { id = soh.4626 } # Inform the fired councillor
			fire_councillor_effect = yes
		}
		
		FROM = {
			character_event = { id = soh.4627 } # Inform vassal
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 100
				event_target:councillor_to_fire = {
					any_rival = {
						character = ROOT
					}
				}
			}
			modifier = {
				factor = 10
				event_target:councillor_to_fire = {
					has_position = malcontent
				}
			}
			modifier = {
				factor = 0.1
				event_target:councillor_to_fire = {
					has_position = loyalist
				}
			}
			modifier = {
				factor = 0.01
				event_target:councillor_to_fire = {
					OR = {
						any_friend = {
							character = ROOT
						}
						any_lover = {
							character = ROOT
						}
					}
				}
				NOT = {
					trait = arbitrary
				}
			}
			modifier = {
				factor = 0.01
				any_rival = {
					character = FROM
				}
			}
			modifier = {
				factor = 0.2
				event_target:councillor_to_fire = {
					is_powerful_vassal = yes
				}
				FROM = {
					is_smart_trigger = no
				}
			}
			modifier = {
				factor = 0.1
				has_character_modifier = mandate_of_heaven_5
			}
			modifier = {
				factor = 0.2
				has_character_modifier = mandate_of_heaven_4
			}
			modifier = {
				factor = 0.5
				has_character_modifier = mandate_of_heaven_3
			}
		}
	}
	
	option = {
		trigger = {
			has_character_flag = ci_law_prestige
		}
		name = EVTOPTH_SOH_4619 # I can refuse this using assorted means...
		
		if = {
			limit = {
				learning = 20
			}
			scaled_prestige = {
				value = -1
				min = -500
			}
		}
		else = {
			scaled_prestige = {
				value = -2
				min = -1000
			}
		}
		
		FROM = {
			character_event = { id = soh.4628 } # Inform vassal
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.01
				trait = proud
			}
			modifier = {
				factor = 5
				trait = content
			}
			modifier = {
				factor = 100
				trait = humble
			}
			modifier = {
				factor = 10
				is_smart_trigger = yes
			}
		}
	}
	
	option = {
		trigger = {
			has_character_flag = ci_law_bribe
		}
		name = EVTOPTI_SOH_4619 # I think this will make you reconsider...
		
		if = {
			limit = {
				stewardship = 20
			}
			transfer_scaled_wealth = {
				to = FROM
				value = 0.5
				min = 500
			}
		}
		else = {
			transfer_scaled_wealth = {
				to = FROM
				value = 1
				min = 1000
			}
		}
		
		FROM = {
			character_event = { id = soh.4629 } # Inform vassal
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.01
				trait = greedy
			}
			modifier = {
				factor = 5
				trait = content
			}
			modifier = {
				factor = 100
				trait = charitable
			}
			modifier = {
				factor = 2
				is_smart_trigger = yes
			}
		}
	}
	
	option = {
		trigger = {
			has_character_flag = ci_law_diplomacy
		}
		name = EVTOPTJ_SOH_4619 # I'm sure you'll reconsider when I tell you this!
		
		random_list = {
			50 = {
				modifier = {
					factor = 2
					diplomacy = 15
				}
				modifier = {
					factor = 2
					diplomacy = 20
				}
				modifier = {
					factor = 2
					diplomacy = 25
				}
				modifier = {
					factor = 2
					diplomacy = 30
				}
				FROM = {
					character_event = { id = soh.4630 } # It worked!
				}
			}
			50 = {
				modifier = {
					factor = 2
					NOT = {
						diplomacy = 10
					}
				}
				modifier = {
					factor = 2
					NOT = {
						diplomacy = 5
					}
				}
				FROM = {
					character_event = { id = soh.4632 } # vassal gets upset
				}
			}
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.01
				trait = shy
			}
			modifier = {
				factor = 10
				trait = proud
			}
			modifier = {
				factor = 100
				trait = gregarious
			}
			modifier = {
				factor = 2
				is_smart_trigger = yes
			}
			modifier = {
				factor = 10
				trait = socializer
			}
			modifier = {
				factor = 2
				has_education_diplomacy_trigger = yes
			}
			modifier = {
				factor = 2
				has_lifestyle_diplomacy_trigger = yes
			}
		}
	}
	
	option = {
		trigger = {
			has_character_flag = ci_law_intrigue
		}
		name = EVTOPTK_SOH_4619 # It'd be a shame if something happened...
		
		random_list = {
			50 = {
				modifier = {
					factor = 2
					intrigue = 15
				}
				modifier = {
					factor = 2
					intrigue = 20
				}
				modifier = {
					factor = 2
					intrigue = 25
				}
				modifier = {
					factor = 2
					intrigue = 30
				}
				FROM = {
					character_event = { id = soh.4634 } # It worked!
				}
			}
			50 = {
				modifier = {
					factor = 2
					NOT = {
						intrigue = 10
					}
				}
				modifier = {
					factor = 2
					NOT = {
						intrigue = 5
					}
				}
				FROM = {
					character_event = { id = soh.4636 } # vassal gets upset and asks again
				}
			}
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.01
				trait = shy
			}
			modifier = {
				factor = 10
				trait = proud
			}
			modifier = {
				factor = 100
				trait = gregarious
			}
			modifier = {
				factor = 2
				is_smart_trigger = yes
			}
			modifier = {
				factor = 10
				trait = schemer
			}
			modifier = {
				factor = 2
				has_education_intrigue_trigger = yes
			}
			modifier = {
				factor = 2
				has_lifestyle_intrigue_trigger = yes
			}
			modifier = {
				factor = 0.01
				FROM = {
					OR = {
						any_friend = {
							character = ROOT
						}
						any_lover = {
							character = ROOT
						}
					}
				}
			}
			modifier = {
				factor = 100
				FROM = {
					any_rival = {
						character = ROOT
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTL_SOH_4619 # Never!
		
		character_event = { id = soh.4638 } # Fallout - no offset!
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 10
				trait = brave
			}
			modifier = {
				factor = 10
				trait = proud
			}
			modifier = {
				factor = 10
				trait = ambitious
			}
			modifier = {
				factor = 100
				trait = paranoid
			}
			modifier = {
				factor = 100
				any_rival = {
					character = FROM
				}
			}
			modifier = {
				factor = 0.1
				trait = craven
			}
			modifier = {
				factor = 0.1
				trait = trusting
			}
			modifier = {
				factor = 0.1
				trait = slothful
			}
			modifier = {
				factor = 0.1
				trait = humble
			}
			modifier = {
				factor = 2
				is_smart_trigger = yes
			}
		}
	}
}

# Liege accepted
character_event = {
	id = soh.4620
	desc = EVTDESC_SOH_4620
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4620 # Mwahahaha! Etc.
	}
}

# Got Grace
character_event = {
	id = soh.4621
	desc = EVTDESC_SOH_4621
	picture = GFX_evt_china_diplomatic_success
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4621 # I suppose I can work with this...
		
		add_grace_massive_effect = yes
	}
}

# Got an Imperial Marriage
character_event = {
	id = soh.4622
	desc = EVTDESC_SOH_4622
	picture = GFX_evt_chinese_concubine
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4622 # I think this could be advantageous...
	}
}

# Son got an Imperial Marriage
character_event = {
	id = soh.4623
	desc = EVTDESC_SOH_4623
	picture = GFX_evt_chinese_concubine
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4623 # I think this could be advantageous...
	}
}

# Got a Favor
character_event = {
	id = soh.4624
	desc = EVTDESC_SOH_4624
	picture = GFX_evt_china_golden_age
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4624 # I think this could be advantageous...
	}
}

# Liege cancelled Favor
character_event = {
	id = soh.4625
	desc = EVTDESC_SOH_4625
	picture = GFX_evt_china_golden_age
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4625 # I suppose that's that...
	}
}

# Fired rival informed
character_event = {
	id = soh.4626
	desc = EVTDESC_SOH_4626
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4626 # Curse both their names!
		
		opinion = {
			who = FROMFROM
			modifier = got_me_fired
		}
	}
}

# Liege fired rival
character_event = {
	id = soh.4627
	desc = EVTDESC_SOH_4627
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4627 # I think this could be advantageous...
	}
}

# Got a bribe
character_event = {
	id = soh.4628
	desc = EVTDESC_SOH_4628
	picture = GFX_evt_china_diplomatic_success
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4628 # I think this could be advantageous...
	}
}

# Liege spent prestige
character_event = {
	id = soh.4629
	desc = EVTDESC_SOH_4629
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4629 # Well, that's that...
	}
}

# Liege convincingly used diplomacy
character_event = {
	id = soh.4630
	desc = EVTDESC_SOH_4630
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4630 # Well, that's that...
		
		FROM = {
			character_event = { id = soh.4631 } # Inform liege
		}
	}
}

# Liege convincingly used diplomacy - liege
character_event = {
	id = soh.4631
	desc = EVTDESC_SOH_4631
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4631 # And here I thought FROM never would buy it!
	}
}

# Liege tried to use diplomacy but failed
character_event = {
	id = soh.4632
	desc = EVTDESC_SOH_4632
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4632 # That was unconvincing; I'll ask again!
		
		opinion = {
			who = FROM
			modifier = unconvincing_diplomacy
		}
		
		FROM = {
			character_event = { id = soh.4633 } # Liege asked again
		}
	}
}

# Asked again
character_event = {
	id = soh.4633
	desc = EVTDESC_SOH_4633
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
		
	option = {
		name = EVTOPTA_SOH_4633 # You make a good case!
		
		if = {
			limit = {
				primary_title = {
					has_law = ci_vassal_law_0
				}
			}
			primary_title = {
				add_law_w_cooldown = ci_vassal_law_1
			}
		}
		else_if = {
			limit = {
				primary_title = {
					has_law = ci_vassal_law_1
				}
			}
			primary_title = {
				add_law_w_cooldown = ci_vassal_law_2
			}
		}
		else_if = {
			limit = {
				primary_title = {
					has_law = ci_vassal_law_2
				}
			}
			primary_title = {
				add_law_w_cooldown = ci_vassal_law_3
			}
		}
		else_if = {
			limit = {
				primary_title = {
					has_law = ci_vassal_law_3
				}
			}
			primary_title = {
				add_law_w_cooldown = ci_vassal_law_4
			}
		}
		
		FROM = {
			character_event = { id = soh.4620 } # Inform vassal
		}
		
		any_realm_lord = {
			limit = {
				ai = no
				NOT = {
					character = FROM
				}
			}
			character_event = { id = soh.4657 } # Inform player lords
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.5
				has_law = ci_vassal_law_1
			}
			modifier = {
				factor = 0.2
				has_law = ci_vassal_law_2
			}
			modifier = {
				factor = 0.01
				has_law = ci_vassal_law_3
			}
			modifier = {
				factor = 0.01
				trait = proud
			}
			modifier = {
				factor = 0.01
				trait = ambitious
			}
			modifier = {
				factor = 0.01
				any_rival = {
					character = FROM
				}
			}
			modifier = {
				factor = 10
				trait = slothful
			}
			modifier = {
				factor = 5
				trait = content
			}
			modifier = {
				factor = 10
				trait = trusting
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 2
				OR = {
					any_friend = {
						character = FROM
					}
					any_lover = {
						character = FROM
					}
				}
			}
			modifier = {
				factor = 10
				is_dumb_trigger = yes
			}
			modifier = {
				factor = 0.1
				has_character_modifier = mandate_of_heaven_5
			}
			modifier = {
				factor = 0.2
				has_character_modifier = mandate_of_heaven_4
			}
			modifier = {
				factor = 0.5
				has_character_modifier = mandate_of_heaven_3
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_4633 # Never!
		
		character_event = { id = soh.4638 } # Fallout - no offset!
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 10
				trait = brave
			}
			modifier = {
				factor = 10
				trait = proud
			}
			modifier = {
				factor = 10
				trait = ambitious
			}
			modifier = {
				factor = 100
				trait = paranoid
			}
			modifier = {
				factor = 100
				any_rival = {
					character = FROM
				}
			}
			modifier = {
				factor = 0.1
				trait = craven
			}
			modifier = {
				factor = 0.1
				trait = trusting
			}
			modifier = {
				factor = 0.1
				trait = slothful
			}
			modifier = {
				factor = 0.1
				trait = humble
			}
			modifier = {
				factor = 2
				is_smart_trigger = yes
			}
		}
	}
}

# Liege convincingly used intrigue
character_event = {
	id = soh.4634
	desc = EVTDESC_SOH_4634
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4635 # Well, that's that...
		
		FROM = {
			character_event = { id = soh.4635 } # Inform liege
		}
	}
}

# Liege convincingly used intrigue - liege
character_event = {
	id = soh.4635
	desc = EVTDESC_SOH_4635
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4635 # And here I thought FROM never would buy it!
	}
}

# Liege tried to use intrigue but failed
character_event = {
	id = soh.4636
	desc = EVTDESC_SOH_4636
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4636 # That was unconvincing; I'll ask again!
		
		opinion = {
			who = FROM
			modifier = unconvincing_intrigue
		}
		
		FROM = {
			character_event = { id = soh.4637 } # Liege asked again
		}
	}
}

# Asked again
character_event = {
	id = soh.4637
	desc = EVTDESC_SOH_4637
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
		
	option = {
		name = EVTOPTA_SOH_4637 # You make a good case!
		
		if = {
			limit = {
				primary_title = {
					has_law = ci_vassal_law_0
				}
			}
			primary_title = {
				add_law_w_cooldown = ci_vassal_law_1
			}
		}
		else_if = {
			limit = {
				primary_title = {
					has_law = ci_vassal_law_1
				}
			}
			primary_title = {
				add_law_w_cooldown = ci_vassal_law_2
			}
		}
		else_if = {
			limit = {
				primary_title = {
					has_law = ci_vassal_law_2
				}
			}
			primary_title = {
				add_law_w_cooldown = ci_vassal_law_3
			}
		}
		else_if = {
			limit = {
				primary_title = {
					has_law = ci_vassal_law_3
				}
			}
			primary_title = {
				add_law_w_cooldown = ci_vassal_law_4
			}
		}
		
		FROM = {
			character_event = { id = soh.4620 } # Inform vassal
		}
		
		any_realm_lord = {
			limit = {
				ai = no
				NOT = {
					character = FROM
				}
			}
			character_event = { id = soh.4657 } # Inform player lords
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.5
				has_law = ci_vassal_law_1
			}
			modifier = {
				factor = 0.2
				has_law = ci_vassal_law_2
			}
			modifier = {
				factor = 0.01
				has_law = ci_vassal_law_3
			}
			modifier = {
				factor = 0.01
				trait = proud
			}
			modifier = {
				factor = 0.01
				trait = ambitious
			}
			modifier = {
				factor = 0.01
				any_rival = {
					character = FROM
				}
			}
			modifier = {
				factor = 10
				trait = slothful
			}
			modifier = {
				factor = 5
				trait = content
			}
			modifier = {
				factor = 10
				trait = trusting
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 2
				OR = {
					any_friend = {
						character = FROM
					}
					any_lover = {
						character = FROM
					}
				}
			}
			modifier = {
				factor = 10
				is_dumb_trigger = yes
			}
			modifier = {
				factor = 0.1
				has_character_modifier = mandate_of_heaven_5
			}
			modifier = {
				factor = 0.2
				has_character_modifier = mandate_of_heaven_4
			}
			modifier = {
				factor = 0.5
				has_character_modifier = mandate_of_heaven_3
			}
		}
	}
	
	option = {
		name = EVTOPTB_SOH_4637 # Never!
		
		character_event = { id = soh.4638 } # Fallout - no offset!
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 10
				trait = brave
			}
			modifier = {
				factor = 10
				trait = proud
			}
			modifier = {
				factor = 10
				trait = ambitious
			}
			modifier = {
				factor = 100
				trait = paranoid
			}
			modifier = {
				factor = 100
				any_rival = {
					character = FROM
				}
			}
			modifier = {
				factor = 0.1
				trait = craven
			}
			modifier = {
				factor = 0.1
				trait = trusting
			}
			modifier = {
				factor = 0.1
				trait = slothful
			}
			modifier = {
				factor = 0.1
				trait = humble
			}
			modifier = {
				factor = 2
				is_smart_trigger = yes
			}
		}
	}
}

### Liege refused - fallout

# Hidden event for liege to determine fallout
character_event = {
	id = soh.4638
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		OR = {
			government = chinese_imperial_government
			government = eastern_imperial_government
		}
	}
	
	immediate = {
		random_list = {
			25 = {
				modifier = {
					factor = 0
					any_rival = {
						character = FROMFROM
					}
				}
				FROMFROM = {
					character_event = { id = soh.4639 } # Vassal just shrugs
				}
			}
			50 = {
				modifier = {
					factor = 0
					OR = {
						any_friend = {
							character = FROMFROM
						}
						any_lover = {
							character = FROMFROM
						}
					}
				}
				FROMFROM = {
					character_event = { id = soh.4641 } # Vassal greatly upset
				}
			}
			10 = {
				modifier = {
					factor = 0
					OR = {
						any_rival = {
							character = FROMFROM
						}
						any_friend = {
							character = FROMFROM
						}
						any_lover = {
							character = FROMFROM
						}
					}
				}
				FROMFROM = {
					character_event = { id = soh.4643 } # Vassal might rival liege
				}
			}
			10 = {
				modifier = {
					factor = 0
					NOT = {
						any_friend = {
							character = FROMFROM
						}
					}
				}
				FROMFROM = {
					character_event = { id = soh.4645 } # Vassal might end friendship
				}
			}
			10 = {
				modifier = {
					factor = 0
					NOT = {
						any_lover = {
							character = FROMFROM
						}
					}
				}
				FROMFROM = {
					character_event = { id = soh.4647 } # Vassal might stop being their liege's lover
				}
			}
			100 = {
				modifier = {
					factor = 0
					OR = {
						any_friend = {
							character = FROMFROM
						}
						any_lover = {
							character = FROMFROM
						}
					}
				}
				FROMFROM = {
					character_event = { id = soh.4649 } # Vassal might make vassals upset
				}
			}
			25 = {
				modifier = {
					factor = 0
					OR = {
						any_friend = {
							character = FROMFROM
						}
						any_lover = {
							character = FROMFROM
						}
					}
				}
				FROMFROM = {
					character_event = { id = soh.4652 } # Vassal might discredit liege
				}
			}
		}
	}
}

# Vassal just shrugs - vassal
character_event = {
	id = soh.4639
	desc = EVTDESC_SOH_4639
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4639 # Oh, well...
		
		FROM = {
			character_event = { id = soh.4640 } # Inform liege
		}
	}
}

# Vassal just shrugs - liege
character_event = {
	id = soh.4640
	desc = EVTDESC_SOH_4640
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4640 # I see..
	}
}

# Vassal greatly upset - vassal
character_event = {
	id = soh.4641
	desc = EVTDESC_SOH_4641
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4641 # I will remember this!
		
		opinion = {
			who = FROM
			modifier = ci_greatly_upset
		}
		
		FROM = {
			character_event = { id = soh.4642 } # Inform liege
		}
	}
}

# Vassal greatly upset - liege
character_event = {
	id = soh.4642
	desc = EVTDESC_SOH_4642
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4642 # Not unexpected...
	}
}

# Become rival with liege (just shrugs is fallback)?
character_event = {
	id = soh.4643
	desc = EVTDESC_SOH_4643
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4643 # I will never forgive this!
		
		add_rival = FROM
		
		FROM = {
			character_event = { id = soh.4644 } # Inform liege
		}
	}
	
	option = {
		name = EVTOPTB_SOH_4643 # I can let it slide...
		
		FROM = {
			character_event = { id = soh.4640 } # Inform liege
		}
		
		ai_chance = {
			factor = 0
		}
	}
}

# Vassal becomes rival - liege
character_event = {
	id = soh.4644
	desc = EVTDESC_SOH_4644
	picture = GFX_evt_stressed_ruler
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4644 # This could be bad...
		
		add_rival = FROM
	}
}

# End friendship with liege (just shrugs is fallback)?
character_event = {
	id = soh.4645
	desc = EVTDESC_SOH_4645
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4645 # We are no longer friends!
		
		remove_friend = FROM
		
		FROM = {
			character_event = { id = soh.4646 } # Inform liege
		}
	}
	
	option = {
		name = EVTOPTB_SOH_4645 # I can let it slide...
		
		FROM = {
			character_event = { id = soh.4640 } # Inform liege
		}
		
		ai_chance = {
			factor = 0
		}
	}
}

# Vassal ends friendship - liege
character_event = {
	id = soh.4646
	desc = EVTDESC_SOH_4646
	picture = GFX_evt_stressed_ruler
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4646 # With friends like these...
		
		remove_friend = FROM
	}
}

# Stop being liege's lover (just shrugs is fallback)?
character_event = {
	id = soh.4647
	desc = EVTDESC_SOH_4647
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4647 # I love FROM NOT!
		
		remove_lover = FROM
		
		FROM = {
			character_event = { id = soh.4648 } # Inform liege
		}
	}
	
	option = {
		name = EVTOPTB_SOH_4647 # I can let it slide...
		
		FROM = {
			character_event = { id = soh.4640 } # Inform liege
		}
		
		ai_chance = {
			factor = 0
		}
	}
}

# Vassal stops being lover - liege
character_event = {
	id = soh.4648
	desc = EVTDESC_SOH_4648
	picture = GFX_evt_stressed_ruler
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4648 # I hate you too!
		
		remove_lover = FROM
	}
}

# Upset vassals (just shrugs is fallback)?
character_event = {
	id = soh.4649
	desc = EVTDESC_SOH_4649
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4649 # Everyone will hear of this!
		
		FROM = {
			character_event = { id = soh.4650 } # Inform liege
		}
	}
	
	option = {
		name = EVTOPTB_SOH_4649 # I can let it slide...
		
		FROM = {
			character_event = { id = soh.4640 } # Inform liege
		}
		
		ai_chance = {
			factor = 0
		}
	}
}

# Vassal upset vassals - liege
character_event = {
	id = soh.4650
	desc = EVTDESC_SOH_4650
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4650 # Curses!
		
		any_realm_lord = {
			limit = {
				higher_tier_than = baron
			}
			opinion = {
				who = ROOT
				modifier = ci_upset_vassal
			}
			if = {
				limit = {
					ai = no
				}
				character_event = { id = soh.4651 } # Inform vassals
			}
		}
	}
}

# Vassal upsets vassals - vassals
character_event = {
	id = soh.4651
	desc = EVTDESC_SOH_4651
	picture = GFX_evt_stressed_ruler
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4651 # Nobody treats us like that!
	}
}

# Discredit liege (just shrugs is fallback)?
character_event = {
	id = soh.4652
	desc = EVTDESC_SOH_4652
	picture = GFX_evt_china_diplomatic_incident
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4652 # Everyone will hear of this!
		
		FROM = {
			character_event = { id = soh.4653 } # Inform liege
		}
	}
	
	option = {
		name = EVTOPTB_SOH_4652 # I can let it slide...
		
		FROM = {
			character_event = { id = soh.4640 } # Inform liege
		}
		
		ai_chance = {
			factor = 0
		}
	}
}

# Vassal discredits liege - liege
character_event = {
	id = soh.4653
	desc = EVTDESC_SOH_4653
	picture = GFX_evt_stressed_ruler
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4653 # Curses!
		
		prestige = -1000
	}
}



##### Alerting player realm lords

### Realm lords hear of new laws

# Eunuchs empowered
character_event = {
	id = soh.4654
	desc = EVTDESC_SOH_4654
	picture = GFX_evt_chinese_bureaucrat
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4654 # I see...
	}
}

# Grand Chancellor empowered
character_event = {
	id = soh.4655
	desc = EVTDESC_SOH_4655
	picture = GFX_evt_china_golden_age
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4655 # Maybe I should try to become the Grand Chancellor?
	}
}

# Courtiers empowered
character_event = {
	id = soh.4656
	desc = EVTDESC_SOH_4656
	picture = GFX_evt_chinese_concubine
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4656 # I see...
	}
}

# Vassals empowered
character_event = {
	id = soh.4657
	desc = EVTDESC_SOH_4657
	picture = GFX_evt_china_diplomatic_success
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_SOH_4657 # Excellent!
	}
}



##### Misc

# on_startup setup event
character_event = {
	id = soh.4658
	hide_window = yes
	is_triggered_only = yes
	
	only_playable = yes
	only_independent = yes
	religion = catholic
	
	has_dlc = "Zeus"
	has_dlc = "Jade Dragon"
	
	trigger = {
		controls_religion = yes
		NOT = {
			has_global_flag = chinese_law_setup_done
		}
	}
	
	immediate = {
		set_global_flag = chinese_law_setup_done
		any_independent_ruler = {
			limit = {
				higher_tier_than = duke
				OR = {
					government = chinese_imperial_government
					government = eastern_imperial_government
					government = chinese_vassal_government
				}
			}
			primary_title = {
				if = {
					limit = {
						has_title_flag = eunuch_law_0
					}
					add_law = eunuch_law_0
					log = "eunuch_law_0 set for [Prev.GetBestName]"
				}
				else_if = {
					limit = {
						has_title_flag = eunuch_law_1
					}
					add_law = eunuch_law_1
					log = "eunuch_law_1 set for [Prev.GetBestName]"
				}
				else_if = {
					limit = {
						has_title_flag = eunuch_law_2
					}
					add_law = eunuch_law_2
					log = "eunuch_law_2 set for [Prev.GetBestName]"
				}
				else_if = {
					limit = {
						has_title_flag = eunuch_law_3
					}
					add_law = eunuch_law_3
					log = "eunuch_law_3 set for [Prev.GetBestName]"
				}
				else_if = {
					limit = {
						has_title_flag = eunuch_law_4
					}
					add_law = eunuch_law_4
					log = "eunuch_law_4 set for [Prev.GetBestName]"
				}
				if = {
					limit = {
						has_title_flag = grand_chancellor_law_0
					}
					add_law = grand_chancellor_law_0
					log = "grand_chancellor_law_0 set for [Prev.GetBestName]"
				}
				else_if = {
					limit = {
						has_title_flag = grand_chancellor_law_1
					}
					add_law = grand_chancellor_law_1
					log = "grand_chancellor_law_1 set for [Prev.GetBestName]"
				}
				else_if = {
					limit = {
						has_title_flag = grand_chancellor_law_2
					}
					add_law = grand_chancellor_law_2
					log = "grand_chancellor_law_2 set for [Prev.GetBestName]"
				}
				if = {
					limit = {
						has_title_flag = ci_courtier_law_0
					}
					add_law = ci_courtier_law_0
					log = "ci_courtier_law_0 set for [Prev.GetBestName]"
				}
				else_if = {
					limit = {
						has_title_flag = ci_courtier_law_1
					}
					add_law = ci_courtier_law_1
					log = "ci_courtier_law_1 set for [Prev.GetBestName]"
				}
				else_if = {
					limit = {
						has_title_flag = ci_courtier_law_2
					}
					add_law = ci_courtier_law_2
					log = "ci_courtier_law_2 set for [Prev.GetBestName]"
				}
				else_if = {
					limit = {
						has_title_flag = ci_courtier_law_3
					}
					add_law = ci_courtier_law_3
					log = "ci_courtier_law_3 set for [Prev.GetBestName]"
				}
				else_if = {
					limit = {
						has_title_flag = ci_courtier_law_4
					}
					add_law = ci_courtier_law_4
					log = "ci_courtier_law_4 set for [Prev.GetBestName]"
				}
				if = {
					limit = {
						has_title_flag = ci_vassal_law_0
					}
					add_law = ci_vassal_law_0
					log = "ci_vassal_law_0 set for [Prev.GetBestName]"
				}
				else_if = {
					limit = {
						has_title_flag = ci_vassal_law_1
					}
					add_law = ci_vassal_law_1
					log = "ci_vassal_law_1 set for [Prev.GetBestName]"
				}
				else_if = {
					limit = {
						has_title_flag = ci_vassal_law_2
					}
					add_law = ci_vassal_law_2
					log = "ci_vassal_law_2 set for [Prev.GetBestName]"
				}
				else_if = {
					limit = {
						has_title_flag = ci_vassal_law_3
					}
					add_law = ci_vassal_law_3
					log = "ci_vassal_law_3 set for [Prev.GetBestName]"
				}
				else_if = {
					limit = {
						has_title_flag = ci_vassal_law_4
					}
					add_law = ci_vassal_law_4
					log = "ci_vassal_law_4 set for [Prev.GetBestName]"
				}
				clr_title_flag = eunuch_law_0
				clr_title_flag = eunuch_law_1
				clr_title_flag = eunuch_law_2
				clr_title_flag = eunuch_law_3
				clr_title_flag = eunuch_law_4
				clr_title_flag = grand_chancellor_law_0
				clr_title_flag = grand_chancellor_law_1
				clr_title_flag = grand_chancellor_law_2
				clr_title_flag = ci_courtier_law_0
				clr_title_flag = ci_courtier_law_1
				clr_title_flag = ci_courtier_law_2
				clr_title_flag = ci_courtier_law_3
				clr_title_flag = ci_courtier_law_4
				clr_title_flag = ci_vassal_law_0
				clr_title_flag = ci_vassal_law_1
				clr_title_flag = ci_vassal_law_2
				clr_title_flag = ci_vassal_law_3
				clr_title_flag = ci_vassal_law_4
			}
			if = {
				limit = {
					tier = emperor
					primary_title = {
						NOT = {
							has_law = eunuch_law_0
						}
					}
				}
				character_event = { id = eunuch.1 } # Spawn council eunuchs
			}
		}
	}
}