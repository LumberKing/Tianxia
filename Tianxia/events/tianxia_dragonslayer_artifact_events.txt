##### Dragonslayer artifact events
# by Silverswee(e)per

namespace = tianxia

# IDs 1101-1200 reserved

##### Decision-triggered events

### Draught of Healing

# Use Draught of Healing?
character_event = {
	id = tianxia.1101
	desc = EVTDESC_TIANXIA_1101
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes # use_draught_of_healing decision
	
	option = {
		name = EVTOPTA_TIANXIA_1101 # Use it!
		
		unsafe_destroy_artifact = draught_of_healing
		
		custom_tooltip = {
			text = heal_fully_tooltip
			
			remove_disease_trait_effect = yes
			clear_disease_level_effect = yes
			
			remove_trait = infirm
			remove_trait = incapable
			
			remove_all_maimed_traits_effect = yes
			
			remove_trait = severely_injured
			remove_trait = wounded
			
			remove_symptoms_effect = yes
			remove_disease_flags_effect = yes
			remove_treatment_modifiers_effect = yes
			
			remove_character_modifier = glass_eye
			remove_character_modifier = phantom_pain
			remove_character_modifier = peg_leg
			
			remove_character_modifier = badly_bruised
			remove_character_modifier = black_eye
			remove_character_modifier = swollen_ankle
			remove_character_modifier = swollen_wrist
			remove_character_modifier = sore_muscles
			remove_character_modifier = cracked_ribs
			remove_character_modifier = concussion
			
			destroy_artifact = prosthetic_hand_gold
			destroy_artifact = prosthetic_hand_metal
			destroy_artifact = prosthetic_leg_artifact
			remove_character_modifier = golden_mask
		}
	}
	
	option = {
		trigger = {
			ai = no
		}
		
		name = EVTOPTB_TIANXIA_1102 # No!
		
		clr_character_flag = using_draught_of_healing
	}
}

### Vial of Immortality

# Use Vial of Immortality?
character_event = {
	id = tianxia.1102
	desc = EVTDESC_TIANXIA_1102
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes # use_vial_of_immortality decision
	
	option = {
		name = EVTOPTA_TIANXIA_1102 # My reign shall be eternal!
		
		unsafe_destroy_artifact = vial_of_immortality
		
		add_trait = immortal
		
		if = { 
			limit = { 
				is_female = no 
				has_dlc = "Holy Fury"
			}
			
			create_bloodline = {
				type = immortal_bloodline_01
			}       
		}
		
		if = { 
			limit = { 
				is_female = yes 
				has_dlc = "Holy Fury"
			}
			
			create_bloodline = {
				type = immortal_bloodline_01
				inheritance = matrilineal
			}       
		}
	}
	
	option = {
		trigger = {
			ai = no
		}
		
		name = EVTOPTB_TIANXIA_1102 # No!
		
		clr_character_flag = using_vial_of_immortality
	}
}

### Living Flame

# Unleash the Living Flame?
character_event = {
	id = tianxia.1103
	desc = EVTDESC_TIANXIA_1103
	picture = GFX_evt_irminsul_burning
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes # unleash_living_flame decision
	
	immediate = {
		location = {
			save_event_target_as = burninated_province
		}
	}
	
	option = {
		name = EVTOPTA_TIANXIA_1103 # BURN IT! BURN IT ALL!
		
		piety = -10000
		
		pacifists_lose_piety_effect = yes # A pittance!
		
		if = {
			limit = {
				has_game_rule = {
					name = defensive_pacts
					value = on
				}
			}
			
			change_infamy = {
				value = 1000
				localisation = crazy_pyro
			}
		}
		
		if = {
			limit = {
				controls_religion = no
				OR = {
					religion_group = christian
					religion = yazidi
					has_religion_feature = religion_autocephaly
					has_religion_feature = religion_theocratic_head
				}
				religion_head = {
					always = yes
				}
			}
			
			add_trait = excommunicated
		}
		
		set_council_malcontent = yes
		
		add_trait_fully_cruel_effect = yes
		add_trait_fully_arbitrary_effect = yes
		add_trait_fully_wroth_effect = yes
		
		
		any_artifact = {
			limit = {
				artifact_type = living_flame
			}
			
			unsafe_destroy_artifact = yes
		}
		
		event_target:burninated_province = {
			custom_tooltip = {
				text = is_burninated_with_extreme_prejudice
				
				burninate_with_extreme_prejudice_effect = yes
			}
			
			hidden_tooltip = {
				any_province_character = {
					limit = {
						is_inaccessible_trigger = no
					}
					
					random_list = {
						25 = {
							trigger = {
								ai = yes
							}
							
							if = {
								limit = {
									has_dlc = "Jade Dragon"
									e_china = {
										holder_scope = {
											is_chinese_emperor_trigger = yes
											OR = {
												character = PREVPREV
												AND = {
													is_close_relative = ROOT
													dynasty = PREVPREV
												}
											}
											NOT = {
												character = ROOT
											}
										}
									}
								}
								
								if = {
									limit = {
										is_chinese_emperor_trigger = yes
									}
									ROOT = {
										detract_grace_super_huge_effect = yes
									}
								}
								else = {
									ROOT = {
										detract_grace_massive_effect = yes
									}
								}
							}
							
							death = {
								death_reason = death_burninated
								killer = ROOT
							}
						}
						
						75 = {}
					}
				}
				
				holder_scope = {
					if = {
						limit = {
							NOT = {
								character = ROOT
							}
						}
						
						opinion = {
							who = ROOT
							modifier = opinion_burninated_the_land
						}
						
						if = {
							limit = {
								has_dlc = "Jade Dragon"
								e_china = {
									holder_scope = {
										is_chinese_emperor_trigger = yes
										OR = {
											character = PREVPREV
											AND = {
												is_close_relative = ROOT
												dynasty = PREVPREV
											}
										}
										NOT = {
											character = ROOT
										}
									}
								}
							}
							
							if = {
								limit = {
									is_chinese_emperor_trigger = yes
								}
								ROOT = {
									detract_grace_super_huge_effect = yes
								}
							}
							else = {
								ROOT = {
									detract_grace_massive_effect = yes
								}
							}
						}
						
						any_liege = {
							if = {
								limit = {
									has_dlc = "Jade Dragon"
									e_china = {
										holder_scope = {
											is_chinese_emperor_trigger = yes
											OR = {
												character = PREVPREV
												AND = {
													is_close_relative = ROOT
													dynasty = PREVPREV
												}
											}
											NOT = {
												character = ROOT
											}
										}
									}
								}
								
								if = {
									limit = {
										is_chinese_emperor_trigger = yes
									}
									ROOT = {
										detract_grace_super_huge_effect = yes
									}
								}
								else = {
									ROOT = {
										detract_grace_massive_effect = yes
									}
								}
							}
						}
					}
					
					any_realm_character = {
						opinion = {
							who = ROOT
							modifier = opinion_burninated_the_land
						}
						
					}
				}
			}
		}
		
		any_player = {
			limit = {
				NOT = {
					character = ROOT
				}
			}
			
			character_event = { id = tianxia.1104 } # Inform players
		}
	}
	
	option = {
		name = EVTOPTB_TIANXIA_1103 # I changed my mind!
		
		clr_character_flag = unleashing_living_flame
	}
}

# Owner + other realm lords of target province get notified
character_event = {
	id = tianxia.1104
	desc = EVTDESC_TIANXIA_1104
	picture = GFX_evt_irminsul_burning
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_TIANXIA_1103 # FROM will pay for this!
	}
}

### Deed to the Dragon Throne

# Emperor of China notified that FROM claimed the Dragon Throne
character_event = {
	id = tianxia.1105
	desc = EVTDESC_TIANXIA_1105
	picture = GFX_evt_china_invades
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes # use_deed_to_the_dragon_throne decision
	
	option = {
		name = EVTOPTA_TIANXIA_1105 # The Dragon Throne is mine!
		
		add_rival = FROM
	}
}

### Incomplete Deck of Cards

# Draw a card (or several) - Note: Nothing should actually happen (other than feeling as if something happened)
character_event = {
	id = tianxia.1106
    picture = GFX_evt_lunatic
    border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes # draw_a_card decision
	
	immediate = {
		random_list = {
			5 = {
				set_character_flag = ace_of_diamonds # Vizier
			}
			
			5 = {
				set_character_flag = king_of_diamonds # Sun
			}
			
			5 = {
				set_character_flag = queen_of_diamonds # Moon
			}
			
			5 = {
				set_character_flag = jack_of_diamonds # Star
			}
			
			5 = {
				set_character_flag = two_of_diamonds # Comet
			}
			
			5 = {
				set_character_flag = ace_of_hearts # The Fates
			}
			
			5 = {
				set_character_flag = king_of_hearts # Throne
			}
			
			5 = {
				set_character_flag = queen_of_hearts # Key
			}
			
			5 = {
				set_character_flag = jack_of_hearts # Knight
			}
			
			5 = {
				set_character_flag = two_of_hearts # Gem
			}
			
			5 = {
				set_character_flag = ace_of_clubs # Talons
			}
			
			5 = {
				set_character_flag = king_of_clubs # The Void
			}
			
			5 = {
				set_character_flag = queen_of_clubs # Flames
			}
			
			5 = {
				set_character_flag = jack_of_clubs # Skull
			}
			
			5 = {
				set_character_flag = two_of_clubs # Idiot
			}
			
			5 = {
				set_character_flag = ace_of_spades # Donjon
			}
			
			5 = {
				set_character_flag = king_of_spades # Ruin
			}
			
			5 = {
				set_character_flag = queen_of_spades # Euryale
			}
			
			5 = {
				set_character_flag = jack_of_spades # Rogue
			}
			
			5 = {
				set_character_flag = two_of_spades # Balance
			}
			
			5 = {
				trigger = {
					any_artifact = {
						artifact_type = incomplete_deck_of_cards
						NOT = {
							has_artifact_flag = joker_1 # Once only!
						}
					}
				}
				
				random_artifact = {
					limit = {
						artifact_type = incomplete_deck_of_cards
					}
					set_artifact_flag = joker_1 # Once only!
				}
				
				set_character_flag = joker_1 # Fool
				set_character_flag = draw_again
			}
			
			5 = {
				trigger = {
					any_artifact = {
						artifact_type = incomplete_deck_of_cards
						NOT = {
							has_artifact_flag = joker_2 # Once only!
						}
					}
				}
				
				random_artifact = {
					limit = {
						artifact_type = incomplete_deck_of_cards
					}
					set_artifact_flag = joker_2 # Once only!
				}
				
				set_character_flag = joker_2 # Jester
				set_character_flag = draw_again # Technically a choice, but...
			}
		}
	}
	
	desc = {
		trigger = {
			has_character_flag = ace_of_diamonds # Vizier
		}
		text = EVTDESCA_TIANXIA_1106
	}
	desc = {
		trigger = {
			has_character_flag = king_of_diamonds # Sun
		}
		text = EVTDESCB_TIANXIA_1106
	}
	desc = {
		trigger = {
			has_character_flag = queen_of_diamonds # Moon
		}
		text = EVTDESCC_TIANXIA_1106
	}
	desc = {
		trigger = {
			has_character_flag = jack_of_diamonds # Star
		}
		text = EVTDESCD_TIANXIA_1106
	}
	desc = {
		trigger = {
			has_character_flag = two_of_diamonds # Comet
		}
		text = EVTDESCE_TIANXIA_1106
	}
	desc = {
		trigger = {
			has_character_flag = ace_of_hearts # The Fates
		}
		text = EVTDESCF_TIANXIA_1106
	}
	desc = {
		trigger = {
			has_character_flag = king_of_hearts # Throne
		}
		text = EVTDESCG_TIANXIA_1106
	}
	desc = {
		trigger = {
			has_character_flag = queen_of_hearts # Key
		}
		text = EVTDESCH_TIANXIA_1106
	}
	desc = {
		trigger = {
			has_character_flag = jack_of_hearts # Knight
		}
		text = EVTDESCI_TIANXIA_1106
	}
	desc = {
		trigger = {
			has_character_flag = two_of_hearts # Gem
		}
		text = EVTDESCJ_TIANXIA_1106
	}
	desc = {
		trigger = {
			has_character_flag = ace_of_clubs # Talons
		}
		text = EVTDESCK_TIANXIA_1106
	}
	desc = {
		trigger = {
			has_character_flag = king_of_clubs # The Void
		}
		text = EVTDESCL_TIANXIA_1106
	}
	desc = {
		trigger = {
			has_character_flag = queen_of_clubs # Flames
		}
		text = EVTDESCM_TIANXIA_1106
	}
	desc = {
		trigger = {
			has_character_flag = jack_of_clubs # Skull
		}
		text = EVTDESCN_TIANXIA_1106
	}
	desc = {
		trigger = {
			has_character_flag = two_of_clubs # Idiot
		}
		text = EVTDESCO_TIANXIA_1106
	}
	desc = {
		trigger = {
			has_character_flag = ace_of_spades # Donjon
		}
		text = EVTDESCP_TIANXIA_1106
	}
	desc = {
		trigger = {
			has_character_flag = king_of_spades # Ruin
		}
		text = EVTDESCQ_TIANXIA_1106
	}
	desc = {
		trigger = {
			has_character_flag = queen_of_spades # Euryale
		}
		text = EVTDESCR_TIANXIA_1106
	}
	desc = {
		trigger = {
			has_character_flag = jack_of_spades # Rogue
		}
		text = EVTDESCS_TIANXIA_1106
	}
	desc = {
		trigger = {
			has_character_flag = two_of_spades # Balance
		}
		text = EVTDESCT_TIANXIA_1106
	}
	desc = {
		trigger = {
			has_character_flag = joker_1 # Fool
		}
		text = EVTDESCU_TIANXIA_1106
	}
	desc = {
		trigger = {
			has_character_flag = joker_2 # Jester
		}
		text = EVTDESCV_TIANXIA_1106
	}
	
	option = {
		trigger = {
			NOT = {
				has_character_flag = draw_again
			}
		}
		
		name = EVTOPTA_TIANXIA_1106 # Well, that was odd...
		
		clr_character_flag = ace_of_clubs # Talons
		clr_character_flag = ace_of_diamonds # Vizier
		clr_character_flag = ace_of_hearts # The Fates
		clr_character_flag = ace_of_spades # Donjon
		clr_character_flag = king_of_clubs # The Void
		clr_character_flag = king_of_diamonds # Sun
		clr_character_flag = king_of_hearts # Throne
		clr_character_flag = king_of_spades # Ruin
		clr_character_flag = jack_of_clubs # Skull
		clr_character_flag = jack_of_diamonds # Star
		clr_character_flag = jack_of_hearts # Knight
		clr_character_flag = jack_of_spades # Rogue
		clr_character_flag = joker_1 # Fool
		clr_character_flag = joker_2 # Jester
		clr_character_flag = queen_of_clubs # Flames
		clr_character_flag = queen_of_diamonds # Moon
		clr_character_flag = queen_of_hearts # Key
		clr_character_flag = queen_of_spades # Euryale
		clr_character_flag = two_of_clubs # Idiot
		clr_character_flag = two_of_diamonds # Comet
		clr_character_flag = two_of_hearts # Gem
		clr_character_flag = two_of_spades # Balance
		clr_character_flag = draw_again
	}
	
	option = {
		name = EVTOPTB_TIANXIA_1106 # Let's draw another card!
		
		clr_character_flag = ace_of_clubs # Talons
		clr_character_flag = ace_of_diamonds # Vizier
		clr_character_flag = ace_of_hearts # The Fates
		clr_character_flag = ace_of_spades # Donjon
		clr_character_flag = king_of_clubs # The Void
		clr_character_flag = king_of_diamonds # Sun
		clr_character_flag = king_of_hearts # Throne
		clr_character_flag = king_of_spades # Ruin
		clr_character_flag = jack_of_clubs # Skull
		clr_character_flag = jack_of_diamonds # Star
		clr_character_flag = jack_of_hearts # Knight
		clr_character_flag = jack_of_spades # Rogue
		clr_character_flag = joker_1 # Fool
		clr_character_flag = joker_2 # Jester
		clr_character_flag = queen_of_clubs # Flames
		clr_character_flag = queen_of_diamonds # Moon
		clr_character_flag = queen_of_hearts # Key
		clr_character_flag = queen_of_spades # Euryale
		clr_character_flag = two_of_clubs # Idiot
		clr_character_flag = two_of_diamonds # Comet
		clr_character_flag = two_of_hearts # Gem
		clr_character_flag = two_of_spades # Balance
		clr_character_flag = draw_again
		
		repeat_event = { id = tianxia.1106 } # Draw a card!
	}
}

##### Non-decision events

### Wandy

# Wandy the Talking Wand speaks
character_event = {
	id = tianxia.1107
    picture = GFX_evt_lunatic
    border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes # on_bi_yearly_pulse -> random_events -> wandy
	
	only_playable = yes
	prisoner = no
	
	trigger = {
		is_inaccessible_or_incapable_trigger = no
		has_artifact = talking_wand
	}
	
	immediate = {
		random_list = {
			10 = {
				set_character_flag = talking_wand_1
			}
			10 = {
				set_character_flag = talking_wand_2
			}
			10 = {
				set_character_flag = talking_wand_3
			}
			10 = {
				set_character_flag = talking_wand_4
			}
			10 = {
				set_character_flag = talking_wand_5
			}
			10 = {
				set_character_flag = talking_wand_6
			}
			10 = {
				set_character_flag = talking_wand_7
			}
		}
	}
	
	desc = {
		trigger = {
			has_character_flag = talking_wand_1
		}
		text = EVTDESCA_TIANXIA_1107
	}
	
	desc = {
		trigger = {
			has_character_flag = talking_wand_2
		}
		text = EVTDESCE_TIANXIA_1107
	}
	
	desc = {
		trigger = {
			has_character_flag = talking_wand_3
		}
		text = EVTDESCC_TIANXIA_1107
	}
	
	desc = {
		trigger = {
			has_character_flag = talking_wand_4
		}
		text = EVTDESCD_TIANXIA_1107
	}
	
	desc = {
		trigger = {
			has_character_flag = talking_wand_5
		}
		text = EVTDESCE_TIANXIA_1107
	}
	
	desc = {
		trigger = {
			has_character_flag = talking_wand_6
		}
		text = EVTDESCF_TIANXIA_1107
	}
	
	desc = {
		trigger = {
			has_character_flag = talking_wand_7
		}
		text = EVTDESCG_TIANXIA_1107
	}
	
	option = {
		trigger = {
			NOT = {
				trait = lunatic
			}
		}
		
		name = EVTOPTA_TIANXIA_1107 # Please shut up!
		
		random = {
			chance = 1
			add_trait = lunatic
		}
	}
	
	option = {
		trigger = {
			trait = lunatic
		}
		
		name = EVTOPTB_TIANXIA_1107 # Thank you, that was most helpful!
		
		prestige = -5
	}
	
	after = {
		clr_character_flag = talking_wand_1
		clr_character_flag = talking_wand_2
		clr_character_flag = talking_wand_3
		clr_character_flag = talking_wand_4
		clr_character_flag = talking_wand_5
		clr_character_flag = talking_wand_6
		clr_character_flag = talking_wand_7
	}
}

### Sword of Two Minds

# Sword of Two Minds speaks
character_event = {
	id = tianxia.1108
    picture = GFX_evt_lunatic
    border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes # on_five_year_pulse -> random_events -> sword_of_two_minds
	
	only_playable = yes
	prisoner = no
	
	trigger = {
		is_inaccessible_or_incapable_trigger = no
		has_artifact = sword_of_two_minds
	}
	
	immediate = {
		random_list = {
			10 = {
				set_character_flag = sword_of_two_minds_1
			}
			10 = {
				set_character_flag = sword_of_two_minds_2
			}
			10 = {
				set_character_flag = sword_of_two_minds_3
			}
			10 = {
				set_character_flag = sword_of_two_minds_4
			}
			10 = {
				set_character_flag = sword_of_two_minds_5
			}
		}
	}
	
	desc = {
		trigger = {
			has_character_flag = sword_of_two_minds_1
		}
		text = EVTDESCA_TIANXIA_1108
	}
	
	desc = {
		trigger = {
			has_character_flag = sword_of_two_minds_2
		}
		text = EVTDESCE_TIANXIA_1108
	}
	
	desc = {
		trigger = {
			has_character_flag = sword_of_two_minds_3
		}
		text = EVTDESCC_TIANXIA_1108
	}
	
	desc = {
		trigger = {
			has_character_flag = sword_of_two_minds_4
		}
		text = EVTDESCD_TIANXIA_1108
	}
	
	desc = {
		trigger = {
			has_character_flag = sword_of_two_minds_5
		}
		text = EVTDESCE_TIANXIA_1108
	}
	
	option = {
		trigger = {
			NOT = {
				trait = lunatic
			}
		}
		
		name = EVTOPTA_TIANXIA_1108 # What?
		
		random = {
			chance = 1
			add_trait = lunatic
		}
	}
	
	option = {
		trigger = {
			trait = lunatic
		}
		
		name = EVTOPTB_TIANXIA_1108 # Yes! That makes sense!
		
		prestige = 5
		
		trigger_switch = {
			on_trigger = has_character_flag
			
			sword_of_two_minds_1 = {
				random_list = {
					50 = {
						add_trait_fully_cruel_effect = yes
					}
					50 = {
						add_trait_fully_kind_effect = yes
					}
				}
			}
			
			sword_of_two_minds_2 = {
				random_list = {
					25 = {
						add_trait_fully_chaste_effect = yes
					}
					25 = {
						add_trait_fully_temperate_effect = yes
					}
					25 = {
						add_trait_fully_lustful_effect = yes
					}
					25 = {
						add_trait_fully_gluttonous_effect = yes
					}
				}
			
			}
			
			sword_of_two_minds_3 = {
				random_list = {
					50 = {
						add_trait_fully_slothful_effect = yes
					}
					50 = {
						add_trait_fully_diligent_effect = yes
					}
				}
			}
			
			sword_of_two_minds_4 = {
				random_list = {
					50 = {
						add_trait_fully_kind_effect = yes
					}
					50 = {
						add_trait_fully_cruel_effect = yes
					}
				}
			}
			
			sword_of_two_minds_5 = {
				random_list = {
					50 = {
						add_trait_fully_kind_effect = yes
					}
					50 = {
						add_trait_fully_cruel_effect = yes
					}
				}
			}
		}
	}
	
	after = {
		clr_character_flag = sword_of_two_minds_1
		clr_character_flag = sword_of_two_minds_2
		clr_character_flag = sword_of_two_minds_3
		clr_character_flag = sword_of_two_minds_4
		clr_character_flag = sword_of_two_minds_5
	}
}

### Sanity's Demise

# Hidden setup
character_event = {
	id = tianxia.1109
	hide_window = yes
	
	is_triggered_only = yes # on_yearly_pulse -> random_events -> sanitys_demise
	
	only_playable = yes
	prisoner = no
	
	trigger = {
		is_inaccessible_or_incapable_trigger = no
		has_artifact = sanitys_demise
	}
	
	immediate = {
		if = {
			limit = {
				NOR = {
					trait = lunatic
					has_character_flag = sanity_set
				}
			}
			
			set_character_flag = sanity_set
			
			set_variable = {
				which = sanity
				value = 100
			}
		}
		
		if = {
			limit = {
				check_variable = {
					which = sanity
					value > 0
				}
				NOT = {
					trait = lunatic
				}
			}
			
			random_list = {
				10 = {
					change_variable = {
						which = sanity
						value = -1
					}
					
					# Small loss
					
					if = {
						limit = {
							check_variable = {
								which = sanity
								value > 0
							}
						}
						
						random_list = {
							10 = {
								trigger = {
									check_variable = {
										which = sanity
										value > 50
									}
								}
								
								# Non-descript whispers
								character_event = { id = tianxia.1110 }
							}
							
							2 = {
								mult_modifier = {
									factor = 2
									check_variable = {
										which = sanity
										value < 50
									}
								}
								
								# Whispers
								character_event = { id = tianxia.1111 }
							}
							
							2 = {
								trigger = {
									check_variable = {
										which = sanity
										value < 75
									}
								}
								
								# Push towards paranoia
								character_event = { id = tianxia.1112 }
							}
							
							2 = {
								trigger = {
									check_variable = {
										which = sanity
										value < 75
									}
								}
								
								# Push towards envy
								character_event = { id = tianxia.1113 }
							}
							
							2 = {
								trigger = {
									check_variable = {
										which = sanity
										value < 75
									}
								}
								
								# Push towards ambition
								character_event = { id = tianxia.1114 }
							}
							
							2 = {
								trigger = {
									check_variable = {
										which = sanity
										value < 75
									}
								}
								
								# Push towards cruelty
								character_event = { id = tianxia.1115 }
							}
							
							2 = {
								trigger = {
									check_variable = {
										which = sanity
										value < 75
									}
								}
								
								# Push towards deceit
								character_event = { id = tianxia.1116 }
							}
							
							2 = {
								trigger = {
									check_variable = {
										which = sanity
										value < 50
									}
								}
								
								# Suspicious of someone
								character_event = { id = tianxia.1117 }
							}
							
							1 = {
								trigger = {
									check_variable = {
										which = sanity
										value < 25
									}
								}
								
								mult_modifier = {
									factor = 2
									check_variable = {
										which = sanity
										value < 10
									}
								}
								
								# Sacrifice?
								character_event = { id = tianxia.1121 }
							}
						}
					}
				}
				
				5 = {
					trigger = {
						check_variable = {
							which = sanity
							value > 1
						}
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = sanity
							value < 50
						}
					}
					
					mult_modifier = {
						factor = 5
						check_variable = {
							which = sanity
							value < 10
						}
					}
					
					change_variable = {
						which = sanity
						value = -2
					}
					
					# Medium loss
					
					if = {
						limit = {
							check_variable = {
								which = sanity
								value > 0
							}
						}
						
						random_list = {
							10 = {
								trigger = {
									check_variable = {
										which = sanity
										value > 50
									}
								}
								
								# Non-descript whispers
								character_event = { id = tianxia.1110 }
							}
							
							2 = {
								mult_modifier = {
									factor = 2
									check_variable = {
										which = sanity
										value < 50
									}
								}
								
								# Whispers
								character_event = { id = tianxia.1111 }
							}
							
							2 = {
								trigger = {
									check_variable = {
										which = sanity
										value < 75
									}
								}
								
								# Push towards paranoia
								character_event = { id = tianxia.1112 }
							}
							
							2 = {
								trigger = {
									check_variable = {
										which = sanity
										value < 75
									}
								}
								
								# Push towards envy
								character_event = { id = tianxia.1113 }
							}
							
							2 = {
								trigger = {
									check_variable = {
										which = sanity
										value < 75
									}
								}
								
								# Push towards ambition
								character_event = { id = tianxia.1114 }
							}
							
							2 = {
								trigger = {
									check_variable = {
										which = sanity
										value < 75
									}
								}
								
								# Push towards cruelty
								character_event = { id = tianxia.1115 }
							}
							
							2 = {
								trigger = {
									check_variable = {
										which = sanity
										value < 75
									}
								}
								
								# Push towards deceit
								character_event = { id = tianxia.1116 }
							}
							
							2 = {
								trigger = {
									check_variable = {
										which = sanity
										value < 50
									}
								}
								
								# Suspicious of someone
								character_event = { id = tianxia.1117 }
							}
							
							1 = {
								trigger = {
									check_variable = {
										which = sanity
										value < 25
									}
								}
								
								mult_modifier = {
									factor = 2
									check_variable = {
										which = sanity
										value < 10
									}
								}
								
								# Sacrifice?
								character_event = { id = tianxia.1121 }
							}
						}
					}
				}
				
				2 = {
					trigger = {
						check_variable = {
							which = sanity
							value > 4
						}
					}
					
					mult_modifier = {
						factor = 2
						check_variable = {
							which = sanity
							value < 50
						}
					}
					
					mult_modifier = {
						factor = 5
						check_variable = {
							which = sanity
							value < 10
						}
					}
					
					change_variable = {
						which = sanity
						value = -5
					}
					
					# Big loss
					
					if = {
						limit = {
							check_variable = {
								which = sanity
								value > 0
							}
						}
						
						random_list = {
							10 = {
								trigger = {
									check_variable = {
										which = sanity
										value > 50
									}
								}
								
								# Non-descript whispers
								character_event = { id = tianxia.1110 }
							}
							
							2 = {
								mult_modifier = {
									factor = 2
									check_variable = {
										which = sanity
										value < 50
									}
								}
								
								# Whispers
								character_event = { id = tianxia.1111 }
							}
							
							2 = {
								trigger = {
									check_variable = {
										which = sanity
										value < 75
									}
								}
								
								# Push towards paranoia
								character_event = { id = tianxia.1112 }
							}
							
							2 = {
								trigger = {
									check_variable = {
										which = sanity
										value < 75
									}
								}
								
								# Push towards envy
								character_event = { id = tianxia.1113 }
							}
							
							2 = {
								trigger = {
									check_variable = {
										which = sanity
										value < 75
									}
								}
								
								# Push towards ambition
								character_event = { id = tianxia.1114 }
							}
							
							2 = {
								trigger = {
									check_variable = {
										which = sanity
										value < 75
									}
								}
								
								# Push towards cruelty
								character_event = { id = tianxia.1115 }
							}
							
							2 = {
								trigger = {
									check_variable = {
										which = sanity
										value < 75
									}
								}
								
								# Push towards deceit
								character_event = { id = tianxia.1116 }
							}
							
							2 = {
								trigger = {
									check_variable = {
										which = sanity
										value < 50
									}
								}
								
								# Suspicious of someone
								character_event = { id = tianxia.1117 }
							}
							
							1 = {
								trigger = {
									check_variable = {
										which = sanity
										value < 25
									}
								}
								
								mult_modifier = {
									factor = 2
									check_variable = {
										which = sanity
										value < 10
									}
								}
								
								# Sacrifice?
								character_event = { id = tianxia.1121 }
							}
						}
					}
				}
				
				1 = {
					trigger = {
						NOT = {
							any_artifact = {
								artifact_type = sanitys_demise
								is_artifact_equipped = yes
							}
						}
					}
					
					# No change
				}
				
				1 = {
					trigger = {
						check_variable = {
							which = sanity
							value < 100
						}
						NOT = {
							any_artifact = {
								artifact_type = sanitys_demise
								is_artifact_equipped = yes
							}
						}
					}
					
					# Small regain
					
					change_variable = {
						which = sanity
						value = 1
					}
				}
			}
		}
		
		if = {
			limit = {
				check_variable = {
					which = sanity
					value <= 0
				}
				NOT = {
					trait = lunatic
				}
			}
			
			# Become a lunatic
			
			set_variable = {
				which = sanity
				value = 0
			}
			
			character_event = { id = tianxia.1123 }
		}
		
		else = {
			# Already a lunatic
			random_list = {
				10 = {
					# Non-descript whispers
					character_event = { id = tianxia.1110 }
				}
				
				2 = {
					# Whispers
					character_event = { id = tianxia.1111 }
				}
				
				2 = {
					# Push towards paranoia
					character_event = { id = tianxia.1112 }
				}
				
				2 = {
					# Push towards envy
					character_event = { id = tianxia.1113 }
				}
				
				2 = {
					# Push towards ambition
					character_event = { id = tianxia.1114 }
				}
				
				2 = {
					# Push towards cruelty
					character_event = { id = tianxia.1115 }
				}
				
				2 = {
					# Push towards deceit
					character_event = { id = tianxia.1116 }
				}
				
				10 = {
					# Suspicious of someone
					character_event = { id = tianxia.1117 }
				}
				
				5 = {
					# Sacrifice
					character_event = { id = tianxia.1121 }
				}
				
				10 = {
					# Random trait change
					character_event = { id = tianxia.1124 }
				}
			}
		}
	}
}

# Non-descript whispers
character_event = {
	id = tianxia.1110
	desc = EVTDESC_TIANXIA_1110
	picture = GFX_evt_lunatic
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			check_variable = {
				which = sanity
				value > 0
			}
			NOT = {
				trait = lunatic
			}
		}
		
		name = EVTOPTA_TIANXIA_1110 # Try to ignore the whispers
		
		hidden_tooltip = {
			random_list = {
				10 = {
					mult_modifier = {
						factor = 2
						check_variable = {
							which = sanity
							value >= 50
						}
					}
					
					change_variable = {
						which = sanity
						value = 1
					}
				}
				
				90 = {
					# Nothing
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_TIANXIA_1110 # Try to learn more
		
		hidden_tooltip = {
			random_list = {
				10 = {
					# Nothing
				}
				
				90 = {
					mult_modifier = {
						factor = 2
						check_variable = {
							which = sanity
							value < 50
						}
					}
					
					change_variable = {
						which = sanity
						value = -1
					}
				}
			}
		}
	}
}

# Whispers
character_event = {
	id = tianxia.1111
	picture = GFX_evt_lunatic
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	immediate = {
		random_list = {
			100 = {
				set_character_flag = sanitys_demise_1
			}
			10 = {
				set_character_flag = sanitys_demise_2
			}
			100 = {
				set_character_flag = sanitys_demise_3
			}
			100 = {
				set_character_flag = sanitys_demise_4
			}
			100 = {
				set_character_flag = sanitys_demise_5
			}
			10 = {
				set_character_flag = sanitys_demise_6
			}
			10 = {
				set_character_flag = sanitys_demise_7
			}
			100 = {
				set_character_flag = sanitys_demise_8
			}
			100 = {
				set_character_flag = sanitys_demise_9
			}
			10 = {
				set_character_flag = sanitys_demise_10
			}
			100 = {
				set_character_flag = sanitys_demise_11
			}
			100 = {
				set_character_flag = sanitys_demise_12
			}
			10 = {
				set_character_flag = sanitys_demise_13
			}
			100 = {
				set_character_flag = sanitys_demise_14
			}
			100 = {
				set_character_flag = sanitys_demise_15
			}
			10 = {
				set_character_flag = sanitys_demise_16
			}
			10 = {
				set_character_flag = sanitys_demise_17
			}
			10 = {
				set_character_flag = sanitys_demise_18
			}
			10 = {
				set_character_flag = sanitys_demise_19
			}
			10 = {
				set_character_flag = sanitys_demise_20
			}
			10 = {
				set_character_flag = sanitys_demise_21
			}
			100 = {
				set_character_flag = sanitys_demise_22
			}
			100 = {
				set_character_flag = sanitys_demise_23
			}
			10 = {
				set_character_flag = sanitys_demise_24
			}
			10 = {
				set_character_flag = sanitys_demise_25
			}
			1 = {
				set_character_flag = sanitys_demise_26
			}
		}
	}
	
	desc = {
		trigger = {
			has_character_flag = sanitys_demise_1
		}
		text = EVTDESCA_TIANXIA_1111
	}
	desc = {
		trigger = {
			has_character_flag = sanitys_demise_2
		}
		text = EVTDESCB_TIANXIA_1111
	}
	desc = {
		trigger = {
			has_character_flag = sanitys_demise_3
		}
		text = EVTDESCC_TIANXIA_1111
	}
	desc = {
		trigger = {
			has_character_flag = sanitys_demise_4
		}
		text = EVTDESCD_TIANXIA_1111
	}
	desc = {
		trigger = {
			has_character_flag = sanitys_demise_5
		}
		text = EVTDESCE_TIANXIA_1111
	}
	desc = {
		trigger = {
			has_character_flag = sanitys_demise_6
		}
		text = EVTDESCF_TIANXIA_1111
	}
	desc = {
		trigger = {
			has_character_flag = sanitys_demise_7
		}
		text = EVTDESCG_TIANXIA_1111
	}
	desc = {
		trigger = {
			has_character_flag = sanitys_demise_8
		}
		text = EVTDESCH_TIANXIA_1111
	}
	desc = {
		trigger = {
			has_character_flag = sanitys_demise_9
		}
		text = EVTDESCI_TIANXIA_1111
	}
	desc = {
		trigger = {
			has_character_flag = sanitys_demise_10
		}
		text = EVTDESCJ_TIANXIA_1111
	}
	desc = {
		trigger = {
			has_character_flag = sanitys_demise_11
		}
		text = EVTDESCK_TIANXIA_1111
	}
	desc = {
		trigger = {
			has_character_flag = sanitys_demise_12
		}
		text = EVTDESCL_TIANXIA_1111
	}
	desc = {
		trigger = {
			has_character_flag = sanitys_demise_13
		}
		text = EVTDESCM_TIANXIA_1111
	}
	desc = {
		trigger = {
			has_character_flag = sanitys_demise_14
		}
		text = EVTDESCN_TIANXIA_1111
	}
	desc = {
		trigger = {
			has_character_flag = sanitys_demise_15
		}
		text = EVTDESCO_TIANXIA_1111
	}
	desc = {
		trigger = {
			has_character_flag = sanitys_demise_16
		}
		text = EVTDESCP_TIANXIA_1111
	}
	desc = {
		trigger = {
			has_character_flag = sanitys_demise_17
		}
		text = EVTDESCQ_TIANXIA_1111
	}
	desc = {
		trigger = {
			has_character_flag = sanitys_demise_18
		}
		text = EVTDESCR_TIANXIA_1111
	}
	desc = {
		trigger = {
			has_character_flag = sanitys_demise_19
		}
		text = EVTDESCS_TIANXIA_1111
	}
	desc = {
		trigger = {
			has_character_flag = sanitys_demise_20
		}
		text = EVTDESCT_TIANXIA_1111
	}
	desc = {
		trigger = {
			has_character_flag = sanitys_demise_21
		}
		text = EVTDESCU_TIANXIA_1111
	}
	desc = {
		trigger = {
			has_character_flag = sanitys_demise_22
		}
		text = EVTDESCV_TIANXIA_1111
	}
	desc = {
		trigger = {
			has_character_flag = sanitys_demise_23
		}
		text = EVTDESCW_TIANXIA_1111
	}
	desc = {
		trigger = {
			has_character_flag = sanitys_demise_24
		}
		text = EVTDESCX_TIANXIA_1111
	}
	desc = {
		trigger = {
			has_character_flag = sanitys_demise_25
		}
		text = EVTDESCY_TIANXIA_1111
	}
	desc = {
		trigger = {
			has_character_flag = sanitys_demise_26
		}
		text = EVTDESCZ_TIANXIA_1111
	}
	
	option = {
		trigger = {
			check_variable = {
				which = sanity
				value > 0
			}
			NOT = {
				trait = lunatic
			}
		}
		
		name = EVTOPTA_TIANXIA_1111 # Curious...
	}
	
	option = {
		name = EVTOPTB_TIANXIA_1111 # Try to learn more
		
		hidden_tooltip = {
			random_list = {
				10 = {
					# Nothing
				}
				
				90 = {
					mult_modifier = {
						factor = 2
						check_variable = {
							which = sanity
							value < 50
						}
					}
					
					change_variable = {
						which = sanity
						value = -1
					}
				}
			}
		}
	}
	
	after = {
		clr_character_flag = sanitys_demise_1
		clr_character_flag = sanitys_demise_2
		clr_character_flag = sanitys_demise_3
		clr_character_flag = sanitys_demise_4
		clr_character_flag = sanitys_demise_5
		clr_character_flag = sanitys_demise_6
		clr_character_flag = sanitys_demise_7
		clr_character_flag = sanitys_demise_8
		clr_character_flag = sanitys_demise_9
		clr_character_flag = sanitys_demise_10
		clr_character_flag = sanitys_demise_11
		clr_character_flag = sanitys_demise_12
		clr_character_flag = sanitys_demise_13
		clr_character_flag = sanitys_demise_14
		clr_character_flag = sanitys_demise_15
		clr_character_flag = sanitys_demise_16
		clr_character_flag = sanitys_demise_17
		clr_character_flag = sanitys_demise_18
		clr_character_flag = sanitys_demise_19
		clr_character_flag = sanitys_demise_20
		clr_character_flag = sanitys_demise_21
		clr_character_flag = sanitys_demise_22
		clr_character_flag = sanitys_demise_23
		clr_character_flag = sanitys_demise_24
		clr_character_flag = sanitys_demise_25
		clr_character_flag = sanitys_demise_26
	}
}

# Paranoia
character_event = {
	id = tianxia.1112
	desc = EVTDESC_TIANXIA_1112
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			check_variable = {
				which = sanity
				value > 0
			}
			NOT = {
				trait = lunatic
			}
		}
		
		name = EVTOPTA_TIANXIA_1112 # Fight it!
		
		hidden_tooltip = {
			random_list = {
				10 = {
					mult_modifier = {
						factor = 2
						check_variable = {
							which = sanity
							value >= 50
						}
					}
					
					change_variable = {
						which = sanity
						value = 1
					}
					
					add_trait_partially_trusting_effect = yes
				}
				
				90 = {
					# Nothing
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_TIANXIA_1112 # It speaks the truth!
		
		add_trait_partially_paranoid_effect = yes
		
		hidden_tooltip = {
			random_list = {
				10 = {
					# Nothing
				}
				
				90 = {
					mult_modifier = {
						factor = 2
						check_variable = {
							which = sanity
							value < 50
						}
					}
					
					change_variable = {
						which = sanity
						value = -1
					}
				}
			}
		}
	}
}

# Envy
character_event = {
	id = tianxia.1113
	desc = EVTDESC_TIANXIA_1113
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			check_variable = {
				which = sanity
				value > 0
			}
			NOT = {
				trait = lunatic
			}
		}
		
		name = EVTOPTA_TIANXIA_1113 # Fight it!
		
		hidden_tooltip = {
			random_list = {
				10 = {
					mult_modifier = {
						factor = 2
						check_variable = {
							which = sanity
							value >= 50
						}
					}
					
					change_variable = {
						which = sanity
						value = 1
					}
					
					add_trait_partially_kind_effect = yes
				}
				
				90 = {
					# Nothing
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_TIANXIA_1113 # It speaks the truth!
		
		add_trait_partially_envious_effect = yes
		
		hidden_tooltip = {
			random_list = {
				10 = {
					# Nothing
				}
				
				90 = {
					mult_modifier = {
						factor = 2
						check_variable = {
							which = sanity
							value < 50
						}
					}
					
					change_variable = {
						which = sanity
						value = -1
					}
				}
			}
		}
	}
}

# Ambition
character_event = {
	id = tianxia.1114
	desc = EVTDESC_TIANXIA_1114
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			check_variable = {
				which = sanity
				value > 0
			}
			NOT = {
				trait = lunatic
			}
		}
		
		name = EVTOPTA_TIANXIA_1114 # Fight it!
		
		hidden_tooltip = {
			random_list = {
				10 = {
					mult_modifier = {
						factor = 2
						check_variable = {
							which = sanity
							value >= 50
						}
					}
					
					change_variable = {
						which = sanity
						value = 1
					}
					
					add_trait_partially_content_effect = yes
				}
				
				90 = {
					# Nothing
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_TIANXIA_1114 # It speaks the truth!
		
		add_trait_partially_ambitious_effect = yes
		
		hidden_tooltip = {
			random_list = {
				10 = {
					# Nothing
				}
				
				90 = {
					mult_modifier = {
						factor = 2
						check_variable = {
							which = sanity
							value < 50
						}
					}
					
					change_variable = {
						which = sanity
						value = -1
					}
				}
			}
		}
	}
}

# Cruelty
character_event = {
	id = tianxia.1115
	desc = EVTDESC_TIANXIA_1115
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			check_variable = {
				which = sanity
				value > 0
			}
			NOT = {
				trait = lunatic
			}
		}
		
		name = EVTOPTA_TIANXIA_1115 # Fight it!
		
		hidden_tooltip = {
			random_list = {
				10 = {
					mult_modifier = {
						factor = 2
						check_variable = {
							which = sanity
							value >= 50
						}
					}
					
					change_variable = {
						which = sanity
						value = 1
					}
					
					add_trait_partially_kind_effect = yes
				}
				
				90 = {
					# Nothing
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_TIANXIA_1115 # It speaks the truth!
		
		add_trait_partially_cruel_effect = yes
		
		pacifists_lose_piety_effect = yes
		
		hidden_tooltip = {
			random_list = {
				10 = {
					# Nothing
				}
				
				90 = {
					mult_modifier = {
						factor = 2
						check_variable = {
							which = sanity
							value < 50
						}
					}
					
					change_variable = {
						which = sanity
						value = -1
					}
				}
			}
		}
	}
}

# Deceit
character_event = {
	id = tianxia.1116
	desc = EVTDESC_TIANXIA_1116
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			check_variable = {
				which = sanity
				value > 0
			}
			NOT = {
				trait = lunatic
			}
		}
		
		name = EVTOPTA_TIANXIA_1116 # Fight it!
		
		hidden_tooltip = {
			random_list = {
				10 = {
					mult_modifier = {
						factor = 2
						check_variable = {
							which = sanity
							value >= 50
						}
					}
					
					change_variable = {
						which = sanity
						value = 1
					}
					
					add_trait_partially_honest_effect = yes
				}
				
				90 = {
					# Nothing
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_TIANXIA_1116 # It speaks the truth!
		
		add_trait_partially_deceitful_effect = yes
		
		hidden_tooltip = {
			random_list = {
				10 = {
					# Nothing
				}
				
				90 = {
					mult_modifier = {
						factor = 2
						check_variable = {
							which = sanity
							value < 50
						}
					}
					
					change_variable = {
						which = sanity
						value = -1
					}
				}
			}
		}
	}
}

# Suspicions
character_event = {
	id = tianxia.1117
	desc = EVTDESC_TIANXIA_1117
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	immediate = {
		random_list = {
			20 = {
				trigger = {
					any_friend = {
						is_inaccessible_or_incapable_trigger = no
					}
				}
				
				random_friend = {
					limit = {
						is_inaccessible_or_incapable_trigger = no
					}
					
					save_event_target_as = suspect_character
				}
			}
			
			20 = {
				trigger = {
					is_inaccessible_or_incapable_trigger = no
				}
				
				random_lover = {
					limit = {
						is_inaccessible_or_incapable_trigger = no
					}
					
					save_event_target_as = suspect_character
				}
			}
			
			20 = {
				trigger = {
					any_child = {
						is_alive = yes
						is_inaccessible_or_incapable_trigger = no
						NOT = {
							is_rival = ROOT
						}
					}
				}
				
				random_child = {
					limit = {
						is_alive = yes
						is_inaccessible_or_incapable_trigger = no
						NOT = {
							is_rival = ROOT
						}
					}
					
					save_event_target_as = suspect_character
				}
			}
			
			20 = {
				trigger = {
					any_courtier = {
						is_alive = yes
						is_inaccessible_or_incapable_trigger = no
						NOT = {
							is_rival = ROOT
						}
					}
				}
				
				random_courtier = {
					limit = {
						is_alive = yes
						is_inaccessible_or_incapable_trigger = no
						NOT = {
							is_rival = ROOT
						}
					}
					
					save_event_target_as = suspect_character
				}
			}
			
			20 = {
				trigger = {
					any_vassal = {
						is_alive = yes
						is_inaccessible_or_incapable_trigger = no
						NOT = {
							is_rival = ROOT
						}
					}
				}
				
				random_vassal = {
					limit = {
						is_alive = yes
						is_inaccessible_or_incapable_trigger = no
						NOT = {
							is_rival = ROOT
						}
					}
					
					save_event_target_as = suspect_character
				}
			}
		}
	}
	
	option = {
		trigger = {
			check_variable = {
				which = sanity
				value > 0
			}
			NOT = {
				trait = lunatic
			}
		}
		
		name = EVTOPTA_TIANXIA_1117 # Fight it!
		
		hidden_tooltip = {
			random_list = {
				10 = {
					mult_modifier = {
						factor = 2
						check_variable = {
							which = sanity
							value >= 50
						}
					}
					
					change_variable = {
						which = sanity
						value = 1
					}
				}
				
				90 = {
					# Nothing
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_TIANXIA_1117 # It speaks the truth!
		
		random_list = {
			33 = {
				trigger = {
					is_friend = event_target:suspect_character
				}
				
				remove_friend = event_target:suspect_character
				
				event_target:suspect_character = {
					if = {
						limit = {
							ai = no
						}
						
						character_event = { id = tianxia.1118 } # Inform former friend
					}
				}
			}
			
			33 = {
				trigger = {
					is_lover = event_target:suspect_character
				}
				
				remove_lover = event_target:suspect_character
				
				event_target:suspect_character = {
					if = {
						limit = {
							ai = no
						}
						
						character_event = { id = tianxia.1119 } # Inform former lover
					}
				}
			}
			
			33 = {
				trigger = {
					NOR = {
						is_friend = event_target:suspect_character
						is_lover = event_target:suspect_character
					}
				}
				
				add_rival = event_target:suspect_character
				
				event_target:suspect_character = {
					if = {
						limit = {
							ai = no
						}
						
						character_event = { id = tianxia.1120 } # Inform new rival
					}
				}
			}
		}
		
		hidden_tooltip = {
			random_list = {
				10 = {
					# Nothing
				}
				
				90 = {
					mult_modifier = {
						factor = 2
						check_variable = {
							which = sanity
							value < 50
						}
					}
					
					change_variable = {
						which = sanity
						value = -2
					}
				}
			}
		}
	}
}

# Inform former friend
character_event = {
	id = tianxia.1118
	desc = EVTDESC_TIANXIA_1118
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_TIANXIA_1118 # It is that damnable dagger's fault...
		
		remove_friend = FROM
	}
}

# Inform former lover
character_event = {
	id = tianxia.1119
	desc = EVTDESC_TIANXIA_1119
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_TIANXIA_1119 # It is that damnable dagger's fault...
		
		remove_lover = FROM
	}
}

# Inform new rival
character_event = {
	id = tianxia.1120
	desc = EVTDESC_TIANXIA_1120
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_TIANXIA_1120 # It is that damnable dagger's fault...
		
		add_rival = FROM
	}
}

# Sacrifice
character_event = {
	id = tianxia.1121
	desc = EVTDESC_TIANXIA_1121
	picture = GFX_evt_sacrifice
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	immediate = {
		random_courtier_or_vassal = {
			limit = {
				at_location = ROOT
			}
			
			save_event_target_as = sacrifice
		}
	}
	
	option = {
		trigger = {
			check_variable = {
				which = sanity
				value > 0
			}
			NOT = {
				trait = lunatic
			}
		}
		
		name = EVTOPTA_TIANXIA_1121 # Fight it!
		
		hidden_tooltip = {
			random_list = {
				10 = {
					mult_modifier = {
						factor = 2
						check_variable = {
							which = sanity
							value >= 50
						}
					}
					
					change_variable = {
						which = sanity
						value = 1
					}
				}
				
				90 = {
					# Nothing
				}
			}
		}
		
		ai_chance = {
			trigger = {
				NOT = {
					is_rival = event_target:sacrifice
				}
			}
			
			factor = 100
		}
	}
	
	option = {
		name = EVTOPTB_TIANXIA_1121 # For you, my one true friend!
		
		pacifists_lose_piety_effect = yes
		
		tiered_piety_negative_effect = yes
		
		change_intrigue = 1
		change_diplomacy = -1
		
		event_target:sacrifice = {
			death = {
				death_reason = death_vanished
				killer = ROOT
			}
			
			if = {
				limit = {
					ai = no
				}
				
				character_event = { id = tianxia.1122 } # Inform sacrifice
			}
		}
		
		hidden_tooltip = {
			random_list = {
				10 = {
					# Nothing
				}
				
				90 = {
					mult_modifier = {
						factor = 2
						check_variable = {
							which = sanity
							value < 50
						}
					}
					
					change_variable = {
						which = sanity
						value = -5
					}
				}
			}
		}
	}
}

# Inform sacrifice
character_event = {
	id = tianxia.1122
	desc = EVTDESC_TIANXIA_1122
	picture = GFX_evt_sacrifice
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_TIANXIA_1122 # No! Get away from me!
		
		death = {
			death_reason = death_vanished
			killer = FROM
		}
	}
}

# Became a lunatic
character_event = {
	id = tianxia.1123
	desc = EVTDESC_TIANXIA_1123
	picture = GFX_evt_lunatic
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_TIANXIA_1123 # Sanity is for the WEAK!
		
		add_trait = lunatic
	}
}

# Random trait change
character_event = {
	id = tianxia.1124
	desc = EVTDESC_TIANXIA_1124
	picture = GFX_evt_lunatic
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_TIANXIA_1124 # I feel... different!
		
		reverse_random_personality_trait_effect = yes
	}
}

### Living Flame

# Living Flame wants to burn
character_event = {
	id = tianxia.1125
    picture = GFX_evt_lunatic
    border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes # on_decade_pulse -> random_events -> living_flame
	
	only_playable = yes
	prisoner = no
	
	trigger = {
		is_inaccessible_or_incapable_trigger = no
		has_artifact = living_flame
		is_nomadic = no # Buildings...
	}
	
	immediate = {
		random_list = {
			10 = {
				set_character_flag = living_flame_1
			}
			10 = {
				set_character_flag = living_flame_2
			}
			10 = {
				set_character_flag = living_flame_3
			}
			10 = {
				set_character_flag = living_flame_4
			}
			10 = {
				set_character_flag = living_flame_5
			}
			10 = {
				set_character_flag = living_flame_6
			}
			10 = {
				set_character_flag = living_flame_7
			}
		}
	}
	
	desc = {
		trigger = {
			has_character_flag = living_flame_1
		}
		text = EVTDESCA_TIANXIA_1125
	}
	
	desc = {
		trigger = {
			has_character_flag = living_flame_2
		}
		text = EVTDESCE_TIANXIA_1125
	}
	
	desc = {
		trigger = {
			has_character_flag = living_flame_3
		}
		text = EVTDESCC_TIANXIA_1125
	}
	
	desc = {
		trigger = {
			has_character_flag = living_flame_4
		}
		text = EVTDESCD_TIANXIA_1125
	}
	
	desc = {
		trigger = {
			has_character_flag = living_flame_5
		}
		text = EVTDESCE_TIANXIA_1125
	}
	
	desc = {
		trigger = {
			has_character_flag = living_flame_6
		}
		text = EVTDESCF_TIANXIA_1125
	}
	
	desc = {
		trigger = {
			has_character_flag = living_flame_7
		}
		text = EVTDESCG_TIANXIA_1125
	}
	
	option = {
		trigger = {
			NOR = {
				trait = lunatic
				trait = possessed
			}
		}
		
		name = EVTOPTA_TIANXIA_1125 # I think I'll pass...
		
		random = {
			chance = 1
			add_trait = lunatic
		}
	}
	
	option = {
		trigger = {
			OR = {
				trait = lunatic
				trait = possessed
			}
		}
		
		name = EVTOPTB_TIANXIA_1125 # Yes! YES! IT MUST BURN!
		
		pacifists_lose_piety_effect = yes
		
		random = {
			chance = 10
			capital_scope = {
				random_province_holding = {
					destroy_random_building = yes
				}
			}
		}
	}
	
	after = {
		clr_character_flag = living_flame_1
		clr_character_flag = living_flame_2
		clr_character_flag = living_flame_3
		clr_character_flag = living_flame_4
		clr_character_flag = living_flame_5
		clr_character_flag = living_flame_6
		clr_character_flag = living_flame_7
	}
}

### Hungering Blade

# Hungering Blade wants to be fed
character_event = {
	id = tianxia.1126
    picture = GFX_evt_lunatic
    border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes # on_bi_yearly_pulse -> random_events -> hungering_blade
	
	only_playable = yes
	prisoner = no
	
	trigger = {
		is_inaccessible_or_incapable_trigger = no
		has_artifact = hungering_blade
		any_courtier = {
			prisoner = yes
		}
	}
	
	immediate = {
		random_list = {
			25 = {
				set_character_flag = hungering_blade_1
			}
			25 = {
				set_character_flag = hungering_blade_2
			}
			25 = {
				set_character_flag = hungering_blade_3
			}
			25 = {
				set_character_flag = hungering_blade_4
			}
		}
		
		any_courtier = {
			limit = {
				prisoner = yes
			}
			
			score_value = { #Prioritizes selecting an interesting courtier...
				value = 10
				interesting_courtier_selection_score = yes
			}
			
			save_event_target_as = hungering_blade_target
		}
	}
	
	desc = {
		trigger = {
			has_character_flag = hungering_blade_1
		}
		
		text = EVTDESCA_TIANXIA_1126
	}
	
	desc = {
		trigger = {
			has_character_flag = hungering_blade_2
		}
		text = EVTDESCB_TIANXIA_1126
	}
	
	desc = {
		trigger = {
			has_character_flag = hungering_blade_3
		}
		text = EVTDESCC_TIANXIA_1126
	}
	
	desc = {
		trigger = {
			has_character_flag = hungering_blade_4
		}
		text = EVTDESCD_TIANXIA_1126
	}
	
	option = {
		trigger = {
			NOT = {
				trait = possessed
			}
		}
		
		name = EVTOPTA_TIANXIA_1126 # No! I don't want to harm them!
		
		ai_chance = {
			trigger = {
				NOR = {
					AND = {
						is_evil_trigger = yes
						has_vice_trigger = yes
					}
					is_devil_worshiper_trigger = yes
				}
			}
			
			factor = 100
			
			mult_modifier = {
				factor = 10
				trait = kind
			}
			
			mult_modifier = {
				factor = 10
				trait = just
			}
			
			mult_modifier = {
				factor = 0.01
				is_rival = event_target:hungering_blade_target
			}
		}
		
		random = {
			chance = 10
			add_trait_wounded_effect = yes
		}
	}
	
	option = {
		name = EVTOPTB_TIANXIA_1126 # I'll feed you!
		
		pacifists_lose_piety_effect = yes
		
		tiered_piety_negative_effect = yes
		
		add_trait_partially_cruel_effect = yes
		
		add_one_duel_experience_modifier = yes
		
		random = {
			chance = 10
			add_trait = possessed
		}
		
		event_target:hungering_blade_target = {
			character_event = { id = tianxia.1127 } # Inform the target
			
			if = {
				limit = {
					has_dlc = "Jade Dragon"
					e_china = {
						holder_scope = {
							is_chinese_emperor_trigger = yes
							OR = {
								character = PREVPREV
								AND = {
									is_close_relative = ROOT
									dynasty = PREVPREV
								}
							}
							NOT = {
								character = ROOT
							}
						}
					}
				}
				
				if = {
					limit = {
						is_chinese_emperor_trigger = yes
					}
					ROOT = {
						detract_grace_super_huge_effect = yes
					}
				}
				else = {
					ROOT = {
						detract_grace_massive_effect = yes
					}
				}
			}
			
			save_event_target_as = kinslayer_target
		}
		
		add_kinslayer_trait_effect = yes
		
		ai_chance = {
			trigger = {
				OR = {
					trait = possessed
					NOR = {
						is_friend = event_target:hungering_blade_target
						is_lover = event_target:hungering_blade_target
						AND = {
							dynasty = event_target:hungering_blade_target
							NOT = {
								is_rival = event_target:hungering_blade_target
							}
						}
					}
				}
			}
			
			factor = 100
			
			mult_modifier = {
				factor = 2
				trait = wroth
			}
			
			mult_modifier = {
				factor = 2
				trait = arbitrary
			}
			
			mult_modifier = {
				factor = 10
				trait = cruel
			}
			
			mult_modifier = {
				factor = 10
				is_devil_worshiper_trigger = yes
			}
			
			mult_modifier = {
				factor = 10
				is_rival = event_target:hungering_blade_target
			}
		}
	}
	
	after = {
		clr_character_flag = hungering_blade_1
		clr_character_flag = hungering_blade_2
		clr_character_flag = hungering_blade_3
		clr_character_flag = hungering_blade_4
	}
}

# The target is informed
character_event = {
	id = tianxia.1127
	desc = EVTDESC_TIANXIA_1127
    picture = GFX_evt_lunatic
    border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_TIANXIA_1127 # No! Get away from me!
		
		death = {
			death_reason = death_hungering_blade
			killer = FROM
		}
	}
}