treasure_fleet_setup_effect = {
	clr_province_flag = abort_treasure_fleet_asap
	clean_up_old_treasure_fleet_effect = yes
	set_global_flag = preparing_treasure_fleet
	
	set_chinese_name_for_treasure_fleet_effect = yes # Ensures items will be named properly
	
	if = {
		limit = {
			has_dlc = "Jade Dragon"
		}
		add_one_of_each_jd_artifact_effect = yes
		add_one_of_each_jd_modifier_effect = yes
		add_one_of_each_jd_character_effect = yes
		add_province_modifier = {
			name = jd_dry_docks
			years = 20
		}
	}
	
	# If there's a leftover from a previous fleet, don't remove it
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = treasure_fleet_ship_strength
					value = 10
				}
			}
		}
		set_variable = {
			which = treasure_fleet_ship_strength
			value = 10
		}
	}
	else = {
		change_variable = {
			which = treasure_fleet_ship_strength
			value = 10
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = treasure_fleet_army_strength
					value = 10
				}
			}
		}
		set_variable = {
			which = treasure_fleet_army_strength
			value = 10
		}
	}
	else = {
		change_variable = {
			which = treasure_fleet_army_strength
			value = 10
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = treasure_fleet_wealth
					value = 10
				}
			}
		}
		set_variable = {
			which = treasure_fleet_wealth
			value = 10
		}
	}
	else = {
		change_variable = {
			which = treasure_fleet_wealth
			value = 10
		}
	}
	
	clear_random_treasure_fleet_people_effect = yes
	add_random_people_to_treasure_fleet_effect = yes
	
	if = { # Random Start artifacts
		limit = {
			has_dlc = "Holy Fury"
		}
		change_variable = {
			which = tf_random_world_sword
			value = 1
		}
		change_variable = {
			which = tf_random_world_armor
			value = 1
		}
		if = {
			limit = {
				NOT = {
					has_dlc = "Jade Dragon"
				}
			}
			add_extra_hf_random_world_artifacts_effect = yes
			add_extra_hf_random_world_artifacts_effect = yes
		}
	}
	
	add_random_number_of_art_of_war_pages_effect = yes
	if = {
		limit = {
			NOT = {
				has_dlc = "Jade Dragon"
			}
		}
		add_random_number_of_art_of_war_pages_effect = yes
	}
	if = {
		limit = {
			NOR = {
				has_dlc = "Holy Fury"
				has_dlc = "Jade Dragon"
			}
		}
		add_random_number_of_art_of_war_pages_effect = yes
	}
	
	set_variable = {
		which = tf_immigrants
		value = 5
	}
	
	set_variable = {
		which = tf_supplies
		value = 10
	}
	
	set_variable = {
		which = treasure_fleet_progress
		value = 0
	}
	
	province_event = { id = treasurefleet.4 days = 30 } # Preparations
}

set_chinese_name_for_treasure_fleet_effect = { # Handles artifact naming
	clr_province_flag = treasure_fleet_is_tang
	clr_province_flag = treasure_fleet_is_jin
	clr_province_flag = treasure_fleet_is_wei
	clr_province_flag = treasure_fleet_is_qi
	clr_province_flag = treasure_fleet_is_zhou
	clr_province_flag = treasure_fleet_is_han
	clr_province_flag = treasure_fleet_is_qin
	clr_province_flag = treasure_fleet_is_yan
	clr_province_flag = treasure_fleet_is_zhao
	clr_province_flag = treasure_fleet_is_liao
	clr_province_flag = treasure_fleet_is_yuan
	clr_province_flag = treasure_fleet_is_xia
	clr_province_flag = treasure_fleet_is_qing
	clr_province_flag = treasure_fleet_is_dai
	clr_province_flag = treasure_fleet_is_cheng
	clr_province_flag = treasure_fleet_is_liang
	clr_province_flag = treasure_fleet_is_song
	clr_province_flag = treasure_fleet_is_ming
	clr_province_flag = treasure_fleet_is_shu
	clr_province_flag = treasure_fleet_is_wu
	clr_province_flag = treasure_fleet_is_chu
	clr_province_flag = treasure_fleet_is_yue
	clr_province_flag = treasure_fleet_is_yin
	clr_province_flag = treasure_fleet_is_shun
	clr_province_flag = treasure_fleet_is_sui
	clr_province_flag = treasure_fleet_is_min
	
	if = {
		limit = {
			e_china = {
				has_title_flag = tang_china
			}
		}
		set_province_flag = treasure_fleet_is_tang
	}
	else_if = {
		limit = {
			e_china = {
				has_title_flag = jin_china
			}
		}
		set_province_flag = treasure_fleet_is_jin
	}
	else_if = {
		limit = {
			e_china = {
				has_title_flag = wei_china
			}
		}
		set_province_flag = treasure_fleet_is_wei
	}
	else_if = {
		limit = {
			e_china = {
				has_title_flag = qi_china
			}
		}
		set_province_flag = treasure_fleet_is_qi
	}
	else_if = {
		limit = {
			e_china = {
				has_title_flag = zhou_china
			}
		}
		set_province_flag = treasure_fleet_is_zhou
	}
	else_if = {
		limit = {
			e_china = {
				has_title_flag = han_china
			}
		}
		set_province_flag = treasure_fleet_is_han
	}
	else_if = {
		limit = {
			e_china = {
				has_title_flag = qin_china
			}
		}
		set_province_flag = treasure_fleet_is_qin
	}
	else_if = {
		limit = {
			e_china = {
				has_title_flag = yan_china
			}
		}
		set_province_flag = treasure_fleet_is_yan
	}
	else_if = {
		limit = {
			e_china = {
				has_title_flag = zhao_china
			}
		}
		set_province_flag = treasure_fleet_is_zhao
	}
	else_if = {
		limit = {
			e_china = {
				has_title_flag = liao_china
			}
		}
		set_province_flag = treasure_fleet_is_liao
	}
	else_if = {
		limit = {
			e_china = {
				has_title_flag = yuan_china
			}
		}
		set_province_flag = treasure_fleet_is_yuan
	}
	else_if = {
		limit = {
			e_china = {
				has_title_flag = xia_china
			}
		}
		set_province_flag = treasure_fleet_is_xia
	}
	else_if = {
		limit = {
			e_china = {
				has_title_flag = qing_china
			}
		}
		set_province_flag = treasure_fleet_is_qing
	}
	else_if = {
		limit = {
			e_china = {
				has_title_flag = dai_china
			}
		}
		set_province_flag = treasure_fleet_is_dai
	}
	else_if = {
		limit = {
			e_china = {
				has_title_flag = cheng_china
			}
		}
		set_province_flag = treasure_fleet_is_cheng
	}
	else_if = {
		limit = {
			e_china = {
				has_title_flag = liang_china
			}
		}
		set_province_flag = treasure_fleet_is_liang
	}
	else_if = {
		limit = {
			e_china = {
				has_title_flag = song_china
			}
		}
		set_province_flag = treasure_fleet_is_song
	}
	else_if = {
		limit = {
			e_china = {
				has_title_flag = ming_china
			}
		}
		set_province_flag = treasure_fleet_is_ming
	}
	else_if = {
		limit = {
			e_china = {
				has_title_flag = shu_china
			}
		}
		set_province_flag = treasure_fleet_is_shu
	}
	else_if = {
		limit = {
			e_china = {
				has_title_flag = wu_china
			}
		}
		set_province_flag = treasure_fleet_is_wu
	}
	else_if = {
		limit = {
			e_china = {
				has_title_flag = chu_china
			}
		}
		set_province_flag = treasure_fleet_is_chu
	}
	else_if = {
		limit = {
			e_china = {
				has_title_flag = yue_china
			}
		}
		set_province_flag = treasure_fleet_is_yue
	}
	else_if = {
		limit = {
			e_china = {
				has_title_flag = yin_china
			}
		}
		set_province_flag = treasure_fleet_is_yin
	}
	else_if = {
		limit = {
			e_china = {
				has_title_flag = shun_china
			}
		}
		set_province_flag = treasure_fleet_is_shun
	}
	else_if = {
		limit = {
			e_china = {
				has_title_flag = sui_china
			}
		}
		set_province_flag = treasure_fleet_is_sui
	}
	else_if = {
		limit = {
			e_china = {
				has_title_flag = min_china
			}
		}
		set_province_flag = treasure_fleet_is_min
	}
}

### Adding more stuff

add_one_of_each_jd_artifact_effect = { # Exactly what it says on the tin
	change_variable = {
		which = tf_jade_dragon
		value = 1
	}
	change_variable = {
		which = tf_chinese_dragon_amulet
		value = 1
	}
	change_variable = {
		which = tf_chinese_artwork
		value = 1
	}
	change_variable = {
		which = tf_chinese_calligraphy
		value = 1
	}
	change_variable = {
		which = tf_chinese_sculpture
		value = 1
	}
	change_variable = {
		which = tf_chinese_ceremonial_robes
		value = 1
	}
	change_variable = {
		which = tf_silk_shroud
		value = 1
	}
	change_variable = {
		which = tf_water_clock
		value = 1
	}
	change_variable = {
		which = tf_jian_sword
		value = 1
	}
	#change_variable = {
	#	which = tf_chinese_prev_emperor_sculpture
	#	value = 1
	#}
	change_variable = {
		which = tf_chinese_arm_protector
		value = 1
	}
	change_variable = {
		which = tf_chinese_serpent_spear
		value = 1
	}
	change_variable = {
		which = tf_chinese_ji
		value = 1
	}
	change_variable = {
		which = tf_chinese_crossbow
		value = 1
	}
	change_variable = {
		which = tf_chinese_bronze_sculpture
		value = 1
	}
	change_variable = {
		which = tf_chinese_painting_of_glitterhoof
		value = 1
	}
	change_variable = {
		which = tf_chinese_tapestry
		value = 1
	}
	change_variable = {
		which = tf_chinese_tapestry_grand
		value = 1
	}
	change_variable = {
		which = tf_art_of_war
		value = 1
	}
	change_variable = {
		which = tf_classic_of_poetry
		value = 1
	}
	change_variable = {
		which = tf_chinese_book_health
		value = 1
	}
	change_variable = {
		which = tf_chinese_book_law
		value = 1
	}
	change_variable = {
		which = tf_chinese_book_history
		value = 1
	}
	change_variable = {
		which = tf_chinese_book_economy
		value = 1
	}
}

add_one_of_each_jd_modifier_effect = { # Exactly what it says on the tin
	change_variable = {
		which = tf_jd_paper_mill
		value = 1
	}
	change_variable = {
		which = tf_jd_fireworks_guild
		value = 1
	}
	change_variable = {
		which = tf_jd_dry_docks
		value = 1
	}
	change_variable = {
		which = tf_jd_administrative_outpost
		value = 1
	}
	change_variable = {
		which = tf_jd_blast_furnace
		value = 1
	}
}

add_one_of_each_jd_character_effect = { # Exactly what it says on the tin
	change_variable = {
		which = tf_physician
		value = 1
	}
	change_variable = {
		which = tf_siege_engineer
		value = 1
	}
	change_variable = {
		which = tf_strategist
		value = 1
	}
	change_variable = {
		which = tf_administrator # Scholar-Bureaucrat
		value = 1
	}
	change_variable = {
		which = tf_master_engineer
		value = 1
	}
	# Not characters, but...
	change_variable = {
		which = tf_peace_deal_with_china
		value = 1
	}
	change_variable = {
		which = tf_chinese_imperial_trade_contract
		value = 1
	}
}

add_random_people_to_treasure_fleet_effect = {
	add_random_number_of_soldiers_effect = yes
	add_random_number_of_eunuchs_effect = yes
	add_random_number_of_courtesans_effect = yes
	add_random_number_of_scholars_effect = yes
	add_random_number_of_nobles_effect = yes
}

clear_random_treasure_fleet_people_effect = {
	set_variable = {
		which = tf_soldier
		value = 0
	}
	set_variable = {
		which = tf_eunuch
		value = 0
	}
	set_variable = {
		which = tf_courtesan
		value = 0
	}
	set_variable = {
		which = tf_scholar
		value = 0
	}
	set_variable = {
		which = tf_noble
		value = 0
	}
}

add_random_number_of_soldiers_effect = {
	random_list = {
		1 = {
			change_variable = {
				which = tf_soldier
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_soldier
				value = 2
			}
		}
		1 = {
			change_variable = {
				which = tf_soldier
				value = 3
			}
		}
		1 = {
			change_variable = {
				which = tf_soldier
				value = 4
			}
		}
		1 = {
			change_variable = {
				which = tf_soldier
				value = 5
			}
		}
		1 = {
			change_variable = {
				which = tf_soldier
				value = 6
			}
		}
		1 = {
			change_variable = {
				which = tf_soldier
				value = 7
			}
		}
		1 = {
			change_variable = {
				which = tf_soldier
				value = 8
			}
		}
		1 = {
			change_variable = {
				which = tf_soldier
				value = 9
			}
		}
		1 = {
			change_variable = {
				which = tf_soldier
				value = 10
			}
		}
	}
}

add_random_number_of_eunuchs_effect = {
	random_list = {
		1 = {
			change_variable = {
				which = tf_eunuch
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_eunuch
				value = 2
			}
		}
		1 = {
			change_variable = {
				which = tf_eunuch
				value = 3
			}
		}
		1 = {
			change_variable = {
				which = tf_eunuch
				value = 4
			}
		}
		1 = {
			change_variable = {
				which = tf_eunuch
				value = 5
			}
		}
		1 = {
			change_variable = {
				which = tf_eunuch
				value = 6
			}
		}
		1 = {
			change_variable = {
				which = tf_eunuch
				value = 7
			}
		}
		1 = {
			change_variable = {
				which = tf_eunuch
				value = 8
			}
		}
		1 = {
			change_variable = {
				which = tf_eunuch
				value = 9
			}
		}
		1 = {
			change_variable = {
				which = tf_eunuch
				value = 10
			}
		}
	}
}

add_random_number_of_courtesans_effect = {
	random_list = {
		1 = {
			change_variable = {
				which = tf_courtesan
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_courtesan
				value = 2
			}
		}
		1 = {
			change_variable = {
				which = tf_courtesan
				value = 3
			}
		}
		1 = {
			change_variable = {
				which = tf_courtesan
				value = 4
			}
		}
		1 = {
			change_variable = {
				which = tf_courtesan
				value = 5
			}
		}
		1 = {
			change_variable = {
				which = tf_courtesan
				value = 6
			}
		}
		1 = {
			change_variable = {
				which = tf_courtesan
				value = 7
			}
		}
		1 = {
			change_variable = {
				which = tf_courtesan
				value = 8
			}
		}
		1 = {
			change_variable = {
				which = tf_courtesan
				value = 9
			}
		}
		1 = {
			change_variable = {
				which = tf_courtesan
				value = 10
			}
		}
	}
}

add_random_number_of_scholars_effect = {
	random_list = {
		1 = {
			change_variable = {
				which = tf_scholar
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_scholar
				value = 2
			}
		}
		1 = {
			change_variable = {
				which = tf_scholar
				value = 3
			}
		}
		1 = {
			change_variable = {
				which = tf_scholar
				value = 4
			}
		}
		1 = {
			change_variable = {
				which = tf_scholar
				value = 5
			}
		}
		1 = {
			change_variable = {
				which = tf_scholar
				value = 6
			}
		}
		1 = {
			change_variable = {
				which = tf_scholar
				value = 7
			}
		}
		1 = {
			change_variable = {
				which = tf_scholar
				value = 8
			}
		}
		1 = {
			change_variable = {
				which = tf_scholar
				value = 9
			}
		}
		1 = {
			change_variable = {
				which = tf_scholar
				value = 10
			}
		}
	}
}

add_random_number_of_nobles_effect = {
	random_list = {
		1 = {
			change_variable = {
				which = tf_noble
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_noble
				value = 2
			}
		}
		1 = {
			change_variable = {
				which = tf_noble
				value = 3
			}
		}
		1 = {
			change_variable = {
				which = tf_noble
				value = 4
			}
		}
		1 = {
			change_variable = {
				which = tf_noble
				value = 5
			}
		}
		1 = {
			change_variable = {
				which = tf_noble
				value = 6
			}
		}
		1 = {
			change_variable = {
				which = tf_noble
				value = 7
			}
		}
		1 = {
			change_variable = {
				which = tf_noble
				value = 8
			}
		}
		1 = {
			change_variable = {
				which = tf_noble
				value = 9
			}
		}
		1 = {
			change_variable = {
				which = tf_noble
				value = 10
			}
		}
	}
}

add_random_jd_artifact_effect = {
	random_list = {
		1 = {
			change_variable = {
				which = tf_jade_dragon
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_dragon_amulet
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_artwork
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_calligraphy
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_sculpture
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_ceremonial_robes
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_silk_shroud
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_water_clock
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_jian_sword
				value = 1
			}
		}
		#1 = {
			#change_variable = {
			#	which = tf_chinese_prev_emperor_sculpture
			#	value = 1
			#}
		#}
		1 = {
			change_variable = {
				which = tf_chinese_arm_protector
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_serpent_spear
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_ji
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_crossbow
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_bronze_sculpture
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_painting_of_glitterhoof
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_tapestry
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_tapestry_grand
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_art_of_war
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_classic_of_poetry
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_book_health
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_book_law
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_book_history
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_book_economy
				value = 1
			}
		}
	}
}

add_random_jd_artifact_for_each_tier_effect = {
	add_random_t1_jd_artifact_effect = yes
	add_random_t2_jd_artifact_effect = yes
	add_random_t3_jd_artifact_effect = yes
	add_random_t4_jd_artifact_effect = yes
	add_random_t5_jd_artifact_effect = yes
}

add_random_t1_jd_artifact_effect = {
	random_list = {
		#1 = {
			#change_variable = {
			#	which = tf_chinese_prev_emperor_sculpture
			#	value = 1
			#}
		#}
		1 = {
			change_variable = {
				which = tf_chinese_painting_of_glitterhoof
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_book_history
				value = 1
			}
		}
	}
}

add_random_t2_jd_artifact_effect = {
	random_list = {
		1 = {
			change_variable = {
				which = tf_chinese_artwork
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_calligraphy
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_sculpture
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_arm_protector
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_serpent_spear
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_tapestry
				value = 1
			}
		}
	}
}

add_random_t3_jd_artifact_effect = {
	random_list = {
		1 = {
			change_variable = {
				which = tf_chinese_ceremonial_robes
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_silk_shroud
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_ji
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_crossbow
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_bronze_sculpture
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_tapestry_grand
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_book_health
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_book_law
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_book_economy
				value = 1
			}
		}
	}
}

add_random_t4_jd_artifact_effect = {
	random_list = {
		1 = {
			change_variable = {
				which = tf_chinese_dragon_amulet
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_water_clock
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_jian_sword
				value = 1
			}
		}
	}
}

add_random_t5_jd_artifact_effect = {
	random_list = {
		1 = {
			change_variable = {
				which = tf_jade_dragon
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_art_of_war
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_classic_of_poetry
				value = 1
			}
		}
	}
}

add_random_jd_modifier_effect = {
	random_list = {
		1 = {
			change_variable = {
				which = tf_jd_paper_mill
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_jd_fireworks_guild
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_jd_dry_docks
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_jd_administrative_outpost
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_jd_blast_furnace
				value = 1
			}
		}
	}
}

add_random_jd_character_effect = {
	random_list = {
		1 = {
			change_variable = {
				which = tf_physician
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_siege_engineer
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_strategist
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_administrator # Scholar-Bureaucrat
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_master_engineer
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_peace_deal_with_china
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_imperial_trade_contract
				value = 1
			}
		}
	}
}

add_one_random_tf_member_effect = {
	random_list = {
		1 = {
			change_variable = {
				which = tf_soldier
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_eunuch
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_courtesan
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_scholar
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_noble
				value = 1
			}
		}
	}
}

add_extra_hf_random_world_artifacts_effect = {
	add_random_number_of_random_world_swords_effect = yes
	add_random_number_of_random_world_armors_effect = yes
}

add_random_number_of_random_world_swords_effect = {
	random_list = {
		1 = {
			change_variable = {
				which = tf_random_world_sword
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_random_world_sword
				value = 2
			}
		}
		1 = {
			change_variable = {
				which = tf_random_world_sword
				value = 3
			}
		}
	}
}

add_random_number_of_random_world_armors_effect = {
	random_list = {
		1 = {
			change_variable = {
				which = tf_random_world_armor
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_random_world_armor
				value = 2
			}
		}
		1 = {
			change_variable = {
				which = tf_random_world_armor
				value = 3
			}
		}
	}
}

add_random_number_of_art_of_war_pages_effect = {
	random_list = {
		1 = {
			change_variable = {
				which = tf_art_of_war_page
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_art_of_war_page
				value = 2
			}
		}
		1 = {
			change_variable = {
				which = tf_art_of_war_page
				value = 3
			}
		}
		1 = {
			change_variable = {
				which = tf_art_of_war_page
				value = 4
			}
		}
		1 = {
			change_variable = {
				which = tf_art_of_war_page
				value = 5
			}
		}
		1 = {
			change_variable = {
				which = tf_art_of_war_page
				value = 6
			}
		}
		1 = {
			change_variable = {
				which = tf_art_of_war_page
				value = 7
			}
		}
		1 = {
			change_variable = {
				which = tf_art_of_war_page
				value = 8
			}
		}
		1 = {
			change_variable = {
				which = tf_art_of_war_page
				value = 9
			}
		}
		1 = {
			change_variable = {
				which = tf_art_of_war_page
				value = 10
			}
		}
	}
}

boost_all_treasure_fleet_attributes_small_effect = {
	change_variable = {
		which = treasure_fleet_ship_strength
		value = 1
	}
	change_variable = {
		which = treasure_fleet_army_strength
		value = 1
	}
	change_variable = {
		which = treasure_fleet_wealth
		value = 1
	}
}

boost_all_treasure_fleet_attributes_medium_effect = {
	change_variable = {
		which = treasure_fleet_ship_strength
		value = 5
	}
	change_variable = {
		which = treasure_fleet_army_strength
		value = 5
	}
	change_variable = {
		which = treasure_fleet_wealth
		value = 5
	}
}

boost_all_treasure_fleet_attributes_large_effect = {
	change_variable = {
		which = treasure_fleet_ship_strength
		value = 10
	}
	change_variable = {
		which = treasure_fleet_army_strength
		value = 10
	}
	change_variable = {
		which = treasure_fleet_wealth
		value = 10
	}
}

boost_random_treasure_fleet_attribute_small_effect = {
	random_list = {
		1 = {
			change_variable = {
				which = treasure_fleet_ship_strength
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = treasure_fleet_army_strength
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = treasure_fleet_wealth
				value = 1
			}
		}
	}
}

boost_random_treasure_fleet_attribute_medium_effect = {
	random_list = {
		1 = {
			change_variable = {
				which = treasure_fleet_ship_strength
				value = 5
			}
		}
		1 = {
			change_variable = {
				which = treasure_fleet_army_strength
				value = 5
			}
		}
		1 = {
			change_variable = {
				which = treasure_fleet_wealth
				value = 5
			}
		}
	}
}

boost_random_treasure_fleet_attribute_large_effect = {
	random_list = {
		1 = {
			change_variable = {
				which = treasure_fleet_ship_strength
				value = 10
			}
		}
		1 = {
			change_variable = {
				which = treasure_fleet_army_strength
				value = 10
			}
		}
		1 = {
			change_variable = {
				which = treasure_fleet_wealth
				value = 10
			}
		}
	}
}

add_or_boost_random_treasure_fleet_person_artifact_or_stat_from_one_allowed_category_effect = {
	random_list = {
		1 = {
			modifier = {
				factor = 0
				NOT = {
					has_dlc = "Jade Dragon"
				}
			}
			add_random_t1_jd_artifact_effect = yes
		}
		1 = {
			modifier = {
				factor = 0
				NOT = {
					has_dlc = "Jade Dragon"
				}
			}
			add_random_t2_jd_artifact_effect = yes
		}
		1 = {
			modifier = {
				factor = 0
				NOT = {
					has_dlc = "Jade Dragon"
				}
			}
			add_random_t3_jd_artifact_effect = yes
		}
		1 = {
			modifier = {
				factor = 0
				NOT = {
					has_dlc = "Jade Dragon"
				}
			}
			add_random_t4_jd_artifact_effect = yes
		}
		1 = {
			modifier = {
				factor = 0
				NOT = {
					has_dlc = "Jade Dragon"
				}
			}
			add_random_t5_jd_artifact_effect = yes
		}
		1 = {
			modifier = {
				factor = 0
				NOT = {
					has_dlc = "Jade Dragon"
				}
			}
			add_random_jd_modifier_effect = yes
		}
		1 = {
			modifier = {
				factor = 0
				NOT = {
					has_dlc = "Jade Dragon"
				}
			}
			add_random_jd_character_effect = yes
		}
		1 = {
			modifier = {
				factor = 0
				NOT = {
					has_dlc = "Holy Fury"
				}
			}
			change_variable = {
				which = tf_random_world_sword
				value = 1
			}
		}
		1 = {
			modifier = {
				factor = 0
				NOT = {
					has_dlc = "Holy Fury"
				}
			}
			change_variable = {
				which = tf_random_world_armor
				value = 1
			}
		}
		1 = {
			boost_random_treasure_fleet_attribute_small_effect = yes
		}
		1 = {
			boost_random_treasure_fleet_attribute_medium_effect = yes
		}
		1 = {
			boost_random_treasure_fleet_attribute_large_effect = yes
		}
		1 = {
			change_variable = {
				which = tf_immigrants
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_immigrants
				value = 2
			}
		}
		1 = {
			change_variable = {
				which = tf_immigrants
				value = 5
			}
		}
		1 = {
			change_variable = {
				which = tf_supplies
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_supplies
				value = 5
			}
		}
		1 = {
			change_variable = {
				which = tf_supplies
				value = 10
			}
		}
		1 = {
			add_random_number_of_soldiers_effect = yes
		}
		1 = {
			add_random_number_of_eunuchs_effect = yes
		}
		1 = {
			add_random_number_of_courtesans_effect = yes
		}
		1 = {
			add_random_number_of_scholars_effect = yes
		}
		1 = {
			add_random_number_of_nobles_effect = yes
		}
		1 = {
			add_one_random_tf_member_effect = yes
		}
		1 = {
			add_random_number_of_art_of_war_pages_effect = yes
		}
	}
}

add_or_boost_random_treasure_fleet_person_artifact_and_stat_from_each_allowed_category_effect = {
	random_list = {
		1 = {
			add_random_number_of_soldiers_effect = yes
		}
		1 = {
			add_random_number_of_eunuchs_effect = yes
		}
		1 = {
			add_random_number_of_courtesans_effect = yes
		}
		1 = {
			add_random_number_of_scholars_effect = yes
		}
		1 = {
			add_random_number_of_nobles_effect = yes
		}
		1 = {
			add_random_number_of_art_of_war_pages_effect = yes
		}
	}
	if = {
		limit = {
			has_dlc = "Jade Dragon"
		}
		random_list = {
			1 = {
				add_random_t1_jd_artifact_effect = yes
			}
			1 = {
				add_random_t2_jd_artifact_effect = yes
			}
			1 = {
				add_random_t3_jd_artifact_effect = yes
			}
			1 = {
				add_random_t4_jd_artifact_effect = yes
			}
			1 = {
				add_random_t5_jd_artifact_effect = yes
			}
			1 = {
				add_random_jd_modifier_effect = yes
			}
			1 = {
				add_random_jd_character_effect = yes
			}
		}
	}
	if = {
		limit = {
			has_dlc = "Holy Fury"
		}
		random_list = {
			1 = {
				add_random_number_of_random_world_swords_effect = yes
			}
			1 = {
				add_random_number_of_random_world_armors_effect = yes
			}
		}
	}
	random_list = {
		1 = {
			change_variable = {
				which = tf_immigrants
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_immigrants
				value = 2
			}
		}
		1 = {
			change_variable = {
				which = tf_immigrants
				value = 5
			}
		}
	}
	random_list = {
		1 = {
			change_variable = {
				which = tf_supplies
				value = 1
			}
		}
		1 = {
			change_variable = {
				which = tf_supplies
				value = 5
			}
		}
		1 = {
			change_variable = {
				which = tf_supplies
				value = 10
			}
		}
	}
	random_list = {
		1 = {
			boost_all_treasure_fleet_attributes_small_effect = yes
		}
		1 = {
			boost_all_treasure_fleet_attributes_medium_effect = yes
		}
		1 = {
			boost_all_treasure_fleet_attributes_large_effect = yes
		}
	}
}

add_or_boost_everything_permissible_effect = {
	boost_all_treasure_fleet_attributes_large_effect = yes
	if = {
		limit = {
			has_dlc = "Jade Dragon"
		}
		add_one_of_each_jd_artifact_effect = yes
		add_one_of_each_jd_modifier_effect = yes
		add_one_of_each_jd_character_effect = yes
	}
	add_random_people_to_treasure_fleet_effect = yes
	if = {
		limit = {
			has_dlc = "Holy Fury"
		}
		add_extra_hf_random_world_artifacts_effect = yes
		add_extra_hf_random_world_artifacts_effect = yes
	}
	add_random_number_of_art_of_war_pages_effect = yes
	change_variable = {
		which = tf_immigrants
		value = 5
	}
	change_variable = {
		which = tf_supplies
		value = 10
	}
}

### Removing or weakening stuff

remove_one_of_each_jd_artifact_effect = { # Exactly what it says on the tin
	change_variable = {
		which = tf_jade_dragon
		value = -1
	}
	change_variable = {
		which = tf_chinese_dragon_amulet
		value = -1
	}
	change_variable = {
		which = tf_chinese_artwork
		value = -1
	}
	change_variable = {
		which = tf_chinese_calligraphy
		value = -1
	}
	change_variable = {
		which = tf_chinese_sculpture
		value = -1
	}
	change_variable = {
		which = tf_chinese_ceremonial_robes
		value = -1
	}
	change_variable = {
		which = tf_silk_shroud
		value = -1
	}
	change_variable = {
		which = tf_water_clock
		value = -1
	}
	change_variable = {
		which = tf_jian_sword
		value = -1
	}
	#change_variable = {
	#	which = tf_chinese_prev_emperor_sculpture
	#	value = -1
	#}
	change_variable = {
		which = tf_chinese_arm_protector
		value = -1
	}
	change_variable = {
		which = tf_chinese_serpent_spear
		value = -1
	}
	change_variable = {
		which = tf_chinese_ji
		value = -1
	}
	change_variable = {
		which = tf_chinese_crossbow
		value = -1
	}
	change_variable = {
		which = tf_chinese_bronze_sculpture
		value = -1
	}
	change_variable = {
		which = tf_chinese_painting_of_glitterhoof
		value = -1
	}
	change_variable = {
		which = tf_chinese_tapestry
		value = -1
	}
	change_variable = {
		which = tf_chinese_tapestry_grand
		value = -1
	}
	change_variable = {
		which = tf_art_of_war
		value = -1
	}
	change_variable = {
		which = tf_classic_of_poetry
		value = -1
	}
	change_variable = {
		which = tf_chinese_book_health
		value = -1
	}
	change_variable = {
		which = tf_chinese_book_law
		value = -1
	}
	change_variable = {
		which = tf_chinese_book_history
		value = -1
	}
	change_variable = {
		which = tf_chinese_book_economy
		value = -1
	}
	zero_everything_negative_effect = yes
}

remove_one_of_each_jd_modifier_effect = { # Exactly what it says on the tin
	change_variable = {
		which = tf_jd_paper_mill
		value = -1
	}
	change_variable = {
		which = tf_jd_fireworks_guild
		value = -1
	}
	change_variable = {
		which = tf_jd_dry_docks
		value = -1
	}
	change_variable = {
		which = tf_jd_administrative_outpost
		value = -1
	}
	change_variable = {
		which = tf_jd_blast_furnace
		value = -1
	}
	zero_everything_negative_effect = yes
}

remove_one_of_each_jd_character_effect = { # Exactly what it says on the tin
	change_variable = {
		which = tf_physician
		value = -1
	}
	change_variable = {
		which = tf_siege_engineer
		value = -1
	}
	change_variable = {
		which = tf_strategist
		value = -1
	}
	change_variable = {
		which = tf_administrator # Scholar-Bureaucrat
		value = -1
	}
	change_variable = {
		which = tf_master_engineer
		value = -1
	}
	change_variable = {
		which = tf_peace_deal_with_china
		value = -1
	}
	change_variable = {
		which = tf_chinese_imperial_trade_contract
		value = -1
	}
	zero_everything_negative_effect = yes
}

remove_random_people_from_treasure_fleet_effect = {
	remove_random_number_of_soldiers_effect = yes
	remove_random_number_of_eunuchs_effect = yes
	remove_random_number_of_courtesans_effect = yes
	remove_random_number_of_scholars_effect = yes
	remove_random_number_of_nobles_effect = yes
	zero_everything_negative_effect = yes
}

remove_random_number_of_soldiers_effect = {
	random_list = {
		1 = {
			change_variable = {
				which = tf_soldier
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_soldier
				value = -2
			}
		}
		1 = {
			change_variable = {
				which = tf_soldier
				value = -3
			}
		}
		1 = {
			change_variable = {
				which = tf_soldier
				value = -4
			}
		}
		1 = {
			change_variable = {
				which = tf_soldier
				value = -5
			}
		}
		1 = {
			change_variable = {
				which = tf_soldier
				value = -6
			}
		}
		1 = {
			change_variable = {
				which = tf_soldier
				value = -7
			}
		}
		1 = {
			change_variable = {
				which = tf_soldier
				value = -8
			}
		}
		1 = {
			change_variable = {
				which = tf_soldier
				value = -9
			}
		}
		1 = {
			change_variable = {
				which = tf_soldier
				value = -10
			}
		}
	}
	zero_everything_negative_effect = yes
}

remove_random_number_of_eunuchs_effect = {
	random_list = {
		1 = {
			change_variable = {
				which = tf_eunuch
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_eunuch
				value = -2
			}
		}
		1 = {
			change_variable = {
				which = tf_eunuch
				value = -3
			}
		}
		1 = {
			change_variable = {
				which = tf_eunuch
				value = -4
			}
		}
		1 = {
			change_variable = {
				which = tf_eunuch
				value = -5
			}
		}
		1 = {
			change_variable = {
				which = tf_eunuch
				value = -6
			}
		}
		1 = {
			change_variable = {
				which = tf_eunuch
				value = -7
			}
		}
		1 = {
			change_variable = {
				which = tf_eunuch
				value = -8
			}
		}
		1 = {
			change_variable = {
				which = tf_eunuch
				value = -9
			}
		}
		1 = {
			change_variable = {
				which = tf_eunuch
				value = -10
			}
		}
	}
	zero_everything_negative_effect = yes
}

remove_random_number_of_courtesans_effect = {
	random_list = {
		1 = {
			change_variable = {
				which = tf_courtesan
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_courtesan
				value = -2
			}
		}
		1 = {
			change_variable = {
				which = tf_courtesan
				value = -3
			}
		}
		1 = {
			change_variable = {
				which = tf_courtesan
				value = -4
			}
		}
		1 = {
			change_variable = {
				which = tf_courtesan
				value = -5
			}
		}
		1 = {
			change_variable = {
				which = tf_courtesan
				value = -6
			}
		}
		1 = {
			change_variable = {
				which = tf_courtesan
				value = -7
			}
		}
		1 = {
			change_variable = {
				which = tf_courtesan
				value = -8
			}
		}
		1 = {
			change_variable = {
				which = tf_courtesan
				value = -9
			}
		}
		1 = {
			change_variable = {
				which = tf_courtesan
				value = -10
			}
		}
	}
	zero_everything_negative_effect = yes
}

remove_random_number_of_scholars_effect = {
	random_list = {
		1 = {
			change_variable = {
				which = tf_scholar
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_scholar
				value = -2
			}
		}
		1 = {
			change_variable = {
				which = tf_scholar
				value = -3
			}
		}
		1 = {
			change_variable = {
				which = tf_scholar
				value = -4
			}
		}
		1 = {
			change_variable = {
				which = tf_scholar
				value = -5
			}
		}
		1 = {
			change_variable = {
				which = tf_scholar
				value = -6
			}
		}
		1 = {
			change_variable = {
				which = tf_scholar
				value = -7
			}
		}
		1 = {
			change_variable = {
				which = tf_scholar
				value = -8
			}
		}
		1 = {
			change_variable = {
				which = tf_scholar
				value = -9
			}
		}
		1 = {
			change_variable = {
				which = tf_scholar
				value = -10
			}
		}
	}
	zero_everything_negative_effect = yes
}

remove_random_number_of_nobles_effect = {
	random_list = {
		1 = {
			change_variable = {
				which = tf_noble
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_noble
				value = -2
			}
		}
		1 = {
			change_variable = {
				which = tf_noble
				value = -3
			}
		}
		1 = {
			change_variable = {
				which = tf_noble
				value = -4
			}
		}
		1 = {
			change_variable = {
				which = tf_noble
				value = -5
			}
		}
		1 = {
			change_variable = {
				which = tf_noble
				value = -6
			}
		}
		1 = {
			change_variable = {
				which = tf_noble
				value = -7
			}
		}
		1 = {
			change_variable = {
				which = tf_noble
				value = -8
			}
		}
		1 = {
			change_variable = {
				which = tf_noble
				value = -9
			}
		}
		1 = {
			change_variable = {
				which = tf_noble
				value = -10
			}
		}
	}
	zero_everything_negative_effect = yes
}

remove_random_jd_artifact_effect = {
	random_list = {
		1 = {
			change_variable = {
				which = tf_jade_dragon
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_dragon_amulet
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_artwork
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_calligraphy
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_sculpture
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_ceremonial_robes
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_silk_shroud
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_water_clock
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_jian_sword
				value = -1
			}
		}
		#1 = {
			#change_variable = {
			#	which = tf_chinese_prev_emperor_sculpture
			#	value = -1
			#}
		#}
		1 = {
			change_variable = {
				which = tf_chinese_arm_protector
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_serpent_spear
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_ji
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_crossbow
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_bronze_sculpture
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_painting_of_glitterhoof
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_tapestry
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_tapestry_grand
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_art_of_war
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_classic_of_poetry
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_book_health
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_book_law
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_book_history
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_book_economy
				value = -1
			}
		}
	}
	zero_everything_negative_effect = yes
}

remove_random_jd_artifact_for_each_tier_effect = {
	remove_random_t1_jd_artifact_effect = yes
	remove_random_t2_jd_artifact_effect = yes
	remove_random_t3_jd_artifact_effect = yes
	remove_random_t4_jd_artifact_effect = yes
	remove_random_t5_jd_artifact_effect = yes
	zero_everything_negative_effect = yes
}

remove_random_t1_jd_artifact_effect = {
	random_list = {
		#1 = {
			#change_variable = {
			#	which = tf_chinese_prev_emperor_sculpture
			#	value = -1
			#}
		#}
		1 = {
			change_variable = {
				which = tf_chinese_painting_of_glitterhoof
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_book_history
				value = -1
			}
		}
	}
	zero_everything_negative_effect = yes
}

remove_random_t2_jd_artifact_effect = {
	random_list = {
		1 = {
			change_variable = {
				which = tf_chinese_artwork
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_calligraphy
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_sculpture
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_arm_protector
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_serpent_spear
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_tapestry
				value = -1
			}
		}
	}
	zero_everything_negative_effect = yes
}

remove_random_t3_jd_artifact_effect = {
	random_list = {
		1 = {
			change_variable = {
				which = tf_chinese_ceremonial_robes
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_silk_shroud
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_ji
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_crossbow
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_bronze_sculpture
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_tapestry_grand
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_book_health
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_book_law
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_book_economy
				value = -1
			}
		}
	}
	zero_everything_negative_effect = yes
}

remove_random_t4_jd_artifact_effect = {
	random_list = {
		1 = {
			change_variable = {
				which = tf_chinese_dragon_amulet
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_water_clock
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_jian_sword
				value = -1
			}
		}
	}
	zero_everything_negative_effect = yes
}

remove_random_t5_jd_artifact_effect = {
	random_list = {
		1 = {
			change_variable = {
				which = tf_jade_dragon
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_art_of_war
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_classic_of_poetry
				value = -1
			}
		}
	}
	zero_everything_negative_effect = yes
}

remove_random_jd_modifier_effect = {
	random_list = {
		1 = {
			change_variable = {
				which = tf_jd_paper_mill
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_jd_fireworks_guild
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_jd_dry_docks
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_jd_administrative_outpost
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_jd_blast_furnace
				value = -1
			}
		}
	}
	zero_everything_negative_effect = yes
}

remove_random_jd_character_effect = {
	random_list = {
		1 = {
			change_variable = {
				which = tf_physician
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_siege_engineer
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_strategist
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_administrator # Scholar-Bureaucrat
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_master_engineer
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_peace_deal_with_china
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_chinese_imperial_trade_contract
				value = -1
			}
		}
	}
	zero_everything_negative_effect = yes
}

remove_one_random_tf_member_effect = {
	random_list = {
		1 = {
			change_variable = {
				which = tf_soldier
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_eunuch
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_courtesan
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_scholar
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_noble
				value = -1
			}
		}
	}
	zero_everything_negative_effect = yes
}

remove_extra_hf_random_world_artifacts_effect = {
	remove_random_number_of_random_world_swords_effect = yes
	remove_random_number_of_random_world_armors_effect = yes
	zero_everything_negative_effect = yes
}

remove_random_number_of_random_world_swords_effect = {
	random_list = {
		1 = {
			change_variable = {
				which = tf_random_world_sword
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_random_world_sword
				value = -2
			}
		}
		1 = {
			change_variable = {
				which = tf_random_world_sword
				value = -3
			}
		}
	}
	zero_everything_negative_effect = yes
}

remove_random_number_of_random_world_armors_effect = {
	random_list = {
		1 = {
			change_variable = {
				which = tf_random_world_armor
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_random_world_armor
				value = -2
			}
		}
		1 = {
			change_variable = {
				which = tf_random_world_armor
				value = -3
			}
		}
	}
	zero_everything_negative_effect = yes
}

remove_random_number_of_art_of_war_pages_effect = {
	random_list = {
		1 = {
			change_variable = {
				which = tf_art_of_war_page
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_art_of_war_page
				value = -2
			}
		}
		1 = {
			change_variable = {
				which = tf_art_of_war_page
				value = -3
			}
		}
		1 = {
			change_variable = {
				which = tf_art_of_war_page
				value = -4
			}
		}
		1 = {
			change_variable = {
				which = tf_art_of_war_page
				value = -5
			}
		}
		1 = {
			change_variable = {
				which = tf_art_of_war_page
				value = -6
			}
		}
		1 = {
			change_variable = {
				which = tf_art_of_war_page
				value = -7
			}
		}
		1 = {
			change_variable = {
				which = tf_art_of_war_page
				value = -8
			}
		}
		1 = {
			change_variable = {
				which = tf_art_of_war_page
				value = -9
			}
		}
		1 = {
			change_variable = {
				which = tf_art_of_war_page
				value = -10
			}
		}
	}
	zero_everything_negative_effect = yes
}

weaken_all_treasure_fleet_attributes_small_effect = {
	change_variable = {
		which = treasure_fleet_ship_strength
		value = -1
	}
	change_variable = {
		which = treasure_fleet_army_strength
		value = -1
	}
	change_variable = {
		which = treasure_fleet_wealth
		value = -1
	}
	zero_everything_negative_effect = yes
}

weaken_all_treasure_fleet_attributes_medium_effect = {
	change_variable = {
		which = treasure_fleet_ship_strength
		value = -5
	}
	change_variable = {
		which = treasure_fleet_army_strength
		value = -5
	}
	change_variable = {
		which = treasure_fleet_wealth
		value = -5
	}
	zero_everything_negative_effect = yes
}

weaken_all_treasure_fleet_attributes_large_effect = {
	change_variable = {
		which = treasure_fleet_ship_strength
		value = -10
	}
	change_variable = {
		which = treasure_fleet_army_strength
		value = -10
	}
	change_variable = {
		which = treasure_fleet_wealth
		value = -10
	}
}

weaken_random_treasure_fleet_attribute_small_effect = {
	random_list = {
		1 = {
			change_variable = {
				which = treasure_fleet_ship_strength
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = treasure_fleet_army_strength
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = treasure_fleet_wealth
				value = -1
			}
		}
	}
	zero_everything_negative_effect = yes
}

weaken_random_treasure_fleet_attribute_medium_effect = {
	random_list = {
		1 = {
			change_variable = {
				which = treasure_fleet_ship_strength
				value = -5
			}
		}
		1 = {
			change_variable = {
				which = treasure_fleet_army_strength
				value = -5
			}
		}
		1 = {
			change_variable = {
				which = treasure_fleet_wealth
				value = -5
			}
		}
	}
	zero_everything_negative_effect = yes
}

weaken_random_treasure_fleet_attribute_large_effect = {
	random_list = {
		1 = {
			change_variable = {
				which = treasure_fleet_ship_strength
				value = -10
			}
		}
		1 = {
			change_variable = {
				which = treasure_fleet_army_strength
				value = -10
			}
		}
		1 = {
			change_variable = {
				which = treasure_fleet_wealth
				value = -10
			}
		}
	}
	zero_everything_negative_effect = yes
}

remove_or_weaken_random_treasure_fleet_person_artifact_or_stat_from_one_allowed_category_effect = {
	random_list = {
		1 = {
			modifier = {
				factor = 0
				NOT = {
					has_dlc = "Jade Dragon"
				}
			}
			remove_random_t1_jd_artifact_effect = yes
		}
		1 = {
			modifier = {
				factor = 0
				NOT = {
					has_dlc = "Jade Dragon"
				}
			}
			remove_random_t2_jd_artifact_effect = yes
		}
		1 = {
			modifier = {
				factor = 0
				NOT = {
					has_dlc = "Jade Dragon"
				}
			}
			remove_random_t3_jd_artifact_effect = yes
		}
		1 = {
			modifier = {
				factor = 0
				NOT = {
					has_dlc = "Jade Dragon"
				}
			}
			remove_random_t4_jd_artifact_effect = yes
		}
		1 = {
			modifier = {
				factor = 0
				NOT = {
					has_dlc = "Jade Dragon"
				}
			}
			remove_random_t5_jd_artifact_effect = yes
		}
		1 = {
			modifier = {
				factor = 0
				NOT = {
					has_dlc = "Jade Dragon"
				}
			}
			remove_random_jd_modifier_effect = yes
		}
		1 = {
			modifier = {
				factor = 0
				NOT = {
					has_dlc = "Jade Dragon"
				}
			}
			remove_random_jd_character_effect = yes
		}
		1 = {
			modifier = {
				factor = 0
				NOT = {
					has_dlc = "Holy Fury"
				}
			}
			change_variable = {
				which = tf_random_world_sword
				value = -1
			}
		}
		1 = {
			modifier = {
				factor = 0
				NOT = {
					has_dlc = "Holy Fury"
				}
			}
			change_variable = {
				which = tf_random_world_armor
				value = -1
			}
		}
		1 = {
			weaken_random_treasure_fleet_attribute_small_effect = yes
		}
		1 = {
			weaken_random_treasure_fleet_attribute_medium_effect = yes
		}
		1 = {
			weaken_random_treasure_fleet_attribute_large_effect = yes
		}
		1 = {
			change_variable = {
				which = tf_immigrants
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_immigrants
				value = -2
			}
		}
		1 = {
			change_variable = {
				which = tf_immigrants
				value = -5
			}
		}
		1 = {
			change_variable = {
				which = tf_supplies
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_supplies
				value = -5
			}
		}
		1 = {
			change_variable = {
				which = tf_supplies
				value = -10
			}
		}
		1 = {
			remove_extra_hf_random_world_artifacts_effect = yes
		}
		1 = {
			remove_random_number_of_soldiers_effect = yes
		}
		1 = {
			remove_random_number_of_eunuchs_effect = yes
		}
		1 = {
			remove_random_number_of_courtesans_effect = yes
		}
		1 = {
			remove_random_number_of_scholars_effect = yes
		}
		1 = {
			remove_random_number_of_nobles_effect = yes
		}
		1 = {
			remove_one_random_tf_member_effect = yes
		}
		1 = {
			remove_random_number_of_art_of_war_pages_effect = yes
		}
	}
	zero_everything_negative_effect = yes
}

remove_or_weaken_random_treasure_fleet_person_artifact_and_stat_from_each_allowed_category_effect = {
	random_list = {
		1 = {
			remove_random_number_of_soldiers_effect = yes
		}
		1 = {
			remove_random_number_of_eunuchs_effect = yes
		}
		1 = {
			remove_random_number_of_courtesans_effect = yes
		}
		1 = {
			remove_random_number_of_scholars_effect = yes
		}
		1 = {
			remove_random_number_of_nobles_effect = yes
		}
		1 = {
			remove_random_number_of_art_of_war_pages_effect = yes
		}
	}
	if = {
		limit = {
			has_dlc = "Jade Dragon"
		}
		random_list = {
			1 = {
				remove_random_t1_jd_artifact_effect = yes
			}
			1 = {
				remove_random_t2_jd_artifact_effect = yes
			}
			1 = {
				remove_random_t3_jd_artifact_effect = yes
			}
			1 = {
				remove_random_t4_jd_artifact_effect = yes
			}
			1 = {
				remove_random_t5_jd_artifact_effect = yes
			}
			1 = {
				remove_random_jd_modifier_effect = yes
			}
			1 = {
				remove_random_jd_character_effect = yes
			}
		}
	}
	if = {
		limit = {
			has_dlc = "Holy Fury"
		}
		random_list = {
			1 = {
				remove_random_number_of_random_world_swords_effect = yes
			}
			1 = {
				remove_random_number_of_random_world_armors_effect = yes
			}
		}
	}
	random_list = {
		1 = {
			change_variable = {
				which = tf_immigrants
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_immigrants
				value = -2
			}
		}
		1 = {
			change_variable = {
				which = tf_immigrants
				value = -5
			}
		}
	}
	random_list = {
		1 = {
			change_variable = {
				which = tf_supplies
				value = -1
			}
		}
		1 = {
			change_variable = {
				which = tf_supplies
				value = -5
			}
		}
		1 = {
			change_variable = {
				which = tf_supplies
				value = -10
			}
		}
	}
	random_list = {
		1 = {
			weaken_all_treasure_fleet_attributes_small_effect = yes
		}
		1 = {
			weaken_all_treasure_fleet_attributes_medium_effect = yes
		}
		1 = {
			weaken_all_treasure_fleet_attributes_large_effect = yes
		}
	}
	zero_everything_negative_effect = yes
}

remove_or_weaken_everything_permissible_effect = {
	weaken_all_treasure_fleet_attributes_large_effect = yes
	if = {
		limit = {
			has_dlc = "Jade Dragon"
		}
		remove_one_of_each_jd_artifact_effect = yes
		remove_one_of_each_jd_modifier_effect = yes
		remove_one_of_each_jd_character_effect = yes
	}
	remove_random_people_from_treasure_fleet_effect = yes
	if = {
		limit = {
			has_dlc = "Holy Fury"
		}
		remove_extra_hf_random_world_artifacts_effect = yes
		remove_extra_hf_random_world_artifacts_effect = yes
	}
	remove_random_number_of_art_of_war_pages_effect = yes
	change_variable = {
		which = tf_immigrants
		value = -5
	}
	change_variable = {
		which = tf_supplies
		value = -10
	}
	zero_everything_negative_effect = yes
}

zero_everything_negative_effect = {
	# Alphabetical!
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = tf_administrator # Scholar-Bureaucrat
					value = 0
				}
			}
		}
		set_variable = {
			which = tf_administrator # Scholar-Bureaucrat
			value = 0
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = tf_art_of_war
					value = 0
				}
			}
		}
		set_variable = {
			which = tf_art_of_war
			value = 0
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = tf_art_of_war_page
					value = 0
				}
			}
		}
		set_variable = {
			which = tf_art_of_war_page
			value = 0
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = tf_chinese_arm_protector
					value = 0
				}
			}
		}
		set_variable = {
			which = tf_chinese_arm_protector
			value = 0
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = tf_chinese_artwork
					value = 0
				}
			}
		}
		set_variable = {
			which = tf_chinese_artwork
			value = 0
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = tf_chinese_book_economy
					value = 0
				}
			}
		}
		set_variable = {
			which = tf_chinese_book_economy
			value = 0
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = tf_chinese_book_health
					value = 0
				}
			}
		}
		set_variable = {
			which = tf_chinese_book_health
			value = 0
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = tf_chinese_book_history
					value = 0
				}
			}
		}
		set_variable = {
			which = tf_chinese_book_history
			value = 0
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = tf_chinese_book_law
					value = 0
				}
			}
		}
		set_variable = {
			which = tf_chinese_book_law
			value = 0
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = tf_chinese_bronze_sculpture
					value = 0
				}
			}
		}
		set_variable = {
			which = tf_chinese_bronze_sculpture
			value = 0
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = tf_chinese_calligraphy
					value = 0
				}
			}
		}
		set_variable = {
			which = tf_chinese_calligraphy
			value = 0
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = tf_chinese_ceremonial_robes
					value = 0
				}
			}
		}
		set_variable = {
			which = tf_chinese_ceremonial_robes
			value = 0
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = tf_chinese_crossbow
					value = 0
				}
			}
		}
		set_variable = {
			which = tf_chinese_crossbow
			value = 0
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = tf_chinese_dragon_amulet
					value = 0
				}
			}
		}
		set_variable = {
			which = tf_chinese_dragon_amulet
			value = 0
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = tf_chinese_ji
					value = 0
				}
			}
		}
		set_variable = {
			which = tf_chinese_ji
			value = 0
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = tf_chinese_painting_of_glitterhoof
					value = 0
				}
			}
		}
		set_variable = {
			which = tf_chinese_painting_of_glitterhoof
			value = 0
		}
	}
	#if = {
	#	limit = {
	#		NOT = {
	#			check_variable = {
	#				which = tf_chinese_prev_emperor_sculpture
	#				value = 0
	#			}
	#		}
	#	}
	#	set_variable = {
	#		which = tf_chinese_prev_emperor_sculpture
	#		value = 0
	#	}
	#}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = tf_chinese_sculpture
					value = 0
				}
			}
		}
		set_variable = {
			which = tf_chinese_sculpture
			value = 0
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = tf_chinese_serpent_spear
					value = 0
				}
			}
		}
		set_variable = {
			which = tf_chinese_serpent_spear
			value = 0
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = tf_chinese_tapestry
					value = 0
				}
			}
		}
		set_variable = {
			which = tf_chinese_tapestry
			value = 0
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = tf_chinese_tapestry_grand
					value = 0
				}
			}
		}
		set_variable = {
			which = tf_chinese_tapestry_grand
			value = 0
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = tf_classic_of_poetry
					value = 0
				}
			}
		}
		set_variable = {
			which = tf_classic_of_poetry
			value = 0
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = tf_courtesan
					value = 0
				}
			}
		}
		set_variable = {
			which = tf_courtesan
			value = 0
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = tf_eunuch
					value = 0
				}
			}
		}
		set_variable = {
			which = tf_eunuch
			value = 0
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = tf_immigrants
					value = 0
				}
			}
		}
		set_variable = {
			which = tf_immigrants
			value = 0
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = tf_jade_dragon
					value = 0
				}
			}
		}
		set_variable = {
			which = tf_jade_dragon
			value = 0
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = tf_jd_administrative_outpost
					value = 0
				}
			}
		}
		set_variable = {
			which = tf_jd_administrative_outpost
			value = 0
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = tf_jd_blast_furnace
					value = 0
				}
			}
		}
		set_variable = {
			which = tf_jd_blast_furnace
			value = 0
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = tf_jd_dry_docks
					value = 0
				}
			}
		}
		set_variable = {
			which = tf_jd_dry_docks
			value = 0
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = tf_jd_fireworks_guild
					value = 0
				}
			}
		}
		set_variable = {
			which = tf_jd_fireworks_guild
			value = 0
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = tf_jd_paper_mill
					value = 0
				}
			}
		}
		set_variable = {
			which = tf_jd_paper_mill
			value = 0
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = tf_jian_sword
					value = 0
				}
			}
		}
		set_variable = {
			which = tf_jian_sword
			value = 0
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = tf_master_engineer
					value = 0
				}
			}
		}
		set_variable = {
			which = tf_master_engineer
			value = 0
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = tf_peace_deal_with_china
					value = 0
				}
			}
		}
		set_variable = {
			which = tf_peace_deal_with_china
			value = 0
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = tf_chinese_imperial_trade_contract
					value = 0
				}
			}
		}
		set_variable = {
			which = tf_chinese_imperial_trade_contract
			value = 0
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = tf_noble
					value = 0
				}
			}
		}
		set_variable = {
			which = tf_noble
			value = 0
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = tf_physician
					value = 0
				}
			}
		}
		set_variable = {
			which = tf_physician
			value = 0
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = tf_random_world_armor
					value = 0
				}
			}
		}
		set_variable = {
			which = tf_random_world_armor
			value = 0
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = tf_random_world_sword
					value = 0
				}
			}
		}
		set_variable = {
			which = tf_random_world_sword
			value = 0
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = tf_scholar
					value = 0
				}
			}
		}
		set_variable = {
			which = tf_scholar
			value = 0
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = tf_siege_engineer
					value = 0
				}
			}
		}
		set_variable = {
			which = tf_siege_engineer
			value = 0
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = tf_silk_shroud
					value = 0
				}
			}
		}
		set_variable = {
			which = tf_silk_shroud
			value = 0
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = tf_soldier
					value = 0
				}
			}
		}
		set_variable = {
			which = tf_soldier
			value = 0
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = tf_strategist
					value = 0
				}
			}
		}
		set_variable = {
			which = tf_strategist
			value = 0
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = tf_supplies
					value = 0
				}
			}
		}
		set_variable = {
			which = tf_supplies
			value = 0
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = tf_water_clock
					value = 0
				}
			}
		}
		set_variable = {
			which = tf_water_clock
			value = 0
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = treasure_fleet_army_strength
					value = 0
				}
			}
		}
		set_variable = {
			which = treasure_fleet_army_strength
			value = 0
		}
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = treasure_fleet_wealth
					value = 0
				}
			}
		}
		set_variable = {
			which = treasure_fleet_wealth
			value = 0
		}
	}
}

### Misc

disembark_regiments_until_stronger_or_unable_to_continue_effect = {
	while = {
		limit = {
			2753 = { # Hangzhou
				check_variable = {
					which = treasure_fleet_army_strength
					value = 15
				}
			}
			event_target:treasure_fleet_attacker = {
				relative_power = {
					who = event_target:treasure_fleet_punitive_expedition_leader
					power = 1
				}
			}
		}
		2753 = { # Hangzhou
			change_variable = {
				which = treasure_fleet_army_strength
				value = -1
			}
		}
		event_target:treasure_fleet_punitive_expedition_leader = {
			event_target:treasure_fleet_beachhead = {
				PREV = {
					spawn_unit = {
						province = PREV
						home = PREV
						owner = event_target:treasure_fleet_punitive_expedition_leader
						earmark = tf_punitive_expedition
						troops = {
							light_infantry = { 300 300 } # Sailors
							heavy_infantry = { 200 200 }
							pikemen = { 200 200 }
							archers = { 200 200 }
							light_cavalry = { 50 50 } # Very little cavalry; horses are annoying to transport
							knights = { 50 50 } # Very little cavalry; horses are annoying to transport
						}
					}
				}
				sea_zone = {
					event_target:treasure_fleet_punitive_expedition_leader = {
						spawn_unit = {
							province = PREV
							home = PREV
							owner = event_target:treasure_fleet_punitive_expedition_leader
							earmark = tf_punitive_expedition
							troops = {
								galleys = { 10 10 }
							}
						}
					}
				}
			}
		}
	}
}

disembark_regiments_until_unable_to_continue_effect = {
	while = {
		limit = {
			2753 = { # Hangzhou
				check_variable = {
					which = treasure_fleet_army_strength
					value = 1
				}
			}
		}
		2753 = { # Hangzhou
			change_variable = {
				which = treasure_fleet_army_strength
				value = -1
			}
		}
		ROOT = {
			event_target:potential_tf_invasion_target_beachhead = {
				ROOT = {
					spawn_unit = {
						province = PREV
						home = PREV
						owner = ROOT
						earmark = tf_invasion
						troops = {
							light_infantry = { 300 300 } # Sailors
							heavy_infantry = { 200 200 }
							pikemen = { 200 200 }
							archers = { 200 200 }
							light_cavalry = { 50 50 } # Very little cavalry; horses are annoying to transport
							knights = { 50 50 } # Very little cavalry; horses are annoying to transport
						}
					}
				}
				sea_zone = {
					ROOT = {
						spawn_unit = {
							province = PREV
							home = PREV
							owner = ROOT
							earmark = tf_invasion
							troops = {
								galleys = { 10 10 }
							}
						}
					}
				}
			}
		}
	}
}

gift_random_artifact_effect = {
	set_character_flag = treasure_fleet_artifact_naming_flag
	2753 = { # Hangzhou
		random_list = {
			1 = {
				modifier = {
					factor = 0
					NOT = {
						check_variable = {
							which = tf_jade_dragon
							value = 1
						}
					}
				}
				hidden_tooltip = {
					change_variable = {
						which = tf_jade_dragon
						value = -1
					}
				}
				ROOT = {
					add_artifact = jade_dragon
					new_artifact = {
						set_original_owner = FROM
					}
				}
			}
			1 = {
				modifier = {
					factor = 0
					NOT = {
						check_variable = {
							which = tf_chinese_dragon_amulet
							value = 1
						}
					}
				}
				hidden_tooltip = {
					change_variable = {
						which = tf_chinese_dragon_amulet
						value = -1
					}
				}
				ROOT = {
					add_artifact = chinese_dragon_amulet
					new_artifact = {
						set_original_owner = FROM
					}
				}
			}
			1 = {
				modifier = {
					factor = 0
					NOT = {
						check_variable = {
							which = tf_chinese_artwork
							value = 1
						}
					}
				}
				hidden_tooltip = {
					change_variable = {
						which = tf_chinese_artwork
						value = -1
					}
				}
				ROOT = {
					add_artifact = chinese_artwork
					new_artifact = {
						set_name="chinese_artwork_name"
						set_original_owner = FROM
					}
				}
			}
			1 = {
				modifier = {
					factor = 0
					NOT = {
						check_variable = {
							which = tf_chinese_calligraphy
							value = 1
						}
					}
				}
				hidden_tooltip = {
					change_variable = {
						which = chinese_calligraphy
						value = -1
					}
				}
				ROOT = {
					add_artifact = chinese_calligraphy
					new_artifact = {
						set_name="chinese_calligraphy_name"
						set_original_owner = FROM
					}
				}
			}
			1 = {
				modifier = {
					factor = 0
					NOT = {
						check_variable = {
							which = tf_chinese_sculpture
							value = 1
						}
					}
				}
				hidden_tooltip = {
					change_variable = {
						which = chinese_sculpture
						value = -1
					}
				}
				ROOT = {
					add_artifact = chinese_sculpture
					new_artifact = {
						set_name="chinese_sculpture_name"
						set_original_owner = FROM
					}
				}
			}
			1 = {
				modifier = {
					factor = 0
					NOT = {
						check_variable = {
							which = tf_chinese_ceremonial_robes
							value = 1
						}
					}
				}
				hidden_tooltip = {
					change_variable = {
						which = tf_chinese_ceremonial_robes
						value = -1
					}
				}
				ROOT = {
					add_artifact = chinese_ceremonial_robes
					new_artifact = {
						set_original_owner = FROM
					}
				}
			}
			1 = {
				modifier = {
					factor = 0
					NOT = {
						check_variable = {
							which = tf_silk_shroud
							value = 1
						}
					}
				}
				hidden_tooltip = {
					change_variable = {
						which = tf_silk_shroud
						value = -1
					}
				}
				ROOT = {
					add_artifact = silk_shroud
					new_artifact = {
						set_original_owner = FROM
					}
				}
			}
			1 = {
				modifier = {
					factor = 0
					NOT = {
						check_variable = {
							which = tf_water_clock
							value = 1
						}
					}
				}
				hidden_tooltip = {
					change_variable = {
						which = tf_water_clock
						value = -1
					}
				}
				ROOT = {
					add_artifact = water_clock
					new_artifact = {
						set_original_owner = FROM
					}
				}
			}
			1 = {
				modifier = {
					factor = 0
					NOT = {
						check_variable = {
							which = tf_jian_sword
							value = 1
						}
					}
				}
				hidden_tooltip = {
					change_variable = {
						which = tf_jian_sword
						value = -1
					}
				}
				ROOT = {
					add_artifact = jian_sword
					new_artifact = {
						set_original_owner = FROM
					}
				}
			}
			#1 = {
			#	modifier = {
			#		factor = 0
			#		NOT = {
			#			check_variable = {
			#				which = xxx
			#				value = 1
			#			}
			#		}
			#	}
			#	#change_variable = {
			#	#	which = tf_chinese_prev_emperor_sculpture
			#	#	value = -1
			#	#}
			#	ROOT = {
			#		set_character_flag = xxx
			#	}
			#}
			1 = {
				modifier = {
					factor = 0
					NOT = {
						check_variable = {
							which = tf_chinese_arm_protector
							value = 1
						}
					}
				}
				hidden_tooltip = {
					change_variable = {
						which = tf_chinese_arm_protector
						value = -1
					}
				}
				ROOT = {
					add_artifact = chinese_arm_protector
					new_artifact = {
						set_name="chinese_arm_protector_name"
						set_original_owner = FROM
					}
				}
			}
			1 = {
				modifier = {
					factor = 0
					NOT = {
						check_variable = {
							which = tf_chinese_serpent_spear
							value = 1
						}
					}
				}
				hidden_tooltip = {
					change_variable = {
						which = tf_chinese_serpent_spear
						value = -1
					}
				}
				ROOT = {
					add_artifact = chinese_serpent_spear
					new_artifact = {
						set_original_owner = FROM
					}
				}
			}
			1 = {
				modifier = {
					factor = 0
					NOT = {
						check_variable = {
							which = tf_chinese_ji
							value = 1
						}
					}
				}
				hidden_tooltip = {
					change_variable = {
						which = tf_chinese_ji
						value = -1
					}
				}
				ROOT = {
					add_artifact = chinese_ji
					new_artifact = {
						set_original_owner = FROM
					}
				}
			}
			1 = {
				modifier = {
					factor = 0
					NOT = {
						check_variable = {
							which = tf_chinese_crossbow
							value = 1
						}
					}
				}
				hidden_tooltip = {
					change_variable = {
						which = tf_chinese_crossbow
						value = -1
					}
				}
				ROOT = {
					add_artifact = chinese_crossbow
					new_artifact = {
						set_original_owner = FROM
					}
				}
			}
			1 = {
				modifier = {
					factor = 0
					NOT = {
						check_variable = {
							which = tf_chinese_bronze_sculpture
							value = 1
						}
					}
				}
				hidden_tooltip = {
					change_variable = {
						which = tf_chinese_bronze_sculpture
						value = -1
					}
				}
				ROOT = {
					add_artifact = chinese_bronze_sculpture
					new_artifact = {
						set_name="chinese_bronze_sculpture_name"
						set_original_owner = FROM
					}
				}
			}
			1 = {
				modifier = {
					factor = 0
					NOT = {
						check_variable = {
							which = tf_chinese_painting_of_glitterhoof
							value = 1
						}
					}
				}
				hidden_tooltip = {
					change_variable = {
						which = tf_chinese_painting_of_glitterhoof
						value = -1
					}
				}
				ROOT = {
					add_artifact = chinese_painting_of_glitterhoof
					new_artifact = {
						set_original_owner = FROM
					}
				}
			}
			1 = {
				modifier = {
					factor = 0
					NOT = {
						check_variable = {
							which = tf_chinese_tapestry
							value = 1
						}
					}
				}
				hidden_tooltip = {
					change_variable = {
						which = tf_chinese_tapestry
						value = -1
					}
				}
				ROOT = {
					random_independent_ruler = {
						limit = {
							any_realm_province = {
								trade_route = silk_road
							}
						}
						random_realm_province = {
							limit = {
								trade_route = silk_road
							}
							save_event_target_as = tapestry_target
						}
					}
					add_artifact = chinese_tapestry
					new_artifact = {
						set_name="chinese_tapestry_name"
						set_original_owner = FROM
					}
				}
			}
			1 = {
				modifier = {
					factor = 0
					NOT = {
						check_variable = {
							which = tf_chinese_tapestry_grand
							value = 1
						}
					}
				}
				hidden_tooltip = {
					change_variable = {
						which = tf_chinese_tapestry_grand
						value = -1
					}
				}
				ROOT = {
					add_artifact = chinese_tapestry_grand
					new_artifact = {
						set_name="chinese_tapestry_grand_name"
						set_original_owner = FROM
					}
				}
			}
			1 = {
				modifier = {
					factor = 0
					NOT = {
						check_variable = {
							which = tf_art_of_war
							value = 1
						}
					}
				}
				hidden_tooltip = {
					change_variable = {
						which = tf_art_of_war
						value = -1
					}
				}
				ROOT = {
					new_artifact = {
						set_original_owner = FROM
					}
				}
			}
			1 = {
				modifier = {
					factor = 0
					NOT = {
						check_variable = {
							which = tf_classic_of_poetry
							value = 1
						}
					}
				}
				hidden_tooltip = {
					change_variable = {
						which = tf_classic_of_poetry
						value = -1
					}
				}
				ROOT = {
					new_artifact = {
						set_original_owner = FROM
					}
				}
			}
			1 = {
				modifier = {
					factor = 0
					NOT = {
						check_variable = {
							which = tf_chinese_book_health
							value = 1
						}
					}
				}
				hidden_tooltip = {
					change_variable = {
						which = tf_chinese_book_health
						value = -1
					}
				}
				ROOT = {
					add_artifact = chinese_book_health
					new_artifact = {
						set_name="chinese_book_health_name"
						set_original_owner = FROM
					}
				}
			}
			1 = {
				modifier = {
					factor = 0
					NOT = {
						check_variable = {
							which = tf_chinese_book_law
							value = 1
						}
					}
				}
				hidden_tooltip = {
					change_variable = {
						which = tf_chinese_book_law
						value = -1
					}
				}
				ROOT = {
					new_artifact = {
						set_name="chinese_book_law_name"
						set_original_owner = FROM
					}
				}
			}
			1 = {
				modifier = {
					factor = 0
					NOT = {
						check_variable = {
							which = tf_chinese_book_history
							value = 1
						}
					}
				}
				hidden_tooltip = {
					change_variable = {
						which = tf_chinese_book_history
						value = -1
					}
				}
				ROOT = {
					add_artifact = chinese_book_history
					new_artifact = {
						set_name="chinese_book_history_name"
						set_original_owner = FROM
					}
				}
			}
			1 = {
				modifier = {
					factor = 0
					NOT = {
						check_variable = {
							which = tf_chinese_book_economy
							value = 1
						}
					}
				}
				hidden_tooltip = {
					change_variable = {
						which = tf_chinese_book_economy
						value = -1
					}
				}
				ROOT = {
					add_artifact = chinese_book_economy
					new_artifact = {
						set_name="chinese_book_economy_name"
						set_original_owner = FROM
					}
				}
			}
			1 = {
				modifier = {
					factor = 0
					NOT = {
						check_variable = {
							which = tf_art_of_war_page
							value = 1
						}
					}
				}
				hidden_tooltip = {
					change_variable = {
						which = tf_art_of_war_page
						value = -1
					}
				}
				ROOT = {
					add_artifact = art_of_war_page
					new_artifact = {
						set_original_owner = FROM
					}
				}
			}
			1 = {
				modifier = {
					factor = 0
					NOT = {
						check_variable = {
							which = tf_random_world_sword
							value = 1
						}
					}
				}
				hidden_tooltip = {
					change_variable = {
						which = tf_random_world_sword
						value = -1
					}
				}
				ROOT = {
					add_artifact = random_world_sword
					new_artifact = {
						random_list = {
							10 = {
								set_name="random_world_sword_1_FROM"
								set_description = "random_world_sword_desc_1"
							}
							10 = {
								set_name="random_world_sword_2_FROM"
								set_description = "random_world_sword_desc_2"
							}
							10 = {
								set_name="random_world_sword_3_FROM"
								set_description = "random_world_sword_desc_3"
							}
							10 = {
								set_name="random_world_sword_4_FROM"
								set_description = "random_world_sword_desc_4"
							}
							10 = {
								set_name="random_world_sword_5_FROM"
								set_description = "random_world_sword_desc_5"
							}
							10 = {
								set_name="random_world_sword_6_FROM"
								set_description = "random_world_sword_desc_6"
							}
						}
						random_list = {
							10 = {
								set_picture = "GFX_sword_golden"
							}
							10 = {
								set_picture = "GFX_sword_of_heroes"
							}
							10 = {
								set_picture = "GFX_sword_engraved"
							}
							10 = {
								set_picture = "GFX_sword_T3_glow_green"
							}
							10 = {
								set_picture = "GFX_sword_T3_glow_purple"
							}
							10 = {
								set_picture = "GFX_sword_T3_glow_red"
							}
						}
						set_original_owner = FROM
					}
				}
			}
			1 = {
				modifier = {
					factor = 0
					NOT = {
						check_variable = {
							which = tf_random_world_armor
							value = 1
						}
					}
				}
				hidden_tooltip = {
					change_variable = {
						which = tf_random_world_armor
						value = -1
					}
				}
				ROOT = {
					add_artifact = random_world_armor
					new_artifact = {
						random_list = {
								10 = {
									set_name="random_world_armor_1_FROM"
									set_description = "random_world_armor_desc_1"
								}
								10 = {
									set_name="random_world_armor_2_FROM"
									set_description = "random_world_armor_desc_2"
								}
								10 = {
									set_name="random_world_armor_3_FROM"
									set_description = "random_world_armor_desc_3"
								}
								10 = {
									set_name="random_world_armor_4_FROM"
									set_description = "random_world_armor_desc_4"
								}
								10 = {
									set_name="random_world_armor_5_FROM"
									set_description = "random_world_armor_desc_5"
								}
						}
						random_list = {
							10 = {
								set_picture = "GFX_guardian_armor"
							}
							10 = {
								set_picture = "GFX_champion_armor"
							}
							10 = {
								set_picture = "GFX_warden_armor"
							}
						}
						set_original_owner = FROM
					}
				}
			}
		}
		zero_everything_negative_effect = yes
	}
	
	clr_character_flag = treasure_fleet_artifact_naming_flag
}

### Cleanup

clean_up_old_treasure_fleet_effect = {
	clr_global_flag = preparing_treasure_fleet
	clr_global_flag = treasure_fleet_is_active
	hidden_tooltip = {
		# Alphabetical!
		set_variable = {
			which = tf_administrator # Scholar-Bureaucrat
			value = 0
		}
		set_variable = {
			which = tf_art_of_war
			value = 0
		}
		set_variable = {
			which = tf_art_of_war_page
			value = 0
		}
		set_variable = {
			which = tf_chinese_arm_protector
			value = 0
		}
		set_variable = {
			which = tf_chinese_artwork
			value = 0
		}
		set_variable = {
			which = tf_chinese_book_economy
			value = 0
		}
		set_variable = {
			which = tf_chinese_book_health
			value = 0
		}
		set_variable = {
			which = tf_chinese_book_history
			value = 0
		}
		set_variable = {
			which = tf_chinese_book_law
			value = 0
		}
		set_variable = {
			which = tf_chinese_bronze_sculpture
			value = 0
		}
		set_variable = {
			which = tf_chinese_calligraphy
			value = 0
		}
		set_variable = {
			which = tf_chinese_ceremonial_robes
			value = 0
		}
		set_variable = {
			which = tf_chinese_crossbow
			value = 0
		}
		set_variable = {
			which = tf_chinese_dragon_amulet
			value = 0
		}
		set_variable = {
			which = tf_chinese_ji
			value = 0
		}
		set_variable = {
			which = tf_chinese_painting_of_glitterhoof
			value = 0
		}
		#set_variable = {
		#	which = tf_chinese_prev_emperor_sculpture
		#	value = 0
		#}
		set_variable = {
			which = tf_chinese_sculpture
			value = 0
		}
		set_variable = {
			which = tf_chinese_serpent_spear
			value = 0
		}
		set_variable = {
			which = tf_chinese_tapestry
			value = 0
		}
		set_variable = {
			which = tf_chinese_tapestry_grand
			value = 0
		}
		set_variable = {
			which = tf_classic_of_poetry
			value = 0
		}
		set_variable = {
			which = tf_courtesan
			value = 0
		}
		set_variable = {
			which = tf_eunuch
			value = 0
		}
		set_variable = {
			which = tf_immigrants
			value = 0
		}
		set_variable = {
			which = tf_jade_dragon
			value = 0
		}
		set_variable = {
			which = tf_jd_administrative_outpost
			value = 0
		}
		set_variable = {
			which = tf_jd_blast_furnace
			value = 0
		}
		set_variable = {
			which = tf_jd_dry_docks
			value = 0
		}
		set_variable = {
			which = tf_jd_fireworks_guild
			value = 0
		}
		set_variable = {
			which = tf_jd_paper_mill
			value = 0
		}
		set_variable = {
			which = tf_jian_sword
			value = 0
		}
		set_variable = {
			which = tf_master_engineer
			value = 0
		}
		set_variable = {
			which = tf_peace_deal_with_china
			value = 0
		}
		set_variable = {
			which = tf_chinese_imperial_trade_contract
			value = 0
		}
		set_variable = {
			which = tf_noble
			value = 0
		}
		set_variable = {
			which = tf_physician
			value = 0
		}
		set_variable = {
			which = tf_random_world_armor
			value = 0
		}
		set_variable = {
			which = tf_random_world_sword
			value = 0
		}
		set_variable = {
			which = tf_scholar
			value = 0
		}
		set_variable = {
			which = tf_siege_engineer
			value = 0
		}
		set_variable = {
			which = tf_silk_shroud
			value = 0
		}
		set_variable = {
			which = tf_soldier
			value = 0
		}
		set_variable = {
			which = tf_strategist
			value = 0
		}
		set_variable = {
			which = tf_supplies
			value = 0
		}
		set_variable = {
			which = tf_water_clock
			value = 0
		}
		set_variable = {
			which = treasure_fleet_army_strength
			value = 0
		}
		set_variable = {
			which = treasure_fleet_wealth
			value = 0
		}
		
		# Clean up all TF flags (except the Sunrise Invasion and TF Invasion ones)
		clr_province_flag = treasure_fleet_voyage_flag
		clr_province_flag = treasure_fleet_going_to_bengal
		clr_province_flag = treasure_fleet_going_to_borneo
		clr_province_flag = treasure_fleet_going_to_champa
		clr_province_flag = treasure_fleet_going_to_china
		clr_province_flag = treasure_fleet_going_to_dagon
		clr_province_flag = treasure_fleet_going_to_eastern_india
		clr_province_flag = treasure_fleet_going_to_japan
		clr_province_flag = treasure_fleet_going_to_java
		clr_province_flag = treasure_fleet_going_to_korea
		clr_province_flag = treasure_fleet_going_to_lamuri
		clr_province_flag = treasure_fleet_going_to_lanka
		clr_province_flag = treasure_fleet_going_to_lavo
		clr_province_flag = treasure_fleet_going_to_maynila
		clr_province_flag = treasure_fleet_going_to_oman
		clr_province_flag = treasure_fleet_going_to_palembang
		clr_province_flag = treasure_fleet_going_to_persian_gulf
		clr_province_flag = treasure_fleet_going_to_red_sea
		clr_province_flag = treasure_fleet_going_to_ryukyu
		clr_province_flag = treasure_fleet_going_to_sindh
		clr_province_flag = treasure_fleet_going_to_socotra
		clr_province_flag = treasure_fleet_going_to_temasek
		clr_province_flag = treasure_fleet_going_to_western_india
		clr_province_flag = treasure_fleet_in_bengal
		clr_province_flag = treasure_fleet_in_borneo
		clr_province_flag = treasure_fleet_in_champa
		clr_province_flag = treasure_fleet_in_china
		clr_province_flag = treasure_fleet_in_dagon
		clr_province_flag = treasure_fleet_in_eastern_india
		clr_province_flag = treasure_fleet_in_japan
		clr_province_flag = treasure_fleet_in_java
		clr_province_flag = treasure_fleet_in_korea
		clr_province_flag = treasure_fleet_in_lamuri
		clr_province_flag = treasure_fleet_in_lanka
		clr_province_flag = treasure_fleet_in_lavo
		clr_province_flag = treasure_fleet_in_maynila
		clr_province_flag = treasure_fleet_in_oman
		clr_province_flag = treasure_fleet_in_palembang
		clr_province_flag = treasure_fleet_in_persian_gulf
		clr_province_flag = treasure_fleet_in_red_sea
		clr_province_flag = treasure_fleet_in_ryukyu
		clr_province_flag = treasure_fleet_in_sindh
		clr_province_flag = treasure_fleet_in_socotra
		clr_province_flag = treasure_fleet_in_temasek
		clr_province_flag = treasure_fleet_in_western_india
		clr_province_flag = treasure_fleet_is_going_home
		clr_province_flag = treasure_fleet_port_flag
		clr_province_flag = treasure_fleet_sunrise_invasion_flag
	}
}

abort_treasure_fleet_for_everyone_effect = {
	clr_global_flag = preparing_treasure_fleet
	clr_province_flag = abort_treasure_fleet_asap
	any_player = {
		limit = {
			NOT = {
				trait = treasure_fleet_voyage
			}
		}
		character_event = { id = treasurefleet.502 } # Inform the world
	}
	any_character = { # Expensive, but necessary...
		limit = {
			OR = {
				trait = treasure_fleet_voyage
				has_landed_title = d_treasure_fleet
			}
		}
		character_event = { id = treasurefleet.501 } # Abort the thing!
	}
	clean_up_old_treasure_fleet_effect = yes
	clr_global_flag = treasure_fleet_is_active
}

take_tf_wealth_effect = {
	if = {
		limit = {
			2753 = { # Hangzhou
				check_variable = {
					which = treasure_fleet_wealth
					value = 1
				}
			}
		}
		while = {
			limit = {
				2753 = { # Hangzhou
					check_variable = {
						which = treasure_fleet_wealth
						value = 1
					}
				}
			}
			2753 = { # Hangzhou
				change_variable = {
					which = treasure_fleet_wealth
					value = -1
				}
			}
			wealth = 100
		}
	}
}

create_chinese_courtesan_no_children_effect = { # For the Treasure Fleet
	if = {
		limit = {
			has_chinese_or_historical_culture_for_chinese_imperial_trigger = yes
			can_have_confucian_bureaucracy_and_eastern_imperial_only_religion_trigger = yes
		}
		random_list = {
			# Base randomization
			25 = {
				create_random_diplomat = {
					age = 25
					dynasty = actually_culture
					religion = event_target:tf_character_home_province
					culture = event_target:tf_character_home_province
					female = yes
					health = 7
					random_traits = no
					attributes = {
						martial = 1
						diplomacy = 4
						stewardship = 2
						intrigue = 3
						learning = 2
					}
				}
			}
			50 = {
				create_random_intriguer = {
					age = 25
					dynasty = actually_culture
					religion = event_target:tf_character_home_province
					culture = event_target:tf_character_home_province
					female = yes
					health = 7
					random_traits = no
					attributes = {
						martial = 1
						diplomacy = 3
						stewardship = 2
						intrigue = 4
						learning = 2
					}
				}
			}
			25 = {
				create_random_steward = {
					age = 25
					dynasty = actually_culture
					religion = event_target:tf_character_home_province
					culture = event_target:tf_character_home_province
					female = yes
					health = 7
					random_traits = no
					attributes = {
						martial = 1
						diplomacy = 2
						stewardship = 4
						intrigue = 2
						learning = 3
					}
				}
			}
		}
	}
	else = {
		random_list = {
			# Base randomization
			25 = {
				create_random_diplomat = {
					age = 25
					dynasty = actually_culture
					religion = confucian
					culture = han
					female = yes
					health = 7
					random_traits = no
					attributes = {
						martial = 1
						diplomacy = 4
						stewardship = 2
						intrigue = 3
						learning = 2
					}
				}
			}
			50 = {
				create_random_intriguer = {
					age = 25
					dynasty = actually_culture
					religion = confucian
					culture = han
					female = yes
					health = 7
					random_traits = no
					attributes = {
						martial = 1
						diplomacy = 3
						stewardship = 2
						intrigue = 4
						learning = 2
					}
				}
			}
			25 = {
				create_random_steward = {
					age = 25
					dynasty = actually_culture
					religion = confucian
					culture = han
					female = yes
					health = 7
					random_traits = no
					attributes = {
						martial = 1
						diplomacy = 2
						stewardship = 4
						intrigue = 2
						learning = 3
					}
				}
			}
		}
	}
	new_character = {
		# Age randomization
		random_list = {
			1 = {
				add_age = 10
			}
			2 = {
				add_age = 9
			}
			3 = {
				add_age = 8
			}
			4 = {
				add_age = 7
			}
			5 = {
				add_age = 6
			}
			6 = {
				add_age = 5
			}
			7 = {
				add_age = 3
			}
			8 = {
				add_age = 2
			}
			9 = {
				add_age = 1
			}
			10 = {}
			2 = {
				add_age = -9
			}
			3 = {
				add_age = -8
			}
			4 = {
				add_age = -7
			}
			5 = {
				add_age = -6
			}
			6 = {
				add_age = -5
			}
			7 = {
				add_age = -3
			}
			8 = {
				add_age = -2
			}
			9 = {
				add_age = -1
			}
		}
		# Religion randomization
		random_list = {
			50 = {}
			25 = {
				religion = confucian
			}
			20 = {
				religion = taoist
			}
			4 = {
				religion = buddhist
			}
			1 = {
				religion = nestorian
			}
		}
		# Courtesans are not ugly, but are not certain to be attractive
		random_list = {
			10 = {
				add_trait = fair
			}
			5 = {
				add_trait = fair
				add_trait = groomed
			}
			85 = {
				add_trait = groomed
			}
		}
		# Lifestyle trait
		random_list = {
			25 = {
				add_trait = seductress
			}
			25 = {
				add_trait = hedonist
			}
			25 = {
				add_trait = socializer
			}
			25 = {
				add_trait = schemer
			}
		}
		# Somewhat likely to be Lustful
		random = {
			chance = 50
			add_trait = lustful
		}
		# Genetic traits
		random_list = {
			80 = {}
			1 = {
				add_trait = genius
			}
			2 = {
				add_trait = quick
			}
			2 = {
				add_trait = slow
			}
			1 = {
				add_trait = imbecile
			}
			5 = {
				add_trait = lefthanded
			}
			1 = {
				add_trait = strong
			}
			1 = {
				add_trait = giant
			}
			2 = {
				add_trait = lisp
			}
			2 = {
				add_trait = stutter
			}
		}
		# Non-genetic traits
		random_list = {
			50 = {}
			2 = {
				add_trait = robust
			}
			2 = {
				add_trait = sturdy
			}
			2 = {
				add_trait = feeble
			}
			5 = {
				add_trait = shrewd
			}
			5 = {
				add_trait = dull
			}
		}
		# One random trait
		random_list = {
			2 = {
				add_trait = poet
			}
			5 = {
				add_trait = temperate
			}
			1 = {
				add_trait = charitable
			}
			2 = {
				add_trait = diligent
			}
			2 = {
				add_trait = patient
			}
			2 = {
				add_trait = kind
			}
			5 = {
				add_trait = humble
			}
			2 = {
				add_trait = gluttonous
			}
			5 = {
				add_trait = greedy
			}
			2 = {
				add_trait = slothful
			}
			2 = {
				add_trait = wroth
			}
			5 = {
				add_trait = envious
			}
			2 = {
				add_trait = proud
			}
			5 = {
				add_trait = ambitious
			}
			5 = {
				add_trait = arbitrary
			}
			2 = {
				add_trait = brave
			}
			1 = {
				add_trait = content
			}
			2 = {
				add_trait = craven
			}
			2 = {
				add_trait = cruel
			}
			5 = {
				add_trait = cynical
			}
			5 = {
				add_trait = deceitful
			}
			2 = {
				add_trait = erudite
			}
			5 = {
				add_trait = gregarious
			}
			1 = {
				add_trait = honest
			}
			1 = {
				add_trait = just
			}
			5 = {
				add_trait = paranoid
			}
			5 = {
				add_trait = shy
			}
			1 = {
				add_trait = stubborn
			}
			1 = {
				add_trait = trusting
			}
			1 = {
				add_trait = zealous
			}
		}
		# Another random trait
		random_list = {
			2 = {
				add_trait = poet
			}
			5 = {
				add_trait = temperate
			}
			1 = {
				add_trait = charitable
			}
			2 = {
				add_trait = diligent
			}
			2 = {
				add_trait = patient
			}
			2 = {
				add_trait = kind
			}
			5 = {
				add_trait = humble
			}
			2 = {
				add_trait = gluttonous
			}
			5 = {
				add_trait = greedy
			}
			2 = {
				add_trait = slothful
			}
			2 = {
				add_trait = wroth
			}
			5 = {
				add_trait = envious
			}
			2 = {
				add_trait = proud
			}
			5 = {
				add_trait = ambitious
			}
			5 = {
				add_trait = arbitrary
			}
			2 = {
				add_trait = brave
			}
			1 = {
				add_trait = content
			}
			2 = {
				add_trait = craven
			}
			2 = {
				add_trait = cruel
			}
			5 = {
				add_trait = cynical
			}
			5 = {
				add_trait = deceitful
			}
			2 = {
				add_trait = erudite
			}
			5 = {
				add_trait = gregarious
			}
			1 = {
				add_trait = honest
			}
			1 = {
				add_trait = just
			}
			5 = {
				add_trait = paranoid
			}
			5 = {
				add_trait = shy
			}
			1 = {
				add_trait = stubborn
			}
			1 = {
				add_trait = trusting
			}
			1 = {
				add_trait = zealous
			}
		}
		# Smaller chance of a third random trait
		random = {
			chance = 50
			random_list = {
				2 = {
					add_trait = poet
				}
				5 = {
					add_trait = temperate
				}
				1 = {
					add_trait = charitable
				}
				2 = {
					add_trait = diligent
				}
				2 = {
					add_trait = patient
				}
				2 = {
					add_trait = kind
				}
				5 = {
					add_trait = humble
				}
				2 = {
					add_trait = gluttonous
				}
				5 = {
					add_trait = greedy
				}
				2 = {
					add_trait = slothful
				}
				2 = {
					add_trait = wroth
				}
				5 = {
					add_trait = envious
				}
				2 = {
					add_trait = proud
				}
				5 = {
					add_trait = ambitious
				}
				5 = {
					add_trait = arbitrary
				}
				2 = {
					add_trait = brave
				}
				1 = {
					add_trait = content
				}
				2 = {
					add_trait = craven
				}
				2 = {
					add_trait = cruel
				}
				5 = {
					add_trait = cynical
				}
				5 = {
					add_trait = deceitful
				}
				2 = {
					add_trait = erudite
				}
				5 = {
					add_trait = gregarious
				}
				1 = {
					add_trait = honest
				}
				1 = {
					add_trait = just
				}
				5 = {
					add_trait = paranoid
				}
				5 = {
					add_trait = shy
				}
				1 = {
					add_trait = stubborn
				}
				1 = {
					add_trait = trusting
				}
				1 = {
					add_trait = zealous
				}
			}
		}
		# Very small chance of a fourth (or third) random trait
		random = {
			chance = 10
			random_list = {
				2 = {
					add_trait = poet
				}
				5 = {
					add_trait = temperate
				}
				1 = {
					add_trait = charitable
				}
				2 = {
					add_trait = diligent
				}
				2 = {
					add_trait = patient
				}
				2 = {
					add_trait = kind
				}
				5 = {
					add_trait = humble
				}
				2 = {
					add_trait = gluttonous
				}
				5 = {
					add_trait = greedy
				}
				2 = {
					add_trait = slothful
				}
				2 = {
					add_trait = wroth
				}
				5 = {
					add_trait = envious
				}
				2 = {
					add_trait = proud
				}
				5 = {
					add_trait = ambitious
				}
				5 = {
					add_trait = arbitrary
				}
				2 = {
					add_trait = brave
				}
				1 = {
					add_trait = content
				}
				2 = {
					add_trait = craven
				}
				2 = {
					add_trait = cruel
				}
				5 = {
					add_trait = cynical
				}
				5 = {
					add_trait = deceitful
				}
				2 = {
					add_trait = erudite
				}
				5 = {
					add_trait = gregarious
				}
				1 = {
					add_trait = honest
				}
				1 = {
					add_trait = just
				}
				5 = {
					add_trait = paranoid
				}
				5 = {
					add_trait = shy
				}
				1 = {
					add_trait = stubborn
				}
				1 = {
					add_trait = trusting
				}
				1 = {
					add_trait = zealous
				}
			}
		}
		# Sexuality
		random = {
			chance = 10
			add_trait = homosexual
		}
		# Courtesans have certain occupational hazards...
		random_list = {
			95 = {}
			5 = {
				add_trait = lovers_pox
			}
		}
		# Save the event target
		save_event_target_as = not_a_dragon_bride
		set_character_flag = chinese_courtesan
	}
	
	if = {
		limit = {
			NOT = {
				trait = homosexual
			}
		}
		random = {
			chance = 5
			event_target:not_a_dragon_bride = {
				impregnate = 0
			}
		}
	}
}

create_tf_soldier_effect = {
	create_random_soldier = {
		age = 21
		female = 5 # TODO: Base on EoC's gender laws
		dynasty = none
		attributes = {
			diplomacy = 2
			martial = 7
			stewardship = 5
			intrigue = 4
			learning = 6
		}
		culture = event_target:tf_character_home_province
		religion = event_target:tf_character_home_province
		random_traits =	yes
	}
	new_character = {
		random = {
			chance = 10
			random_list = {
				1 = {
					add_trait = logistics_expert
				}
				1 = {
					add_trait = master_of_flame
				}
				1 = {
					add_trait = sapper
				}
				1 = {
					add_trait = levy_coordinator
				}
			}
		}
		save_event_target_as = new_tf_character
	}
}

create_tf_eunuch_effect = { # Eunuch; always male
	random_list = {
		50 = {
			create_random_priest = {
				age = 35
				female = no
				dynasty = none
				attributes = {
					diplomacy = 4
					martial = 2
					stewardship = 5
					intrigue = 4
					learning = 8
				}
				culture = event_target:tf_character_home_province
				religion = event_target:tf_character_home_province
				random_traits =	yes
			}
		}
		50 = {
			create_random_steward = {
				age = 35
				female = no
				dynasty = none
				attributes = {
					diplomacy = 3
					martial = 3
					stewardship = 8
					intrigue = 4
					learning = 6
				}
				culture = event_target:tf_character_home_province
				religion = event_target:tf_character_home_province
				random_traits =	yes
			}
		}
		50 = {
			create_random_diplomat = {
				age = 35
				female = no
				dynasty = none
				attributes = {
					diplomacy = 8
					martial = 1
					stewardship = 5
					intrigue = 4
					learning = 6
				}
				culture = event_target:tf_character_home_province
				religion = event_target:tf_character_home_province
				random_traits =	yes
			}
		}
	}
	new_character = {
		add_trait = eunuch
		save_event_target_as = new_tf_character
	}
}