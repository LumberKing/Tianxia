decisions = {
	end_regency_no_pr = {
		only_playable = yes
		is_high_prio = yes
		
		potential = {
			has_japanese_government_trigger = yes
			
			OR = {
				controls_religion = yes
				real_tier = emperor
			}
			
			is_under_regency_trigger = yes
			
			NOT = {
				any_realm_lord = {
					OR = {
						AND = {
							ROOT = {
								is_the_tenno_trigger = yes
							}
							trait = japanese_regent
						}
						AND = {
							ROOT = {
								real_tier = emperor
								controls_religion = no
							}
							trait = japanese_regent2
						}
						AND = {
							ROOT = {
								is_ryukyuan_tenno_trigger = yes
							}
							trait = japanese_regent3
						}
					}
				}
			}
		}
		
		allow = {
			has_actual_regency_trigger = no
			war = no
			prestige >= 1000
		}
		
		effect = {
			if = {
				limit = {
					trait = under_regency
				}
				remove_trait = under_regency
			}
			
			else_if = {
				limit = {
					trait = under_regency2
				}
				remove_trait = under_regency2
			}
			
			else_if = {
				limit = {
					trait = under_regency3
				}
				remove_trait = under_regency3
			}
		}
		
		ai_will_do = {
			factor = 1000
		}
	}
	
	increase_lieges_regent_powers = {
		only_playable = yes
		ai_check_interval = 60
		
		potential = {
			i_am_appropriate_regent_trigger = yes
			liege = {
				primary_title = {
					NOT = {
						has_law = regency_power_law_6 # Already maxed out
					}
				}
			}
		}
		
		allow = {
			war = no
			has_actual_regency_trigger = no
			
			liege = {
				NOT = {
					has_character_modifier = recent_regent_power_change
				}
			}
			
			prestige >= 1000
		}
		
		effect = {
			prestige = -1000
			
			liege = {
				increase_regent_powers_effect = yes
				
				character_event = { id = soh.3513 } # Inform liege
				
				add_character_modifier = {
					modifier = recent_regent_power_change
					months = 120
				}
			}
		}
		
		ai_will_do = {
			factor = 1
			
			trigger = {
				NOT = {
					trait = content
				}
			}
			
			mult_modifier = {
				factor = 0.01
				always = yes
			}
			
			mult_modifier = {
				factor = 0.1
				trait = humble
			}
			
			mult_modifier = {
				factor = 0.1
				trait = just
			}
			
			mult_modifier = {
				factor = 10
				trait = ambitious
			}
			
			mult_modifier = {
				factor = 5
				trait = envious
			}
			
			mult_modifier = {
				factor = 2
				trait = proud
			}
			
			mult_modifier = {
				factor = 5
				trait = deceitful
			}
		}
	}
	
	decrese_my_regents_powers = {
		only_playable = yes
		ai_check_interval = 60
		
		potential = {
			OR = {
				independent = yes
				controls_religion = yes
			}
			
			is_under_regency_trigger = yes
			
			primary_title = {
				NOT = {
					has_law = regency_power_law_0
				}
			}
			
			regent = {
				i_am_appropriate_regent_trigger = yes
			}
		}
		
		allow = {
			war = no
			has_actual_regency_trigger = no
			
			NOT = {
				has_character_modifier = recent_regent_power_change
			}
			
			prestige >= 1000
		}
		
		effect = {
			prestige = -1000
			
			decrease_regent_powers_effect = yes
			
			regent = {
				character_event = { id = soh.3514 } # Inform regent
			}
			
			add_character_modifier = {
				modifier = recent_regent_power_change
				months = 120
			}
		}
		
		ai_will_do = {
			factor = 1
			
			trigger = {
				NOT = {
					trait = content
				}
			}
			
			mult_modifier = {
				factor = 0.01
				always = yes
			}
			
			mult_modifier = {
				factor = 0.1
				trait = humble
			}
			
			mult_modifier = {
				factor = 0.1
				trait = just
			}
			
			mult_modifier = {
				factor = 10
				trait = ambitious
			}
			
			mult_modifier = {
				factor = 5
				trait = envious
			}
			
			mult_modifier = {
				factor = 2
				trait = proud
			}
			
			mult_modifier = {
				factor = 5
				trait = deceitful
			}
		}
	}
	
	regent_take_money = {
		only_playable = yes
		ai = no
		
		potential = {
			i_am_appropriate_regent_trigger = yes
			regent_take_money_enabled_trigger = yes
		}
		
		allow = {
			has_regent = no
			prestige = 250
			liege = {
				NOT = {
					has_opinion_modifier = {
						who = ROOT
						modifier = japanese_regent_took_money
					}
				}
			}
			liege = {
				scaled_wealth = {
					value = 1
					min = 25
				}
			}
		}
		
		effect = {
			prestige = -250
			
			save_event_target_as = meddling_character
			
			liege = {
				character_event = { id = soh.3524 } # Inform the liege
			}
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	regent_force_actual_regency = {
		only_playable = yes
		ai = no
		
		potential = {
			i_am_appropriate_regent_trigger = yes
			regent_force_actual_regency_enabled_trigger = yes
		}
		
		allow = {
			prestige = 1000
			has_regent = no
			liege = {
				NOT = {
					has_opinion_modifier = {
						who = ROOT
						modifier = japanese_regent_forced_actual_regency
					}
				}
			}
			liege = {
				war = no
				has_actual_regency_trigger = no # Irrelevant
			}
		}
		
		effect = {
			prestige = -1000
			
			save_event_target_as = meddling_character
			
			liege = {
				character_event = { id = soh.3525 } # Inform the liege
			}
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	overthrow_my_regent_decision = {
		only_playable = yes
		is_high_prio = yes
		ai_check_interval = 3
		
		potential = {
			is_the_tenno_trigger = yes
			trait = under_regency
			NOT = { has_character_flag = overthrow_my_regent_decision_taken }
		}
		
		allow = {
			war = no
			has_actual_regency_trigger = no
			
			# We've got a good amount of prestige; this hopefully prevents weak historical regents from being overthrown in an instant
			trigger_if = {
				limit = {
					primary_title = {
						has_law = regency_power_law_0
					}
				}
				
				trigger_if = {
					limit = {
						regent = {
							custom_tooltip = {
								text = has_regency_bloodline
								any_owned_bloodline = {
									has_bloodline_flag = regency_bloodline
									bloodline_is_active_for = PREV
								}
							}
						}
					}
					
					prestige >= 2000
				}
				
				trigger_else = {
					prestige >= 1000
				}
			}
			
			trigger_else_if = {
				limit = {
					primary_title = {
						has_law = regency_power_law_1
					}
				}
				
				trigger_if = {
					limit = {
						regent = {
							custom_tooltip = {
								text = has_regency_bloodline
								any_owned_bloodline = {
									has_bloodline_flag = regency_bloodline
									bloodline_is_active_for = PREV
								}
							}
						}
					}
					
					prestige >= 4000
				}
				
				trigger_else = {
					prestige >= 2000
				}
			}
			
			trigger_else_if = {
				limit = {
					primary_title = {
						has_law = regency_power_law_2
					}
				}
				
				trigger_if = {
					limit = {
						regent = {
							custom_tooltip = {
								text = has_regency_bloodline
								any_owned_bloodline = {
									has_bloodline_flag = regency_bloodline
									bloodline_is_active_for = PREV
								}
							}
						}
					}
					
					prestige >= 6000
				}
				
				trigger_else = {
					prestige >= 3000
				}
			}
			
			trigger_else_if = {
				limit = {
					primary_title = {
						has_law = regency_power_law_3
					}
				}
				
				trigger_if = {
					limit = {
						regent = {
							custom_tooltip = {
								text = has_regency_bloodline
								any_owned_bloodline = {
									has_bloodline_flag = regency_bloodline
									bloodline_is_active_for = PREV
								}
							}
						}
					}
					
					prestige >= 8000
				}
				
				trigger_else = {
					prestige >= 4000
				}
			}
			
			trigger_else_if = {
				limit = {
					primary_title = {
						has_law = regency_power_law_4
					}
				}
				
				trigger_if = {
					limit = {
						regent = {
							custom_tooltip = {
								text = has_regency_bloodline
								any_owned_bloodline = {
									has_bloodline_flag = regency_bloodline
									bloodline_is_active_for = PREV
								}
							}
						}
					}
					
					prestige >= 10000
				}
				
				trigger_else = {
					prestige >= 5000
				}
			}
			
			trigger_else_if = {
				limit = {
					primary_title = {
						has_law = regency_power_law_5
					}
				}
				
				trigger_if = {
					limit = {
						regent = {
							custom_tooltip = {
								text = has_regency_bloodline
								any_owned_bloodline = {
									has_bloodline_flag = regency_bloodline
									bloodline_is_active_for = PREV
								}
							}
						}
					}
					
					prestige >= 12000
				}
				
				trigger_else = {
					prestige >= 6000
				}
			}
			
			trigger_else_if = {
				limit = {
					primary_title = {
						has_law = regency_power_law_6
					}
				}
				
				trigger_if = {
					limit = {
						regent = {
							custom_tooltip = {
								text = has_regency_bloodline
								any_owned_bloodline = {
									has_bloodline_flag = regency_bloodline
									bloodline_is_active_for = PREV
								}
							}
						}
					}
					
					prestige >= 14000
				}
				
				trigger_else = {
					prestige >= 7000
				}
			}
			
			will_liege_enforce_peace = no
			has_liege_enforced_peace = no
			NOT = {
				regent = {
					reverse_has_truce = ROOT
				}
			}
			regent = {
				is_landed = yes
				OR = {
					trait = japanese_regent
					NOT = {
						ROOT = {
							any_realm_lord = {
								trait = japanese_regent
							}
						}
					}
				}
				NOT = {
					trait = treasure_fleet_preparation
				}
			}
			custom_tooltip = {
				text = is_not_busy_trigger_tooltip
				hidden_tooltip = { NOT = { has_character_flag = do_not_disturb } }
			}
			NOT = {
				trait = treasure_fleet_preparation
			}
		}
		
		effect = {
			set_character_flag = overthrow_my_regent_decision_taken
			
			primary_title = {
				trigger_switch = {
					on_trigger = has_law
					
					regency_power_law_0 = {
						ROOT = {
							if = {
								limit = {
									regent = {
										custom_tooltip = {
											text = has_regency_bloodline
											any_owned_bloodline = {
												has_bloodline_flag = regency_bloodline
												bloodline_is_active_for = PREV
											}
										}
									}
								}
								
								prestige = -2000
							}
							
							else = {
								prestige = -1000
							}
						}
					}
					
					regency_power_law_1 = {
						ROOT = {
							if = {
								limit = {
									regent = {
										custom_tooltip = {
											text = has_regency_bloodline
											any_owned_bloodline = {
												has_bloodline_flag = regency_bloodline
												bloodline_is_active_for = PREV
											}
										}
									}
								}
								
								prestige = -4000
							}
							
							else = {
								prestige = -2000
							}
						}
					}
					
					regency_power_law_2 = {
						ROOT = {
							if = {
								limit = {
									regent = {
										custom_tooltip = {
											text = has_regency_bloodline
											any_owned_bloodline = {
												has_bloodline_flag = regency_bloodline
												bloodline_is_active_for = PREV
											}
										}
									}
								}
								
								prestige = -6000
							}
							
							else = {
								prestige = -3000
							}
						}
					}
					
					regency_power_law_3 = {
						ROOT = {
							if = {
								limit = {
									regent = {
										custom_tooltip = {
											text = has_regency_bloodline
											any_owned_bloodline = {
												has_bloodline_flag = regency_bloodline
												bloodline_is_active_for = PREV
											}
										}
									}
								}
								
								prestige = -8000
							}
							
							else = {
								prestige = -4000
							}
						}
					}
					
					regency_power_law_4 = {
						ROOT = {
							if = {
								limit = {
									regent = {
										custom_tooltip = {
											text = has_regency_bloodline
											any_owned_bloodline = {
												has_bloodline_flag = regency_bloodline
												bloodline_is_active_for = PREV
											}
										}
									}
								}
								
								prestige = -10000
							}
							
							else = {
								prestige = -5000
							}
						}
					}
					
					regency_power_law_5 = {
						ROOT = {
							if = {
								limit = {
									regent = {
										custom_tooltip = {
											text = has_regency_bloodline
											any_owned_bloodline = {
												has_bloodline_flag = regency_bloodline
												bloodline_is_active_for = PREV
											}
										}
									}
								}
								
								prestige = -12000
							}
							
							else = {
								prestige = -6000
							}
						}
					}
					
					regency_power_law_6 = {
						ROOT = {
							if = {
								limit = {
									regent = {
										custom_tooltip = {
											text = has_regency_bloodline
											any_owned_bloodline = {
												has_bloodline_flag = regency_bloodline
												bloodline_is_active_for = PREV
											}
										}
									}
								}
								
								prestige = -14000
							}
							
							else = {
								prestige = -7000
							}
						}
					}
				}
			}
			
			if = {
				limit = {
					regent = {
						NOT = {
							leads_faction = faction_regency_loyalists
						}
					}
				}
				
				regent = {
					letter_event = { id = soh.3536 } # Non-faction version
				}
			}
			
			else = {
				regent = {
					letter_event = { id = soh.3545 } # Faction version
				}
			}
		}
		
		ai_will_do = {
			factor = 1
			
			# Reversed faction ultimatum logic, plus relative_power_to_liege checks if there isn't a faction
			trigger = {
				NOR = {
					regent = { 
						faction_power = {
							faction = faction_regency_loyalists
							power >= 1.5
						}
					}
					regent = {
						relative_power_to_liege >= 1.5
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				OR = {
					regent = { 
						faction_power = {
							faction = faction_regency_loyalists
							power >= 0.75
						}
					}
					regent = {
						relative_power_to_liege >= 0.75
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				OR = {
					regent = { 
						faction_power = {
							faction = faction_regency_loyalists
							power >= 1.0
						}
					}
					regent = {
						relative_power_to_liege >= 1.0
					}
				}
			}
			
			mult_modifier = { # If the liege is already fighting a regency war, slow it down to avoid war spam
				factor = 0.05
				regent = {
					any_war = {
						using_cb = take_over_regency_war
					}
				}
			}
		}
	}
	
	overthrow_my_regent_decision2 = {
		only_independent = yes
		is_high_prio = yes
		ai_check_interval = 3
		
		potential = {
			tier = emperor
			can_have_japanese_bureaucracy_and_feudal_trigger = yes
			trait = under_regency2
			NOT = { has_character_flag = overthrow_my_regent_decision_taken }
		}
		
		allow = {
			war = no
			has_actual_regency_trigger = no
			
			
			# We've got a good amount of prestige; this hopefully prevents weak historical regents from being overthrown in an instant
			trigger_if = {
				limit = {
					primary_title = {
						has_law = regency_power_law_0
					}
				}
				
				trigger_if = {
					limit = {
						regent = {
							custom_tooltip = {
								text = has_regency_bloodline
								any_owned_bloodline = {
									has_bloodline_flag = regency_bloodline
									bloodline_is_active_for = PREV
								}
							}
						}
					}
					
					prestige >= 2000
				}
				
				trigger_else = {
					prestige >= 1000
				}
			}
			
			trigger_else_if = {
				limit = {
					primary_title = {
						has_law = regency_power_law_1
					}
				}
				
				trigger_if = {
					limit = {
						regent = {
							custom_tooltip = {
								text = has_regency_bloodline
								any_owned_bloodline = {
									has_bloodline_flag = regency_bloodline
									bloodline_is_active_for = PREV
								}
							}
						}
					}
					
					prestige >= 4000
				}
				
				trigger_else = {
					prestige >= 2000
				}
			}
			
			trigger_else_if = {
				limit = {
					primary_title = {
						has_law = regency_power_law_2
					}
				}
				
				trigger_if = {
					limit = {
						regent = {
							custom_tooltip = {
								text = has_regency_bloodline
								any_owned_bloodline = {
									has_bloodline_flag = regency_bloodline
									bloodline_is_active_for = PREV
								}
							}
						}
					}
					
					prestige >= 6000
				}
				
				trigger_else = {
					prestige >= 3000
				}
			}
			
			trigger_else_if = {
				limit = {
					primary_title = {
						has_law = regency_power_law_3
					}
				}
				
				trigger_if = {
					limit = {
						regent = {
							custom_tooltip = {
								text = has_regency_bloodline
								any_owned_bloodline = {
									has_bloodline_flag = regency_bloodline
									bloodline_is_active_for = PREV
								}
							}
						}
					}
					
					prestige >= 8000
				}
				
				trigger_else = {
					prestige >= 4000
				}
			}
			
			trigger_else_if = {
				limit = {
					primary_title = {
						has_law = regency_power_law_4
					}
				}
				
				trigger_if = {
					limit = {
						regent = {
							custom_tooltip = {
								text = has_regency_bloodline
								any_owned_bloodline = {
									has_bloodline_flag = regency_bloodline
									bloodline_is_active_for = PREV
								}
							}
						}
					}
					
					prestige >= 10000
				}
				
				trigger_else = {
					prestige >= 5000
				}
			}
			
			trigger_else_if = {
				limit = {
					primary_title = {
						has_law = regency_power_law_5
					}
				}
				
				trigger_if = {
					limit = {
						regent = {
							custom_tooltip = {
								text = has_regency_bloodline
								any_owned_bloodline = {
									has_bloodline_flag = regency_bloodline
									bloodline_is_active_for = PREV
								}
							}
						}
					}
					
					prestige >= 12000
				}
				
				trigger_else = {
					prestige >= 6000
				}
			}
			
			trigger_else_if = {
				limit = {
					primary_title = {
						has_law = regency_power_law_6
					}
				}
				
				trigger_if = {
					limit = {
						regent = {
							custom_tooltip = {
								text = has_regency_bloodline
								any_owned_bloodline = {
									has_bloodline_flag = regency_bloodline
									bloodline_is_active_for = PREV
								}
							}
						}
					}
					
					prestige >= 14000
				}
				
				trigger_else = {
					prestige >= 7000
				}
			}
			NOT = {
				regent = {
					reverse_has_truce = ROOT
				}
			}
			regent = {
				is_landed = yes
				OR = {
					trait = japanese_regent2
					NOT = {
						ROOT = {
							any_realm_lord = {
								trait = japanese_regent2
							}
						}
					}
				}
			}
			custom_tooltip = {
				text = is_not_busy_trigger_tooltip
				hidden_tooltip = { NOT = { has_character_flag = do_not_disturb } }
			}
		}
		
		effect = {
			set_character_flag = overthrow_my_regent_decision_taken
			
			primary_title = {
				trigger_switch = {
					on_trigger = has_law
					
					regency_power_law_0 = {
						ROOT = {
							if = {
								limit = {
									regent = {
										custom_tooltip = {
											text = has_regency_bloodline
											any_owned_bloodline = {
												has_bloodline_flag = regency_bloodline
												bloodline_is_active_for = PREV
											}
										}
									}
								}
								
								prestige = -2000
							}
							
							else = {
								prestige = -1000
							}
						}
					}
					
					regency_power_law_1 = {
						ROOT = {
							if = {
								limit = {
									regent = {
										custom_tooltip = {
											text = has_regency_bloodline
											any_owned_bloodline = {
												has_bloodline_flag = regency_bloodline
												bloodline_is_active_for = PREV
											}
										}
									}
								}
								
								prestige = -4000
							}
							
							else = {
								prestige = -2000
							}
						}
					}
					
					regency_power_law_2 = {
						ROOT = {
							if = {
								limit = {
									regent = {
										custom_tooltip = {
											text = has_regency_bloodline
											any_owned_bloodline = {
												has_bloodline_flag = regency_bloodline
												bloodline_is_active_for = PREV
											}
										}
									}
								}
								
								prestige = -6000
							}
							
							else = {
								prestige = -3000
							}
						}
					}
					
					regency_power_law_3 = {
						ROOT = {
							if = {
								limit = {
									regent = {
										custom_tooltip = {
											text = has_regency_bloodline
											any_owned_bloodline = {
												has_bloodline_flag = regency_bloodline
												bloodline_is_active_for = PREV
											}
										}
									}
								}
								
								prestige = -8000
							}
							
							else = {
								prestige = -4000
							}
						}
					}
					
					regency_power_law_4 = {
						ROOT = {
							if = {
								limit = {
									regent = {
										custom_tooltip = {
											text = has_regency_bloodline
											any_owned_bloodline = {
												has_bloodline_flag = regency_bloodline
												bloodline_is_active_for = PREV
											}
										}
									}
								}
								
								prestige = -10000
							}
							
							else = {
								prestige = -5000
							}
						}
					}
					
					regency_power_law_5 = {
						ROOT = {
							if = {
								limit = {
									regent = {
										custom_tooltip = {
											text = has_regency_bloodline
											any_owned_bloodline = {
												has_bloodline_flag = regency_bloodline
												bloodline_is_active_for = PREV
											}
										}
									}
								}
								
								prestige = -12000
							}
							
							else = {
								prestige = -6000
							}
						}
					}
					
					regency_power_law_6 = {
						ROOT = {
							if = {
								limit = {
									regent = {
										custom_tooltip = {
											text = has_regency_bloodline
											any_owned_bloodline = {
												has_bloodline_flag = regency_bloodline
												bloodline_is_active_for = PREV
											}
										}
									}
								}
								
								prestige = -14000
							}
							
							else = {
								prestige = -7000
							}
						}
					}
				}
			}
			
			if = {
				limit = {
					regent = {
						NOT = {
							leads_faction = faction_regency_loyalists2
						}
					}
				}
				
				regent = {
					letter_event = { id = soh.3539 } # Non-faction version
				}
			}
			
			else = {
				regent = {
					letter_event = { id = soh.3549 } # Faction version
				}
			}
		}
		
		ai_will_do = {
			factor = 1
			
			# Reversed faction ultimatum logic, plus relative_power_to_liege checks if there isn't a faction
			trigger = {
				NOR = {
					regent = { 
						faction_power = {
							faction = faction_regency_loyalists2
							power >= 1.5
						}
					}
					regent = {
						relative_power_to_liege >= 1.5
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				OR = {
					regent = { 
						faction_power = {
							faction = faction_regency_loyalists2
							power >= 0.75
						}
					}
					regent = {
						relative_power_to_liege >= 0.75
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				OR = {
					regent = { 
						faction_power = {
							faction = faction_regency_loyalists2
							power >= 1.0
						}
					}
					regent = {
						relative_power_to_liege >= 1.0
					}
				}
			}
			
			mult_modifier = { # If the liege is already fighting a regency war, slow it down to avoid war spam
				factor = 0.05
				regent = {
					any_war = {
						using_cb = take_over_regency_war2
					}
				}
			}
		}
	}
	
	overthrow_my_regent_decision3 = {
		only_playable = yes
		is_high_prio = yes
		ai_check_interval = 3
		
		potential = {
			is_ryukyuan_tenno_trigger = yes
			trait = under_regency3
			NOT = { has_character_flag = overthrow_my_regent_decision_taken }
		}
		
		allow = {
			war = no
			has_actual_regency_trigger = no
			
			# We've got a good amount of prestige; this hopefully prevents weak historical regents from being overthrown in an instant
			trigger_if = {
				limit = {
					primary_title = {
						has_law = regency_power_law_0
					}
				}
				
				trigger_if = {
					limit = {
						regent = {
							custom_tooltip = {
								text = has_regency_bloodline
								any_owned_bloodline = {
									has_bloodline_flag = regency_bloodline
									bloodline_is_active_for = PREV
								}
							}
						}
					}
					
					prestige >= 2000
				}
				
				trigger_else = {
					prestige >= 1000
				}
			}
			
			trigger_else_if = {
				limit = {
					primary_title = {
						has_law = regency_power_law_1
					}
				}
				
				trigger_if = {
					limit = {
						regent = {
							custom_tooltip = {
								text = has_regency_bloodline
								any_owned_bloodline = {
									has_bloodline_flag = regency_bloodline
									bloodline_is_active_for = PREV
								}
							}
						}
					}
					
					prestige >= 4000
				}
				
				trigger_else = {
					prestige >= 2000
				}
			}
			
			trigger_else_if = {
				limit = {
					primary_title = {
						has_law = regency_power_law_2
					}
				}
				
				trigger_if = {
					limit = {
						regent = {
							custom_tooltip = {
								text = has_regency_bloodline
								any_owned_bloodline = {
									has_bloodline_flag = regency_bloodline
									bloodline_is_active_for = PREV
								}
							}
						}
					}
					
					prestige >= 6000
				}
				
				trigger_else = {
					prestige >= 3000
				}
			}
			
			trigger_else_if = {
				limit = {
					primary_title = {
						has_law = regency_power_law_3
					}
				}
				
				trigger_if = {
					limit = {
						regent = {
							custom_tooltip = {
								text = has_regency_bloodline
								any_owned_bloodline = {
									has_bloodline_flag = regency_bloodline
									bloodline_is_active_for = PREV
								}
							}
						}
					}
					
					prestige >= 8000
				}
				
				trigger_else = {
					prestige >= 4000
				}
			}
			
			trigger_else_if = {
				limit = {
					primary_title = {
						has_law = regency_power_law_4
					}
				}
				
				trigger_if = {
					limit = {
						regent = {
							custom_tooltip = {
								text = has_regency_bloodline
								any_owned_bloodline = {
									has_bloodline_flag = regency_bloodline
									bloodline_is_active_for = PREV
								}
							}
						}
					}
					
					prestige >= 10000
				}
				
				trigger_else = {
					prestige >= 5000
				}
			}
			
			trigger_else_if = {
				limit = {
					primary_title = {
						has_law = regency_power_law_5
					}
				}
				
				trigger_if = {
					limit = {
						regent = {
							custom_tooltip = {
								text = has_regency_bloodline
								any_owned_bloodline = {
									has_bloodline_flag = regency_bloodline
									bloodline_is_active_for = PREV
								}
							}
						}
					}
					
					prestige >= 12000
				}
				
				trigger_else = {
					prestige >= 6000
				}
			}
			
			trigger_else_if = {
				limit = {
					primary_title = {
						has_law = regency_power_law_6
					}
				}
				
				trigger_if = {
					limit = {
						regent = {
							custom_tooltip = {
								text = has_regency_bloodline
								any_owned_bloodline = {
									has_bloodline_flag = regency_bloodline
									bloodline_is_active_for = PREV
								}
							}
						}
					}
					
					prestige >= 14000
				}
				
				trigger_else = {
					prestige >= 7000
				}
			}
			
			will_liege_enforce_peace = no
			has_liege_enforced_peace = no
			NOT = {
				regent = {
					reverse_has_truce = ROOT
				}
			}
			regent = {
				is_landed = yes
				OR = {
					trait = japanese_regent3
					NOT = {
						ROOT = {
							any_realm_lord = {
								trait = japanese_regent3
							}
						}
					}
				}
				NOT = {
					trait = treasure_fleet_preparation
				}
			}
			custom_tooltip = {
				text = is_not_busy_trigger_tooltip
				hidden_tooltip = { NOT = { has_character_flag = do_not_disturb } }
			}
			NOT = {
				trait = treasure_fleet_preparation
			}
		}
		
		effect = {
			set_character_flag = overthrow_my_regent_decision_taken
			
			primary_title = {
				trigger_switch = {
					on_trigger = has_law
					
					regency_power_law_0 = {
						ROOT = {
							if = {
								limit = {
									regent = {
										custom_tooltip = {
											text = has_regency_bloodline
											any_owned_bloodline = {
												has_bloodline_flag = regency_bloodline
												bloodline_is_active_for = PREV
											}
										}
									}
								}
								
								prestige = -2000
							}
							
							else = {
								prestige = -1000
							}
						}
					}
					
					regency_power_law_1 = {
						ROOT = {
							if = {
								limit = {
									regent = {
										custom_tooltip = {
											text = has_regency_bloodline
											any_owned_bloodline = {
												has_bloodline_flag = regency_bloodline
												bloodline_is_active_for = PREV
											}
										}
									}
								}
								
								prestige = -4000
							}
							
							else = {
								prestige = -2000
							}
						}
					}
					
					regency_power_law_2 = {
						ROOT = {
							if = {
								limit = {
									regent = {
										custom_tooltip = {
											text = has_regency_bloodline
											any_owned_bloodline = {
												has_bloodline_flag = regency_bloodline
												bloodline_is_active_for = PREV
											}
										}
									}
								}
								
								prestige = -6000
							}
							
							else = {
								prestige = -3000
							}
						}
					}
					
					regency_power_law_3 = {
						ROOT = {
							if = {
								limit = {
									regent = {
										custom_tooltip = {
											text = has_regency_bloodline
											any_owned_bloodline = {
												has_bloodline_flag = regency_bloodline
												bloodline_is_active_for = PREV
											}
										}
									}
								}
								
								prestige = -8000
							}
							
							else = {
								prestige = -4000
							}
						}
					}
					
					regency_power_law_4 = {
						ROOT = {
							if = {
								limit = {
									regent = {
										custom_tooltip = {
											text = has_regency_bloodline
											any_owned_bloodline = {
												has_bloodline_flag = regency_bloodline
												bloodline_is_active_for = PREV
											}
										}
									}
								}
								
								prestige = -10000
							}
							
							else = {
								prestige = -5000
							}
						}
					}
					
					regency_power_law_5 = {
						ROOT = {
							if = {
								limit = {
									regent = {
										custom_tooltip = {
											text = has_regency_bloodline
											any_owned_bloodline = {
												has_bloodline_flag = regency_bloodline
												bloodline_is_active_for = PREV
											}
										}
									}
								}
								
								prestige = -12000
							}
							
							else = {
								prestige = -6000
							}
						}
					}
					
					regency_power_law_6 = {
						ROOT = {
							if = {
								limit = {
									regent = {
										custom_tooltip = {
											text = has_regency_bloodline
											any_owned_bloodline = {
												has_bloodline_flag = regency_bloodline
												bloodline_is_active_for = PREV
											}
										}
									}
								}
								
								prestige = -14000
							}
							
							else = {
								prestige = -7000
							}
						}
					}
				}
			}
			
			if = {
				limit = {
					regent = {
						NOT = {
							leads_faction = faction_regency_loyalists3
						}
					}
				}
				
				regent = {
					letter_event = { id = soh.3542 } # Non-faction version
				}
			}
			
			else = {
				regent = {
					letter_event = { id = soh.3553 } # Faction version
				}
			}
		}
		
		ai_will_do = {
			factor = 1
			
			# Reversed faction ultimatum logic, plus relative_power_to_liege checks if there isn't a faction
			trigger = {
				NOR = {
					regent = { 
						faction_power = {
							faction = faction_regency_loyalists3
							power >= 1.5
						}
					}
					regent = {
						relative_power_to_liege >= 1.5
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				OR = {
					regent = { 
						faction_power = {
							faction = faction_regency_loyalists3
							power >= 0.75
						}
					}
					regent = {
						relative_power_to_liege >= 0.75
					}
				}
			}
			
			mult_modifier = {
				factor = 0.1
				OR = {
					regent = { 
						faction_power = {
							faction = faction_regency_loyalists3
							power >= 1.0
						}
					}
					regent = {
						relative_power_to_liege >= 1.0
					}
				}
			}
			
			mult_modifier = { # If the liege is already fighting a regency war, slow it down to avoid war spam
				factor = 0.05
				regent = {
					any_war = {
						using_cb = take_over_regency_war3
					}
				}
			}
		}
	}
}

targeted_decisions = {
	regent_marry_liege_to_my_dynasty = {
		only_playable = yes
		ai = no
		ai_target_filter = none
		ai_third_party_filter = none
		third_party_filter = dynasty
		filter = liege
		
		show_third_party_potential = yes
		
		from_potential = {
			i_am_appropriate_regent_trigger = yes
			regent_marry_liege_to_my_dynasty_enabled_trigger = yes
		}
		
		potential = {
			# Our liege is the Tenno, is an adult, and has a Permanent Regency
			is_adult = yes
			is_female = no
			# The current spouse can't be the mother of the heir
			OR = {
				is_married = no
				current_heir = { # You could probably get around this...
					NAND = {
						dynasty = ROOT
						father = {
							character = ROOT
						}
						mother = {
							spouse = {
								character = ROOT
							}
						}
					}
				}
				spouse = {
					NOR = {
						# Spouse must not be (known to be) pregnant
						trait = pregnant
						trait = hard_pregnancy
						trait = troubled_pregnancy
						trait = pregnancy_finishing
						# If the Tenno loves their spouse, they'll probably care more (particularly if a player), so let's just forbid ending that...
						any_lover = {
							character = ROOT
						}
						dynasty = FROM # If we've already done this, don't do it again!
						dynasty = ROOT # An Imperial spouse is harder to remove
						is_playable = yes # A playable spouse probably has enough power to oppose it
					}
				}
			}
			NOT = {
				dynasty = FROM # No need for marriage ties... and something is clearly wrong
			}
		}
		
		allow = {
			has_actual_regency_trigger = no
			NOT = {
				has_opinion_modifier = {
					who = FROM
					modifier = japanese_regent_changed_my_spouse
				}
			}
			FROM = {
				prestige = 250
			}
		}
		
		third_party_potential = {
			show_only_failed_conditions = yes
			FROMFROM = {
				show_scope_change = no
				is_female = yes
				has_negative_congenital_trigger = no
				OR = {
					# Already a consort of the Tenno
					any_consort = {
						character = ROOT
					}
					# Subset of is_virgin_trigger; blocking Lustful is a bit too harsh...
					NOR = {
						any_lover = {
							NOT = {
								character = ROOT
							}
						}
						any_child_even_if_dead = { always = yes }
						any_spouse_even_if_dead = { always = yes }
						any_consort = { always = yes } # This is missing in vanilla but should probably be here...
						has_focus = focus_seduction
						trait = pregnant
						trait = hard_pregnancy # This is missing in vanilla but should probably be here...
						trait = troubled_pregnancy # This is missing in vanilla but should probably be here...
						trait = pregnancy_finishing # This is missing in vanilla but should probably be here...
						#trait = lustful
						trait = hedonist
						trait = master_seductress
						trait = lovers_pox
						trait = aztec_disease
						trait = great_pox
						has_character_modifier = incestuous_adulteress
						has_character_modifier = adulteress
						has_character_modifier = cradle_robber
						has_character_modifier = adulterous_priest
					}
				}
				
				# Close relative of yours
				custom_tooltip = {
					text = is_close_relative_or_same_dynasty_tt
					OR = {
						is_close_relative = ROOT_FROM
						dynasty = ROOT_FROM
					}
				}
				
				#custom_tooltip = {
					#text = is_adult_under_35_tt
					is_adult = yes
					NOT = { age = 35 } # Needs to be of childbearing age, with a decent margin; this is also good for the regent...
					ROOT = {
						spouse = {
							is_older_than = FROMFROM # Needs to be younger than the Tenno's spouse to be an attractive match
						}
					}
				#}
				
				NOT = { is_landed = yes }
				NOT = { is_ruler = yes }
				NOT = { is_heir = yes }
				# Either in our court or a concubine of the Tenno
				OR = {
					employer = {
						character = ROOT_FROM
					}
					any_consort = {
						character = ROOT
					}
				}
				custom_tooltip = {
					text = is_not_incapable_inbred_or_imbecile_tt
					NOT = { trait = incapable }
					NOT = { trait = inbred }
					NOT = { trait = imbecile }
				}
				custom_tooltip = {
					text = is_not_maimed_or_infirm_tt
					is_maimed_trigger = no
					NOT = { trait = infirm }
				}
				custom_tooltip = {
					text = is_not_wounded_severely_injured_tt
					NOT = { trait = wounded }
					NOT = { trait = severely_injured }
				}
				custom_tooltip = {
					text = is_not_one_eyed_handed_legged_disfigured_or_mangled_tt
					NOT = { trait = one_eyed }
					NOT = { trait = one_handed }
					NOT = { trait = one_legged }
					NOT = { trait = disfigured }
					NOT = { trait = mangled }
				}
				# If there would be no children the marriage is useless
				custom_tooltip = {
					text = is_not_ascetic_or_celibate_tt
					NOT = { is_ascetic_trigger = yes }
					NOT = { trait = celibate }
				}
				# Don't marry off our lovers or someone that's pregnant
				NOR = {
					trait = pregnant # Known to be pregnant
					trait = hard_pregnancy
					trait = troubled_pregnancy
					trait = pregnancy_finishing
					any_lover = {
						character = ROOT_FROM
					}
				}
			}
		}
		
		third_party_allow = {
			show_only_failed_conditions = yes
			FROMFROM = {
				is_ill = no
				is_inaccessible_or_incapable_trigger = no
			}
		}
		
		effect = {
			FROM = {
				prestige = -250
				save_event_target_as = meddling_character
			}
			
			ROOT_FROMFROM = {
				save_event_target_as = new_spouse
			}
			
			letter_event = { id = soh.3526 } # Inform the liege and set up the new marriage
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	regent_release_prisoner = {
		only_playable = yes
		ai = no
		ai_target_filter = none
		
		from_potential = {
			i_am_appropriate_regent_trigger = yes
			regent_release_prisoner_enabled_trigger = yes
		}
		
		potential = {
			prisoner = yes
			
			trigger_if = {
				limit = {
					FROM = {
						liege = {
							is_ryukyuan_tenno_trigger = no
						}
					}
				}
				
				trigger_if = {
					limit = {
						FROM = {
							liege = {
								is_the_tenno_trigger = yes
							}
						}
					}
					
					trigger_if = {
						limit = {
							FROM = {
								liege = {
									independent = yes
								}
							}
						}
						
						host = {
							is_the_tenno_trigger = yes
						}
					}
					
					trigger_else = {
						host = {
							OR = {
								is_the_tenno_trigger = yes
								AND = {
									independent = yes
									any_vassal = {
										is_the_tenno_trigger = yes
									}
								}
								AND = {
									i_am_appropriate_regent_trigger = yes
									liege = {
										real_tier = emperor
										independent = yes
										controls_religion = no
										any_vassal = {
											is_the_tenno_trigger = yes
										}
									}
								}
							}
						}
					}
				}
				
				trigger_else = {
					host = {
						OR = {
							regent = {
								character = FROM
							}
							AND = {
								is_the_tenno_trigger = yes
								liege = {
									regent = {
										character = FROM
									}
								}
							}
							liege = {
								is_the_tenno_trigger = yes
								liege = {
									regent = {
										character = FROM
									}
								}
							}
						}
					}
				}
			}
			
			trigger_else = {
				host = {
					is_ryukyuan_tenno_trigger = yes
				}
			}
		}
		
		allow = {
			FROM = {
				prestige >= 100
			}
		}
		
		effect = {
			FROM = {
				prestige = -100
				
				save_event_target_as = meddling_character
			}
			
			save_event_target_as = prisoner_to_release
			
			prisoner = no
			
			FROM = {
				liege = {
					character_event = { id = soh.3527 } # Inform liege
				}
				
				character_event = { id = soh.3528 } # Ping the Regent, then inform the prisoner
			}
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	regent_execute_prisoner = {
		only_playable = yes
		ai = no
		ai_target_filter = none
		
		from_potential = {
			i_am_appropriate_regent_trigger = yes
			regent_execute_prisoner_enabled_trigger = yes
		}
		
		potential = {
			prisoner = yes
			
			trigger_if = {
				limit = {
					FROM = {
						liege = {
							is_ryukyuan_tenno_trigger = no
						}
					}
				}
				
				trigger_if = {
					limit = {
						FROM = {
							liege = {
								is_the_tenno_trigger = yes
							}
						}
					}
					
					trigger_if = {
						limit = {
							FROM = {
								liege = {
									independent = yes
								}
							}
						}
						
						host = {
							is_the_tenno_trigger = yes
						}
					}
					
					trigger_else = {
						host = {
							OR = {
								is_the_tenno_trigger = yes
								AND = {
									independent = yes
									any_vassal = {
										is_the_tenno_trigger = yes
									}
								}
								AND = {
									i_am_appropriate_regent_trigger = yes
									liege = {
										real_tier = emperor
										independent = yes
										controls_religion = no
										any_vassal = {
											is_the_tenno_trigger = yes
										}
									}
								}
							}
						}
					}
				}
				
				trigger_else = {
					host = {
						OR = {
							regent = {
								character = FROM
							}
							AND = {
								is_the_tenno_trigger = yes
								liege = {
									regent = {
										character = FROM
									}
								}
							}
							liege = {
								is_the_tenno_trigger = yes
								liege = {
									regent = {
										character = FROM
									}
								}
							}
						}
					}
				}
			}
			
			trigger_else = {
				host = {
					is_ryukyuan_tenno_trigger = yes
				}
			}
		}
		
		allow = {
			show_only_failed_conditions = yes
			
			FROM = {
				prestige >= 250
			}
			
			NOR = {
				is_the_tenno_trigger = yes
				is_ryukyuan_tenno_trigger = yes
				any_dynasty_member = {
					OR = {
						is_the_tenno_trigger = yes
						is_ryukyuan_tenno_trigger = yes
					}
				}
			}
		}
		
		effect = {
			FROM = {
				prestige = -250
				
				save_event_target_as = meddling_character
			}
			
			save_event_target_as = prisoner_to_execute
			
			FROM = {
				liege = {
					character_event = { id = soh.3529 } # Inform liege
				}
				
				character_event = { id = soh.3530 } # Ping the Regent, then inform the prisoner
			}
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	regent_fire_councillor = {
		only_playable = yes
		ai = no
		filter = realm
		ai_target_filter = none # Handled on_yearly_pulse
		
		from_potential = {
			ai = no # Check it on_yearly_pulse; that's much cheaper as we're only looking for up to seven people...
			i_am_appropriate_regent_trigger = yes
			regent_fire_councillor_enabled_trigger = yes
		}
		
		potential = {
			is_voter = yes
			
			OR = {
				AND = {
					is_landed = no
					employer = {
						regent = {
							character = FROM
						}
					}
				}
				
				liege = {
					regent = {
						character = FROM
					}
				}
			}
		}
		
		allow = {
			show_only_failed_conditions = yes
			
			FROM = {
				prestige >= 250
			}
			
			NOT = {
				has_opinion_modifier = {
					who = FROM
					modifier = japanese_regent_fired_me
				}
			}
			
			liege = {
				NOT = {
					has_opinion_modifier = {
						who = FROM
						modifier = japanese_regent_fired_councillor
					}
				}
			}
		}
		
		effect = {
			FROM = {
				prestige = -250
				
				save_event_target_as = meddling_character
			}
			
			save_event_target_as = voter_to_fire
			
			FROM = {
				liege = {
					character_event = { id = soh.3531 } # Inform the liege
				}
			}
			
			character_event = { id = soh.3532 } # Inform the councillor
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	take_vassal_decision = {
		only_playable = yes
		ai = no
		
		ai_target_filter = none
		
		from_potential = {
			OR = {
				is_the_tenno_trigger = yes
				is_ryukyuan_tenno_trigger = yes
				AND = {
					real_tier = emperor
					has_japanese_government_trigger = yes
				}
				i_am_appropriate_regent_trigger = yes
			}
		}
		
		potential = {
			trigger_if = {
				limit = {
					FROM = {
						is_the_tenno_trigger = yes
					}
				}
				
				liege = {
					OR = {
						AND = {
							i_am_appropriate_regent_trigger = yes
							liege = {
								character = FROM
							}
						}
						AND = {
							real_tier = emperor
							has_japanese_government_trigger = yes
							controls_religion = no
							any_vassal = {
								is_the_tenno_trigger = yes
							}
						}
						AND = {
							i_am_appropriate_regent_trigger = yes
							liege = {
								real_tier = emperor
								has_japanese_government_trigger = yes
								controls_religion = no
								any_vassal = {
									is_the_tenno_trigger = yes
								}
							}
						}
					}
				}
			}
			
			trigger_else_if = {
				limit = {
					FROM = {
						is_ryukyuan_tenno_trigger = yes
					}
				}
				
				liege = {
					i_am_appropriate_regent_trigger = yes
					liege = {
						character = FROM
					}
				}
			}
			
			trigger_else_if = {
				limit = {
					FROM = {
						real_tier = emperor
						has_japanese_government_trigger = yes
						controls_religion = no
					}
				}
				
				liege = {
					OR = {
						AND = {
							i_am_appropriate_regent_trigger = yes
							liege = {
								character = FROM
							}
						}
						AND = {
							is_the_tenno_trigger = yes
							liege = {
								character = FROM
							}
						}
						AND = {
							i_am_appropriate_regent_trigger = yes
							liege = {
								is_the_tenno_trigger = yes
								liege = {
									character = FROM
								}
							}
						}
					}
				}
			}
			
			trigger_else_if = {
				limit = {
					FROM = {
						i_am_appropriate_regent_trigger = yes
					}
				}
				
				trigger_if = {
					limit = {
						FROM = {
							liege = {
								is_the_tenno_trigger = yes
							}
						}
					}
					
					liege = {
						OR = {
							is_the_tenno_trigger = yes
							AND = {
								real_tier = emperor
								has_japanese_government_trigger = yes
								controls_religion = no
								any_vassal = {
									is_the_tenno_trigger = yes
								}
							}
							AND = {
								i_am_appropriate_regent_trigger = yes
								liege = {
									real_tier = emperor
									has_japanese_government_trigger = yes
									controls_religion = no
									any_vassal = {
										is_the_tenno_trigger = yes
									}
								}
							}
						}
					}
				}
				
				trigger_else_if = {
					limit = {
						FROM = {
							liege = {
								is_ryukyuan_tenno_trigger = yes
							}
						}
					}
					
					liege = {
						is_ryukyuan_tenno_trigger = yes
					}
				}
				
				trigger_else = {
					liege = {
						OR = {
							is_the_tenno_trigger = yes
							AND = {
								i_am_appropriate_regent_trigger = yes
								liege = {
									is_the_tenno_trigger = yes
									liege = {
										character = FROM
									}
								}
							}
							AND = {
								character = FROM
								i_am_appropriate_regent_trigger = yes
							}
						}
					}
				}
			}
			
			trigger_else = {
				always = no
			}
		}
		
		allow = {
			show_only_failed_conditions = yes
			
			FROM = {
				has_actual_regency_trigger = no
				war = no
			}
			
			lower_real_tier_than = FROM
			
			war = no
			
			liege = {
				war = no
				NOT = {
					has_opinion_modifier = {
						who = FROM
						modifier = japanese_regent_took_vassal
					}
				}
			}
			
			NOR = {
				trait = japanese_regent
				trait = japanese_regent2
				trait = japanese_regent3
			}
			
			OR = {
				FROM = {
					OR = {
						is_the_tenno_trigger = yes
						is_ryukyuan_tenno_trigger = yes
						real_tier = emperor
					}
				}
				
				AND = {
					real_tier = duke
					FROM = {
						regent_take_duke_vassal_enabled_trigger = yes
					}
				}
				
				AND = {
					real_tier = count
					FROM = {
						regent_take_count_vassal_enabled_trigger = yes
					}
				}
			}
			
			trigger_if = {
				limit = {
					real_tier = duke
				}
				
				FROM = {
					prestige >= 1000
				}
			}
			
			trigger_else_if = {
				limit = {
					real_tier = count
				}
				
				FROM = {
					prestige >= 250
				}
			}
			
			trigger_else = {
				always = no
			}
		}
		
		effect = {
			if = {
				limit = {
					real_tier = duke
				}
				
				FROM = {
					prestige = -1000
				}
			}
			
			else = {
				FROM = {
					prestige = -250
				}
			}
			
			FROM = {
				save_event_target_as = meddling_character
			}
			
			save_event_target_as = target_vassal
			
			event_target:target_vassal = {
				letter_event = { id = soh.3523 } # Inform the vassal
				
				liege = {
					letter_event = { id = soh.3522 } # Inform the liege
				}
				
				set_defacto_liege = FROM
			}
		}
		
		ai_will_do = {
			factor = 0
		}
	}
}

title_decisions = {
	take_title_decision = {
		only_playable = yes
		ai = no
		
		ai_target_filter = none
		
		from_potential = {
			OR = {
				is_the_tenno_trigger = yes
				is_ryukyuan_tenno_trigger = yes
				AND = {
					real_tier = emperor
					has_japanese_government_trigger = yes
				}
				i_am_appropriate_regent_trigger = yes
			}
		}
		
		potential = {
			holder_scope = {
				trigger_if = {
					limit = {
						FROM = {
							is_the_tenno_trigger = yes
						}
					}
					
					OR = {
						AND = {
							i_am_appropriate_regent_trigger = yes
							liege = {
								character = FROM
							}
						}
						AND = {
							real_tier = emperor
							has_japanese_government_trigger = yes
							controls_religion = no
							any_vassal = {
								is_the_tenno_trigger = yes
							}
						}
						AND = {
							i_am_appropriate_regent_trigger = yes
							liege = {
								real_tier = emperor
								has_japanese_government_trigger = yes
								controls_religion = no
								any_vassal = {
									is_the_tenno_trigger = yes
								}
							}
						}
					}
				}
				
				trigger_else_if = {
					limit = {
						FROM = {
							is_ryukyuan_tenno_trigger = yes
						}
					}
					
					i_am_appropriate_regent_trigger = yes
					liege = {
						character = FROM
					}
				}
				
				trigger_else_if = {
					limit = {
						FROM = {
							real_tier = emperor
							has_japanese_government_trigger = yes
							controls_religion = no
						}
					}
					
					OR = {
						AND = {
							i_am_appropriate_regent_trigger = yes
							liege = {
								character = FROM
							}
						}
						AND = {
							is_the_tenno_trigger = yes
							liege = {
								character = FROM
							}
						}
						AND = {
							i_am_appropriate_regent_trigger = yes
							liege = {
								is_the_tenno_trigger = yes
								liege = {
									character = FROM
								}
							}
						}
					}
				}
				
				trigger_else_if = {
					limit = {
						FROM = {
							i_am_appropriate_regent_trigger = yes
						}
					}
					
					trigger_if = {
						limit = {
							FROM = {
								liege = {
									is_the_tenno_trigger = yes
								}
							}
						}
						
						OR = {
							is_the_tenno_trigger = yes
							AND = {
								real_tier = emperor
								has_japanese_government_trigger = yes
								controls_religion = no
								any_vassal = {
									is_the_tenno_trigger = yes
								}
							}
							AND = {
								i_am_appropriate_regent_trigger = yes
								liege = {
									real_tier = emperor
									has_japanese_government_trigger = yes
									controls_religion = no
									any_vassal = {
										is_the_tenno_trigger = yes
									}
								}
							}
						}
					}
					
					trigger_else_if = {
						limit = {
							FROM = {
								liege = {
									is_ryukyuan_tenno_trigger = yes
								}
							}
						}
						
						is_ryukyuan_tenno_trigger = yes
					}
					
					trigger_else = {
						OR = {
							is_the_tenno_trigger = yes
							AND = {
								i_am_appropriate_regent_trigger = yes
								liege = {
									is_the_tenno_trigger = yes
									liege = {
										character = FROM
									}
								}
							}
							AND = {
								character = FROM
								i_am_appropriate_regent_trigger = yes
							}
						}
					}
				}
				
				trigger_else = {
					always = no
				}
			}
		}
		
		allow = {
			show_only_failed_conditions = yes
			
			trigger_if = {
				limit = {
					tier = king
				}
				
				holder_scope = {
					any_demesne_title = {
						count = 2
						tier = king
					}
				}
			}
			
			trigger_else_if = {
				limit = {
					tier = duke
				}
				
				holder_scope = {
					any_demesne_title = {
						count = 2
						tier = duke
					}
				}
			}
			
			trigger_else_if = {
				limit = {
					tier = count
				}
				
				holder_scope = {
					any_demesne_title = {
						count = 2
						tier = count
					}
				}
			}
			
			FROM = {
				liege = {
					higher_real_tier_than = ROOT
				}
			}
			
			trigger_if = {
				limit = {
					holder_scope = {
						is_the_tenno_trigger = yes
					}
				}
				
				NOT = {
					title = c_yamashiro
				}
			}
			
			FROM = {
				has_actual_regency_trigger = no
				war = no
			}
			
			controls_religion = no
			mercenary = no
			holy_order = no
			temporary = no
			is_vice_royalty = no
			
			holder_scope = {
				war = no
				
				liege = {
					war = no
				}
				
				NOT = {
					has_opinion_modifier = {
						who = FROM
						modifier = japanese_regent_took_a_title
					}
				}
			}
			
			OR = {
				FROM = {
					OR = {
						is_the_tenno_trigger = yes
						is_ryukyuan_tenno_trigger = yes
						real_tier = emperor
					}
				}
				
				AND = {
					tier = king
					FROM = {
						regent_transfer_kingdom_enabled_trigger = yes
					}
				}
				
				AND = {
					tier = duke
					FROM = {
						regent_transfer_duchy_enabled_trigger = yes
					}
				}
				
				AND = {
					tier = count
					FROM = {
						regent_transfer_county_enabled_trigger = yes
					}
				}
			}
		}
		
		effect = {
			FROM = {
				save_event_target_as = meddling_character
			}
			
			save_event_target_as = target_title
			
			if = {
				limit = {
					tier = king
				}
				
				if = {
					limit = {
						claimed_by = FROM
					}
					
					FROM = {
						prestige = -1000
					}
				}
				
				else = {
					FROM = {
						prestige = -2000
					}
				}
			}
			
			else_if = {
				limit = {
					tier = duke
				}
				
				if = {
					limit = {
						claimed_by = FROM
					}
					
					FROM = {
						prestige = -500
					}
				}
				
				else = {
					FROM = {
						prestige = -250
					}
				}
			}
			
			else_if = {
				limit = {
					tier = count
				}
				
				if = {
					limit = {
						claimed_by = FROM
					}
					
					FROM = {
						prestige = -100
					}
				}
				
				else = {
					FROM = {
						prestige = -200
					}
				}
			}
			
			holder_scope = {
				letter_event = { id = soh.3521 } # Inform holder
			}
		}
	
		ai_will_do = {
			factor = 0
		}
	}
}