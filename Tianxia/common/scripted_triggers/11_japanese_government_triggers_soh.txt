can_change_to_japanese_feudal_trigger = {
	OR = {
		# Either independent
		AND = {
			independent = yes
			prestige = 500
		}
		# Or the vassal of a top liege with the government
		top_liege = {
			government = japanese_feudal_government
			OR = {
				dynasty = ROOT
				ROOT = {
					prestige = 500
				}
			}
		}
		# Or the vassal of another Japanese-style realm
		AND = {
			top_liege = {
				OR = {
					government = japanese_imperial_government
					government = japanese_bureaucracy_government
					government = japanese_monastic_feudal_government
					government = divine_imperial_government
				}
			}
			OR = {
				# We have a relevant bloodline
				AND = {
					any_owned_bloodline = {
						has_bloodline_flag = bloodline_japanese_feudal
						bloodline_is_active_for = ROOT
					}
					prestige = 500
				}
				# The relevant top liege has a regent
				AND = {
					top_liege = {
						has_regent = yes # Not has_actual_regency_trigger!
					}
					prestige = 1000
				}
				# We simply have a lot of prestige
				prestige = 2500
			}
		}
		# Or the vassal of a Chinese-style realm
		AND = {
			top_liege = {
				OR = {
					government = chinese_imperial_government
					government = chinese_vassal_government
					government = eastern_imperial_government
				}
			}
			OR = {
				# We have a relevant bloodline
				AND = {
					any_owned_bloodline = {
						has_bloodline_flag = bloodline_japanese_feudal
						bloodline_is_active_for = ROOT
					}
					prestige = 1000
				}
				# The top liege has a sub-Average MoH rating
				AND = {
					top_liege = {
						OR = {
							has_character_modifier = mandate_of_heaven_2
							has_character_modifier = mandate_of_heaven_1
						}
					}
					prestige = 1000
				}
				# The relevant top liege has a regent
				AND = {
					top_liege = {
						has_regent = yes # Not has_actual_regency_trigger!
					}
					prestige = 1000
				}
				# We simply have a lot of prestige
				prestige = 2500
			}
		}
		# Or the vassal of something else
		top_liege = {
			NOR = {
				government = japanese_imperial_government
				government = japanese_bureaucracy_government
				government = japanese_feudal_government
				government = japanese_monastic_feudal_government
				government = divine_imperial_government
				government = chinese_imperial_government
				government = chinese_vassal_government
				government = eastern_imperial_government
			}
			prestige = 1000
		}
	}
}

can_change_to_japanese_monastic_feudal_trigger = {
	OR = {
		# Either independent
		AND = {
			independent = yes
			piety = 1000
		}
		# Or the vassal of a top liege with the government
		top_liege = {
			government = japanese_monastic_feudal_government
			OR = {
				dynasty = ROOT
				ROOT = {
					piety = 1000
				}
			}
		}
		# Or the vassal of another Japanese-style realm
		AND = {
			top_liege = {
				OR = {
					government = japanese_imperial_government
					government = japanese_bureaucracy_government
					government = japanese_feudal_government
					government = divine_imperial_government
				}
			}
			OR = {
				# We control a relevant holy site
				AND = {
					controls_relevant_holy_site_for_japanese_monastic_feudal_trigger = yes
					piety = 2500
				}
				# The relevant top liege has a regent
				AND = {
					top_liege = {
						has_regent = yes # Not has_actual_regency_trigger!
					}
					piety = 2500
				}
				# We simply have a lot of piety
				piety = 5000
			}
		}
		# Or the vassal of a Chinese-style realm
		AND = {
			top_liege = {
				OR = {
					government = chinese_imperial_government
					government = chinese_vassal_government
					government = eastern_imperial_government
				}
			}
			OR = {
				# We control a relevant holy site
				AND = {
					controls_relevant_holy_site_for_japanese_monastic_feudal_trigger = yes
					piety = 2500
				}
				# The top liege has a sub-Average MoH rating
				AND = {
					top_liege = {
						OR = {
							has_character_modifier = mandate_of_heaven_2
							has_character_modifier = mandate_of_heaven_1
						}
					}
					piety = 2500
				}
				# The relevant top liege has a regent
				AND = {
					top_liege = {
						has_regent = yes # Not has_actual_regency_trigger!
					}
					piety = 2500
				}
				# We simply have a lot of piety
				piety = 5000
			}
		}
		# Or the vassal of something else
		top_liege = {
			NOR = {
				government = japanese_imperial_government
				government = japanese_bureaucracy_government
				government = japanese_feudal_government
				government = japanese_monastic_feudal_government
				government = divine_imperial_government
				government = chinese_imperial_government
				government = chinese_vassal_government
				government = eastern_imperial_government
			}
			piety = 2500
		}
	}
}

controls_relevant_holy_site_for_japanese_monastic_feudal_trigger = {
	custom_tooltip = {
		text = controls_relevant_holy_site_for_japanese_monastic_feudal_trigger_text # TODO
		capital_scope = {
			religion = ROOT
			county = {
				OR = {
					any_direct_de_jure_vassal_title = {
						OR = {
							AND = {
								is_holy_site = shinto
								ROOT = {
									religion = shinto
								}
							}
							AND = {
								is_holy_site = ryukyuan_pagan_reformed
								ROOT = {
									religion = ryukyuan_pagan_reformed
								}
							}
						}
					}
					OR = {
						AND = {
							is_holy_site = shinto
							ROOT = {
								religion = shinto
							}
						}
						AND = {
							is_holy_site = ryukyuan_pagan_reformed
							ROOT = {
								religion = ryukyuan_pagan_reformed
							}
						}
					}
				}
			}
			culture = ROOT
		}
		OR = {
			AND = {
				religion = shinto
				OR = {
					culture_group = japonic
					k_chrysanthemum_throne = {
						holder_scope = {
							culture = ROOT
						}
					}
				}
			}
			AND = {
				religion = ryukyuan_pagan_reformed
				OR = {
					culture_group = japonic
					d_ryukyuan_pagan_reformed = {
						holder_scope = {
							culture = ROOT
						}
					}
				}
			}
		}
	}
}

has_actual_regency_trigger = {
	custom_tooltip = {
		text = has_regent_and_is_incapable_of_governing
		is_ruler = yes
		OR = {
			AND = {
				NOR = {
					trait = under_regency
					trait = under_regency2
					trait = under_regency3
				}
				has_regent = yes
			}
			AND = {
				OR = {
					trait = under_regency
					trait = under_regency2
					trait = under_regency3
				}
				OR = {
					is_incapable = yes
					prisoner = yes
					is_adult = no
					trait = kow_tow_travels
					trait = travelling
					trait = in_hiding
					trait = troubled_pregnancy
					trait = pregnancy_finishing
					trait = on_indian_pilgrimage
					has_character_modifier = failed_to_overthrow_regent # If you recently failed to overthrow your regent, he'll restrict what you can do quite a bit...
					trait = hunting_dragons
					trait = treasure_fleet_voyage
					has_character_modifier = bedridden_illness
					has_character_modifier = forced_actual_regency # Max level Permanent Regent power
				}
			}
		}
	}
}

can_have_any_japanese_government_trigger = { # For any casese where the Tenno and the knockoff should be included
	OR = {
		can_have_japanese_bureaucracy_and_feudal_trigger = yes
		AND = {
			religion = shinto
			controls_religion = yes
		}
		can_have_divine_imperial_trigger = yes
	}
}

can_have_japanese_bureaucracy_and_feudal_trigger = {
	OR = {
		AND = {
			religion = shinto
			controls_religion = no
		}
		AND = {
			culture_group = japonic
			religion = buddhist
		}
		religion = ryukyuan_pagan
		AND = {
			has_dlc = "Holy Fury"
			religion = ryukyuan_pagan_reformed
			OR = {
				controls_religion = no
				NOT = {
					religion_has_divine_imperial_reformation_trigger = yes
				}
			}
			OR = {
				religion_has_japanese_government_reformation_trigger = yes
				religion_has_divine_imperial_reformation_trigger = yes
			}
		}
	}
}

can_have_japanese_monastic_feudal_trigger = {
	OR = {
		AND = {
			religion = shinto
			controls_religion = no
		}
		#religion = ryukyuan_pagan # Religion was considered something for women
		AND = {
			has_dlc = "Holy Fury"
			religion = ryukyuan_pagan_reformed
			OR = {
				controls_religion = no
				NOT = {
					religion_has_divine_imperial_reformation_trigger = yes
				}
			}
			OR = {
				religion_has_japanese_government_reformation_trigger = yes
				religion_has_divine_imperial_reformation_trigger = yes
			}
		}
	}
}

religion_has_japanese_government_reformation_trigger = {
	has_religion_feature = religion_tolerant # We don't want GHWs!
	OR = {
		has_religion_feature = religion_no_leader
		has_religion_feature = religion_spiritual
		has_religion_feature = religion_temporal_head
		has_religion_feature = religion_divine_ancestry
	}
	NOR = {
		has_religion_feature = religion_holy_family
		has_religion_feature = religion_jizya
		has_religion_feature = religion_ritual_sacrifice
		has_religion_feature = religion_adventuring
		has_religion_feature = religion_feature_ryukyuan_three_mountains
	}
}

can_have_divine_imperial_trigger = {
	has_dlc = "Holy Fury"
	religion = ryukyuan_pagan_reformed
	controls_religion = yes
	religion_has_divine_imperial_reformation_trigger = yes
}

religion_has_divine_imperial_reformation_trigger = {
	has_religion_feature = religion_tolerant # We don't want GHWs!
	has_religion_feature = religion_divine_ancestry
	NOR = {
		has_religion_feature = religion_harems
		has_religion_feature = religion_holy_family
		has_religion_feature = religion_jizya
		has_religion_feature = religion_ritual_sacrifice
		has_religion_feature = religion_adventuring
		has_religion_feature = religion_feature_ryukyuan_three_mountains
	}
}

# Nicer checks for regency_power decisions
regent_take_money_enabled_trigger = {
	liege = {
		primary_title = {
			OR = {
				has_law = regency_power_3
				has_law = regency_power_4
				has_law = regency_power_5
				has_law = regency_power_6
			}
		}
	}
}

regent_force_actual_regency_enabled_trigger = {
	liege = {
		primary_title = {
			has_law = regency_power_6
		}
	}

}

regent_marry_liege_to_my_dynasty_enabled_trigger = {
	liege = {
		primary_title = {
			OR = {
				has_law = regency_power_0
				has_law = regency_power_1
				has_law = regency_power_2
				has_law = regency_power_3
				has_law = regency_power_4
				has_law = regency_power_5
				has_law = regency_power_6
			}
		}
	}
}

regent_release_prisoner_enabled_trigger = {
	liege = {
		primary_title = {
			OR = {
				has_law = regency_power_2
				has_law = regency_power_3
				has_law = regency_power_4
				has_law = regency_power_5
				has_law = regency_power_6
			}
		}
	}
}

regent_execute_prisoner_enabled_trigger = {
	liege = {
		primary_title = {
			OR = {
				has_law = regency_power_5
				has_law = regency_power_6
			}
		}
	}
}

regent_fire_councillor_enabled_trigger = {
	liege = {
		primary_title = {
			OR = {
				has_law = regency_power_5
				has_law = regency_power_6
			}
		}
	}
}

regent_take_count_vassal_enabled_trigger = {
	liege = {
		primary_title = {
			OR = {
				has_law = regency_power_1
				has_law = regency_power_2
				has_law = regency_power_3
				has_law = regency_power_4
				has_law = regency_power_5
				has_law = regency_power_6
			}
		}
	}
}

regent_take_duke_vassal_enabled_trigger = {
	liege = {
		primary_title = {
			OR = {
				has_law = regency_power_3
				has_law = regency_power_4
				has_law = regency_power_5
				has_law = regency_power_6
			}
		}
	}
}
regent_transfer_county_enabled_trigger = {
	liege = {
		primary_title = {
			OR = {
				has_law = regency_power_2
				has_law = regency_power_3
				has_law = regency_power_4
				has_law = regency_power_5
				has_law = regency_power_6
			}
		}
	}
}

regent_transfer_duchy_enabled_trigger = {
	liege = {
		primary_title = {
			OR = {
				has_law = regency_power_4
				has_law = regency_power_5
				has_law = regency_power_6
			}
		}
	}
}

regent_transfer_kingdom_enabled_trigger = {
	liege = {
		primary_title = {
			has_law = regency_power_6
		}
	}
}

i_am_appropriate_regent_trigger = {
	can_have_japanese_bureaucracy_and_feudal_trigger = yes
	is_feudal = yes
	OR = {
		AND = {
			trait = japanese_regent
			liege = {
				controls_religion = yes
				religion = shinto
				trait = under_regency
				regent = {
					character = PREVPREV
				}
			}
		}
		AND = {
			trait = japanese_regent2
			liege = {
				can_have_japanese_bureaucracy_and_feudal_trigger = yes
				tier = emperor
				trait = under_regency2
				regent = {
					character = PREVPREV
				}
			}
		}
		AND = {
			trait = japanese_regent3
			liege = {
				controls_religion = yes
				religion = ryukyuan_pagan_reformed
				government = divine_imperial_government
				trait = under_regency3
				regent = {
					character = PREVPREV
				}
			}
		}
	}
}



# Japanese regnal name triggers
all_tenno_names_reused_trigger = {
	all_legendary_tenno_names_reused_trigger = yes
	all_old_tenno_names_reused_trigger = yes
	all_rare_tenno_names_reused_trigger = yes
	all_one_time_tenno_names_reused_trigger = yes
	all_two_time_tenno_names_reused_trigger = yes
}

all_legendary_tenno_names_reused_trigger = {
	k_chrysanthemum_throne =  {
		# Legendary
		#has_title_flag = emperor_jimmu_used_2 # Should not be included
		has_title_flag = emperor_suizei_used_2
		has_title_flag = emperor_annei_used_2
		has_title_flag = emperor_itoku_used_2
		has_title_flag = emperor_kosho_used_2
		has_title_flag = emperor_koan_used_2
		has_title_flag = emperor_korei_used_2
		has_title_flag = emperor_kogen_used_2
		has_title_flag = emperor_kaika_used_2
		has_title_flag = emperor_sujin_used_2
		has_title_flag = emperor_suinin_used_2
		has_title_flag = emperor_keiko_used_2
		has_title_flag = emperor_seimu_used_2
		has_title_flag = emperor_chuai_used_2
		has_title_flag = emperor_jingu_used_2
		has_title_flag = emperor_ojin_used_2
		has_title_flag = emperor_richu_used_2
		has_title_flag = emperor_hanzei_used_2
		has_title_flag = emperor_ingyo_used_2
		has_title_flag = emperor_anko_used_2
		has_title_flag = emperor_yuryaku_used_2
		has_title_flag = emperor_seinei_used_2
		has_title_flag = emperor_tsunuzashi_used_2
		has_title_flag = emperor_kenzo_used_2
		has_title_flag = emperor_ninken_used_2
		has_title_flag = emperor_buretsu_used_2
		has_title_flag = emperor_ankan_used_2
		has_title_flag = emperor_senka_used_2
	}
}

all_old_tenno_names_reused_trigger = {
	k_chrysanthemum_throne =  {
		# Fairly old + posthumously recognized
		has_title_flag = emperor_oka_used_2
		has_title_flag = emperor_sudojinkei_used_2
		has_title_flag = emperor_kasuga_used_2
		has_title_flag = emperor_sudo_used_2
		has_title_flag = emperor_kinmei_used_2
		has_title_flag = emperor_bidatsu_used_2
		has_title_flag = emperor_yomei_used_2
		has_title_flag = emperor_sushun_used_2
		has_title_flag = emperor_suiko_used_2
		has_title_flag = emperor_jomei_used_2
		has_title_flag = emperor_kogyoku_used_2
		has_title_flag = emperor_kotoku_used_2
		has_title_flag = emperor_saimei_used_2
		has_title_flag = emperor_tenji_used_2
		has_title_flag = emperor_kobun_used_2
		has_title_flag = emperor_tenmu_used_2
		has_title_flag = emperor_jito_used_2
		has_title_flag = emperor_monmu_used_2
		has_title_flag = emperor_genmei_used_2
		has_title_flag = emperor_gensho_used_2
		has_title_flag = emperor_shomu_used_2
		has_title_flag = emperor_koken_used_2
		has_title_flag = emperor_junnin_used_2
	}
}

all_rare_tenno_names_reused_trigger = {
	k_chrysanthemum_throne =  {
		# Rare - post-1337 (pre-Meiji) and Northern Court
		has_title_flag = emperor_kashiwabara_used_2
		has_title_flag = emperor_nara_used_2
		has_title_flag = emperor_ogimachi_used_2
		has_title_flag = emperor_mizunoo_used_2
		has_title_flag = emperor_minoo_used_2
		has_title_flag = emperor_meisho_used_2
		has_title_flag = emperor_sai_used_2
		has_title_flag = emperor_reigen_used_2
		has_title_flag = emperor_higashiyama_used_2
		has_title_flag = emperor_nakamikado_used_2
		has_title_flag = emperor_sakuramachi_used_2
		has_title_flag = emperor_momozono_used_2
		has_title_flag = emperor_kokaku_used_2
		has_title_flag = emperor_ninko_used_2
		has_title_flag = emperor_komei_used_2
		has_title_flag = emperor_chokei_used_2
		has_title_flag = emperor_shoko_used_2
		has_title_flag = emperor_komyo_used_2
		has_title_flag = emperor_suko_used_2
		has_title_flag = emperor_kogo_used_2
		has_title_flag = emperor_komatsu_used_2
	}
}

all_one_time_tenno_names_reused_trigger = {
	k_chrysanthemum_throne =  {
		# Names used only once, or only reused post-1337
		has_title_flag = emperor_shotoku_used_2
		has_title_flag = emperor_konin_used_2
		has_title_flag = emperor_kanmu_used_2
		has_title_flag = emperor_heizei_used_2
		has_title_flag = emperor_junna_used_2
		has_title_flag = emperor_montoku_used_2
		has_title_flag = emperor_seiwa_used_2
		has_title_flag = emperor_yozei_used_2
		has_title_flag = emperor_koko_used_2
		has_title_flag = emperor_murakami_used_2
		has_title_flag = emperor_enyu_used_2
		has_title_flag = emperor_kazan_used_2
		has_title_flag = emperor_sutoku_used_2
		has_title_flag = emperor_konoe_used_2
		has_title_flag = emperor_rokujo_used_2
		has_title_flag = emperor_takakura_used_2
		has_title_flag = emperor_antoku_used_2
		has_title_flag = emperor_tsuchimikado_used_2
		has_title_flag = emperor_juntoku_used_2
		has_title_flag = emperor_shijo_used_2
		has_title_flag = emperor_kameyama_used_2
		has_title_flag = emperor_hanazono_used_2
	}
}

all_two_time_tenno_names_reused_trigger = {
	k_chrysanthemum_throne =  {
		# Names reused pre-1337
		has_title_flag = emperor_ichijo_used_2
		has_title_flag = emperor_suzaku_used_2
		has_title_flag = emperor_reizei_used_2
		has_title_flag = emperor_sanjo_used_2
		has_title_flag = emperor_shirakawa_used_2
		has_title_flag = emperor_horikawa_used_2
		has_title_flag = emperor_toba_used_2
		has_title_flag = emperor_saga_used_2
		has_title_flag = emperor_fukakusa_used_2
		has_title_flag = emperor_ninmyo_used_2
		has_title_flag = emperor_uda_used_2
		has_title_flag = emperor_fushimi_used_2
		has_title_flag = emperor_nijo_used_2
		has_title_flag = emperor_daigo_used_2
	}
}

all_legendary_tenno_names_used_trigger = { # For completeness' sake
	k_chrysanthemum_throne =  {
		# Legendary
		#has_title_flag = emperor_jimmu_used # Should not be included
		has_title_flag = emperor_suizei_used
		has_title_flag = emperor_annei_used
		has_title_flag = emperor_itoku_used
		has_title_flag = emperor_kosho_used
		has_title_flag = emperor_koan_used
		has_title_flag = emperor_korei_used
		has_title_flag = emperor_kogen_used
		has_title_flag = emperor_kaika_used
		has_title_flag = emperor_sujin_used
		has_title_flag = emperor_suinin_used
		has_title_flag = emperor_keiko_used
		has_title_flag = emperor_seimu_used
		has_title_flag = emperor_chuai_used
		has_title_flag = emperor_jingu_used
		has_title_flag = emperor_ojin_used
		has_title_flag = emperor_richu_used
		has_title_flag = emperor_hanzei_used
		has_title_flag = emperor_ingyo_used
		has_title_flag = emperor_anko_used
		has_title_flag = emperor_yuryaku_used
		has_title_flag = emperor_seinei_used
		has_title_flag = emperor_tsunuzashi_used
		has_title_flag = emperor_kenzo_used
		has_title_flag = emperor_ninken_used
		has_title_flag = emperor_buretsu_used
		has_title_flag = emperor_ankan_used
		has_title_flag = emperor_senka_used
	}
}

all_old_tenno_names_used_trigger = { # For completeness' sake
	k_chrysanthemum_throne =  {
		# Fairly old + posthumously recognized
		has_title_flag = emperor_oka_used
		has_title_flag = emperor_sudojinkei_used
		has_title_flag = emperor_kasuga_used
		has_title_flag = emperor_sudo_used
		has_title_flag = emperor_kinmei_used
		has_title_flag = emperor_bidatsu_used
		has_title_flag = emperor_yomei_used
		has_title_flag = emperor_sushun_used
		has_title_flag = emperor_suiko_used
		has_title_flag = emperor_jomei_used
		has_title_flag = emperor_kogyoku_used
		has_title_flag = emperor_kotoku_used
		has_title_flag = emperor_saimei_used
		has_title_flag = emperor_tenji_used
		has_title_flag = emperor_kobun_used
		has_title_flag = emperor_tenmu_used
		has_title_flag = emperor_jito_used
		has_title_flag = emperor_monmu_used
		has_title_flag = emperor_genmei_used
		has_title_flag = emperor_gensho_used
		has_title_flag = emperor_shomu_used
		has_title_flag = emperor_koken_used
		has_title_flag = emperor_junnin_used
	}
}

all_rare_tenno_names_used_trigger = {
	k_chrysanthemum_throne =  {
		# Rare - post-1337 (pre-Meiji) and Northern Court
		has_title_flag = emperor_kashiwabara_used
		has_title_flag = emperor_nara_used
		has_title_flag = emperor_ogimachi_used
		has_title_flag = emperor_mizunoo_used
		has_title_flag = emperor_minoo_used
		has_title_flag = emperor_meisho_used
		has_title_flag = emperor_sai_used
		has_title_flag = emperor_reigen_used
		has_title_flag = emperor_higashiyama_used
		has_title_flag = emperor_nakamikado_used
		has_title_flag = emperor_sakuramachi_used
		has_title_flag = emperor_momozono_used
		has_title_flag = emperor_kokaku_used
		has_title_flag = emperor_ninko_used
		has_title_flag = emperor_komei_used
		has_title_flag = emperor_chokei_used
		has_title_flag = emperor_shoko_used
		has_title_flag = emperor_komyo_used
		has_title_flag = emperor_suko_used
		has_title_flag = emperor_kogo_used
		has_title_flag = emperor_komatsu_used
	}
}

all_one_time_tenno_names_used_trigger = {
	k_chrysanthemum_throne =  {
		# Names used only once, or only reused post-1337
		has_title_flag = emperor_shotoku_used
		has_title_flag = emperor_konin_used
		has_title_flag = emperor_kanmu_used
		has_title_flag = emperor_heizei_used
		has_title_flag = emperor_junna_used
		has_title_flag = emperor_montoku_used
		has_title_flag = emperor_seiwa_used
		has_title_flag = emperor_yozei_used
		has_title_flag = emperor_koko_used
		has_title_flag = emperor_murakami_used
		has_title_flag = emperor_enyu_used
		has_title_flag = emperor_kazan_used
		has_title_flag = emperor_sutoku_used
		has_title_flag = emperor_konoe_used
		has_title_flag = emperor_rokujo_used
		has_title_flag = emperor_takakura_used
		has_title_flag = emperor_antoku_used
		has_title_flag = emperor_tsuchimikado_used
		has_title_flag = emperor_juntoku_used
		has_title_flag = emperor_shijo_used
		has_title_flag = emperor_kameyama_used
		has_title_flag = emperor_hanazono_used
	}
}

all_two_time_tenno_names_used_trigger = {
	k_chrysanthemum_throne =  {
		# Names reused pre-1337
		has_title_flag = emperor_ichijo_used
		has_title_flag = emperor_suzaku_used
		has_title_flag = emperor_reizei_used
		has_title_flag = emperor_sanjo_used
		has_title_flag = emperor_shirakawa_used
		has_title_flag = emperor_horikawa_used
		has_title_flag = emperor_toba_used
		has_title_flag = emperor_saga_used
		has_title_flag = emperor_fukakusa_used
		has_title_flag = emperor_ninmyo_used
		has_title_flag = emperor_uda_used
		has_title_flag = emperor_fushimi_used
		has_title_flag = emperor_nijo_used
		has_title_flag = emperor_daigo_used
	}
}

can_randomize_legendary_tenno_name_trigger = {
	could_ever_randomize_legendary_tenno_name_trigger = yes
	OR = {
		all_tenno_names_reused_trigger = yes
		NOT = {
			all_legendary_tenno_names_reused_trigger = yes
		}
		AND = {
			ai = no
			trait = zealous
			OR = {
				trait = lunatic
				trait = possessed
			}
			trait = ambitious
			trait = proud
			NOT = {
				trait = under_regency
			}
			tier = emperor
			has_regent = no
			is_tributary = no
			religion_authority = 1
			NOT = {
				any_independent_ruler = {
					tier = emperor
					religion = shinto
					NOT = {
						character = ROOT
					}
				}
			}
			completely_controls_region = world_japan
			learning = 25
			dynasty = 1000027000 # Imperial Family
			NOT = {
				k_chrysanthemum_throne = {
					has_title_flag = emperor_jimmu_used_2
				}
			}
		}
	}
}

could_ever_randomize_legendary_tenno_name_trigger = {
	OR = {
		culture = yamato
		trait = lunatic
		trait = possessed
		learning = 25
	}
	has_lifestyle_learning_trigger = yes
	has_education_learning_trigger = yes
}

can_randomize_old_tenno_name_trigger = {
	could_ever_randomize_old_tenno_name_trigger = yes
	OR = {
		all_tenno_names_reused_trigger = yes
		NOT = {
			all_old_tenno_names_reused_trigger = yes
		}
		could_ever_randomize_legendary_tenno_name_trigger = no
	}
}

could_ever_randomize_old_tenno_name_trigger = {
	OR = {
		culture = yamato
		learning = 15
		NOT = {
			year = 900
		}
		has_lifestyle_learning_trigger = yes
		has_education_learning_trigger = yes
	}
}

can_randomize_rare_tenno_name_trigger = {
	could_ever_randomize_rare_tenno_name_trigger = yes
	OR = {
		all_tenno_names_reused_trigger = yes
		NOT = {
			all_rare_tenno_names_reused_trigger = yes
		}
		could_ever_randomize_old_tenno_name_trigger = no
	}
}

could_ever_randomize_rare_tenno_name_trigger = {
	OR = {
		NOT = {
			culture = yamato
		}
		year = 1200
	}
}

can_randomize_one_time_tenno_name_trigger = {
	OR = {
		all_tenno_names_reused_trigger = yes
		AND = {
			all_two_time_tenno_names_reused_trigger = yes
			NOT = {
				all_one_time_tenno_names_reused_trigger = yes
			}
			OR = {
				NOT = {
					year = 1200
				}
				all_rare_tenno_names_used_trigger = yes
				could_ever_randomize_rare_tenno_name_trigger = no
			}
		}
	}
}

can_randomize_two_time_tenno_name_trigger = {
	OR = {
		all_tenno_names_reused_trigger = yes
		AND = {
			NOT = {
				all_two_time_tenno_names_reused_trigger = yes
			}
			OR = {
				year = 900
				all_one_time_tenno_names_used_trigger = yes
			}
		}
	}
}

can_get_jimmu_trigger = {
	ai = no
	trait = zealous
	OR = {
		trait = lunatic
		trait = possessed
	}
	trait = ambitious
	trait = proud
	NOT = {
		trait = under_regency
	}
	tier = emperor
	has_regent = no
	is_tributary = no
	religion_authority = 1
	NOT = {
		any_independent_ruler = {
			tier = emperor
			religion = shinto
			NOT = {
				character = ROOT
			}
		}
	}
	completely_controls_region = world_japan
	learning = 25
	dynasty = 1000027000 # Imperial Family
	NOT = {
		k_chrysanthemum_throne = {
			has_title_flag = emperor_jimmu_used_2
		}
	}
	NOT = {
		has_character_flag = emperor_jimmu_used
	}
}

can_get_suizei_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_suizei_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
	}
}

can_get_annei_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_annei_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
	}
}

can_get_itoku_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_itoku_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
	}
}

can_get_kosho_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_kosho_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
	}
}

can_get_koan_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_koan_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
	}
}

can_get_korei_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_korei_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
	}
}

can_get_kogen_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_kogen_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
	}
}

can_get_kaika_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_kaika_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
	}
}

can_get_sujin_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_sujin_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
	}
}

can_get_suinin_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_suinin_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
	}
}

can_get_keiko_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_keiko_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
	}
}

can_get_seimu_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_seimu_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
	}
}

can_get_chuai_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_chuai_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
	}
}

can_get_jingu_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_jingu_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
	}
}

can_get_ojin_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_ojin_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
	}
}

can_get_richu_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_richu_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
	}
}

can_get_hanzei_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_hanzei_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
	}
}

can_get_ingyo_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_ingyo_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
	}
}

can_get_anko_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_anko_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
	}
}

can_get_yuryaku_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_yuryaku_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
	}
}

can_get_seinei_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_seinei_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
	}
}

can_get_tsunuzashi_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_tsunuzashi_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
	}
}

can_get_kenzo_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_kenzo_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
	}
}

can_get_ninken_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_ninken_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
	}
}

can_get_buretsu_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_buretsu_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
	}
}

can_get_ankan_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_ankan_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
	}
}

can_get_senka_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_senka_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
	}
}

can_get_oka_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_oka_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		can_randomize_legendary_tenno_name_trigger = no
	}
}

can_get_sudojinkei_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_sudojinkei_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		can_randomize_legendary_tenno_name_trigger = no
	}
}

can_get_kasuga_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_kasuga_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		can_randomize_legendary_tenno_name_trigger = no
	}
}

can_get_sudo_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_sudo_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		can_randomize_legendary_tenno_name_trigger = no
	}
}

can_get_kinmei_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_kinmei_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		can_randomize_legendary_tenno_name_trigger = no
	}
}

can_get_bidatsu_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_bidatsu_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		can_randomize_legendary_tenno_name_trigger = no
	}
}

can_get_yomei_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_yomei_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		can_randomize_legendary_tenno_name_trigger = no
	}
}

can_get_sushun_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_sushun_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		can_randomize_legendary_tenno_name_trigger = no
	}
}

can_get_suiko_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_suiko_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		can_randomize_legendary_tenno_name_trigger = no
	}
}

can_get_jomei_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_jomei_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		can_randomize_legendary_tenno_name_trigger = no
	}
}

can_get_kogyoku_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_kogyoku_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		can_randomize_legendary_tenno_name_trigger = no
	}
}

can_get_kotoku_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_kotoku_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		can_randomize_legendary_tenno_name_trigger = no
	}
}

can_get_saimei_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_saimei_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		can_randomize_legendary_tenno_name_trigger = no
	}
}

can_get_tenji_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_tenji_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		can_randomize_legendary_tenno_name_trigger = no
	}
}

can_get_kobun_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_kobun_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		can_randomize_legendary_tenno_name_trigger = no
	}
}

can_get_tenmu_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_tenmu_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		can_randomize_legendary_tenno_name_trigger = no
	}
}

can_get_jito_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_jito_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		can_randomize_legendary_tenno_name_trigger = no
	}
}

can_get_monmu_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_monmu_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		can_randomize_legendary_tenno_name_trigger = no
	}
}

can_get_genmei_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_genmei_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		can_randomize_legendary_tenno_name_trigger = no
	}
}

can_get_gensho_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_gensho_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		can_randomize_legendary_tenno_name_trigger = no
	}
}

can_get_shomu_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_shomu_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		can_randomize_legendary_tenno_name_trigger = no
	}
}

can_get_koken_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_koken_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		can_randomize_legendary_tenno_name_trigger = no
	}
}

can_get_junnin_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_junnin_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		can_randomize_legendary_tenno_name_trigger = no
	}
}

can_get_kashiwabara_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_kashiwabara_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
		}
	}
}

can_get_nara_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_nara_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
		}
	}
}

can_get_ogimachi_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_ogimachi_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
		}
	}
}

can_get_mizunoo_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_mizunoo_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
		}
	}
}

can_get_minoo_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_minoo_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
		}
	}
}

can_get_meisho_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_meisho_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
		}
	}
}

can_get_sai_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_sai_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
		}
	}
}

can_get_reigen_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_reigen_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
		}
	}
}

can_get_higashiyama_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_higashiyama_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
		}
	}
}

can_get_nakamikado_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_nakamikado_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
		}
	}
}

can_get_sakuramachi_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_sakuramachi_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
		}
	}
}

can_get_momozono_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_momozono_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
		}
	}
}

can_get_kokaku_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_kokaku_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
		}
	}
}

can_get_ninko_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_ninko_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
		}
	}
}

can_get_komei_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_komei_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
		}
	}
}

can_get_chokei_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_chokei_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
		}
	}
}

can_get_shoko_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_shoko_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
		}
	}
}

can_get_komyo_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_komyo_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
		}
	}
}

can_get_suko_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_suko_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
		}
	}
}

can_get_kogo_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_kogo_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
		}
	}
}

can_get_komatsu_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_komatsu_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
		}
	}
}

can_get_shotoku_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_shotoku_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
			can_randomize_rare_tenno_name_trigger = no
		}
	}
}

can_get_konin_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_konin_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
			can_randomize_rare_tenno_name_trigger = no
		}
	}
}

can_get_kanmu_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_kanmu_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
			can_randomize_rare_tenno_name_trigger = no
		}
	}
}

can_get_heizei_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_heizei_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
			can_randomize_rare_tenno_name_trigger = no
		}
	}
}

can_get_junna_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_junna_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
			can_randomize_rare_tenno_name_trigger = no
		}
	}
}

can_get_montoku_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_montoku_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
			can_randomize_rare_tenno_name_trigger = no
		}
	}
}

can_get_seiwa_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_seiwa_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
			can_randomize_rare_tenno_name_trigger = no
		}
	}
}

can_get_yozei_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_yozei_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
			can_randomize_rare_tenno_name_trigger = no
		}
	}
}

can_get_koko_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_koko_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
			can_randomize_rare_tenno_name_trigger = no
		}
	}
}

can_get_murakami_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_murakami_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
			can_randomize_rare_tenno_name_trigger = no
		}
	}
}

can_get_enyu_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_enyu_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
			can_randomize_rare_tenno_name_trigger = no
		}
	}
}

can_get_kazan_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_kazan_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
			can_randomize_rare_tenno_name_trigger = no
		}
	}
}

can_get_sutoku_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_sutoku_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
			can_randomize_rare_tenno_name_trigger = no
		}
	}
}

can_get_konoe_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_konoe_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
			can_randomize_rare_tenno_name_trigger = no
		}
	}
}

can_get_rokujo_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_rokujo_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
			can_randomize_rare_tenno_name_trigger = no
		}
	}
}

can_get_takakura_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_takakura_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
			can_randomize_rare_tenno_name_trigger = no
		}
	}
}

can_get_antoku_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_antoku_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
			can_randomize_rare_tenno_name_trigger = no
		}
	}
}

can_get_tsuchimikado_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_tsuchimikado_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
			can_randomize_rare_tenno_name_trigger = no
		}
	}
}

can_get_juntoku_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_juntoku_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
			can_randomize_rare_tenno_name_trigger = no
		}
	}
}

can_get_shijo_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_shijo_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
			can_randomize_rare_tenno_name_trigger = no
		}
	}
}

can_get_kameyama_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_kameyama_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
			can_randomize_rare_tenno_name_trigger = no
		}
	}
}

can_get_hanazono_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_hanazono_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
			can_randomize_rare_tenno_name_trigger = no
		}
	}
}

can_get_ichijo_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_ichijo_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
			can_randomize_rare_tenno_name_trigger = no
			can_randomize_one_time_tenno_name_trigger = no
		}
	}
}

can_get_suzaku_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_suzaku_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
			can_randomize_rare_tenno_name_trigger = no
			can_randomize_one_time_tenno_name_trigger = no
		}
	}
}

can_get_reizei_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_reizei_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
			can_randomize_rare_tenno_name_trigger = no
			can_randomize_one_time_tenno_name_trigger = no
		}
	}
}

can_get_sanjo_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_sanjo_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
			can_randomize_rare_tenno_name_trigger = no
			can_randomize_one_time_tenno_name_trigger = no
		}
	}
}

can_get_shirakawa_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_shirakawa_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
			can_randomize_rare_tenno_name_trigger = no
			can_randomize_one_time_tenno_name_trigger = no
		}
	}
}

can_get_horikawa_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_horikawa_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
			can_randomize_rare_tenno_name_trigger = no
			can_randomize_one_time_tenno_name_trigger = no
		}
	}
}

can_get_toba_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_toba_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
			can_randomize_rare_tenno_name_trigger = no
			can_randomize_one_time_tenno_name_trigger = no
		}
	}
}

can_get_saga_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_saga_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
			can_randomize_rare_tenno_name_trigger = no
			can_randomize_one_time_tenno_name_trigger = no
		}
	}
}

can_get_fukakusa_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_fukakusa_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
			can_randomize_rare_tenno_name_trigger = no
			can_randomize_one_time_tenno_name_trigger = no
		}
	}
}

can_get_ninmyo_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_ninmyo_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
			can_randomize_rare_tenno_name_trigger = no
			can_randomize_one_time_tenno_name_trigger = no
		}
	}
}

can_get_uda_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_uda_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
			can_randomize_rare_tenno_name_trigger = no
			can_randomize_one_time_tenno_name_trigger = no
		}
	}
}

can_get_fushimi_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_fushimi_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
			can_randomize_rare_tenno_name_trigger = no
			can_randomize_one_time_tenno_name_trigger = no
		}
	}
}

can_get_nijo_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_nijo_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
			can_randomize_rare_tenno_name_trigger = no
			can_randomize_one_time_tenno_name_trigger = no
		}
	}
}

can_get_daigo_trigger = {
	OR = {
		NOT = {
			k_chrysanthemum_throne = {
				has_title_flag = emperor_daigo_used_2
			}
		}
		all_tenno_names_reused_trigger = yes
		AND = {
			can_randomize_legendary_tenno_name_trigger = no
			can_randomize_old_tenno_name_trigger = no
			can_randomize_rare_tenno_name_trigger = no
			can_randomize_one_time_tenno_name_trigger = no
		}
	}
}

# For usurpation checks and abdication logic
is_possible_tenno_trigger = {
	k_chrysanthemum_throne = {
		holder_scope = {
			dynasty = PREVPREV # Must be checked!
		}
	}
	OR = {
		k_chrysanthemum_throne = {
			has_law = true_cognatic_succession
		}
		is_female = no
	}
	OR = {
		is_landed = no
		is_feudal = yes
	}
	religion = shinto # Vanilla is strict when it comes to religion and rel head succession, so we should probably be as strict in case there are issues...;;;;;;;;;;;;;x
	NOT = {
		trait = bastard
	}
	OR = { #Candidate should not be a landless Courtier that is about to inherit a Theocracy or Republic
		AND = {
			is_ruler = yes
			is_landed = yes
			is_republic = no
			is_merchant_republic = no
			#is_theocracy = no
		}
		NOR = {
			any_heir_title = {
				is_republic = yes
			}
			any_heir_title = {
				is_merchant_republic = yes
			}
			#any_heir_title = {
			#	is_theocracy = yes
			#}
		}
	}
	NOR = {
		trait = cat
		trait = disinherited
		trait = horse
		trait = eunuch
		AND = { 
			trait = bastard 
			is_ruler = no
		}
		is_ascetic_trigger = yes
		#is_theocracy = yes
		is_republic = yes
		is_merchant_republic = yes
		trait = sent_to_china
		#trait = retired_emperor # Actually fine here!
		trait = dragon_bride_unmarried
		trait = dragon_bride_married
	}
	trait = amaterasu_descendant # Should be irrelevant, but...
	any_owned_bloodline = {
		has_bloodline_flag = imperial_family
		bloodline_is_active_for = PREV # Only agnates!
	}
	OR = {
		father_even_if_dead = { # Somewhat clunky way to try to weed out matri-marriages to Minamotos/etc.
			k_chrysanthemum_throne = {
				holder_scope = {
					dynasty = PREVPREV # Must be checked!
				}
			}
			father_even_if_dead = {
				k_chrysanthemum_throne = {
					holder_scope = {
						dynasty = PREVPREV # Must be checked!
					}
				}
				father_even_if_dead = {
					k_chrysanthemum_throne = {
						holder_scope = {
							dynasty = PREVPREV # Must be checked!
						}
					}
					father_even_if_dead = {
						k_chrysanthemum_throne = {
							holder_scope = {
								dynasty = PREVPREV # Must be checked!
							}
						}
					}
				}
			}
		}
		NOT = {
			dynasty = 1000027000 # Imperial Family
		}
	}
	# Special marriage stuff
	OR = {
		AND = {
			is_married = no
			is_consort = no
		}
		NOR = {
			AND = { # Not a matrilineally married man (unless married inside the Imperial Family)
				is_female = no
				is_married_matrilineally = yes
				spouse = {
					NOT = {
						k_chrysanthemum_throne = {
							holder_scope = {
								dynasty = PREVPREV
							}
						}
					}
				}
			}
			AND = { # Not a male concubine
				is_female = no
				is_consort = yes
				is_senior_consort_party = no
			}
			AND = { # Female candidates cannot be married to another dynasty, period!
				is_female = yes
				is_consort = yes
				any_consort = {
					NOT = {
						k_chrysanthemum_throne = {
							holder_scope = {
								dynasty = PREVPREV
							}
						}
					}
				}
			}
			AND = { # Female candidates cannot be married to another dynasty, period!
				is_female = yes
				is_married = yes
				spouse = {
					NOT = {
						k_chrysanthemum_throne = {
							holder_scope = {
								dynasty = PREVPREV
							}
						}
					}
				}
			}
		}
	}
}

is_possible_tenno_not_shinto_trigger = {
	k_chrysanthemum_throne = {
		holder_scope = {
			dynasty = PREVPREV # Must be checked!
		}
	}
	OR = {
		k_chrysanthemum_throne = {
			has_law = true_cognatic_succession
		}
		is_female = no
	}
	NOT = {
		religion = shinto
	}
	OR = {
		is_landed = no
		is_feudal = yes
	}
	can_have_japanese_bureaucracy_and_feudal_trigger = yes
	NAND = {
		religion = ryukyuan_pagan_reformed
		any_dynasty_member = {
			religion = ryukyuan_pagan_reformed
			controls_religion = yes
			government = divine_imperial_government
		}
	}
	NOT = {
		trait = zealous
	}
	NOT = {
		trait = bastard
	}
	OR = { #Candidate should not be a landless Courtier that is about to inherit a Theocracy or Republic
		AND = {
			is_ruler = yes
			is_landed = yes
			is_republic = no
			is_merchant_republic = no
			#is_theocracy = no
		}
		NOR = {
			any_heir_title = {
				is_republic = yes
			}
			any_heir_title = {
				is_merchant_republic = yes
			}
			#any_heir_title = {
			#	is_theocracy = yes
			#}
		}
	}
	NOR = {
		trait = cat
		trait = disinherited
		trait = horse
		trait = eunuch
		AND = { 
			trait = bastard 
			is_ruler = no
		}
		is_ascetic_trigger = yes
		#is_theocracy = yes
		is_republic = yes
		is_merchant_republic = yes
		trait = sent_to_china
		#trait = retired_emperor # Actually fine here!
		trait = dragon_bride_unmarried
		trait = dragon_bride_married
	}
	trait = amaterasu_descendant # Should be irrelevant, but...
	any_owned_bloodline = {
		has_bloodline_flag = imperial_family
		bloodline_is_active_for = PREV # Only agnates!
	}
	OR = {
		father_even_if_dead = { # Somewhat clunky way to try to weed out matri-marriages to Minamotos/etc.
			k_chrysanthemum_throne = {
				holder_scope = {
					dynasty = PREVPREV # Must be checked!
				}
			}
			father_even_if_dead = {
				k_chrysanthemum_throne = {
					holder_scope = {
						dynasty = PREVPREV # Must be checked!
					}
				}
				father_even_if_dead = {
					k_chrysanthemum_throne = {
						holder_scope = {
							dynasty = PREVPREV # Must be checked!
						}
					}
					father_even_if_dead = {
						k_chrysanthemum_throne = {
							holder_scope = {
								dynasty = PREVPREV # Must be checked!
							}
						}
					}
				}
			}
		}
		NOT = {
			dynasty = 1000027000 # Imperial Family
		}
	}
	# Special marriage stuff
	OR = {
		AND = {
			is_married = no
			is_consort = no
		}
		NOR = {
			AND = { # Not a matrilineally married man (unless married inside the Imperial Family)
				is_female = no
				is_married_matrilineally = yes
				spouse = {
					NOT = {
						k_chrysanthemum_throne = {
							holder_scope = {
								dynasty = PREVPREV
							}
						}
					}
				}
			}
			AND = { # Not a male concubine
				is_female = no
				is_consort = yes
				is_senior_consort_party = no
			}
			AND = { # Female candidates cannot be married to another dynasty, period!
				is_female = yes
				is_consort = yes
				any_consort = {
					NOT = {
						k_chrysanthemum_throne = {
							holder_scope = {
								dynasty = PREVPREV
							}
						}
					}
				}
			}
			AND = { # Female candidates cannot be married to another dynasty, period!
				is_female = yes
				is_married = yes
				spouse = {
					NOT = {
						k_chrysanthemum_throne = {
							holder_scope = {
								dynasty = PREVPREV
							}
						}
					}
				}
			}
		}
	}
}

could_be_restored_to_imperial_family_potential_trigger = {
	NOT = {
		dynasty = 1000027000 # Imperial Family
	}
	trait = amaterasu_descendant # Should be irrelevant, but...
	any_owned_bloodline = {
		has_bloodline_flag = imperial_family
		bloodline_is_active_for = PREV # Only agnates!
	}
	NOT = {
		trait = bastard
	}
	OR = {
		is_landed = no
		is_feudal = yes
	}
	NOR = {
		trait = cat
		trait = disinherited
		trait = horse
		trait = eunuch
		AND = { 
			trait = bastard 
			is_ruler = no
		}
		is_ascetic_trigger = yes
		#is_theocracy = yes
		is_republic = yes
		is_merchant_republic = yes
		trait = sent_to_china
		#trait = retired_emperor # Actually fine here!
		trait = dragon_bride_unmarried
		trait = dragon_bride_married
	}
}

could_be_restored_to_imperial_family_allow_trigger = {
	is_ruler = no # Don't mess with rulers!
	NOR = {
		any_heir_title = {
			is_republic = yes
		}
		any_heir_title = {
			is_merchant_republic = yes
		}
		#any_heir_title = {
		#	is_theocracy = yes
		#}
	}
	OR = {
		is_landed = no
		is_feudal = yes
	}
	NOT = {
		any_heir_title = {
			holder_scope = {
				dynasty = PREVPREV # Don't steal someone's dynastic heir!
			}
		}
	}
	# Somewhat clunky patrilineality check going 20 generations back; we WANT to overkill this!
	custom_tooltip = {
		text = forfathers_are_dead_or_dynastic
		father_even_if_dead = { # 1
			OR = {
				is_alive = no
				dynasty = 1000027000 # Imperial Family
			}
			NOT = {
				trait = bastard
			}
			father_even_if_dead = { # 2
				OR = {
					is_alive = no
					dynasty = 1000027000 # Imperial Family
				}
				NOT = {
					trait = bastard
				}
				father_even_if_dead = { # 3
					OR = {
						is_alive = no
						dynasty = 1000027000 # Imperial Family
					}
					NOT = {
						trait = bastard
					}
					father_even_if_dead = { # 4
						OR = {
							is_alive = no
							dynasty = 1000027000 # Imperial Family
						}
						NOT = {
							trait = bastard
						}
						father_even_if_dead = { # 5
							OR = {
								is_alive = no
								dynasty = 1000027000 # Imperial Family
							}
							NOT = {
								trait = bastard
							}
							father_even_if_dead = { # 6
								OR = {
									is_alive = no
									dynasty = 1000027000 # Imperial Family
								}
								NOT = {
									trait = bastard
								}
								father_even_if_dead = { # 7
									OR = {
										is_alive = no
										dynasty = 1000027000 # Imperial Family
									}
									NOT = {
										trait = bastard
									}
									father_even_if_dead = { # 8
										OR = {
											is_alive = no
											dynasty = 1000027000 # Imperial Family
										}
										NOT = {
											trait = bastard
										}
										father_even_if_dead = { # 9
											OR = {
												is_alive = no
												dynasty = 1000027000 # Imperial Family
											}
											NOT = {
												trait = bastard
											}
											father_even_if_dead = { # 10
												OR = {
													is_alive = no
													dynasty = 1000027000 # Imperial Family
												}
												NOT = {
													trait = bastard
												}
												father_even_if_dead = { # 11
													OR = {
														is_alive = no
														dynasty = 1000027000 # Imperial Family
													}
													NOT = {
														trait = bastard
													}
													father_even_if_dead = { # 12
														OR = {
															is_alive = no
															dynasty = 1000027000 # Imperial Family
														}
														NOT = {
															trait = bastard
														}
														father_even_if_dead = { # 13
															OR = {
																is_alive = no
																dynasty = 1000027000 # Imperial Family
															}
															NOT = {
																trait = bastard
															}
															father_even_if_dead = { # 14
																OR = {
																	is_alive = no
																	dynasty = 1000027000 # Imperial Family
																}
																NOT = {
																	trait = bastard
																}
																father_even_if_dead = { # 15
																	OR = {
																		is_alive = no
																		dynasty = 1000027000 # Imperial Family
																	}
																	NOT = {
																		trait = bastard
																	}
																	father_even_if_dead = { # 16
																		OR = {
																			is_alive = no
																			dynasty = 1000027000 # Imperial Family
																		}
																		NOT = {
																			trait = bastard
																		}
																		father_even_if_dead = { # 17
																			OR = {
																				is_alive = no
																				dynasty = 1000027000 # Imperial Family
																			}
																			NOT = {
																				trait = bastard
																			}
																			father_even_if_dead = { # 18
																				OR = {
																					is_alive = no
																					dynasty = 1000027000 # Imperial Family
																				}
																				NOT = {
																					trait = bastard
																				}
																				father_even_if_dead = { # 19
																					OR = {
																						is_alive = no
																						dynasty = 1000027000 # Imperial Family
																					}
																					NOT = {
																						trait = bastard
																					}
																					father_even_if_dead = { # 20
																						OR = {
																							is_alive = no
																							dynasty = 1000027000 # Imperial Family
																						}
																						NOT = {
																							trait = bastard
																						}
																					}
																				}
																			}
																		}
																	}
																}
															}
														}
													}
												}
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
}

could_be_restored_to_imperial_family_ai_qualifier = { # To ensure that people that couldn't inherit aren't restored
	# Special marriage stuff
	OR = {
		AND = {
			is_married = no
			is_consort = no
		}
		OR = {
			is_landed = no
			is_feudal = yes
		}
		NOR = {
			AND = { # Not a matrilineally married man (unless married inside the Imperial Family)
				is_female = no
				is_married_matrilineally = yes
				spouse = {
					NOT = {
						k_chrysanthemum_throne = {
							holder_scope = {
								dynasty = PREVPREV
							}
						}
					}
				}
			}
			AND = { # Not a male concubine
				is_female = no
				is_consort = yes
				is_senior_consort_party = no
			}
			AND = { # Female candidates cannot be married to another dynasty, period!
				is_female = yes
				is_consort = yes
				any_consort = {
					NOT = {
						k_chrysanthemum_throne = {
							holder_scope = {
								dynasty = PREVPREV
							}
						}
					}
				}
			}
			AND = { # Female candidates cannot be married to another dynasty, period!
				is_female = yes
				is_married = yes
				spouse = {
					NOT = {
						k_chrysanthemum_throne = {
							holder_scope = {
								dynasty = PREVPREV
							}
						}
					}
				}
			}
		}
	}
	# Gender law check
	OR = {
		is_female = no
		k_chrysanthemum_throne = {
			has_law = true_cognatic_succession
		}
	}
}