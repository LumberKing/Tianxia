# change_council_job_potential_trigger
# can_be_chancellor_trigger
# can_be_marshal_trigger
# can_be_treasurer_trigger
# can_be_spymaster_trigger
# can_be_spiritual_trigger
# can_be_councilmember_king_trigger
# can_be_councilmember_emperor_trigger
# can_be_commander_trigger
# can_be_commander_trigger_no_fromfrom

# is_council_eunuch_trigger
# can_be_chinese_chancellor_trigger
# can_be_chinese_marshal_trigger
# can_be_chinese_treasurer_trigger
# can_be_chinese_spymaster_trigger
# can_be_chinese_spiritual_trigger
# can_be_chinese_councilmember_trigger
# can_be_chinese_designated_regent_trigger
# can_be_council_eunuch_trigger

# can_fire_voter_trigger
# can_fire_grand_chancellor_trigger
# can_fire_chinese_councillor_trigger
# can_fire_japanese_councillor_trigger

# ere_elective_politician_titles_trigger
# can_still_be_commander_byzantine_trigger
# can_still_be_marshal_byzantine_trigger
# byzantines_can_grant_commander_trigger

### Council Jobs ###

# Used with character interaction to swap council job. DO NOT REMOVE
# ROOT is councillor
# FROM is liege
change_council_job_potential_trigger = {
	vassal_of = FROM

	trigger_if = {
		limit = {
			has_job_title = job_spiritual
			liege = { religion_group = muslim }
		}

		NOT = { religion = FROM }
	}

	trigger_if = {
		limit = {
			OR = {
				has_minor_title = title_councilmember_king
				has_minor_title = title_councilmember_emperor
			}
		}

		OR = {
			can_be_chancellor_trigger = yes
			can_be_marshal_trigger = yes
			can_be_treasurer_trigger = yes
			can_be_spymaster_trigger = yes

			AND = {
				can_be_spiritual_trigger = yes
				ROOT = { NOT = { religion_group = muslim } }
			}
		}
	}
	trigger_else = {
		OR = {
			has_job_title = job_chancellor
			has_job_title = job_marshal
			has_job_title = job_treasurer
			has_job_title = job_spymaster
			has_job_title = job_spiritual
		}

		liege = {
			OR = {
				job_chancellor = {
					NOT = { character = ROOT }
					can_swap_job_title = ROOT
				}

				job_marshal = {
					NOT = { character = ROOT }
					can_swap_job_title = ROOT
				}

				job_treasurer = {
					NOT = { character = ROOT }
					can_swap_job_title = ROOT
				}

				job_spymaster = {
					NOT = { character = ROOT }
					can_swap_job_title = ROOT
				}

				job_spiritual = {
					NOT = { character = ROOT }
					can_swap_job_title = ROOT
				}
			}
		}
	}
}

# THIS is potential councillor
can_be_chancellor_trigger = {
	independent = no
	prisoner = no
	is_incapable = no
	
	can_be_chinese_chancellor_trigger = yes

	NOR = {
		trait = in_hiding
		has_character_modifier = resigned_in_anger
		has_character_modifier = forced_off_the_council

		reverse_has_opinion_modifier = {
			name = opinion_resigned_from_council
			who = liege
		}
	}
	
	trigger_if = {
		limit = {
			is_landed = yes
			any_owned_bloodline = {
				has_bloodline_flag = grand_chancellor_bloodline
				bloodline_is_active_for = PREV
			}
		}
		
		always = yes
	}
	
	trigger_else_if = {
		limit = { NOT = { has_character_flag = special_chancellor } }

		is_adult = yes

		trigger_if = {
			limit = {
				NOT = { trait = horse }
			}

			trigger_if = {
				limit = { is_female = yes }

				liege = {
					OR = {
						has_religion_feature = religion_matriarchal
						has_religion_feature = religion_equal
						has_religion_feature = religion_feature_bon
						has_religion_feature = religion_feature_bai
						has_religion_feature = religion_feature_minahasan
						has_religion_feature = religion_feature_ryukyuan
						has_religion_feature = religion_feature_minangkabau

						# Some religions don't mind so much who does what
						trigger_if = {
							limit = {
								OR = {
									religion = cathar
									religion = messalian
								}
							}

							religion = PREV
						}
						
						AND = {
							religion_openly_minahasan_or_reformed_trigger = yes
							NOT = {
								has_religion_feature = religion_patriarchal
							}
						}
						
						AND = {
							religion_openly_minangkabau_or_reformed_trigger = yes
							NOT = {
								has_religion_feature = religion_patriarchal
							}
						}

						# Laws permitting
						trigger_if = {
							limit = {
								OR = {
									has_law = status_of_women_2
									has_law = status_of_women_3
								}
							}

							PREV = {
								OR = {
									dynasty = PREV
									is_close_relative = PREV
									is_married = PREV
									is_consort = PREV
									is_landed = yes
									trait = nun
								}
							}
						}
						trigger_else = {
							has_law = status_of_women_4
						}

						# Other conditions under which females can be employed
						has_game_rule = {
							name = gender
							value = all
						}
					}
				}
			}
			trigger_else = {
				liege = {
					NOR = {
						has_religion_feature = religion_matriarchal
						has_religion_feature = religion_feature_minangkabau
					}
				}
			}
		}
	}
}

can_be_marshal_trigger = {
	independent = no
	prisoner = no
	is_incapable = no
	
	can_be_chinese_marshal_trigger = yes

	NOR = {
		trait = in_hiding
		has_character_modifier = resigned_in_anger
		has_character_modifier = forced_off_the_council

		reverse_has_opinion_modifier = {
			name = opinion_resigned_from_council
			who = liege
		}
	}
	
	trigger_if = {
		limit = {
			is_landed = yes
			any_owned_bloodline = {
				has_bloodline_flag = grand_chancellor_bloodline
				bloodline_is_active_for = PREV
			}
		}
		
		always = yes
	}
	
	trigger_else_if = {
		limit = { NOT = { has_character_flag = special_marshal } }

		is_adult = yes

		trigger_if = {
			limit = {
				OR = {
					religion = hindu
					religion = kejawen
				}
			}
			trait = kshatriya
		}
		trigger_if = {
			limit = {
				NOT = { trait = horse }
			}

			trigger_if = {
				limit = { is_female = yes }

				liege = {
					OR = {
						has_religion_feature = religion_matriarchal
						has_religion_feature = religion_equal
						has_religion_feature = religion_feature_bon
						has_religion_feature = religion_feature_bai
						has_religion_feature = religion_feature_minahasan
						has_religion_feature = religion_feature_ryukyuan
						has_religion_feature = religion_feature_minangkabau
						
						AND = {
							religion_openly_minahasan_or_reformed_trigger = yes
							NOT = {
								has_religion_feature = religion_patriarchal
							}
						}
						
						AND = {
							religion_openly_minangkabau_or_reformed_trigger = yes
							NOT = {
								has_religion_feature = religion_patriarchal
							}
						}

						# Some religions don't mind so much who does what
						trigger_if = {
							limit = {
								OR = {
									religion = cathar
									religion = messalian
								}
							}

							religion = PREV
						}

						# Laws permitting
						trigger_if = {
							limit = { has_law = status_of_women_3 }

							PREV = {
								OR = {
									dynasty = PREV
									is_close_relative = PREV
									is_married = PREV
									is_consort = PREV
									is_landed = yes
									trait = nun
								}
							}
						}
						trigger_else = {
							has_law = status_of_women_4
						}

						# Other conditions under which females can be employed
						has_game_rule = {
							name = gender
							value = all
						}
					}
				}
			}
			trigger_else = {
				liege = {
					NOR = {
						has_religion_feature = religion_matriarchal
						has_religion_feature = religion_feature_minangkabau
					}
				}
			}
		}
	}
}

can_be_treasurer_trigger = {
	independent = no
	prisoner = no
	is_incapable = no
	
	can_be_chinese_treasurer_trigger = yes

	NOR = {
		trait = in_hiding
		has_character_modifier = resigned_in_anger
		has_character_modifier = forced_off_the_council

		reverse_has_opinion_modifier = {
			name = opinion_resigned_from_council
			who = liege
		}
	}
	
	trigger_if = {
		limit = {
			is_landed = yes
			any_owned_bloodline = {
				has_bloodline_flag = grand_chancellor_bloodline
				bloodline_is_active_for = PREV
			}
		}
		
		always = yes
	}
	
	trigger_else_if = {
		limit = { NOT = { has_character_flag = special_treasurer } }

		is_adult = yes

		trigger_if = {
			limit = {
				NOT = { trait = horse }
			}

			trigger_if = {
				limit = { is_female = yes }

				liege = {
					OR = {
						has_religion_feature = religion_matriarchal
						has_religion_feature = religion_equal
						has_religion_feature = religion_feature_bon
						has_religion_feature = religion_feature_bai
						has_religion_feature = religion_feature_minahasan
						has_religion_feature = religion_feature_ryukyuan
						has_religion_feature = religion_feature_minangkabau
						
						AND = {
							religion_openly_minahasan_or_reformed_trigger = yes
							NOT = {
								has_religion_feature = religion_patriarchal
							}
						}
						
						AND = {
							religion_openly_minangkabau_or_reformed_trigger = yes
							NOT = {
								has_religion_feature = religion_patriarchal
							}
						}

						# Some religions don't mind so much who does what
						trigger_if = {
							limit = {
								OR = {
									religion = cathar
									religion = messalian
								}
							}

							religion = PREV
						}

						# Laws permitting
						trigger_if = {
							limit = {
								OR = {
									has_law = status_of_women_2
									has_law = status_of_women_3
								}
							}

							PREV = {
								OR = {
									dynasty = PREV
									is_close_relative = PREV
									is_married = PREV
									is_consort = PREV
									is_landed = yes
									trait = nun
								}
							}
						}
						trigger_else = {
							has_law = status_of_women_4
						}

						# Other conditions under which females can be employed
						has_game_rule = {
							name = gender
							value = all
						}
					}
				}
			}
			trigger_else = {
				liege = {
					NOR = {
						has_religion_feature = religion_matriarchal
						has_religion_feature = religion_feature_minangkabau
					}
				}
			}
		}
	}
}

can_be_spymaster_trigger = {
	independent = no
	prisoner = no
	is_incapable = no
	
	can_be_chinese_spymaster_trigger = yes

	NOR = {
		trait = in_hiding
		has_character_modifier = resigned_in_anger
		has_character_modifier = forced_off_the_council

		reverse_has_opinion_modifier = {
			name = opinion_resigned_from_council
			who = liege
		}
	}
	
	trigger_if = {
		limit = {
			is_landed = yes
			any_owned_bloodline = {
				has_bloodline_flag = grand_chancellor_bloodline
				bloodline_is_active_for = PREV
			}
		}
		
		always = yes
	}
	
	trigger_else_if = {
		limit = { NOT = { has_character_flag = special_spymaster } }

		is_adult = yes

		trigger_if = {
			limit = {
				NOT = { trait = horse }
			}

			trigger_if = {
				limit = { is_female = yes }

				liege = {
					OR = {
						# Special conditions for spymaster position
						trigger_if = {
							limit = {
								OR = {
									is_married = PREV
									is_mother = PREV
								}
							}
							NOR = {
								has_religion_feature = religion_patriarchal
								has_religion_feature = religion_feature_batak
								has_religion_feature = religion_feature_yi
							}
						}

						has_religion_feature = religion_matriarchal
						has_religion_feature = religion_equal
						has_religion_feature = religion_feature_bon
						has_religion_feature = religion_feature_bai
						has_religion_feature = religion_feature_minahasan
						has_religion_feature = religion_feature_ryukyuan
						has_religion_feature = religion_feature_minangkabau
						
						AND = {
							religion_openly_minahasan_or_reformed_trigger = yes
							NOT = {
								has_religion_feature = religion_patriarchal
							}
						}
						
						AND = {
							religion_openly_minangkabau_or_reformed_trigger = yes
							NOT = {
								has_religion_feature = religion_patriarchal
							}
						}

						# Some religions don't mind so much who does what
						trigger_if = {
							limit = {
								OR = {
									religion = cathar
									religion = messalian
								}
							}

							religion = PREV
						}
						trigger_else_if = {
							limit = {
								religion_group = pagan_group
								NOR = {
									has_religion_feature = religion_patriarchal
									has_religion_feature = religion_feature_batak
									has_religion_feature = religion_feature_yi
								}
							}

							religion_group = PREV
						}

						# Laws permitting
						trigger_if = {
							limit = {
								OR = {
									has_law = status_of_women_1
									has_law = status_of_women_2
									has_law = status_of_women_3
								}
							}

							PREV = {
								OR = {
									dynasty = PREV
									is_close_relative = PREV
									is_married = PREV
									is_consort = PREV
									is_landed = yes
									trait = nun
								}
							}
						}
						trigger_else = {
							has_law = status_of_women_4
						}

						# Other conditions under which females can be employed
						has_game_rule = {
							name = gender
							value = all
						}
					}
				}
			}
			trigger_else = {
				liege = {
					NOR = {
						has_religion_feature = religion_matriarchal
						has_religion_feature = religion_feature_minangkabau
					}
				}
			}
		}
	}
}

can_be_spiritual_trigger = {
	religion = liege
	independent = no
	prisoner = no
	is_incapable = no
	
	can_be_chinese_spiritual_trigger = yes

	NOR = {
		trait = in_hiding
		has_character_modifier = resigned_in_anger
		has_character_modifier = forced_off_the_council

		reverse_has_opinion_modifier = {
			name = opinion_resigned_from_council
			who = liege
		}
	}
	
	trigger_if = {
		limit = { NOT = { has_character_flag = special_spiritual } }

		is_adult = yes

		trigger_if = {
			limit = { is_female = yes }

			OR = {
				religion_allows_female_temple_holders = yes
				has_religion_feature = religion_matriarchal
				has_religion_feature = religion_feature_minangkabau
			}
		}
		trigger_else = {
			OR = {
				religion_allows_male_temple_holders = yes
				has_religion_feature = religion_patriarchal
				has_religion_feature = religion_feature_batak
				has_religion_feature = religion_feature_yi
			}
		}

		trigger_if = {
			limit = { religion = hindu }

			OR = {
				trait = brahmin
				is_ascetic_trigger = yes
			}
		}
		trigger_else_if = {
			limit = { religion_group = muslim }
			has_education_learning_trigger = yes
		}

		trigger_if = {
			limit = {
				is_theocracy = no
				NOT = { religion_group = muslim }
			}

			trigger_if = {
				limit = { clan = yes }
				liege = { is_nomadic = yes }
			}
			trigger_else_if = {
				limit = {
					liege = {
						has_autocephaly = yes
						is_tribal = no

						OR = {
							any_vassal = {
								is_theocracy = yes
								is_voter = no
							}

							job_spiritual = { is_theocracy = yes }
						}
					}
				}

				is_theocracy = yes
			}
			trigger_else = {
				is_ruler = no
			}
		}
	}
}

can_be_councilmember_king_trigger = {
	is_adult = yes
	independent = no
	prisoner = no
	is_incapable = no
	
	can_be_chinese_councilmember_trigger = yes

	NOR = {
		trait = in_hiding
		has_character_modifier = resigned_in_anger
		has_character_modifier = forced_off_the_council

		reverse_has_opinion_modifier = {
			name = opinion_resigned_from_council
			who = liege
		}
	}
	
	trigger_if = {
		limit = {
			is_landed = yes
			any_owned_bloodline = {
				has_bloodline_flag = grand_chancellor_bloodline
				bloodline_is_active_for = PREV
			}
		}
		
		always = yes
	}
	
	trigger_else_if = {
		limit = { is_female = yes }

		liege = {
			OR = {
				has_religion_feature = religion_matriarchal
				has_religion_feature = religion_equal
				has_religion_feature = religion_feature_bon
				has_religion_feature = religion_feature_bai
				has_religion_feature = religion_feature_minahasan
				has_religion_feature = religion_feature_ryukyuan
				has_religion_feature = religion_feature_minangkabau
						
				AND = {
					religion_openly_minahasan_or_reformed_trigger = yes
					NOT = {
						has_religion_feature = religion_patriarchal
					}
				}
				
				AND = {
					religion_openly_minangkabau_or_reformed_trigger = yes
					NOT = {
						has_religion_feature = religion_patriarchal
					}
				}

				# Some religions don't mind so much who does what
				trigger_if = {
					limit = {
						OR = {
							religion = cathar
							religion = messalian
						}
					}

					religion = PREV
				}

				# Laws permitting
				trigger_if = {
					limit = {
						OR = {
							has_law = status_of_women_1
							has_law = status_of_women_2
							has_law = status_of_women_3
						}
					}

					PREV = { is_landed = yes }
				}
				trigger_else = {
					has_law = status_of_women_4
				}

				# Other conditions under which females can be employed
				has_game_rule = {
					name = gender
					value = all
				}
			}
		}
	}
	trigger_else = {
		liege = {
			NOR = {
				has_religion_feature = religion_matriarchal
				has_religion_feature = religion_feature_minangkabau
			}
		}
	}
}

can_be_councilmember_emperor_trigger = {
	is_adult = yes
	independent = no
	prisoner = no
	is_incapable = no
	
	can_be_chinese_councilmember_trigger = yes

	NOR = {
		trait = in_hiding
		has_character_modifier = resigned_in_anger
		has_character_modifier = forced_off_the_council

		reverse_has_opinion_modifier = {
			name = opinion_resigned_from_council
			who = liege
		}
	}
	
	trigger_if = {
		limit = {
			is_landed = yes
			any_owned_bloodline = {
				has_bloodline_flag = grand_chancellor_bloodline
				bloodline_is_active_for = PREV
			}
		}
		
		always = yes
	}
	
	trigger_else_if = {
		limit = { is_female = yes }

		liege = {
			OR = {
				has_religion_feature = religion_matriarchal
				has_religion_feature = religion_equal
				has_religion_feature = religion_feature_bon
				has_religion_feature = religion_feature_bai
				has_religion_feature = religion_feature_minahasan
				has_religion_feature = religion_feature_ryukyuan
				has_religion_feature = religion_feature_minangkabau
						
				AND = {
					religion_openly_minahasan_or_reformed_trigger = yes
					NOT = {
						has_religion_feature = religion_patriarchal
					}
				}
				
				AND = {
					religion_openly_minangkabau_or_reformed_trigger = yes
					NOT = {
						has_religion_feature = religion_patriarchal
					}
				}

				# Some religions don't mind so much who does what
				trigger_if = {
					limit = {
						OR = {
							religion = cathar
							religion = messalian
						}
					}

					religion = PREV
				}

				# Laws permitting
				trigger_if = {
					limit = {
						OR = {
							has_law = status_of_women_1
							has_law = status_of_women_2
							has_law = status_of_women_3
						}
					}

					PREV = { is_landed = yes }
				}
				trigger_else = {
					has_law = status_of_women_4
				}

				# Other conditions under which females can be employed
				has_game_rule = {
					name = gender
					value = all
				}
			}
		}
	}
	trigger_else = {
		liege = {
			NOR = {
				has_religion_feature = religion_matriarchal
				has_religion_feature = religion_feature_minangkabau
			}
		}
	}
}

can_be_commander_trigger = {
	trigger_if = {
		limit = {
			NOT = { has_character_flag = special_marshal }
		}

		OR = {
			male_can_hold_minor_title_trigger = yes
			female_can_hold_minor_commander_title_trigger = yes
		}

		trigger_if = {
			limit = {
				OR = {
					religion = hindu
					religion = kejawen
				}
			}
			trait = kshatriya
		}

		is_adult = yes
	}

	is_inaccessible_or_incapable_trigger = no

	NOR = {
		has_character_modifier = guru
		has_character_modifier = refusing_to_lead
		war_with = FROMFROM

		any_liege = {
			war_with = FROMFROM
		}
	}
}

can_be_commander_trigger_no_fromfrom = {
	trigger_if = {
		limit = {
			NOT = { has_character_flag = special_marshal }
		}

		OR = {
			male_can_hold_minor_title_trigger = yes
			female_can_hold_minor_commander_title_trigger = yes
		}

		trigger_if = {
			limit = {
				OR = {
					religion = hindu
					religion = kejawen
				}
			}
			trait = kshatriya
		}

		is_adult = yes
	}

	is_inaccessible_or_incapable_trigger = no

	NOR = {
		has_character_modifier = guru
		has_character_modifier = refusing_to_lead
	}
}

is_council_eunuch_trigger = {
	custom_tooltip = {
		text = is_council_eunuch
		OR = {
			has_minor_title = title_councilmember_eunuch
			has_minor_title = title_councilmember_eunuch_2
			has_minor_title = title_councilmember_eunuch_3
			has_minor_title = title_councilmember_eunuch_4
			has_minor_title = title_councilmember_eunuch_5
			has_minor_title = title_councilmember_eunuch_6
			has_minor_title = title_councilmember_eunuch_7
			has_minor_title = title_councilmember_eunuch_8
			has_minor_title = title_councilmember_eunuch_9
			has_minor_title = title_councilmember_eunuch_10
			has_minor_title = title_councilmember_eunuch_11
			has_minor_title = title_councilmember_eunuch_12
		}
	}
}

can_be_chinese_chancellor_trigger = {
	trigger_if = {
		limit = {
			liege = {
				has_chinese_government_trigger = yes
			}
		}
		
		OR = {
			# High Learning OR high Diplomacy and decent Learning
			AND = {
				liege = {
					real_tier = emperor
				}
				
				OR = {
					learning >= 12
					AND = {
						learning >= 6
						diplomacy >= 12
					}
				}
			}
			
			AND = {
				liege = {
					real_tier = king
				}
				
				OR = {
					learning >= 10
					AND = {
						learning >= 5
						diplomacy >= 10
					}
				}
			}
			
			AND = {
				liege = {
					real_tier = duke
				}
				
				OR = {
					learning >= 8
					AND = {
						learning >= 4
						diplomacy >= 8
					}
				}
			}
			
			AND = {
				liege = {
					OR = {
						real_tier = count
						real_tier = baron
					}
				}
				
				OR = {
					learning >= 6
					AND = {
						learning >= 3
						diplomacy >= 6
					}
				}
			}
			
			# The heir can always be on the council
			liege = {
				current_heir = {
					character = ROOT
				}
			}
			
			# Grand Chancellor bloodline members get a free pass
			any_owned_bloodline = {
				has_bloodline_flag = grand_chancellor_bloodline
				bloodline_is_active_for = ROOT
			}
			trigger_if = {
				limit = {
					liege = {
						independent = yes
					}
				}
				
				trigger_if = {
					limit = {
						is_landed = yes
					}
					
					OR = {
						AND = {
							liege = {
								has_law = ci_vassal_law_3
							}
							is_powerful_vassal = yes
						}
						
						liege = {
							has_law = ci_vassal_law_4
						}
					}
				}
				
				trigger_else = {
					liege = {
						has_law = ci_courtier_law_4
					}
					
					is_landed = no
				}
			}
		}
	}
}

can_be_chinese_marshal_trigger = {
	trigger_if = {
		limit = {
			liege = {
				has_chinese_government_trigger = yes
			}
		}
		
		OR = {
			# High Learning OR high Martial and decent Learning
			AND = {
				liege = {
					real_tier = emperor
				}
				
				OR = {
					learning >= 12
					AND = {
						learning >= 6
						martial >= 12
					}
				}
			}
			
			AND = {
				liege = {
					real_tier = king
				}
				
				OR = {
					learning >= 10
					AND = {
						learning >= 5
						martial >= 10
					}
				}
			}
			
			AND = {
				liege = {
					real_tier >= duke
				}
				
				OR = {
					learning >= 8
					AND = {
						learning >= 4
						martial >= 8
					}
				}
			}
			
			AND = {
				liege = {
					OR = {
						real_tier = count
						real_tier = baron
					}
				}
				
				OR = {
					learning >= 6
					AND = {
						learning >= 3
						martial >= 6
					}
				}
			}
			
			# The heir can always be on the council
			liege = {
				current_heir = {
					character = ROOT
				}
			}
			
			# Grand Chancellor bloodline members get a free pass
			any_owned_bloodline = {
				has_bloodline_flag = grand_chancellor_bloodline
				bloodline_is_active_for = ROOT
			}
			
			trigger_if = {
				limit = {
					liege = {
						independent = yes
					}
				}
				
				trigger_if = {
					limit = {
						is_landed = yes
					}
					
					OR = {
						AND = {
							liege = {
								has_law = ci_vassal_law_3
							}
							is_powerful_vassal = yes
						}
						
						liege = {
							has_law = ci_vassal_law_4
						}
					}
				}
				
				trigger_else = {
					liege = {
						has_law = ci_courtier_law_4
					}
					
					is_landed = no
				}
			}
		}
	}
}

can_be_chinese_treasurer_trigger = {
	trigger_if = {
		limit = {
			liege = {
				has_chinese_government_trigger = yes
			}
		}
		
		OR = {
			# High Learning OR high Stewardship and decent Learning
			AND = {
				liege = {
					real_tier = emperor
				}
				
				OR = {
					learning >= 12
					AND = {
						learning >= 6
						stewardship >= 12
					}
				}
			}
			
			AND = {
				liege = {
					real_tier = king
				}
				
				OR = {
					learning >= 10
					AND = {
						learning >= 5
						stewardship >= 10
					}
				}
			}
			
			AND = {
				liege = {
					real_tier = duke
				}
				
				OR = {
					learning >= 8
					AND = {
						learning >= 4
						stewardship >= 8
					}
				}
			}
			
			AND = {
				liege = {
					OR = {
						real_tier = count
						real_tier = baron
					}
				}
				
				OR = {
					learning >= 6
					AND = {
						learning >= 3
						stewardship >= 6
					}
				}
			}
			
			# The heir can always be on the council
			liege = {
				current_heir = {
					character = ROOT
				}
			}
			
			# Grand Chancellor bloodline members get a free pass
			any_owned_bloodline = {
				has_bloodline_flag = grand_chancellor_bloodline
				bloodline_is_active_for = ROOT
			}
			
			trigger_if = {
				limit = {
					liege = {
						independent = yes
					}
				}
				
				trigger_if = {
					limit = {
						is_landed = yes
					}
					
					OR = {
						AND = {
							liege = {
								has_law = ci_vassal_law_3
							}
							is_powerful_vassal = yes
						}
						
						liege = {
							has_law = ci_vassal_law_4
						}
					}
				}
				
				trigger_else = {
					liege = {
						has_law = ci_courtier_law_4
					}
					
					is_landed = no
				}
			}
		}
	}
}

can_be_chinese_spymaster_trigger = {
	trigger_if = {
		limit = {
			liege = {
				has_chinese_government_trigger = yes
			}
		}
		
		OR = {
			# High Learning OR high Intrigue and decent Learning
			AND = {
				liege = {
					real_tier = emperor
				}
				
				OR = {
					learning >= 12
					AND = {
						learning >= 6
						intrigue >= 12
					}
				}
			}
			
			AND = {
				liege = {
					real_tier = king
				}
				
				OR = {
					learning >= 10
					AND = {
						learning >= 5
						intrigue >= 10
					}
				}
			}
			
			AND = {
				liege = {
					real_tier = duke
				}
				
				OR = {
					learning >= 8
					AND = {
						learning >= 4
						intrigue >= 8
					}
				}
			}
			
			AND = {
				liege = {
					OR = {
						real_tier = count
						real_tier = baron
					}
				}
				
				OR = {
					learning >= 6
					AND = {
						learning >= 3
						intrigue >= 6
					}
				}
			}
			
			# The heir can always be on the council
			liege = {
				current_heir = {
					character = ROOT
				}
			}
			
			# Grand Chancellor bloodline members get a free pass
			any_owned_bloodline = {
				has_bloodline_flag = grand_chancellor_bloodline
				bloodline_is_active_for = ROOT
			}
			
			trigger_if = {
				limit = {
					liege = {
						independent = yes
					}
				}
				
				trigger_if = {
					limit = {
						is_landed = yes
					}
					
					OR = {
						AND = {
							liege = {
								has_law = ci_vassal_law_3
							}
							is_powerful_vassal = yes
						}
						
						liege = {
							has_law = ci_vassal_law_4
						}
					}
				}
				
				trigger_else = {
					liege = {
						has_law = ci_courtier_law_4
					}
					
					is_landed = no
				}
			}
		}
	}
}

can_be_chinese_spiritual_trigger = {
	trigger_if = {
		limit = {
			liege = {
				has_chinese_government_trigger = yes
			}
		}
		
		OR = {
			# High Learning
			AND = {
				liege = {
					real_tier = emperor
				}
				
				learning >= 12
			}
			
			AND = {
				liege = {
					real_tier = king
				}
				
				learning >= 10
			}
			
			AND = {
				liege = {
					real_tier = duke
				}
				
				learning >= 8
			}
			
			AND = {
				liege = {
					OR = {
						real_tier = count
						real_tier = baron
					}
				}
				
				learning >= 6
			}
			
			# The heir can always be on the council
			liege = {
				current_heir = {
					character = ROOT
				}
			}
			
			# Grand Chancellor bloodline members get a free pass
			any_owned_bloodline = {
				has_bloodline_flag = grand_chancellor_bloodline
				bloodline_is_active_for = ROOT
			}
			
			trigger_if = {
				limit = {
					liege = {
						independent = yes
					}
				}
				
				trigger_if = {
					limit = {
						is_landed = yes
					}
					
					OR = {
						AND = {
							liege = {
								has_law = ci_vassal_law_3
							}
							is_powerful_vassal = yes
						}
						
						liege = {
							has_law = ci_vassal_law_4
						}
					}
				}
				
				trigger_else = {
					liege = {
						has_law = ci_courtier_law_4
					}
					
					is_landed = no
				}
			}
		}
	}
}

can_be_chinese_councilmember_trigger = {
	trigger_if = {
		limit = {
			liege = {
				has_chinese_government_trigger = yes
			}
		}
		
		OR = {
			# Eligible for any other position
			AND = {
				liege = {
					real_tier = emperor
				}
				
				OR = {
					learning >= 12
					AND = {
						learning >= 6
						OR = {
							diplomacy >= 12
							martial >= 12
							stewardship >= 12
							intrigue >= 12
						}
					}
				}
			}
			
			AND = {
				liege = {
					real_tier = king
				}
				
				OR = {
					learning >= 10
					AND = {
						learning >= 5
						OR = {
							diplomacy >= 10
							martial >= 10
							stewardship >= 10
							intrigue >= 10
						}
					}
				}
			}
			
			AND = {
				liege = {
					real_tier = duke
				}
				
				OR = {
					learning >= 8
					AND = {
						learning >= 4
						OR = {
							diplomacy >= 8
							martial >= 8
							stewardship >= 8
							intrigue >= 8
						}
					}
				}
			}
			
			AND = {
				liege = {
					OR = {
						real_tier = count
						real_tier = baron
					}
				}
				
				OR = {
					learning >= 6
					AND = {
						learning >= 3
						OR = {
							diplomacy >= 6
							martial >= 6
							stewardship >= 6
							intrigue >= 6
						}
					}
				}
			}
			
			# The heir can always be on the council
			liege = {
				current_heir = {
					character = ROOT
				}
			}
			
			# Grand Chancellor bloodline members get a free pass
			any_owned_bloodline = {
				has_bloodline_flag = grand_chancellor_bloodline
				bloodline_is_active_for = ROOT
			}
			
			trigger_if = {
				limit = {
					liege = {
						independent = yes
					}
				}
				
				trigger_if = {
					limit = {
						is_landed = yes
					}
					
					OR = {
						AND = {
							liege = {
								has_law = ci_vassal_law_3
							}
							is_powerful_vassal = yes
						}
						
						liege = {
							has_law = ci_vassal_law_4
						}
					}
				}
				
				trigger_else = {
					liege = {
						has_law = ci_courtier_law_4
					}
					
					is_landed = no
				}
			}
		}
	}
}

can_be_chinese_designated_regent_trigger = {
	trigger_if = {
		limit = {
			liege = {
				has_chinese_government_trigger = yes
			}
		}
		
		OR = {
			# Eligible for any other position
			AND = {
				liege = {
					real_tier = emperor
				}
				
				OR = {
					learning >= 12
					AND = {
						learning >= 6
						OR = {
							diplomacy >= 12
							martial >= 12
							stewardship >= 12
							intrigue >= 12
						}
					}
				}
			}
			
			AND = {
				liege = {
					real_tier = king
				}
				
				OR = {
					learning >= 10
					AND = {
						learning >= 5
						OR = {
							diplomacy >= 10
							martial >= 10
							stewardship >= 10
							intrigue >= 10
						}
					}
				}
			}
			
			AND = {
				liege = {
					real_tier = duke
				}
				
				OR = {
					learning >= 8
					AND = {
						learning >= 4
						OR = {
							diplomacy >= 8
							martial >= 8
							stewardship >= 8
							intrigue >= 8
						}
					}
				}
			}
			
			AND = {
				liege = {
					OR = {
						real_tier = count
						real_tier = baron
					}
				}
				
				OR = {
					learning >= 6
					AND = {
						learning >= 3
						OR = {
							diplomacy >= 6
							martial >= 6
							stewardship >= 6
							intrigue >= 6
						}
					}
				}
			}
			
			# The heir can always be on the council
			liege = {
				current_heir = {
					character = PREVPREV
				}
			}
			
			# Grand Chancellor bloodline members get a free pass
			any_owned_bloodline = {
				has_bloodline_flag = grand_chancellor_bloodline
				bloodline_is_active_for = PREV
			}
			
			trigger_if = {
				limit = {
					liege = {
						independent = yes
					}
				}
				
				trigger_if = {
					limit = {
						is_landed = yes
					}
					
					OR = {
						AND = {
							liege = {
								has_law = ci_vassal_law_3
							}
							is_powerful_vassal = yes
						}
						
						liege = {
							has_law = ci_vassal_law_4
						}
					}
				}
				
				trigger_else = {
					liege = {
						has_law = ci_courtier_law_4
					}
					
					is_landed = no
				}
			}
		}
	}
}

can_be_council_eunuch_trigger = {
	trait = eunuch
	is_adult = yes
	is_female = no
	is_landed = no # Random vassals castrated due to having the flu or something shouldn't be eligible...
	is_married = no # If there's an empress and her husband has an unfortunate snipping accident, he's not eligible
	is_consort = no # Ditto for consorts
	
	liege = {
		NOT  = {
			dynasty = PREV
		}
	}
	
	can_be_councilmember_emperor_trigger = yes
}

can_fire_voter_trigger = {
	trigger_if = {
		limit = { FROM = { has_law = succession_voting_power_1 } }
		is_powerful_vassal = no
	}
	
	can_fire_grand_chancellor_trigger = yes
	
	i_am_appropriate_regent_trigger = no
	
	can_fire_chinese_councillor_trigger = yes
	
	can_fire_japanese_councillor_trigger = yes
	
	FROM = {
		custom_tooltip = {
			text = not_swapping_tt
			NOT = { has_character_flag = swapping_councillors }
		}
	}
}

can_fire_grand_chancellor_trigger = {
	trigger_if = {
		limit = {
			FROM = {
				independent = yes
				has_chinese_government_trigger = yes
			}
		}
		
		OR = {
			FROM = {
				has_chinese_government_trigger = no
			}
			
			custom_tooltip = {
				text = does_not_have_an_active_grand_chancellor_bloodline
				
				NOT = {
					any_owned_bloodline = {
						has_bloodline_flag = grand_chancellor_bloodline
						bloodline_is_active_for = ROOT
					}
				}
			}
		}
	}
}

can_fire_chinese_councillor_trigger = {
	trigger_if = {
		limit = {
			FROM = {
				independent = yes
				has_chinese_government_trigger = yes
			}
		}
		
		trigger_if = {
			limit = {
				is_landed = no
			}
			
			FROM = {
				primary_title = {
					NOR = {
						has_law = ci_courtier_law_3
						has_law = ci_courtier_law_4
					}
				}
			}
		}
		
		trigger_else = {
			FROM = {
				primary_title = {
					NOR = { 
						AND = {
							has_law = ci_vassal_law_3
							ROOT = { is_powerful_vassal = yes }
						}
						
						has_law = ci_vassal_law_4
					}
				}
			}
		}
	}
}

can_fire_japanese_councillor_trigger = {
	trigger_if = {
		limit = {
			FROM = {
				has_japanese_government_trigger = yes
				is_under_regency_trigger = yes
			}
		}
		
		trigger_if = {
			limit = {
				FROM = {
					primary_title = {
						OR = {
							has_law = regency_power_law_5
							has_law = regency_power_law_6
						}
					}
				}
			}
			
			FROM = {
				NOT = {
					any_vassal = {
						i_am_appropriate_regent_trigger = yes
						dynasty = ROOT
					}
				}
			}
		}
		
		trigger_else_if = {
			limit = {
				FROM = {
					primary_title = {
						OR = {
							has_law = regency_power_law_1
							has_law = regency_power_law_2
							has_law = regency_power_law_3
							has_law = regency_power_law_4
						}
					}
				}
			}
			
			FROM = {
				NOT = {
					any_vassal = {
						i_am_appropriate_regent_trigger = yes
						dynasty = ROOT
						is_close_relative = ROOT
					}
				}
			}
		}
	}
}

ere_elective_politician_titles_trigger = { # Used in Imperial Elective to determine AI behavior.
	OR = {
		has_job_title = job_marshal
		has_job_title = job_spymaster
		has_job_title = job_treasurer
		has_job_title = job_chancellor
		has_minor_title = title_despot
		has_minor_title = title_sebastokrator
		has_minor_title = title_caesar
		has_minor_title = title_kouropalates
		has_minor_title = title_anthypatos
	}
}

can_still_be_commander_byzantine_trigger = {
	primary_title = { temporary = no }

	liege = {
		character = FROMFROM
		government = roman_imperial_government
	}

	trigger_if = {
		limit = {
			NOT = { has_character_flag = special_marshal }
		}

		OR = {
			male_can_hold_minor_title_trigger = yes
			female_can_hold_minor_commander_title_trigger = yes
		}

		trigger_if = {
			limit = {
				OR = {
					religion = hindu
					religion = kejawen
				}
			}
			trait = kshatriya
		}

		is_adult = yes
	}

	is_inaccessible_or_incapable_trigger = no

	NOR = {
		has_character_modifier = guru
		has_character_modifier = refusing_to_lead
		war_with = FROMFROM

		any_liege = {
			war_with = FROMFROM
		}
	}

	OR = {
		higher_real_tier_than = BARON # Either potential commander is vassal...

		NOT = { # ...or there are no valid vassal candidates that can be commanders.
			custom_tooltip = {
				text = tooltip_byzantine_empire_can_appoint_commanders

				liege = {
					any_vassal = {
						higher_real_tier_than = BARON

						primary_title = { temporary = no }

						trigger_if = {
							limit = {
								NOT = { has_character_flag = special_marshal }
							}

							OR = {
								male_can_hold_minor_title_trigger = yes
								female_can_hold_minor_commander_title_trigger = yes
							}

							trigger_if = {
								limit = {
									OR = {
										religion = hindu
										religion = kejawen
									}
								}
								trait = kshatriya
							}

							is_adult = yes
						}

						is_inaccessible_or_incapable_trigger = no

						NOR = {
							has_character_modifier = guru
							has_character_modifier = refusing_to_lead
							has_job_title = job_chancellor
							has_job_title = job_marshal
							has_job_title = job_treasurer
							has_job_title = job_spymaster
							has_job_title = job_spiritual
							has_minor_title = title_commander
						}
					}
				}
			}
		}
	}
}

can_still_be_marshal_byzantine_trigger = {
	liege = {
		character = FROMFROM
		government = roman_imperial_government
	}

	NOR = {
		war_with = FROMFROM

		any_liege = {
			war_with = FROMFROM
		}
	}

	trigger_if = {
		limit = {
			NOT = { has_character_flag = special_chancellor }
		}

		trigger_if = {
			limit = { is_female = yes }

			liege = {
				OR = {
					has_religion_feature = religion_matriarchal
					has_religion_feature = religion_equal
					has_religion_feature = religion_feature_bon
					has_religion_feature = religion_feature_bai
					has_religion_feature = religion_feature_minahasan
					has_religion_feature = religion_feature_ryukyuan
					has_religion_feature = religion_feature_minangkabau
						
					AND = {
						religion_openly_minahasan_or_reformed_trigger = yes
						NOT = {
							has_religion_feature = religion_patriarchal
						}
					}
					
					AND = {
						religion_openly_minangkabau_or_reformed_trigger = yes
						NOT = {
							has_religion_feature = religion_patriarchal
						}
					}

					# Some religions don't mind so much who does what
					trigger_if = {
						limit = {
							OR = {
								religion = cathar
								religion = messalian
							}
						}

						religion = PREV
					}

					# Laws permitting
					trigger_if = {
						limit = { has_law = status_of_women_3 }

						PREV = {
							OR = {
								dynasty = PREV
								is_close_relative = PREV
								is_married = PREV
								is_consort = PREV
								is_landed = yes
								trait = nun
							}
						}
					}
					trigger_else = {
						has_law = status_of_women_4
					}

					# Other conditions under which females can be employed
					has_game_rule = {
						name = gender
						value = all
					}
				}
			}
		}
		trigger_else = {
			liege = {
				NOR = {
					has_religion_feature = religion_matriarchal
					has_religion_feature = religion_feature_minangkabau
				}
			}
		}

		trigger_if = {
			limit = {
				OR = {
					religion = hindu
					religion = kejawen
				}
			}
			NOT = { trait = kshatriya }
		}

		is_adult = yes
	}

	independent = no
	prisoner = no
	is_incapable = no

	NOR = {
		trait = in_hiding
		has_character_modifier = guru
		has_character_modifier = resigned_in_anger

		reverse_has_opinion_modifier = {
			name = opinion_resigned_from_council
			who = liege
		}
	}
}

byzantines_can_grant_commander_trigger = {
	trigger_if = {
		limit = { government = roman_imperial_government }  # Either not Imperial...

		custom_tooltip = {
			text = tooltip_byzantine_empire_can_appoint_commanders

			NOT = { #...Or there are no valid vassal candidates that can be commanders
				any_vassal = {
					higher_real_tier_than = BARON
					primary_title = { temporary = no }

					trigger_if = {
						limit = {
							NOT = { has_character_flag = special_marshal }
						}

						OR = {
							male_can_hold_minor_title_trigger = yes
							female_can_hold_minor_commander_title_trigger = yes
						}

						trigger_if = {
							limit = {
								OR = {
									religion = hindu
									religion = kejawen
								}
							}
							trait = kshatriya
						}

						is_adult = yes
					}

					is_inaccessible_or_incapable_trigger = no

					NOR = {
						has_job_title = job_chancellor
						has_job_title = job_marshal
						has_job_title = job_treasurer
						has_job_title = job_spymaster
						has_job_title = job_spiritual
						has_minor_title = title_commander
						has_character_modifier = guru
						has_character_modifier = refusing_to_lead
					}
				}
			}
		}
	}
}