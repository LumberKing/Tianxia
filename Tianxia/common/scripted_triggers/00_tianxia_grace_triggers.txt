### Test triggers - set to "always = no" outside of testing!

# Forces AI China to refuse all Tributes/Boon requests
test_grace_refusal_trigger = {
	always = no
}

# Forces AI China to accept all Tributes/Boon requests
test_grace_acceptance_trigger = {
	always = no
}


### General Grace triggers

# Checks if ROOT is the Emperor of China and uses the Grace mechanics
is_chinese_emperor_trigger = {
	has_landed_title = e_china
	government = chinese_imperial_government
}

# Checks if Grace interactions are allowed for FROM
can_use_grace_decisions_from_trigger = {
	FROM = {
		is_chinese_emperor_trigger = no # The EoC cannot ask himself for Boons/send Tributes to himself
		# Is within China's diplo range, or along the Silk Road
		OR = {
			e_china = {
				holder_scope = {
					is_within_diplo_range = PREVPREV
				}
			}
			any_realm_province = {
				trade_route = silk_road
			}
		}
		# Is independent, king-tier, or a human player
		OR = {
			independent = yes
			real_tier = king
			ai = no
		}
		# Is capable, accessible, and not a prisoner
		prisoner = no
		NOT = { trait = incapable }
		is_inaccessible_trigger = no
		has_regent = no
		# Isn't at war with China
		NOT = {
			any_war = {
				OR = {
					AND = {
						any_attacker = {
							is_chinese_emperor_trigger = yes
						}
						any_defender = {
							character = FROM
						}
					}
					AND = {
						any_attacker = {
							character = FROM
						}
						any_defender = {
							is_chinese_emperor_trigger = yes
						}
					}
				}
			}
		}
		# Isn't a vassal of China
		NOT = {
			top_liege = {
				has_landed_title = e_china
			}
		}
	}
	has_game_rule = {
		name = grace_interactions
		value = enabled
	}
	NOT = {
		FROM = {
			OR = {
				government = chinese_imperial_government # Pretender empire
				any_liege = {
					OR = {
						government = chinese_imperial_government # Pretender empire
						suzerain = {
							government = chinese_imperial_government # Pretender empire
							NOT = {
								has_landed_title = e_china
							}
						}
					}
				}
				suzerain = {
					government = chinese_imperial_government # Pretender empire
					NOT = {
						has_landed_title = e_china
					}
				}
			}
		}
	}
	e_china = {
		holder_scope = {
			is_chinese_emperor_trigger = yes
		}
	}
}

# Checks if Grace interactions are allowed for ROOT
can_use_grace_decisions_root_trigger = {
	is_chinese_emperor_trigger = no # The EoC cannot ask himself for Boons/send Tributes to himself
	# Is within China's diplo range, or along the Silk Road
	OR = {
		e_china = {
			holder_scope = {
				is_within_diplo_range = ROOT
			}
		}
		any_realm_province = {
			trade_route = silk_road
		}
	}
	# Is independent, king-tier, or a human player
	OR = {
		independent = yes
		real_tier = king
		ai = no
	}
	# Is capable, accessible, and not a prisoner
	prisoner = no
	NOT = { trait = incapable }
	is_inaccessible_trigger = no
	# Isn't at war with China
	NOT = {
		any_war = {
			OR = {
				AND = {
					any_attacker = {
							is_chinese_emperor_trigger = yes
					}
					any_defender = {
						character = ROOT
					}
				}
				AND = {
					any_attacker = {
						character = ROOT
					}
					any_defender = {
							is_chinese_emperor_trigger = yes
					}
				}
			}
		}
	}
	# Isn't a vassal of China
	NOT = {
		top_liege = {
			has_landed_title = e_china
		}
	}
	# Grace interactions are enabled
	has_game_rule = {
		name = grace_interactions
		value = enabled
	}
	NOT = {
		OR = {
			government = chinese_imperial_government # Pretender empire
			any_liege = {
				OR = {
					government = chinese_imperial_government # Pretender empire
					suzerain = {
						government = chinese_imperial_government # Pretender empire
						NOT = {
							has_landed_title = e_china
						}
					}
				}
			}
			suzerain = {
				government = chinese_imperial_government # Pretender empire
				NOT = {
					has_landed_title = e_china
				}
			}
		}
	}
	e_china = {
		holder_scope = {
			is_chinese_emperor_trigger = yes
		}
	}
}

# Checks if the EoC is going to refuse granting ROOT all Boons and refuse all Tribute from ROOT
china_hates_root_trigger = {
	# Checking e_china's holder because otherwise we end up running into issues based on scopes
	e_china = {
		holder_scope = {
			OR = {
				# Grace stuff
				has_opinion_modifier = {
					who = ROOT
					modifier = china_peace_deal_breaker
				}
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_china_breakaway_tributary
				}
				
				# Rivalry
				any_rival = {
					character = ROOT
				}
				
				# Cannibal
				ROOT = {
					OR = { 
						has_character_modifier = cannibal # Should be irrelevant due to the modifier no longer being used, but...
						trait = cannibal_trait
					}
				}
				
				# Kinslayer of your dynasty
				AND = {
					dynasty = ROOT
					ROOT = {
						is_any_kinslayer_trigger = yes
					}
				}
				
				# Tyrant
				
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_tyrant
				}
				
				# Forced concubinage
				OR = {
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_forced_relative_consort
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_forced_wife_consort
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_forced_consort
					}
				}
				
				# Trucebreaker
				ROOT = {
					has_character_modifier = truce_breaker
				}
				
				# Alliance breaker (refused CTA)
				ROOT = {
					has_character_modifier = alliance_breaker
				}
				
				# NAP breaker
				ROOT = {
					has_character_modifier = broken_non_aggression_pact_char_modifier
				}
				
				# Recently raided me
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_looted
				}
				
				# Decided to become independent by event
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_rightful_vassal
				}
				
				# Broke alliance
				has_opinion_modifier = {
					who = ROOT
					modifier = dissolved_alliance
				}
				
				# Recently declared war
				has_opinion_modifier = {
					who = ROOT
					modifier = declared_war
				}
				
				# Dishonourable
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_dishonorable
				}
				
				# Broke alliance
				has_opinion_modifier = {
					who = ROOT
					modifier = broke_alliance
				}
				
				# Refused CTA
				has_opinion_modifier = {
					who = ROOT
					modifier = tribal_vassal_refused_call
				}
				
				# Broke Truce
				has_opinion_modifier = {
					who = ROOT
					modifier = broke_truce
				}
				
				# Traitor
				OR = {
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_traitor
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_rebel_traitor
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_regicide_traitor
					}
				}
				
				# Executed my child
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_executed_child
				}
				
				# Is preparing to invade me
				has_opinion_modifier = {
					who = ROOT
					modifier = preparing_to_invade_me
				}
				
				# Preparing an adventure against me
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_targeted_by_adventurer
				}
				
				# Absorbed my clan - probably irrelevant, but best to be certain...
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_absorbed_my_clan
				}
				
				# Unfaithful (real or imagined)
				OR = {
					has_opinion_modifier = {
						who = ROOT
						modifier = legitimized_bastard
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = acknowledged_bastard
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = slut_seductress
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_cuckolded_private
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_unfaithful_private
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_potential_cuckold
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_unfaithful_wife
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_unfaithful_husband
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_unfaithful_husband_crime
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_cuckolded
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_suspected_adultery
					}
				}
				
				# Peasant revolter vs. former liege
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_evil_tyrant
				}
				
				# Traitorous regent
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_regent_lowered_CA
				}
				
				# Attempted/successful murder of me/my family/my close relatives
				OR = {
					has_opinion_modifier = {
						who = ROOT
						modifier = attempted_murder_of_spouse
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = attempted_murder_of_child
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = attempted_murder_of_parent
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = attempted_murder_of_sibling
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = attempted_murder
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_executed_child
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_beheaded_dynasty_member
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_killed_father
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_murder_attempt
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_killed_close_kin
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_dishonorable_scum
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_spouse_slayer
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_chasing_spouse
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_chasing_child
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_killed_lover
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_whorespawn
					}
				}
				
				# Other murder/plot stuff
				OR = {
					has_opinion_modifier = {
						who = ROOT
						modifier = attempted_murder_of_vassal
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = attempted_murder_of_spouse_vassal
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = scheming_bastard
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = evil_murderer
					}
				}
				
				# Misc bad stuff, might remove
				OR = {
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_abandoned_wolves
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_falsely_convicted
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_mad_as_hell
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_blackmailed
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_hate
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_burned_same_faith
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_banished_same_faith
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_beheaded_dynasty_member
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_hatred
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_ruthless
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_dishonorable_duel
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_revenge_seeker
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_killed_father
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_poisoner
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_hajj_attempt_murder
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_fatwa_target
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_refused_order
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_burned_tp_despite_bribe
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_nerge_rival
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_refused_blot
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_went_berserk
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_imprisoned_missionary
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_refused_request_holy_order
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_expelled_from_realm
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_driven_from_my_lands
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_witch
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_changed_caste
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_ruler_wrong_caste_hindu
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_ruler_wrong_caste_non_hindu
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_low_caste
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_sacrilege
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_takfir
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_idolater
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = grievously_offended
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_humiliated_rival
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_denied_request
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = squeezed_for_extra_tribute
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = refused_extra_tribute
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = abuse_of_office
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = ally_inactive_in_war
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = broken_non_aggression_pact
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_alliance_breaker
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = expelled_me_from_seclusion
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = expelled_lover_from_seclusion
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_ignored_demands
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_refused_to_end_war
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_refused_council_position
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = declared_independence_nomad
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = immortal_suspicions
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = immortal_hate
					}
				}
				
				# Castrated/mutiliated/blinded/tortured/humiliated me/my relative
				OR = {
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_castrated_me
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_blinded_me
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_castrated_family
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_castrated_close_kin
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_blinded_family
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_blinded_close_kin
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_tortured_me
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_tortured_family
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_tortured_close_kin
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_mutilated_me
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_mutilated_family
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_mutilated_close_kin
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_humiliated_me
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_humiliated_family
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_humiliated_close_kin
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_tickled_me_wrong
					}
				}
				
				# Slander
				OR = {
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_charge_heresiarch
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_charge_infidel
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_charge_deviant
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_charge_illegitimate
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_charge_traitor
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_charge_slanderer
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = opinion_slandered
					}
				}
				
				# Various event modifiers, might remove
				ROOT = {
					OR = {
						has_character_modifier = voice_of_satan
						has_character_modifier = demon_child_non_pagan
						has_character_modifier = suspected_demon_spawn
						has_character_modifier = suspected_witch
						has_character_modifier = known_witch
						has_character_modifier = the_diamond_thief
						AND = {
							OR = {
								has_character_modifier = wont_let_spouse_touch_me
								has_character_modifier = incestuous_adulterer
								has_character_modifier = incestuous_adulteress
								has_character_modifier = adulterer
								has_character_modifier = adulteress
								has_character_modifier = known_sodomite
								has_character_modifier = known_sodomite_pagan
								has_character_modifier = cradle_robber
								has_character_modifier = adulterous_priest
								has_character_modifier = unfaithful_rumors
							}
							any_spouse = {
								OR = {
									is_chinese_emperor_trigger = yes
									any_close_relative = {
										is_chinese_emperor_trigger = yes
									}
								}
							}
						}
						has_character_modifier = bad_crisis_management
						has_character_modifier = crazy_cannibal
						has_character_modifier = graverobber
					}
				}
				
				### M&M opinions, might remove some
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_attempted_abduction
				}
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_charge_cultist
				}
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_charge_dw
				}
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_lacks_conviction
				}
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_failed_corruption
				}
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_known_corrupter
				}
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_ignorant
				}
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_outraged
				}
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_thief
				}
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_useless_moron
				}
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_extremely_disappointed
				}
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_unimpressed
				}
				has_opinion_modifier = {
					who = ROOT
					modifier = stole_artifact
				}
				has_opinion_modifier = {
					who = ROOT
					modifier = stole_artifact_penance
				}
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_nemesis
				}
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_rejected_society_membership
				}
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_outlawed_society
				}
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_out_of_touch
				}
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_out_of_touch_mild
				}
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_bad_parent
				}
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_forgot_important_occasion
				}
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_forgot_important_occasion_mild
				}
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_academic_grudge
				}
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_academic_failure
				}
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_knowledge_theft
				}
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_offended
				}
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_argued
				}
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_unreasonable
				}
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_meddler
				}
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_threatened_me
				}
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_accused_apostate
				}
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_abducted
				}
				
				### M&M modifiers, might remove some
				ROOT = {
					OR = {
						has_character_modifier = known_satanist
						has_character_modifier = known_secret_society_member
						has_character_modifier = accused_apostate
					}
				}
				
				# JD modifiers, might remove some
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_cat_spymaster
				}
				has_opinion_modifier = {
					who = ROOT
					modifier = sold_vassal_province
				}
				has_opinion_modifier = {
					who = ROOT
					modifier = sold_my_province
				}
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_sent_my_lover_away
				}
				has_opinion_modifier = {
					who = ROOT
					modifier = suzerain_deserted
				}
				has_opinion_modifier = {
					who = ROOT
					modifier = suzerain_deserted_reasons
				}
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_declared_unjust_conquest
				}
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_forced_tributary
				}
			}
		}
	}
}

# Checks if the EoC is going to refuse granting FROM all Boons and refuse all Tribute from FROM
china_hates_from_trigger = {
	# Checking e_china's holder because otherwise we end up running into issues if reusing this trigger where ROOT isn't the EoC
	e_china = {
		holder_scope = {
			OR = {
				# Grace stuff
				has_opinion_modifier = {
					who = FROM
					modifier = china_peace_deal_breaker
				}
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_china_breakaway_tributary
				}
				
				# Rivalry
				any_rival = {
					character = FROM
				}
				
				# Cannibal
				FROM = {
					OR = { 
						has_character_modifier = cannibal # Should be irrelevant due to the modifier no longer being used, but...
						trait = cannibal_trait
					}
				}
				
				# Kinslayer of your dynasty
				AND = {
					dynasty = FROM
					FROM = {
						is_any_kinslayer_trigger = yes
					}
				}
				
				# Tyrant
				
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_tyrant
				}
				
				# Forced concubinage
				OR = {
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_forced_relative_consort
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_forced_wife_consort
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_forced_consort
					}
				}
				
				# Trucebreaker
				FROM = {
					has_character_modifier = truce_breaker
				}
				
				# Alliance breaker (refused CTA)
				FROM = {
					has_character_modifier = alliance_breaker
				}
				
				# NAP breaker
				FROM = {
					has_character_modifier = broken_non_aggression_pact_char_modifier
				}
				
				# Recently raided me
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_looted
				}
				
				# Decided to become independent by event
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_rightful_vassal
				}
				
				# Broke alliance
				has_opinion_modifier = {
					who = FROM
					modifier = dissolved_alliance
				}
				
				# Recently declared war
				has_opinion_modifier = {
					who = FROM
					modifier = declared_war
				}
				
				# Dishonourable
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_dishonorable
				}
				
				# Broke alliance
				has_opinion_modifier = {
					who = FROM
					modifier = broke_alliance
				}
				
				# Refused CTA
				has_opinion_modifier = {
					who = FROM
					modifier = tribal_vassal_refused_call
				}
				
				# Broke Truce
				has_opinion_modifier = {
					who = FROM
					modifier = broke_truce
				}
				
				# Traitor
				OR = {
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_traitor
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_rebel_traitor
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_regicide_traitor
					}
				}
				
				# Executed my child
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_executed_child
				}
				
				# Is preparing to invade me
				has_opinion_modifier = {
					who = FROM
					modifier = preparing_to_invade_me
				}
				
				# Preparing an adventure against me
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_targeted_by_adventurer
				}
				
				# Absorbed my clan - probably irrelevant, but best to be certain...
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_absorbed_my_clan
				}
				
				# Unfaithful (real or imagined)
				OR = {
					has_opinion_modifier = {
						who = FROM
						modifier = legitimized_bastard
					}
					has_opinion_modifier = {
						who = FROM
						modifier = acknowledged_bastard
					}
					has_opinion_modifier = {
						who = FROM
						modifier = slut_seductress
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_cuckolded_private
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_unfaithful_private
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_potential_cuckold
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_unfaithful_wife
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_unfaithful_husband
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_unfaithful_husband_crime
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_cuckolded
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_suspected_adultery
					}
				}
				
				# Peasant revolter vs. former liege
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_evil_tyrant
				}
				
				# Traitorous regent
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_regent_lowered_CA
				}
				
				# Attempted/successful murder of me/my family/my close relatives
				OR = {
					has_opinion_modifier = {
						who = FROM
						modifier = attempted_murder_of_spouse
					}
					has_opinion_modifier = {
						who = FROM
						modifier = attempted_murder_of_child
					}
					has_opinion_modifier = {
						who = FROM
						modifier = attempted_murder_of_parent
					}
					has_opinion_modifier = {
						who = FROM
						modifier = attempted_murder_of_sibling
					}
					has_opinion_modifier = {
						who = FROM
						modifier = attempted_murder
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_executed_child
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_beheaded_dynasty_member
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_killed_father
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_murder_attempt
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_killed_close_kin
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_dishonorable_scum
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_spouse_slayer
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_chasing_spouse
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_chasing_child
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_killed_lover
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_whorespawn
					}
				}
				
				# Other murder/plot stuff
				OR = {
					has_opinion_modifier = {
						who = FROM
						modifier = attempted_murder_of_vassal
					}
					has_opinion_modifier = {
						who = FROM
						modifier = attempted_murder_of_spouse_vassal
					}
					has_opinion_modifier = {
						who = FROM
						modifier = scheming_bastard
					}
					has_opinion_modifier = {
						who = FROM
						modifier = evil_murderer
					}
				}
				
				# Misc bad stuff, might remove
				OR = {
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_abandoned_wolves
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_falsely_convicted
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_mad_as_hell
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_blackmailed
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_hate
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_burned_same_faith
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_banished_same_faith
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_beheaded_dynasty_member
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_hatred
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_ruthless
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_dishonorable_duel
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_revenge_seeker
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_killed_father
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_poisoner
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_hajj_attempt_murder
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_fatwa_target
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_refused_order
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_burned_tp_despite_bribe
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_nerge_rival
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_refused_blot
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_went_berserk
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_imprisoned_missionary
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_refused_request_holy_order
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_expelled_from_realm
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_driven_from_my_lands
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_witch
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_changed_caste
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_ruler_wrong_caste_hindu
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_ruler_wrong_caste_non_hindu
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_low_caste
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_sacrilege
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_takfir
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_idolater
					}
					has_opinion_modifier = {
						who = FROM
						modifier = grievously_offended
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_humiliated_rival
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_denied_request
					}
					has_opinion_modifier = {
						who = FROM
						modifier = squeezed_for_extra_tribute
					}
					has_opinion_modifier = {
						who = FROM
						modifier = refused_extra_tribute
					}
					has_opinion_modifier = {
						who = FROM
						modifier = abuse_of_office
					}
					has_opinion_modifier = {
						who = FROM
						modifier = ally_inactive_in_war
					}
					has_opinion_modifier = {
						who = FROM
						modifier = broken_non_aggression_pact
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_alliance_breaker
					}
					has_opinion_modifier = {
						who = FROM
						modifier = expelled_me_from_seclusion
					}
					has_opinion_modifier = {
						who = FROM
						modifier = expelled_lover_from_seclusion
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_ignored_demands
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_refused_to_end_war
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_refused_council_position
					}
					has_opinion_modifier = {
						who = FROM
						modifier = declared_independence_nomad
					}
					has_opinion_modifier = {
						who = FROM
						modifier = immortal_suspicions
					}
					has_opinion_modifier = {
						who = FROM
						modifier = immortal_hate
					}
				}
				
				# Castrated/mutiliated/blinded/tortured/humiliated me/my relative
				OR = {
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_castrated_me
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_blinded_me
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_castrated_family
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_castrated_close_kin
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_blinded_family
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_blinded_close_kin
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_tortured_me
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_tortured_family
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_tortured_close_kin
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_mutilated_me
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_mutilated_family
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_mutilated_close_kin
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_humiliated_me
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_humiliated_family
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_humiliated_close_kin
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_tickled_me_wrong
					}
				}
				
				# Slander
				OR = {
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_charge_heresiarch
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_charge_infidel
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_charge_deviant
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_charge_illegitimate
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_charge_traitor
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_charge_slanderer
					}
					has_opinion_modifier = {
						who = FROM
						modifier = opinion_slandered
					}
				}
				
				# Various event modifiers, might remove
				FROM = {
					OR = {
						has_character_modifier = voice_of_satan
						has_character_modifier = demon_child_non_pagan
						has_character_modifier = suspected_demon_spawn
						has_character_modifier = suspected_witch
						has_character_modifier = known_witch
						has_character_modifier = the_diamond_thief
						AND = {
							OR = {
								has_character_modifier = wont_let_spouse_touch_me
								has_character_modifier = incestuous_adulterer
								has_character_modifier = incestuous_adulteress
								has_character_modifier = adulterer
								has_character_modifier = adulteress
								has_character_modifier = known_sodomite
								has_character_modifier = known_sodomite_pagan
								has_character_modifier = cradle_robber
								has_character_modifier = adulterous_priest
								has_character_modifier = unfaithful_rumors
							}
							any_spouse = {
								OR = {
									is_chinese_emperor_trigger = yes
									any_close_relative = {
										is_chinese_emperor_trigger = yes
									}
								}
							}
						}
						has_character_modifier = bad_crisis_management
						has_character_modifier = crazy_cannibal
						has_character_modifier = graverobber
					}
				}
				
				### M&M opinions, might remove some
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_attempted_abduction
				}
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_charge_cultist
				}
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_charge_dw
				}
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_lacks_conviction
				}
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_failed_corruption
				}
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_known_corrupter
				}
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_ignorant
				}
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_outraged
				}
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_thief
				}
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_useless_moron
				}
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_extremely_disappointed
				}
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_unimpressed
				}
				has_opinion_modifier = {
					who = FROM
					modifier = stole_artifact
				}
				has_opinion_modifier = {
					who = FROM
					modifier = stole_artifact_penance
				}
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_nemesis
				}
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_rejected_society_membership
				}
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_outlawed_society
				}
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_out_of_touch
				}
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_out_of_touch_mild
				}
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_bad_parent
				}
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_forgot_important_occasion
				}
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_forgot_important_occasion_mild
				}
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_academic_grudge
				}
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_academic_failure
				}
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_knowledge_theft
				}
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_offended
				}
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_argued
				}
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_unreasonable
				}
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_meddler
				}
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_threatened_me
				}
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_accused_apostate
				}
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_abducted
				}
				
				### M&M modifiers, might remove some
				FROM = {
					OR = {
						has_character_modifier = known_satanist
						has_character_modifier = known_secret_society_member
						has_character_modifier = accused_apostate
					}
				}
				
				# JD modifiers, might remove some
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_cat_spymaster
				}
				has_opinion_modifier = {
					who = FROM
					modifier = sold_vassal_province
				}
				has_opinion_modifier = {
					who = FROM
					modifier = sold_my_province
				}
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_sent_my_lover_away
				}
				has_opinion_modifier = {
					who = FROM
					modifier = suzerain_deserted
				}
				has_opinion_modifier = {
					who = FROM
					modifier = suzerain_deserted_reasons
				}
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_declared_unjust_conquest
				}
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_forced_tributary
				}
			}
		}
	}
}

# Checks if the EoC is going to refuse granting FROMFROM all Boons and refuse all Tribute from FROMFROM
# This should be the same as china_hates_from_trigger, but with FROM replaced by FROMFROM
china_hates_fromfrom_trigger = {
	# Checking e_china's holder because otherwise we end up running into issues if reusing this trigger where ROOT isn't the EoC
	e_china = {
		holder_scope = {
			OR = {
				# Grace stuff
				has_opinion_modifier = {
					who = FROMFROM
					modifier = china_peace_deal_breaker
				}
				has_opinion_modifier = {
					who = FROMFROM
					modifier = opinion_china_breakaway_tributary
				}
				
				# Rivalry
				any_rival = {
					character = FROMFROM
				}
				
				# Cannibal
				FROMFROM = {
					OR = { 
						has_character_modifier = cannibal # Should be irrelevant due to the modifier no longer being used, but...
						trait = cannibal_trait
					}
				}
				
				# Kinslayer of your dynasty
				AND = {
					dynasty = FROMFROM
					FROMFROM = {
						is_any_kinslayer_trigger = yes
					}
				}
				
				# Tyrant
				
				has_opinion_modifier = {
					who = FROMFROM
					modifier = opinion_tyrant
				}
				
				# Forced concubinage
				OR = {
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_forced_relative_consort
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_forced_wife_consort
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_forced_consort
					}
				}
				
				# Trucebreaker
				FROMFROM = {
					has_character_modifier = truce_breaker
				}
				
				# Alliance breaker (refused CTA)
				FROMFROM = {
					has_character_modifier = alliance_breaker
				}
				
				# NAP breaker
				FROMFROM = {
					has_character_modifier = broken_non_aggression_pact_char_modifier
				}
				
				# Recently raided me
				has_opinion_modifier = {
					who = FROMFROM
					modifier = opinion_looted
				}
				
				# Decided to become independent by event
				has_opinion_modifier = {
					who = FROMFROM
					modifier = opinion_rightful_vassal
				}
				
				# Broke alliance
				has_opinion_modifier = {
					who = FROMFROM
					modifier = dissolved_alliance
				}
				
				# Recently declared war
				has_opinion_modifier = {
					who = FROMFROM
					modifier = declared_war
				}
				
				# Dishonourable
				has_opinion_modifier = {
					who = FROMFROM
					modifier = opinion_dishonorable
				}
				
				# Broke alliance
				has_opinion_modifier = {
					who = FROMFROM
					modifier = broke_alliance
				}
				
				# Refused CTA
				has_opinion_modifier = {
					who = FROMFROM
					modifier = tribal_vassal_refused_call
				}
				
				# Broke Truce
				has_opinion_modifier = {
					who = FROMFROM
					modifier = broke_truce
				}
				
				# Traitor
				OR = {
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_traitor
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_rebel_traitor
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_regicide_traitor
					}
				}
				
				# Executed my child
				has_opinion_modifier = {
					who = FROMFROM
					modifier = opinion_executed_child
				}
				
				# Is preparing to invade me
				has_opinion_modifier = {
					who = FROMFROM
					modifier = preparing_to_invade_me
				}
				
				# Preparing an adventure against me
				has_opinion_modifier = {
					who = FROMFROM
					modifier = opinion_targeted_by_adventurer
				}
				
				# Absorbed my clan - probably irrelevant, but best to be certain...
				has_opinion_modifier = {
					who = FROMFROM
					modifier = opinion_absorbed_my_clan
				}
				
				# Unfaithful (real or imagined)
				OR = {
					has_opinion_modifier = {
						who = FROMFROM
						modifier = legitimized_bastard
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = acknowledged_bastard
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = slut_seductress
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_cuckolded_private
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_unfaithful_private
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_potential_cuckold
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_unfaithful_wife
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_unfaithful_husband
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_unfaithful_husband_crime
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_cuckolded
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_suspected_adultery
					}
				}
				
				# Peasant revolter vs. former liege
				has_opinion_modifier = {
					who = FROMFROM
					modifier = opinion_evil_tyrant
				}
				
				# Traitorous regent
				has_opinion_modifier = {
					who = FROMFROM
					modifier = opinion_regent_lowered_CA
				}
				
				# Attempted/successful murder of me/my family/my close relatives
				OR = {
					has_opinion_modifier = {
						who = FROMFROM
						modifier = attempted_murder_of_spouse
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = attempted_murder_of_child
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = attempted_murder_of_parent
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = attempted_murder_of_sibling
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = attempted_murder
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_executed_child
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_beheaded_dynasty_member
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_killed_father
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_murder_attempt
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_killed_close_kin
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_dishonorable_scum
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_spouse_slayer
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_chasing_spouse
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_chasing_child
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_killed_lover
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_whorespawn
					}
				}
				
				# Other murder/plot stuff
				OR = {
					has_opinion_modifier = {
						who = FROMFROM
						modifier = attempted_murder_of_vassal
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = attempted_murder_of_spouse_vassal
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = scheming_bastard
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = evil_murderer
					}
				}
				
				# Misc bad stuff, might remove
				OR = {
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_abandoned_wolves
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_falsely_convicted
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_mad_as_hell
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_blackmailed
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_hate
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_burned_same_faith
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_banished_same_faith
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_beheaded_dynasty_member
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_hatred
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_ruthless
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_dishonorable_duel
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_revenge_seeker
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_killed_father
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_poisoner
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_hajj_attempt_murder
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_fatwa_target
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_refused_order
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_burned_tp_despite_bribe
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_nerge_rival
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_refused_blot
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_went_berserk
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_imprisoned_missionary
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_refused_request_holy_order
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_expelled_from_realm
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_driven_from_my_lands
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_witch
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_changed_caste
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_ruler_wrong_caste_hindu
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_ruler_wrong_caste_non_hindu
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_low_caste
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_sacrilege
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_takfir
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_idolater
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = grievously_offended
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_humiliated_rival
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_denied_request
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = squeezed_for_extra_tribute
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = refused_extra_tribute
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = abuse_of_office
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = ally_inactive_in_war
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = broken_non_aggression_pact
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_alliance_breaker
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = expelled_me_from_seclusion
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = expelled_lover_from_seclusion
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_ignored_demands
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_refused_to_end_war
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_refused_council_position
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = declared_independence_nomad
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = immortal_suspicions
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = immortal_hate
					}
				}
				
				# Castrated/mutiliated/blinded/tortured/humiliated me/my relative
				OR = {
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_castrated_me
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_blinded_me
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_castrated_family
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_castrated_close_kin
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_blinded_family
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_blinded_close_kin
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_tortured_me
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_tortured_family
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_tortured_close_kin
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_mutilated_me
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_mutilated_family
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_mutilated_close_kin
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_humiliated_me
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_humiliated_family
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_humiliated_close_kin
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_tickled_me_wrong
					}
				}
				
				# Slander
				OR = {
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_charge_heresiarch
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_charge_infidel
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_charge_deviant
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_charge_illegitimate
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_charge_traitor
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_charge_slanderer
					}
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_slandered
					}
				}
				
				# Various event modifiers, might remove
				FROMFROM = {
					OR = {
						has_character_modifier = voice_of_satan
						has_character_modifier = demon_child_non_pagan
						has_character_modifier = suspected_demon_spawn
						has_character_modifier = suspected_witch
						has_character_modifier = known_witch
						has_character_modifier = the_diamond_thief
						AND = {
							OR = {
								has_character_modifier = wont_let_spouse_touch_me
								has_character_modifier = incestuous_adulterer
								has_character_modifier = incestuous_adulteress
								has_character_modifier = adulterer
								has_character_modifier = adulteress
								has_character_modifier = known_sodomite
								has_character_modifier = known_sodomite_pagan
								has_character_modifier = cradle_robber
								has_character_modifier = adulterous_priest
								has_character_modifier = unfaithful_rumors
							}
							any_spouse = {
								OR = {
									is_chinese_emperor_trigger = yes
									any_close_relative = {
										is_chinese_emperor_trigger = yes
									}
								}
							}
						}
						has_character_modifier = bad_crisis_management
						has_character_modifier = crazy_cannibal
						has_character_modifier = graverobber
					}
				}
				
				### M&M opinions, might remove some
				has_opinion_modifier = {
					who = FROMFROM
					modifier = opinion_attempted_abduction
				}
				has_opinion_modifier = {
					who = FROMFROM
					modifier = opinion_charge_cultist
				}
				has_opinion_modifier = {
					who = FROMFROM
					modifier = opinion_charge_dw
				}
				has_opinion_modifier = {
					who = FROMFROM
					modifier = opinion_lacks_conviction
				}
				has_opinion_modifier = {
					who = FROMFROM
					modifier = opinion_failed_corruption
				}
				has_opinion_modifier = {
					who = FROMFROM
					modifier = opinion_known_corrupter
				}
				has_opinion_modifier = {
					who = FROMFROM
					modifier = opinion_ignorant
				}
				has_opinion_modifier = {
					who = FROMFROM
					modifier = opinion_outraged
				}
				has_opinion_modifier = {
					who = FROMFROM
					modifier = opinion_thief
				}
				has_opinion_modifier = {
					who = FROMFROM
					modifier = opinion_useless_moron
				}
				has_opinion_modifier = {
					who = FROMFROM
					modifier = opinion_extremely_disappointed
				}
				has_opinion_modifier = {
					who = FROMFROM
					modifier = opinion_unimpressed
				}
				has_opinion_modifier = {
					who = FROMFROM
					modifier = stole_artifact
				}
				has_opinion_modifier = {
					who = FROMFROM
					modifier = stole_artifact_penance
				}
				has_opinion_modifier = {
					who = FROMFROM
					modifier = opinion_nemesis
				}
				has_opinion_modifier = {
					who = FROMFROM
					modifier = opinion_rejected_society_membership
				}
				has_opinion_modifier = {
					who = FROMFROM
					modifier = opinion_outlawed_society
				}
				has_opinion_modifier = {
					who = FROMFROM
					modifier = opinion_out_of_touch
				}
				has_opinion_modifier = {
					who = FROMFROM
					modifier = opinion_out_of_touch_mild
				}
				has_opinion_modifier = {
					who = FROMFROM
					modifier = opinion_bad_parent
				}
				has_opinion_modifier = {
					who = FROMFROM
					modifier = opinion_forgot_important_occasion
				}
				has_opinion_modifier = {
					who = FROMFROM
					modifier = opinion_forgot_important_occasion_mild
				}
				has_opinion_modifier = {
					who = FROMFROM
					modifier = opinion_academic_grudge
				}
				has_opinion_modifier = {
					who = FROMFROM
					modifier = opinion_academic_failure
				}
				has_opinion_modifier = {
					who = FROMFROM
					modifier = opinion_knowledge_theft
				}
				has_opinion_modifier = {
					who = FROMFROM
					modifier = opinion_offended
				}
				has_opinion_modifier = {
					who = FROMFROM
					modifier = opinion_argued
				}
				has_opinion_modifier = {
					who = FROMFROM
					modifier = opinion_unreasonable
				}
				has_opinion_modifier = {
					who = FROMFROM
					modifier = opinion_meddler
				}
				has_opinion_modifier = {
					who = FROMFROM
					modifier = opinion_threatened_me
				}
				has_opinion_modifier = {
					who = FROMFROM
					modifier = opinion_accused_apostate
				}
				has_opinion_modifier = {
					who = FROMFROM
					modifier = opinion_abducted
				}
				
				### M&M modifiers, might remove some
				FROMFROM = {
					OR = {
						has_character_modifier = known_satanist
						has_character_modifier = known_secret_society_member
						has_character_modifier = accused_apostate
					}
				}
				
				# JD modifiers, might remove some
				has_opinion_modifier = {
					who = FROMFROM
					modifier = opinion_cat_spymaster
				}
				has_opinion_modifier = {
					who = FROMFROM
					modifier = sold_vassal_province
				}
				has_opinion_modifier = {
					who = FROMFROM
					modifier = sold_my_province
				}
				has_opinion_modifier = {
					who = FROMFROM
					modifier = opinion_sent_my_lover_away
				}
				has_opinion_modifier = {
					who = FROMFROM
					modifier = suzerain_deserted
				}
				has_opinion_modifier = {
					who = FROMFROM
					modifier = suzerain_deserted_reasons
				}
				has_opinion_modifier = {
					who = FROMFROM
					modifier = opinion_declared_unjust_conquest
				}
				has_opinion_modifier = {
					who = FROMFROM
					modifier = opinion_forced_tributary
				}
			}
		}
	}
}

# Checks if the EoC is going to refuse granting FROMFROMFROM all Boons and refuse all Tribute from FROMFROM
# This should be the same as china_hates_from_trigger, but with FROM replaced by FROMFROMFROM
# This is only used when evaluating Imperial Marriages and character-based Tributes
china_hates_fromfromfrom_trigger = {
	# Checking e_china's holder because otherwise we end up running into issues if reusing this trigger where ROOT isn't the EoC
	e_china = {
		holder_scope = {
			OR = {
				# Grace stuff
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = china_peace_deal_breaker
				}
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = opinion_china_breakaway_tributary
				}
				
				# Rivalry
				any_rival = {
					character = FROMFROMFROM
				}
				
				# Cannibal
				FROMFROMFROM = {
					OR = { 
						has_character_modifier = cannibal # Should be irrelevant due to the modifier no longer being used, but...
						trait = cannibal_trait
					}
				}
				
				# Kinslayer of your dynasty
				AND = {
					dynasty = FROMFROMFROM
					FROMFROMFROM = {
						is_any_kinslayer_trigger = yes
					}
				}
				
				# Tyrant
				
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = opinion_tyrant
				}
				
				# Forced concubinage
				OR = {
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_forced_relative_consort
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_forced_wife_consort
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_forced_consort
					}
				}
				
				# Trucebreaker
				FROMFROMFROM = {
					has_character_modifier = truce_breaker
				}
				
				# Alliance breaker (refused CTA)
				FROMFROMFROM = {
					has_character_modifier = alliance_breaker
				}
				
				# NAP breaker
				FROMFROMFROM = {
					has_character_modifier = broken_non_aggression_pact_char_modifier
				}
				
				# Recently raided me
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = opinion_looted
				}
				
				# Decided to become independent by event
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = opinion_rightful_vassal
				}
				
				# Broke alliance
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = dissolved_alliance
				}
				
				# Recently declared war
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = declared_war
				}
				
				# Dishonourable
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = opinion_dishonorable
				}
				
				# Broke alliance
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = broke_alliance
				}
				
				# Refused CTA
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = tribal_vassal_refused_call
				}
				
				# Broke Truce
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = broke_truce
				}
				
				# Traitor
				OR = {
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_traitor
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_rebel_traitor
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_regicide_traitor
					}
				}
				
				# Executed my child
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = opinion_executed_child
				}
				
				# Is preparing to invade me
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = preparing_to_invade_me
				}
				
				# Preparing an adventure against me
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = opinion_targeted_by_adventurer
				}
				
				# Absorbed my clan - probably irrelevant, but best to be certain...
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = opinion_absorbed_my_clan
				}
				
				# Unfaithful (real or imagined)
				OR = {
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = legitimized_bastard
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = acknowledged_bastard
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = slut_seductress
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_cuckolded_private
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_unfaithful_private
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_potential_cuckold
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_unfaithful_wife
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_unfaithful_husband
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_unfaithful_husband_crime
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_cuckolded
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_suspected_adultery
					}
				}
				
				# Peasant revolter vs. former liege
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = opinion_evil_tyrant
				}
				
				# Traitorous regent
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = opinion_regent_lowered_CA
				}
				
				# Attempted/successful murder of me/my family/my close relatives
				OR = {
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = attempted_murder_of_spouse
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = attempted_murder_of_child
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = attempted_murder_of_parent
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = attempted_murder_of_sibling
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = attempted_murder
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_executed_child
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_beheaded_dynasty_member
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_killed_father
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_murder_attempt
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_killed_close_kin
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_dishonorable_scum
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_spouse_slayer
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_chasing_spouse
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_chasing_child
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_killed_lover
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_whorespawn
					}
				}
				
				# Other murder/plot stuff
				OR = {
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = attempted_murder_of_vassal
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = attempted_murder_of_spouse_vassal
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = scheming_bastard
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = evil_murderer
					}
				}
				
				# Misc bad stuff, might remove
				OR = {
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_abandoned_wolves
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_falsely_convicted
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_mad_as_hell
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_blackmailed
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_hate
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_burned_same_faith
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_banished_same_faith
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_beheaded_dynasty_member
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_hatred
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_ruthless
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_dishonorable_duel
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_revenge_seeker
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_killed_father
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_poisoner
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_hajj_attempt_murder
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_fatwa_target
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_refused_order
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_burned_tp_despite_bribe
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_nerge_rival
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_refused_blot
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_went_berserk
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_imprisoned_missionary
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_refused_request_holy_order
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_expelled_from_realm
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_driven_from_my_lands
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_witch
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_changed_caste
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_ruler_wrong_caste_hindu
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_ruler_wrong_caste_non_hindu
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_low_caste
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_sacrilege
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_takfir
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_idolater
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = grievously_offended
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_humiliated_rival
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_denied_request
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = squeezed_for_extra_tribute
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = refused_extra_tribute
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = abuse_of_office
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = ally_inactive_in_war
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = broken_non_aggression_pact
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_alliance_breaker
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = expelled_me_from_seclusion
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = expelled_lover_from_seclusion
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_ignored_demands
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_refused_to_end_war
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_refused_council_position
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = declared_independence_nomad
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = immortal_suspicions
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = immortal_hate
					}
				}
				
				# Castrated/mutiliated/blinded/tortured/humiliated me/my relative
				OR = {
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_castrated_me
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_blinded_me
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_castrated_family
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_castrated_close_kin
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_blinded_family
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_blinded_close_kin
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_tortured_me
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_tortured_family
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_tortured_close_kin
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_mutilated_me
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_mutilated_family
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_mutilated_close_kin
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_humiliated_me
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_humiliated_family
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_humiliated_close_kin
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_tickled_me_wrong
					}
				}
				
				# Slander
				OR = {
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_charge_heresiarch
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_charge_infidel
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_charge_deviant
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_charge_illegitimate
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_charge_traitor
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_charge_slanderer
					}
					has_opinion_modifier = {
						who = FROMFROMFROM
						modifier = opinion_slandered
					}
				}
				
				# Various event modifiers, might remove
				FROMFROMFROM = {
					OR = {
						has_character_modifier = voice_of_satan
						has_character_modifier = demon_child_non_pagan
						has_character_modifier = suspected_demon_spawn
						has_character_modifier = suspected_witch
						has_character_modifier = known_witch
						has_character_modifier = the_diamond_thief
						AND = {
							OR = {
								has_character_modifier = wont_let_spouse_touch_me
								has_character_modifier = incestuous_adulterer
								has_character_modifier = incestuous_adulteress
								has_character_modifier = adulterer
								has_character_modifier = adulteress
								has_character_modifier = known_sodomite
								has_character_modifier = known_sodomite_pagan
								has_character_modifier = cradle_robber
								has_character_modifier = adulterous_priest
								has_character_modifier = unfaithful_rumors
							}
							any_spouse = {
								OR = {
									is_chinese_emperor_trigger = yes
									any_close_relative = {
										is_chinese_emperor_trigger = yes
									}
								}
							}
						}
						has_character_modifier = bad_crisis_management
						has_character_modifier = crazy_cannibal
						has_character_modifier = graverobber
					}
				}
				
				### M&M opinions, might remove some
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = opinion_attempted_abduction
				}
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = opinion_charge_cultist
				}
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = opinion_charge_dw
				}
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = opinion_lacks_conviction
				}
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = opinion_failed_corruption
				}
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = opinion_known_corrupter
				}
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = opinion_ignorant
				}
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = opinion_outraged
				}
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = opinion_thief
				}
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = opinion_useless_moron
				}
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = opinion_extremely_disappointed
				}
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = opinion_unimpressed
				}
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = stole_artifact
				}
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = stole_artifact_penance
				}
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = opinion_nemesis
				}
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = opinion_rejected_society_membership
				}
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = opinion_outlawed_society
				}
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = opinion_out_of_touch
				}
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = opinion_out_of_touch_mild
				}
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = opinion_bad_parent
				}
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = opinion_forgot_important_occasion
				}
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = opinion_forgot_important_occasion_mild
				}
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = opinion_academic_grudge
				}
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = opinion_academic_failure
				}
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = opinion_knowledge_theft
				}
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = opinion_offended
				}
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = opinion_argued
				}
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = opinion_unreasonable
				}
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = opinion_meddler
				}
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = opinion_threatened_me
				}
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = opinion_accused_apostate
				}
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = opinion_abducted
				}
				
				### M&M modifiers, might remove some
				FROMFROMFROM = {
					OR = {
						has_character_modifier = known_satanist
						has_character_modifier = known_secret_society_member
						has_character_modifier = accused_apostate
					}
				}
				
				# JD modifiers, might remove some
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = opinion_cat_spymaster
				}
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = sold_vassal_province
				}
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = sold_my_province
				}
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = opinion_sent_my_lover_away
				}
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = suzerain_deserted
				}
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = suzerain_deserted_reasons
				}
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = opinion_declared_unjust_conquest
				}
				has_opinion_modifier = {
					who = FROMFROMFROM
					modifier = opinion_forced_tributary
				}
			}
		}
	}
}

# Checks if FROM dislikes the EoC
# Used by the AI when deciding if it wants to send a Tribute or not
from_hates_china_trigger = {
	# Checking e_china's holder because otherwise we end up running into issues if reusing this trigger where ROOT isn't the EoC
	e_china = {
		holder_scope = {
			OR = {
				# Grace stuff
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = china_peace_deal_breaker
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_china_breakaway_tributary
				}
				
				# Rivalry
				any_rival = {
					character = FROM
				}
				
				# Cannibal
				FROM = {
					OR = { 
						has_character_modifier = cannibal # Should be irrelevant due to the modifier no longer being used, but...
						trait = cannibal_trait
					}
				}
				
				# Kinslayer of your dynasty
				AND = {
					dynasty = FROM
					FROM = {
						is_any_kinslayer_trigger = yes
					}
				}
				
				# Tyrant
				
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_tyrant
				}
				
				# Forced concubinage
				OR = {
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_forced_relative_consort
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_forced_wife_consort
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_forced_consort
					}
				}
				
				# Trucebreaker
				has_character_modifier = truce_breaker
				
				# Alliance breaker (refused CTA)
				has_character_modifier = alliance_breaker
				
				# NAP breaker
				has_character_modifier = broken_non_aggression_pact_char_modifier
				
				# Recently raided me
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_looted
				}
				
				# Decided to become independent by event
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_rightful_vassal
				}
				
				# Broke alliance
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = dissolved_alliance
				}
				
				# Recently declared war
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = declared_war
				}
				
				# Dishonourable
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_dishonorable
				}
				
				# Broke alliance
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = broke_alliance
				}
				
				# Refused CTA
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = tribal_vassal_refused_call
				}
				
				# Broke Truce
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = broke_truce
				}
				
				# Traitor
				OR = {
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_traitor
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_rebel_traitor
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_regicide_traitor
					}
				}
				
				# Executed my child
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_executed_child
				}
				
				# Is preparing to invade me
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = preparing_to_invade_me
				}
				
				# Preparing an adventure against me
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_targeted_by_adventurer
				}
				
				# Absorbed my clan - probably irrelevant, but best to be certain...
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_absorbed_my_clan
				}
				
				# Unfaithful (real or imagined)
				OR = {
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = legitimized_bastard
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = acknowledged_bastard
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = slut_seductress
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_cuckolded_private
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_unfaithful_private
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_potential_cuckold
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_unfaithful_wife
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_unfaithful_husband
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_unfaithful_husband_crime
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_cuckolded
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_suspected_adultery
					}
				}
				
				# Peasant revolter vs. former liege
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_evil_tyrant
				}
				
				# Traitorous regent
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_regent_lowered_CA
				}
				
				# Attempted/successful murder of me/my family/my close relatives
				OR = {
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = attempted_murder_of_spouse
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = attempted_murder_of_child
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = attempted_murder_of_parent
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = attempted_murder_of_sibling
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = attempted_murder
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_executed_child
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_beheaded_dynasty_member
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_killed_father
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_murder_attempt
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_killed_close_kin
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_dishonorable_scum
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_spouse_slayer
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_chasing_spouse
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_chasing_child
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_killed_lover
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_whorespawn
					}
				}
				
				# Other murder/plot stuff
				OR = {
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = attempted_murder_of_vassal
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = attempted_murder_of_spouse_vassal
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = scheming_bastard
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = evil_murderer
					}
				}
				
				# Misc bad stuff, might remove
				OR = {
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_abandoned_wolves
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_falsely_convicted
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_mad_as_hell
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_blackmailed
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_hate
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_burned_same_faith
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_banished_same_faith
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_beheaded_dynasty_member
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_hatred
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_ruthless
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_dishonorable_duel
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_revenge_seeker
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_killed_father
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_poisoner
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_hajj_attempt_murder
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_fatwa_target
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_refused_order
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_burned_tp_despite_bribe
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_nerge_rival
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_refused_blot
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_went_berserk
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_imprisoned_missionary
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_refused_request_holy_order
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_expelled_from_realm
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_driven_from_my_lands
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_witch
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_changed_caste
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_ruler_wrong_caste_hindu
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_ruler_wrong_caste_non_hindu
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_low_caste
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_sacrilege
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_takfir
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_idolater
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = grievously_offended
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_humiliated_rival
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_denied_request
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = squeezed_for_extra_tribute
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = refused_extra_tribute
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = abuse_of_office
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = ally_inactive_in_war
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = broken_non_aggression_pact
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_alliance_breaker
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = expelled_me_from_seclusion
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = expelled_lover_from_seclusion
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_ignored_demands
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_refused_to_end_war
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_refused_council_position
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = declared_independence_nomad
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = immortal_suspicions
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = immortal_hate
					}
				}
				
				# Castrated/mutiliated/blinded/tortured/humiliated me/my relative
				OR = {
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_castrated_me
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_blinded_me
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_castrated_family
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_castrated_close_kin
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_blinded_family
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_blinded_close_kin
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_tortured_me
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_tortured_family
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_tortured_close_kin
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_mutilated_me
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_mutilated_family
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_mutilated_close_kin
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_humiliated_me
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_humiliated_family
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_humiliated_close_kin
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_tickled_me_wrong
					}
				}
				
				# Slander
				OR = {
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_charge_heresiarch
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_charge_infidel
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_charge_deviant
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_charge_illegitimate
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_charge_traitor
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_charge_slanderer
					}
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_slandered
					}
				}
				
				# Various event modifiers, might remove
				OR = {
					has_character_modifier = voice_of_satan
					has_character_modifier = demon_child_non_pagan
					has_character_modifier = suspected_demon_spawn
					has_character_modifier = suspected_witch
					has_character_modifier = known_witch
					has_character_modifier = the_diamond_thief
					AND = {
						OR = {
							has_character_modifier = wont_let_spouse_touch_me
							has_character_modifier = incestuous_adulterer
							has_character_modifier = incestuous_adulteress
							has_character_modifier = adulterer
							has_character_modifier = adulteress
							has_character_modifier = known_sodomite
							has_character_modifier = known_sodomite_pagan
							has_character_modifier = cradle_robber
							has_character_modifier = adulterous_priest
							has_character_modifier = unfaithful_rumors
						}
						any_spouse = {
							OR = {
								character = FROM
								any_close_relative = {
									character = FROM
								}
							}
						}
					}
					has_character_modifier = bad_crisis_management
					has_character_modifier = crazy_cannibal
					has_character_modifier = graverobber
				}
				
				### M&M opinions, might remove some
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_attempted_abduction
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_charge_cultist
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_charge_dw
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_lacks_conviction
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_failed_corruption
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_known_corrupter
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_ignorant
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_outraged
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_thief
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_useless_moron
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_extremely_disappointed
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_unimpressed
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = stole_artifact
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = stole_artifact_penance
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_nemesis
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_rejected_society_membership
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_outlawed_society
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_out_of_touch
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_out_of_touch_mild
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_bad_parent
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_forgot_important_occasion
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_forgot_important_occasion_mild
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_academic_grudge
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_academic_failure
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_knowledge_theft
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_offended
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_argued
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_unreasonable
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_meddler
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_threatened_me
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_accused_apostate
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_abducted
				}
				
				### M&M modifiers, might remove some
				OR = {
					has_character_modifier = known_satanist
					has_character_modifier = known_secret_society_member
					has_character_modifier = accused_apostate
				}
				
				# JD modifiers, might remove some
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_cat_spymaster
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = sold_vassal_province
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = sold_my_province
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_sent_my_lover_away
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = suzerain_deserted
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = suzerain_deserted_reasons
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_declared_unjust_conquest
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_forced_tributary
				}
			}
		}
	}
}

# Checks if the EoC hates PREVPREV; used for passing Tributes on to vassals
# This should be the same as china_hates_from_trigger, but with FROM replaced by PREVPREV
china_hates_prevprev_trigger = {
	# Checking e_china's holder because otherwise we end up running into issues if reusing this trigger where ROOT isn't the EoC
	e_china = {
		holder_scope = {
			OR = {
				# Grace stuff
				has_opinion_modifier = {
					who = PREVPREV
					modifier = china_peace_deal_breaker
				}
				has_opinion_modifier = {
					who = PREVPREV
					modifier = opinion_china_breakaway_tributary
				}
				
				# Rivalry
				any_rival = {
					character = PREVPREV
				}
				
				# Cannibal
				PREVPREV = {
					OR = { 
						has_character_modifier = cannibal # Should be irrelevant due to the modifier no longer being used, but...
						trait = cannibal_trait
					}
				}
				
				# Kinslayer of your dynasty
				AND = {
					dynasty = PREVPREV
					PREVPREV = {
						is_any_kinslayer_trigger = yes
					}
				}
				
				# Tyrant
				
				has_opinion_modifier = {
					who = PREVPREV
					modifier = opinion_tyrant
				}
				
				# Forced concubinage
				OR = {
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_forced_relative_consort
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_forced_wife_consort
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_forced_consort
					}
				}
				
				# Trucebreaker
				PREVPREV = {
					has_character_modifier = truce_breaker
				}
				
				# Alliance breaker (refused CTA)
				PREVPREV = {
					has_character_modifier = alliance_breaker
				}
				
				# NAP breaker
				PREVPREV = {
					has_character_modifier = broken_non_aggression_pact_char_modifier
				}
				
				# Recently raided me
				has_opinion_modifier = {
					who = PREVPREV
					modifier = opinion_looted
				}
				
				# Decided to become independent by event
				has_opinion_modifier = {
					who = PREVPREV
					modifier = opinion_rightful_vassal
				}
				
				# Broke alliance
				has_opinion_modifier = {
					who = PREVPREV
					modifier = dissolved_alliance
				}
				
				# Recently declared war
				has_opinion_modifier = {
					who = PREVPREV
					modifier = declared_war
				}
				
				# Dishonourable
				has_opinion_modifier = {
					who = PREVPREV
					modifier = opinion_dishonorable
				}
				
				# Broke alliance
				has_opinion_modifier = {
					who = PREVPREV
					modifier = broke_alliance
				}
				
				# Refused CTA
				has_opinion_modifier = {
					who = PREVPREV
					modifier = tribal_vassal_refused_call
				}
				
				# Broke Truce
				has_opinion_modifier = {
					who = PREVPREV
					modifier = broke_truce
				}
				
				# Traitor
				OR = {
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_traitor
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_rebel_traitor
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_regicide_traitor
					}
				}
				
				# Executed my child
				has_opinion_modifier = {
					who = PREVPREV
					modifier = opinion_executed_child
				}
				
				# Is preparing to invade me
				has_opinion_modifier = {
					who = PREVPREV
					modifier = preparing_to_invade_me
				}
				
				# Preparing an adventure against me
				has_opinion_modifier = {
					who = PREVPREV
					modifier = opinion_targeted_by_adventurer
				}
				
				# Absorbed my clan - probably irrelevant, but best to be certain...
				has_opinion_modifier = {
					who = PREVPREV
					modifier = opinion_absorbed_my_clan
				}
				
				# Unfaithful (real or imagined)
				OR = {
					has_opinion_modifier = {
						who = PREVPREV
						modifier = legitimized_bastard
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = acknowledged_bastard
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = slut_seductress
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_cuckolded_private
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_unfaithful_private
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_potential_cuckold
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_unfaithful_wife
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_unfaithful_husband
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_unfaithful_husband_crime
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_cuckolded
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_suspected_adultery
					}
				}
				
				# Peasant revolter vs. former liege
				has_opinion_modifier = {
					who = PREVPREV
					modifier = opinion_evil_tyrant
				}
				
				# Traitorous regent
				has_opinion_modifier = {
					who = PREVPREV
					modifier = opinion_regent_lowered_CA
				}
				
				# Attempted/successful murder of me/my family/my close relatives
				OR = {
					has_opinion_modifier = {
						who = PREVPREV
						modifier = attempted_murder_of_spouse
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = attempted_murder_of_child
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = attempted_murder_of_parent
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = attempted_murder_of_sibling
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = attempted_murder
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_executed_child
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_beheaded_dynasty_member
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_killed_father
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_murder_attempt
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_killed_close_kin
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_dishonorable_scum
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_spouse_slayer
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_chasing_spouse
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_chasing_child
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_killed_lover
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_whorespawn
					}
				}
				
				# Other murder/plot stuff
				OR = {
					has_opinion_modifier = {
						who = PREVPREV
						modifier = attempted_murder_of_vassal
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = attempted_murder_of_spouse_vassal
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = scheming_bastard
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = evil_murderer
					}
				}
				
				# Misc bad stuff, might remove
				OR = {
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_abandoned_wolves
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_falsely_convicted
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_mad_as_hell
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_blackmailed
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_hate
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_burned_same_faith
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_banished_same_faith
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_beheaded_dynasty_member
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_hatred
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_ruthless
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_dishonorable_duel
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_revenge_seeker
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_killed_father
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_poisoner
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_hajj_attempt_murder
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_fatwa_target
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_refused_order
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_burned_tp_despite_bribe
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_nerge_rival
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_refused_blot
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_went_berserk
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_imprisoned_missionary
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_refused_request_holy_order
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_expelled_from_realm
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_driven_from_my_lands
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_witch
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_changed_caste
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_ruler_wrong_caste_hindu
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_ruler_wrong_caste_non_hindu
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_low_caste
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_sacrilege
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_takfir
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_idolater
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = grievously_offended
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_humiliated_rival
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_denied_request
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = squeezed_for_extra_tribute
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = refused_extra_tribute
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = abuse_of_office
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = ally_inactive_in_war
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = broken_non_aggression_pact
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_alliance_breaker
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = expelled_me_from_seclusion
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = expelled_lover_from_seclusion
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_ignored_demands
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_refused_to_end_war
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_refused_council_position
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = declared_independence_nomad
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = immortal_suspicions
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = immortal_hate
					}
				}
				
				# Castrated/mutiliated/blinded/tortured/humiliated me/my relative
				OR = {
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_castrated_me
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_blinded_me
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_castrated_family
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_castrated_close_kin
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_blinded_family
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_blinded_close_kin
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_tortured_me
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_tortured_family
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_tortured_close_kin
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_mutilated_me
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_mutilated_family
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_mutilated_close_kin
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_humiliated_me
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_humiliated_family
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_humiliated_close_kin
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_tickled_me_wrong
					}
				}
				
				# Slander
				OR = {
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_charge_heresiarch
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_charge_infidel
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_charge_deviant
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_charge_illegitimate
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_charge_traitor
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_charge_slanderer
					}
					has_opinion_modifier = {
						who = PREVPREV
						modifier = opinion_slandered
					}
				}
				
				# Various event modifiers, might remove
				PREVPREV = {
					OR = {
						has_character_modifier = voice_of_satan
						has_character_modifier = demon_child_non_pagan
						has_character_modifier = suspected_demon_spawn
						has_character_modifier = suspected_witch
						has_character_modifier = known_witch
						has_character_modifier = the_diamond_thief
						AND = {
							OR = {
								has_character_modifier = wont_let_spouse_touch_me
								has_character_modifier = incestuous_adulterer
								has_character_modifier = incestuous_adulteress
								has_character_modifier = adulterer
								has_character_modifier = adulteress
								has_character_modifier = known_sodomite
								has_character_modifier = known_sodomite_pagan
								has_character_modifier = cradle_robber
								has_character_modifier = adulterous_priest
								has_character_modifier = unfaithful_rumors
							}
							any_spouse = {
								OR = {
									is_chinese_emperor_trigger = yes
									any_close_relative = {
										is_chinese_emperor_trigger = yes
									}
								}
							}
						}
						has_character_modifier = bad_crisis_management
						has_character_modifier = crazy_cannibal
						has_character_modifier = graverobber
					}
				}
				
				### M&M opinions, might remove some
				has_opinion_modifier = {
					who = PREVPREV
					modifier = opinion_attempted_abduction
				}
				has_opinion_modifier = {
					who = PREVPREV
					modifier = opinion_charge_cultist
				}
				has_opinion_modifier = {
					who = PREVPREV
					modifier = opinion_charge_dw
				}
				has_opinion_modifier = {
					who = PREVPREV
					modifier = opinion_lacks_conviction
				}
				has_opinion_modifier = {
					who = PREVPREV
					modifier = opinion_failed_corruption
				}
				has_opinion_modifier = {
					who = PREVPREV
					modifier = opinion_known_corrupter
				}
				has_opinion_modifier = {
					who = PREVPREV
					modifier = opinion_ignorant
				}
				has_opinion_modifier = {
					who = PREVPREV
					modifier = opinion_outraged
				}
				has_opinion_modifier = {
					who = PREVPREV
					modifier = opinion_thief
				}
				has_opinion_modifier = {
					who = PREVPREV
					modifier = opinion_useless_moron
				}
				has_opinion_modifier = {
					who = PREVPREV
					modifier = opinion_extremely_disappointed
				}
				has_opinion_modifier = {
					who = PREVPREV
					modifier = opinion_unimpressed
				}
				has_opinion_modifier = {
					who = PREVPREV
					modifier = stole_artifact
				}
				has_opinion_modifier = {
					who = PREVPREV
					modifier = stole_artifact_penance
				}
				has_opinion_modifier = {
					who = PREVPREV
					modifier = opinion_nemesis
				}
				has_opinion_modifier = {
					who = PREVPREV
					modifier = opinion_rejected_society_membership
				}
				has_opinion_modifier = {
					who = PREVPREV
					modifier = opinion_outlawed_society
				}
				has_opinion_modifier = {
					who = PREVPREV
					modifier = opinion_out_of_touch
				}
				has_opinion_modifier = {
					who = PREVPREV
					modifier = opinion_out_of_touch_mild
				}
				has_opinion_modifier = {
					who = PREVPREV
					modifier = opinion_bad_parent
				}
				has_opinion_modifier = {
					who = PREVPREV
					modifier = opinion_forgot_important_occasion
				}
				has_opinion_modifier = {
					who = PREVPREV
					modifier = opinion_forgot_important_occasion_mild
				}
				has_opinion_modifier = {
					who = PREVPREV
					modifier = opinion_academic_grudge
				}
				has_opinion_modifier = {
					who = PREVPREV
					modifier = opinion_academic_failure
				}
				has_opinion_modifier = {
					who = PREVPREV
					modifier = opinion_knowledge_theft
				}
				has_opinion_modifier = {
					who = PREVPREV
					modifier = opinion_offended
				}
				has_opinion_modifier = {
					who = PREVPREV
					modifier = opinion_argued
				}
				has_opinion_modifier = {
					who = PREVPREV
					modifier = opinion_unreasonable
				}
				has_opinion_modifier = {
					who = PREVPREV
					modifier = opinion_meddler
				}
				has_opinion_modifier = {
					who = PREVPREV
					modifier = opinion_threatened_me
				}
				has_opinion_modifier = {
					who = PREVPREV
					modifier = opinion_accused_apostate
				}
				has_opinion_modifier = {
					who = PREVPREV
					modifier = opinion_abducted
				}
				
				### M&M modifiers, might remove some
				PREVPREV = {
					OR = {
						has_character_modifier = known_satanist
						has_character_modifier = known_secret_society_member
						has_character_modifier = accused_apostate
					}
				}
				
				# JD modifiers, might remove some
				has_opinion_modifier = {
					who = PREVPREV
					modifier = opinion_cat_spymaster
				}
				has_opinion_modifier = {
					who = PREVPREV
					modifier = sold_vassal_province
				}
				has_opinion_modifier = {
					who = PREVPREV
					modifier = sold_my_province
				}
				has_opinion_modifier = {
					who = PREVPREV
					modifier = opinion_sent_my_lover_away
				}
				has_opinion_modifier = {
					who = PREVPREV
					modifier = suzerain_deserted
				}
				has_opinion_modifier = {
					who = PREVPREV
					modifier = suzerain_deserted_reasons
				}
				has_opinion_modifier = {
					who = PREVPREV
					modifier = opinion_declared_unjust_conquest
				}
				has_opinion_modifier = {
					who = PREVPREV
					modifier = opinion_forced_tributary
				}
			}
		}
	}
}

# Checks if the EoC has strategic reasons to not accept Tributary/NAP ("Peace Treaty")/etc. Tributes/Boons from FROM
china_wants_froms_land_trigger = {
	OR = {
		# Holds a province in the Chinese region or that is de jure part of China, or has a tributary that does this
		FROM = {
			OR = {
				any_realm_province = {
					OR = {
						AND = {
							region = world_china
							# Let Dali and Taiwan become tributaries if they so wish
							NOR = {
								region = world_dali
								region = world_taiwan
							}
						}
						county = {
							de_jure_liege_or_above = e_china
						}
					}
				}
				any_tributary = {
					any_realm_province = {
						OR = {
							AND = {
								region = world_china
								# Let Dali and Taiwan become tributaries if they so wish
								NOR = {
									region = world_dali
									region = world_taiwan
								}
							}
							county = {
								de_jure_liege_or_above = e_china
							}
						}
					}
				}
			}
		}
		# Any realm or tributary title is claimed by the EoC
		any_claim = {
			holder_scope = {
				 OR = {
					character = FROM
					any_liege = {
						OR = {
							character = FROM
							suzerain = {
								character = FROM
							}
						}
					}
					suzerain = {
						character = FROM
					}
				 }
			}
		}
	}
	# The EoC is likely to want to expand
	e_china = {
		holder_scope = {
			OR = {
				trait = ambitious
				trait = proud
				trait = brave
			}
			NOR = {
				trait = content
				trait = craven
				trait = humble
			}
		}
	}
}

# Checks if the EoC has strategic reasons to not accept Tributary/NAP ("Peace Treaty")/etc. Tributes/Boons from FROMFROM
# This should be the same as china_wants_froms_land_trigger, but with FROM replaced by FROMFROM
china_wants_fromfroms_land_trigger = {
	OR = {
		# Holds a province in the Chinese region or that is de jure part of China, or has a tributary that does this
		FROMFROM = {
			OR = {
				any_realm_province = {
					OR = {
						AND = {
							region = world_china
							# Let Dali and Taiwan become tributaries if they so wish
							NOR = {
								region = world_dali
								region = world_taiwan
							}
						}
						county = {
							de_jure_liege_or_above = e_china
						}
					}
				}
				any_tributary = {
					any_realm_province = {
						OR = {
							AND = {
								region = world_china
								# Let Dali and Taiwan become tributaries if they so wish
								NOR = {
									region = world_dali
									region = world_taiwan
								}
							}
							county = {
								de_jure_liege_or_above = e_china
							}
						}
					}
				}
			}
		}
		# Any realm or tributary title is claimed by the EoC
		any_claim = {
			holder_scope = {
				 OR = {
					character = FROMFROM
					any_liege = {
						OR = {
							character = FROMFROM
							suzerain = {
								character = FROMFROM
							}
						}
					}
					suzerain = {
						character = FROMFROM
					}
				 }
			}
		}
	}
	# The EoC is likely to want to expand
	e_china = {
		holder_scope = {
			OR = {
				trait = ambitious
				trait = proud
				trait = brave
			}
			NOR = {
				trait = content
				trait = craven
				trait = humble
			}
		}
	}
}

# Checks if the EoC is blocking ALL Boons
# The AI will NEVER send Tributes if all Boons are blocked
is_blocking_all_boons_trigger = {
	has_character_flag = china_no_peace_deal_boons
	has_character_flag = china_no_physician_boons
	has_character_flag = china_no_artifact_boons
	has_character_flag = china_no_siege_engineer_boons
	has_character_flag = china_no_strategist_boons
	has_character_flag = china_no_administrator_boons
	has_character_flag = china_no_master_engineer_boons
	has_character_flag = china_no_trade_contract_boons
	has_character_flag = china_no_imperial_marriage_boons
}


### Tributes

# Checks if China accepts Tributes at all
# Might be useful if we decide to have ways for China to become isolationist
china_accepts_tribute_trigger = {
	is_inaccessible_trigger = no
	NOT = {
		trait = incapable
	}
	prisoner = no
}

# Checks if AI China will accept the "Send Gift" Tribute in general
china_accepts_gold_tribute_trigger = {
	china_accepts_tribute_trigger = yes
	NOT = {
		has_character_flag = china_no_gold_tributes # Player-only opt-out
	}
}

# Checks if AI China will accept the "Send Gift" Tribute from FROM
# The AI will never try to send a Tribute if it wouldn't be accepted by an AI China
china_accepts_gold_tribute_from_trigger = {
	china_accepts_gold_tribute_trigger = yes
	china_hates_from_trigger = no
}

# Checks if AI China will accept the "Send Gift" Tribute from FROMFROM
# The AI will never try to send a Tribute if it wouldn't be accepted by an AI China
china_accepts_gold_tribute_fromfrom_trigger = {
	china_accepts_gold_tribute_trigger = yes
	china_hates_fromfrom_trigger = no
}

# Checks if AI China will accept the "Become Tributary" Tribute in general
china_accepts_tributaries_trigger = {
	china_accepts_tribute_trigger = yes
	NOT = {
		has_character_flag = china_no_tributaries # Player-only opt-out
	}
}

# Checks if AI China will accept the "Become Tributary" Tribute from FROM
# The AI will never try to send a Tribute if it wouldn't be accepted by an AI China
china_accepts_tributary_from_trigger = {
	china_accepts_tributaries_trigger = yes
	china_hates_from_trigger = no
	china_wants_froms_land_trigger = no
}

# Checks if AI China will accept the "Become Tributary" Tribute from FROMFROM
# The AI will never try to send a Tribute if it wouldn't be accepted by an AI China
china_accepts_tributary_fromfrom_trigger = {
	china_accepts_tributaries_trigger = yes
	china_hates_fromfrom_trigger = no
	china_wants_fromfroms_land_trigger = no
}

# Checks if AI China will accept the "Supply Horses" Tribute in general
china_accepts_horses_tribute_trigger = {
	china_accepts_tribute_trigger = yes
	NOT = {
		has_character_flag = china_no_horses_tributes # Player-only opt-out
	}
}

# Checks if AI China will accept the "Supply Horses" Tribute from FROM
# The AI will never try to send a Tribute if it wouldn't be accepted by an AI China
china_accepts_horses_tribute_from_trigger = {
	china_accepts_horses_tribute_trigger = yes
	china_hates_from_trigger = no
}

# Checks if AI China will accept the "Supply Horses" Tribute from FROMFROM
# The AI will never try to send a Tribute if it wouldn't be accepted by an AI China
china_accepts_horses_tribute_fromfrom_trigger = {
	china_accepts_horses_tribute_trigger = yes
	china_hates_fromfrom_trigger = no
}

# Checks if AI China will accept the "Offer Eunuch" Tribute in general
china_accepts_eunuch_tribute_trigger = {
	china_accepts_tribute_trigger = yes
	NOT = {
		has_character_flag = china_no_eunuch_tributes # Player-only opt-out
	}
}

# Checks if AI China will accept the "Offer Eunuch" Tribute from FROM
# The AI will never try to send a Tribute if it wouldn't be accepted by an AI China
china_accepts_eunuch_tribute_from_trigger = {
	china_accepts_eunuch_tribute_trigger = yes
	china_hates_from_trigger = no
}

# Checks if AI China will accept the "Offer Eunuch" Tribute from FROMFROM
# The AI will never try to send a Tribute if it wouldn't be accepted by an AI China
china_accepts_eunuch_tribute_fromfrom_trigger = {
	china_accepts_eunuch_tribute_trigger = yes
	china_hates_fromfrom_trigger = no
}

# Checks if AI China will accept the "Offer Concubine" Tribute in general
china_accepts_concubine_tribute_trigger = {
	china_accepts_tribute_trigger = yes
	# The EoC or his heir must be male, adult, accessible, and capable of fathering children
	OR = {
		AND = {
			is_female = no
			is_adult = yes
			NOR = {
				trait = eunuch
				trait = incapable
				trait = celibate # No interest
				trait = homosexual # Should not bother with lots of concubines
			}
			prisoner = no
			is_inaccessible_trigger = no
		}
		current_heir = {
			is_female = no
			is_adult = yes
			is_landed = no
			host = {
				character = ROOT
			}
			dynasty = ROOT
			NOR = {
				trait = eunuch
				trait = incapable
				trait = celibate # No interest
				trait = homosexual # Should not bother with lots of concubines
			}
			prisoner = no
			is_inaccessible_trigger = no
		}
	}
	NOT = {
		has_character_flag = china_no_concubine_tributes # Player-only opt-out
	}
}

# Checks if AI China will accept the "Offer Concubine" Tribute from FROM
# The AI will never try to send a Tribute if it wouldn't be accepted by an AI China
china_accepts_concubine_tribute_from_trigger = {
	china_accepts_concubine_tribute_trigger = yes
	china_hates_from_trigger = no
}

# Checks if AI China will accept the "Offer Concubine" Tribute from FROMFROM
# The AI will never try to send a Tribute if it wouldn't be accepted by an AI China
china_accepts_concubine_tribute_fromfrom_trigger = {
	china_accepts_concubine_tribute_trigger = yes
	china_hates_fromfrom_trigger = no
}

# Checks if AI china will accept the "Offer Commander" Tribute in general
china_accepts_commander_tribute_trigger = {
	# The EoC needs to be a primary war participant
	any_war = {
		NOT = {
			using_cb = peasant_revolt
			# Add more revolts?
		}
		OR = {
			attacker = {
				character = ROOT
			}
			defender = {
				character = ROOT
			}
		}
	}
	NOT = {
		has_character_flag = china_no_commander_tributes # Player-only opt-out
	}
}

# Checks if AI China will accept the "Offer Commander" Tribute from FROM
# The AI will never try to send a Tribute if it wouldn't be accepted by an AI China
china_accepts_commander_tribute_from_trigger = {
	china_accepts_commander_tribute_trigger = yes
	china_hates_from_trigger = no
}

# Checks if AI China will accept the "Offer Commander" Tribute from FROMFROM
# The AI will never try to send a Tribute if it wouldn't be accepted by an AI China
china_accepts_commander_tribute_fromfrom_trigger = {
	china_accepts_commander_tribute_trigger = yes
	china_hates_fromfrom_trigger = no
}

# Checks if AI china will accept the "Offer Physician" Tribute in general
china_accepts_physician_tribute_trigger = {
	# Assume a baseline of 3.33 holdings/county and aim for approx. 20 % diseased provinces up to 400, then a flat 30 diseased provinces
	OR = {
		AND = {
			NOT = {
				realm_size = 100
			}
			any_realm_province = {
				count = 6
				has_disease = yes
			}
		}
		AND = {
			realm_size = 100
			NOT = {
				realm_size = 200
			}
			any_realm_province = {
				count = 12
				has_disease = yes
			}
		}
		AND = {
			realm_size = 200
			NOT = {
				realm_size = 300
			}
			any_realm_province = {
				count = 18
				has_disease = yes
			}
		}
		AND = {
			realm_size = 300
			NOT = {
				realm_size = 400
			}
			any_realm_province = {
				count = 24
				has_disease = yes
			}
		}
		AND = {
			realm_size = 400
			any_realm_province = {
				count = 30
				has_disease = yes
			}
		}
	}
	NOT = {
		has_character_flag = china_no_physician_tributes # Player-only opt-out
	}
}

# Checks if AI China will accept the "Offer Physician" Tribute from FROM
# The AI will never try to send a Tribute if it wouldn't be accepted by an AI China
china_accepts_physician_tribute_from_trigger = {
	china_accepts_physician_tribute_trigger = yes
	china_hates_from_trigger = no
}

# Checks if AI China will accept the "Offer Physician" Tribute from FROMFROM
# The AI will never try to send a Tribute if it wouldn't be accepted by an AI China
china_accepts_physician_tribute_fromfrom_trigger = {
	china_accepts_physician_tribute_trigger = yes
	china_hates_fromfrom_trigger = no
}

# Checks if AI china will accept the "Launch a Relief Expedition" Tribute in general
china_accepts_relief_tribute_trigger = {
	# Assume a baseline of 3.33 holdings/county and aim for approx. 10 % depopulated provinces up to 400, then a flat 15 depopulated provinces
	OR = {
		AND = {
			NOT = {
				realm_size = 100
			}
			any_realm_province = {
				count = 3
				OR = {
					has_province_modifier = depopulated_1
					has_province_modifier = depopulated_2
					has_province_modifier = depopulated_3
				}
			}
		}
		AND = {
			realm_size = 100
			NOT = {
				realm_size = 200
			}
			any_realm_province = {
				count = 6
				OR = {
					has_province_modifier = depopulated_1
					has_province_modifier = depopulated_2
					has_province_modifier = depopulated_3
				}
			}
		}
		AND = {
			realm_size = 200
			NOT = {
				realm_size = 300
			}
			any_realm_province = {
				count = 9
				OR = {
					has_province_modifier = depopulated_1
					has_province_modifier = depopulated_2
					has_province_modifier = depopulated_3
				}
			}
		}
		AND = {
			realm_size = 300
			NOT = {
				realm_size = 400
			}
			any_realm_province = {
				count = 12
				OR = {
					has_province_modifier = depopulated_1
					has_province_modifier = depopulated_2
					has_province_modifier = depopulated_3
				}
			}
		}
		AND = {
			realm_size = 400
			any_realm_province = {
				count = 15
				has_disease = yes
			}
		}
	}
	NOT = {
		has_character_flag = china_no_relief_tributes # Player-only opt-out
	}
}

# Checks if AI China will accept the "Launch a Relief Expedition" Tribute from FROM
# The AI will never try to send a Tribute if it wouldn't be accepted by an AI China
china_accepts_relief_tribute_from_trigger = {
	china_accepts_relief_tribute_trigger = yes
	china_hates_from_trigger = no
}

# Checks if AI China will accept the "Launch a Relief Expedition" Tribute from FROMFROM
# The AI will never try to send a Tribute if it wouldn't be accepted by an AI China
china_accepts_relief_tribute_fromfrom_trigger = {
	china_accepts_relief_tribute_trigger = yes
	china_hates_fromfrom_trigger = no
}

# Checks if AI china will accept the "Offer Artifact" Tribute in general
china_accepts_artifact_tribute_trigger = {
	NOT = {
		has_character_flag = china_no_artifact_tributes # Player-only opt-out
	}
}

# Checks if AI China will accept the "Offer Artifact" Tribute from FROM
# The AI will never try to send a Tribute if it wouldn't be accepted by an AI China
china_accepts_artifact_tribute_from_trigger = {
	china_accepts_artifact_tribute_trigger = yes
	china_hates_from_trigger = no
}

# Checks if AI China will accept the "Offer Artifact" Tribute from FROMFROM
# The AI will never try to send a Tribute if it wouldn't be accepted by an AI China
china_accepts_artifact_tribute_fromfrom_trigger = {
	china_accepts_artifact_tribute_trigger = yes
	china_hates_fromfrom_trigger = no
}

### Boons

# Checks if AI China will grant the "Ask for Peace Deal" Boon in general
china_grants_peace_deal_boon_trigger = {
	NOT = {
		has_character_flag = china_no_peace_deal_boons # Player-only opt-out
	}
}

# Checks if AI China would grant FROM the "Ask for Peace Deal" Boon
# The AI will never ask for Boons that will be refused
china_grants_peace_deal_boon_from_trigger = {
	china_grants_peace_deal_boon_trigger = yes
	china_hates_from_trigger = no
	china_wants_froms_land_trigger = no
	# China is only interested in peace treaties with people near it or its tributaries
	FROM = {
		any_realm_province = {
			any_neighbor_province = {
				OR = {
					AND = {
						has_owner = yes
						owner = {
							OR = {
								character = ROOT
								is_liege_or_above = ROOT
								suzerain = {
									character = ROOT
								}
								any_liege = {
									suzerain = {
										character = ROOT
									}
								}
							}
						}
					}
					AND = {
						is_land = no
						any_neighbor_province = {
							OR = {
								AND = {
									has_owner = yes
									owner = {
										OR = {
											character = ROOT
											is_liege_or_above = ROOT
											suzerain = {
												character = ROOT
											}
											any_liege = {
												suzerain = {
													character = ROOT
												}
											}
										}
									}
								}
								AND = {
									is_land = no
									any_neighbor_province = {
										owner = {
											OR = {
												character = ROOT
												is_liege_or_above = ROOT
												suzerain = {
													character = ROOT
												}
												any_liege = {
													suzerain = {
														character = ROOT
													}
												}
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
	NOT = {
		has_opinion_modifier = {
			who = FROM
			modifier = china_peace_deal_breaker
		}
	}
}

# Checks if AI China would grant FROMFROM the "Ask for Peace Deal" Boon
# The AI will never ask for Boons that will be refused
china_grants_peace_deal_boon_fromfrom_trigger = {
	china_grants_peace_deal_boon_trigger = yes
	china_hates_fromfrom_trigger = no
	china_wants_fromfroms_land_trigger = no
	# China is only interested in peace treaties with people near it or its tributaries
	FROMFROM = {
		any_realm_province = {
			any_neighbor_province = {
				OR = {
					AND = {
						has_owner = yes
						owner = {
							OR = {
								character = ROOT
								is_liege_or_above = ROOT
								suzerain = {
									character = ROOT
								}
								any_liege = {
									suzerain = {
										character = ROOT
									}
								}
							}
						}
					}
					AND = {
						is_land = no
						any_neighbor_province = {
							OR = {
								AND = {
									has_owner = yes
									owner = {
										OR = {
											character = ROOT
											is_liege_or_above = ROOT
											suzerain = {
												character = ROOT
											}
											any_liege = {
												suzerain = {
													character = ROOT
												}
											}
										}
									}
								}
								AND = {
									is_land = no
									any_neighbor_province = {
										owner = {
											OR = {
												character = ROOT
												is_liege_or_above = ROOT
												suzerain = {
													character = ROOT
												}
												any_liege = {
													suzerain = {
														character = ROOT
													}
												}
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
	NOT = {
		has_opinion_modifier = {
			who = FROMFROM
			modifier = china_peace_deal_breaker
		}
	}
}

# Checks if AI China will grant the "Request Physician" Boon in general
# The AI will never ask for Boons that will be refused
china_grants_physician_boon_trigger = {
	NOT = {
		has_character_flag = china_no_physician_boons # Player-only opt-out
	}
	china_accepts_physician_tribute_trigger = no # If China wants physicians, it should not send its own physicians away!
}

# Checks if AI China would grant FROM the "Request Physician" Boon
# The AI will never ask for Boons that will be refused
china_grants_physician_boon_from_trigger = {
	china_grants_physician_boon_trigger = yes
	china_hates_from_trigger = no
}

# Checks if AI China would grant FROMFROM the "Request Physician" Boon
# The AI will never ask for Boons that will be refused
china_grants_physician_boon_fromfrom_trigger = {
	china_grants_physician_boon_trigger = yes
	china_hates_fromfrom_trigger = no
}

# Checks if AI China will grant the "Request Chinese Artifact" Boon in general
# The AI will never ask for Boons that will be refused
china_grants_artifact_boon_trigger = {
	NOT = {
		has_character_flag = china_no_artifact_boons # Player-only opt-out
	}
}

# Checks if AI China would grant FROM the "Request Chinese Artifact" Boon
# The AI will never ask for Boons that will be refused
china_grants_artifact_boon_from_trigger = {
	china_grants_artifact_boon_trigger = yes
	china_hates_from_trigger = no
}

# Checks if AI China would grant FROMFROM the "Request Chinese Artifact" Boon
# The AI will never ask for Boons that will be refused
china_grants_artifact_boon_fromfrom_trigger = {
	china_grants_artifact_boon_trigger = yes
	china_hates_fromfrom_trigger = no
}

# Checks if AI China will grant the "Request Siege Engineer" Boon in general
# The AI will never ask for Boons that will be refused
china_grants_siege_engineer_boon_trigger = {
	# The EoC cannot be a primary war participant
	NOT = {
		any_war = {
			NOT = {
				using_cb = peasant_revolt
				# Add more revolts?
			}
			OR = {
				attacker = {
					character = ROOT
				}
				defender = {
					character = ROOT
				}
			}
		}
	}
	NOT = {
		has_character_flag = china_no_siege_engineer_boons # Player-only opt-out
	}
}

# Checks if AI China would grant FROM the "Request Siege Engineer" Boon
# The AI will never ask for Boons that will be refused
china_grants_siege_engineer_boon_from_trigger = {
	china_grants_siege_engineer_boon_trigger = yes
	china_hates_from_trigger = no
	china_wants_froms_land_trigger = no
}

# Checks if AI China would grant FROMFROM the "Request Siege Engineer" Boon
# The AI will never ask for Boons that will be refused
china_grants_siege_engineer_boon_fromfrom_trigger = {
	china_grants_siege_engineer_boon_trigger = yes
	china_hates_fromfrom_trigger = no
	china_wants_fromfroms_land_trigger = no
}

# Checks if AI China will grant the "Request Strategist" Boon in general
# The AI will never ask for Boons that will be refused
china_grants_strategist_boon_trigger = {
	# The EoC cannot be a primary war participant
	NOT = {
		any_war = {
			NOT = {
				using_cb = peasant_revolt
				# Add more revolts?
			}
			OR = {
				attacker = {
					character = ROOT
				}
				defender = {
					character = ROOT
				}
			}
		}
	}
	NOT = {
		has_character_flag = china_no_strategist_boons # Player-only opt-out
	}
}

# Checks if AI China would grant FROM the "Request Strategist" Boon
# The AI will never ask for Boons that will be refused
china_grants_strategist_boon_from_trigger = {
	china_grants_strategist_boon_trigger = yes
	china_hates_from_trigger = no
	china_wants_froms_land_trigger = no
}

# Checks if AI China would grant FROMFROM the "Request Strategist" Boon
# The AI will never ask for Boons that will be refused
china_grants_strategist_boon_fromfrom_trigger = {
	china_grants_strategist_boon_trigger = yes
	china_hates_fromfrom_trigger = no
	china_wants_fromfroms_land_trigger = no
}

# Checks if AI China will grant the "Request Scholar-Bureaucrat" Boon in general
# The AI will never ask for Boons that will be refused
china_grants_administrator_boon_trigger = {
	NOT = {
		has_character_flag = china_no_administrator_boons # Player-only opt-out
	}
}

# Checks if AI China would grant FROM the "Request Scholar-Bureaucrat" Boon
# The AI will never ask for Boons that will be refused
china_grants_administrator_boon_from_trigger = {
	china_grants_administrator_boon_trigger = yes
	china_hates_from_trigger = no
}

# Checks if AI China would grant FROMFROM the "Request Scholar-Bureaucrat" Boon
# The AI will never ask for Boons that will be refused
china_grants_administrator_boon_fromfrom_trigger = {
	china_grants_administrator_boon_trigger = yes
	china_hates_fromfrom_trigger = no
}

# Checks if AI China will grant the "Request Master Engineer" Boon in general
# The AI will never ask for Boons that will be refused
china_grants_master_engineer_boon_trigger = {
	NOT = {
		has_character_flag = china_no_master_engineer_boons # Player-only opt-out
	}
}

# Checks if AI China would grant FROM the "Request Master Engineer" Boon
# The AI will never ask for Boons that will be refused
china_grants_master_engineer_boon_from_trigger = {
	china_grants_master_engineer_boon_trigger = yes
	china_hates_from_trigger = no
}

# Checks if AI China would grant FROMFROM the "Request Master Engineer" Boon
# The AI will never ask for Boons that will be refused
china_grants_master_engineer_boon_fromfrom_trigger = {
	china_grants_master_engineer_boon_trigger = yes
	china_hates_fromfrom_trigger = no
}

# Checks if AI China will grant the "Request Trade Contract" Boon in general
# The AI will never ask for Boons that will be refused
china_grants_trade_contract_boon_trigger = {
	NOT = {
		has_character_flag = china_no_trade_contract_boons # Player-only opt-out
	}
}

# Checks if AI China would grant FROM the "Request Trade Contract" Boon
# The AI will never ask for Boons that will be refused
china_grants_trade_contract_boon_from_trigger = {
	china_grants_trade_contract_boon_trigger = yes
	china_hates_from_trigger = no
	china_wants_froms_land_trigger = no
}

# Checks if AI China would grant FROMFROM the "Request Trade Contract" Boon
# The AI will never ask for Boons that will be refused
china_grants_trade_contract_boon_fromfrom_trigger = {
	china_grants_trade_contract_boon_trigger = yes
	china_hates_fromfrom_trigger = no
	china_wants_fromfroms_land_trigger = no
}

# Checks if AI China will grant the "Request Imperial Marriage" Boon in general
# The AI will never ask for Boons that will be refused
china_grants_imperial_marriage_boon_trigger = {
	has_game_rule = {
		name = imperial_marriages
		value = enabled
	}
	china_grants_peace_deal_boon_trigger = yes # Peace Deals are part of the Imperial Marriage deal...
	any_realm_character = {
		is_valid_dragon_bride_candidate = yes
	}
	NOT = {
		has_character_flag = china_no_imperial_marriage_boons # Player-only opt-out
	}
}

# Checks if a character is a valid imperial marriage candidate
# Note: This does not check for lovers, so to exclude the EoC's lovers we need to check for that separately in the follow-up events
# This is because, realistically speaking, you shouldn't know whether the EoC has a certain lover unless it is public knowledge, and thus it should seem like there are candidates in that case
is_valid_dragon_bride_candidate = {
	dynasty = PREV
	is_female = yes
	is_adult = yes
	NOT = { age = 35 } # Must be of childbearing age and have several years left before this isn't the case
	NOT = {
		any_child_even_if_dead = {
			always = yes # Cannot already have children
		}
	}
	prisoner = no
	is_inaccessible_trigger = no
	NOR = {
		trait = incapable # The spouse should be capable
		trait = celibate # The EoC should respect this, as everyone else in the game does
		trait = pregnant # Known to be pregnant; checking for is_pregnant would reveal hidden pregnancies!
	}
	is_married = no
	is_betrothed = no
	is_consort = no
	NOT = {
		PREV = {
			current_heir = {
				character = PREVPREV
			}
		}
	}
	# Same restrictions as for concubine candidates
	NOT = { trait = incapable }
	NOT = { trait = inbred }
	NOT = { trait = imbecile }
	NOT = { trait = maimed }
	NOT = { trait = infirm }
	NOT = { trait = wounded }
	NOT = { trait = severely_injured }
	NOT = { trait = one_eyed }
	NOT = { trait = one_handed }
	NOT = { trait = one_legged }
	NOT = { trait = disfigured }
	NOT = { trait = mangled }
	NOT = { is_ascetic_trigger = yes }
	NOT = { trait = celibate }
	is_ill = no
	trait = dragon_bride_unmarried # Is a potential Imperial Marriage candidate
}

# Checks if AI China would grant FROM the "Request Imperial Marriage" Boon
# The AI will never ask for Boons that will be refused
china_grants_imperial_marriage_boon_from_trigger = {
	china_grants_imperial_marriage_boon_trigger = yes
	china_hates_from_trigger = no
	china_hates_fromfrom_trigger = no
	china_wants_froms_land_trigger = no # A marriage results in a Peace Deal/NAP
	OR = {
		china_grants_peace_deal_boon_from_trigger = yes # Peace Deals are part of the Imperial Marriage deal...
		FROM = {
			top_liege = {
				is_chinese_emperor_trigger = yes
			}
		}
	}
}

# Checks if AI China would grant FROMFROM the "Request Imperial Marriage" Boon
# The AI will never ask for Boons that will be refused
china_grants_imperial_marriage_boon_fromfrom_trigger = {
	china_grants_imperial_marriage_boon_trigger = yes
	china_hates_fromfrom_trigger = no
	china_hates_fromfromfrom_trigger = no
	china_wants_fromfroms_land_trigger = no # A marriage results in a Peace Deal/NAP
	OR = {
		china_grants_peace_deal_boon_fromfrom_trigger = yes # Peace Deals are part of the Imperial Marriage deal...
		FROM = {
			top_liege = {
				is_chinese_emperor_trigger = yes
			}
		}
	}
}