# fountain_of_youth_effect
# fountain_of_youth_aging_effect

fountain_of_youth_effect = {
	custom_tooltip = {
		text = will_become_more_youthful
		
		# If it is the first time, set up the relevant variables
		if = {
			limit = {
				NOT = {
					has_character_flag = fountain_of_youth_setup
				}
			}
			
			set_character_flag = fountain_of_youth_setup
			
			set_variable = {
				which = fountain_of_youth_age_reduction
				value = 0
			}
		}
		
		# Make the character more youthful
		change_variable = {
			which = fountain_of_youth_age_reduction
			value = 2
		}
		
		set_variable = {
			which = age_change
			value = 0
		}
		
		remove_trait = fountain_of_youth_trait
		
		while = {
			limit = {
				check_variable = {
					which = age_change
					which < fountain_of_youth_age_reduction
				}
			}
			
			add_age = -1
			
			change_variable = {
				which = age_change
				value = 1
			}
		}
		
		add_trait = fountain_of_youth_trait
		
		while = {
			limit = {
				check_variable = {
					which = age_change
					value > 0
				}
			}
			
			add_age = 1
		}
	}
}

fountain_of_youth_aging_effect = {
	set_variable = {
		which = age_change
		value = 0
	}
	
	remove_trait = fountain_of_youth_trait
	
	while = {
		limit = {
			check_variable = {
				which = age_change
				which < fountain_of_youth_age_reduction
			}
		}
		
		add_age = -1
		
		change_variable = {
			which = age_change
			value = 1
		}
	}
	
	add_trait = fountain_of_youth_trait
	
	while = {
		limit = {
			check_variable = {
				which = age_change
				value > 0
			}
		}
		
		add_age = 1
	}
}