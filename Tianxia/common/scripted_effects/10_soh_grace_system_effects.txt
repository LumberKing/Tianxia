# gc_accept_grace_offer_effect
# gc_refuse_grace_offer_effect
# gc_neutral_grace_offer_effect

# eoc_accept_grace_offer_effect
# eoc_refuse_grace_offer_effect

# grace_change_effect

# clear_grace_decision_flags_effect

# add_random_chinese_artifact_effect
# add_random_chinese_artifact_with_moh_weight_effect
# add_random_chinese_artifact_with_tf_moh_weight_effect

# increase_tributary_tier_or_vassalize_effect
# increase_tributary_tier_or_vassalize_end_of_war_effect
# decrease_tributary_tier_or_release_effect

gc_accept_grace_offer_effect = {
	event_target:grace_decision_taker = {
		set_character_flag = grace_accept_offer_gc
	}
	
	if = {
		limit = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
			}
		}
		prestige = -100
	}
	
	else_if = {
		limit = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
			}
		}
		prestige = -100
	}
}

gc_refuse_grace_offer_effect = {
	event_target:grace_decision_taker = {
		set_character_flag = grace_refuse_offer_gc
	}
	
	if = {
		limit = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
			}
		}
		prestige = -250
	}
	
	else_if = {
		limit = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_neutral_offer
			}
		}
		prestige = -100
	}
}

gc_neutral_grace_offer_effect = {
	event_target:grace_decision_taker = {
		set_character_flag = grace_neutral_offer_gc
	}
	
	if = {
		limit = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
			}
		}
		prestige = -250
	}
	
	else_if = {
		limit = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
			}
		}
		prestige = -100
	}
}

eoc_accept_grace_offer_effect = {
	if = {
		limit = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer_gc
			}
		}
		
		prestige = -500
		
		if = {
			limit = {
				primary_title = {
					has_law = grand_chancellor_law_2
				}
			}
			
			set_council_malcontent = yes
			
			any_realm_lord = {
				opinion = {
					who = ROOT
					modifier = opinion_tyrant
				}
			}
		}
	}
	
	if = {
		limit = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_refuse_offer
			}
		}
		
		hidden_tooltip = {
			mandate_penalty_trivial_effect = yes
		}
	}
}

eoc_refuse_grace_offer_effect = {
	if = {
		limit = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer_gc
			}
		}
		
		prestige = -500
		
		if = {
			limit = {
				primary_title = {
					has_law = grand_chancellor_law_2
				}
			}
			
			set_council_malcontent = yes
			
			any_realm_lord = {
				opinion = {
					who = ROOT
					modifier = opinion_tyrant
				}
			}
		}
	}
	
	if = {
		limit = {
			event_target:grace_decision_taker = {
				has_character_flag = grace_accept_offer
			}
		}
		
		hidden_tooltip = {
			mandate_penalty_trivial_effect = yes
		}
	}
}

grace_change_effect = {
	set_character_flag = grace_character
	
	change_variable = {
		which = grace
		which = grace_gain
	}
}



clear_grace_decision_flags_effect = {
	clr_character_flag = grace_refuse_offer
	clr_character_flag = grace_accept_offer
	clr_character_flag = grace_neutral_offer
	clr_character_flag = grace_refuse_offer_gc
	clr_character_flag = grace_accept_offer_gc
	clr_character_flag = grace_neutral_offer_gc
}

add_random_chinese_artifact_effect = {
	random_list = {
		1 = {
			add_artifact = chinese_painting_of_glitterhoof
		}
		1 = {
			trigger = {
				has_global_flag = book_of_han_exists
			}
			add_artifact = book_of_han
		}
		1 = {
			trigger = {
				has_global_flag = weilue_exists
			}
			add_artifact = weilue
		}
		1 = {
			trigger = {
				has_global_flag = book_of_the_later_han_exists
			}
			add_artifact = book_of_the_later_han
		}
		1 = {
			trigger = {
				has_global_flag = book_of_song_exists
			}
			add_artifact = book_of_song
		}
		1 = {
			trigger = {
				has_global_flag = book_of_qi_exists
			}
			add_artifact = book_of_qi
		}
		1 = {
			trigger = {
				has_global_flag = book_of_wei_exists
			}
			add_artifact = book_of_wei
		}
		1 = {
			trigger = {
				has_global_flag = book_of_liang_exists
			}
			add_artifact = book_of_liang
		}
		1 = {
			trigger = {
				has_global_flag = book_of_chen_exists
			}
			add_artifact = book_of_chen
		}
		1 = {
			trigger = {
				has_global_flag = book_of_northern_qi_exists
			}
			add_artifact = book_of_northern_qi
		}
		1 = {
			trigger = {
				has_global_flag = book_of_zhou_exists
			}
			add_artifact = book_of_zhou
		}
		1 = {
			trigger = {
				has_global_flag = book_of_jin_exists
			}
			add_artifact = book_of_jin
		}
		1 = {
			trigger = {
				has_global_flag = book_of_sui_exists
			}
			add_artifact = book_of_sui
		}
		1 = {
			trigger = {
				has_global_flag = old_book_of_tang_exists
			}
			add_artifact = old_book_of_tang
		}
		1 = {
			trigger = {
				has_global_flag = new_book_of_tang_exists
			}
			add_artifact = new_book_of_tang
		}
		1 = {
			trigger = {
				has_global_flag = records_of_rumors_from_sushui_exists
			}
			add_artifact = records_of_rumors_from_sushui
		}
		1 = {
			trigger = {
				has_global_flag = huang_song_shichao_gangyao_exists
			}
			add_artifact = huang_song_shichao_gangyao
		}
		1 = {
			trigger = {
				has_global_flag = art_of_war_exists
			}
			add_artifact = art_of_war_page
		}
		1 = {
			add_artifact = chinese_artwork
			
			new_artifact = {
				set_name = chinese_artwork_name
			}
		}
		1 = {
			add_artifact = chinese_calligraphy
			
			new_artifact = {
				set_name = chinese_artwork_name
			}
		}
		1 = {
			add_artifact = chinese_sculpture
			
			new_artifact = {
				set_name = chinese_sculpture_name
			}
		}
		1 = {
			add_artifact = chinese_arm_protector
			
			new_artifact = {
				set_name = chinese_arm_protector_name
			}
		}
		1 = {
			add_artifact = chinese_serpent_spear
		}
		1 = {
			add_artifact = chinese_tapestry
			
			new_artifact = {
				set_name = chinese_tapestry_name
			}
		}
		1 = {
			trigger = {
				has_global_flag = history_of_the_southern_dynasties_exists
			}
			add_artifact = history_of_the_southern_dynasties
		}
		1 = {
			trigger = {
				has_global_flag = history_of_the_northern_dynasties_exists
			}
			add_artifact = history_of_the_northern_dynasties
		}
		1 = {
			add_artifact = chinese_ceremonial_robes
		}
		1 = {
			add_artifact = silk_shroud
		}
		1 = {
			add_artifact = chinese_ji
		}
		1 = {
			add_artifact = chinese_crossbow
		}
		1 = {
			add_artifact = chinese_bronze_sculpture
			
			new_artifact = {
				set_name = chinese_bronze_sculpture_name
			}
		}
		1 = {
			add_artifact = chinese_tapestry_grand
			
			new_artifact = {
				set_name = chinese_tapestry_grand_name
			}
		}
		1 = {
			add_artifact = chinese_book_health
			
			new_artifact = {
				set_name = chinese_book_health_name
			}
		}
		1 = {
			add_artifact = chinese_book_law
			
			new_artifact = {
				set_name = chinese_book_law_name
			}
		}
		1 = {
			add_artifact = chinese_book_economy
			
			new_artifact = {
				set_name = chinese_book_economy_name
			}
		}
		1 = {
			trigger = {
				has_global_flag = the_commentary_of_zuo_exists
			}
			add_artifact = the_commentary_of_zuo
		}
		1 = {
			trigger = {
				has_global_flag = book_of_origins_exists
			}
			add_artifact = book_of_origins
		}
		1 = {
			trigger = {
				has_global_flag = rites_of_zhou_exists
			}
			add_artifact = rites_of_zhou
		}
		1 = {
			trigger = {
				has_global_flag = erya_exists
			}
			add_artifact = erya
		}
		1 = {
			trigger = {
				has_global_flag = spring_and_autumn_annals_of_the_sixteen_kingdoms_exists
			}
			add_artifact = spring_and_autumn_annals_of_the_sixteen_kingdoms
		}
		1 = {
			trigger = {
				has_global_flag = classic_of_tea_exists
			}
			add_artifact = classic_of_tea
		}
		1 = {
			trigger = {
				has_global_flag = tongdian_exists
			}
			add_artifact = tongdian
		}
		1 = {
			trigger = {
				has_global_flag = records_of_the_nine_kingdoms_exists
			}
			add_artifact = records_of_the_nine_kingdoms
		}
		1 = {
			trigger = {
				has_global_flag = comprehensive_mirror_in_aid_of_governance_exists
			}
			add_artifact = comprehensive_mirror_in_aid_of_governance
		}
		1 = {
			trigger = {
				has_global_flag = dream_pool_essays_exists
			}
			add_artifact = dream_pool_essays
		}
		1 = {
			trigger = {
				has_global_flag = treatise_of_tea_exists
			}
			add_artifact = treatise_of_tea
		}
		1 = {
			trigger = {
				has_global_flag = daozang_exists
			}
			add_artifact = daozang
		}
		1 = {
			add_artifact = chinese_dragon_amulet
		}
		1 = {
			add_artifact = water_clock
		}
		1 = {
			add_artifact = jian_sword
		}
		1 = {
			trigger = {
				has_global_flag = wuzi_exists
			}
			add_artifact = wuzi
		}
		1 = {
			trigger = {
				has_global_flag = thirty_six_stratagems_exists
			}
			add_artifact = thirty_six_stratagems
		}
		1 = {
			trigger = {
				has_global_flag = methods_of_the_sima_exists
			}
			add_artifact = methods_of_the_sima
		}
		1 = {
			trigger = {
				has_global_flag = book_of_lord_shang_exists
			}
			add_artifact = book_of_lord_shang
		}
		1 = {
			trigger = {
				has_global_flag = wei_liaozi_exists
			}
			add_artifact = wei_liaozi
		}
		1 = {
			trigger = {
				has_global_flag = sun_bins_art_of_war_exists
			}
			add_artifact = sun_bins_art_of_war
		}
		1 = {
			trigger = {
				has_global_flag = mencius_exists
			}
			add_artifact = mencius
		}
		1 = {
			trigger = {
				has_global_flag = verses_of_chu_exists
			}
			add_artifact = verses_of_chu
		}
		1 = {
			trigger = {
				has_global_flag = master_lus_spring_and_autumn_annals_exists
			}
			add_artifact = master_lus_spring_and_autumn_annals
		}
		1 = {
			trigger = {
				has_global_flag = xunzi_exists
			}
			add_artifact = xunzi
		}
		1 = {
			trigger = {
				has_global_flag = han_feizi_exists
			}
			add_artifact = han_feizi
		}
		1 = {
			trigger = {
				has_global_flag = analects_exists
			}
			add_artifact = analects
		}
		1 = {
			trigger = {
				has_global_flag = complete_essentials_for_military_classics_exists
			}
			add_artifact = complete_essentials_for_military_classics
		}
		1 = {
			trigger = {
				has_global_flag = womens_analects_exists
			}
			add_artifact = womens_analects
		}
		1 = {
			trigger = {
				has_global_flag = eighteen_songs_of_a_nomad_flute_exists
			}
			add_artifact = eighteen_songs_of_a_nomad_flute
		}
		1 = {
			add_artifact = jade_dragon
		}
		1 = {
			trigger = {
				has_global_flag = art_of_war_exists
			}
			add_artifact = art_of_war
		}
		1 = {
			trigger = {
				has_global_flag = classic_of_poetry_exists
			}
			add_artifact = classic_of_poetry
		}
		1 = {
			trigger = {
				has_global_flag = etiquette_and_ceremonial_exists
			}
			add_artifact = etiquette_and_ceremonial
		}
		1 = {
			trigger = {
				has_global_flag = i_ching_exists
			}
			add_artifact = i_ching
		}
		1 = {
			trigger = {
				has_global_flag = discourse_of_the_states_exists
			}
			add_artifact = discourse_of_the_states
		}
		1 = {
			trigger = {
				has_global_flag = spring_and_autumn_annals_exists
			}
			add_artifact = spring_and_autumn_annals
		}
		1 = {
			trigger = {
				has_global_flag = mozi_exists
			}
			add_artifact = mozi
		}
		1 = {
			trigger = {
				has_global_flag = classic_of_filial_piety_exists
			}
			add_artifact = classic_of_filial_piety
		}
		1 = {
			trigger = {
				has_global_flag = tao_te_ching_exists
			}
			add_artifact = tao_te_ching
		}
		1 = {
			trigger = {
				has_global_flag = book_of_rites_exists
			}
			add_artifact = book_of_rites
		}
		1 = {
			trigger = {
				has_global_flag = book_of_documents_old_exists
			}
			add_artifact = book_of_documents_old
		}
		1 = {
			trigger = {
				has_global_flag = book_of_documents_new_exists
			}
			add_artifact = book_of_documents_new
		}
		1 = {
			trigger = {
				has_global_flag = zhuangzi_exists
			}
			add_artifact = zhuangzi
		}
		1 = {
			trigger = {
				has_global_flag = records_of_the_grand_historian_exists
			}
			add_artifact = records_of_the_grand_historian
		}
		1 = {
			trigger = {
				has_global_flag = classic_of_mountains_and_seas_exists
			}
			add_artifact = classic_of_mountains_and_seas
		}
		1 = {
			trigger = {
				has_global_flag = records_of_the_three_kingdoms_exists
			}
			add_artifact = records_of_the_three_kingdoms
		}
		1 = {
			trigger = {
				has_global_flag = old_history_of_the_five_dynasties_exists
			}
			add_artifact = old_history_of_the_five_dynasties
		}
		1 = {
			trigger = {
				has_global_flag = new_history_of_the_five_dynasties_exists
			}
			add_artifact = new_history_of_the_five_dynasties
		}
		1 = {
			trigger = {
				has_global_flag = lessons_for_women_exists
			}
			add_artifact = lessons_for_women
		}
	}
	
	new_artifact = {
		set_original_owner = event_target:chinese_artifact_origin
	}
}

add_random_chinese_artifact_with_moh_weight_effect = {
	random_list = {
		100 = {
			trigger = {
				OR = {
					event_target:chinese_artifact_origin = {
						NOR = {
							has_character_modifier = mandate_of_heaven_5
							has_character_modifier = mandate_of_heaven_4
						}
					}
					
					has_all_grace_artifacts_T5_trigger = yes
					has_all_grace_artifacts_T4_trigger = yes
					has_all_grace_artifacts_T3_trigger = yes
					has_all_grace_artifacts_T2_trigger = yes
				}
			}
			
			mult_modifier = {
				factor = 2
				event_target:chinese_artifact_origin = {
					has_character_modifier = mandate_of_heaven_2
				}
			}
			
			mult_modifier = {
				factor = 5
				event_target:chinese_artifact_origin = {
					has_character_modifier = mandate_of_heaven_1
				}
			}
			# Tier 1
			random_list = {
				1 = {
					add_artifact = chinese_painting_of_glitterhoof
				}
				1 = {
					trigger = {
						has_global_flag = book_of_han_exists
					}
					add_artifact = book_of_han
				}
				1 = {
					trigger = {
						has_global_flag = weilue_exists
					}
					add_artifact = weilue
				}
				1 = {
					trigger = {
						has_global_flag = book_of_the_later_han_exists
					}
					add_artifact = book_of_the_later_han
				}
				1 = {
					trigger = {
						has_global_flag = book_of_song_exists
					}
					add_artifact = book_of_song
				}
				1 = {
					trigger = {
						has_global_flag = book_of_qi_exists
					}
					add_artifact = book_of_qi
				}
				1 = {
					trigger = {
						has_global_flag = book_of_wei_exists
					}
					add_artifact = book_of_wei
				}
				1 = {
					trigger = {
						has_global_flag = book_of_liang_exists
					}
					add_artifact = book_of_liang
				}
				1 = {
					trigger = {
						has_global_flag = book_of_chen_exists
					}
					add_artifact = book_of_chen
				}
				1 = {
					trigger = {
						has_global_flag = book_of_northern_qi_exists
					}
					add_artifact = book_of_northern_qi
				}
				1 = {
					trigger = {
						has_global_flag = book_of_zhou_exists
					}
					add_artifact = book_of_zhou
				}
				1 = {
					trigger = {
						has_global_flag = book_of_jin_exists
					}
					add_artifact = book_of_jin
				}
				1 = {
					trigger = {
						has_global_flag = book_of_sui_exists
					}
					add_artifact = book_of_sui
				}
				1 = {
					trigger = {
						has_global_flag = old_book_of_tang_exists
					}
					add_artifact = old_book_of_tang
				}
				1 = {
					trigger = {
						has_global_flag = new_book_of_tang_exists
					}
					add_artifact = new_book_of_tang
				}
				1 = {
					trigger = {
						has_global_flag = records_of_rumors_from_sushui_exists
					}
					add_artifact = records_of_rumors_from_sushui
				}
				1 = {
					trigger = {
						has_global_flag = huang_song_shichao_gangyao_exists
					}
					add_artifact = huang_song_shichao_gangyao
				}
				1 = {
					trigger = {
						has_global_flag = art_of_war_exists
					}
					add_artifact = art_of_war_page
				}
			}
		}
		
		100 = {
			trigger = {
				OR = {
					event_target:chinese_artifact_origin = {
						NOT = {
							has_character_modifier = mandate_of_heaven_5
						}
					}
					
					has_all_grace_artifacts_T5_trigger = yes
					has_all_grace_artifacts_T4_trigger = yes
					has_all_grace_artifacts_T3_trigger = yes
				}
			}
			
			mult_modifier = {
				factor = 2
				event_target:chinese_artifact_origin = {
					has_character_modifier = mandate_of_heaven_3
				}
			}
			
			mult_modifier = {
				factor = 5
				event_target:chinese_artifact_origin = {
					has_character_modifier = mandate_of_heaven_2
				}
			}
			
			# Tier 2
			random_list = {
				1 = {
					add_artifact = chinese_artwork
					
					new_artifact = {
						set_name = chinese_artwork_name
					}
				}
				1 = {
					add_artifact = chinese_calligraphy
					
					new_artifact = {
						set_name = chinese_artwork_name
					}
				}
				1 = {
					add_artifact = chinese_sculpture
					
					new_artifact = {
						set_name = chinese_sculpture_name
					}
				}
				1 = {
					add_artifact = chinese_arm_protector
					
					new_artifact = {
						set_name = chinese_arm_protector_name
					}
				}
				1 = {
					add_artifact = chinese_serpent_spear
				}
				1 = {
					add_artifact = chinese_tapestry
					
					new_artifact = {
						set_name = chinese_tapestry_name
					}
				}
				1 = {
					trigger = {
						has_global_flag = history_of_the_southern_dynasties_exists
					}
					add_artifact = history_of_the_southern_dynasties
				}
				1 = {
					trigger = {
						has_global_flag = history_of_the_northern_dynasties_exists
					}
					add_artifact = history_of_the_northern_dynasties
				}
			}
		}
		
		100 = {
			mult_modifier = {
				factor = 5
				event_target:chinese_artifact_origin = {
					has_character_modifier = mandate_of_heaven_3
				}
			}
			
			# Tier 3
			random_list = {
				1 = {
					add_artifact = chinese_ceremonial_robes
				}
				1 = {
					add_artifact = silk_shroud
				}
				1 = {
					add_artifact = chinese_ji
				}
				1 = {
					add_artifact = chinese_crossbow
				}
				1 = {
					add_artifact = chinese_bronze_sculpture
					
					new_artifact = {
						set_name = chinese_bronze_sculpture_name
					}
				}
				1 = {
					add_artifact = chinese_tapestry_grand
					
					new_artifact = {
						set_name = chinese_tapestry_grand_name
					}
				}
				1 = {
					add_artifact = chinese_book_health
					
					new_artifact = {
						set_name = chinese_book_health_name
					}
				}
				1 = {
					add_artifact = chinese_book_law
					
					new_artifact = {
						set_name = chinese_book_law_name
					}
				}
				1 = {
					add_artifact = chinese_book_economy
					
					new_artifact = {
						set_name = chinese_book_economy_name
					}
				}
				1 = {
					trigger = {
						has_global_flag = the_commentary_of_zuo_exists
					}
					add_artifact = the_commentary_of_zuo
				}
				1 = {
					trigger = {
						has_global_flag = book_of_origins_exists
					}
					add_artifact = book_of_origins
				}
				1 = {
					trigger = {
						has_global_flag = rites_of_zhou_exists
					}
					add_artifact = rites_of_zhou
				}
				1 = {
					trigger = {
						has_global_flag = erya_exists
					}
					add_artifact = erya
				}
				1 = {
					trigger = {
						has_global_flag = spring_and_autumn_annals_of_the_sixteen_kingdoms_exists
					}
					add_artifact = spring_and_autumn_annals_of_the_sixteen_kingdoms
				}
				1 = {
					trigger = {
						has_global_flag = classic_of_tea_exists
					}
					add_artifact = classic_of_tea
				}
				1 = {
					trigger = {
						has_global_flag = tongdian_exists
					}
					add_artifact = tongdian
				}
				1 = {
					trigger = {
						has_global_flag = records_of_the_nine_kingdoms_exists
					}
					add_artifact = records_of_the_nine_kingdoms
				}
				1 = {
					trigger = {
						has_global_flag = comprehensive_mirror_in_aid_of_governance_exists
					}
					add_artifact = comprehensive_mirror_in_aid_of_governance
				}
				1 = {
					trigger = {
						has_global_flag = dream_pool_essays_exists
					}
					add_artifact = dream_pool_essays
				}
				1 = {
					trigger = {
						has_global_flag = treatise_of_tea_exists
					}
					add_artifact = treatise_of_tea
				}
				1 = {
					trigger = {
						has_global_flag = daozang_exists
					}
					add_artifact = daozang
				}
			}
		}
		
		100 = {
			trigger = {
				event_target:chinese_artifact_origin = {
					NOT = {
						has_character_modifier = mandate_of_heaven_1
					}
				}
			}
			
			mult_modifier = {
				factor = 2
				event_target:chinese_artifact_origin = {
					has_character_modifier = mandate_of_heaven_5
				}
			}
			
			mult_modifier = {
				factor = 5
				event_target:chinese_artifact_origin = {
					has_character_modifier = mandate_of_heaven_4
				}
			}
			# Tier 4
			random_list = {
				1 = {
					add_artifact = chinese_dragon_amulet
				}
				1 = {
					add_artifact = water_clock
				}
				1 = {
					add_artifact = jian_sword
				}
				1 = {
					trigger = {
						has_global_flag = wuzi_exists
					}
					add_artifact = wuzi
				}
				1 = {
					trigger = {
						has_global_flag = thirty_six_stratagems_exists
					}
					add_artifact = thirty_six_stratagems
				}
				1 = {
					trigger = {
						has_global_flag = methods_of_the_sima_exists
					}
					add_artifact = methods_of_the_sima
				}
				1 = {
					trigger = {
						has_global_flag = book_of_lord_shang_exists
					}
					add_artifact = book_of_lord_shang
				}
				1 = {
					trigger = {
						has_global_flag = wei_liaozi_exists
					}
					add_artifact = wei_liaozi
				}
				1 = {
					trigger = {
						has_global_flag = sun_bins_art_of_war_exists
					}
					add_artifact = sun_bins_art_of_war
				}
				1 = {
					trigger = {
						has_global_flag = mencius_exists
					}
					add_artifact = mencius
				}
				1 = {
					trigger = {
						has_global_flag = verses_of_chu_exists
					}
					add_artifact = verses_of_chu
				}
				1 = {
					trigger = {
						has_global_flag = master_lus_spring_and_autumn_annals_exists
					}
					add_artifact = master_lus_spring_and_autumn_annals
				}
				1 = {
					trigger = {
						has_global_flag = xunzi_exists
					}
					add_artifact = xunzi
				}
				1 = {
					trigger = {
						has_global_flag = han_feizi_exists
					}
					add_artifact = han_feizi
				}
				1 = {
					trigger = {
						has_global_flag = analects_exists
					}
					add_artifact = analects
				}
				1 = {
					trigger = {
						has_global_flag = complete_essentials_for_military_classics_exists
					}
					add_artifact = complete_essentials_for_military_classics
				}
				1 = {
					trigger = {
						has_global_flag = womens_analects_exists
					}
					add_artifact = womens_analects
				}
				1 = {
					trigger = {
						has_global_flag = eighteen_songs_of_a_nomad_flute_exists
					}
					add_artifact = eighteen_songs_of_a_nomad_flute
				}
			}
		}
		
		100 = {
			trigger = {
				event_target:chinese_artifact_origin = {
					NOR = {
						has_character_modifier = mandate_of_heaven_2
						has_character_modifier = mandate_of_heaven_1
					}
				}
			}
			
			mult_modifier = {
				factor = 2
				event_target:chinese_artifact_origin = {
					has_character_modifier = mandate_of_heaven_4
				}
			}
			
			mult_modifier = {
				factor = 5
				event_target:chinese_artifact_origin = {
					has_character_modifier = mandate_of_heaven_5
				}
			}
			# Tier 5
			random_list = {
				1 = {
					add_artifact = jade_dragon
				}
				1 = {
					trigger = {
						has_global_flag = art_of_war_exists
					}
					add_artifact = art_of_war
				}
				1 = {
					trigger = {
						has_global_flag = classic_of_poetry_exists
					}
					add_artifact = classic_of_poetry
				}
				1 = {
					trigger = {
						has_global_flag = etiquette_and_ceremonial_exists
					}
					add_artifact = etiquette_and_ceremonial
				}
				1 = {
					trigger = {
						has_global_flag = i_ching_exists
					}
					add_artifact = i_ching
				}
				1 = {
					trigger = {
						has_global_flag = discourse_of_the_states_exists
					}
					add_artifact = discourse_of_the_states
				}
				1 = {
					trigger = {
						has_global_flag = spring_and_autumn_annals_exists
					}
					add_artifact = spring_and_autumn_annals
				}
				1 = {
					trigger = {
						has_global_flag = mozi_exists
					}
					add_artifact = mozi
				}
				1 = {
					trigger = {
						has_global_flag = classic_of_filial_piety_exists
					}
					add_artifact = classic_of_filial_piety
				}
				1 = {
					trigger = {
						has_global_flag = tao_te_ching_exists
					}
					add_artifact = tao_te_ching
				}
				1 = {
					trigger = {
						has_global_flag = book_of_rites_exists
					}
					add_artifact = book_of_rites
				}
				1 = {
					trigger = {
						has_global_flag = book_of_documents_old_exists
					}
					add_artifact = book_of_documents_old
				}
				1 = {
					trigger = {
						has_global_flag = book_of_documents_new_exists
					}
					add_artifact = book_of_documents_new
				}
				1 = {
					trigger = {
						has_global_flag = zhuangzi_exists
					}
					add_artifact = zhuangzi
				}
				1 = {
					trigger = {
						has_global_flag = records_of_the_grand_historian_exists
					}
					add_artifact = records_of_the_grand_historian
				}
				1 = {
					trigger = {
						has_global_flag = classic_of_mountains_and_seas_exists
					}
					add_artifact = classic_of_mountains_and_seas
				}
				1 = {
					trigger = {
						has_global_flag = records_of_the_three_kingdoms_exists
					}
					add_artifact = records_of_the_three_kingdoms
				}
				1 = {
					trigger = {
						has_global_flag = old_history_of_the_five_dynasties_exists
					}
					add_artifact = old_history_of_the_five_dynasties
				}
				1 = {
					trigger = {
						has_global_flag = new_history_of_the_five_dynasties_exists
					}
					add_artifact = new_history_of_the_five_dynasties
				}
				1 = {
					trigger = {
						has_global_flag = lessons_for_women_exists
					}
					add_artifact = lessons_for_women
				}
			}
		}
	}
	
	new_artifact = {
		set_original_owner = event_target:chinese_artifact_origin
	}
}

add_random_chinese_artifact_with_tf_moh_weight_effect = {
	random_list = {
		100 = {
			trigger = {
				2753 = { # Hangzhou
					NOR = {
						has_province_flag = treasure_fleet_mandate_of_heaven_5
						has_province_flag = treasure_fleet_mandate_of_heaven_4
					}
				}
			}
			
			mult_modifier = {
				factor = 2
				2753 = { # Hangzhou
					has_province_flag = treasure_fleet_mandate_of_heaven_2
				}
			}
			
			mult_modifier = {
				factor = 5
				2753 = { # Hangzhou
					has_province_flag = treasure_fleet_mandate_of_heaven_1
				}
			}
			# Tier 1
			random_list = {
				1 = {
					add_artifact = chinese_painting_of_glitterhoof
				}
				1 = {
					trigger = {
						has_global_flag = book_of_han_exists
					}
					add_artifact = book_of_han
				}
				1 = {
					trigger = {
						has_global_flag = weilue_exists
					}
					add_artifact = weilue
				}
				1 = {
					trigger = {
						has_global_flag = book_of_the_later_han_exists
					}
					add_artifact = book_of_the_later_han
				}
				1 = {
					trigger = {
						has_global_flag = book_of_song_exists
					}
					add_artifact = book_of_song
				}
				1 = {
					trigger = {
						has_global_flag = book_of_qi_exists
					}
					add_artifact = book_of_qi
				}
				1 = {
					trigger = {
						has_global_flag = book_of_wei_exists
					}
					add_artifact = book_of_wei
				}
				1 = {
					trigger = {
						has_global_flag = book_of_liang_exists
					}
					add_artifact = book_of_liang
				}
				1 = {
					trigger = {
						has_global_flag = book_of_chen_exists
					}
					add_artifact = book_of_chen
				}
				1 = {
					trigger = {
						has_global_flag = book_of_northern_qi_exists
					}
					add_artifact = book_of_northern_qi
				}
				1 = {
					trigger = {
						has_global_flag = book_of_zhou_exists
					}
					add_artifact = book_of_zhou
				}
				1 = {
					trigger = {
						has_global_flag = book_of_jin_exists
					}
					add_artifact = book_of_jin
				}
				1 = {
					trigger = {
						has_global_flag = book_of_sui_exists
					}
					add_artifact = book_of_sui
				}
				1 = {
					trigger = {
						has_global_flag = old_book_of_tang_exists
					}
					add_artifact = old_book_of_tang
				}
				1 = {
					trigger = {
						has_global_flag = new_book_of_tang_exists
					}
					add_artifact = new_book_of_tang
				}
				1 = {
					trigger = {
						has_global_flag = records_of_rumors_from_sushui_exists
					}
					add_artifact = records_of_rumors_from_sushui
				}
				1 = {
					trigger = {
						has_global_flag = huang_song_shichao_gangyao_exists
					}
					add_artifact = huang_song_shichao_gangyao
				}
				1 = {
					trigger = {
						has_global_flag = art_of_war_exists
					}
					add_artifact = art_of_war_page
				}
			}
		}
		
		100 = {
			trigger = {
				2753 = { # Hangzhou
					NOT = {
						has_province_flag = treasure_fleet_mandate_of_heaven_5
					}
				}
			}
			
			mult_modifier = {
				factor = 2
				2753 = { # Hangzhou
					has_province_flag = treasure_fleet_mandate_of_heaven_3
				}
			}
			
			mult_modifier = {
				factor = 5
				2753 = { # Hangzhou
					has_province_flag = treasure_fleet_mandate_of_heaven_2
				}
			}
			
			# Tier 2
			random_list = {
				1 = {
					add_artifact = chinese_artwork
					
					new_artifact = {
						set_name = chinese_artwork_name_tf
					}
				}
				1 = {
					add_artifact = chinese_calligraphy
					
					new_artifact = {
						set_name = chinese_artwork_name_tf
					}
				}
				1 = {
					add_artifact = chinese_sculpture
					
					new_artifact = {
						set_name = chinese_sculpture_name_tf
					}
				}
				1 = {
					add_artifact = chinese_arm_protector
					
					new_artifact = {
						set_name = chinese_arm_protector_name_tf
					}
				}
				1 = {
					add_artifact = chinese_serpent_spear
				}
				1 = {
					add_artifact = chinese_tapestry
					
					new_artifact = {
						set_name = chinese_tapestry_name_tf
					}
				}
				1 = {
					trigger = {
						has_global_flag = history_of_the_southern_dynasties_exists
					}
					add_artifact = history_of_the_southern_dynasties
				}
				1 = {
					trigger = {
						has_global_flag = history_of_the_northern_dynasties_exists
					}
					add_artifact = history_of_the_northern_dynasties
				}
			}
		}
		
		100 = {
			mult_modifier = {
				factor = 5
				2753 = { # Hangzhou
					has_province_flag = treasure_fleet_mandate_of_heaven_3
				}
			}
			
			# Tier 3
			random_list = {
				1 = {
					add_artifact = chinese_ceremonial_robes
				}
				1 = {
					add_artifact = silk_shroud
				}
				1 = {
					add_artifact = chinese_ji
				}
				1 = {
					add_artifact = chinese_crossbow
				}
				1 = {
					add_artifact = chinese_bronze_sculpture
					
					new_artifact = {
						set_name = chinese_bronze_sculpture_name_tf
					}
				}
				1 = {
					add_artifact = chinese_tapestry_grand
					
					new_artifact = {
						set_name = chinese_tapestry_grand_name_tf
					}
				}
				1 = {
					add_artifact = chinese_book_health
					
					new_artifact = {
						set_name = chinese_book_health_name_tf
					}
				}
				1 = {
					add_artifact = chinese_book_law
					
					new_artifact = {
						set_name = chinese_book_law_name_tf
					}
				}
				1 = {
					add_artifact = chinese_book_economy
					
					new_artifact = {
						set_name = chinese_book_economy_name_tf
					}
				}
				1 = {
					trigger = {
						has_global_flag = the_commentary_of_zuo_exists
					}
					add_artifact = the_commentary_of_zuo
				}
				1 = {
					trigger = {
						has_global_flag = book_of_origins_exists
					}
					add_artifact = book_of_origins
				}
				1 = {
					trigger = {
						has_global_flag = rites_of_zhou_exists
					}
					add_artifact = rites_of_zhou
				}
				1 = {
					trigger = {
						has_global_flag = erya_exists
					}
					add_artifact = erya
				}
				1 = {
					trigger = {
						has_global_flag = spring_and_autumn_annals_of_the_sixteen_kingdoms_exists
					}
					add_artifact = spring_and_autumn_annals_of_the_sixteen_kingdoms
				}
				1 = {
					trigger = {
						has_global_flag = classic_of_tea_exists
					}
					add_artifact = classic_of_tea
				}
				1 = {
					trigger = {
						has_global_flag = tongdian_exists
					}
					add_artifact = tongdian
				}
				1 = {
					trigger = {
						has_global_flag = records_of_the_nine_kingdoms_exists
					}
					add_artifact = records_of_the_nine_kingdoms
				}
				1 = {
					trigger = {
						has_global_flag = comprehensive_mirror_in_aid_of_governance_exists
					}
					add_artifact = comprehensive_mirror_in_aid_of_governance
				}
				1 = {
					trigger = {
						has_global_flag = dream_pool_essays_exists
					}
					add_artifact = dream_pool_essays
				}
				1 = {
					trigger = {
						has_global_flag = treatise_of_tea_exists
					}
					add_artifact = treatise_of_tea
				}
				1 = {
					trigger = {
						has_global_flag = daozang_exists
					}
					add_artifact = daozang
				}
			}
		}
		
		100 = {
			trigger = {
				2753 = { # Hangzhou
					NOT = {
						has_province_flag = treasure_fleet_mandate_of_heaven_1
					}
				}
			}
			
			mult_modifier = {
				factor = 2
				2753 = { # Hangzhou
					has_province_flag = treasure_fleet_mandate_of_heaven_5
				}
			}
			
			mult_modifier = {
				factor = 5
				2753 = { # Hangzhou
					has_province_flag = treasure_fleet_mandate_of_heaven_4
				}
			}
			# Tier 4
			random_list = {
				1 = {
					add_artifact = chinese_dragon_amulet
				}
				1 = {
					add_artifact = water_clock
				}
				1 = {
					add_artifact = jian_sword
				}
				1 = {
					trigger = {
						has_global_flag = wuzi_exists
					}
					add_artifact = wuzi
				}
				1 = {
					trigger = {
						has_global_flag = thirty_six_stratagems_exists
					}
					add_artifact = thirty_six_stratagems
				}
				1 = {
					trigger = {
						has_global_flag = methods_of_the_sima_exists
					}
					add_artifact = methods_of_the_sima
				}
				1 = {
					trigger = {
						has_global_flag = book_of_lord_shang_exists
					}
					add_artifact = book_of_lord_shang
				}
				1 = {
					trigger = {
						has_global_flag = wei_liaozi_exists
					}
					add_artifact = wei_liaozi
				}
				1 = {
					trigger = {
						has_global_flag = sun_bins_art_of_war_exists
					}
					add_artifact = sun_bins_art_of_war
				}
				1 = {
					trigger = {
						has_global_flag = mencius_exists
					}
					add_artifact = mencius
				}
				1 = {
					trigger = {
						has_global_flag = verses_of_chu_exists
					}
					add_artifact = verses_of_chu
				}
				1 = {
					trigger = {
						has_global_flag = master_lus_spring_and_autumn_annals_exists
					}
					add_artifact = master_lus_spring_and_autumn_annals
				}
				1 = {
					trigger = {
						has_global_flag = xunzi_exists
					}
					add_artifact = xunzi
				}
				1 = {
					trigger = {
						has_global_flag = han_feizi_exists
					}
					add_artifact = han_feizi
				}
				1 = {
					trigger = {
						has_global_flag = analects_exists
					}
					add_artifact = analects
				}
				1 = {
					trigger = {
						has_global_flag = complete_essentials_for_military_classics_exists
					}
					add_artifact = complete_essentials_for_military_classics
				}
				1 = {
					trigger = {
						has_global_flag = womens_analects_exists
					}
					add_artifact = womens_analects
				}
				1 = {
					trigger = {
						has_global_flag = eighteen_songs_of_a_nomad_flute_exists
					}
					add_artifact = eighteen_songs_of_a_nomad_flute
				}
			}
		}
		
		100 = {
			trigger = {
				2753 = { # Hangzhou
					NOR = {
						has_province_flag = treasure_fleet_mandate_of_heaven_2
						has_province_flag = treasure_fleet_mandate_of_heaven_1
					}
				}
			}
			
			mult_modifier = {
				factor = 2
				2753 = { # Hangzhou
					has_province_flag = treasure_fleet_mandate_of_heaven_4
				}
			}
			
			mult_modifier = {
				factor = 5
				2753 = { # Hangzhou
					has_province_flag = treasure_fleet_mandate_of_heaven_5
				}
			}
			# Tier 5
			random_list = {
				1 = {
					add_artifact = jade_dragon
				}
				1 = {
					trigger = {
						has_global_flag = art_of_war_exists
					}
					add_artifact = art_of_war
				}
				1 = {
					trigger = {
						has_global_flag = classic_of_poetry_exists
					}
					add_artifact = classic_of_poetry
				}
				1 = {
					trigger = {
						has_global_flag = etiquette_and_ceremonial_exists
					}
					add_artifact = etiquette_and_ceremonial
				}
				1 = {
					trigger = {
						has_global_flag = i_ching_exists
					}
					add_artifact = i_ching
				}
				1 = {
					trigger = {
						has_global_flag = discourse_of_the_states_exists
					}
					add_artifact = discourse_of_the_states
				}
				1 = {
					trigger = {
						has_global_flag = spring_and_autumn_annals_exists
					}
					add_artifact = spring_and_autumn_annals
				}
				1 = {
					trigger = {
						has_global_flag = mozi_exists
					}
					add_artifact = mozi
				}
				1 = {
					trigger = {
						has_global_flag = classic_of_filial_piety_exists
					}
					add_artifact = classic_of_filial_piety
				}
				1 = {
					trigger = {
						has_global_flag = tao_te_ching_exists
					}
					add_artifact = tao_te_ching
				}
				1 = {
					trigger = {
						has_global_flag = book_of_rites_exists
					}
					add_artifact = book_of_rites
				}
				1 = {
					trigger = {
						has_global_flag = book_of_documents_old_exists
					}
					add_artifact = book_of_documents_old
				}
				1 = {
					trigger = {
						has_global_flag = book_of_documents_new_exists
					}
					add_artifact = book_of_documents_new
				}
				1 = {
					trigger = {
						has_global_flag = zhuangzi_exists
					}
					add_artifact = zhuangzi
				}
				1 = {
					trigger = {
						has_global_flag = records_of_the_grand_historian_exists
					}
					add_artifact = records_of_the_grand_historian
				}
				1 = {
					trigger = {
						has_global_flag = classic_of_mountains_and_seas_exists
					}
					add_artifact = classic_of_mountains_and_seas
				}
				1 = {
					trigger = {
						has_global_flag = records_of_the_three_kingdoms_exists
					}
					add_artifact = records_of_the_three_kingdoms
				}
				1 = {
					trigger = {
						has_global_flag = old_history_of_the_five_dynasties_exists
					}
					add_artifact = old_history_of_the_five_dynasties
				}
				1 = {
					trigger = {
						has_global_flag = new_history_of_the_five_dynasties_exists
					}
					add_artifact = new_history_of_the_five_dynasties
				}
				1 = {
					trigger = {
						has_global_flag = lessons_for_women_exists
					}
					add_artifact = lessons_for_women
				}
			}
		}
	}
	
	new_artifact = {
		set_original_owner = event_target:chinese_artifact_origin
	}
}

increase_tributary_tier_or_vassalize_effect = {
	save_event_target_as = target_tributary
	
	if = {
		limit = {
			is_tributary = {
				type = chinese_client_state
			}
		}
		
		any_vassal = {
			limit = {
				tier = king
			}
			
			set_defacto_liege = e_china
		}
		
		any_demesne_title = {
			limit = {
				tier = emperor
			}
			
			unsafe_destroy_landed_title = THIS
		}
		
		hidden_tooltip = {
			e_china = {
				holder_scope = {
					hidden_tooltip = {
						remove_tributary = event_target:target_tributary
					}
					remove_tributary = event_target:target_tributary
				}
			}
		}
		
		set_defacto_liege = e_china
	}
	
	else_if = {
		limit = {
			is_tributary = {
				type = chinese_protectorate
			}
		}
		
		e_china = {
			holder_scope = {
				hidden_tooltip = {
					remove_tributary = event_target:target_tributary
				}
				
				make_tributary = {
					who = event_target:target_tributary
					tributary_type = chinese_client_state
				}
			}
		}
	}
	
	else_if = {
		limit = {
			is_tributary = {
				type = chinese_imperial_tributary
			}
		}
		
		e_china = {
			holder_scope = {
				hidden_tooltip = {
					remove_tributary = event_target:target_tributary
				}
				
				make_tributary = {
					who = event_target:target_tributary
					tributary_type = chinese_protectorate
				}
			}
		}
	}
	
	else = {
		e_china = {
			holder_scope = {
				hidden_tooltip = {
					remove_tributary = event_target:target_tributary
				}
				
				make_tributary = {
					who = event_target:target_tributary
					tributary_type = chinese_imperial_tributary
				}
			}
		}
	}
	
	e_china = {
		holder_scope = {
			opinion = {
				who = event_target:target_tributary
				modifier = opinion_grace_increased_tributary_tier
			}
		}
	}
	
	clear_event_target = target_tributary
}

increase_tributary_tier_or_vassalize_end_of_war_effect = {
	save_event_target_as = target_tributary
	
	if = {
		limit = {
			e_china = {
				holder_scope = {
					reverse_has_opinion_modifier = {
						who = event_target:target_tributary
						modifier = i_was_client_state
					}
				}
			}
		}
		
		any_vassal = {
			limit = {
				tier = king
			}
			
			set_defacto_liege = e_china
		}
		
		any_demesne_title = {
			limit = {
				tier = emperor
			}
			
			unsafe_destroy_landed_title = THIS
		}
		
		hidden_tooltip = {
			e_china = {
				holder_scope = {
					hidden_tooltip = {
						remove_tributary = event_target:target_tributary
						reverse_remove_opinion = {
							who = event_target:target_tributary
							modifier = i_was_client_state
						}
					}
					
					remove_tributary = event_target:target_tributary
				}
			}
		}
		
		set_defacto_liege = e_china
	}
	
	else_if = {
		limit = {
			e_china = {
				holder_scope = {
					reverse_has_opinion_modifier = {
						who = event_target:target_tributary
						modifier = i_was_protectorate
					}
				}
			}
		}
		
		e_china = {
			holder_scope = {
				hidden_tooltip = {
					remove_tributary = event_target:target_tributary
					reverse_remove_opinion = {
						who = event_target:target_tributary
						modifier = i_was_protectorate
					}
				}
				
				make_tributary = {
					who = event_target:target_tributary
					tributary_type = chinese_client_state
				}
			}
		}
	}
	
	else_if = {
		limit = {
			e_china = {
				holder_scope = {
					reverse_has_opinion_modifier = {
						who = event_target:target_tributary
						modifier = i_was_imperial_tributary
					}
				}
			}
		}
		
		e_china = {
			holder_scope = {
				hidden_tooltip = {
					remove_tributary = event_target:target_tributary
					reverse_remove_opinion = {
						who = event_target:target_tributary
						modifier = i_was_imperial_tributary
					}
				}
				
				make_tributary = {
					who = event_target:target_tributary
					tributary_type = chinese_protectorate
				}
			}
		}
	}
	
	else = {
		e_china = {
			holder_scope = {
				hidden_tooltip = {
					remove_tributary = event_target:target_tributary
					reverse_remove_opinion = {
						who = event_target:target_tributary
						modifier = i_was_misc_tributary
					}
				}
				
				make_tributary = {
					who = event_target:target_tributary
					tributary_type = chinese_imperial_tributary
				}
			}
		}
	}
	
	e_china = {
		holder_scope = {
			opinion = {
				who = event_target:target_tributary
				modifier = opinion_grace_increased_tributary_tier
			}
		}
	}
	
	clear_event_target = target_tributary
}

decrease_tributary_tier_or_release_effect = {
	save_event_target_as = target_tributary
	
	if = {
		limit = {
			is_tributary = {
				type = chinese_client_state
			}
		}
		
		suzerain = {
			hidden_tooltip = {
				remove_tributary = event_target:target_tributary
			}
		}
		
		e_china = {
			holder_scope = {
				make_tributary = {
					who = event_target:target_tributary
					tributary_type = chinese_protectorate
				}
			}
		}
	}
	
	else_if = {
		limit = {
			is_tributary = {
				type = chinese_protectorate
			}
		}
		
		suzerain = {
			hidden_tooltip = {
				remove_tributary = event_target:target_tributary
			}
		}
		
		e_china = {
			holder_scope = {
				make_tributary = {
					who = event_target:target_tributary
					tributary_type = chinese_imperial_tributary
				}
			}
		}
	}
	
	else_if = {
		limit = {
			is_tributary = {
				type = chinese_imperial_tributary
			}
		}
		
		suzerain = {
			hidden_tooltip = {
				remove_tributary = event_target:target_tributary
			}
		}
		
		e_china = {
			holder_scope = {
				make_tributary = {
					who = event_target:target_tributary
					tributary_type = chinese_peripheral_tributary
				}
			}
		}
	}
	
	else = {
		suzerain = {
			hidden_tooltip = {
				remove_tributary = event_target:target_tributary
			}
			
			opinion = {
				who = event_target:target_tributary
				modifier = opinion_china_breakaway_tributary
			}
		}
	}
	
	e_china = {
		holder_scope = {
			opinion = {
				who = event_target:target_tributary
				modifier = opinion_grace_decreased_tributary_tier
			}
		}
	}
	
	clear_event_target = target_tributary
}