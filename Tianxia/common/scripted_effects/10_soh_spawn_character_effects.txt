# spawn_mu_base_effect
# spawn_mu_healer_effect
# spawn_mu_mystic_effect
# spawn_mu_foreigner_effect
# spawn_mu_charlatan_effect
# spawn_mu_theologian_effect
# spawn_mu_scholar_effect
# spawn_mu_young_commoner_effect
# spawn_mu_possessed_effect
# spawn_mu_lunatic_effect
# spawn_mu_zealot_effect
# spawn_mu_drunkard_effect
# spawn_mu_bad_learning_effect
# spawn_mu_okay_learning_effect
# spawn_mu_good_learning_effect
# spawn_mu_great_learning_effect
# spawn_mu_unremarkable_effect

# create_new_court_eunuch_effect
# grant_random_court_eunuch_position_effect
# create_chinese_strategist_effect
# chinese_strategist_setup_effect
# create_chinese_siege_engineer_effect
# chinese_siege_engineer_setup_effect
# create_chinese_administrator_effect
# chinese_administrator_setup_effect
# create_chinese_master_engineer_effect
# chinese_master_engineer_setup_effect
# create_chinese_physician_effect
# chinese_physician_setup_effect

# create_chinese_courtesan_effect
# create_chinese_beauty_effect
# create_chinese_entertainer_effect
# create_chinese_courtesan_no_children_effect
# create_tf_eunuch_effect
# create_tf_soldier_effect

# create_wako_raider_and_forces_effect
# create_wako_raider_effect
# create_wako_forces_effect

spawn_mu_base_effect = {
	if = {
		limit = {
			OR = {
				religion = korean_pagan
				AND = {
					religion = korean_pagan_reformed
					NOR = {
						has_religion_feature = religion_matriarchal
						has_religion_feature = religion_equal
						has_religion_feature = religion_patriarchal
					}
				}
			}
		}
		
		create_random_priest = {
			culture = ROOT
			religion = ROOT
			dynasty = none
			age = 30
			female = 80
			random_traits = yes
		}
	}
	
	else_if = {
		limit = {
			religion = korean_pagan_reformed
			has_religion_feature = religion_matriarchal
		}
		
		create_random_priest = {
			culture = ROOT
			religion = ROOT
			dynasty = none
			age = 30
			female = yes
			random_traits = yes
		}
	}
	
	else_if = {
		limit = {
			religion = korean_pagan_reformed
			has_religion_feature = religion_equal
		}
		
		create_random_priest = {
			culture = ROOT
			religion = ROOT
			dynasty = none
			age = 30
			female = 50
			random_traits = yes
		}
	}
	
	else = {
		create_random_priest = {
			culture = ROOT
			religion = ROOT
			dynasty = none
			age = 30
			female = no
			random_traits = yes
		}
	}
}

spawn_mu_healer_effect = {
	spawn_mu_base_effect = yes
	
	new_character = {
		remove_lifestyle_trait_effect = yes
		
		add_trait = physician
		add_trait = kind
		add_trait = humble
		
		save_event_target_as = possible_mu
		set_character_flag = ai_flag_refuse_concubinage
		set_character_flag = ai_flag_refuse_marriage
		set_character_flag = no_court_invites
		set_character_flag = ai_flag_refuse_conversion
		set_character_flag = court_mu_healer
	}
}

spawn_mu_mystic_effect = {
	spawn_mu_base_effect = yes
	
	new_character = {
		remove_lifestyle_trait_effect = yes
		
		add_age = 15
		
		add_trait = mystic
		add_trait = diligent
		add_trait = honest
		
		save_event_target_as = possible_mu
		set_character_flag = ai_flag_refuse_concubinage
		set_character_flag = ai_flag_refuse_marriage
		set_character_flag = no_court_invites
		set_character_flag = ai_flag_refuse_conversion
		set_character_flag = court_mu_mystic
	}
}

spawn_mu_foreigner_effect = {
	if = {
		limit = {
			OR = {
				religion = korean_pagan
				AND = {
					religion = korean_pagan_reformed
					NOR = {
						has_religion_feature = religion_matriarchal
						has_religion_feature = religion_equal
						has_religion_feature = religion_patriarchal
					}
				}
			}
		}
		
		create_random_priest = {
			culture = random
			religion = ROOT
			dynasty = none
			age = 30
			female = 80
			random_traits = yes
		}
	}
	
	else_if = {
		limit = {
			religion = korean_pagan_reformed
			has_religion_feature = religion_matriarchal
		}
		
		create_random_priest = {
			culture = random
			religion = ROOT
			dynasty = none
			age = 30
			female = yes
			random_traits = yes
		}
	}
	
	else_if = {
		limit = {
			religion = korean_pagan_reformed
			has_religion_feature = religion_equal
		}
		
		create_random_priest = {
			culture = random
			religion = ROOT
			dynasty = none
			age = 30
			female = 50
			random_traits = yes
		}
	}
	
	else = {
		create_random_priest = {
			culture = random
			religion = ROOT
			dynasty = none
			age = 30
			female = no
			random_traits = yes
		}
	}
	
	new_character = {
		save_event_target_as = possible_mu
		set_character_flag = ai_flag_refuse_concubinage
		set_character_flag = ai_flag_refuse_marriage
		set_character_flag = no_court_invites
		set_character_flag = ai_flag_refuse_conversion
		set_character_flag = court_mu_foreigner
	}
}

spawn_mu_charlatan_effect = {
	spawn_mu_base_effect = yes
	
	new_character = {
		add_age = -10
		
		add_trait = deceitful
		add_trait = shrewd
		add_trait = greedy
		
		if = {
			limit = {
				trait = detached_priest
			}
			remove_trait = detached_priest
			add_trait = amateurish_plotter
		}
		
		else_if = {
			limit = {
				trait = dutiful_cleric
			}
			remove_trait = dutiful_cleric
			add_trait = flamboyant_schemer
		}
		
		else_if = {
			limit = {
				trait = scholarly_theologian
			}
			remove_trait = scholarly_theologian
			add_trait = intricate_webweaver
		}
		
		else = {
			remove_trait = mastermind_theologian
			add_trait = elusive_shadow
		}
		
		save_event_target_as = possible_mu
		set_character_flag = ai_flag_refuse_concubinage
		set_character_flag = ai_flag_refuse_marriage
		set_character_flag = no_court_invites
		set_character_flag = ai_flag_refuse_conversion
		set_character_flag = court_mu_charlatan
	}
}

spawn_mu_theologian_effect = {
	spawn_mu_base_effect = yes
	
	new_character = {
		remove_lifestyle_trait_effect = yes
		
		add_age = 5
		
		add_trait = theologian
		add_trait = proud
		add_trait = patient
		
		save_event_target_as = possible_mu
		set_character_flag = ai_flag_refuse_concubinage
		set_character_flag = ai_flag_refuse_marriage
		set_character_flag = no_court_invites
		set_character_flag = ai_flag_refuse_conversion
		set_character_flag = court_mu_theologian
	}
}

spawn_mu_scholar_effect = {
	spawn_mu_base_effect = yes
	
	new_character = {
		remove_lifestyle_trait_effect = yes
		
		add_age = 25
		
		add_trait = scholar
		add_trait = just
		add_trait = shy
		
		save_event_target_as = possible_mu
		set_character_flag = ai_flag_refuse_concubinage
		set_character_flag = ai_flag_refuse_marriage
		set_character_flag = no_court_invites
		set_character_flag = ai_flag_refuse_conversion
		set_character_flag = court_mu_scholar
	}
}

spawn_mu_young_commoner_effect = {
	spawn_mu_base_effect = yes
	
	new_character = {
		remove_lifestyle_trait_effect = yes
		remove_all_education_traits_effect = yes
		
		add_age = -14
		
		add_trait = thrifty_clerk
		add_trait = envious
		add_trait = erudite
		add_trait = zealous
		
		save_event_target_as = possible_mu
		set_character_flag = ai_flag_refuse_concubinage
		set_character_flag = ai_flag_refuse_marriage
		set_character_flag = no_court_invites
		set_character_flag = ai_flag_refuse_conversion
		set_character_flag = court_mu_commoner
	}
}

spawn_mu_possessed_effect = {
	spawn_mu_base_effect = yes
	
	new_character = {
		remove_lifestyle_trait_effect = yes
		
		add_age = -12
		
		add_trait = possessed
		add_trait = paranoid
		add_trait = stubborn
		
		save_event_target_as = possible_mu
		set_character_flag = ai_flag_refuse_concubinage
		set_character_flag = ai_flag_refuse_marriage
		set_character_flag = no_court_invites
		set_character_flag = ai_flag_refuse_conversion
		set_character_flag = court_mu_possessed
	}
}

spawn_mu_lunatic_effect = {
	spawn_mu_base_effect = yes
	
	new_character = {
		add_age = -9
		
		remove_lifestyle_trait_effect = yes
		
		add_trait = lunatic
		add_trait = trusting
		add_trait = lustful
		
		save_event_target_as = possible_mu
		set_character_flag = ai_flag_refuse_concubinage
		set_character_flag = ai_flag_refuse_marriage
		set_character_flag = no_court_invites
		set_character_flag = ai_flag_refuse_conversion
		set_character_flag = court_mu_lunatic
	}
}

spawn_mu_zealot_effect = {
	spawn_mu_base_effect = yes
	
	new_character = {
		add_age = -5
		
		remove_lifestyle_trait_effect = yes
		
		add_trait = zealous
		add_trait = proud
		add_trait = wroth
		
		save_event_target_as = possible_mu
		set_character_flag = ai_flag_refuse_concubinage
		set_character_flag = ai_flag_refuse_marriage
		set_character_flag = no_court_invites
		set_character_flag = ai_flag_refuse_conversion
		set_character_flag = court_mu_zealot
	}
}

spawn_mu_drunkard_effect = {
	spawn_mu_base_effect = yes
	
	new_character = {
		add_age = 3
		
		remove_lifestyle_trait_effect = yes
		
		add_trait = drunkard
		add_trait = charitable
		
		save_event_target_as = possible_mu
		set_character_flag = ai_flag_refuse_concubinage
		set_character_flag = ai_flag_refuse_marriage
		set_character_flag = no_court_invites
		set_character_flag = ai_flag_refuse_conversion
		set_character_flag = court_mu_drunkard
	}
}

spawn_mu_bad_learning_effect = {
	spawn_mu_base_effect = yes
	
	new_character = {
		add_age = -6
		
		remove_lifestyle_trait_effect = yes
		remove_all_education_traits_effect = yes
		
		add_trait = detached_priest
		
		save_event_target_as = possible_mu
		set_character_flag = ai_flag_refuse_concubinage
		set_character_flag = ai_flag_refuse_marriage
		set_character_flag = no_court_invites
		set_character_flag = ai_flag_refuse_conversion
		set_character_flag = court_mu_learning
	}
}

spawn_mu_okay_learning_effect = {
	spawn_mu_base_effect = yes
	
	new_character = {
		add_age = 10
		
		remove_lifestyle_trait_effect = yes
		remove_all_education_traits_effect = yes
		
		add_trait = dutiful_cleric
		
		save_event_target_as = possible_mu
		set_character_flag = ai_flag_refuse_concubinage
		set_character_flag = ai_flag_refuse_marriage
		set_character_flag = no_court_invites
		set_character_flag = ai_flag_refuse_conversion
		set_character_flag = court_mu_learning
	}
}

spawn_mu_good_learning_effect = {
	spawn_mu_base_effect = yes
	
	new_character = {
		add_age = 30
		
		remove_all_education_traits_effect = yes
		
		add_trait = scholarly_theologian
		
		save_event_target_as = possible_mu
		set_character_flag = ai_flag_refuse_concubinage
		set_character_flag = ai_flag_refuse_marriage
		set_character_flag = no_court_invites
		set_character_flag = ai_flag_refuse_conversion
		set_character_flag = court_mu_learning
	}
}

spawn_mu_great_learning_effect = {
	spawn_mu_base_effect = yes
	
	new_character = {
		add_age = 40
		
		remove_all_education_traits_effect = yes
		
		add_trait = mastermind_theologian
		
		save_event_target_as = possible_mu
		set_character_flag = ai_flag_refuse_concubinage
		set_character_flag = ai_flag_refuse_marriage
		set_character_flag = no_court_invites
		set_character_flag = ai_flag_refuse_conversion
		set_character_flag = court_mu_learning
	}
}

spawn_mu_unremarkable_effect = {
	spawn_mu_base_effect = yes
	
	new_character = {
		add_age = 2
		
		remove_lifestyle_trait_effect = yes
		remove_all_education_traits_effect = yes
		
		add_trait = underhanded_rogue
		
		save_event_target_as = possible_mu
		set_character_flag = ai_flag_refuse_concubinage
		set_character_flag = ai_flag_refuse_marriage
		set_character_flag = no_court_invites
		set_character_flag = ai_flag_refuse_conversion
		set_character_flag = court_mu_unremarkable
	}
}

create_new_court_eunuch_effect = {
	# Based on JD scholar-bureaucrats
	# Only fires if JD is active
	hidden_tooltip = {
		if = {
			limit = {
				any_realm_province = {
					trade_route = silk_road
				}
			}
			
			random_list = {
				50 = {
					random_independent_ruler = {
						limit = {
							any_realm_province = {
								trade_route = silk_road
							}
						}
						
						random_realm_province = {
							save_event_target_as = eunuch_origin
						}
					}
				}
				
				50 = {
					random_realm_province = {
						save_event_target_as = eunuch_origin
					}
				}
			}
		}
		
		else = {
			random_realm_province = {
				save_event_target_as = eunuch_origin
			}
		}
		
		create_character = {
			age = 30
			dynasty = NONE
			religion = event_target:eunuch_origin
			culture = event_target:eunuch_origin
			female = no
			health = 6
			random_traits = yes
		}
		
		new_character = {
			# Randomize religion
			random = {
				chance = 25
				religion = ROOT
			}
			
			# Randomize culture
			random = {
				chance = 25
				culture = ROOT
			}
			
			# Randomize age
			random_list = {
				1 = {
					add_age = -10
				}
				5 = {
					add_age = -5
				}
				10 = {}
				15 = {
					add_age = 5
				}
				15 = {
					add_age = 10
				}
				15 = {
					add_age = 15
				}
				15 = {
					add_age = 20
				}
				10 = {
					add_age = 25
				}
				10 = {
					add_age = 30
				}
				10 = {
					add_age = 35
				}
				10 = {
					add_age = 40
				}
				5 = {
					add_age = 45
				}
				5 = {
					add_age = 50
				}
				2 = {
					add_age = 55
				}
				1 = {
					add_age = 60
				}
			}
			
			random_list = {
				10 =  {
					add_age = -4
				}
				10 =  {
					add_age = -3
				}
				10 =  {
					add_age = -2
				}
				10 =  {
					add_age = -1
				}
				10 =  {}
				10 =  {
					add_age = 1
				}
				10 =  {
					add_age = 2
				}
				10 =  {
					add_age = 3
				}
				10 =  {
					add_age = 4
				}
			}
			
			add_trait = eunuch # Important!
			
			# Education & other basic stuff
			set_character_flag = ai_flag_refuse_concubinage
			set_character_flag = ai_flag_refuse_marriage
			set_character_flag = originated_from_chinese_court
			set_character_flag = no_court_invites
			
			random = {
				chance = 50
				remove_all_education_traits_effect = yes
				random_list = {
					30 = { add_trait = thrifty_clerk }
					15 = { add_trait = fortune_builder }
					5 = { add_trait = midas_touched }
					30 = { add_trait = dutiful_cleric }
					15 = { add_trait = scholarly_theologian }
					5 = { add_trait = mastermind_theologian }
					30 = { add_trait = flamboyant_schemer }
					15 = { add_trait = intricate_webweaver }
					5 = { add_trait = elusive_shadow }
				}
			}
			
			random_list = {
				100 = { } #Nothing
				30 = { add_trait = erudite }
				25 = { add_trait = shrewd }
				15 = { add_trait = quick }
				5 = { add_trait = genius }
				5 = { add_trait = attractive }
			}
			
			random_list = {
				85 = { } #Nothing
				1 = { add_trait = clubfooted }
				2 = { add_trait = harelip }
				2 = { add_trait = hunchback }
				3 = { add_trait = lisp }
				3 = { add_trait = stutter }
				2 = { 
					add_trait = ugly 
					remove_trait = attractive 
				}
				1 = { add_trait = dwarf }
				1 = {  add_trait = weak }
			}
			
			random = {
				chance = 10
				add_trait = homosexual
			}

			# Add archetype 
			random_list = {
				# Conservative 
				25 = {
					set_character_flag = archetype_conservative
					
					if = {
						limit = { has_dlc = "Way of Life" }
						random_list = {
							50 = { add_trait = scholar }
							50 = { add_trait = administrator }
						}
					}
					
					random = {
						chance = 50
						add_trait = zealous
					}
					
					add_trait = stubborn
					add_trait = temperate
					
					random_list = {
						20 = { add_trait = greedy }
						20 = { add_trait = wroth }
						20 = { add_trait = deceitful }
						20 = { add_trait = shy }
						20 = { add_trait = cruel }
					}
					
					random_list = {
						25 = { add_trait = poet }
						25 = { add_trait = chaste }
						25 = { 
							add_trait = patient
							remove_trait = wroth
						}
						25 = { add_trait = just }
					}
				}
				
				# Supportive
				25 = {
					set_character_flag = archetype_supportive
					
					if = {
						limit = { has_dlc = "Way of Life" }    
						random_list = {
							50 = { add_trait = administrator }
							25 = { add_trait = scholar }
							25 = { add_trait = gardener }
						}
					}
					
					add_trait = humble
					add_trait = patient
					
					random_list = {
						33 = { add_trait = slothful }
						33 = { add_trait = craven }
						33 = { add_trait = shy }
					}
					
					random_list = {
						25 = { add_trait = content }
						25 = { add_trait = charitable }
						25 = { add_trait = kind }
						25 = { add_trait = trusting }
					}      
				}
				
				# Decisive
				25 = {
					set_character_flag = archetype_decisive
					
					if = {
						limit = { has_dlc = "Way of Life" }
						random_list = {
							75 = { add_trait = administrator }
							25 = { add_trait = architect }
						}
					}
					
					add_trait = ambitious
					add_trait = cynical
					
					random_list = {
						20 = { add_trait = cruel }
						20 = { add_trait = stubborn }
						20 = { add_trait = greedy }
						20 = { add_trait = wroth }
						20 = { add_trait = proud }
					}
					
					random_list = {
						20 = { add_trait = falconer }
						20 = { add_trait = diligent }
						20 = { add_trait = brave }
						20 = { add_trait = honest }
						20 = { add_trait = gregarious }
					}    
				}
				
				# Sociable
				25 = {
					set_character_flag = archetype_sociable
					
					if = {
						limit = { has_dlc = "Way of Life" }
						random_list = {
							25 = { add_trait = administrator }
							30 = { add_trait = socializer }
							25 = { add_trait = hedonist}
							20 = { # Technically fine...
								trigger = { is_female = no }
								add_trait = master_seducer
								add_trait = lustful
							}
						}
					}
					
					add_trait = gregarious
					add_trait = charitable
					
					random_list = {
						25 = { add_trait = craven }
						25 = { add_trait = envious }
						25 = { add_trait = gluttonous }
						25 = { add_trait = proud }
					}
					
					random_list = {
						25 = { add_trait = poet }
						25 = { add_trait = kind }
						25 = { add_trait = honest }
						25 = { add_trait = lustful }
					}   
				}
				
				500 = {} # Nothing; random traits are set initially, so this could be good
			}
		}
	}
}

grant_random_court_eunuch_position_effect = {
	custom_tooltip = {
		text = grant_random_court_eunuch_position_to_skilled_eunuch
		
		random_list = {
			1 = {
				trigger = {
					NOT = {
						any_voter = {
							has_minor_title = title_councilmember_eunuch
						}
					}
				}
				
				event_target:skilled_eunuch = {
					give_minor_title = title_councilmember_eunuch
				}
			}
			
			1 = {
				trigger = {
					NOR = {
						any_voter = {
							has_minor_title = title_councilmember_eunuch_2
						}
						primary_title = {
							has_law = eunuch_law_1
						}
					}
				}
				
				event_target:skilled_eunuch = {
					give_minor_title = title_councilmember_eunuch_2
				}
			}
			
			1 = {
				trigger = {
					NOR = {
						any_voter = {
							has_minor_title = title_councilmember_eunuch_3
						}
						primary_title = {
							has_law = eunuch_law_1
						}
					}
				}
				
				event_target:skilled_eunuch = {
					give_minor_title = title_councilmember_eunuch_3
				}
			}
			
			1 = {
				trigger = {
					NOR = {
						any_voter = {
							has_minor_title = title_councilmember_eunuch_4
						}
						primary_title = {
							has_law = eunuch_law_1
						}
					}
				}
				
				event_target:skilled_eunuch = {
					give_minor_title = title_councilmember_eunuch_4
				}
			}
			
			1 = {
				trigger = {
					NOR = {
						any_voter = {
							has_minor_title = title_councilmember_eunuch_5
						}
						primary_title = {
							OR = {
								has_law = eunuch_law_1
								has_law = eunuch_law_2
							}
						}
					}
				}
				
				event_target:skilled_eunuch = {
					give_minor_title = title_councilmember_eunuch_5
				}
			}
			
			1 = {
				trigger = {
					NOR = {
						any_voter = {
							has_minor_title = title_councilmember_eunuch_6
						}
						primary_title = {
							OR = {
								has_law = eunuch_law_1
								has_law = eunuch_law_2
							}
						}
					}
				}
				
				event_target:skilled_eunuch = {
					give_minor_title = title_councilmember_eunuch_6
				}
			}
			
			1 = {
				trigger = {
					NOR = {
						any_voter = {
							has_minor_title = title_councilmember_eunuch_7
						}
						primary_title = {
							OR = {
								has_law = eunuch_law_1
								has_law = eunuch_law_2
							}
						}
					}
				}
				
				event_target:skilled_eunuch = {
					give_minor_title = title_councilmember_eunuch_7
				}
			}
			
			1 = {
				trigger = {
					NOR = {
						any_voter = {
							has_minor_title = title_councilmember_eunuch_8
						}
						primary_title = {
							OR = {
								has_law = eunuch_law_1
								has_law = eunuch_law_2
							}
						}
					}
				}
				
				event_target:skilled_eunuch = {
					give_minor_title = title_councilmember_eunuch_8
				}
			}
			
			1 = {
				trigger = {
					NOT = {
						any_voter = {
							has_minor_title = title_councilmember_eunuch_9
						}
					}
					primary_title = {
						has_law = eunuch_law_4
					}
				}
				
				event_target:skilled_eunuch = {
					give_minor_title = title_councilmember_eunuch_9
				}
			}
			
			1 = {
				trigger = {
					NOT = {
						any_voter = {
							has_minor_title = title_councilmember_eunuch_10
						}
					}
					primary_title = {
						has_law = eunuch_law_4
					}
				}
				
				event_target:skilled_eunuch = {
					give_minor_title = title_councilmember_eunuch_10
				}
			}
			
			1 = {
				trigger = {
					NOT = {
						any_voter = {
							has_minor_title = title_councilmember_eunuch_11
						}
					}
					primary_title = {
						has_law = eunuch_law_4
					}
				}
				
				event_target:skilled_eunuch = {
					give_minor_title = title_councilmember_eunuch_11
				}
			}
			
			1 = {
				trigger = {
					NOT = {
						any_voter = {
							has_minor_title = title_councilmember_eunuch_12
						}
					}
					primary_title = {
						has_law = eunuch_law_4
					}
				}
				
				event_target:skilled_eunuch = {
					give_minor_title = title_councilmember_eunuch_12
				}
			}
		}
	}
}

create_chinese_strategist_effect = {
	hidden_tooltip = {
		event_target:chinese_character_origin = {
			if = {
				limit = {
					has_chinese_or_historical_culture_for_chinese_imperial_trigger = yes
					can_have_confucian_bureaucracy_and_eastern_imperial_only_religion_trigger = yes
				}
				
				random_list = {
					50 = { # Female
						trigger = {
							OR = {
								gender_equality_trigger = yes
								has_religion_feature = religion_matriarchal
								has_religion_feature = religion_feature_minangkabau
							}
						}
				
						ROOT = {
							create_character = {
								age = 30
								dynasty = actually_culture
								religion = event_target:chinese_character_origin
								culture = event_target:chinese_character_origin
								female = yes
								health = 7
								random_traits = no
								attributes = {
									martial = 6
									diplomacy = 2
									stewardship = 3
									intrigue = 4
									learning = 2
								}
							}
							
							chinese_strategist_setup_effect = yes
						}
					}
				
					50 = { # Male
						trigger = {
							NOR = {
								has_religion_feature = religion_matriarchal
								has_religion_feature = religion_feature_minangkabau
							}
						}
						
						ROOT = {
							create_character = {
								age = 30
								dynasty = actually_culture
								religion = event_target:chinese_character_origin
								culture = event_target:chinese_character_origin
								female = no
								health = 7
								random_traits = no
								attributes = {
									martial = 6
									diplomacy = 2
									stewardship = 3
									intrigue = 4
									learning = 2
								}
							}
							
							chinese_strategist_setup_effect = yes
						}
					}
				}
			}
			
			else = {
				random_list = {
					50 = { # Female
						trigger = {
							OR = {
								gender_equality_trigger = yes
								has_religion_feature = religion_matriarchal
								has_religion_feature = religion_feature_minangkabau
							}
						}
				
						ROOT = {
							create_character = {
								age = 30
								dynasty = actually_culture
								religion = confucian
								culture = han
								female = yes
								health = 7
								random_traits = no
								attributes = {
									martial = 6
									diplomacy = 2
									stewardship = 3
									intrigue = 4
									learning = 2
								}
							}
							
							chinese_strategist_setup_effect = yes
						}
					}
				
					50 = { # Male
						trigger = {
							NOR = {
								has_religion_feature = religion_matriarchal
								has_religion_feature = religion_feature_minangkabau
							}
						}
						
						ROOT = {
							create_character = {
								age = 30
								dynasty = actually_culture
								religion = confucian
								culture = han
								female = no
								health = 7
								random_traits = no
								attributes = {
									martial = 6
									diplomacy = 2
									stewardship = 3
									intrigue = 4
									learning = 2
								}
							}
							
							chinese_strategist_setup_effect = yes
						}
					}
				}
			}
		}
	}
}

chinese_strategist_setup_effect = {
	new_character = {
		#Education & other basic stuff
		
		save_event_target_as = chinese_strategist
		set_character_flag = chinese_warfare
		
		add_character_modifier = {
			name = jd_strategist
			duration = -1
		}
		
		set_character_flag = ai_flag_refuse_concubinage
		set_character_flag = ai_flag_refuse_marriage
		set_character_flag = originated_from_chinese_court
		set_character_flag = no_court_invites
		set_character_flag = is_chinese_strategist
		
		random_list = {
			80 = { add_trait = skilled_tactician }
			20 = { add_trait = brilliant_strategist }
		}
		
		random_list = {
			20 = { add_trait = brave } 
			20 = { add_trait = strong }
			20 = { add_trait = shrewd }
			40 = { add_trait = brawny }
		}
		
		random_list = {
			71 = { } #Nothing
			20 = { add_trait = scarred }
			5 = { 
				trigger = { has_dlc = Reapers }
				add_trait = one_eyed 
				change_martial = 1
			}
			
			2 = { 
				trigger = { has_dlc = Reapers }
				add_trait = one_handed
				change_martial = 1
			}
			
			2 = { add_trait = ugly }
		}
		
		random = {
			chance = 10
			add_trait = homosexual
		}
		
		random_list = {
			50 = {}
			25 = {
				religion = confucian
			}
			20 = {
				religion = taoist
			}
			4 = {
				religion = buddhist
			}
			1 = {
				religion = nestorian
			}
		}
		
		# Add archetype 
		random_list = {
			#C onservative 
			25 = {
				set_character_flag = archetype_conservative
				
				if = {
					limit = { has_dlc = "Way of Life" }
					add_trait = strategist
				}
				
				add_trait = logistics_expert
				
				random = {
					chance = 50
					add_trait = zealous
				}
				
				add_trait = stubborn
				add_trait = temperate
				
				random_list = {
					20 = { add_trait = greedy }
					20 = { add_trait = wroth }
					20 = { add_trait = deceitful }
					20 = { add_trait = shy }
					20 = { add_trait = cruel }
				}
				
				random_list = {
					25 = { add_trait = poet }
					25 = { add_trait = chaste }
					25 = { 
						add_trait = patient
						remove_trait = wroth
					}
					25 = { add_trait = just }
				}
			}
			# Supportive
			25 = {
				set_character_flag = archetype_supportive
				
				if = {
					limit = { has_dlc = "Way of Life" }
					random_list = {
						50 = { add_trait = hunter }
						50 = { add_trait = strategist }
					}
				}
				
				add_trait = sapper 
				add_trait = humble
				add_trait = patient
				
				random_list = {
					30 = { add_trait = slothful }
					70 = { add_trait = shy }
				}
				
				random_list = {
					25 = { add_trait = content }
					25 = { add_trait = charitable }
					25 = { add_trait = kind }
					25 = { add_trait = trusting }
				}  
			}
			
			# Decisive
			25 = {
				set_character_flag = archetype_decisive
				
				if = {
					limit = { has_dlc = "Way of Life" }
					random_list = {
						50 = { add_trait = strategist }
						50 = { add_trait = duelist }
					}
				}
				
				add_trait = master_of_flame 
				add_trait = ambitious
				add_trait = cynical
				
				random_list = {
					20 = { add_trait = cruel }
					20 = { add_trait = stubborn }
					20 = { add_trait = greedy }
					20 = { add_trait = wroth }
					20 = { add_trait = proud }
				}
				
				random_list = {
					20 = { add_trait = falconer }
					20 = { add_trait = diligent }
					20 = { add_trait = brave }
					20 = { add_trait = honest }
					20 = { add_trait = gregarious }
				}
			}
			
			# Sociable
			25 = {
				set_character_flag = archetype_sociable
				
				if = {
					limit = { has_dlc = "Way of Life" }
					random_list = {
						20 = { add_trait = duelist }
						40 = { add_trait = hunter }
						40 = { add_trait = game_master }
					}
				}
				
				add_trait = levy_coordinator 
				add_trait = gregarious
				add_trait = charitable
				
				random_list = {
					33 = { add_trait = envious }
					33 = { add_trait = gluttonous }
					33 = { add_trait = proud }
				}
				
				random_list = {
					25 = { add_trait = falconer }
					25 = { add_trait = kind }
					25 = { add_trait = honest }
					25 = { add_trait = lustful }
				}   
			}
		}

		#Add second commander trait
		random_list = {
			10 = {
				trigger = { NOT = {trait = master_of_flame } }
				add_trait = master_of_flame
			}
			
			10 = {
				trigger = { NOT = {trait = logistics_expert } }
				add_trait = logistics_expert
			}
			
			10 = {
				trigger = { NOT = {trait = levy_coordinator } }
				add_trait = levy_coordinator
			}
			
			10 = {
				trigger = { NOT = {trait = sapper } }
				add_trait = sapper
			}
			
			60 = {}
		}
	}
	
	new_character = {
		set_character_flag = special_marshal
		save_event_target_as = new_strategist
	}
}

create_chinese_siege_engineer_effect = {
	hidden_tooltip = {
		event_target:chinese_character_origin = {
			random_list = {
				33 = {
					if = {
						limit = {
							has_chinese_or_historical_culture_for_chinese_imperial_trigger = yes
							can_have_confucian_bureaucracy_and_eastern_imperial_only_religion_trigger = yes
						}
						
						random_list = {
							50 = { # Female
								trigger = {
									OR = {
										gender_equality_trigger = yes
										has_religion_feature = religion_matriarchal
										has_religion_feature = religion_feature_minangkabau
									}
								}
								
								ROOT = {
									create_random_soldier = {
										age = 55
										dynasty = actually_culture
										religion = event_target:chinese_character_origin
										culture = event_target:chinese_character_origin
										female = yes
										random_traits = yes
										attributes = {
											diplomacy = 2
											learning = 2
											stewardship = 2
											intrigue = 2
											martial = 16
										}
									}
									
									chinese_siege_engineer_setup_effect = yes
								}
							}
							
							50 = { # Male
								trigger = {
									NOR = {
										has_religion_feature = religion_matriarchal
										has_religion_feature = religion_feature_minangkabau
									}
								}
								
								ROOT = {
									create_random_soldier = {
										age = 55
										dynasty = actually_culture
										religion = event_target:chinese_character_origin
										culture = event_target:chinese_character_origin
										female = no
										random_traits = yes
										attributes = {
											diplomacy = 2
											learning = 2
											stewardship = 2
											intrigue = 2
											martial = 16
										}
									}
									
									chinese_siege_engineer_setup_effect = yes
								}
							}
						}
					}
					
					else = {
						random_list = {
							50 = { # Female
								trigger = {
									OR = {
										gender_equality_trigger = yes
										has_religion_feature = religion_matriarchal
										has_religion_feature = religion_feature_minangkabau
									}
								}
								
								ROOT = {
									create_random_soldier = {
										age = 55
										dynasty = actually_culture
										religion = confucian
										culture = han
										female = yes
										random_traits = yes
										attributes = {
											diplomacy = 2
											learning = 2
											stewardship = 2
											intrigue = 2
											martial = 16
										}
									}
									
									chinese_siege_engineer_setup_effect = yes
								}
							}
							
							50 = { # Male
								trigger = {
									NOR = {
										has_religion_feature = religion_matriarchal
										has_religion_feature = religion_feature_minangkabau
									}
								}
								
								ROOT = {
									create_random_soldier = {
										age = 55
										dynasty = actually_culture
										religion = confucian
										culture = han
										female = no
										random_traits = yes
										attributes = {
											diplomacy = 2
											learning = 2
											stewardship = 2
											intrigue = 2
											martial = 16
										}
									}
									
									chinese_siege_engineer_setup_effect = yes
								}
							}
						}
					}
					
					chinese_siege_engineer_setup_effect = yes
				}
				
				33 = {
					if = {
						limit = {
							has_chinese_or_historical_culture_for_chinese_imperial_trigger = yes
							can_have_confucian_bureaucracy_and_eastern_imperial_only_religion_trigger = yes
						}
						
						random_list = {
							50 = { # Female
								trigger = {
									OR = {
										gender_equality_trigger = yes
										has_religion_feature = religion_matriarchal
										has_religion_feature = religion_feature_minangkabau
									}
								}
								
								ROOT = {
									create_random_soldier = {
										age = 35
										dynasty = actually_culture
										religion = event_target:chinese_character_origin
										culture = event_target:chinese_character_origin
										female = yes
										random_traits = yes
										attributes = {
											diplomacy = 2
											learning = 2
											stewardship = 2
											intrigue = 2
											martial = 8
										}
									}
									
									chinese_siege_engineer_setup_effect = yes
								}
							}
							
							50 = { # Male
								trigger = {
									NOR = {
										has_religion_feature = religion_matriarchal
										has_religion_feature = religion_feature_minangkabau
									}
								}
								
								ROOT = {
									create_random_soldier = {
										age = 35
										dynasty = actually_culture
										religion = event_target:chinese_character_origin
										culture = event_target:chinese_character_origin
										female = no
										random_traits = yes
										attributes = {
											diplomacy = 2
											learning = 2
											stewardship = 2
											intrigue = 2
											martial = 8
										}
									}
									
									chinese_siege_engineer_setup_effect = yes
								}
							}
						}
					}
					
					else = {
						random_list = {
							50 = { # Female
								trigger = {
									OR = {
										gender_equality_trigger = yes
										has_religion_feature = religion_matriarchal
										has_religion_feature = religion_feature_minangkabau
									}
								}
								
								ROOT = {
									create_random_soldier = {
										age = 35
										dynasty = actually_culture
										religion = confucian
										culture = han
										female = yes
										random_traits = yes
										attributes = {
											diplomacy = 2
											learning = 2
											stewardship = 2
											intrigue = 2
											martial = 8
										}
									}
									
									chinese_siege_engineer_setup_effect = yes
								}
							}
							
							50 = { # Male
								trigger = {
									NOR = {
										has_religion_feature = religion_matriarchal
										has_religion_feature = religion_feature_minangkabau
									}
								}
								
								ROOT = {
									create_random_soldier = {
										age = 35
										dynasty = actually_culture
										religion = confucian
										culture = han
										female = no
										random_traits = yes
										attributes = {
											diplomacy = 2
											learning = 2
											stewardship = 2
											intrigue = 2
											martial = 8
										}
									}
									
									chinese_siege_engineer_setup_effect = yes
								}
							}
						}
					}
					
					chinese_siege_engineer_setup_effect = yes
				}
				
				33 = {
					if = {
						limit = {
							has_chinese_or_historical_culture_for_chinese_imperial_trigger = yes
							can_have_confucian_bureaucracy_and_eastern_imperial_only_religion_trigger = yes
						}
						
						random_list = {
							50 = { # Female
								trigger = {
									OR = {
										gender_equality_trigger = yes
										has_religion_feature = religion_matriarchal
										has_religion_feature = religion_feature_minangkabau
									}
								}
								
								ROOT = {
									create_random_soldier = {
										age = 37
										dynasty = actually_culture
										religion = event_target:chinese_character_origin
										culture = event_target:chinese_character_origin
										female = yes
										random_traits = yes
										attributes = {
											diplomacy = 2
											learning = 2
											stewardship = 2
											intrigue = 2
											martial = 8
										}
									}
									
									chinese_siege_engineer_setup_effect = yes
								}
							}
							
							50 = { # Male
								trigger = {
									NOR = {
										has_religion_feature = religion_matriarchal
										has_religion_feature = religion_feature_minangkabau
									}
								}
								
								ROOT = {
									create_random_soldier = {
										age = 37
										dynasty = actually_culture
										religion = event_target:chinese_character_origin
										culture = event_target:chinese_character_origin
										female = no
										random_traits = yes
										attributes = {
											diplomacy = 2
											learning = 2
											stewardship = 2
											intrigue = 2
											martial = 8
										}
									}
									
									chinese_siege_engineer_setup_effect = yes
								}
							}
						}
					}
					
					else = {
						random_list = {
							50 = { # Female
								trigger = {
									OR = {
										gender_equality_trigger = yes
										has_religion_feature = religion_matriarchal
										has_religion_feature = religion_feature_minangkabau
									}
								}
								
								ROOT = {
									create_random_soldier = {
										age = 37
										dynasty = actually_culture
										religion = confucian
										culture = han
										female = yes
										random_traits = yes
										attributes = {
											diplomacy = 2
											learning = 2
											stewardship = 2
											intrigue = 2
											martial = 8
										}
									}
									
									chinese_siege_engineer_setup_effect = yes
								}
							}
							
							50 = { # Male
								trigger = {
									NOR = {
										has_religion_feature = religion_matriarchal
										has_religion_feature = religion_feature_minangkabau
									}
								}
								
								ROOT = {
									create_random_soldier = {
										age = 37
										dynasty = actually_culture
										religion = confucian
										culture = han
										female = no
										random_traits = yes
										attributes = {
											diplomacy = 2
											learning = 2
											stewardship = 2
											intrigue = 2
											martial = 8
										}
									}
									
									chinese_siege_engineer_setup_effect = yes
								}
							}
						}
					}
				}
			}
		}
	}
}

chinese_siege_engineer_setup_effect = {
	new_character = {
		save_event_target_as = chinese_siege_engineer
		set_character_flag = chinese_warfare
		set_character_flag = ai_flag_refuse_concubinage
		set_character_flag = ai_flag_refuse_marriage
		set_character_flag = originated_from_chinese_court
		set_character_flag = no_court_invites
		set_character_flag = taught_chinese_strategy
		set_character_flag = is_chinese_siege_engineer
		
		remove_trait = weak
		remove_trait = slow
		remove_trait = imbecile
		remove_trait = dull
		
		remove_trait = craven
		remove_trait = mystic
		remove_trait = socializer
		remove_trait = game_master
		remove_trait = hedonist
		remove_trait = duelist
		remove_trait = hunter
		remove_trait = strategist
		remove_trait = administrator
		remove_trait = architect
		remove_trait = gardener
		remove_trait = master_schemer
		remove_trait = impaler
		remove_trait = master_seducer
		remove_trait = master_seductress
		remove_trait = theologian
		remove_trait = scholar
		
		add_trait = sapper
		
		random_list = { # Flavor Randomization
			15 = {
				change_martial = 2
			}
			10 = {
				add_trait = brawny
			}
			10 = {
				add_trait = duelist
			}
			10 = {
				add_trait = architect
			}
			5 = {
				add_trait = strategist
			}
			5 = {
				change_martial = 4
			}
			5 = {
				if = {
					limit = {
						has_dlc = "Reapers"
					}
					add_trait = one_eyed
				}
			}
			5 = { 
				add_trait = shrewd
			}
		}
	}
			
	new_character = {
		random_list = {
			50 = {}
			25 = {
				religion = confucian
			}
			20 = {
				religion = taoist
			}
			4 = {
				religion = buddhist
			}
			1 = {
				religion = nestorian
			}
		}
		
		set_character_flag = special_marshal
		save_event_target_as = new_siege_engineer
	}
}

create_chinese_administrator_effect = {
	hidden_tooltip = {
		event_target:chinese_character_origin = {
			random_list = {
				50 = { # Female
					trigger = {
						OR = {
							gender_equality_trigger = yes
							has_religion_feature = religion_matriarchal
							has_religion_feature = religion_feature_minangkabau
						}
					}
					
					if = {
						limit = {
							has_chinese_or_historical_culture_for_chinese_imperial_trigger = yes
							can_have_confucian_bureaucracy_and_eastern_imperial_only_religion_trigger = yes
						}
						
						ROOT = {
							create_character = {
								age = 30
								dynasty = actually_culture
								religion = event_target:chinese_character_origin
								culture = event_target:chinese_character_origin
								female = yes
								health = 6
								random_traits = no
								attributes = {
									martial = 2
									diplomacy = 4
									stewardship = 6
									intrigue = 2
									learning = 5
								}
							}
							
							chinese_administrator_setup_effect = yes
						}
					}
					
					else = {
						ROOT = {
							create_character = {
								age = 30
								dynasty = actually_culture
								religion = confucian
								culture = han
								female = yes
								health = 6
								random_traits = no
								attributes = {
									martial = 2
									diplomacy = 4
									stewardship = 6
									intrigue = 2
									learning = 5
								}
							}
							
							chinese_administrator_setup_effect = yes
						}
					}
				}
				
				50 = { # Male
					trigger = {
						NOR = {
							has_religion_feature = religion_matriarchal
							has_religion_feature = religion_feature_minangkabau
						}
					}
					
					if = {
						limit = {
							has_chinese_or_historical_culture_for_chinese_imperial_trigger = yes
							can_have_confucian_bureaucracy_and_eastern_imperial_only_religion_trigger = yes
						}
						
						ROOT = {
							create_character = {
								age = 30
								dynasty = actually_culture
								religion = event_target:chinese_character_origin
								culture = event_target:chinese_character_origin
								female = no
								health = 6
								random_traits = no
								attributes = {
									martial = 2
									diplomacy = 4
									stewardship = 6
									intrigue = 2
									learning = 5
								}
							}
							
							chinese_administrator_setup_effect = yes
						}
					}
					
					else = {
						ROOT = {
							create_character = {
								age = 30
								dynasty = actually_culture
								religion = confucian
								culture = han
								female = no
								health = 6
								random_traits = no
								attributes = {
									martial = 2
									diplomacy = 4
									stewardship = 6
									intrigue = 2
									learning = 5
								}
							}
							
							chinese_administrator_setup_effect = yes
						}
					}
				}
			}
		}
	}
}

chinese_administrator_setup_effect = {
	new_character = {
		#Education & other basic stuff
		save_event_target_as = chinese_administrator
		
		add_character_modifier = {
			name = jd_administrator
			duration = -1
		}
		
		set_character_flag = ai_flag_refuse_concubinage
		set_character_flag = ai_flag_refuse_marriage
		set_character_flag = originated_from_chinese_court
		set_character_flag = no_court_invites
		set_character_flag = is_chinese_administrator
		
		random_list = {
			30 = { add_trait = thrifty_clerk }
			15 = { add_trait = fortune_builder }
			5 = { add_trait = midas_touched }
			30 = { add_trait = dutiful_cleric }
			15 = { add_trait = scholarly_theologian }
			5 = { add_trait = mastermind_theologian }
		}
		
		random_list = {
			20 = { } #Nothing
			30 = { add_trait = erudite }
			25 = { add_trait = shrewd }
			15 = { add_trait = quick }
			5 = { add_trait = genius }
			5 = { add_trait = attractive }
		}
		
		random_list = {
			85 = { } #Nothing
			1 = { add_trait = clubfooted }
			2 = { add_trait = harelip }
			2 = { add_trait = hunchback }
			3 = { add_trait = lisp }
			3 = { add_trait = stutter }
			2 = { 
				add_trait = ugly 
				remove_trait = attractive 
			}
			1 = { add_trait = dwarf }
			1 = {  add_trait = weak }
		}
		
		random = {
			chance = 10
			add_trait = homosexual
		}

		# Add archetype 
		random_list = {
			# Conservative 
			25 = {
				set_character_flag = archetype_conservative
				
				if = {
					limit = { has_dlc = "Way of Life" }
					random_list = {
						50 = { add_trait = scholar }
						50 = { add_trait = administrator }
					}
				}
				
				random = {
					chance = 50
					add_trait = zealous
				}
				
				add_trait = stubborn
				add_trait = temperate
				
				random_list = {
					20 = { add_trait = greedy }
					20 = { add_trait = wroth }
					20 = { add_trait = deceitful }
					20 = { add_trait = shy }
					20 = { add_trait = cruel }
				}
				
				random_list = {
					25 = { add_trait = poet }
					25 = { add_trait = chaste }
					25 = { 
						add_trait = patient
						remove_trait = wroth
					}
					25 = { add_trait = just }
				}
			}
			
			# Supportive
			25 = {
				set_character_flag = archetype_supportive
				
				if = {
					limit = { has_dlc = "Way of Life" }
					random_list = {
						50 = { add_trait = administrator }
						25 = { add_trait = scholar }
						25 = { add_trait = gardener }
					}
				}
				
				add_trait = humble
				add_trait = patient
				
				random_list = {
					33 = { add_trait = slothful }
					33 = { add_trait = craven }
					33 = { add_trait = shy }
				}
				
				random_list = {
					25 = { add_trait = content }
					25 = { add_trait = charitable }
					25 = { add_trait = kind }
					25 = { add_trait = trusting }
				}  
			}
			
			# Decisive
			25 = {
				set_character_flag = archetype_decisive
				
				if = {
					limit = { has_dlc = "Way of Life" }
					random_list = {
						75 = { add_trait = administrator }
						25 = { add_trait = architect }
					}
				}
				
				add_trait = ambitious
				add_trait = cynical
				
				random_list = {
					20 = { add_trait = cruel }
					20 = { add_trait = stubborn }
					20 = { add_trait = greedy }
					20 = { add_trait = wroth }
					20 = { add_trait = proud }
				}
				
				random_list = {
					20 = { add_trait = falconer }
					20 = { add_trait = diligent }
					20 = { add_trait = brave }
					20 = { add_trait = honest }
					20 = { add_trait = gregarious }
				}
			}
			
			# Sociable
			25 = {
				set_character_flag = archetype_sociable
				
				if = {
					limit = { has_dlc = "Way of Life" }
					random_list = {
						25 = { add_trait = administrator }
						30 = { add_trait = socializer }
						25 = { add_trait = hedonist}
						20 = {
							trigger = { is_female = yes }
							add_trait = master_seductress
							add_trait = lustful
						}
						20 = {
							trigger = { is_female = no }
							add_trait = master_seducer
							add_trait = lustful
						}
					}
				}
				
				add_trait = gregarious
				add_trait = charitable
				
				random_list = {
					25 = { add_trait = craven }
					25 = { add_trait = envious }
					25 = { add_trait = gluttonous }
					25 = { add_trait = proud }
				}
				
				random_list = {
					25 = { add_trait = poet }
					25 = { add_trait = kind }
					25 = { add_trait = honest }
					25 = { add_trait = lustful }
				}   
			}
		}
	}
	
	new_character = {
		random_list = {
			50 = {}
			25 = {
				religion = confucian
			}
			20 = {
				religion = taoist
			}
			4 = {
				religion = buddhist
			}
			1 = {
				religion = nestorian
			}
		}
		
		save_event_target_as = new_administrator
	}
}

create_chinese_master_engineer_effect = {
	hidden_tooltip = {
		event_target:chinese_character_origin = {
			random_list = {
				50 = { # Female
					trigger = {
						OR = {
							gender_equality_trigger = yes
							has_religion_feature = religion_matriarchal
							has_religion_feature = religion_feature_minangkabau
						}
					}
					
					if = {
						limit = {
							has_chinese_or_historical_culture_for_chinese_imperial_trigger = yes
							can_have_confucian_bureaucracy_and_eastern_imperial_only_religion_trigger = yes
						}
						
						ROOT = {
							create_character = {
								age = 30
								dynasty = actually_culture
								religion = event_target:chinese_character_origin
								culture = event_target:chinese_character_origin
								female = yes
								health = 6
								random_traits = no
								attributes = {
									martial = 5
									diplomacy = 2
									stewardship = 6
									intrigue = 3
									learning = 3
								}
							}
							
							chinese_master_engineer_setup_effect = yes
						}
					}
					
					else = {
						ROOT = {
							create_character = {
								age = 30
								dynasty = actually_culture
								religion = confucian
								culture = han
								female = yes
								health = 6
								random_traits = no
								attributes = {
									martial = 5
									diplomacy = 2
									stewardship = 6
									intrigue = 3
									learning = 3
								}
							}
							
							chinese_master_engineer_setup_effect = yes
						}
					}
					
					chinese_master_engineer_setup_effect = yes
				}
				
				50 = { # Male
					trigger = {
						NOR = {
							has_religion_feature = religion_matriarchal
							has_religion_feature = religion_feature_minangkabau
						}
					}
					
					if = {
						limit = {
							has_chinese_or_historical_culture_for_chinese_imperial_trigger = yes
							can_have_confucian_bureaucracy_and_eastern_imperial_only_religion_trigger = yes
						}
						
						ROOT = {
							create_character = {
								age = 30
								dynasty = actually_culture
								religion = event_target:chinese_character_origin
								culture = event_target:chinese_character_origin
								female = no
								health = 6
								random_traits = no
								attributes = {
									martial = 5
									diplomacy = 2
									stewardship = 6
									intrigue = 3
									learning = 3
								}
							}
							
							chinese_master_engineer_setup_effect = yes
						}
					}
					
					else = {
						ROOT = {
							create_character = {
								age = 30
								dynasty = actually_culture
								religion = confucian
								culture = han
								female = no
								health = 6
								random_traits = no
								attributes = {
									martial = 5
									diplomacy = 2
									stewardship = 6
									intrigue = 3
									learning = 3
								}
							}
							
							chinese_master_engineer_setup_effect = yes
						}
					}
				}
			}
		}
	}
}

chinese_master_engineer_setup_effect = {
	new_character = {
		#Education & other basic stuff
		save_event_target_as = chinese_master_engineer
		
		add_character_modifier = {
			name = jd_master_engineer
			duration = -1
		}
		
		set_character_flag = master_engineer_just_spawned
		
		set_character_flag = ai_flag_refuse_concubinage
		set_character_flag = ai_flag_refuse_marriage
		set_character_flag = originated_from_chinese_court
		set_character_flag = no_court_invites
		set_character_flag = is_chinese_master_engineer
		
		random_list = {
			30 = { add_trait = thrifty_clerk }
			15 = { add_trait = fortune_builder }
			5 = { add_trait = midas_touched }
			30 = { add_trait = tough_soldier }
			15 = { add_trait = skilled_tactician }
			5 = { add_trait = brilliant_strategist }
		}
		
		random_list = {
			20 = { } #Nothing
			20 = { add_trait = erudite }
			20 = { add_trait = shrewd }
			15 = { add_trait = quick }
			5 = { add_trait = genius }
			10 = { add_trait = brawny }
			5 = { add_trait = strong }
			5 = { add_trait = attractive }
		}
		
		random_list = {
			85 = { } #Nothing
			1 = { add_trait = clubfooted }
			2 = { add_trait = harelip }
			2 = { add_trait = hunchback }
			3 = { add_trait = lisp }
			3 = { add_trait = stutter }
			2 = { 
				add_trait = ugly 
				remove_trait = attractive 
			}
			1 = { add_trait = dwarf }
			1 = { 
				add_trait = weak 
				remove_trait = strong 
				remove_trait = brawny
			}
		}
		
		random = {
			chance = 10
			add_trait = homosexual
		}

		# Add archetype 
		random_list = {
			# Conservative
			25 = {
				set_character_flag = archetype_conservative
				
				if = {
					limit = { has_dlc = "Way of Life" }
					random_list = {
						75 = { add_trait = architect }
						25 = { add_trait = theologian }
					}
				}
				
				random = {
					chance = 50
					add_trait = zealous
				}
				
				add_trait = stubborn
				add_trait = temperate
				
				random_list = {
					20 = { add_trait = greedy }
					20 = { add_trait = wroth }
					20 = { add_trait = deceitful }
					20 = { add_trait = shy }
					20 = { add_trait = cruel }
				}
				
				random_list = {
					25 = { add_trait = poet }
					25 = { add_trait = chaste }
					25 = { 
						add_trait = patient
						remove_trait = wroth
					}
					25 = { add_trait = just }
				}
			}
			
			# Supportive
			25 = {
				set_character_flag = archetype_supportive
				
				if = {
					limit = { has_dlc = "Way of Life" }
					random_list = {
						50 = { add_trait = architect }
						25 = { add_trait = socializer }
						25 = { add_trait = gardener }
					}
				}
				
				add_trait = humble
				add_trait = patient
				
				random_list = {
					33 = { add_trait = slothful }
					33 = { add_trait = craven }
					33 = { add_trait = shy }
				}
				
				random_list = {
					25 = { add_trait = content }
					25 = { add_trait = charitable }
					25 = { add_trait = kind }
					25 = { add_trait = trusting }
				}  
			}
			
			# Decisive
			25 = {
				set_character_flag = archetype_decisive
				if = {
					limit = { has_dlc = "Way of Life" }
					random_list = {
						50 = { add_trait = architect }
						50 = { add_trait = strategist }
					}
				}
				
				add_trait = ambitious
				add_trait = cynical
				
				random_list = {
					20 = { add_trait = cruel }
					20 = { add_trait = stubborn }
					20 = { add_trait = greedy }
					20 = { add_trait = wroth }
					20 = { add_trait = proud }
				}
				
				random_list = {
					20 = { add_trait = falconer }
					20 = { add_trait = diligent }
					20 = { add_trait = brave }
					20 = { add_trait = honest }
					20 = { add_trait = gregarious }
				}
			}
			
			# Sociable
			25 = {
				set_character_flag = archetype_sociable
				
				if = {
					limit = { has_dlc = "Way of Life" }
					random_list = {
						25 = { add_trait = architect }
						30 = { add_trait = socializer }
						25 = { add_trait = hedonist}
						20 = {
							trigger = { is_female = yes }
							add_trait = master_seductress
							add_trait = lustful
						}
						20 = {
							trigger = { is_female = no }
							add_trait = master_seducer
							add_trait = lustful
						}
					}
				}
				
				add_trait = gregarious
				add_trait = charitable
				
				random_list = {
					25 = { add_trait = craven }
					25 = { add_trait = envious }
					25 = { add_trait = gluttonous }
					25 = { add_trait = proud }
				}
				
				random_list = {
					25 = { add_trait = poet }
					25 = { add_trait = kind }
					25 = { add_trait = honest }
					25 = { add_trait = lustful }
				}
			}
		}
	}
	
	new_character = {
		random_list = {
			50 = {}
			25 = {
				religion = confucian
			}
			20 = {
				religion = taoist
			}
			4 = {
				religion = buddhist
			}
			1 = {
				religion = nestorian
			}
		}
		
		save_event_target_as = new_master_engineer
	}
}

create_chinese_physician_effect = {
	hidden_tooltip = {
		event_target:chinese_character_origin = {
			random_list = {
				50 = { # Female
					trigger = {
						OR = {
							gender_equality_trigger = yes
							has_religion_feature = religion_matriarchal
							has_religion_feature = religion_feature_minangkabau
						}
					}
					
					if = {
						limit = {
							has_chinese_or_historical_culture_for_chinese_imperial_trigger = yes
							can_have_confucian_bureaucracy_and_eastern_imperial_only_religion_trigger = yes
						}
						
						ROOT = {
							create_character = {
								age = 35
								dynasty = actually_culture
								religion = event_target:chinese_character_origin
								culture = event_target:chinese_character_origin
								female = yes
								health = 6
								random_traits = no
								attributes = {
									martial = 2
									diplomacy = 5
									stewardship = 3
									intrigue = 3
									learning = 6
								}
							}
							
							chinese_physician_setup_effect = yes
						}
					}
					
					else = {
						ROOT = {
							create_character = {
								age = 35
								dynasty = actually_culture
								religion = confucian
								culture = han
								female = yes
								health = 6
								random_traits = no
								attributes = {
									martial = 2
									diplomacy = 5
									stewardship = 3
									intrigue = 3
									learning = 6
								}
							}
							
							chinese_physician_setup_effect = yes
						}
					}
				}
				
				50 = { # Male
					trigger = {
						NOR = {
							has_religion_feature = religion_matriarchal
							has_religion_feature = religion_feature_minangkabau
						}
					}
								
					if = {
						limit = {
							has_chinese_or_historical_culture_for_chinese_imperial_trigger = yes
							can_have_confucian_bureaucracy_and_eastern_imperial_only_religion_trigger = yes
						}
						
						ROOT = {
							create_character = {
								age = 35
								dynasty = actually_culture
								religion = event_target:chinese_character_origin
								culture = event_target:chinese_character_origin
								female = no
								health = 6
								random_traits = no
								attributes = {
									martial = 2
									diplomacy = 5
									stewardship = 3
									intrigue = 3
									learning = 6
								}
							}
							
							chinese_physician_setup_effect = yes
						}
					}
					
					else = {
						ROOT = {
							create_character = {
								age = 35
								dynasty = actually_culture
								religion = confucian
								culture = han
								female = no
								health = 6
								random_traits = no
								attributes = {
									martial = 2
									diplomacy = 5
									stewardship = 3
									intrigue = 3
									learning = 6
								}
							}
							
							chinese_physician_setup_effect = yes
						}
					}
				}
			}
		}
	}
}

chinese_physician_setup_effect = {
	new_character = {
		#Education & other basic stuff
		set_character_flag = ai_flag_refuse_concubinage
		set_character_flag = ai_flag_refuse_marriage
		set_character_flag = originated_from_chinese_court
		set_character_flag = no_court_invites
		set_character_flag = is_chinese_physician
		
		random_list = {
			50 = { add_trait = scholarly_theologian }
			25 = { add_trait = mastermind_theologian }
		}
		
		add_trait = physician
		
		random_list = {
			20 = { } #Nothing
			30 = { add_trait = erudite }
			30 = { add_trait = shrewd }
			15 = { add_trait = quick }
			5 = { add_trait = genius }
		}
		
		random_list = {
			80 = { } #Nothing
			2 = { add_trait = clubfooted }
			2 = { add_trait = harelip }
			2 = { add_trait = hunchback }
			4 = { add_trait = lisp }
			4 = { add_trait = stutter }
			2 = { add_trait = ugly }
			2 = { add_trait = dwarf }
			2 = { add_trait = weak }
		}
		
		random_list = {
			50 = { } #Nothing
			25 = { add_trait = patient }
			25 = { add_trait = diligent }
		}
		
		random = {
			chance = 10
			add_trait = homosexual
		}
		
		random_list = {
			50 = {}
			25 = {
				religion = confucian
			}
			20 = {
				religion = taoist
			}
			4 = {
				religion = buddhist
			}
			1 = {
				religion = nestorian
			}
		}

		# Add archetype 
		random_list = {
			20 = { #C ombat medic
				set_character_flag = archetype_decisive
				
				random_list = {
					50 = { add_trait = duelist }
					50 = { add_trait = scholar }
				}
				
				add_trait = scarred
				add_trait = brawny
				
				random_list = {
					60 = { } #Nothing
					20 = { 
						trigger = { has_dlc = Reapers }
						add_trait = one_legged 
					}
					20 = { 
						trigger = { has_dlc = Reapers }
						add_trait = one_eyed 
					}
				}
				
				add_trait = brave
				
				random_list = {
					30 = { } #Nothing
					50 = { add_trait = cynical }
					10 = {
						add_trait = cynical
						add_trait = depressed
					}
					10 = {
						add_trait = cynical
						add_trait = depressed
						add_trait = drunkard
					}
				}
				
				random_list = {
					50 = { } #Nothing
					20 = { add_trait = kind }
					30 = { add_trait = honest }
				}
				
				remove_trait = dwarf
				remove_trait = weak
			}
			
			# Dr Jerk
			15 = { 
				set_character_flag = archetype_decisive
				
				add_trait = scholar
				add_trait = wroth
				remove_trait = patient
				
				random_list = {
					30 = { add_trait = proud }
					30 = { add_trait = envious }
					40 = { } #Nothing
				}
				
				add_trait = honest
				add_trait = cynical
				
				random = {
					chance = 30
					add_trait = drunkard
				}
				
				random_list = {
					60 = { }
					20 = { 
						add_trait = clubfooted
						set_name = Wu #House
					}
					20 = {
						trigger = { has_dlc = Reapers }
						add_trait = one_legged
						set_name = Wu #House
					}
				}
			}
			
			10 = { # Mad genius 
				set_character_flag = archetype_sociable
				
				random_list = {
					50 = { add_trait = impaler }
					50 = { add_trait = mystic }
				}
				
				random_list = {
					33 = { add_trait = drunkard } 
					33 = { add_trait = lunatic }
					33 = { add_trait = possessed }
				}
				
				add_trait = genius
				remove_trait = quick
				remove_trait = shrewd
				add_trait = paranoid
				
				random_list = {
					25 = { add_trait = gluttonous } 
					25 = { add_trait = wroth }
					25 = { add_trait = proud }
					25 = { add_trait = greedy }
				}   
			}
			
			20 = { # Herbalist
				set_character_flag = archetype_supportive
				
				add_trait = gardener
				add_trait = diligent
				add_trait = humble
				
				random_list = {
					33 = { add_trait = content } 
					33 = { add_trait = shy }
					33 = { add_trait = poet }
				}
				
				random = {
					chance = 50
					add_trait = brawny
				}
				
				remove_trait = weak
			}
			
			20 = { # Health nut
				set_character_flag = archetype_conservative
				
				add_trait = mystic
				add_trait = celibate
				add_trait = chaste
				add_trait = temperate
				
				random_list = {
					50 = { add_trait = craven } 
					25 = { add_trait = shy }
					25 = { add_trait = content }
				}
				
				set_focus = focus_scholarship
			}
			
			20 = { # Compassionate doctor
				set_character_flag = archetype_supportive
				
				random_list = {
					50 = { add_trait = socializer }
					50 = { add_trait = scholar }
				}
				
				add_trait = kind
				add_trait = patient
				
				random_list = {
					25 = { add_trait = content } 
					25 = { add_trait = humble }
					25 = { add_trait = trusting }
					25 = { add_trait = charitable }
				}
				
				set_focus = focus_family
			}
			
			15 = { # McDreamy
				set_character_flag = archetype_sociable
				
				if = {
					limit = { is_female = yes }
					add_trait = master_seductress
				}
				
				if = {
					limit = { is_female = no }
					add_trait = master_seducer
				}
				
				random_list = {
					50 = { } #Nothing
					25 = { add_trait = poet }
					25 = { add_trait = falconer }
				}
				
				random_list = {
					30 = { add_trait = attractive }
					50 = { add_trait = strong }
				}
				
				add_trait = lustful
				
				random_list = {
					35 = { add_trait = ambitious }
					35 = { add_trait = gregarious }
					30 = { } #Nothing
				}
				
				set_focus = focus_seduction
				
				remove_trait = clubfooted
				remove_trait = harelip
				remove_trait =  hunchback 
				remove_trait = lisp
				remove_trait = stutter
				remove_trait = ugly
				remove_trait = dwarf
				remove_trait = weak
			}
		}
		
		save_event_target_as = new_chinese_doctor
	}
}

create_chinese_courtesan_effect = {
	hidden_tooltip = {
		if = {
			limit = {
				has_chinese_or_historical_culture_for_chinese_imperial_trigger = yes
				can_have_confucian_bureaucracy_and_eastern_imperial_only_religion_trigger = yes
			}
			
			random_list = {
				# Base randomization
				25 = {
					create_random_diplomat = {
						age = 25
						dynasty = actually_culture
						religion = ROOT
						culture = ROOT
						female = yes
						health = 7
						random_traits = no
						attributes = {
							martial = 1
							diplomacy = 4
							stewardship = 2
							intrigue = 3
							learning = 2
						}
					}
				}
				
				50 = {
					create_random_intriguer = {
						age = 25
						dynasty = actually_culture
						religion = ROOT
						culture = ROOT
						female = yes
						health = 7
						random_traits = no
						attributes = {
							martial = 1
							diplomacy = 3
							stewardship = 2
							intrigue = 4
							learning = 2
						}
					}
				}
				
				25 = {
					create_random_steward = {
						age = 25
						dynasty = actually_culture
						religion = ROOT
						culture = ROOT
						female = yes
						health = 7
						random_traits = no
						attributes = {
							martial = 1
							diplomacy = 2
							stewardship = 4
							intrigue = 2
							learning = 3
						}
					}
				}
			}
		}
		
		else = {
			random_list = {
				# Base randomization
				25 = {
					create_random_diplomat = {
						age = 25
						dynasty = actually_culture
						religion = confucian
						culture = han
						female = yes
						health = 7
						random_traits = no
						attributes = {
							martial = 1
							diplomacy = 4
							stewardship = 2
							intrigue = 3
							learning = 2
						}
					}
				}
				
				50 = {
					create_random_intriguer = {
						age = 25
						dynasty = actually_culture
						religion = confucian
						culture = han
						female = yes
						health = 7
						random_traits = no
						attributes = {
							martial = 1
							diplomacy = 3
							stewardship = 2
							intrigue = 4
							learning = 2
						}
					}
				}
				
				25 = {
					create_random_steward = {
						age = 25
						dynasty = actually_culture
						religion = confucian
						culture = han
						female = yes
						health = 7
						random_traits = no
						attributes = {
							martial = 1
							diplomacy = 2
							stewardship = 4
							intrigue = 2
							learning = 3
						}
					}
				}
			}
		}
		
		new_character = {
			# Age randomization
			random_list = {
				1 = {
					add_age = 10
				}
				2 = {
					add_age = 9
				}
				3 = {
					add_age = 8
				}
				4 = {
					add_age = 7
				}
				5 = {
					add_age = 6
				}
				6 = {
					add_age = 5
				}
				7 = {
					add_age = 3
				}
				8 = {
					add_age = 2
				}
				9 = {
					add_age = 1
				}
				10 = {}
				2 = {
					add_age = -9
				}
				3 = {
					add_age = -8
				}
				4 = {
					add_age = -7
				}
				5 = {
					add_age = -6
				}
				6 = {
					add_age = -5
				}
				7 = {
					add_age = -3
				}
				8 = {
					add_age = -2
				}
				9 = {
					add_age = -1
				}
			}
			
			# Religion randomization
			random_list = {
				50 = {}
				25 = {
					religion = confucian
				}
				20 = {
					religion = taoist
				}
				4 = {
					religion = buddhist
				}
				1 = {
					religion = nestorian
				}
			}
			
			# Courtesans are not ugly, but are not certain to be attractive
			random_list = {
				10 = {
					add_trait = attractive
				}
				5 = {
					add_trait = attractive
					add_trait = groomed
				}
				85 = {
					add_trait = groomed
				}
			}
			
			# Lifestyle trait
			random_list = {
				25 = {
					add_trait = master_seductress
				}
				25 = {
					add_trait = hedonist
				}
				25 = {
					add_trait = socializer
				}
				25 = {
					add_trait = master_schemer
				}
			}
			
			# Somewhat likely to be Lustful
			random = {
				chance = 50
				add_trait = lustful
			}
			
			# Genetic traits
			random_list = {
				80 = {}
				1 = {
					add_trait = genius
				}
				2 = {
					add_trait = quick
				}
				2 = {
					add_trait = slow
				}
				1 = {
					add_trait = imbecile
				}
				5 = {
					add_trait = lefthanded
				}
				1 = {
					add_trait = strong
				}
				1 = {
					add_trait = giant
				}
				2 = {
					add_trait = lisp
				}
				2 = {
					add_trait = stutter
				}
			}
			
			# Non-genetic traits
			random_list = {
				50 = {}
				2 = {
					add_trait = brawny
				}
				2 = {
					add_trait = sturdy
				}
				2 = {
					add_trait = frail
				}
				5 = {
					add_trait = shrewd
				}
				5 = {
					add_trait = dull
				}
			}
			
			# One random trait
			random_list = {
				2 = {
					add_trait = poet
				}
				5 = {
					add_trait = temperate
				}
				1 = {
					add_trait = charitable
				}
				2 = {
					add_trait = diligent
				}
				2 = {
					add_trait = patient
				}
				2 = {
					add_trait = kind
				}
				5 = {
					add_trait = humble
				}
				2 = {
					add_trait = gluttonous
				}
				5 = {
					add_trait = greedy
				}
				2 = {
					add_trait = slothful
				}
				2 = {
					add_trait = wroth
				}
				5 = {
					add_trait = envious
				}
				2 = {
					add_trait = proud
				}
				5 = {
					add_trait = ambitious
				}
				5 = {
					add_trait = arbitrary
				}
				2 = {
					add_trait = brave
				}
				1 = {
					add_trait = content
				}
				2 = {
					add_trait = craven
				}
				2 = {
					add_trait = cruel
				}
				5 = {
					add_trait = cynical
				}
				5 = {
					add_trait = deceitful
				}
				2 = {
					add_trait = erudite
				}
				5 = {
					add_trait = gregarious
				}
				1 = {
					add_trait = honest
				}
				1 = {
					add_trait = just
				}
				5 = {
					add_trait = paranoid
				}
				5 = {
					add_trait = shy
				}
				1 = {
					add_trait = stubborn
				}
				1 = {
					add_trait = trusting
				}
				1 = {
					add_trait = zealous
				}
			}
			
			# Another random trait
			random_list = {
				2 = {
					add_trait = poet
				}
				5 = {
					add_trait = temperate
				}
				1 = {
					add_trait = charitable
				}
				2 = {
					add_trait = diligent
				}
				2 = {
					add_trait = patient
				}
				2 = {
					add_trait = kind
				}
				5 = {
					add_trait = humble
				}
				2 = {
					add_trait = gluttonous
				}
				5 = {
					add_trait = greedy
				}
				2 = {
					add_trait = slothful
				}
				2 = {
					add_trait = wroth
				}
				5 = {
					add_trait = envious
				}
				2 = {
					add_trait = proud
				}
				5 = {
					add_trait = ambitious
				}
				5 = {
					add_trait = arbitrary
				}
				2 = {
					add_trait = brave
				}
				1 = {
					add_trait = content
				}
				2 = {
					add_trait = craven
				}
				2 = {
					add_trait = cruel
				}
				5 = {
					add_trait = cynical
				}
				5 = {
					add_trait = deceitful
				}
				2 = {
					add_trait = erudite
				}
				5 = {
					add_trait = gregarious
				}
				1 = {
					add_trait = honest
				}
				1 = {
					add_trait = just
				}
				5 = {
					add_trait = paranoid
				}
				5 = {
					add_trait = shy
				}
				1 = {
					add_trait = stubborn
				}
				1 = {
					add_trait = trusting
				}
				1 = {
					add_trait = zealous
				}
			}
			
			# Smaller chance of a third random trait
			random = {
				chance = 50
				random_list = {
					2 = {
						add_trait = poet
					}
					5 = {
						add_trait = temperate
					}
					1 = {
						add_trait = charitable
					}
					2 = {
						add_trait = diligent
					}
					2 = {
						add_trait = patient
					}
					2 = {
						add_trait = kind
					}
					5 = {
						add_trait = humble
					}
					2 = {
						add_trait = gluttonous
					}
					5 = {
						add_trait = greedy
					}
					2 = {
						add_trait = slothful
					}
					2 = {
						add_trait = wroth
					}
					5 = {
						add_trait = envious
					}
					2 = {
						add_trait = proud
					}
					5 = {
						add_trait = ambitious
					}
					5 = {
						add_trait = arbitrary
					}
					2 = {
						add_trait = brave
					}
					1 = {
						add_trait = content
					}
					2 = {
						add_trait = craven
					}
					2 = {
						add_trait = cruel
					}
					5 = {
						add_trait = cynical
					}
					5 = {
						add_trait = deceitful
					}
					2 = {
						add_trait = erudite
					}
					5 = {
						add_trait = gregarious
					}
					1 = {
						add_trait = honest
					}
					1 = {
						add_trait = just
					}
					5 = {
						add_trait = paranoid
					}
					5 = {
						add_trait = shy
					}
					1 = {
						add_trait = stubborn
					}
					1 = {
						add_trait = trusting
					}
					1 = {
						add_trait = zealous
					}
				}
			}
			
			# Very small chance of a fourth (or third) random trait
			random = {
				chance = 10
				random_list = {
					2 = {
						add_trait = poet
					}
					5 = {
						add_trait = temperate
					}
					1 = {
						add_trait = charitable
					}
					2 = {
						add_trait = diligent
					}
					2 = {
						add_trait = patient
					}
					2 = {
						add_trait = kind
					}
					5 = {
						add_trait = humble
					}
					2 = {
						add_trait = gluttonous
					}
					5 = {
						add_trait = greedy
					}
					2 = {
						add_trait = slothful
					}
					2 = {
						add_trait = wroth
					}
					5 = {
						add_trait = envious
					}
					2 = {
						add_trait = proud
					}
					5 = {
						add_trait = ambitious
					}
					5 = {
						add_trait = arbitrary
					}
					2 = {
						add_trait = brave
					}
					1 = {
						add_trait = content
					}
					2 = {
						add_trait = craven
					}
					2 = {
						add_trait = cruel
					}
					5 = {
						add_trait = cynical
					}
					5 = {
						add_trait = deceitful
					}
					2 = {
						add_trait = erudite
					}
					5 = {
						add_trait = gregarious
					}
					1 = {
						add_trait = honest
					}
					1 = {
						add_trait = just
					}
					5 = {
						add_trait = paranoid
					}
					5 = {
						add_trait = shy
					}
					1 = {
						add_trait = stubborn
					}
					1 = {
						add_trait = trusting
					}
					1 = {
						add_trait = zealous
					}
				}
			}
			
			# Sexuality
			random = {
				chance = 10
				add_trait = homosexual
			}
			
			# Courtesans have certain occupational hazards...
			random_list = {
				95 = {}
				5 = {
					add_trait = lovers_pox
				}
			}
			
			# Save the event target
			save_event_target_as = not_a_dragon_bride
			set_character_flag = chinese_courtesan
		}
		
		# Low chance of something unexpected
		if = {
			limit = {
				event_target:not_a_dragon_bride = {
					age >= 17
					NOT = {
						trait = homosexual
					}
				}
			}
			
			random = {
				chance = 1
				random_list = {
					90 = {
						e_china = {
							holder_scope = {
								random_realm_province = {
									save_event_target_as = bastard_origin
								}
							}
						}
					}
					10 = {
						random_independent_ruler = {
							random_realm_province = {
								save_event_target_as = bastard_origin
							}
						}
					}
				}
				
				create_character = {
					age = 0
					female = 50
					dynasty = event_target:not_a_dragon_bride
					culture = event_target:bastard_origin
					religion = event_target:not_a_dragon_bride
					random_traits = no
					add_trait = bastard
				}
				
				new_character = {
					culture = event_target:not_a_dragon_bride
					save_event_target_as = bastard_1
					random_list = {
						1 = {}
						1 = {
							trigger = {
								event_target:not_a_dragon_bride = {
									age >= 18
								}
							}
							
							add_age = 1
						}
						1 = {
							trigger = {
								event_target:not_a_dragon_bride = {
									age >= 19
								}
							}
							
							add_age = 2
						}
						1 = {
							trigger = {
								event_target:not_a_dragon_bride = {
									age >= 20
								}
							}
							
							add_age = 3
						}
						1 = {
							trigger = {
								event_target:not_a_dragon_bride = {
									age >= 21
								}
							}
							
							add_age = 4
						}
						1 = {
							trigger = {
								event_target:not_a_dragon_bride = {
									age >= 22
								}
							}
							
							add_age = 5
						}
						1 = {
							trigger = {
								event_target:not_a_dragon_bride = {
									age >= 23
								}
							}
							
							add_age = 6
						}
						1 = {
							trigger = {
								event_target:not_a_dragon_bride = {
									age >= 24
								}
							}
							
							add_age = 7
						}
					}
				}
			}
			
			if = {
				limit = {
					event_target:not_a_dragon_bride = {
						age >= 25
					}
				}
				
				random = {
					chance = 1
					e_china = {
						holder_scope = {
							random_realm_province = {
								save_event_target_as = bastard_origin
							}
						}
					}
					
					create_character = {
						age = 8
						female = 50
						dynasty = event_target:not_a_dragon_bride
						culture = event_target:bastard_origin
						religion = event_target:not_a_dragon_bride
						random_traits = no
						add_trait = bastard
					}
					
					new_character = {
						culture = event_target:not_a_dragon_bride
						save_event_target_as = bastard_2
						random_list = {
							1 = {}
							1 = {
								trigger = {
									event_target:not_a_dragon_bride = {
										age >= 26
									}
								}
								
								add_age = 1
							}
							1 = {
								trigger = {
									event_target:not_a_dragon_bride = {
										age >= 27
									}
								}
								
								add_age = 2
							}
							1 = {
								trigger = {
									event_target:not_a_dragon_bride = {
										age >= 28
									}
								}
								
								add_age = 3
							}
							1 = {
								trigger = {
									event_target:not_a_dragon_bride = {
										age >= 29
									}
								}
								add_age = 4
							}
							1 = {
								trigger = {
									event_target:not_a_dragon_bride = {
										age >= 30
									}
								}
								
								add_age = 5
							}
							1 = {
								trigger = {
									event_target:not_a_dragon_bride = {
										age >= 31
									}
								}
								
								add_age = 6
							}
							1 = {
								trigger = {
									event_target:not_a_dragon_bride = {
										age >= 32
									}
								}
								
								add_age = 7
							}
						}
					}
				}
			}
		}
		
		if = {
			limit = {
				NOT = {
					trait = homosexual
				}
			}
			
			random = {
				chance = 5
				
				event_target:not_a_dragon_bride = {
					impregnate = 0
				}
			}
		}
	}
}

create_chinese_beauty_effect = {
	hidden_tooltip = {
		if = {
			limit = {
				has_chinese_or_historical_culture_for_chinese_imperial_trigger = yes
				can_have_confucian_bureaucracy_and_eastern_imperial_only_religion_trigger = yes
			}
			
			random_list = {
				# Base randomization
				50 = {
					create_random_diplomat = {
						age = 25
						dynasty = actually_culture
						religion = ROOT
						culture = ROOT
						female = yes
						health = 7
						random_traits = no
						attributes = {
							martial = 1
							diplomacy = 5
							stewardship = 1
							intrigue = 3
							learning = 1
						}
					}
				}
				
				25 = {
					create_random_intriguer = {
						age = 25
						dynasty = actually_culture
						religion = ROOT
						culture = ROOT
						female = yes
						health = 7
						random_traits = no
						attributes = {
							martial = 1
							diplomacy = 3
							stewardship = 1
							intrigue = 2
							learning = 1
						}
					}
				}
				
				25 = {
					create_random_priest = {
						age = 25
						dynasty = actually_culture
						religion = ROOT
						culture = ROOT
						female = yes
						health = 7
						random_traits = no
						attributes = {
							martial = 1
							diplomacy = 2
							stewardship = 2
							intrigue = 2
							learning = 4
						}
					}
				}
			}
		}
		
		else = {
			random_list = {
				# Base randomization
				50 = {
					create_random_diplomat = {
						age = 25
						dynasty = actually_culture
						religion = confucian
						culture = han
						female = yes
						health = 7
						random_traits = no
						attributes = {
							martial = 1
							diplomacy = 5
							stewardship = 1
							intrigue = 3
							learning = 1
						}
					}
				}
				
				25 = {
					create_random_intriguer = {
						age = 25
						dynasty = actually_culture
						religion = confucian
						culture = han
						female = yes
						health = 7
						random_traits = no
						attributes = {
							martial = 1
							diplomacy = 3
							stewardship = 1
							intrigue = 5
							learning = 1
						}
					}
				}
				
				25 = {
					create_random_priest = {
						age = 25
						dynasty = actually_culture
						religion = confucian
						culture = han
						female = yes
						health = 7
						random_traits = no
						attributes = {
							martial = 1
							diplomacy = 2
							stewardship = 2
							intrigue = 2
							learning = 4
						}
					}
				}
			}
		}
		new_character = {
			# Age randomization
			random_list = {
				1 = {
					add_age = 10
				}
				2 = {
					add_age = 9
				}
				3 = {
					add_age = 8
				}
				4 = {
					add_age = 7
				}
				5 = {
					add_age = 6
				}
				6 = {
					add_age = 5
				}
				7 = {
					add_age = 3
				}
				8 = {
					add_age = 2
				}
				9 = {
					add_age = 1
				}
				10 = {}
				2 = {
					add_age = -9
				}
				3 = {
					add_age = -8
				}
				4 = {
					add_age = -7
				}
				5 = {
					add_age = -6
				}
				6 = {
					add_age = -5
				}
				7 = {
					add_age = -3
				}
				8 = {
					add_age = -2
				}
				9 = {
					add_age = -1
				}
			}
			
			# Religion randomization
			random_list = {
				50 = {}
				25 = {
					religion = confucian
				}
				20 = {
					religion = taoist
				}
				4 = {
					religion = buddhist
				}
				1 = {
					religion = nestorian
				}
			}
			
			# Beauties are not ugly
			random_list = {
				80 = {
					add_trait = attractive
				}
				10 = {
					add_trait = attractive
					add_trait = groomed
				}
				10 = {
					add_trait = attractive
					add_trait = uncouth
				}
			}
			
			# Lifestyle trait
			random_list = {
				25 = {}
				25 = {
					add_trait = socializer
				}
				25 = {
					add_trait = master_seductress
				}
				25 = {
					add_trait = master_schemer
				}
			}
			
			# Genetic traits - skews negative to balance against Attractive
			random_list = {
				80 = {}
				1 = {
					add_trait = genius
				}
				2 = {
					add_trait = quick
				}
				5 = {
					add_trait = slow
				}
				10 = {
					add_trait = imbecile
				}
				5 = {
					add_trait = lefthanded
				}
				1 = {
					add_trait = strong
				}
				1 = {
					add_trait = giant
				}
				2 = {
					add_trait = lisp
				}
				2 = {
					add_trait = stutter
				}
			}
			
			# Non-genetic traits
			random_list = {
				50 = {}
				2 = {
					add_trait = brawny
				}
				2 = {
					add_trait = sturdy
				}
				5 = {
					add_trait = frail
				}
				1 = {
					add_trait = shrewd
				}
				5 = {
					add_trait = dull
				}
			}
			
			# One random trait
			random_list = {
				2 = {
					add_trait = poet
				}
				5 = {
					add_trait = chaste
				}
				5 = {
					add_trait = temperate
				}
				2 = {
					add_trait = charitable
				}
				1 = {
					add_trait = diligent
				}
				2 = {
					add_trait = patient
				}
				1 = {
					add_trait = kind
				}
				1 = {
					add_trait = humble
				}
				5 = {
					add_trait = lustful
				}
				1 = {
					add_trait = gluttonous
				}
				2 = {
					add_trait = greedy
				}
				5 = {
					add_trait = slothful
				}
				1 = {
					add_trait = wroth
				}
				5 = {
					add_trait = envious
				}
				5 = {
					add_trait = proud
				}
				2 = {
					add_trait = ambitious
				}
				5 = {
					add_trait = arbitrary
				}
				1 = {
					add_trait = brave
				}
				1 = {
					add_trait = content
				}
				2 = {
					add_trait = craven
				}
				1 = {
					add_trait = cruel
				}
				1 = {
					add_trait = cynical
				}
				1 = {
					add_trait = deceitful
				}
				1 = {
					add_trait = erudite
				}
				2 = {
					add_trait = gregarious
				}
				2 = {
					add_trait = honest
				}
				1 = {
					add_trait = just
				}
				1 = {
					add_trait = paranoid
				}
				1 = {
					add_trait = shy
				}
				2 = {
					add_trait = stubborn
				}
				2 = {
					add_trait = trusting
				}
				1 = {
					add_trait = zealous
				}
			}
			
			# Another random trait
			random_list = {
				2 = {
					add_trait = poet
				}
				5 = {
					add_trait = chaste
				}
				5 = {
					add_trait = temperate
				}
				2 = {
					add_trait = charitable
				}
				1 = {
					add_trait = diligent
				}
				2 = {
					add_trait = patient
				}
				1 = {
					add_trait = kind
				}
				1 = {
					add_trait = humble
				}
				5 = {
					add_trait = lustful
				}
				1 = {
					add_trait = gluttonous
				}
				2 = {
					add_trait = greedy
				}
				5 = {
					add_trait = slothful
				}
				1 = {
					add_trait = wroth
				}
				5 = {
					add_trait = envious
				}
				5 = {
					add_trait = proud
				}
				2 = {
					add_trait = ambitious
				}
				5 = {
					add_trait = arbitrary
				}
				1 = {
					add_trait = brave
				}
				1 = {
					add_trait = content
				}
				2 = {
					add_trait = craven
				}
				1 = {
					add_trait = cruel
				}
				1 = {
					add_trait = cynical
				}
				1 = {
					add_trait = deceitful
				}
				1 = {
					add_trait = erudite
				}
				2 = {
					add_trait = gregarious
				}
				2 = {
					add_trait = honest
				}
				1 = {
					add_trait = just
				}
				1 = {
					add_trait = paranoid
				}
				1 = {
					add_trait = shy
				}
				2 = {
					add_trait = stubborn
				}
				2 = {
					add_trait = trusting
				}
				1 = {
					add_trait = zealous
				}
			}
			
			# Smaller chance of a third random trait
			random = {
				chance = 50
				random_list = {
					2 = {
						add_trait = poet
					}
					5 = {
						add_trait = chaste
					}
					5 = {
						add_trait = temperate
					}
					2 = {
						add_trait = charitable
					}
					1 = {
						add_trait = diligent
					}
					2 = {
						add_trait = patient
					}
					1 = {
						add_trait = kind
					}
					1 = {
						add_trait = humble
					}
					5 = {
						add_trait = lustful
					}
					1 = {
						add_trait = gluttonous
					}
					2 = {
						add_trait = greedy
					}
					5 = {
						add_trait = slothful
					}
					1 = {
						add_trait = wroth
					}
					5 = {
						add_trait = envious
					}
					5 = {
						add_trait = proud
					}
					2 = {
						add_trait = ambitious
					}
					5 = {
						add_trait = arbitrary
					}
					1 = {
						add_trait = brave
					}
					1 = {
						add_trait = content
					}
					2 = {
						add_trait = craven
					}
					1 = {
						add_trait = cruel
					}
					1 = {
						add_trait = cynical
					}
					1 = {
						add_trait = deceitful
					}
					1 = {
						add_trait = erudite
					}
					2 = {
						add_trait = gregarious
					}
					2 = {
						add_trait = honest
					}
					1 = {
						add_trait = just
					}
					1 = {
						add_trait = paranoid
					}
					1 = {
						add_trait = shy
					}
					2 = {
						add_trait = stubborn
					}
					2 = {
						add_trait = trusting
					}
					1 = {
						add_trait = zealous
					}
				}
			}
			
			# Very small chance of a fourth (or third) random trait
			random = {
				chance = 10
				random_list = {
					2 = {
						add_trait = poet
					}
					5 = {
						add_trait = chaste
					}
					5 = {
						add_trait = temperate
					}
					2 = {
						add_trait = charitable
					}
					1 = {
						add_trait = diligent
					}
					2 = {
						add_trait = patient
					}
					1 = {
						add_trait = kind
					}
					1 = {
						add_trait = humble
					}
					5 = {
						add_trait = lustful
					}
					1 = {
						add_trait = gluttonous
					}
					2 = {
						add_trait = greedy
					}
					5 = {
						add_trait = slothful
					}
					1 = {
						add_trait = wroth
					}
					5 = {
						add_trait = envious
					}
					5 = {
						add_trait = proud
					}
					2 = {
						add_trait = ambitious
					}
					5 = {
						add_trait = arbitrary
					}
					1 = {
						add_trait = brave
					}
					1 = {
						add_trait = content
					}
					2 = {
						add_trait = craven
					}
					1 = {
						add_trait = cruel
					}
					1 = {
						add_trait = cynical
					}
					1 = {
						add_trait = deceitful
					}
					1 = {
						add_trait = erudite
					}
					2 = {
						add_trait = gregarious
					}
					2 = {
						add_trait = honest
					}
					1 = {
						add_trait = just
					}
					1 = {
						add_trait = paranoid
					}
					1 = {
						add_trait = shy
					}
					2 = {
						add_trait = stubborn
					}
					2 = {
						add_trait = trusting
					}
					1 = {
						add_trait = zealous
					}
				}
			}
			
			# Sexuality
			random = {
				chance = 10
				add_trait = homosexual
			}
			
			# Save the event target
			save_event_target_as = not_a_dragon_bride
			set_character_flag = chinese_beauty
		}
		
		# Small chance of something unexpected
		if = {
			limit = {
				event_target:not_a_dragon_bride = {
					NOR = {
						trait = chaste
						trait = homosexual
					}
				}
			}
			
			random = {
				chance = 2
				
				event_target:not_a_dragon_bride = {
					impregnate = 0
				}
			}
		}
	}
}

create_chinese_entertainer_effect = {
	hidden_tooltip = {
		if = {
			limit = {
				has_chinese_or_historical_culture_for_chinese_imperial_trigger = yes
				can_have_confucian_bureaucracy_and_eastern_imperial_only_religion_trigger = yes
			}
			
			random_list = {
				# Base randomization
				25 = {
					create_random_diplomat = {
						age = 25
						dynasty = actually_culture
						religion = ROOT
						culture = ROOT
						female = yes
						health = 7
						random_traits = no
						attributes = {
							martial = 2
							diplomacy = 4
							stewardship = 1
							intrigue = 1
							learning = 3
						}
					}
				}
				
				25 = {
					create_random_steward = {
						age = 25
						dynasty = actually_culture
						religion = ROOT
						culture = ROOT
						female = yes
						health = 7
						random_traits = no
						attributes = {
							martial = 2
							diplomacy = 1
							stewardship = 4
							intrigue = 1
							learning = 3
						}
					}
				}
				
				50 = { 
					create_random_priest = {
						age = 25
						dynasty = actually_culture
						religion = ROOT
						culture = ROOT
						female = yes
						health = 7
						random_traits = no
						attributes = {
							martial = 3
							diplomacy = 1
							stewardship = 2
							intrigue = 1
							learning = 4
						}
					}
				}
			}
		}
		
		else = {
			random_list = {
				# Base randomization
				25 = {
					create_random_diplomat = {
						age = 25
						dynasty = actually_culture
						religion = confucian
						culture = han
						female = yes
						health = 7
						random_traits = no
						attributes = {
							martial = 2
							diplomacy = 4
							stewardship = 1
							intrigue = 1
							learning = 3
						}
					}
				}
				
				25 = {
					create_random_steward = {
						age = 25
						dynasty = actually_culture
						religion = confucian
						culture = han
						female = yes
						health = 7
						random_traits = no
						attributes = {
							martial = 2
							diplomacy = 1
							stewardship = 4
							intrigue = 1
							learning = 3
						}
					}
				}
				
				50 = { 
					create_random_priest = {
						age = 25
						dynasty = actually_culture
						religion = confucian
						culture = han
						female = yes
						health = 7
						random_traits = no
						attributes = {
							martial = 3
							diplomacy = 1
							stewardship = 2
							intrigue = 1
							learning = 4
						}
					}
				}
			}
		}
		
		new_character = {
			# Age randomization
			random_list = {
				1 = {
					add_age = 10
				}
				2 = {
					add_age = 9
				}
				3 = {
					add_age = 8
				}
				4 = {
					add_age = 7
				}
				5 = {
					add_age = 6
				}
				6 = {
					add_age = 5
				}
				7 = {
					add_age = 3
				}
				8 = {
					add_age = 2
				}
				9 = {
					add_age = 1
				}
				10 = {}
				2 = {
					add_age = -9
				}
				3 = {
					add_age = -8
				}
				4 = {
					add_age = -7
				}
				5 = {
					add_age = -6
				}
				6 = {
					add_age = -5
				}
				7 = {
					add_age = -3
				}
				8 = {
					add_age = -2
				}
				9 = {
					add_age = -1
				}
			}
			
			# Religion randomization
			random_list = {
				50 = {}
				25 = {
					religion = confucian
				}
				20 = {
					religion = taoist
				}
				4 = {
					religion = buddhist
				}
				1 = {
					religion = nestorian
				}
			}
			
			# Entertainers are not stupid, but are not guaranteed to be smart
			random_list = {
				60 = {}
				20 = {
					add_trait = shrewd
				}
				10 = {
					add_trait = quick
				}
				5 = {
					add_trait = genius
				}
			}
			
			# Lifestyle trait
			random_list = {
				10 = {
					add_trait = administrator
				}
				10 = {
					add_trait = architect
				}
				25 = {
					add_trait = game_master
				}
				10 = {
					add_trait = gardener
				}
				10 = {
					add_trait = master_schemer
				}
				25 = {
					add_trait = mystic
				}
				10 = {
					add_trait = scholar
				}
				5 = {
					add_trait = strategist
				}
				10 = {
					add_trait = socializer
				}
			}
			
			# Genetic traits
			random_list = {
				80 = {}
				2 = {
					add_trait = attractive
				}
				2 = {
					add_trait = strong
				}
				2 = {
					add_trait = clubfooted
				}
				2 = {
					add_trait = dwarf
				}
				2 = {
					add_trait = lisp
				}
				2 = {
					add_trait = stutter
				}
				2 = {
					add_trait = ugly
				}
				2 = {
					add_trait = weak
				}
				2 = {
					add_trait = giant
				}
				2 = {
					add_trait = lefthanded
				}
			}
			
			# Non-genetic traits
			random_list = {
				80 = {}
				5 = {
					add_trait = brawny
				}
				5 = {
					add_trait = sturdy
				}
				5 = {
					add_trait = frail
				}
				5 = {
					add_trait = groomed
				}
				5 = {
					add_trait = uncouth
				}
			}
			
			# Low chance of being maimed
			random_list = {
				5 = {}
				5 = {
					trigger = {
						NOT = {
							has_dlc = "Reapers"
						}
					}
					
					add_trait = maimed
				}
				1 = {
					trigger = {
						has_dlc = "Reapers"
					}
					
					add_trait = disfigured
				}
				1 = {
					trigger = {
						has_dlc = "Reapers"
					}
					
					add_trait = mangled
				}
				1 = {
					trigger = {
						has_dlc = "Reapers"
					}
					
					add_trait = one_eyed
				}
				1 = {
					trigger = {
						has_dlc = "Reapers"
					}
					
					add_trait = one_handed
				}
				1 = {
					trigger = {
						has_dlc = "Reapers"
					}
					
					add_trait = one_legged
				}
				1 = {
					trigger = {
						has_dlc = "Reapers"
					}
					
					add_trait = severely_injured
				}
				1 = {
					add_trait = blinded
				}
				2 = {
					add_trait = wounded
				}
			}
			
			# Likely a poet
			random = {
				chance = 50
				add_trait = poet
			}
			
			# One random trait
			random_list = {
				5 = {
					add_trait = chaste
				}
				5 = {
					add_trait = temperate
				}
				1 = {
					add_trait = charitable
				}
				5 = {
					add_trait = diligent
				}
				5 = {
					add_trait = patient
				}
				1 = {
					add_trait = kind
				}
				2 = {
					add_trait = humble
				}
				2 = {
					add_trait = lustful
				}
				1 = {
					add_trait = gluttonous
				}
				1 = {
					add_trait = greedy
				}
				1 = {
					add_trait = slothful
				}
				1 = {
					add_trait = wroth
				}
				1 = {
					add_trait = envious
				}
				5 = {
					add_trait = proud
				}
				5 = {
					add_trait = ambitious
				}
				1 = {
					add_trait = arbitrary
				}
				1 = {
					add_trait = brave
				}
				5 = {
					add_trait = content
				}
				2 = {
					add_trait = craven
				}
				1 = {
					add_trait = cruel
				}
				2 = {
					add_trait = cynical
				}
				2 = {
					add_trait = deceitful
				}
				5 = {
					add_trait = erudite
				}
				1 = {
					add_trait = gregarious
				}
				2 = {
					add_trait = honest
				}
				2 = {
					add_trait = just
				}
				1 = {
					add_trait = paranoid
				}
				2 = {
					add_trait = shy
				}
				2 = {
					add_trait = stubborn
				}
				2 = {
					add_trait = trusting
				}
				1 = {
					add_trait = zealous
				}
			}
			
			# Another random trait
			random_list = {
				5 = {
					add_trait = chaste
				}
				5 = {
					add_trait = temperate
				}
				1 = {
					add_trait = charitable
				}
				5 = {
					add_trait = diligent
				}
				5 = {
					add_trait = patient
				}
				1 = {
					add_trait = kind
				}
				2 = {
					add_trait = humble
				}
				2 = {
					add_trait = lustful
				}
				1 = {
					add_trait = gluttonous
				}
				1 = {
					add_trait = greedy
				}
				1 = {
					add_trait = slothful
				}
				1 = {
					add_trait = wroth
				}
				1 = {
					add_trait = envious
				}
				5 = {
					add_trait = proud
				}
				5 = {
					add_trait = ambitious
				}
				1 = {
					add_trait = arbitrary
				}
				1 = {
					add_trait = brave
				}
				5 = {
					add_trait = content
				}
				2 = {
					add_trait = craven
				}
				1 = {
					add_trait = cruel
				}
				2 = {
					add_trait = cynical
				}
				2 = {
					add_trait = deceitful
				}
				5 = {
					add_trait = erudite
				}
				1 = {
					add_trait = gregarious
				}
				2 = {
					add_trait = honest
				}
				2 = {
					add_trait = just
				}
				1 = {
					add_trait = paranoid
				}
				2 = {
					add_trait = shy
				}
				2 = {
					add_trait = stubborn
				}
				2 = {
					add_trait = trusting
				}
				1 = {
					add_trait = zealous
				}
			}
			
			# Smaller chance of a third random trait
			random = {
				chance = 50
				random_list = {
					5 = {
						add_trait = chaste
					}
					5 = {
						add_trait = temperate
					}
					1 = {
						add_trait = charitable
					}
					5 = {
						add_trait = diligent
					}
					5 = {
						add_trait = patient
					}
					1 = {
						add_trait = kind
					}
					2 = {
						add_trait = humble
					}
					2 = {
						add_trait = lustful
					}
					1 = {
						add_trait = gluttonous
					}
					1 = {
						add_trait = greedy
					}
					1 = {
						add_trait = slothful
					}
					1 = {
						add_trait = wroth
					}
					1 = {
						add_trait = envious
					}
					5 = {
						add_trait = proud
					}
					5 = {
						add_trait = ambitious
					}
					1 = {
						add_trait = arbitrary
					}
					1 = {
						add_trait = brave
					}
					5 = {
						add_trait = content
					}
					2 = {
						add_trait = craven
					}
					1 = {
						add_trait = cruel
					}
					2 = {
						add_trait = cynical
					}
					2 = {
						add_trait = deceitful
					}
					5 = {
						add_trait = erudite
					}
					1 = {
						add_trait = gregarious
					}
					2 = {
						add_trait = honest
					}
					2 = {
						add_trait = just
					}
					1 = {
						add_trait = paranoid
					}
					2 = {
						add_trait = shy
					}
					2 = {
						add_trait = stubborn
					}
					2 = {
						add_trait = trusting
					}
					1 = {
						add_trait = zealous
					}
				}
			}
			
			# Very small chance of a fourth (or third) random trait
			random = {
				chance = 10
				random_list = {
					5 = {
						add_trait = chaste
					}
					5 = {
						add_trait = temperate
					}
					1 = {
						add_trait = charitable
					}
					5 = {
						add_trait = diligent
					}
					5 = {
						add_trait = patient
					}
					1 = {
						add_trait = kind
					}
					2 = {
						add_trait = humble
					}
					2 = {
						add_trait = lustful
					}
					1 = {
						add_trait = gluttonous
					}
					1 = {
						add_trait = greedy
					}
					1 = {
						add_trait = slothful
					}
					1 = {
						add_trait = wroth
					}
					1 = {
						add_trait = envious
					}
					5 = {
						add_trait = proud
					}
					5 = {
						add_trait = ambitious
					}
					1 = {
						add_trait = arbitrary
					}
					1 = {
						add_trait = brave
					}
					5 = {
						add_trait = content
					}
					2 = {
						add_trait = craven
					}
					1 = {
						add_trait = cruel
					}
					2 = {
						add_trait = cynical
					}
					2 = {
						add_trait = deceitful
					}
					5 = {
						add_trait = erudite
					}
					1 = {
						add_trait = gregarious
					}
					2 = {
						add_trait = honest
					}
					2 = {
						add_trait = just
					}
					1 = {
						add_trait = paranoid
					}
					2 = {
						add_trait = shy
					}
					2 = {
						add_trait = stubborn
					}
					2 = {
						add_trait = trusting
					}
					1 = {
						add_trait = zealous
					}
				}
			}
			
			# Sexuality
			random = {
				chance = 10
				add_trait = homosexual
			}
			# Save the event target
			save_event_target_as = not_a_dragon_bride
			set_character_flag = chinese_entertainer
		}
		
		# Small chance of something unexpected
		if = {
			limit = {
				event_target:not_a_dragon_bride = {
					NOR = {
						trait = chaste
						trait = homosexual
					}
				}
			}
			
			random = {
				chance = 1
				
				event_target:not_a_dragon_bride = {
					impregnate = 0
				}
			}
		}
	}
}

create_chinese_courtesan_no_children_effect = {
	hidden_tooltip = {
		if = {
			limit = {
				has_chinese_or_historical_culture_for_chinese_imperial_trigger = yes
				can_have_confucian_bureaucracy_and_eastern_imperial_only_religion_trigger = yes
			}
			
			random_list = {
				# Base randomization
				25 = {
					create_random_diplomat = {
						age = 25
						dynasty = actually_culture
						religion = ROOT
						culture = ROOT
						female = yes
						health = 7
						random_traits = no
						attributes = {
							martial = 1
							diplomacy = 4
							stewardship = 2
							intrigue = 3
							learning = 2
						}
					}
				}
				
				50 = {
					create_random_intriguer = {
						age = 25
						dynasty = actually_culture
						religion = ROOT
						culture = ROOT
						female = yes
						health = 7
						random_traits = no
						attributes = {
							martial = 1
							diplomacy = 3
							stewardship = 2
							intrigue = 4
							learning = 2
						}
					}
				}
				
				25 = {
					create_random_steward = {
						age = 25
						dynasty = actually_culture
						religion = ROOT
						culture = ROOT
						female = yes
						health = 7
						random_traits = no
						attributes = {
							martial = 1
							diplomacy = 2
							stewardship = 4
							intrigue = 2
							learning = 3
						}
					}
				}
			}
		}
		
		else = {
			random_list = {
				# Base randomization
				25 = {
					create_random_diplomat = {
						age = 25
						dynasty = actually_culture
						religion = confucian
						culture = han
						female = yes
						health = 7
						random_traits = no
						attributes = {
							martial = 1
							diplomacy = 4
							stewardship = 2
							intrigue = 3
							learning = 2
						}
					}
				}
				
				50 = {
					create_random_intriguer = {
						age = 25
						dynasty = actually_culture
						religion = confucian
						culture = han
						female = yes
						health = 7
						random_traits = no
						attributes = {
							martial = 1
							diplomacy = 3
							stewardship = 2
							intrigue = 4
							learning = 2
						}
					}
				}
				
				25 = {
					create_random_steward = {
						age = 25
						dynasty = actually_culture
						religion = confucian
						culture = han
						female = yes
						health = 7
						random_traits = no
						attributes = {
							martial = 1
							diplomacy = 2
							stewardship = 4
							intrigue = 2
							learning = 3
						}
					}
				}
			}
		}
		
		new_character = {
			# Age randomization
			random_list = {
				1 = {
					add_age = 10
				}
				2 = {
					add_age = 9
				}
				3 = {
					add_age = 8
				}
				4 = {
					add_age = 7
				}
				5 = {
					add_age = 6
				}
				6 = {
					add_age = 5
				}
				7 = {
					add_age = 3
				}
				8 = {
					add_age = 2
				}
				9 = {
					add_age = 1
				}
				10 = {}
				2 = {
					add_age = -9
				}
				3 = {
					add_age = -8
				}
				4 = {
					add_age = -7
				}
				5 = {
					add_age = -6
				}
				6 = {
					add_age = -5
				}
				7 = {
					add_age = -3
				}
				8 = {
					add_age = -2
				}
				9 = {
					add_age = -1
				}
			}
			
			# Religion randomization
			random_list = {
				50 = {}
				25 = {
					religion = confucian
				}
				20 = {
					religion = taoist
				}
				4 = {
					religion = buddhist
				}
				1 = {
					religion = nestorian
				}
			}
			
			# Courtesans are not ugly, but are not certain to be attractive
			random_list = {
				10 = {
					add_trait = attractive
				}
				5 = {
					add_trait = attractive
					add_trait = groomed
				}
				85 = {
					add_trait = groomed
				}
			}
			
			# Lifestyle trait
			random_list = {
				25 = {
					add_trait = master_seductress
				}
				25 = {
					add_trait = hedonist
				}
				25 = {
					add_trait = socializer
				}
				25 = {
					add_trait = master_schemer
				}
			}
			
			# Somewhat likely to be Lustful
			random = {
				chance = 50
				add_trait = lustful
			}
			
			# Genetic traits
			random_list = {
				80 = {}
				1 = {
					add_trait = genius
				}
				2 = {
					add_trait = quick
				}
				2 = {
					add_trait = slow
				}
				1 = {
					add_trait = imbecile
				}
				5 = {
					add_trait = lefthanded
				}
				1 = {
					add_trait = strong
				}
				1 = {
					add_trait = giant
				}
				2 = {
					add_trait = lisp
				}
				2 = {
					add_trait = stutter
				}
			}
			
			# Non-genetic traits
			random_list = {
				50 = {}
				2 = {
					add_trait = brawny
				}
				2 = {
					add_trait = sturdy
				}
				2 = {
					add_trait = frail
				}
				5 = {
					add_trait = shrewd
				}
				5 = {
					add_trait = dull
				}
			}
			
			# One random trait
			random_list = {
				2 = {
					add_trait = poet
				}
				5 = {
					add_trait = temperate
				}
				1 = {
					add_trait = charitable
				}
				2 = {
					add_trait = diligent
				}
				2 = {
					add_trait = patient
				}
				2 = {
					add_trait = kind
				}
				5 = {
					add_trait = humble
				}
				2 = {
					add_trait = gluttonous
				}
				5 = {
					add_trait = greedy
				}
				2 = {
					add_trait = slothful
				}
				2 = {
					add_trait = wroth
				}
				5 = {
					add_trait = envious
				}
				2 = {
					add_trait = proud
				}
				5 = {
					add_trait = ambitious
				}
				5 = {
					add_trait = arbitrary
				}
				2 = {
					add_trait = brave
				}
				1 = {
					add_trait = content
				}
				2 = {
					add_trait = craven
				}
				2 = {
					add_trait = cruel
				}
				5 = {
					add_trait = cynical
				}
				5 = {
					add_trait = deceitful
				}
				2 = {
					add_trait = erudite
				}
				5 = {
					add_trait = gregarious
				}
				1 = {
					add_trait = honest
				}
				1 = {
					add_trait = just
				}
				5 = {
					add_trait = paranoid
				}
				5 = {
					add_trait = shy
				}
				1 = {
					add_trait = stubborn
				}
				1 = {
					add_trait = trusting
				}
				1 = {
					add_trait = zealous
				}
			}
			
			# Another random trait
			random_list = {
				2 = {
					add_trait = poet
				}
				5 = {
					add_trait = temperate
				}
				1 = {
					add_trait = charitable
				}
				2 = {
					add_trait = diligent
				}
				2 = {
					add_trait = patient
				}
				2 = {
					add_trait = kind
				}
				5 = {
					add_trait = humble
				}
				2 = {
					add_trait = gluttonous
				}
				5 = {
					add_trait = greedy
				}
				2 = {
					add_trait = slothful
				}
				2 = {
					add_trait = wroth
				}
				5 = {
					add_trait = envious
				}
				2 = {
					add_trait = proud
				}
				5 = {
					add_trait = ambitious
				}
				5 = {
					add_trait = arbitrary
				}
				2 = {
					add_trait = brave
				}
				1 = {
					add_trait = content
				}
				2 = {
					add_trait = craven
				}
				2 = {
					add_trait = cruel
				}
				5 = {
					add_trait = cynical
				}
				5 = {
					add_trait = deceitful
				}
				2 = {
					add_trait = erudite
				}
				5 = {
					add_trait = gregarious
				}
				1 = {
					add_trait = honest
				}
				1 = {
					add_trait = just
				}
				5 = {
					add_trait = paranoid
				}
				5 = {
					add_trait = shy
				}
				1 = {
					add_trait = stubborn
				}
				1 = {
					add_trait = trusting
				}
				1 = {
					add_trait = zealous
				}
			}
			
			# Smaller chance of a third random trait
			random = {
				chance = 50
				random_list = {
					2 = {
						add_trait = poet
					}
					5 = {
						add_trait = temperate
					}
					1 = {
						add_trait = charitable
					}
					2 = {
						add_trait = diligent
					}
					2 = {
						add_trait = patient
					}
					2 = {
						add_trait = kind
					}
					5 = {
						add_trait = humble
					}
					2 = {
						add_trait = gluttonous
					}
					5 = {
						add_trait = greedy
					}
					2 = {
						add_trait = slothful
					}
					2 = {
						add_trait = wroth
					}
					5 = {
						add_trait = envious
					}
					2 = {
						add_trait = proud
					}
					5 = {
						add_trait = ambitious
					}
					5 = {
						add_trait = arbitrary
					}
					2 = {
						add_trait = brave
					}
					1 = {
						add_trait = content
					}
					2 = {
						add_trait = craven
					}
					2 = {
						add_trait = cruel
					}
					5 = {
						add_trait = cynical
					}
					5 = {
						add_trait = deceitful
					}
					2 = {
						add_trait = erudite
					}
					5 = {
						add_trait = gregarious
					}
					1 = {
						add_trait = honest
					}
					1 = {
						add_trait = just
					}
					5 = {
						add_trait = paranoid
					}
					5 = {
						add_trait = shy
					}
					1 = {
						add_trait = stubborn
					}
					1 = {
						add_trait = trusting
					}
					1 = {
						add_trait = zealous
					}
				}
			}
			
			# Very small chance of a fourth (or third) random trait
			random = {
				chance = 10
				random_list = {
					2 = {
						add_trait = poet
					}
					5 = {
						add_trait = temperate
					}
					1 = {
						add_trait = charitable
					}
					2 = {
						add_trait = diligent
					}
					2 = {
						add_trait = patient
					}
					2 = {
						add_trait = kind
					}
					5 = {
						add_trait = humble
					}
					2 = {
						add_trait = gluttonous
					}
					5 = {
						add_trait = greedy
					}
					2 = {
						add_trait = slothful
					}
					2 = {
						add_trait = wroth
					}
					5 = {
						add_trait = envious
					}
					2 = {
						add_trait = proud
					}
					5 = {
						add_trait = ambitious
					}
					5 = {
						add_trait = arbitrary
					}
					2 = {
						add_trait = brave
					}
					1 = {
						add_trait = content
					}
					2 = {
						add_trait = craven
					}
					2 = {
						add_trait = cruel
					}
					5 = {
						add_trait = cynical
					}
					5 = {
						add_trait = deceitful
					}
					2 = {
						add_trait = erudite
					}
					5 = {
						add_trait = gregarious
					}
					1 = {
						add_trait = honest
					}
					1 = {
						add_trait = just
					}
					5 = {
						add_trait = paranoid
					}
					5 = {
						add_trait = shy
					}
					1 = {
						add_trait = stubborn
					}
					1 = {
						add_trait = trusting
					}
					1 = {
						add_trait = zealous
					}
				}
			}
			
			# Sexuality
			random = {
				chance = 10
				add_trait = homosexual
			}
			
			# Courtesans have certain occupational hazards...
			random_list = {
				95 = {}
				5 = {
					add_trait = lovers_pox
				}
			}
			
			# Save the event target
			save_event_target_as = not_a_dragon_bride
			set_character_flag = chinese_courtesan
		}
		
		# Low chance of something unexpected
		if = {
			limit = {
				event_target:not_a_dragon_bride = {
					age >= 17
					NOT = {
						trait = homosexual
					}
				}
			}
			
			random = {
				chance = 1
				random_list = {
					90 = {
						e_china = {
							holder_scope = {
								random_realm_province = {
									save_event_target_as = bastard_origin
								}
							}
						}
					}
					10 = {
						random_independent_ruler = {
							random_realm_province = {
								save_event_target_as = bastard_origin
							}
						}
					}
				}
				
				create_character = {
					age = 0
					female = 50
					dynasty = event_target:not_a_dragon_bride
					culture = event_target:bastard_origin
					religion = event_target:not_a_dragon_bride
					random_traits = no
					add_trait = bastard
				}
				
				new_character = {
					culture = event_target:not_a_dragon_bride
					save_event_target_as = bastard_1
					random_list = {
						1 = {}
						1 = {
							trigger = {
								event_target:not_a_dragon_bride = {
									age >= 18
								}
							}
							
							add_age = 1
						}
						1 = {
							trigger = {
								event_target:not_a_dragon_bride = {
									age >= 19
								}
							}
							
							add_age = 2
						}
						1 = {
							trigger = {
								event_target:not_a_dragon_bride = {
									age >= 20
								}
							}
							
							add_age = 3
						}
						1 = {
							trigger = {
								event_target:not_a_dragon_bride = {
									age >= 21
								}
							}
							
							add_age = 4
						}
						1 = {
							trigger = {
								event_target:not_a_dragon_bride = {
									age >= 22
								}
							}
							
							add_age = 5
						}
						1 = {
							trigger = {
								event_target:not_a_dragon_bride = {
									age >= 23
								}
							}
							
							add_age = 6
						}
						1 = {
							trigger = {
								event_target:not_a_dragon_bride = {
									age >= 24
								}
							}
							
							add_age = 7
						}
					}
				}
			}
			
			if = {
				limit = {
					event_target:not_a_dragon_bride = {
						age >= 25
					}
				}
				
				random = {
					chance = 1
					e_china = {
						holder_scope = {
							random_realm_province = {
								save_event_target_as = bastard_origin
							}
						}
					}
					
					create_character = {
						age = 8
						female = 50
						dynasty = event_target:not_a_dragon_bride
						culture = event_target:bastard_origin
						religion = event_target:not_a_dragon_bride
						random_traits = no
						add_trait = bastard
					}
					
					new_character = {
						culture = event_target:not_a_dragon_bride
						save_event_target_as = bastard_2
						random_list = {
							1 = {}
							1 = {
								trigger = {
									event_target:not_a_dragon_bride = {
										age >= 26
									}
								}
								
								add_age = 1
							}
							1 = {
								trigger = {
									event_target:not_a_dragon_bride = {
										age >= 27
									}
								}
								
								add_age = 2
							}
							1 = {
								trigger = {
									event_target:not_a_dragon_bride = {
										age >= 28
									}
								}
								
								add_age = 3
							}
							1 = {
								trigger = {
									event_target:not_a_dragon_bride = {
										age >= 29
									}
								}
								add_age = 4
							}
							1 = {
								trigger = {
									event_target:not_a_dragon_bride = {
										age >= 30
									}
								}
								
								add_age = 5
							}
							1 = {
								trigger = {
									event_target:not_a_dragon_bride = {
										age >= 31
									}
								}
								
								add_age = 6
							}
							1 = {
								trigger = {
									event_target:not_a_dragon_bride = {
										age >= 32
									}
								}
								
								add_age = 7
							}
						}
					}
				}
			}
		}
		
		if = {
			limit = {
				NOT = {
					trait = homosexual
				}
			}
			
			random = {
				chance = 5
				
				event_target:not_a_dragon_bride = {
					impregnate = 0
				}
			}
		}
	}
}

create_tf_soldier_effect = {
	hidden_tooltip = {
		2753 = { # Hangzhou
			persistent_event_target:treasure_fleet_sender = {
				save_event_target_as = treasure_fleet_sender
			}
		}
		
		random_list = {
			50 = {
				trigger = {
					event_target:treasure_fleet_sender = {
						OR = {
							gender_equality_trigger = yes
							has_religion_feature = religion_matriarchal
							has_religion_feature = religion_feature_minangkabau
						}
					}
				}
				
				create_random_soldier = {
					age = 21
					female = yes
					dynasty = none
					attributes = {
						diplomacy = 2
						martial = 7
						stewardship = 5
						intrigue = 4
						learning = 6
					}
					culture = event_target:tf_character_home_province
					religion = event_target:tf_character_home_province
					random_traits =	yes
				}
			}
			
			50 = {
				trigger = {
					event_target:treasure_fleet_sender = {
						NOR = {
							has_religion_feature = religion_matriarchal
							has_religion_feature = religion_feature_minangkabau
						}
					}
				}
				
				create_random_soldier = {
					age = 21
					female = no
					dynasty = none
					attributes = {
						diplomacy = 2
						martial = 7
						stewardship = 5
						intrigue = 4
						learning = 6
					}
					culture = event_target:tf_character_home_province
					religion = event_target:tf_character_home_province
					random_traits =	yes
				}
			}
		}
		
		new_character = {
			random = {
				chance = 1
				set_character_flag = chinese_warfare
				random_list = {
					1 = {
						add_trait = logistics_expert
					}
					1 = {
						add_trait = master_of_flame
					}
					1 = {
						add_trait = sapper
					}
					1 = {
						add_trait = levy_coordinator
					}
				}
			}
			
			set_character_flag = special_marshal
			save_event_target_as = new_tf_character
		}
	}
}

create_tf_eunuch_effect = { # Eunuch; always male
	hidden_tooltip = {
		random_list = {
			50 = {
				create_random_priest = {
					age = 35
					female = no
					dynasty = none
					attributes = {
						diplomacy = 4
						martial = 2
						stewardship = 5
						intrigue = 4
						learning = 8
					}
					culture = event_target:tf_character_home_province
					religion = event_target:tf_character_home_province
					random_traits =	yes
				}
			}
			
			50 = {
				create_random_steward = {
					age = 35
					female = no
					dynasty = none
					attributes = {
						diplomacy = 3
						martial = 3
						stewardship = 8
						intrigue = 4
						learning = 6
					}
					culture = event_target:tf_character_home_province
					religion = event_target:tf_character_home_province
					random_traits =	yes
				}
			}
			
			50 = {
				create_random_diplomat = {
					age = 35
					female = no
					dynasty = none
					attributes = {
						diplomacy = 8
						martial = 1
						stewardship = 5
						intrigue = 4
						learning = 6
					}
					culture = event_target:tf_character_home_province
					religion = event_target:tf_character_home_province
					random_traits =	yes
				}
			}
		}
		
		new_character = {
			add_trait = eunuch
			save_event_target_as = new_tf_character
		}
	}
}

create_wako_raider_and_forces_effect = {
	create_wako_raider_effect = yes
	
	create_wako_forces_effect = yes
}

create_wako_raider_effect = {
	hidden_tooltip = {
		random_list = {
			50 = { # Female
				trigger = {
					OR = {
						gender_equality_trigger = yes
						has_religion_feature = religion_matriarchal
						has_religion_feature = religion_feature_minangkabau
					}
				}
				
				create_character = {
					random_traits = yes
					age = 25
					female = yes
					dynasty = none
					culture = wako
					religion = shinto
					
					attributes = {
						diplomacy = 3
						martial = 5
						stewardship = 2
						intrigue = 4
						learning = 1
					}
					
					add_trait = tough_soldier
				}
			}
				
			50 = { # Male
				trigger = {
					NOR = {
						has_religion_feature = religion_matriarchal
						has_religion_feature = religion_feature_minangkabau
					}
				}
				
				create_character = {
					random_traits = yes
					age = 25
					female = no
					dynasty = none
					culture = wako
					religion = shinto
					
					attributes = {
						diplomacy = 3
						martial = 5
						stewardship = 2
						intrigue = 4
						learning = 1
					}
					
					add_trait = tough_soldier
				}
			}
		}
		
		new_character = {
			if = {
				limit = {
					has_dlc = "Holy Fury"
				}
				
				add_trait = pirate
			}
			
			random_list = {
				25 = {
					religion = buddhist
					add_trait = mahayana_buddhist
					
				}
				
				25 = {
					religion = shugendo
				}
				
				25 = {
					religion = koshin
				}
				
				25 = {}
			}
			
			add_trait = adventurer
			
			# Pirate flavour
			random_list = {
				5 = {
					trigger = {
						has_dlc = "Reapers"
					}
					
					add_trait = one_legged
				}
				5 = {
					trigger = {
						has_dlc = "Reapers"
					}
					
					add_trait = one_eyed
				}
				5 = {
					trigger = {
						has_dlc = "Reapers"
					}
					
					add_trait = one_handed
				}
				5 = {
					add_trait = duelist
				}
				5 = {
					add_trait = scurvy
				}
				5 = {
					add_trait = drunkard
				}
				5 = {
					add_trait = hedonist
				}
				5 = {
					if = {
						limit = {
							is_female = yes
						}
						
						add_trait = master_seductress
					}
					
					else = {
						add_trait = master_seducer
					}
				}
				5 = {
					add_trait = falconer
				}
				5 = {
					add_trait = lustful
				}
				5 = {
					add_trait = greedy
				}
				5 = {
					add_trait = arbitrary
				}
				5 = {
					add_trait = deceitful
				}
				5 = {
					add_trait = envious
				}
				5 = {
					add_trait = brave
				}
				5 = {
					add_trait = cruel
				}
				5 = {
					add_trait = craven
				}
				5 = {
					add_trait = aggressive_leader
				}
				5 = {
					add_trait = inspiring_leader
				}
				5 = {
					add_trait = trickster
				}
			}
			
			random_list = {
				5 = {
					trigger = {
						has_dlc = "Reapers"
					}
					
					add_trait = one_legged
				}
				5 = {
					trigger = {
						has_dlc = "Reapers"
					}
					
					add_trait = one_eyed
				}
				5 = {
					trigger = {
						has_dlc = "Reapers"
					}
					
					add_trait = one_handed
				}
				5 = {
					add_trait = duelist
				}
				5 = {
					add_trait = scurvy
				}
				5 = {
					add_trait = drunkard
				}
				5 = {
					add_trait = hedonist
				}
				5 = {
					if = {
						limit = {
							is_female = yes
						}
						
						add_trait = master_seductress
					}
					
					else = {
						add_trait = master_seducer
					}
				}
				5 = {
					add_trait = falconer
				}
				5 = {
					add_trait = lustful
				}
				5 = {
					add_trait = greedy
				}
				5 = {
					add_trait = arbitrary
				}
				5 = {
					add_trait = deceitful
				}
				5 = {
					add_trait = envious
				}
				5 = {
					add_trait = brave
				}
				5 = {
					add_trait = cruel
				}
				5 = {
					add_trait = craven
				}
				5 = {
					add_trait = aggressive_leader
				}
				5 = {
					add_trait = inspiring_leader
				}
				5 = {
					add_trait = trickster
				}
			}
			
			random_list = {
				5 = {
					trigger = {
						has_dlc = "Reapers"
					}
					
					add_trait = one_legged
				}
				5 = {
					trigger = {
						has_dlc = "Reapers"
					}
					
					add_trait = one_eyed
				}
				5 = {
					trigger = {
						has_dlc = "Reapers"
					}
					
					add_trait = one_handed
				}
				5 = {
					add_trait = duelist
				}
				5 = {
					add_trait = scurvy
				}
				5 = {
					add_trait = drunkard
				}
				5 = {
					add_trait = hedonist
				}
				5 = {
					if = {
						limit = {
							is_female = yes
						}
						
						add_trait = master_seductress
					}
					
					else = {
						add_trait = master_seducer
					}
				}
				5 = {
					add_trait = falconer
				}
				5 = {
					add_trait = lustful
				}
				5 = {
					add_trait = greedy
				}
				5 = {
					add_trait = arbitrary
				}
				5 = {
					add_trait = deceitful
				}
				5 = {
					add_trait = envious
				}
				5 = {
					add_trait = brave
				}
				5 = {
					add_trait = cruel
				}
				5 = {
					add_trait = craven
				}
				5 = {
					add_trait = aggressive_leader
				}
				5 = {
					add_trait = inspiring_leader
				}
				5 = {
					add_trait = trickster
				}
			}
			
			random_list = {
				50 = {
					remove_trait = tough_soldier
					
					random_list = {
						80 = {
							random_list = {
								10 = {
									add_trait = brilliant_strategist
								}
								80 = {
									add_trait = skilled_tactician
								}
								10 = {
									add_trait = misguided_warrior
								}
							}
						}
						
						9 = {
							random_list = {
								10 = {
									add_trait = grey_eminence
								}
								40 = {
									add_trait = charismatic_negotiator
								}
								40 = {
									add_trait = underhanded_rogue
								}
								10 = {
									add_trait = naive_appeaser
								}
							}
						}
						
						1 = {
							random_list = {
								10 = {
									add_trait = midas_touched
								}
								40 = {
									add_trait = fortune_builder
								}
								40 = {
									add_trait = thrifty_clerk
								}
								10 = {
									add_trait = indulgent_wastrel
								}
							}
						}
						
						9 = {
							random_list = {
								10 = {
									add_trait = elusive_shadow
								}
								40 = {
									add_trait = intricate_webweaver
								}
								40 = {
									add_trait = flamboyant_schemer
								}
								10 = {
									add_trait = amateurish_plotter
								}
							}
						}
						
						1 = {
							random_list = {
								10 = {
									add_trait = mastermind_theologian
								}
								40 = {
									add_trait = scholarly_theologian
								}
								40 = {
									add_trait = dutiful_cleric
								}
								10 = {
									add_trait = detached_priest
								}
							}
						}
					}
				}
				
				50 = {}
			}
			
			save_event_target_as = wako_raider
		}
	}
}

create_wako_forces_effect = {
	hidden_tooltip = {
		event_target:wako_raider = {
			set_defacto_liege = THIS
			
			create_title = {
				tier = DUKE
				landless = yes
				adventurer = yes
				culture = wako
				name = "PIRATE_RAIDERS"
				holder = event_target:wako_raider
				base_title = THIS
			}
			
			set_character_flag = raiding_adventurer
			
			# Create a fleet
			spawn_unit = {
				province = event_target:wako_province
				home = event_target:wako_province
				owner = event_target:wako_raider
				scaled_by_biggest_garrison = 0.75
				
				attrition = 0
				#disband_on_peace = yes
				reinforces = yes
				is_looter = yes
				can_toggle_looting = no
				cannot_inherit = yes
				earmark = wako_raiders
				
				troops = {
					light_infantry = { 250 250 }
					archers = { 250 250 }
					heavy_infantry = { 50 50 }
					pikemen = { 50 50 }
				}
			}
			
			spawn_fleet = {
				province = closest # closest sea zone
				owner = event_target:wako_raider
				
				troops = {
					galleys = { 20 20 }
				}
				
				cannot_inherit = yes
				earmark = wako_raiders
			}
			
			random = {
				chance = 25
				
				mult_modifier = {
					factor = 2
					year >= 1000
				}
				spawn_unit = {
					province = event_target:wako_province
					home = event_target:wako_province
					owner = event_target:wako_raider
					scaled_by_biggest_garrison = 0.75
					
					attrition = 0
					#disband_on_peace = yes
					reinforces = yes
					is_looter = yes
					can_toggle_looting = no
					cannot_inherit = yes
					earmark = wako_raiders
					
					troops = {
						light_infantry = { 250 250 }
						archers = { 250 250 }
						heavy_infantry = { 50 50 }
						pikemen = { 50 50 }
					}
				}
				
				spawn_fleet = {
					province = closest # closest sea zone
					owner = event_target:wako_raider
					
					troops = {
						galleys = { 20 20 }
					}
					
					cannot_inherit = yes
					earmark = wako_raiders
				}
			}
			
			random = {
				chance = 5
				
				mult_modifier = {
					factor = 2
					year >= 1200
				}
				
				spawn_unit = {
					province = event_target:wako_province
					home = event_target:wako_province
					owner = event_target:wako_raider
					scaled_by_biggest_garrison = 0.75
					
					attrition = 0
					#disband_on_peace = yes
					reinforces = yes
					is_looter = yes
					can_toggle_looting = no
					cannot_inherit = yes
					earmark = wako_raiders
					
					troops = {
						light_infantry = { 250 250 }
						archers = { 250 250 }
						heavy_infantry = { 50 50 }
						pikemen = { 50 50 }
					}
				}
				
				spawn_fleet = {
					province = closest # closest sea zone
					owner = event_target:wako_raider
					
					troops = {
						galleys = { 20 20 }
					}
					
					cannot_inherit = yes
					earmark = wako_raiders
				}
			}
			
			random = {
				chance = 1
				
				mult_modifier = {
					factor = 10
					year >= 1300
				}
				
				spawn_unit = {
					province = event_target:wako_province
					home = event_target:wako_province
					owner = event_target:wako_raider
					scaled_by_biggest_garrison = 0.75
					
					attrition = 0
					#disband_on_peace = yes
					reinforces = yes
					is_looter = yes
					can_toggle_looting = no
					cannot_inherit = yes
					earmark = wako_raiders
					
					troops = {
						light_infantry = { 250 250 }
						archers = { 250 250 }
						heavy_infantry = { 50 50 }
						pikemen = { 50 50 }
					}
				}
				
				spawn_fleet = {
					province = closest # closest sea zone
					owner = event_target:wako_raider
					
					troops = {
						galleys = { 20 20 }
					}
					
					cannot_inherit = yes
					earmark = wako_raiders
				}
			}
		}
	}
}