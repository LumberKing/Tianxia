# Both for the Hermetics and for the Alchemists

# hermetic_add_random_ingredient_effect
# hermetic_add_herbal_ingredient_effect
# hermetic_add_herbal_ingredient_dangerous_effect
# hermetic_add_animal_ingredient_effect
# hermetic_add_misc_ingredient_effect
# hermetic_add_misc_ingredient_dangerous_effect
# hermetic_add_black_market_ingredient_effect

# remove_scrying_omen_modifiers_effect
# calculate_scrying_outcome_effect
# upgrade_seer_modifier_effect
# downgrade_seer_modifier_effect
# scrying_omen_fulfilled_by_gaining_disease_effect
# scrying_omen_fulfilled_by_removing_disease_effect
# clean_up_horoscope_effect
# set_horoscope_modifier_effect
# increase_astronomical_insights_modifier_effect
# remove_astronomical_insight_modifier_effect
# add_Aries_sign_trait_effect
# add_Taurus_sign_trait_effect
# add_Gemini_sign_trait_effect
# add_Cancer_sign_trait_effect
# add_Leo_sign_trait_effect
# add_Virgo_sign_trait_effect
# add_Libra_sign_trait_effect
# add_Scorpius_sign_trait_effect
# add_Sagittarius_sign_trait_effect
# add_Capricorn_sign_trait_effect
# add_Aquarius_sign_trait_effect
# add_Pisces_sign_trait_effect
# add_western_zodiac_trait_effect

# select_random_hermetic_ingredient_herb_effect
# select_random_hermetic_ingredient_animal_part_effect
# select_random_hermetic_ingredient_powder_effect
# select_random_hermetic_ingredient_liquid_effect
# select_random_hermetic_ingredient_effect
# select_random_hermetic_ingredient_prefer_new_effect
# select_random_hermetic_ingredient_prefer_healing_effect
# select_random_hermetic_ingredient_prefer_harmful_effect
# remove_selection_of_ingredients_effect
# destroy_selected_ingredient_1_effect
# destroy_selected_ingredient_2_effect
# destroy_selected_ingredient_1_and_2_effect
# destroy_selected_ingredient_1_plus_random_other_ingredient_effect
# destroy_random_herb_ingredient_effect
# destroy_random_animal_part_ingredient_effect
# destroy_random_powder_ingredient_effect
# destroy_random_liquid_ingredient_effect
# destroy_random_herb_or_animal_part_ingredients_effect
# destroy_random_ingredients_effect
# destroy_all_ingredients_effect
# calculate_health_level_of_ingredient_1_effect
# calculate_health_level_of_ingredient_2_effect
# calculate_health_level_of_ingredient_1_and_2_effect
# calculate_health_level_of_all_ingredients_effect
# save_ingredient_1_flag_lab_experiment_effect
# save_ingredient_2_flag_lab_experiment_effect
# save_ingredient_1_flag_self_experiment_effect
# save_ingredient_2_flag_self_experiment_effect
# save_ingredient_1_flag_prisoner_experiment_effect
# save_ingredient_2_flag_prisoner_experiment_effect

# hermetics_upgrade_scandal_effect

# increase_ingredient_knowledge_lab_experiment_effect
# alchemist_good_outcome_healing_lab_experiment_effect
# alchemist_good_outcome_poison_lab_experiment_effect
# alchemist_good_outcome_random_lab_experiment_effect
# alchemist_average_outcome_healing_lab_experiment_effect
# alchemist_average_outcome_poison_lab_experiment_effect
# alchemist_average_outcome_random_lab_experiment_effect
# alchemist_bad_outcome_healing_lab_experiment_effect
# alchemist_bad_outcome_poison_lab_experiment_effect
# alchemist_bad_outcome_random_lab_experiment_effect

# increase_ingredient_knowledge_self_experiment_effect
# alchemist_good_outcome_healing_self_experiment_effect
# alchemist_good_outcome_poison_self_experiment_effect
# alchemist_good_outcome_random_self_experiment_effect
# alchemist_average_outcome_healing_self_experiment_effect
# alchemist_average_outcome_poison_self_experiment_effect
# alchemist_average_outcome_random_self_experiment_effect
# alchemist_bad_outcome_healing_self_experiment_effect
# alchemist_bad_outcome_poison_self_experiment_effect
# alchemist_bad_outcome_random_self_experiment_effect

# increase_ingredient_knowledge_prisoner_experiment_effect
# alchemist_good_outcome_healing_prisoner_experiment_effect
# alchemist_good_outcome_poison_prisoner_experiment_effect
# alchemist_good_outcome_random_prisoner_experiment_effect
# alchemist_average_outcome_healing_prisoner_experiment_effect
# alchemist_average_outcome_poison_prisoner_experiment_effect
# alchemist_average_outcome_random_prisoner_experiment_effect
# alchemist_bad_outcome_healing_prisoner_experiment_effect
# alchemist_bad_outcome_poison_prisoner_experiment_effect
# alchemist_bad_outcome_random_prisoner_experiment_effect

# save_ingredient_1_flag_healing_potion_effect
# save_ingredient_2_flag_healing_potion_effect
# save_ingredient_1_and_2_flag_healing_potion_effect
# save_ingredient_1_flag_clarity_potion_effect
# save_ingredient_2_flag_clarity_potion_effect
# save_ingredient_1_and_2_flag_clarity_potion_effect
# save_ingredient_1_flag_fertility_potion_effect
# save_ingredient_2_flag_fertility_potion_effect
# save_ingredient_1_and_2_flag_fertility_potion_effect
# save_ingredient_1_flag_aphrodisiac_effect
# save_ingredient_2_flag_aphrodisiac_effect
# save_ingredient_1_and_2_flag_aphrodisiac_effect
# save_ingredient_1_flag_humiliating_potion_effect
# save_ingredient_2_flag_humiliating_potion_effect
# save_ingredient_1_and_2_flag_humiliating_potion_effect
# save_ingredient_1_flag_poison_effect
# save_ingredient_2_flag_poison_effect
# save_ingredient_1_and_2_flag_poison_effect

# copy_prisoner_experiment_flags_effect
# copy_healing_potion_flags_effect
# copy_clarity_potion_flags_effect
# copy_fertility_potion_flags_effect
# copy_aphrodisiac_flags_effect
# copy_humiliating_potion_flags_effect
# copy_humiliating_potion_flags_target_effect
# copy_poison_flags_effect
# copy_poison_flags_target_effect

# add_ingredient_to_immortality_potion_actual_effect
# add_ingredient_to_immortality_potion_placebo_effect
# add_ingredient_to_immortality_potion_poison_effect
# add_random_ingredient_to_immortality_potion_effect
# add_random_new_immortality_potion_ingredient_effect

# add_non_purified_ingredient_to_immortality_potion_actual_effect
# add_non_purified_ingredient_to_immortality_potion_placebo_effect
# add_non_purified_ingredient_to_immortality_potion_poison_effect

# add_purified_ingredient_to_immortality_potion_actual_effect
# add_purified_ingredient_to_immortality_potion_placebo_effect
# add_purified_ingredient_to_immortality_potion_poison_effect

# invert_immortality_potion_quality_effect

# copy_consumed_immortality_potion_ingredient_flags_effect

# improve_froms_immortality_potion_actual_effect
# improve_froms_immortality_potion_placebo_effect
# improve_froms_immortality_potion_poison_effect

# worsen_froms_immortality_potion_actual_effect
# worsen_froms_immortality_potion_placebo_effect
# worsen_froms_immortality_potion_poison_effect

# add_random_new_alchemy_book_effect
# improve_immortality_potion_quality_book_effect

# add_target_immortality_potion_ingredient_effect
# randomize_immortality_potion_ingredient_effect

# finalize_immortality_potion_setup_actual_effect
# finalize_immortality_potion_setup_placebo_effect
# finalize_immortality_potion_setup_poison_effect

# determine_final_immortality_potion_actual_outcome_effect
# determine_final_immortality_potion_placebo_outcome_effect
# determine_final_immortality_potion_poison_outcome_effect

hermetic_add_random_ingredient_effect = {
	hidden_effect = {
		random_list = {
			50 = {
				hermetic_add_herbal_ingredient_effect = yes
			}
			5 = { # Less likely
				hermetic_add_animal_ingredient_effect = yes
			}
			50 = {
				hermetic_add_misc_ingredient_effect = yes
			}
		}
	}
}

hermetic_add_herbal_ingredient_effect = {
	hidden_effect = {
		random_list = {
			50 = { add_artifact = ingredient_herb1 }
			50 = { add_artifact = ingredient_herb2 }
			50 = { add_artifact = ingredient_herb3 }
			50 = { add_artifact = ingredient_herb4 }
			50 = { add_artifact = ingredient_herb5 }
			50 = { add_artifact = ingredient_herb6 }
			50 = { add_artifact = ingredient_herb7 }
			50 = { add_artifact = ingredient_herb8 }
			50 = { add_artifact = ingredient_herb9 }
			50 = { add_artifact = ingredient_herb10 }
			50 = { add_artifact = ingredient_herb11 }
			50 = { add_artifact = ingredient_herb12 }
			50 = { add_artifact = ingredient_herb13 }
			50 = { add_artifact = ingredient_herb14 }
			50 = { add_artifact = ingredient_herb15 }
		}
	}
}

hermetic_add_herbal_ingredient_dangerous_effect = {
	hidden_effect = {
		random_list = {
			50 = { add_artifact = ingredient_herb3 }
			50 = { add_artifact = ingredient_herb15 }
		}
	}
}

hermetic_add_animal_ingredient_effect = {
	hidden_effect = {
		random_list = {
			50 = { add_artifact = ingredient_animal1 }
			50 = { add_artifact = ingredient_animal2 }
			50 = { add_artifact = ingredient_animal3 }
			50 = { add_artifact = ingredient_animal4 }
			50 = { add_artifact = ingredient_animal5 }
			50 = { add_artifact = ingredient_animal6 }
			50 = { add_artifact = ingredient_animal7 }
			50 = { add_artifact = ingredient_animal8 }
			50 = { add_artifact = ingredient_animal9 }
		}
	}
}

hermetic_add_misc_ingredient_effect = {
	hidden_effect = {
		random_list = {
			50 = { add_artifact = ingredient_metal_exotic1 }
			50 = { add_artifact = ingredient_metal_exotic2 }
			50 = { add_artifact = ingredient_metal_exotic3 }
			50 = { add_artifact = ingredient_metal_exotic4 }
			50 = { add_artifact = ingredient_metal_exotic5 }
			50 = { add_artifact = ingredient_metal_exotic6 }
			50 = { add_artifact = ingredient_metal_exotic7 }
			50 = { add_artifact = ingredient_metal_exotic8 }
			50 = { add_artifact = ingredient_metal_exotic9 }
			50 = { add_artifact = ingredient_metal_exotic10 }
			50 = { add_artifact = ingredient_metal_exotic11 }
			50 = { add_artifact = ingredient_metal_exotic12 }
			50 = { add_artifact = ingredient_metal_exotic13 }
			50 = { add_artifact = ingredient_metal_exotic14 }
			25 = { add_artifact = ingredient_misc_powder_1 }
			25 = { add_artifact = ingredient_misc_powder_2 }
			25 = { add_artifact = ingredient_misc_powder_3 }
			25 = { add_artifact = ingredient_misc_powder_4 }
			25 = { add_artifact = ingredient_misc_powder_5 }
			25 = { add_artifact = ingredient_mineral_1 }
			25 = { add_artifact = ingredient_mineral_2 }
			10 = { add_artifact = ingredient_mineral_jade_1 }
			10 = { add_artifact = ingredient_mineral_jade_2 }
			10 = { add_artifact = ingredient_mineral_jade_3 }
			10 = { add_artifact = ingredient_mineral_jade_4 }
			10 = { add_artifact = ingredient_mineral_jade_5 }
			10 = { add_artifact = ingredient_mineral_jade_6 }
		}
	}
}

hermetic_add_misc_ingredient_dangerous_effect = {
	hidden_effect = {
		random_list = {
			50 = { add_artifact = ingredient_metal_exotic2 }
			50 = { add_artifact = ingredient_metal_exotic8 }
			50 = { add_artifact = ingredient_metal_exotic10 }
			50 = { add_artifact = ingredient_metal_exotic11 }
			50 = { add_artifact = ingredient_metal_exotic12 }
			
			50 = { add_artifact = ingredient_misc_powder_3 }
			50 = { add_artifact = ingredient_misc_powder_4 }
			
			50 = { add_artifact = ingredient_mineral_1 }
			50 = { add_artifact = ingredient_mineral_2 }
		}
	}
}

hermetic_add_black_market_ingredient_effect = {
	hidden_effect = {
		random_list = {
			50 = { add_artifact = ingredient_herb3 }
			50 = { add_artifact = ingredient_herb15 }
			
			50 = { add_artifact = ingredient_misc_powder_1 }
			50 = { add_artifact = ingredient_misc_powder_2 }
			50 = { add_artifact = ingredient_misc_powder_3 }
			50 = { add_artifact = ingredient_misc_powder_4 }
			50 = { add_artifact = ingredient_misc_powder_5 }
			
			50 = { add_artifact = ingredient_mineral_1 }
			50 = { add_artifact = ingredient_mineral_2 }
			
			50 = { add_artifact = ingredient_mineral_jade_1 }
			50 = { add_artifact = ingredient_mineral_jade_2 }
			50 = { add_artifact = ingredient_mineral_jade_3 }
			50 = { add_artifact = ingredient_mineral_jade_4 }
			50 = { add_artifact = ingredient_mineral_jade_5 }
			50 = { add_artifact = ingredient_mineral_jade_6 }
		}
	}
}

remove_scrying_omen_modifiers_effect = { # For cleaning up end-states of the Hermetics Scrying Power
	hidden_effect = { remove_character_modifier = scrying_cooldown }

	trigger_switch = {
		on_trigger = has_character_modifier

		good_battle_omen       = { remove_character_modifier = good_battle_omen }
		bad_battle_omen        = { remove_character_modifier = bad_battle_omen }
		good_relationship_omen = { remove_character_modifier = good_relationship_omen }
		bad_relationship_omen  = { remove_character_modifier = bad_relationship_omen }
		good_power_omen        = { remove_character_modifier = good_power_omen }
		bad_power_omen         = { remove_character_modifier = bad_power_omen }
	}

	clr_character_flag = positive_reaction_to_scrying_flag
	clr_character_flag = negative_reaction_to_scrying_flag
	clr_character_flag = positive_event_flag
	clr_character_flag = negative_event_flag

	clear_delayed_event = { id = MNM.1225 }
	clear_delayed_event = { id = MNM.1226 }
	clear_delayed_event = { id = MNM.1227 }
}

# The positive_event_flag/negative_event_flag needs to be set somewhere in the target event in order for this to work...
# CleanSlate: Nothing in vanilla sets the positive_event_flag...
calculate_scrying_outcome_effect = {
	custom_tooltip = { text = tooltip_info_omen_tt }

	if = {
		limit = {
			trigger_if = {
				limit = { has_character_flag = positive_event_flag }
				has_positive_omen_modifier_trigger = yes
			}
			trigger_else = {
				has_character_flag = negative_event_flag
				has_negative_omen_modifier_trigger = yes
			}
		}

		upgrade_seer_modifier_effect = yes
	}
	else = {
		downgrade_seer_modifier_effect = yes
	}

	clr_character_flag = positive_event_flag
	clr_character_flag = negative_event_flag
}

# Modifiers gotten at end-states of the Hermetics Scrying Power
upgrade_seer_modifier_effect = {
	if = {
		limit = { has_a_seer_modifier_trigger = yes }

		trigger_switch = {
			on_trigger = has_character_modifier

			fulfilled_vision_worst = {
				remove_character_modifier = fulfilled_vision_worst

				add_character_modifier = {
					name = fulfilled_vision_bad
					years = 7
				}
			}

			fulfilled_vision_bad = {
				remove_character_modifier = fulfilled_vision_bad

				add_character_modifier = {
					name = fulfilled_vision_ok
					years = 7
				}
			}

			fulfilled_vision_ok = {
				remove_character_modifier = fulfilled_vision_ok

				add_character_modifier = {
					name = fulfilled_vision_great
					years = 7
				}
			}

			fulfilled_vision_great = {
				add_character_modifier = {
					name = fulfilled_vision_great
					years = 7
				}
			}
		}
	}
	else = {
		add_character_modifier = {
			name = fulfilled_vision_ok
			years = 7
		}
	}
}

# Modifiers gotten at end-states of the Hermetics Scrying Power
downgrade_seer_modifier_effect = {
	if = {
		limit = { has_a_seer_modifier_trigger = yes	}

		trigger_switch = {
			on_trigger = has_character_modifier

			fulfilled_vision_great = {
				remove_character_modifier = fulfilled_vision_great

				add_character_modifier = {
					name = fulfilled_vision_ok
					years = 7
				}
			}

			fulfilled_vision_ok = {
				remove_character_modifier = fulfilled_vision_ok

				add_character_modifier = {
					name = fulfilled_vision_bad
					years = 7
				}
			}

			fulfilled_vision_bad = {
				remove_character_modifier = fulfilled_vision_bad

				add_character_modifier = {
					name = fulfilled_vision_worst
					years = 7
				}
			}

			fulfilled_vision_worst = {
				add_character_modifier = {
					name = fulfilled_vision_worst
					years = 7
				}
			}
		}
	}
	else = {
		add_character_modifier = {
			name = fulfilled_vision_bad
			years = 7
		}
	}
}

# Scrying result are sent if someone gets sick and you are carrying an omen (fired from rip_symptom_events)
scrying_omen_fulfilled_by_gaining_disease_effect = {
	hidden_effect = {
		host = {
			if = {
				limit = {
					NOT = { is_liege_of = ROOT }

					OR = {
						is_close_relative = ROOT
						is_friend = ROOT
					}

					OR = {
						has_character_modifier = bad_relationship_omen
						has_character_modifier = good_relationship_omen
					}
				}

				character_event = {
					id = MNM.1221 # Inform of scrying result
					days = 5
					random = 5
				}
			}
		}

		liege = {
			if = {
				limit = {
					OR = {
						is_father = ROOT
						is_mother = ROOT
						is_married = ROOT
						is_lover = ROOT
					}

					OR = {
						has_character_modifier = bad_relationship_omen
						has_character_modifier = good_relationship_omen
					}
				}

				character_event = {
					id = MNM.1221 # Inform of scrying result
					days = 5
					random = 5
				}
			}
		}

		if = {
			limit = {
				OR = {
					has_character_modifier = bad_power_omen
					has_character_modifier = good_power_omen
				}
			}

			character_event = {
				id = MNM.1220 # Inform character of own sickness
				days = 5
				random = 5
			}
		}
	}
}

# Scrying result are sent if someone gets sick and you are carrying an omen (fired from rip_symptom_events)
scrying_omen_fulfilled_by_removing_disease_effect = {
	hidden_effect = {
		host = {
			if = {
				limit = {
					NOT = { is_liege_of = ROOT }

					OR = {
						is_close_relative = ROOT
						is_friend = ROOT
					}

					OR = {
						has_character_modifier = good_relationship_omen
						has_character_modifier = bad_relationship_omen
					}
				}

				character_event = {
					id = MNM.1223 # Inform of scrying result
					days = 5
					random = 5
				}
			}
		}

		liege = {
			if = {
				limit = {
					OR = {
						is_parent_of = ROOT
						is_married = ROOT
						is_lover = ROOT
					}

					OR = {
						has_character_modifier = good_relationship_omen
						has_character_modifier = bad_relationship_omen
					}
				}

				character_event = {
					id = MNM.1223 # Inform of scrying result
					days = 5
					random = 5
				}
			}
		}

		if = {
			limit = {
				OR = {
					has_character_modifier = good_power_omen
					has_character_modifier = bad_power_omen
				}
			}

			character_event = {
				id = MNM.1222 # Inform character of own sickness
				days = 5
				random = 5
			}
		}
	}
}

clean_up_horoscope_effect = {
	clr_character_flag = avoided_destiny
	clr_character_flag = horoscope_maker_died
	clr_character_flag = destined_artist
	clr_character_flag = destined_fighter
	clr_character_flag = destined_diplomat
	clr_character_flag = destined_schemer
	clr_character_flag = destined_scholar
	clr_character_flag = encouraged_horoscope_pattern
	clr_character_flag = discouraged_horoscope_pattern
	clr_character_flag = horoscope_child_evaluate
	clr_character_flag = horoscope_path_1
	clr_character_flag = horoscope_maker_is_mother
	clr_character_flag = horoscope_maker_is_father
	remove_character_modifier = horoscope_cooldown
}

# Modifiers received by target during the Hermetics Horoscope Power
set_horoscope_modifier_effect = {
	if = {
		limit = {
			NOT = { has_character_flag = avoided_destiny }
		}

		if = {
			limit = { has_childhood_horoscope_modifier_trigger = yes }

			trigger_switch = {
				on_trigger = has_character_modifier

				guided_by_horoscope_diplomacy = {
					remove_character_modifier = guided_by_horoscope_diplomacy

					add_character_modifier = {
						name = guided_by_horoscope_diplomacy_adult
						years = 7
					}
				}

				guided_by_horoscope_martial = {
					remove_character_modifier = guided_by_horoscope_martial

					add_character_modifier = {
						name = guided_by_horoscope_martial_adult
						years = 7
					}
				}

				guided_by_horoscope_stewardship = {
					remove_character_modifier = guided_by_horoscope_stewardship

					add_character_modifier = {
						name = guided_by_horoscope_stewardship_adult
						years = 7
					}
				}

				guided_by_horoscope_intrigue = {
					remove_character_modifier = guided_by_horoscope_intrigue

					add_character_modifier = {
						name = guided_by_horoscope_intrigue_adult
						years = 7
					}
				}

				guided_by_horoscope_learning = {
					remove_character_modifier = guided_by_horoscope_learning

					add_character_modifier = {
						name = guided_by_horoscope_learning_adult
						years = 7
					}
				}
			}
		}
		else_if = {
			limit = { is_adult = no }

			trigger_switch = {
				on_trigger = has_character_flag

				destined_steward = {
					add_character_modifier = {
						name = guided_by_horoscope_stewardship
						duration = -1
					}
				}

				destined_fighter = {
					add_character_modifier = {
						name = guided_by_horoscope_martial
						duration = -1
					}
				}

				destined_diplomat = {
					add_character_modifier = {
						name = guided_by_horoscope_diplomacy
						duration = -1
					}
				}

				destined_schemer = {
					add_character_modifier = {
						name = guided_by_horoscope_intrigue
						duration = -1
					}
				}

				destined_scholar = {
					add_character_modifier = {
						name = guided_by_horoscope_learning
						duration = -1
					}
				}
			}
		}
	}
	else = {
		if = {
			limit = { has_childhood_horoscope_modifier_trigger = yes }

			trigger_switch = {
				on_trigger = has_character_flag

				destined_steward = {
					if = {
						limit = { has_character_modifier = guided_by_horoscope_stewardship }
						remove_character_modifier = guided_by_horoscope_stewardship
					}

					add_character_modifier = {
						name = horoscope_outcome_jittery
						years = 15
					}
				}

				destined_fighter = {
					if = {
						limit = { has_character_modifier = guided_by_horoscope_martial }
						remove_character_modifier = guided_by_horoscope_martial
					}

					add_character_modifier = {
						name = horoscope_outcome_brute
						years = 15
					}
				}

				destined_diplomat = {
					if = {
						limit = { has_character_modifier = guided_by_horoscope_diplomacy }
						remove_character_modifier = guided_by_horoscope_diplomacy
					}

					add_character_modifier = {
						name = horoscope_outcome_artist
						years = 15
					}
				}

				destined_schemer = {
					if = {
						limit = { has_character_modifier = guided_by_horoscope_intrigue }
						remove_character_modifier = guided_by_horoscope_intrigue
					}

					add_character_modifier = {
						name = horoscope_outcome_arrogant
						years = 15
					}
				}

				destined_scholar = {
					if = {
						limit = { has_character_modifier = guided_by_horoscope_learning }
						remove_character_modifier = guided_by_horoscope_learning
					}

					add_character_modifier = {
						name = horoscope_outcome_scatterbrain
						years = 15
					}
				}
			}
		}
		else = {
			trigger_switch = {
				on_trigger = has_character_flag

				destined_steward = {
					add_character_modifier = {
						name = horoscope_outcome_jittery
						years = 15
					}
				}

				destined_fighter = {
					add_character_modifier = {
						name = horoscope_outcome_brute
						years = 15
					}
				}

				destined_diplomat = {
					add_character_modifier = {
						name = horoscope_outcome_artist
						years = 15
					}
				}

				destined_schemer = {
					add_character_modifier = {
						name = horoscope_outcome_arrogant
						years = 15
					}
				}

				destined_scholar = {
					add_character_modifier = {
						name = horoscope_outcome_scatterbrain
						years = 15
					}
				}
			}
		}
	}
}

increase_astronomical_insights_modifier_effect = {
	custom_tooltip = { text = increase_astronomical_insight_tt }

	trigger_switch = {
		on_trigger = has_character_modifier

		astronomical_insights_1 = {
			hidden_effect = {
				remove_character_modifier = astronomical_insights_1
			}

			add_character_modifier = {
				name = astronomical_insights_2
				duration = -1
			}
		}

		astronomical_insights_2 = {
			hidden_effect = {
				remove_character_modifier = astronomical_insights_2
			}
			add_character_modifier = {
				name = astronomical_insights_3
				duration = -1
			}
		}

		astronomical_insights_3 = {
			hidden_effect = {
				remove_character_modifier = astronomical_insights_3
			}
			add_character_modifier = {
				name = astronomical_insights_4
				duration = -1
			}
		}

		astronomical_insights_4 = {
			# Do nothing
		}

		fallback = {
			add_character_modifier = {
				name = astronomical_insights_1
				duration = -1
			}
		}
	}
}

remove_astronomical_insight_modifier_effect = {
	hidden_effect = {
		remove_character_modifier = astronomical_insights_1
		remove_character_modifier = astronomical_insights_2
		remove_character_modifier = astronomical_insights_3
		remove_character_modifier = astronomical_insights_4
	}
}

add_Aries_sign_trait_effect = {
	random_list = {
		10 = {
			trigger = {
				trigger_if = {
					limit = { has_dlc = "Holy Fury" }
					trait = zodiac_aries # If an hellenic hermetic gets the zodiac event, give the character trait instead
				}
			}

			add_trait = stubborn
		}

		10 = {
			trigger = {
				trigger_if = {
					limit = { has_dlc = "Holy Fury" }
					trait = zodiac_aries # If an hellenic hermetic gets the zodiac event, give the character trait instead
				}
			}

			add_trait = ambitious
		}

		100 = {
			trigger = {
				has_dlc = "Holy Fury"
				NOT = { trait = zodiac_aries }
			}

			add_trait = zodiac_aries
		}
	}
}

add_Taurus_sign_trait_effect = {
	random_list = {
		10 = {
			trigger = {
				trigger_if = {
					limit = { has_dlc = "Holy Fury" }
					trait = zodiac_taurus # If an hellenic hermetic gets the zodiac event, give the character trait instead
				}
			}

			add_trait = content
		}

		10 = {
			trigger = {
				trigger_if = {
					limit = { has_dlc = "Holy Fury" }
					trait = zodiac_taurus # If an hellenic hermetic gets the zodiac event, give the character trait instead
				}
			}

			add_trait = patient
		}

		100 = {
			trigger = {
				has_dlc = "Holy Fury"
				NOT = { trait = zodiac_taurus }
			}

			add_trait = zodiac_taurus
		}
	}
}

add_Gemini_sign_trait_effect = {
	random_list = {
		10 = {
			trigger = {
				trigger_if = {
					limit = { has_dlc = "Holy Fury" }
					trait = zodiac_gemini # If an hellenic hermetic gets the zodiac event, give the character trait instead
				}
			}

			add_trait = wroth
		}

		10 = {
			trigger = {
				trigger_if = {
					limit = { has_dlc = "Holy Fury" }
					trait = zodiac_gemini # If an hellenic hermetic gets the zodiac event, give the character trait instead
				}
			}

			add_trait = diligent
		}

		100 = {
			trigger = {
				has_dlc = "Holy Fury"
				NOT = { trait = zodiac_gemini }
			}

			add_trait = zodiac_gemini
		}
	}
}

add_Cancer_sign_trait_effect = {
	random_list = {
		10 = {
			trigger = {
				trigger_if = {
					limit = { has_dlc = "Holy Fury" }
					trait = zodiac_cancer # If an hellenic hermetic gets the zodiac event, give the character trait instead
				}
			}

			add_trait = honest
		}

		10 = {
			trigger = {
				trigger_if = {
					limit = { has_dlc = "Holy Fury" }
					trait = zodiac_cancer # If an hellenic hermetic gets the zodiac event, give the character trait instead
				}
			}

			add_trait = kind
		}

		100 = {
			trigger = {
				has_dlc = "Holy Fury"
				NOT = { trait = zodiac_cancer }
			}

			add_trait = zodiac_cancer
		}
	}
}

add_Leo_sign_trait_effect = {
	random_list = {
		10 = {
			trigger = {
				trigger_if = {
					limit = { has_dlc = "Holy Fury" }
					trait = zodiac_leo # If an hellenic hermetic gets the zodiac event, give the character trait instead
				}
			}

			add_trait = cruel
		}

		10 = {
			trigger = {
				trigger_if = {
					limit = { has_dlc = "Holy Fury" }
					trait = zodiac_leo # If an hellenic hermetic gets the zodiac event, give the character trait instead
				}
			}

			add_trait = gregarious
		}

		100 = {
			trigger = {
				has_dlc = "Holy Fury"
				NOT = { trait = zodiac_leo }
			}

			add_trait = zodiac_leo
		}
	}
}

add_Virgo_sign_trait_effect = {
	random_list = {
		10 = {
			trigger = {
				trigger_if = {
					limit = { has_dlc = "Holy Fury" }
					trait = zodiac_virgo # If an hellenic hermetic gets the zodiac event, give the character trait instead
				}
			}

			add_trait = shy
		}

		10 = {
			trigger = {
				trigger_if = {
					limit = { has_dlc = "Holy Fury" }
					trait = zodiac_virgo # If an hellenic hermetic gets the zodiac event, give the character trait instead
				}
			}

			add_trait = humble
		}

		100 = {
			trigger = {
				has_dlc = "Holy Fury"
				NOT = { trait = zodiac_virgo }
			}

			add_trait = zodiac_virgo
		}
	}
}

add_Libra_sign_trait_effect = {
	random_list = {
		10 = {
			trigger = {
				trigger_if = {
					limit = { has_dlc = "Holy Fury" }
					trait = zodiac_libra # If an hellenic hermetic gets the zodiac event, give the character trait instead
				}
			}

			add_trait = trusting
		}

		10 = {
			trigger = {
				trigger_if = {
					limit = { has_dlc = "Holy Fury" }
					trait = zodiac_libra # If an hellenic hermetic gets the zodiac event, give the character trait instead
				}
			}

			add_trait = temperate
		}

		100 = {
			trigger = {
				has_dlc = "Holy Fury"
				NOT = { trait = zodiac_libra }
			}

			add_trait = zodiac_libra
		}
	}
}

add_Scorpius_sign_trait_effect = {
	random_list = {
		10 = {
			trigger = {
				trigger_if = {
					limit = { has_dlc = "Holy Fury" }
					trait = zodiac_scorpio # If an hellenic hermetic gets the zodiac event, give the character trait instead
				}
			}

			add_trait = deceitful
		}

		10 = {
			trigger = {
				trigger_if = {
					limit = { has_dlc = "Holy Fury" }
					trait = zodiac_scorpio # If an hellenic hermetic gets the zodiac event, give the character trait instead
				}
			}

			add_trait = lustful
		}

		100 = {
			trigger = {
				has_dlc = "Holy Fury"
				NOT = { trait = zodiac_scorpio }
			}

			add_trait = zodiac_scorpio
		}
	}
}

add_Sagittarius_sign_trait_effect = {
	random_list = {
		10 = {
			trigger = {
				trigger_if = {
					limit = { has_dlc = "Holy Fury" }
					trait = zodiac_sagittarius # If an hellenic hermetic gets the zodiac event, give the character trait instead
				}
			}

			add_trait = wroth
		}

		10 = {
			trigger = {
				trigger_if = {
					limit = { has_dlc = "Holy Fury" }
					trait = zodiac_sagittarius # If an hellenic hermetic gets the zodiac event, give the character trait instead
				}
			}

			add_trait = charitable
		}

		100 = {
			trigger = {
				has_dlc = "Holy Fury"
				NOT = { trait = zodiac_sagittarius }
			}

			add_trait = zodiac_sagittarius
		}
	}
}

add_Capricorn_sign_trait_effect = {
	random_list = {
		10 = {
			trigger = {
				trigger_if = {
					limit = { has_dlc = "Holy Fury" }
					trait = zodiac_capricorn # If an hellenic hermetic gets the zodiac event, give the character trait instead
				}
			}

			add_trait = proud
		}

		10 = {
			trigger = {
				trigger_if = {
					limit = { has_dlc = "Holy Fury" }
					trait = zodiac_capricorn # If an hellenic hermetic gets the zodiac event, give the character trait instead
				}
			}

			add_trait = temperate
		}

		100 = {
			trigger = {
				has_dlc = "Holy Fury"
				NOT = { trait = zodiac_capricorn }
			}

			add_trait = zodiac_capricorn
		}
	}
}

add_Aquarius_sign_trait_effect = {
	random_list = {
		10 = {
			trigger = {
				trigger_if = {
					limit = { has_dlc = "Holy Fury" }
					trait = zodiac_aquarius # If an hellenic hermetic gets the zodiac event, give the character trait instead
				}
			}

			add_trait = slothful
		}

		10 = {
			trigger = {
				trigger_if = {
					limit = { has_dlc = "Holy Fury" }
					trait = zodiac_aquarius # If an hellenic hermetic gets the zodiac event, give the character trait instead
				}
			}

			add_trait = ambitious
		}

		100 = {
			trigger = {
				has_dlc = "Holy Fury"
				NOT = { trait = zodiac_aquarius }
			}

			add_trait = zodiac_aquarius
		}
	}
}

add_Pisces_sign_trait_effect = {
	random_list = {
		10 = {
			trigger = {
				trigger_if = {
					limit = { has_dlc = "Holy Fury" }
					trait = zodiac_pisces # If an hellenic hermetic gets the zodiac event, give the character trait instead
				}
			}

			add_trait = trusting
		}

		10 = {
			trigger = {
				trigger_if = {
					limit = { has_dlc = "Holy Fury" }
					trait = zodiac_pisces # If an hellenic hermetic gets the zodiac event, give the character trait instead
				}
			}

			add_trait = kind
		}

		100 = {
			trigger = {
				has_dlc = "Holy Fury"
				NOT = { trait = zodiac_pisces }
			}

			add_trait = zodiac_pisces
		}
	}
}

add_western_zodiac_trait_effect = {
	custom_tooltip = { text = gain_zodiac_trait_effect_tt }

	if = {
		limit = { is_born_under_Aries_trigger = yes }
		add_trait = zodiac_aries
	}
	else_if = {
		limit = { is_born_under_Taurus_trigger = yes }
		add_trait = zodiac_taurus
	}
	else_if = {
		limit = { is_born_under_Gemini_trigger = yes }
		add_trait = zodiac_gemini
	}
	else_if = {
		limit = { is_born_under_Cancer_trigger = yes }
		add_trait = zodiac_cancer
	}
	else_if = {
		limit = { is_born_under_Leo_trigger = yes }
		add_trait = zodiac_leo
	}
	else_if = {
		limit = { is_born_under_Virgo_trigger = yes }
		add_trait = zodiac_virgo
	}
	else_if = {
		limit = { is_born_under_Libra_trigger = yes }
		add_trait = zodiac_libra
	}
	else_if = {
		limit = { is_born_under_Scorpius_trigger = yes }
		add_trait = zodiac_scorpio
	}
	else_if = {
		limit = { is_born_under_Sagittarius_trigger = yes }
		add_trait = zodiac_sagittarius
	}
	else_if = {
		limit = { is_born_under_Capricorn_trigger = yes }
		add_trait = zodiac_capricorn
	}
	else_if = {
		limit = { is_born_under_Aquarius_trigger = yes }
		add_trait = zodiac_aquarius
	}
	else_if = {
		limit = { is_born_under_Pisces_trigger = yes }
		add_trait = zodiac_pisces
	}
}

# If run once, this will set a flag on ONE ingredient. If run twice, it will set a second flag on another ingredient...
select_random_hermetic_ingredient_herb_effect = {
	# Select first ingredient
	if = {
		limit = {
			NOT = {
				any_artifact = {
					OR = {
						has_artifact_flag = selected_ingredient_1
						has_artifact_flag = selected_ingredient_2
					}
				}
			}
		}

		random_artifact = {
			limit = { is_ingredient_herb_trigger = yes }

			set_artifact_flag = selected_ingredient_1
		}
	}
	# Select second ingredient
	else_if = {
		limit = {
			NOT = {
				any_artifact = {
					has_artifact_flag = selected_ingredient_2
				}
			}
		}

		random_artifact = {
			limit = {
				is_ingredient_herb_trigger = yes
				NOT = { has_artifact_flag = selected_ingredient_1 }
			}

			set_artifact_flag = selected_ingredient_2
		}
	}
}

select_random_hermetic_ingredient_animal_part_effect = {
	# Select first ingredient
	if = {
		limit = {
			NOT = {
				any_artifact = {
					OR = {
						has_artifact_flag = selected_ingredient_1
						has_artifact_flag = selected_ingredient_2
					}
				}
			}
		}

		random_artifact = {
			limit = { is_ingredient_animal_part_trigger = yes }

			set_artifact_flag = selected_ingredient_1
		}
	}
	# Select second ingredient
	else_if = {
		limit = {
			NOT = {
				any_artifact = {
					has_artifact_flag = selected_ingredient_2
				}
			}
		}

		random_artifact = {
			limit = {
				is_ingredient_animal_part_trigger = yes
				NOT = { has_artifact_flag = selected_ingredient_1 }
			}

			set_artifact_flag = selected_ingredient_2
		}
	}
}

select_random_hermetic_ingredient_powder_effect = {
	# Select first ingredient
	if = {
		limit = {
			NOT = {
				any_artifact = {
					OR = {
						has_artifact_flag = selected_ingredient_1
						has_artifact_flag = selected_ingredient_2
					}
				}
			}
		}

		random_artifact = {
			limit = { is_ingredient_powder_trigger = yes }

			set_artifact_flag = selected_ingredient_1
		}
	}
	# Select second ingredient
	else_if = {
		limit = {
			NOT = {
				any_artifact = {
					has_artifact_flag = selected_ingredient_2
				}
			}
		}

		random_artifact = {
			limit = {
				is_ingredient_powder_trigger = yes
				NOT = { has_artifact_flag = selected_ingredient_1 }
			}

			set_artifact_flag = selected_ingredient_2
		}
	}
}

select_random_hermetic_ingredient_liquid_effect = {
	# Select first ingredient
	if = {
		limit = {
			NOT = {
				any_artifact = {
					OR = {
						has_artifact_flag = selected_ingredient_1
						has_artifact_flag = selected_ingredient_2
					}
				}
			}
		}

		random_artifact = {
			limit = { is_ingredient_liquid_trigger = yes }

			set_artifact_flag = selected_ingredient_1
		}
	}
	# Select second ingredient
	else_if = {
		limit = {
			NOT = {
				any_artifact = {
					has_artifact_flag = selected_ingredient_2
				}
			}
		}

		random_artifact = {
			limit = {
				is_ingredient_liquid_trigger = yes
				NOT = { has_artifact_flag = selected_ingredient_1 }
			}

			set_artifact_flag = selected_ingredient_2
		}
	}
}

# When it doesn't matter if it's a herb/animal part/metal/liquid
select_random_hermetic_ingredient_effect = {
	if = {
		limit = {
			has_selected_ingredient_1_trigger = no
			any_artifact = {
				has_artifact_flag = ingredient
			}
		}

		random_artifact = {
			limit = { has_artifact_flag = ingredient }

			set_artifact_flag = selected_ingredient_1
		}
	}
	else_if = {
		limit = {
			has_selected_ingredient_2_trigger = no
			any_artifact = {
				has_artifact_flag = ingredient
			}
		}

		random_artifact = {
			limit = {
				has_artifact_flag = ingredient

				NOR = {
					has_artifact_flag = selected_ingredient_1
					has_artifact_flag = selected_ingredient_2
				}
			}

			set_artifact_flag = selected_ingredient_2
		}
	}
}

select_random_hermetic_ingredient_prefer_new_effect = {
	if = {
		limit = {
			has_selected_ingredient_1_trigger = no
			any_artifact = {
				has_artifact_flag = ingredient
			}
		}

		random_artifact = {
			limit = { has_artifact_flag = ingredient }
			
			preferred_limit = {
				new_ingredient_trigger = yes
			}

			set_artifact_flag = selected_ingredient_1
		}
	}
	else_if = {
		limit = {
			has_selected_ingredient_2_trigger = no
			any_artifact = {
				has_artifact_flag = ingredient
			}
		}

		random_artifact = {
			limit = {
				has_artifact_flag = ingredient

				NOR = {
					has_artifact_flag = selected_ingredient_1
					has_artifact_flag = selected_ingredient_2
				}
			}
			
			preferred_limit = {
				new_ingredient_trigger = yes
			}

			set_artifact_flag = selected_ingredient_2
		}
	}
}

select_random_hermetic_ingredient_prefer_healing_effect = {
	if = {
		limit = {
			has_selected_ingredient_1_trigger = no
			any_artifact = {
				has_artifact_flag = ingredient
			}
		}

		random_artifact = {
			limit = { has_artifact_flag = ingredient }
			
			preferred_limit = {
				ingredient_is_perceived_healthy_trigger = yes
				ingredient_is_unhealthy_trigger = no
				new_ingredient_trigger = no
			}
			
			preferred_limit = {
				ingredient_is_unhealthy_trigger = no
				new_ingredient_trigger = no
			}
			
			preferred_limit = {
				ingredient_is_perceived_healthy_trigger = yes
				ingredient_is_unhealthy_trigger = no
			}
			
			preferred_limit = {
				ingredient_is_perceived_healthy_trigger = yes
				new_ingredient_trigger = no
			}
			
			preferred_limit = {
				ingredient_is_unhealthy_trigger = no
			}
			
			preferred_limit = {
				ingredient_is_perceived_healthy_trigger = yes
			}

			set_artifact_flag = selected_ingredient_1
		}
	}
	else_if = {
		limit = {
			has_selected_ingredient_2_trigger = no
			any_artifact = {
				has_artifact_flag = ingredient
			}
		}

		random_artifact = {
			limit = {
				has_artifact_flag = ingredient

				NOR = {
					has_artifact_flag = selected_ingredient_1
					has_artifact_flag = selected_ingredient_2
				}
			}
			
			preferred_limit = {
				ingredient_is_perceived_healthy_trigger = yes
				ingredient_is_unhealthy_trigger = no
				new_ingredient_trigger = no
			}
			
			preferred_limit = {
				ingredient_is_unhealthy_trigger = no
				new_ingredient_trigger = no
			}
			
			preferred_limit = {
				ingredient_is_perceived_healthy_trigger = yes
				ingredient_is_unhealthy_trigger = no
			}
			
			preferred_limit = {
				ingredient_is_perceived_healthy_trigger = yes
				new_ingredient_trigger = no
			}
			
			preferred_limit = {
				ingredient_is_unhealthy_trigger = no
			}
			
			preferred_limit = {
				ingredient_is_perceived_healthy_trigger = yes
			}

			set_artifact_flag = selected_ingredient_2
		}
	}
}

select_random_hermetic_ingredient_prefer_harmful_effect = {
	if = {
		limit = {
			has_selected_ingredient_1_trigger = no
			any_artifact = {
				has_artifact_flag = ingredient
			}
		}

		random_artifact = {
			limit = { has_artifact_flag = ingredient }
			
			preferred_limit = {
				ingredient_is_unhealthy_trigger = yes
				new_ingredient_trigger = no
			}
			
			preferred_limit = {
				ingredient_is_unhealthy_trigger = yes
			}
			
			preferred_limit = {
				ingredient_is_perceived_healthy_trigger = no
				new_ingredient_trigger = no
			}
			
			preferred_limit = {
				ingredient_is_perceived_healthy_trigger = no
			}

			set_artifact_flag = selected_ingredient_1
		}
	}
	else_if = {
		limit = {
			has_selected_ingredient_2_trigger = no
			any_artifact = {
				has_artifact_flag = ingredient
			}
		}

		random_artifact = {
			limit = {
				has_artifact_flag = ingredient

				NOR = {
					has_artifact_flag = selected_ingredient_1
					has_artifact_flag = selected_ingredient_2
				}
			}
			
			preferred_limit = {
				ingredient_is_unhealthy_trigger = yes
				new_ingredient_trigger = no
			}
			
			preferred_limit = {
				ingredient_is_unhealthy_trigger = yes
			}
			
			preferred_limit = {
				ingredient_is_perceived_healthy_trigger = no
				new_ingredient_trigger = no
			}
			
			preferred_limit = {
				ingredient_is_perceived_healthy_trigger = no
			}

			set_artifact_flag = selected_ingredient_2
		}
	}
}

# For clearing selection of ingredients
remove_selection_of_ingredients_effect = {
	hidden_effect = {
		any_artifact = {
			clr_artifact_flag = selected_ingredient_1
			clr_artifact_flag = selected_ingredient_2
		}
	}
}

# For removing the ingredient in question
destroy_selected_ingredient_1_effect = {
	custom_tooltip = {
		text = destroy_selected_ingredient_1_tt

		random_artifact = {
			limit = { has_artifact_flag = selected_ingredient_1 }

			destroy_artifact = yes
		}
	}
}

# For removing the ingredient in question
destroy_selected_ingredient_2_effect = {
	custom_tooltip = {
		text = destroy_selected_ingredient_2_tt

		random_artifact = {
			limit = { has_artifact_flag = selected_ingredient_2 }

			destroy_artifact = yes
		}
	}
}

# For removing both selected ingredients
destroy_selected_ingredient_1_and_2_effect = {
	custom_tooltip = {
		text = destroy_selected_ingredient_1_and_2_tt

		any_artifact = {
			limit = {
				OR = {
					has_artifact_flag = selected_ingredient_1
					has_artifact_flag = selected_ingredient_2
				}
			}

			destroy_artifact = yes
		}
	}
}

# For removing the ingredient in question PLUS a random other one (unnamed in tooltip)
destroy_selected_ingredient_1_plus_random_other_ingredient_effect = {
	custom_tooltip = {
		text = destroy_selected_ingredient_1_plus_random_other_ingredient_tt

		random_artifact = {
			limit = { has_artifact_flag = selected_ingredient_1 }
			destroy_artifact = yes
		}

		random_artifact = {
			limit = { has_artifact_flag = ingredient }
			destroy_artifact = yes
		}
	}
}

destroy_random_herb_ingredient_effect = {
	random_artifact = {
		limit = {
			has_artifact_flag = ingredient
			is_ingredient_herb_trigger = yes
		}

		destroy_artifact = yes
	}
}

destroy_random_animal_part_ingredient_effect = {
	random_artifact = {
		limit = {
			has_artifact_flag = ingredient
			is_ingredient_animal_part_trigger = yes
		}

		destroy_artifact = yes
	}
}

destroy_random_powder_ingredient_effect = {
	random_artifact = {
		limit = {
			has_artifact_flag = ingredient
			is_ingredient_powder_trigger = yes
		}

		destroy_artifact = yes
	}
}

destroy_random_liquid_ingredient_effect = {
	random_artifact = {
		limit = {
			has_artifact_flag = ingredient
			is_ingredient_liquid_trigger = yes
		}

		destroy_artifact = yes
	}
}

destroy_random_herb_or_animal_part_ingredients_effect = {
	hidden_effect = {
		random_list = {
			5 = {
				trigger = { has_a_herb_ingredient_trigger = yes }

				destroy_random_herb_ingredient_effect = yes
			}

			5 = {
				trigger = { has_an_animal_part_ingredient_trigger = yes }

				destroy_random_animal_part_ingredient_effect = yes
			}

			20 = {
				trigger = {
					any_artifact = {
						count >= 2
						is_ingredient_herb_trigger = yes
						has_artifact_flag = ingredient
					}
				}

				destroy_random_herb_ingredient_effect = yes
				destroy_random_herb_ingredient_effect = yes
			}

			20 = {
				trigger = {
					any_artifact = {
						count >= 2
						is_ingredient_animal_part_trigger = yes
						has_artifact_flag = ingredient
					}
				}

				destroy_random_animal_part_ingredient_effect = yes
				destroy_random_animal_part_ingredient_effect = yes
			}

			20 = {
				trigger = {
					has_a_herb_ingredient_trigger = yes
					has_an_animal_part_ingredient_trigger = yes
				}

				destroy_random_herb_ingredient_effect = yes
				destroy_random_animal_part_ingredient_effect = yes
			}

			20 = {
				trigger = {
					any_artifact = {
						count >= 3
						is_ingredient_herb_trigger = yes
						has_artifact_flag = ingredient
					}
				}

				destroy_random_herb_ingredient_effect = yes
				destroy_random_herb_ingredient_effect = yes
				destroy_random_herb_ingredient_effect = yes
			}

			20 = {
				trigger = {
					any_artifact = {
						count >= 3
						is_ingredient_animal_part_trigger = yes
						has_artifact_flag = ingredient
					}
				}

				destroy_random_animal_part_ingredient_effect = yes
				destroy_random_animal_part_ingredient_effect = yes
				destroy_random_animal_part_ingredient_effect = yes
			}

			50 = {
				trigger = {
					any_artifact = {
						count >= 2
						is_ingredient_herb_trigger = yes
						has_artifact_flag = ingredient
					}

					has_an_animal_part_ingredient_trigger = yes
				}

				destroy_random_herb_ingredient_effect = yes
				destroy_random_herb_ingredient_effect = yes
				destroy_random_animal_part_ingredient_effect = yes
			}

			50 = {
				trigger = {
					any_artifact = {
						count >= 2
						is_ingredient_animal_part_trigger = yes
						has_artifact_flag = ingredient
					}

					has_a_herb_ingredient_trigger = yes
				}

				destroy_random_herb_ingredient_effect = yes
				destroy_random_animal_part_ingredient_effect = yes
				destroy_random_animal_part_ingredient_effect = yes
			}
		}
	}
}

destroy_random_ingredients_effect = {
	custom_tooltip = {
		text = random_ingredients_are_destroyed_tt

		random_list = {
			5 = {
				random_artifact = {
					limit = { has_artifact_flag = ingredient }

					destroy_artifact = yes
				}
			}

			50 = {
				trigger = {
					any_artifact = {
						count >= 2
						has_artifact_flag = ingredient
					}
				}

				while = {
					count = 2

					random_artifact = {
						limit = { has_artifact_flag = ingredient }
						destroy_artifact = yes
					}
				}
			}

			100 = {
				trigger = {
					any_artifact = {
						count >= 3
						has_artifact_flag = ingredient
					}
				}

				while = {
					count = 3

					random_artifact = {
						limit = { has_artifact_flag = ingredient }
						destroy_artifact = yes
					}
				}
			}

			150 = {
				trigger = {
					any_artifact = {
						count >= 4
						has_artifact_flag = ingredient
					}
				}

				while = {
					count = 4

					random_artifact = {
						limit = { has_artifact_flag = ingredient }
						destroy_artifact = yes
					}
				}
			}
		}
	}
}

destroy_all_ingredients_effect = {
	custom_tooltip = {
		text = destroy_all_ingredients_tt

		if = {
			limit = {
				any_artifact = {
					has_artifact_flag = ingredient
				}
			}

			any_artifact = {
				limit = { has_artifact_flag = ingredient }
				destroy_artifact = yes
			}
		}
	}
}

calculate_health_level_of_ingredient_1_effect = {
	hidden_effect = {
		set_variable = { # Reset potion quality
			which = local_current_potion_quality
			value = 0
		}

		if = {
			limit = {
				any_artifact = {
					has_artifact_flag = selected_ingredient_1
					ingredient_is_perceived_healthy_trigger = yes
					ingredient_is_unhealthy_trigger = no
				}
			}
			
			if = {
				limit = {
					society_member_of = the_alchemists
					NOR = {
						has_character_flag = potion_is_harmful
						has_character_flag = potion_is_sneaky_harmful
					}
				}
				
				if = {
					limit = {
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 100
						}
					}
					
					change_variable = {
						which = local_current_potion_quality
						value = 2
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 75
						}
					}
					
					change_variable = {
						which = local_current_potion_quality
						value = 1.75
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 50
						}
					}
					
					change_variable = {
						which = local_current_potion_quality
						value = 1.5
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 25
						}
					}
					
					change_variable = {
						which = local_current_potion_quality
						value = 1.25
					}
				}
				
				else = {
					change_variable = {
						which = local_current_potion_quality
						value = 1
					}
				}
			}
			
			else_if = {
				limit = {
					society_member_of = the_alchemists
					OR = {
						has_character_flag = potion_is_harmful
						has_character_flag = potion_is_sneaky_harmful
					}
				}
				
				if = {
					limit = {
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 100
						}
					}
					
					change_variable = {
						which = local_current_potion_quality
						value = 0.2
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 75
						}
					}
					
					change_variable = {
						which = local_current_potion_quality
						value = 0.4
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 50
						}
					}
					
					change_variable = {
						which = local_current_potion_quality
						value = 0.6
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 25
						}
					}
					
					change_variable = {
						which = local_current_potion_quality
						value = 0.8
					}
				}
				
				else = {
					change_variable = {
						which = local_current_potion_quality
						value = 1
					}
				}
			}
			
			else = {
				change_variable = {
					which = local_current_potion_quality
					value = 1
				}
			}
		}

		else_if = {
			limit = {
				any_artifact = {
					has_artifact_flag = selected_ingredient_1
					ingredient_is_unhealthy_trigger = yes
				}
			}
			
			if = {
				limit = {
					society_member_of = the_alchemists
					OR = {
						has_character_flag = potion_is_harmful
						has_character_flag = potion_is_sneaky_harmful
					}
				}
				
				if = {
					limit = {
						check_variable = {
							which = alchemist_poison_knowledge
							value >= 100
						}
					}
					
					change_variable = {
						which = local_current_potion_quality
						value = -2
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_poison_knowledge
							value >= 75
						}
					}
					
					change_variable = {
						which = local_current_potion_quality
						value = -1.75
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_poison_knowledge
							value >= 50
						}
					}
					
					change_variable = {
						which = local_current_potion_quality
						value = -1.5
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_poison_knowledge
							value >= 25
						}
					}
					
					change_variable = {
						which = local_current_potion_quality
						value = -1.25
					}
				}
				
				else = {
					change_variable = {
						which = local_current_potion_quality
						value = -1
					}
				}
			}
			
			else_if = {
				limit = {
					society_member_of = the_alchemists
					NOR = {
						has_character_flag = potion_is_harmful
						has_character_flag = potion_is_sneaky_harmful
					}
				}
				
				if = {
					limit = {
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 100
						}
					}
					
					change_variable = {
						which = local_current_potion_quality
						value = -0.2
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 75
						}
					}
					
					change_variable = {
						which = local_current_potion_quality
						value = -0.4
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 50
						}
					}
					
					change_variable = {
						which = local_current_potion_quality
						value = -0.6
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 25
						}
					}
					
					change_variable = {
						which = local_current_potion_quality
						value = -0.8
					}
				}
				
				else = {
					change_variable = {
						which = local_current_potion_quality
						value = -1
					}
				}
			}
			
			else = {
				change_variable = {
					which = local_current_potion_quality
					value = -1
				}
			}
		}
	}
}

calculate_health_level_of_ingredient_2_effect = {
	hidden_effect = {
		set_variable = { # Reset potion quality
			which = local_current_potion_quality
			value = 0
		}

		if = {
			limit = {
				any_artifact = {
					has_artifact_flag = selected_ingredient_2
					ingredient_is_perceived_healthy_trigger = yes
					ingredient_is_unhealthy_trigger = no
				}
			}
			
			if = {
				limit = {
					society_member_of = the_alchemists
					NOR = {
						has_character_flag = potion_is_harmful
						has_character_flag = potion_is_sneaky_harmful
					}
				}
				
				if = {
					limit = {
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 100
						}
					}
					
					change_variable = {
						which = local_current_potion_quality
						value = 2
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 75
						}
					}
					
					change_variable = {
						which = local_current_potion_quality
						value = 1.75
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 50
						}
					}
					
					change_variable = {
						which = local_current_potion_quality
						value = 1.5
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 25
						}
					}
					
					change_variable = {
						which = local_current_potion_quality
						value = 1.25
					}
				}
				
				else = {
					change_variable = {
						which = local_current_potion_quality
						value = 1
					}
				}
			}
			
			else_if = {
				limit = {
					society_member_of = the_alchemists
					OR = {
						has_character_flag = potion_is_harmful
						has_character_flag = potion_is_sneaky_harmful
					}
				}
				
				if = {
					limit = {
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 100
						}
					}
					
					change_variable = {
						which = local_current_potion_quality
						value = 0.2
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 75
						}
					}
					
					change_variable = {
						which = local_current_potion_quality
						value = 0.4
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 50
						}
					}
					
					change_variable = {
						which = local_current_potion_quality
						value = 0.6
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 25
						}
					}
					
					change_variable = {
						which = local_current_potion_quality
						value = 0.8
					}
				}
				
				else = {
					change_variable = {
						which = local_current_potion_quality
						value = 1
					}
				}
			}
			
			else = {
				change_variable = {
					which = local_current_potion_quality
					value = 1
				}
			}
		}
		
		else_if = {
			limit = {
				any_artifact = {
					has_artifact_flag = selected_ingredient_2
					ingredient_is_unhealthy_trigger = yes
				}
			}
			
			if = {
				limit = {
					society_member_of = the_alchemists
					OR = {
						has_character_flag = potion_is_harmful
						has_character_flag = potion_is_sneaky_harmful
					}
				}
				
				if = {
					limit = {
						check_variable = {
							which = alchemist_poison_knowledge
							value >= 100
						}
					}
					
					change_variable = {
						which = local_current_potion_quality
						value = -2
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_poison_knowledge
							value >= 75
						}
					}
					
					change_variable = {
						which = local_current_potion_quality
						value = -1.75
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_poison_knowledge
							value >= 50
						}
					}
					
					change_variable = {
						which = local_current_potion_quality
						value = -1.5
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_poison_knowledge
							value >= 25
						}
					}
					
					change_variable = {
						which = local_current_potion_quality
						value = -1.25
					}
				}
				
				else = {
					change_variable = {
						which = local_current_potion_quality
						value = -1
					}
				}
			}
			
			else_if = {
				limit = {
					society_member_of = the_alchemists
					NOR = {
						has_character_flag = potion_is_harmful
						has_character_flag = potion_is_sneaky_harmful
					}
				}
				
				if = {
					limit = {
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 100
						}
					}
					
					change_variable = {
						which = local_current_potion_quality
						value = -0.2
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 75
						}
					}
					
					change_variable = {
						which = local_current_potion_quality
						value = -0.4
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 50
						}
					}
					
					change_variable = {
						which = local_current_potion_quality
						value = -0.6
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 25
						}
					}
					
					change_variable = {
						which = local_current_potion_quality
						value = -0.8
					}
				}
				
				else = {
					change_variable = {
						which = local_current_potion_quality
						value = -1
					}
				}
			}
			
			else = {
				change_variable = {
					which = local_current_potion_quality
					value = -1
				}
			}
		}
	}
}

calculate_health_level_of_ingredient_1_and_2_effect = {
	hidden_effect = {
		set_variable = { # Reset potion quality
			which = local_current_potion_quality
			value = 0
		}

		any_artifact = {
			limit = {
				OR = {
					has_artifact_flag = selected_ingredient_1
					has_artifact_flag = selected_ingredient_2
				}
			}

			if = {
				limit = {
					ingredient_is_perceived_healthy_trigger = yes
					ingredient_is_unhealthy_trigger = no
				}
				
				PREV = {
					if = {
						limit = {
							society_member_of = the_alchemists
							NOR = {
								has_character_flag = potion_is_harmful
								has_character_flag = potion_is_sneaky_harmful
							}
						}
						
						if = {
							limit = {
								check_variable = {
									which = alchemist_healing_knowledge
									value >= 100
								}
							}
							
							change_variable = {
								which = local_current_potion_quality
								value = 2
							}
						}
						
						else_if = {
							limit = {
								check_variable = {
									which = alchemist_healing_knowledge
									value >= 75
								}
							}
							
							change_variable = {
								which = local_current_potion_quality
								value = 1.75
							}
						}
						
						else_if = {
							limit = {
								check_variable = {
									which = alchemist_healing_knowledge
									value >= 50
								}
							}
							
							change_variable = {
								which = local_current_potion_quality
								value = 1.5
							}
						}
						
						else_if = {
							limit = {
								check_variable = {
									which = alchemist_healing_knowledge
									value >= 25
								}
							}
							
							change_variable = {
								which = local_current_potion_quality
								value = 1.25
							}
						}
						
						else = {
							change_variable = {
								which = local_current_potion_quality
								value = 1
							}
						}
					}
					
					else_if = {
						limit = {
							society_member_of = the_alchemists
							OR = {
								has_character_flag = potion_is_harmful
								has_character_flag = potion_is_sneaky_harmful
							}
						}
						
						if = {
							limit = {
								check_variable = {
									which = alchemist_healing_knowledge
									value >= 100
								}
							}
							
							change_variable = {
								which = local_current_potion_quality
								value = 0.2
							}
						}
						
						else_if = {
							limit = {
								check_variable = {
									which = alchemist_healing_knowledge
									value >= 75
								}
							}
							
							change_variable = {
								which = local_current_potion_quality
								value = 0.4
							}
						}
						
						else_if = {
							limit = {
								check_variable = {
									which = alchemist_healing_knowledge
									value >= 50
								}
							}
							
							change_variable = {
								which = local_current_potion_quality
								value = 0.6
							}
						}
						
						else_if = {
							limit = {
								check_variable = {
									which = alchemist_healing_knowledge
									value >= 25
								}
							}
							
							change_variable = {
								which = local_current_potion_quality
								value = 0.8
							}
						}
						
						else = {
							change_variable = {
								which = local_current_potion_quality
								value = 1
							}
						}
					}
					
					else = {
						change_variable = {
							which = local_current_potion_quality
							value = 1
						}
					}
				}
			}
			
			else_if = {
				limit = {
					ingredient_is_unhealthy_trigger = yes
				}
				
				PREV = {
					if = {
						limit = {
							society_member_of = the_alchemists
							OR = {
								has_character_flag = potion_is_harmful
								has_character_flag = potion_is_sneaky_harmful
							}
						}
						
						if = {
							limit = {
								check_variable = {
									which = alchemist_poison_knowledge
									value >= 100
								}
							}
							
							change_variable = {
								which = local_current_potion_quality
								value = -2
							}
						}
						
						else_if = {
							limit = {
								check_variable = {
									which = alchemist_poison_knowledge
									value >= 75
								}
							}
							
							change_variable = {
								which = local_current_potion_quality
								value = -1.75
							}
						}
						
						else_if = {
							limit = {
								check_variable = {
									which = alchemist_poison_knowledge
									value >= 50
								}
							}
							
							change_variable = {
								which = local_current_potion_quality
								value = -1.5
							}
						}
						
						else_if = {
							limit = {
								check_variable = {
									which = alchemist_poison_knowledge
									value >= 25
								}
							}
							
							change_variable = {
								which = local_current_potion_quality
								value = -1.25
							}
						}
						
						else = {
							change_variable = {
								which = local_current_potion_quality
								value = -1
							}
						}
					}
					
					else_if = {
						limit = {
							society_member_of = the_alchemists
							NOR = {
								has_character_flag = potion_is_harmful
								has_character_flag = potion_is_sneaky_harmful
							}
						}
						
						if = {
							limit = {
								check_variable = {
									which = alchemist_healing_knowledge
									value >= 100
								}
							}
							
							change_variable = {
								which = local_current_potion_quality
								value = -0.2
							}
						}
						
						else_if = {
							limit = {
								check_variable = {
									which = alchemist_healing_knowledge
									value >= 75
								}
							}
							
							change_variable = {
								which = local_current_potion_quality
								value = -0.4
							}
						}
						
						else_if = {
							limit = {
								check_variable = {
									which = alchemist_healing_knowledge
									value >= 50
								}
							}
							
							change_variable = {
								which = local_current_potion_quality
								value = -0.6
							}
						}
						
						else_if = {
							limit = {
								check_variable = {
									which = alchemist_healing_knowledge
									value >= 25
								}
							}
							
							change_variable = {
								which = local_current_potion_quality
								value = -0.8
							}
						}
						
						else = {
							change_variable = {
								which = local_current_potion_quality
								value = -1
							}
						}
					}
					
					else = {
						change_variable = {
							which = local_current_potion_quality
							value = -1
						}
					}
				}
			}
		}
	}
}

calculate_health_level_of_all_ingredients_effect = { # Not used by the RAS
	hidden_effect = {
		set_variable = { # Reset potion quality
			which = local_current_potion_quality
			value = 0
		}
		
		any_artifact = {
			limit = { has_artifact_flag = ingredient }

			if = {
				limit = {
					ingredient_is_perceived_healthy_trigger = yes
					ingredient_is_unhealthy_trigger = no
				}

				change_variable = {
					which = local_current_potion_quality
					value = 1
				}
			}
			else_if = {
				limit = { ingredient_is_unhealthy_trigger = yes }

				change_variable = {
					which = local_current_potion_quality
					value = -1
				}
			}
		}
	}
}

save_ingredient_1_flag_lab_experiment_effect = {
	hidden_tooltip = {
		random_artifact = {
			limit = { has_artifact_flag = selected_ingredient_1 }

			trigger_switch = {
				on_trigger = artifact_type
				
				ingredient_herb1 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb1
						set_character_flag = lab_experiment_ingredient_ingredient_herb1
					}
				}
				ingredient_herb2 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb2
						set_character_flag = lab_experiment_ingredient_ingredient_herb2
					}
				}
				ingredient_herb3 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb3
						set_character_flag = lab_experiment_ingredient_ingredient_herb3
					}
				}
				ingredient_herb4 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb4
						set_character_flag = lab_experiment_ingredient_ingredient_herb4
					}
				}
				ingredient_herb5 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb5
						set_character_flag = lab_experiment_ingredient_ingredient_herb5
					}
				}
				ingredient_herb6 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb6
						set_character_flag = lab_experiment_ingredient_ingredient_herb6
					}
				}
				ingredient_herb7 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb7
						set_character_flag = lab_experiment_ingredient_ingredient_herb7
					}
				}
				ingredient_herb8 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb8
						set_character_flag = lab_experiment_ingredient_ingredient_herb8
					}
				}
				ingredient_herb9 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb9
						set_character_flag = lab_experiment_ingredient_ingredient_herb9
					}
				}
				ingredient_herb10 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb10
						set_character_flag = lab_experiment_ingredient_ingredient_herb10
					}
				}
				ingredient_herb11 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb11
						set_character_flag = lab_experiment_ingredient_ingredient_herb11
					}
				}
				ingredient_herb12 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb12
						set_character_flag = lab_experiment_ingredient_ingredient_herb12
					}
				}
				ingredient_herb13 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb13
						set_character_flag = lab_experiment_ingredient_ingredient_herb13
					}
				}
				ingredient_herb14 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb14
						set_character_flag = lab_experiment_ingredient_ingredient_herb14
					}
				}
				ingredient_herb15 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb15
						set_character_flag = lab_experiment_ingredient_ingredient_herb15
					}
				}
				ingredient_animal1 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal1
						set_character_flag = lab_experiment_ingredient_ingredient_animal1
					}
				}
				ingredient_animal2 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal2
						set_character_flag = lab_experiment_ingredient_ingredient_animal2
					}
				}
				ingredient_animal3 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal3
						set_character_flag = lab_experiment_ingredient_ingredient_animal3
					}
				}
				ingredient_animal4 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal4
						set_character_flag = lab_experiment_ingredient_ingredient_animal4
					}
				}
				ingredient_animal5 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal5
						set_character_flag = lab_experiment_ingredient_ingredient_animal5
					}
				}
				ingredient_animal6 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal6
						set_character_flag = lab_experiment_ingredient_ingredient_animal6
					}
				}
				ingredient_animal7 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal7
						set_character_flag = lab_experiment_ingredient_ingredient_animal7
					}
				}
				ingredient_animal8 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal8
						set_character_flag = lab_experiment_ingredient_ingredient_animal8
					}
				}
				ingredient_animal9 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal9
						set_character_flag = lab_experiment_ingredient_ingredient_animal9
					}
				}
				ingredient_metal_exotic1 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic1
						set_character_flag = lab_experiment_ingredient_ingredient_metal_exotic1
					}
				}
				ingredient_metal_exotic2 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic2
						set_character_flag = lab_experiment_ingredient_ingredient_metal_exotic2
					}
				}
				ingredient_metal_exotic3 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic3
						set_character_flag = lab_experiment_ingredient_ingredient_metal_exotic3
					}
				}
				ingredient_metal_exotic4 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic4
						set_character_flag = lab_experiment_ingredient_ingredient_metal_exotic4
					}
				}
				ingredient_metal_exotic5 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic5
						set_character_flag = lab_experiment_ingredient_ingredient_metal_exotic5
					}
				}
				ingredient_metal_exotic6 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic6
						set_character_flag = lab_experiment_ingredient_ingredient_metal_exotic6
					}
				}
				ingredient_metal_exotic7 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic7
						set_character_flag = lab_experiment_ingredient_ingredient_metal_exotic7
					}
				}
				ingredient_metal_exotic8 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic8
						set_character_flag = lab_experiment_ingredient_ingredient_metal_exotic8
					}
				}
				ingredient_metal_exotic9 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic9
						set_character_flag = lab_experiment_ingredient_ingredient_metal_exotic9
					}
				}
				ingredient_metal_exotic10 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic10
						set_character_flag = lab_experiment_ingredient_ingredient_metal_exotic10
					}
				}
				ingredient_metal_exotic11 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic11
						set_character_flag = lab_experiment_ingredient_ingredient_metal_exotic11
					}
				}
				ingredient_metal_exotic12 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic12
						set_character_flag = lab_experiment_ingredient_ingredient_metal_exotic12
					}
				}
				ingredient_metal_exotic13 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic13
						set_character_flag = lab_experiment_ingredient_ingredient_metal_exotic13
					}
				}
				ingredient_metal_exotic14 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic14
						set_character_flag = lab_experiment_ingredient_ingredient_metal_exotic14
					}
				}
				ingredient_misc_powder_1 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_misc_powder_1
						set_character_flag = lab_experiment_ingredient_ingredient_misc_powder_1
					}
				}
				ingredient_misc_powder_2 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_misc_powder_2
						set_character_flag = lab_experiment_ingredient_ingredient_misc_powder_2
					}
				}
				ingredient_misc_powder_3 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_misc_powder_3
						set_character_flag = lab_experiment_ingredient_ingredient_misc_powder_3
					}
				}
				ingredient_misc_powder_4 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_misc_powder_4
						set_character_flag = lab_experiment_ingredient_ingredient_misc_powder_4
					}
				}
				ingredient_misc_powder_5 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_misc_powder_5
						set_character_flag = lab_experiment_ingredient_ingredient_misc_powder_5
					}
				}
				ingredient_mineral_1 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_1
						set_character_flag = lab_experiment_ingredient_ingredient_mineral_1
					}
				}
				ingredient_mineral_2 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_2
						set_character_flag = lab_experiment_ingredient_ingredient_mineral_2
					}
				}
				ingredient_mineral_jade_1 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_jade_1
						set_character_flag = lab_experiment_ingredient_ingredient_mineral_jade_1
					}
				}
				ingredient_mineral_jade_2 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_jade_2
						set_character_flag = lab_experiment_ingredient_ingredient_mineral_jade_2
					}
				}
				ingredient_mineral_jade_3 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_jade_3
						set_character_flag = lab_experiment_ingredient_ingredient_mineral_jade_3
					}
				}
				ingredient_mineral_jade_4 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_jade_4
						set_character_flag = lab_experiment_ingredient_ingredient_mineral_jade_4
					}
				}
				ingredient_mineral_jade_5 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_jade_5
						set_character_flag = lab_experiment_ingredient_ingredient_mineral_jade_5
					}
				}
				ingredient_mineral_jade_6 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_jade_6
						set_character_flag = lab_experiment_ingredient_ingredient_mineral_jade_6
					}
				}
			}
		}
	}
}

save_ingredient_2_flag_lab_experiment_effect = {
	hidden_tooltip = {
		random_artifact = {
			limit = { has_artifact_flag = selected_ingredient_1 }

			trigger_switch = {
				on_trigger = artifact_type
				
				ingredient_herb1 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb1
						set_character_flag = lab_experiment_ingredient_ingredient_herb1
					}
				}
				ingredient_herb2 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb2
						set_character_flag = lab_experiment_ingredient_ingredient_herb2
					}
				}
				ingredient_herb3 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb3
						set_character_flag = lab_experiment_ingredient_ingredient_herb3
					}
				}
				ingredient_herb4 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb4
						set_character_flag = lab_experiment_ingredient_ingredient_herb4
					}
				}
				ingredient_herb5 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb5
						set_character_flag = lab_experiment_ingredient_ingredient_herb5
					}
				}
				ingredient_herb6 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb6
						set_character_flag = lab_experiment_ingredient_ingredient_herb6
					}
				}
				ingredient_herb7 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb7
						set_character_flag = lab_experiment_ingredient_ingredient_herb7
					}
				}
				ingredient_herb8 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb8
						set_character_flag = lab_experiment_ingredient_ingredient_herb8
					}
				}
				ingredient_herb9 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb9
						set_character_flag = lab_experiment_ingredient_ingredient_herb9
					}
				}
				ingredient_herb10 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb10
						set_character_flag = lab_experiment_ingredient_ingredient_herb10
					}
				}
				ingredient_herb11 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb11
						set_character_flag = lab_experiment_ingredient_ingredient_herb11
					}
				}
				ingredient_herb12 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb12
						set_character_flag = lab_experiment_ingredient_ingredient_herb12
					}
				}
				ingredient_herb13 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb13
						set_character_flag = lab_experiment_ingredient_ingredient_herb13
					}
				}
				ingredient_herb14 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb14
						set_character_flag = lab_experiment_ingredient_ingredient_herb14
					}
				}
				ingredient_herb15 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb15
						set_character_flag = lab_experiment_ingredient_ingredient_herb15
					}
				}
				ingredient_animal1 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal1
						set_character_flag = lab_experiment_ingredient_ingredient_animal1
					}
				}
				ingredient_animal2 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal2
						set_character_flag = lab_experiment_ingredient_ingredient_animal2
					}
				}
				ingredient_animal3 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal3
						set_character_flag = lab_experiment_ingredient_ingredient_animal3
					}
				}
				ingredient_animal4 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal4
						set_character_flag = lab_experiment_ingredient_ingredient_animal4
					}
				}
				ingredient_animal5 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal5
						set_character_flag = lab_experiment_ingredient_ingredient_animal5
					}
				}
				ingredient_animal6 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal6
						set_character_flag = lab_experiment_ingredient_ingredient_animal6
					}
				}
				ingredient_animal7 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal7
						set_character_flag = lab_experiment_ingredient_ingredient_animal7
					}
				}
				ingredient_animal8 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal8
						set_character_flag = lab_experiment_ingredient_ingredient_animal8
					}
				}
				ingredient_animal9 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal9
						set_character_flag = lab_experiment_ingredient_ingredient_animal9
					}
				}
				ingredient_metal_exotic1 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic1
						set_character_flag = lab_experiment_ingredient_ingredient_metal_exotic1
					}
				}
				ingredient_metal_exotic2 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic2
						set_character_flag = lab_experiment_ingredient_ingredient_metal_exotic2
					}
				}
				ingredient_metal_exotic3 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic3
						set_character_flag = lab_experiment_ingredient_ingredient_metal_exotic3
					}
				}
				ingredient_metal_exotic4 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic4
						set_character_flag = lab_experiment_ingredient_ingredient_metal_exotic4
					}
				}
				ingredient_metal_exotic5 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic5
						set_character_flag = lab_experiment_ingredient_ingredient_metal_exotic5
					}
				}
				ingredient_metal_exotic6 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic6
						set_character_flag = lab_experiment_ingredient_ingredient_metal_exotic6
					}
				}
				ingredient_metal_exotic7 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic7
						set_character_flag = lab_experiment_ingredient_ingredient_metal_exotic7
					}
				}
				ingredient_metal_exotic8 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic8
						set_character_flag = lab_experiment_ingredient_ingredient_metal_exotic8
					}
				}
				ingredient_metal_exotic9 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic9
						set_character_flag = lab_experiment_ingredient_ingredient_metal_exotic9
					}
				}
				ingredient_metal_exotic10 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic10
						set_character_flag = lab_experiment_ingredient_ingredient_metal_exotic10
					}
				}
				ingredient_metal_exotic11 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic11
						set_character_flag = lab_experiment_ingredient_ingredient_metal_exotic11
					}
				}
				ingredient_metal_exotic12 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic12
						set_character_flag = lab_experiment_ingredient_ingredient_metal_exotic12
					}
				}
				ingredient_metal_exotic13 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic13
						set_character_flag = lab_experiment_ingredient_ingredient_metal_exotic13
					}
				}
				ingredient_metal_exotic14 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic14
						set_character_flag = lab_experiment_ingredient_ingredient_metal_exotic14
					}
				}
				ingredient_misc_powder_1 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_misc_powder_1
						set_character_flag = lab_experiment_ingredient_ingredient_misc_powder_1
					}
				}
				ingredient_misc_powder_2 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_misc_powder_2
						set_character_flag = lab_experiment_ingredient_ingredient_misc_powder_2
					}
				}
				ingredient_misc_powder_3 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_misc_powder_3
						set_character_flag = lab_experiment_ingredient_ingredient_misc_powder_3
					}
				}
				ingredient_misc_powder_4 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_misc_powder_4
						set_character_flag = lab_experiment_ingredient_ingredient_misc_powder_4
					}
				}
				ingredient_misc_powder_5 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_misc_powder_5
						set_character_flag = lab_experiment_ingredient_ingredient_misc_powder_5
					}
				}
				ingredient_mineral_1 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_1
						set_character_flag = lab_experiment_ingredient_ingredient_mineral_1
					}
				}
				ingredient_mineral_2 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_2
						set_character_flag = lab_experiment_ingredient_ingredient_mineral_2
					}
				}
				ingredient_mineral_jade_1 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_jade_1
						set_character_flag = lab_experiment_ingredient_ingredient_mineral_jade_1
					}
				}
				ingredient_mineral_jade_2 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_jade_2
						set_character_flag = lab_experiment_ingredient_ingredient_mineral_jade_2
					}
				}
				ingredient_mineral_jade_3 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_jade_3
						set_character_flag = lab_experiment_ingredient_ingredient_mineral_jade_3
					}
				}
				ingredient_mineral_jade_4 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_jade_4
						set_character_flag = lab_experiment_ingredient_ingredient_mineral_jade_4
					}
				}
				ingredient_mineral_jade_5 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_jade_5
						set_character_flag = lab_experiment_ingredient_ingredient_mineral_jade_5
					}
				}
				ingredient_mineral_jade_6 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_jade_6
						set_character_flag = lab_experiment_ingredient_ingredient_mineral_jade_6
					}
				}
			}
		}
	}
}

save_ingredient_1_flag_self_experiment_effect = {
	hidden_tooltip = {
		random_artifact = {
			limit = { has_artifact_flag = selected_ingredient_1 }

			trigger_switch = {
				on_trigger = artifact_type
				
				ingredient_herb1 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb1
						set_character_flag = self_experiment_ingredient_ingredient_herb1
					}
				}
				ingredient_herb2 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb2
						set_character_flag = self_experiment_ingredient_ingredient_herb2
					}
				}
				ingredient_herb3 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb3
						set_character_flag = self_experiment_ingredient_ingredient_herb3
					}
				}
				ingredient_herb4 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb4
						set_character_flag = self_experiment_ingredient_ingredient_herb4
					}
				}
				ingredient_herb5 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb5
						set_character_flag = self_experiment_ingredient_ingredient_herb5
					}
				}
				ingredient_herb6 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb6
						set_character_flag = self_experiment_ingredient_ingredient_herb6
					}
				}
				ingredient_herb7 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb7
						set_character_flag = self_experiment_ingredient_ingredient_herb7
					}
				}
				ingredient_herb8 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb8
						set_character_flag = self_experiment_ingredient_ingredient_herb8
					}
				}
				ingredient_herb9 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb9
						set_character_flag = self_experiment_ingredient_ingredient_herb9
					}
				}
				ingredient_herb10 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb10
						set_character_flag = self_experiment_ingredient_ingredient_herb10
					}
				}
				ingredient_herb11 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb11
						set_character_flag = self_experiment_ingredient_ingredient_herb11
					}
				}
				ingredient_herb12 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb12
						set_character_flag = self_experiment_ingredient_ingredient_herb12
					}
				}
				ingredient_herb13 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb13
						set_character_flag = self_experiment_ingredient_ingredient_herb13
					}
				}
				ingredient_herb14 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb14
						set_character_flag = self_experiment_ingredient_ingredient_herb14
					}
				}
				ingredient_herb15 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb15
						set_character_flag = self_experiment_ingredient_ingredient_herb15
					}
				}
				ingredient_animal1 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal1
						set_character_flag = self_experiment_ingredient_ingredient_animal1
					}
				}
				ingredient_animal2 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal2
						set_character_flag = self_experiment_ingredient_ingredient_animal2
					}
				}
				ingredient_animal3 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal3
						set_character_flag = self_experiment_ingredient_ingredient_animal3
					}
				}
				ingredient_animal4 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal4
						set_character_flag = self_experiment_ingredient_ingredient_animal4
					}
				}
				ingredient_animal5 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal5
						set_character_flag = self_experiment_ingredient_ingredient_animal5
					}
				}
				ingredient_animal6 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal6
						set_character_flag = self_experiment_ingredient_ingredient_animal6
					}
				}
				ingredient_animal7 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal7
						set_character_flag = self_experiment_ingredient_ingredient_animal7
					}
				}
				ingredient_animal8 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal8
						set_character_flag = self_experiment_ingredient_ingredient_animal8
					}
				}
				ingredient_animal9 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal9
						set_character_flag = self_experiment_ingredient_ingredient_animal9
					}
				}
				ingredient_metal_exotic1 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic1
						set_character_flag = self_experiment_ingredient_ingredient_metal_exotic1
					}
				}
				ingredient_metal_exotic2 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic2
						set_character_flag = self_experiment_ingredient_ingredient_metal_exotic2
					}
				}
				ingredient_metal_exotic3 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic3
						set_character_flag = self_experiment_ingredient_ingredient_metal_exotic3
					}
				}
				ingredient_metal_exotic4 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic4
						set_character_flag = self_experiment_ingredient_ingredient_metal_exotic4
					}
				}
				ingredient_metal_exotic5 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic5
						set_character_flag = self_experiment_ingredient_ingredient_metal_exotic5
					}
				}
				ingredient_metal_exotic6 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic6
						set_character_flag = self_experiment_ingredient_ingredient_metal_exotic6
					}
				}
				ingredient_metal_exotic7 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic7
						set_character_flag = self_experiment_ingredient_ingredient_metal_exotic7
					}
				}
				ingredient_metal_exotic8 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic8
						set_character_flag = self_experiment_ingredient_ingredient_metal_exotic8
					}
				}
				ingredient_metal_exotic9 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic9
						set_character_flag = self_experiment_ingredient_ingredient_metal_exotic9
					}
				}
				ingredient_metal_exotic10 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic10
						set_character_flag = self_experiment_ingredient_ingredient_metal_exotic10
					}
				}
				ingredient_metal_exotic11 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic11
						set_character_flag = self_experiment_ingredient_ingredient_metal_exotic11
					}
				}
				ingredient_metal_exotic12 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic12
						set_character_flag = self_experiment_ingredient_ingredient_metal_exotic12
					}
				}
				ingredient_metal_exotic13 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic13
						set_character_flag = self_experiment_ingredient_ingredient_metal_exotic13
					}
				}
				ingredient_metal_exotic14 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic14
						set_character_flag = self_experiment_ingredient_ingredient_metal_exotic14
					}
				}
				ingredient_misc_powder_1 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_misc_powder_1
						set_character_flag = self_experiment_ingredient_ingredient_misc_powder_1
					}
				}
				ingredient_misc_powder_2 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_misc_powder_2
						set_character_flag = self_experiment_ingredient_ingredient_misc_powder_2
					}
				}
				ingredient_misc_powder_3 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_misc_powder_3
						set_character_flag = self_experiment_ingredient_ingredient_misc_powder_3
					}
				}
				ingredient_misc_powder_4 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_misc_powder_4
						set_character_flag = self_experiment_ingredient_ingredient_misc_powder_4
					}
				}
				ingredient_misc_powder_5 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_misc_powder_5
						set_character_flag = self_experiment_ingredient_ingredient_misc_powder_5
					}
				}
				ingredient_mineral_1 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_1
						set_character_flag = self_experiment_ingredient_ingredient_mineral_1
					}
				}
				ingredient_mineral_2 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_2
						set_character_flag = self_experiment_ingredient_ingredient_mineral_2
					}
				}
				ingredient_mineral_jade_1 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_jade_1
						set_character_flag = self_experiment_ingredient_ingredient_mineral_jade_1
					}
				}
				ingredient_mineral_jade_2 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_jade_2
						set_character_flag = self_experiment_ingredient_ingredient_mineral_jade_2
					}
				}
				ingredient_mineral_jade_3 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_jade_3
						set_character_flag = self_experiment_ingredient_ingredient_mineral_jade_3
					}
				}
				ingredient_mineral_jade_4 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_jade_4
						set_character_flag = self_experiment_ingredient_ingredient_mineral_jade_4
					}
				}
				ingredient_mineral_jade_5 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_jade_5
						set_character_flag = self_experiment_ingredient_ingredient_mineral_jade_5
					}
				}
				ingredient_mineral_jade_6 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_jade_6
						set_character_flag = self_experiment_ingredient_ingredient_mineral_jade_6
					}
				}
			}
		}
	}
}

save_ingredient_2_flag_self_experiment_effect = {
	hidden_tooltip = {
		random_artifact = {
			limit = { has_artifact_flag = selected_ingredient_1 }

			trigger_switch = {
				on_trigger = artifact_type
				
				ingredient_herb1 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb1
						set_character_flag = self_experiment_ingredient_ingredient_herb1
					}
				}
				ingredient_herb2 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb2
						set_character_flag = self_experiment_ingredient_ingredient_herb2
					}
				}
				ingredient_herb3 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb3
						set_character_flag = self_experiment_ingredient_ingredient_herb3
					}
				}
				ingredient_herb4 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb4
						set_character_flag = self_experiment_ingredient_ingredient_herb4
					}
				}
				ingredient_herb5 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb5
						set_character_flag = self_experiment_ingredient_ingredient_herb5
					}
				}
				ingredient_herb6 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb6
						set_character_flag = self_experiment_ingredient_ingredient_herb6
					}
				}
				ingredient_herb7 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb7
						set_character_flag = self_experiment_ingredient_ingredient_herb7
					}
				}
				ingredient_herb8 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb8
						set_character_flag = self_experiment_ingredient_ingredient_herb8
					}
				}
				ingredient_herb9 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb9
						set_character_flag = self_experiment_ingredient_ingredient_herb9
					}
				}
				ingredient_herb10 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb10
						set_character_flag = self_experiment_ingredient_ingredient_herb10
					}
				}
				ingredient_herb11 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb11
						set_character_flag = self_experiment_ingredient_ingredient_herb11
					}
				}
				ingredient_herb12 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb12
						set_character_flag = self_experiment_ingredient_ingredient_herb12
					}
				}
				ingredient_herb13 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb13
						set_character_flag = self_experiment_ingredient_ingredient_herb13
					}
				}
				ingredient_herb14 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb14
						set_character_flag = self_experiment_ingredient_ingredient_herb14
					}
				}
				ingredient_herb15 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb15
						set_character_flag = self_experiment_ingredient_ingredient_herb15
					}
				}
				ingredient_animal1 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal1
						set_character_flag = self_experiment_ingredient_ingredient_animal1
					}
				}
				ingredient_animal2 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal2
						set_character_flag = self_experiment_ingredient_ingredient_animal2
					}
				}
				ingredient_animal3 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal3
						set_character_flag = self_experiment_ingredient_ingredient_animal3
					}
				}
				ingredient_animal4 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal4
						set_character_flag = self_experiment_ingredient_ingredient_animal4
					}
				}
				ingredient_animal5 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal5
						set_character_flag = self_experiment_ingredient_ingredient_animal5
					}
				}
				ingredient_animal6 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal6
						set_character_flag = self_experiment_ingredient_ingredient_animal6
					}
				}
				ingredient_animal7 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal7
						set_character_flag = self_experiment_ingredient_ingredient_animal7
					}
				}
				ingredient_animal8 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal8
						set_character_flag = self_experiment_ingredient_ingredient_animal8
					}
				}
				ingredient_animal9 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal9
						set_character_flag = self_experiment_ingredient_ingredient_animal9
					}
				}
				ingredient_metal_exotic1 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic1
						set_character_flag = self_experiment_ingredient_ingredient_metal_exotic1
					}
				}
				ingredient_metal_exotic2 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic2
						set_character_flag = self_experiment_ingredient_ingredient_metal_exotic2
					}
				}
				ingredient_metal_exotic3 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic3
						set_character_flag = self_experiment_ingredient_ingredient_metal_exotic3
					}
				}
				ingredient_metal_exotic4 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic4
						set_character_flag = self_experiment_ingredient_ingredient_metal_exotic4
					}
				}
				ingredient_metal_exotic5 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic5
						set_character_flag = self_experiment_ingredient_ingredient_metal_exotic5
					}
				}
				ingredient_metal_exotic6 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic6
						set_character_flag = self_experiment_ingredient_ingredient_metal_exotic6
					}
				}
				ingredient_metal_exotic7 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic7
						set_character_flag = self_experiment_ingredient_ingredient_metal_exotic7
					}
				}
				ingredient_metal_exotic8 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic8
						set_character_flag = self_experiment_ingredient_ingredient_metal_exotic8
					}
				}
				ingredient_metal_exotic9 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic9
						set_character_flag = self_experiment_ingredient_ingredient_metal_exotic9
					}
				}
				ingredient_metal_exotic10 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic10
						set_character_flag = self_experiment_ingredient_ingredient_metal_exotic10
					}
				}
				ingredient_metal_exotic11 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic11
						set_character_flag = self_experiment_ingredient_ingredient_metal_exotic11
					}
				}
				ingredient_metal_exotic12 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic12
						set_character_flag = self_experiment_ingredient_ingredient_metal_exotic12
					}
				}
				ingredient_metal_exotic13 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic13
						set_character_flag = self_experiment_ingredient_ingredient_metal_exotic13
					}
				}
				ingredient_metal_exotic14 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic14
						set_character_flag = self_experiment_ingredient_ingredient_metal_exotic14
					}
				}
				ingredient_misc_powder_1 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_misc_powder_1
						set_character_flag = self_experiment_ingredient_ingredient_misc_powder_1
					}
				}
				ingredient_misc_powder_2 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_misc_powder_2
						set_character_flag = self_experiment_ingredient_ingredient_misc_powder_2
					}
				}
				ingredient_misc_powder_3 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_misc_powder_3
						set_character_flag = self_experiment_ingredient_ingredient_misc_powder_3
					}
				}
				ingredient_misc_powder_4 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_misc_powder_4
						set_character_flag = self_experiment_ingredient_ingredient_misc_powder_4
					}
				}
				ingredient_misc_powder_5 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_misc_powder_5
						set_character_flag = self_experiment_ingredient_ingredient_misc_powder_5
					}
				}
				ingredient_mineral_1 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_1
						set_character_flag = self_experiment_ingredient_ingredient_mineral_1
					}
				}
				ingredient_mineral_2 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_2
						set_character_flag = self_experiment_ingredient_ingredient_mineral_2
					}
				}
				ingredient_mineral_jade_1 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_jade_1
						set_character_flag = self_experiment_ingredient_ingredient_mineral_jade_1
					}
				}
				ingredient_mineral_jade_2 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_jade_2
						set_character_flag = self_experiment_ingredient_ingredient_mineral_jade_2
					}
				}
				ingredient_mineral_jade_3 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_jade_3
						set_character_flag = self_experiment_ingredient_ingredient_mineral_jade_3
					}
				}
				ingredient_mineral_jade_4 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_jade_4
						set_character_flag = self_experiment_ingredient_ingredient_mineral_jade_4
					}
				}
				ingredient_mineral_jade_5 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_jade_5
						set_character_flag = self_experiment_ingredient_ingredient_mineral_jade_5
					}
				}
				ingredient_mineral_jade_6 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_jade_6
						set_character_flag = self_experiment_ingredient_ingredient_mineral_jade_6
					}
				}
			}
		}
	}
}

save_ingredient_1_flag_prisoner_experiment_effect = {
	hidden_tooltip = {
		random_artifact = {
			limit = { has_artifact_flag = selected_ingredient_1 }

			trigger_switch = {
				on_trigger = artifact_type
				
				ingredient_herb1 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb1
						set_character_flag = prisoner_experiment_ingredient_ingredient_herb1
					}
				}
				ingredient_herb2 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb2
						set_character_flag = prisoner_experiment_ingredient_ingredient_herb2
					}
				}
				ingredient_herb3 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb3
						set_character_flag = prisoner_experiment_ingredient_ingredient_herb3
					}
				}
				ingredient_herb4 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb4
						set_character_flag = prisoner_experiment_ingredient_ingredient_herb4
					}
				}
				ingredient_herb5 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb5
						set_character_flag = prisoner_experiment_ingredient_ingredient_herb5
					}
				}
				ingredient_herb6 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb6
						set_character_flag = prisoner_experiment_ingredient_ingredient_herb6
					}
				}
				ingredient_herb7 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb7
						set_character_flag = prisoner_experiment_ingredient_ingredient_herb7
					}
				}
				ingredient_herb8 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb8
						set_character_flag = prisoner_experiment_ingredient_ingredient_herb8
					}
				}
				ingredient_herb9 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb9
						set_character_flag = prisoner_experiment_ingredient_ingredient_herb9
					}
				}
				ingredient_herb10 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb10
						set_character_flag = prisoner_experiment_ingredient_ingredient_herb10
					}
				}
				ingredient_herb11 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb11
						set_character_flag = prisoner_experiment_ingredient_ingredient_herb11
					}
				}
				ingredient_herb12 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb12
						set_character_flag = prisoner_experiment_ingredient_ingredient_herb12
					}
				}
				ingredient_herb13 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb13
						set_character_flag = prisoner_experiment_ingredient_ingredient_herb13
					}
				}
				ingredient_herb14 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb14
						set_character_flag = prisoner_experiment_ingredient_ingredient_herb14
					}
				}
				ingredient_herb15 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb15
						set_character_flag = prisoner_experiment_ingredient_ingredient_herb15
					}
				}
				ingredient_animal1 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal1
						set_character_flag = prisoner_experiment_ingredient_ingredient_animal1
					}
				}
				ingredient_animal2 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal2
						set_character_flag = prisoner_experiment_ingredient_ingredient_animal2
					}
				}
				ingredient_animal3 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal3
						set_character_flag = prisoner_experiment_ingredient_ingredient_animal3
					}
				}
				ingredient_animal4 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal4
						set_character_flag = prisoner_experiment_ingredient_ingredient_animal4
					}
				}
				ingredient_animal5 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal5
						set_character_flag = prisoner_experiment_ingredient_ingredient_animal5
					}
				}
				ingredient_animal6 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal6
						set_character_flag = prisoner_experiment_ingredient_ingredient_animal6
					}
				}
				ingredient_animal7 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal7
						set_character_flag = prisoner_experiment_ingredient_ingredient_animal7
					}
				}
				ingredient_animal8 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal8
						set_character_flag = prisoner_experiment_ingredient_ingredient_animal8
					}
				}
				ingredient_animal9 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal9
						set_character_flag = prisoner_experiment_ingredient_ingredient_animal9
					}
				}
				ingredient_metal_exotic1 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic1
						set_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic1
					}
				}
				ingredient_metal_exotic2 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic2
						set_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic2
					}
				}
				ingredient_metal_exotic3 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic3
						set_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic3
					}
				}
				ingredient_metal_exotic4 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic4
						set_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic4
					}
				}
				ingredient_metal_exotic5 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic5
						set_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic5
					}
				}
				ingredient_metal_exotic6 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic6
						set_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic6
					}
				}
				ingredient_metal_exotic7 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic7
						set_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic7
					}
				}
				ingredient_metal_exotic8 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic8
						set_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic8
					}
				}
				ingredient_metal_exotic9 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic9
						set_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic9
					}
				}
				ingredient_metal_exotic10 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic10
						set_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic10
					}
				}
				ingredient_metal_exotic11 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic11
						set_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic11
					}
				}
				ingredient_metal_exotic12 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic12
						set_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic12
					}
				}
				ingredient_metal_exotic13 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic13
						set_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic13
					}
				}
				ingredient_metal_exotic14 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic14
						set_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic14
					}
				}
				ingredient_misc_powder_1 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_misc_powder_1
						set_character_flag = prisoner_experiment_ingredient_ingredient_misc_powder_1
					}
				}
				ingredient_misc_powder_2 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_misc_powder_2
						set_character_flag = prisoner_experiment_ingredient_ingredient_misc_powder_2
					}
				}
				ingredient_misc_powder_3 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_misc_powder_3
						set_character_flag = prisoner_experiment_ingredient_ingredient_misc_powder_3
					}
				}
				ingredient_misc_powder_4 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_misc_powder_4
						set_character_flag = prisoner_experiment_ingredient_ingredient_misc_powder_4
					}
				}
				ingredient_misc_powder_5 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_misc_powder_5
						set_character_flag = prisoner_experiment_ingredient_ingredient_misc_powder_5
					}
				}
				ingredient_mineral_1 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_1
						set_character_flag = prisoner_experiment_ingredient_ingredient_mineral_1
					}
				}
				ingredient_mineral_2 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_2
						set_character_flag = prisoner_experiment_ingredient_ingredient_mineral_2
					}
				}
				ingredient_mineral_jade_1 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_jade_1
						set_character_flag = prisoner_experiment_ingredient_ingredient_mineral_jade_1
					}
				}
				ingredient_mineral_jade_2 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_jade_2
						set_character_flag = prisoner_experiment_ingredient_ingredient_mineral_jade_2
					}
				}
				ingredient_mineral_jade_3 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_jade_3
						set_character_flag = prisoner_experiment_ingredient_ingredient_mineral_jade_3
					}
				}
				ingredient_mineral_jade_4 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_jade_4
						set_character_flag = prisoner_experiment_ingredient_ingredient_mineral_jade_4
					}
				}
				ingredient_mineral_jade_5 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_jade_5
						set_character_flag = prisoner_experiment_ingredient_ingredient_mineral_jade_5
					}
				}
				ingredient_mineral_jade_6 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_jade_6
						set_character_flag = prisoner_experiment_ingredient_ingredient_mineral_jade_6
					}
				}
			}
		}
	}
}

save_ingredient_2_flag_prisoner_experiment_effect = {
	hidden_tooltip = {
		random_artifact = {
			limit = { has_artifact_flag = selected_ingredient_1 }

			trigger_switch = {
				on_trigger = artifact_type
				
				ingredient_herb1 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb1
						set_character_flag = prisoner_experiment_ingredient_ingredient_herb1
					}
				}
				ingredient_herb2 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb2
						set_character_flag = prisoner_experiment_ingredient_ingredient_herb2
					}
				}
				ingredient_herb3 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb3
						set_character_flag = prisoner_experiment_ingredient_ingredient_herb3
					}
				}
				ingredient_herb4 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb4
						set_character_flag = prisoner_experiment_ingredient_ingredient_herb4
					}
				}
				ingredient_herb5 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb5
						set_character_flag = prisoner_experiment_ingredient_ingredient_herb5
					}
				}
				ingredient_herb6 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb6
						set_character_flag = prisoner_experiment_ingredient_ingredient_herb6
					}
				}
				ingredient_herb7 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb7
						set_character_flag = prisoner_experiment_ingredient_ingredient_herb7
					}
				}
				ingredient_herb8 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb8
						set_character_flag = prisoner_experiment_ingredient_ingredient_herb8
					}
				}
				ingredient_herb9 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb9
						set_character_flag = prisoner_experiment_ingredient_ingredient_herb9
					}
				}
				ingredient_herb10 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb10
						set_character_flag = prisoner_experiment_ingredient_ingredient_herb10
					}
				}
				ingredient_herb11 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb11
						set_character_flag = prisoner_experiment_ingredient_ingredient_herb11
					}
				}
				ingredient_herb12 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb12
						set_character_flag = prisoner_experiment_ingredient_ingredient_herb12
					}
				}
				ingredient_herb13 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb13
						set_character_flag = prisoner_experiment_ingredient_ingredient_herb13
					}
				}
				ingredient_herb14 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb14
						set_character_flag = prisoner_experiment_ingredient_ingredient_herb14
					}
				}
				ingredient_herb15 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_herb15
						set_character_flag = prisoner_experiment_ingredient_ingredient_herb15
					}
				}
				ingredient_animal1 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal1
						set_character_flag = prisoner_experiment_ingredient_ingredient_animal1
					}
				}
				ingredient_animal2 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal2
						set_character_flag = prisoner_experiment_ingredient_ingredient_animal2
					}
				}
				ingredient_animal3 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal3
						set_character_flag = prisoner_experiment_ingredient_ingredient_animal3
					}
				}
				ingredient_animal4 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal4
						set_character_flag = prisoner_experiment_ingredient_ingredient_animal4
					}
				}
				ingredient_animal5 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal5
						set_character_flag = prisoner_experiment_ingredient_ingredient_animal5
					}
				}
				ingredient_animal6 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal6
						set_character_flag = prisoner_experiment_ingredient_ingredient_animal6
					}
				}
				ingredient_animal7 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal7
						set_character_flag = prisoner_experiment_ingredient_ingredient_animal7
					}
				}
				ingredient_animal8 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal8
						set_character_flag = prisoner_experiment_ingredient_ingredient_animal8
					}
				}
				ingredient_animal9 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_animal9
						set_character_flag = prisoner_experiment_ingredient_ingredient_animal9
					}
				}
				ingredient_metal_exotic1 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic1
						set_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic1
					}
				}
				ingredient_metal_exotic2 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic2
						set_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic2
					}
				}
				ingredient_metal_exotic3 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic3
						set_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic3
					}
				}
				ingredient_metal_exotic4 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic4
						set_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic4
					}
				}
				ingredient_metal_exotic5 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic5
						set_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic5
					}
				}
				ingredient_metal_exotic6 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic6
						set_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic6
					}
				}
				ingredient_metal_exotic7 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic7
						set_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic7
					}
				}
				ingredient_metal_exotic8 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic8
						set_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic8
					}
				}
				ingredient_metal_exotic9 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic9
						set_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic9
					}
				}
				ingredient_metal_exotic10 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic10
						set_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic10
					}
				}
				ingredient_metal_exotic11 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic11
						set_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic11
					}
				}
				ingredient_metal_exotic12 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic12
						set_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic12
					}
				}
				ingredient_metal_exotic13 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic13
						set_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic13
					}
				}
				ingredient_metal_exotic14 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_metal_exotic14
						set_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic14
					}
				}
				ingredient_misc_powder_1 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_misc_powder_1
						set_character_flag = prisoner_experiment_ingredient_ingredient_misc_powder_1
					}
				}
				ingredient_misc_powder_2 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_misc_powder_2
						set_character_flag = prisoner_experiment_ingredient_ingredient_misc_powder_2
					}
				}
				ingredient_misc_powder_3 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_misc_powder_3
						set_character_flag = prisoner_experiment_ingredient_ingredient_misc_powder_3
					}
				}
				ingredient_misc_powder_4 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_misc_powder_4
						set_character_flag = prisoner_experiment_ingredient_ingredient_misc_powder_4
					}
				}
				ingredient_misc_powder_5 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_misc_powder_5
						set_character_flag = prisoner_experiment_ingredient_ingredient_misc_powder_5
					}
				}
				ingredient_mineral_1 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_1
						set_character_flag = prisoner_experiment_ingredient_ingredient_mineral_1
					}
				}
				ingredient_mineral_2 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_2
						set_character_flag = prisoner_experiment_ingredient_ingredient_mineral_2
					}
				}
				ingredient_mineral_jade_1 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_jade_1
						set_character_flag = prisoner_experiment_ingredient_ingredient_mineral_jade_1
					}
				}
				ingredient_mineral_jade_2 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_jade_2
						set_character_flag = prisoner_experiment_ingredient_ingredient_mineral_jade_2
					}
				}
				ingredient_mineral_jade_3 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_jade_3
						set_character_flag = prisoner_experiment_ingredient_ingredient_mineral_jade_3
					}
				}
				ingredient_mineral_jade_4 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_jade_4
						set_character_flag = prisoner_experiment_ingredient_ingredient_mineral_jade_4
					}
				}
				ingredient_mineral_jade_5 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_jade_5
						set_character_flag = prisoner_experiment_ingredient_ingredient_mineral_jade_5
					}
				}
				ingredient_mineral_jade_6 = {
					ROOT = {
						set_character_flag = experimented_with_ingredient_mineral_jade_6
						set_character_flag = prisoner_experiment_ingredient_ingredient_mineral_jade_6
					}
				}
			}
		}
	}
}

hermetics_upgrade_scandal_effect = {
	trigger_switch = {
		on_trigger = has_character_flag

		hermetics_major_scandal = {
			clr_character_flag = hermetics_major_scandal
			character_event = { id = MNM.1481 }
		}

		hermetics_minor_scandal = {
			clr_character_flag = hermetics_minor_scandal
			set_character_flag = hermetics_major_scandal
		}

		fallback = {
			set_character_flag = hermetics_minor_scandal
		}
	}
}

increase_ingredient_knowledge_lab_experiment_effect = {
	set_variable = {
		which = current_ingredient_knowledge
		value = 0
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_herb1
		}
		change_variable = {
			which = ingredient_herb1_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_herb1_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_herb2
		}
		change_variable = {
			which = ingredient_herb2_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_herb2_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_herb3
		}
		change_variable = {
			which = ingredient_herb3_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_herb3_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_herb4
		}
		change_variable = {
			which = ingredient_herb4_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_herb4_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_herb5
		}
		change_variable = {
			which = ingredient_herb5_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_herb5_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_herb6
		}
		change_variable = {
			which = ingredient_herb6_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_herb6_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_herb7
		}
		change_variable = {
			which = ingredient_herb7_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_herb7_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_herb8
		}
		change_variable = {
			which = ingredient_herb8_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_herb8_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_herb9
		}
		change_variable = {
			which = ingredient_herb9_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_herb9_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_herb10
		}
		change_variable = {
			which = ingredient_herb10_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_herb10_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_herb11
		}
		change_variable = {
			which = ingredient_herb11_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_herb11_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_herb12
		}
		change_variable = {
			which = ingredient_herb12_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_herb12_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_herb13
		}
		change_variable = {
			which = ingredient_herb13_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_herb13_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_herb14
		}
		change_variable = {
			which = ingredient_herb14_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_herb14_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_herb15
		}
		change_variable = {
			which = ingredient_herb15_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_herb15_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_animal1
		}
		change_variable = {
			which = ingredient_animal1_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_animal1_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_animal2
		}
		change_variable = {
			which = ingredient_animal2_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_animal2_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_animal3
		}
		change_variable = {
			which = ingredient_animal3_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_animal3_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_animal4
		}
		change_variable = {
			which = ingredient_animal4_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_animal4_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_animal5
		}
		change_variable = {
			which = ingredient_animal5_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_animal5_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_animal6
		}
		change_variable = {
			which = ingredient_animal6_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_animal6_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_animal7
		}
		change_variable = {
			which = ingredient_animal7_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_animal7_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_animal8
		}
		change_variable = {
			which = ingredient_animal8_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_animal8_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_animal9
		}
		change_variable = {
			which = ingredient_animal9_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_animal9_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_metal_exotic1
		}
		change_variable = {
			which = ingredient_metal_exotic1_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_metal_exotic1_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_metal_exotic2
		}
		change_variable = {
			which = ingredient_metal_exotic2_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_metal_exotic2_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_metal_exotic3
		}
		change_variable = {
			which = ingredient_metal_exotic3_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_metal_exotic3_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_metal_exotic4
		}
		change_variable = {
			which = ingredient_metal_exotic4_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_metal_exotic4_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_metal_exotic5
		}
		change_variable = {
			which = ingredient_metal_exotic5_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_metal_exotic5_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_metal_exotic6
		}
		change_variable = {
			which = ingredient_metal_exotic6_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_metal_exotic6_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_metal_exotic7
		}
		change_variable = {
			which = ingredient_metal_exotic7_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_metal_exotic7_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_metal_exotic8
		}
		change_variable = {
			which = ingredient_metal_exotic8_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_metal_exotic8_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_metal_exotic9
		}
		change_variable = {
			which = ingredient_metal_exotic9_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_metal_exotic9_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_metal_exotic10
		}
		change_variable = {
			which = ingredient_metal_exotic10_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_metal_exotic10_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_metal_exotic11
		}
		change_variable = {
			which = ingredient_metal_exotic11_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_metal_exotic11_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_metal_exotic12
		}
		change_variable = {
			which = ingredient_metal_exotic12_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_metal_exotic12_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_metal_exotic13
		}
		change_variable = {
			which = ingredient_metal_exotic13_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_metal_exotic13_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_metal_exotic14
		}
		change_variable = {
			which = ingredient_metal_exotic14_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_metal_exotic14_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_misc_powder_1
		}
		change_variable = {
			which = ingredient_misc_powder_1_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_misc_powder_1_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_misc_powder_2
		}
		change_variable = {
			which = ingredient_misc_powder_2_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_misc_powder_2_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_misc_powder_3
		}
		change_variable = {
			which = ingredient_misc_powder_3_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_misc_powder_3_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_misc_powder_4
		}
		change_variable = {
			which = ingredient_misc_powder_4_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_misc_powder_4_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_misc_powder_5
		}
		change_variable = {
			which = ingredient_misc_powder_5_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_misc_powder_5_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_mineral_1
		}
		change_variable = {
			which = ingredient_mineral_1_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_mineral_1_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_mineral_2
		}
		change_variable = {
			which = ingredient_mineral_2_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_mineral_2_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_mineral_jade_1
		}
		change_variable = {
			which = ingredient_mineral_jade_1_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_mineral_jade_1_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_mineral_jade_2
		}
		change_variable = {
			which = ingredient_mineral_jade_2_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_mineral_jade_2_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_mineral_jade_3
		}
		change_variable = {
			which = ingredient_mineral_jade_3_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_mineral_jade_3_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_mineral_jade_4
		}
		change_variable = {
			which = ingredient_mineral_jade_4_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_mineral_jade_4_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_mineral_jade_5
		}
		change_variable = {
			which = ingredient_mineral_jade_5_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_mineral_jade_5_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_ingredient_ingredient_mineral_jade_6
		}
		change_variable = {
			which = ingredient_mineral_jade_6_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_mineral_jade_6_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = lab_experiment_two_ingredients
		}
		divide_variable = {
			which = current_ingredient_knowledge
			value = 1.5
		}
	}
}

alchemist_good_outcome_healing_lab_experiment_effect = {
	hidden_tooltip = {
		increase_ingredient_knowledge_lab_experiment_effect = yes
		
		if = {
			limit = {
				check_variable = {
					which = current_ingredient_knowledge
					value <= 3
				}
			}
			
			trigger_switch = {
				on_trigger = has_character_flag
				
				lab_experiment_safe = {
					set_variable = {
						which = current_alchemy_value
						value = 2
					}
				}
				lab_experiment_thorough = {
					set_variable = {
						which = current_alchemy_value
						value = 4
					}
				}
				lab_experiment_risky = {
					set_variable = {
						which = current_alchemy_value
						value = 5
					}
				}
				lab_experiment_crazy = {
					set_variable = {
						which = current_alchemy_value
						value = 3
					}
				}
			}
		}
		
		else = {
			trigger_switch = {
				on_trigger = has_character_flag
				
				lab_experiment_safe = {
					set_variable = {
						which = current_alchemy_value
						value = 1
					}
				}
				lab_experiment_thorough = {
					set_variable = {
						which = current_alchemy_value
						value = 2
					}
				}
				lab_experiment_risky = {
					set_variable = {
						which = current_alchemy_value
						value = 2.5
					}
				}
				lab_experiment_crazy = {
					set_variable = {
						which = current_alchemy_value
						value = 1.5
					}
				}
			}
		}
	
		if = {
			limit = {
				has_character_flag = lab_experiment_two_ingredients
			}
			multiply_variable = {
				which = current_alchemy_value
				value = 1.5
			}
			change_variable = {
				which = alchemist_healing_knowledge
				which = current_alchemy_value
			}
		}
	}
}

alchemist_good_outcome_poison_lab_experiment_effect = {
	hidden_tooltip = {
		increase_ingredient_knowledge_lab_experiment_effect = yes
		
		if = {
			limit = {
				check_variable = {
					which = current_ingredient_knowledge
					value <= 3
				}
			}
			
			trigger_switch = {
				on_trigger = has_character_flag
				
				lab_experiment_safe = {
					set_variable = {
						which = current_alchemy_value
						value = 2
					}
				}
				lab_experiment_thorough = {
					set_variable = {
						which = current_alchemy_value
						value = 4
					}
				}
				lab_experiment_risky = {
					set_variable = {
						which = current_alchemy_value
						value = 5
					}
				}
				lab_experiment_crazy = {
					set_variable = {
						which = current_alchemy_value
						value = 3
					}
				}
			}
		}
		
		else = {
			trigger_switch = {
				on_trigger = has_character_flag
				
				lab_experiment_safe = {
					set_variable = {
						which = current_alchemy_value
						value = 1
					}
				}
				lab_experiment_thorough = {
					set_variable = {
						which = current_alchemy_value
						value = 2
					}
				}
				lab_experiment_risky = {
					set_variable = {
						which = current_alchemy_value
						value = 2.5
					}
				}
				lab_experiment_crazy = {
					set_variable = {
						which = current_alchemy_value
						value = 1.5
					}
				}
			}
		}
	
		if = {
			limit = {
				has_character_flag = lab_experiment_two_ingredients
			}
			multiply_variable = {
				which = current_alchemy_value
				value = 1.5
			}
			change_variable = {
				which = alchemist_poison_knowledge
				which = current_alchemy_value
			}
		}
	}
}

alchemist_good_outcome_random_lab_experiment_effect = {
	hidden_tooltip = {
		random_list = {
			50 = {
				alchemist_good_outcome_healing_lab_experiment_effect = yes
			}
			50 = {
				alchemist_good_outcome_poison_lab_experiment_effect = yes
			}
		}
	}
}

alchemist_average_outcome_healing_lab_experiment_effect = {
	hidden_tooltip = {
		increase_ingredient_knowledge_lab_experiment_effect = yes
		
		if = {
			limit = {
				check_variable = {
					which = current_ingredient_knowledge
					value <= 3
				}
			}
			
			trigger_switch = {
				on_trigger = has_character_flag
				
				lab_experiment_safe = {
					set_variable = {
						which = current_alchemy_value
						value = 1
					}
				}
				lab_experiment_thorough = {
					set_variable = {
						which = current_alchemy_value
						value = 2
					}
				}
				lab_experiment_risky = {
					set_variable = {
						which = current_alchemy_value
						value = 2.5
					}
				}
				lab_experiment_crazy = {
					set_variable = {
						which = current_alchemy_value
						value = 1.5
					}
				}
			}
		}
		
		else = {
			trigger_switch = {
				on_trigger = has_character_flag
				
				lab_experiment_safe = {
					set_variable = {
						which = current_alchemy_value
						value = 0.5
					}
				}
				lab_experiment_thorough = {
					set_variable = {
						which = current_alchemy_value
						value = 1
					}
				}
				lab_experiment_risky = {
					set_variable = {
						which = current_alchemy_value
						value = 1.25
					}
				}
				lab_experiment_crazy = {
					set_variable = {
						which = current_alchemy_value
						value = 0.75
					}
				}
			}
		}
	
		if = {
			limit = {
				has_character_flag = lab_experiment_two_ingredients
			}
			multiply_variable = {
				which = current_alchemy_value
				value = 1.5
			}
			change_variable = {
				which = alchemist_healing_knowledge
				which = current_alchemy_value
			}
		}
	}
}

alchemist_average_outcome_poison_lab_experiment_effect = {
	hidden_tooltip = {
		increase_ingredient_knowledge_lab_experiment_effect = yes
		
		if = {
			limit = {
				check_variable = {
					which = current_ingredient_knowledge
					value <= 3
				}
			}
			
			trigger_switch = {
				on_trigger = has_character_flag
				
				lab_experiment_safe = {
					set_variable = {
						which = current_alchemy_value
						value = 1
					}
				}
				lab_experiment_thorough = {
					set_variable = {
						which = current_alchemy_value
						value = 2
					}
				}
				lab_experiment_risky = {
					set_variable = {
						which = current_alchemy_value
						value = 2.5
					}
				}
				lab_experiment_crazy = {
					set_variable = {
						which = current_alchemy_value
						value = 1.5
					}
				}
			}
		}
		
		else = {
			trigger_switch = {
				on_trigger = has_character_flag
				
				lab_experiment_safe = {
					set_variable = {
						which = current_alchemy_value
						value = 0.5
					}
				}
				lab_experiment_thorough = {
					set_variable = {
						which = current_alchemy_value
						value = 1
					}
				}
				lab_experiment_risky = {
					set_variable = {
						which = current_alchemy_value
						value = 1.25
					}
				}
				lab_experiment_crazy = {
					set_variable = {
						which = current_alchemy_value
						value = 0.75
					}
				}
			}
		}
	
		if = {
			limit = {
				has_character_flag = lab_experiment_two_ingredients
			}
			multiply_variable = {
				which = current_alchemy_value
				value = 1.5
			}
			change_variable = {
				which = alchemist_poison_knowledge
				which = current_alchemy_value
			}
		}
	}
}

alchemist_average_outcome_random_lab_experiment_effect = {
	hidden_tooltip = {
		random_list = {
			50 = {
				alchemist_average_outcome_healing_lab_experiment_effect = yes
			}
			50 = {
				alchemist_average_outcome_poison_lab_experiment_effect = yes
			}
		}
	}
}

alchemist_bad_outcome_healing_lab_experiment_effect = {
	hidden_tooltip = {
		increase_ingredient_knowledge_lab_experiment_effect = yes
		
		if = {
			limit = {
				check_variable = {
					which = current_ingredient_knowledge
					value <= 3
				}
			}
			
			trigger_switch = {
				on_trigger = has_character_flag
				
				lab_experiment_safe = {
					set_variable = {
						which = current_alchemy_value
						value = 0.2
					}
				}
				lab_experiment_thorough = {
					set_variable = {
						which = current_alchemy_value
						value = 0.4
					}
				}
				lab_experiment_risky = {
					set_variable = {
						which = current_alchemy_value
						value = 0.6
					}
				}
				lab_experiment_crazy = {
					set_variable = {
						which = current_alchemy_value
						value = 0.8
					}
				}
			}
		}
		
		else = {
			trigger_switch = {
				on_trigger = has_character_flag
				
				lab_experiment_safe = {
					set_variable = {
						which = current_alchemy_value
						value = 0.1
					}
				}
				lab_experiment_thorough = {
					set_variable = {
						which = current_alchemy_value
						value = 0.2
					}
				}
				lab_experiment_risky = {
					set_variable = {
						which = current_alchemy_value
						value = 0.3
					}
				}
				lab_experiment_crazy = {
					set_variable = {
						which = current_alchemy_value
						value = 0.4
					}
				}
			}
		}
	
		if = {
			limit = {
				has_character_flag = lab_experiment_two_ingredients
			}
			multiply_variable = {
				which = current_alchemy_value
				value = 1.5
			}
			change_variable = {
				which = alchemist_healing_knowledge
				which = current_alchemy_value
			}
		}
	}
}

alchemist_bad_outcome_poison_lab_experiment_effect = {
	hidden_tooltip = {
		increase_ingredient_knowledge_lab_experiment_effect = yes
		
		if = {
			limit = {
				check_variable = {
					which = current_ingredient_knowledge
					value <= 3
				}
			}
			
			trigger_switch = {
				on_trigger = has_character_flag
				
				lab_experiment_safe = {
					set_variable = {
						which = current_alchemy_value
						value = 0.2
					}
				}
				lab_experiment_thorough = {
					set_variable = {
						which = current_alchemy_value
						value = 0.4
					}
				}
				lab_experiment_risky = {
					set_variable = {
						which = current_alchemy_value
						value = 0.6
					}
				}
				lab_experiment_crazy = {
					set_variable = {
						which = current_alchemy_value
						value = 0.8
					}
				}
			}
		}
		
		else = {
			trigger_switch = {
				on_trigger = has_character_flag
				
				lab_experiment_safe = {
					set_variable = {
						which = current_alchemy_value
						value = 0.1
					}
				}
				lab_experiment_thorough = {
					set_variable = {
						which = current_alchemy_value
						value = 0.2
					}
				}
				lab_experiment_risky = {
					set_variable = {
						which = current_alchemy_value
						value = 0.3
					}
				}
				lab_experiment_crazy = {
					set_variable = {
						which = current_alchemy_value
						value = 0.4
					}
				}
			}
		}
	
		if = {
			limit = {
				has_character_flag = lab_experiment_two_ingredients
			}
			multiply_variable = {
				which = current_alchemy_value
				value = 1.5
			}
			change_variable = {
				which = alchemist_poison_knowledge
				which = current_alchemy_value
			}
		}
	}
}

alchemist_bad_outcome_random_lab_experiment_effect = {
	hidden_tooltip = {
		random_list = {
			50 = {
				alchemist_bad_outcome_healing_lab_experiment_effect = yes
			}
			50 = {
				alchemist_bad_outcome_poison_lab_experiment_effect = yes
			}
		}
	}
}

increase_ingredient_knowledge_self_experiment_effect = {
	set_variable = {
		which = current_ingredient_knowledge
		value = 0
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_herb1
		}
		change_variable = {
			which = ingredient_herb1_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_herb1_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_herb2
		}
		change_variable = {
			which = ingredient_herb2_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_herb2_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_herb3
		}
		change_variable = {
			which = ingredient_herb3_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_herb3_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_herb4
		}
		change_variable = {
			which = ingredient_herb4_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_herb4_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_herb5
		}
		change_variable = {
			which = ingredient_herb5_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_herb5_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_herb6
		}
		change_variable = {
			which = ingredient_herb6_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_herb6_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_herb7
		}
		change_variable = {
			which = ingredient_herb7_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_herb7_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_herb8
		}
		change_variable = {
			which = ingredient_herb8_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_herb8_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_herb9
		}
		change_variable = {
			which = ingredient_herb9_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_herb9_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_herb10
		}
		change_variable = {
			which = ingredient_herb10_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_herb10_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_herb11
		}
		change_variable = {
			which = ingredient_herb11_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_herb11_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_herb12
		}
		change_variable = {
			which = ingredient_herb12_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_herb12_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_herb13
		}
		change_variable = {
			which = ingredient_herb13_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_herb13_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_herb14
		}
		change_variable = {
			which = ingredient_herb14_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_herb14_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_herb15
		}
		change_variable = {
			which = ingredient_herb15_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_herb15_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_animal1
		}
		change_variable = {
			which = ingredient_animal1_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_animal1_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_animal2
		}
		change_variable = {
			which = ingredient_animal2_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_animal2_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_animal3
		}
		change_variable = {
			which = ingredient_animal3_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_animal3_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_animal4
		}
		change_variable = {
			which = ingredient_animal4_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_animal4_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_animal5
		}
		change_variable = {
			which = ingredient_animal5_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_animal5_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_animal6
		}
		change_variable = {
			which = ingredient_animal6_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_animal6_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_animal7
		}
		change_variable = {
			which = ingredient_animal7_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_animal7_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_animal8
		}
		change_variable = {
			which = ingredient_animal8_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_animal8_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_animal9
		}
		change_variable = {
			which = ingredient_animal9_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_animal9_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_metal_exotic1
		}
		change_variable = {
			which = ingredient_metal_exotic1_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_metal_exotic1_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_metal_exotic2
		}
		change_variable = {
			which = ingredient_metal_exotic2_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_metal_exotic2_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_metal_exotic3
		}
		change_variable = {
			which = ingredient_metal_exotic3_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_metal_exotic3_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_metal_exotic4
		}
		change_variable = {
			which = ingredient_metal_exotic4_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_metal_exotic4_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_metal_exotic5
		}
		change_variable = {
			which = ingredient_metal_exotic5_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_metal_exotic5_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_metal_exotic6
		}
		change_variable = {
			which = ingredient_metal_exotic6_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_metal_exotic6_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_metal_exotic7
		}
		change_variable = {
			which = ingredient_metal_exotic7_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_metal_exotic7_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_metal_exotic8
		}
		change_variable = {
			which = ingredient_metal_exotic8_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_metal_exotic8_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_metal_exotic9
		}
		change_variable = {
			which = ingredient_metal_exotic9_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_metal_exotic9_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_metal_exotic10
		}
		change_variable = {
			which = ingredient_metal_exotic10_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_metal_exotic10_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_metal_exotic11
		}
		change_variable = {
			which = ingredient_metal_exotic11_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_metal_exotic11_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_metal_exotic12
		}
		change_variable = {
			which = ingredient_metal_exotic12_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_metal_exotic12_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_metal_exotic13
		}
		change_variable = {
			which = ingredient_metal_exotic13_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_metal_exotic13_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_metal_exotic14
		}
		change_variable = {
			which = ingredient_metal_exotic14_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_metal_exotic14_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_misc_powder_1
		}
		change_variable = {
			which = ingredient_misc_powder_1_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_misc_powder_1_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_misc_powder_2
		}
		change_variable = {
			which = ingredient_misc_powder_2_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_misc_powder_2_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_misc_powder_3
		}
		change_variable = {
			which = ingredient_misc_powder_3_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_misc_powder_3_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_misc_powder_4
		}
		change_variable = {
			which = ingredient_misc_powder_4_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_misc_powder_4_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_misc_powder_5
		}
		change_variable = {
			which = ingredient_misc_powder_5_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_misc_powder_5_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_mineral_1
		}
		change_variable = {
			which = ingredient_mineral_1_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_mineral_1_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_mineral_2
		}
		change_variable = {
			which = ingredient_mineral_2_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_mineral_2_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_mineral_jade_1
		}
		change_variable = {
			which = ingredient_mineral_jade_1_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_mineral_jade_1_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_mineral_jade_2
		}
		change_variable = {
			which = ingredient_mineral_jade_2_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_mineral_jade_2_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_mineral_jade_3
		}
		change_variable = {
			which = ingredient_mineral_jade_3_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_mineral_jade_3_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_mineral_jade_4
		}
		change_variable = {
			which = ingredient_mineral_jade_4_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_mineral_jade_4_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_mineral_jade_5
		}
		change_variable = {
			which = ingredient_mineral_jade_5_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_mineral_jade_5_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_ingredient_ingredient_mineral_jade_6
		}
		change_variable = {
			which = ingredient_mineral_jade_6_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_mineral_jade_6_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = self_experiment_two_ingredients
		}
		divide_variable = {
			which = current_ingredient_knowledge
			value = 1.5
		}
	}
}

alchemist_good_outcome_healing_self_experiment_effect = {
	hidden_tooltip = {
		increase_ingredient_knowledge_self_experiment_effect = yes
		
		if = {
			limit = {
				check_variable = {
					which = current_ingredient_knowledge
					value <= 3
				}
			}
			
			trigger_switch = {
				on_trigger = has_character_flag
				
				self_experiment_safe = {
					set_variable = {
						which = current_alchemy_value
						value = 2
					}
				}
				self_experiment_thorough = {
					set_variable = {
						which = current_alchemy_value
						value = 4
					}
				}
				self_experiment_risky = {
					set_variable = {
						which = current_alchemy_value
						value = 5
					}
				}
				self_experiment_crazy = {
					set_variable = {
						which = current_alchemy_value
						value = 3
					}
				}
			}
		}
		
		else = {
			trigger_switch = {
				on_trigger = has_character_flag
				
				self_experiment_safe = {
					set_variable = {
						which = current_alchemy_value
						value = 1
					}
				}
				self_experiment_thorough = {
					set_variable = {
						which = current_alchemy_value
						value = 2
					}
				}
				self_experiment_risky = {
					set_variable = {
						which = current_alchemy_value
						value = 2.5
					}
				}
				self_experiment_crazy = {
					set_variable = {
						which = current_alchemy_value
						value = 1.5
					}
				}
			}
		}
		
		if = {
			limit = {
				has_character_flag = self_experiment_two_ingredients
			}
			multiply_variable = {
				which = current_alchemy_value
				value = 1.5
			}
			change_variable = {
				which = alchemist_healing_knowledge
				which = current_alchemy_value
			}
		}
	}
}

alchemist_good_outcome_poison_self_experiment_effect = {
	hidden_tooltip = {
		increase_ingredient_knowledge_self_experiment_effect = yes
		
		if = {
			limit = {
				check_variable = {
					which = current_ingredient_knowledge
					value <= 3
				}
			}
			
			trigger_switch = {
				on_trigger = has_character_flag
				
				self_experiment_safe = {
					set_variable = {
						which = current_alchemy_value
						value = 2
					}
				}
				self_experiment_thorough = {
					set_variable = {
						which = current_alchemy_value
						value = 4
					}
				}
				self_experiment_risky = {
					set_variable = {
						which = current_alchemy_value
						value = 5
					}
				}
				self_experiment_crazy = {
					set_variable = {
						which = current_alchemy_value
						value = 3
					}
				}
			}
		}
		
		else = {
			trigger_switch = {
				on_trigger = has_character_flag
				
				self_experiment_safe = {
					set_variable = {
						which = current_alchemy_value
						value = 1
					}
				}
				self_experiment_thorough = {
					set_variable = {
						which = current_alchemy_value
						value = 2
					}
				}
				self_experiment_risky = {
					set_variable = {
						which = current_alchemy_value
						value = 2.5
					}
				}
				self_experiment_crazy = {
					set_variable = {
						which = current_alchemy_value
						value = 1.5
					}
				}
			}
		}
		
		if = {
			limit = {
				has_character_flag = self_experiment_two_ingredients
			}
			multiply_variable = {
				which = current_alchemy_value
				value = 1.5
			}
			change_variable = {
				which = alchemist_poison_knowledge
				which = current_alchemy_value
			}
		}
	}
}

alchemist_good_outcome_random_self_experiment_effect = {
	hidden_tooltip = {
		random_list = {
			50 = {
				alchemist_good_outcome_healing_self_experiment_effect = yes
			}
			50 = {
				alchemist_good_outcome_poison_self_experiment_effect = yes
			}
		}
	}
}

alchemist_average_outcome_healing_self_experiment_effect = {
	hidden_tooltip = {
		increase_ingredient_knowledge_self_experiment_effect = yes
		
		if = {
			limit = {
				check_variable = {
					which = current_ingredient_knowledge
					value <= 3
				}
			}
			
			trigger_switch = {
				on_trigger = has_character_flag
				
				self_experiment_safe = {
					set_variable = {
						which = current_alchemy_value
						value = 1
					}
				}
				self_experiment_thorough = {
					set_variable = {
						which = current_alchemy_value
						value = 2
					}
				}
				self_experiment_risky = {
					set_variable = {
						which = current_alchemy_value
						value = 2.5
					}
				}
				self_experiment_crazy = {
					set_variable = {
						which = current_alchemy_value
						value = 1.5
					}
				}
			}
		}
		
		else = {
			trigger_switch = {
				on_trigger = has_character_flag
				
				self_experiment_safe = {
					set_variable = {
						which = current_alchemy_value
						value = 0.5
					}
				}
				self_experiment_thorough = {
					set_variable = {
						which = current_alchemy_value
						value = 1
					}
				}
				self_experiment_risky = {
					set_variable = {
						which = current_alchemy_value
						value = 1.25
					}
				}
				self_experiment_crazy = {
					set_variable = {
						which = current_alchemy_value
						value = 0.75
					}
				}
			}
		}
		
		if = {
			limit = {
				has_character_flag = self_experiment_two_ingredients
			}
			multiply_variable = {
				which = current_alchemy_value
				value = 1.5
			}
			change_variable = {
				which = alchemist_healing_knowledge
				which = current_alchemy_value
			}
		}
	}
}

alchemist_average_outcome_poison_self_experiment_effect = {
	hidden_tooltip = {
		increase_ingredient_knowledge_self_experiment_effect = yes
		
		if = {
			limit = {
				check_variable = {
					which = current_ingredient_knowledge
					value <= 3
				}
			}
			
			trigger_switch = {
				on_trigger = has_character_flag
				
				self_experiment_safe = {
					set_variable = {
						which = current_alchemy_value
						value = 1
					}
				}
				self_experiment_thorough = {
					set_variable = {
						which = current_alchemy_value
						value = 2
					}
				}
				self_experiment_risky = {
					set_variable = {
						which = current_alchemy_value
						value = 2.5
					}
				}
				self_experiment_crazy = {
					set_variable = {
						which = current_alchemy_value
						value = 1.5
					}
				}
			}
		}
		
		else = {
			trigger_switch = {
				on_trigger = has_character_flag
				
				self_experiment_safe = {
					set_variable = {
						which = current_alchemy_value
						value = 0.5
					}
				}
				self_experiment_thorough = {
					set_variable = {
						which = current_alchemy_value
						value = 1
					}
				}
				self_experiment_risky = {
					set_variable = {
						which = current_alchemy_value
						value = 1.25
					}
				}
				self_experiment_crazy = {
					set_variable = {
						which = current_alchemy_value
						value = 0.75
					}
				}
			}
		}
		
		if = {
			limit = {
				has_character_flag = self_experiment_two_ingredients
			}
			multiply_variable = {
				which = current_alchemy_value
				value = 1.5
			}
			change_variable = {
				which = alchemist_poison_knowledge
				which = current_alchemy_value
			}
		}
	}
}

alchemist_average_outcome_random_self_experiment_effect = {
	hidden_tooltip = {
		random_list = {
			50 = {
				alchemist_average_outcome_healing_self_experiment_effect = yes
			}
			50 = {
				alchemist_average_outcome_poison_self_experiment_effect = yes
			}
		}
	}
}

alchemist_bad_outcome_healing_self_experiment_effect = {
	hidden_tooltip = {
		increase_ingredient_knowledge_self_experiment_effect = yes
		
		if = {
			limit = {
				check_variable = {
					which = current_ingredient_knowledge
					value <= 3
				}
			}
			
			trigger_switch = {
				on_trigger = has_character_flag
				
				self_experiment_safe = {
					set_variable = {
						which = current_alchemy_value
						value = 0.2
					}
				}
				self_experiment_thorough = {
					set_variable = {
						which = current_alchemy_value
						value = 0.4
					}
				}
				self_experiment_risky = {
					set_variable = {
						which = current_alchemy_value
						value = 0.6
					}
				}
				self_experiment_crazy = {
					set_variable = {
						which = current_alchemy_value
						value = 0.8
					}
				}
			}
		}
		
		else = {
			trigger_switch = {
				on_trigger = has_character_flag
				
				self_experiment_safe = {
					set_variable = {
						which = current_alchemy_value
						value = 0.1
					}
				}
				self_experiment_thorough = {
					set_variable = {
						which = current_alchemy_value
						value = 0.2
					}
				}
				self_experiment_risky = {
					set_variable = {
						which = current_alchemy_value
						value = 0.3
					}
				}
				self_experiment_crazy = {
					set_variable = {
						which = current_alchemy_value
						value = 0.4
					}
				}
			}
		}
		
		if = {
			limit = {
				has_character_flag = self_experiment_two_ingredients
			}
			multiply_variable = {
				which = current_alchemy_value
				value = 1.5
			}
			change_variable = {
				which = alchemist_healing_knowledge
				which = current_alchemy_value
			}
		}
	}
}

alchemist_bad_outcome_poison_self_experiment_effect = {
	hidden_tooltip = {
		increase_ingredient_knowledge_self_experiment_effect = yes
		
		if = {
			limit = {
				check_variable = {
					which = current_ingredient_knowledge
					value <= 3
				}
			}
			
			trigger_switch = {
				on_trigger = has_character_flag
				
				self_experiment_safe = {
					change_variable = {
						which = current_alchemy_value
						value = 0.2
					}
				}
				self_experiment_thorough = {
					change_variable = {
						which = current_alchemy_value
						value = 0.4
					}
				}
				self_experiment_risky = {
					change_variable = {
						which = current_alchemy_value
						value = 0.6
					}
				}
				self_experiment_crazy = {
					change_variable = {
						which = current_alchemy_value
						value = 0.8
					}
				}
			}
		}
		
		else = {
			trigger_switch = {
				on_trigger = has_character_flag
				
				self_experiment_safe = {
					change_variable = {
						which = current_alchemy_value
						value = 0.1
					}
				}
				self_experiment_thorough = {
					change_variable = {
						which = current_alchemy_value
						value = 0.2
					}
				}
				self_experiment_risky = {
					change_variable = {
						which = current_alchemy_value
						value = 0.3
					}
				}
				self_experiment_crazy = {
					change_variable = {
						which = current_alchemy_value
						value = 0.4
					}
				}
			}
		}
		
		if = {
			limit = {
				has_character_flag = self_experiment_two_ingredients
			}
			multiply_variable = {
				which = current_alchemy_value
				value = 1.5
			}
			change_variable = {
				which = alchemist_poison_knowledge
				which = current_alchemy_value
			}
		}
	}
}

alchemist_bad_outcome_random_self_experiment_effect = {
	hidden_tooltip = {
		random_list = {
			50 = {
				alchemist_bad_outcome_healing_self_experiment_effect = yes
			}
			50 = {
				alchemist_bad_outcome_poison_self_experiment_effect = yes
			}
		}
	}
}

increase_ingredient_knowledge_prisoner_experiment_effect = {
	set_variable = {
		which = current_ingredient_knowledge
		value = 0
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_herb1
		}
		change_variable = {
			which = ingredient_herb1_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_herb1_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_herb2
		}
		change_variable = {
			which = ingredient_herb2_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_herb2_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_herb3
		}
		change_variable = {
			which = ingredient_herb3_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_herb3_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_herb4
		}
		change_variable = {
			which = ingredient_herb4_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_herb4_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_herb5
		}
		change_variable = {
			which = ingredient_herb5_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_herb5_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_herb6
		}
		change_variable = {
			which = ingredient_herb6_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_herb6_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_herb7
		}
		change_variable = {
			which = ingredient_herb7_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_herb7_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_herb8
		}
		change_variable = {
			which = ingredient_herb8_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_herb8_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_herb9
		}
		change_variable = {
			which = ingredient_herb9_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_herb9_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_herb10
		}
		change_variable = {
			which = ingredient_herb10_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_herb10_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_herb11
		}
		change_variable = {
			which = ingredient_herb11_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_herb11_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_herb12
		}
		change_variable = {
			which = ingredient_herb12_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_herb12_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_herb13
		}
		change_variable = {
			which = ingredient_herb13_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_herb13_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_herb14
		}
		change_variable = {
			which = ingredient_herb14_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_herb14_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_herb15
		}
		change_variable = {
			which = ingredient_herb15_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_herb15_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_animal1
		}
		change_variable = {
			which = ingredient_animal1_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_animal1_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_animal2
		}
		change_variable = {
			which = ingredient_animal2_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_animal2_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_animal3
		}
		change_variable = {
			which = ingredient_animal3_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_animal3_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_animal4
		}
		change_variable = {
			which = ingredient_animal4_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_animal4_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_animal5
		}
		change_variable = {
			which = ingredient_animal5_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_animal5_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_animal6
		}
		change_variable = {
			which = ingredient_animal6_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_animal6_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_animal7
		}
		change_variable = {
			which = ingredient_animal7_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_animal7_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_animal8
		}
		change_variable = {
			which = ingredient_animal8_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_animal8_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_animal9
		}
		change_variable = {
			which = ingredient_animal9_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_animal9_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic1
		}
		change_variable = {
			which = ingredient_metal_exotic1_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_metal_exotic1_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic2
		}
		change_variable = {
			which = ingredient_metal_exotic2_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_metal_exotic2_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic3
		}
		change_variable = {
			which = ingredient_metal_exotic3_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_metal_exotic3_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic4
		}
		change_variable = {
			which = ingredient_metal_exotic4_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_metal_exotic4_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic5
		}
		change_variable = {
			which = ingredient_metal_exotic5_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_metal_exotic5_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic6
		}
		change_variable = {
			which = ingredient_metal_exotic6_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_metal_exotic6_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic7
		}
		change_variable = {
			which = ingredient_metal_exotic7_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_metal_exotic7_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic8
		}
		change_variable = {
			which = ingredient_metal_exotic8_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_metal_exotic8_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic9
		}
		change_variable = {
			which = ingredient_metal_exotic9_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_metal_exotic9_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic10
		}
		change_variable = {
			which = ingredient_metal_exotic10_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_metal_exotic10_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic11
		}
		change_variable = {
			which = ingredient_metal_exotic11_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_metal_exotic11_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic12
		}
		change_variable = {
			which = ingredient_metal_exotic12_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_metal_exotic12_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic13
		}
		change_variable = {
			which = ingredient_metal_exotic13_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_metal_exotic13_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic14
		}
		change_variable = {
			which = ingredient_metal_exotic14_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_metal_exotic14_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_misc_powder_1
		}
		change_variable = {
			which = ingredient_misc_powder_1_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_misc_powder_1_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_misc_powder_2
		}
		change_variable = {
			which = ingredient_misc_powder_2_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_misc_powder_2_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_misc_powder_3
		}
		change_variable = {
			which = ingredient_misc_powder_3_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_misc_powder_3_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_misc_powder_4
		}
		change_variable = {
			which = ingredient_misc_powder_4_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_misc_powder_4_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_misc_powder_5
		}
		change_variable = {
			which = ingredient_misc_powder_5_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_misc_powder_5_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_mineral_1
		}
		change_variable = {
			which = ingredient_mineral_1_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_mineral_1_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_mineral_2
		}
		change_variable = {
			which = ingredient_mineral_2_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_mineral_2_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_mineral_jade_1
		}
		change_variable = {
			which = ingredient_mineral_jade_1_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_mineral_jade_1_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_mineral_jade_2
		}
		change_variable = {
			which = ingredient_mineral_jade_2_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_mineral_jade_2_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_mineral_jade_3
		}
		change_variable = {
			which = ingredient_mineral_jade_3_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_mineral_jade_3_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_mineral_jade_4
		}
		change_variable = {
			which = ingredient_mineral_jade_4_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_mineral_jade_4_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_mineral_jade_5
		}
		change_variable = {
			which = ingredient_mineral_jade_5_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_mineral_jade_5_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_ingredient_ingredient_mineral_jade_6
		}
		change_variable = {
			which = ingredient_mineral_jade_6_knowledge
			value = 1
		}
		change_variable = {
			which = current_ingredient_knowledge
			which = ingredient_mineral_jade_6_knowledge
		}
	}
	
	if = {
		limit = {
			has_character_flag = prisoner_experiment_two_ingredients
		}
		divide_variable = {
			which = current_ingredient_knowledge
			value = 1.5
		}
	}
}

alchemist_good_outcome_healing_prisoner_experiment_effect = {
	hidden_tooltip = {
		increase_ingredient_knowledge_prisoner_experiment_effect = yes
		
		if = {
			limit = {
				check_variable = {
					which = current_ingredient_knowledge
					value <= 3
				}
			}
			
			set_variable = {
				which = current_alchemy_value
				value = 4
			}
		}
		
		else = {
			set_variable = {
				which = current_alchemy_value
				value = 2
			}
		}
		
		if = {
			limit = {
				has_character_flag = prisoner_experiment_two_ingredients
			}
			multiply_variable = {
				which = current_alchemy_value
				value = 1.5
			}
			change_variable = {
				which = alchemist_healing_knowledge
				which = current_alchemy_value
			}
		}
	}
}

alchemist_good_outcome_poison_prisoner_experiment_effect = {
	hidden_tooltip = {
		increase_ingredient_knowledge_prisoner_experiment_effect = yes
		
		if = {
			limit = {
				check_variable = {
					which = current_ingredient_knowledge
					value <= 3
				}
			}
			
			set_variable = {
				which = current_alchemy_value
				value = 4
			}
		}
		
		else = {
			set_variable = {
				which = current_alchemy_value
				value = 2
			}
		}
		
		if = {
			limit = {
				has_character_flag = prisoner_experiment_two_ingredients
			}
			multiply_variable = {
				which = current_alchemy_value
				value = 1.5
			}
			change_variable = {
				which = alchemist_poison_knowledge
				which = current_alchemy_value
			}
		}
	}
}

alchemist_good_outcome_random_prisoner_experiment_effect = {
	hidden_tooltip = {
		random_list = {
			50 = {
				alchemist_good_outcome_healing_prisoner_experiment_effect = yes
			}
			50 = {
				alchemist_good_outcome_poison_prisoner_experiment_effect = yes
			}
		}
	}
}

alchemist_average_outcome_healing_prisoner_experiment_effect = {
	hidden_tooltip = {
		increase_ingredient_knowledge_prisoner_experiment_effect = yes
		
		if = {
			limit = {
				check_variable = {
					which = current_ingredient_knowledge
					value <= 3
				}
			}
			set_variable = {
				which = current_alchemy_value
				value = 2
			}
		}
		
		else = {
			set_variable = {
				which = current_alchemy_value
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = prisoner_experiment_two_ingredients
			}
			multiply_variable = {
				which = current_alchemy_value
				value = 1.5
			}
			change_variable = {
				which = alchemist_healing_knowledge
				which = current_alchemy_value
			}
		}
	}
}

alchemist_average_outcome_poison_prisoner_experiment_effect = {
	hidden_tooltip = {
		increase_ingredient_knowledge_prisoner_experiment_effect = yes
		
		if = {
			limit = {
				check_variable = {
					which = current_ingredient_knowledge
					value <= 3
				}
			}
			set_variable = {
				which = current_alchemy_value
				value = 2
			}
		}
		
		else = {
			set_variable = {
				which = current_alchemy_value
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = prisoner_experiment_two_ingredients
			}
			multiply_variable = {
				which = current_alchemy_value
				value = 1.5
			}
			change_variable = {
				which = alchemist_poison_knowledge
				which = current_alchemy_value
			}
		}
	}
}

alchemist_average_outcome_random_prisoner_experiment_effect = {
	hidden_tooltip = {
		random_list = {
			50 = {
				alchemist_average_outcome_healing_prisoner_experiment_effect = yes
			}
			50 = {
				alchemist_average_outcome_poison_prisoner_experiment_effect = yes
			}
		}
	}
}

alchemist_bad_outcome_healing_prisoner_experiment_effect = {
	hidden_tooltip = {
		increase_ingredient_knowledge_prisoner_experiment_effect = yes
		
		if = {
			limit = {
				check_variable = {
					which = current_ingredient_knowledge
					value <= 3
				}
			}
			set_variable = {
				which = current_alchemy_value
				value = 1
			}
		}
		
		else = {
			set_variable = {
				which = current_alchemy_value
				value = 0.5
			}
		}
		
		if = {
			limit = {
				has_character_flag = prisoner_experiment_two_ingredients
			}
			multiply_variable = {
				which = current_alchemy_value
				value = 1.5
			}
			change_variable = {
				which = alchemist_healing_knowledge
				which = current_alchemy_value
			}
		}
	}
}

alchemist_bad_outcome_poison_prisoner_experiment_effect = {
	hidden_tooltip = {
		increase_ingredient_knowledge_prisoner_experiment_effect = yes
		
		if = {
			limit = {
				check_variable = {
					which = current_ingredient_knowledge
					value <= 3
				}
			}
			set_variable = {
				which = current_alchemy_value
				value = 1
			}
		}
		
		else = {
			set_variable = {
				which = current_alchemy_value
				value = 0.5
			}
		}
		
		if = {
			limit = {
				has_character_flag = prisoner_experiment_two_ingredients
			}
			multiply_variable = {
				which = current_alchemy_value
				value = 1.5
			}
			change_variable = {
				which = alchemist_poison_knowledge
				which = current_alchemy_value
			}
		}
	}
}

alchemist_bad_outcome_random_prisoner_experiment_effect = {
	hidden_tooltip = {
		random_list = {
			50 = {
				alchemist_bad_outcome_healing_prisoner_experiment_effect = yes
			}
			50 = {
				alchemist_bad_outcome_poison_prisoner_experiment_effect = yes
			}
		}
	}
}

save_ingredient_1_flag_healing_potion_effect = {
	clear_flags_with_prefix = my_healing_potion_uses_
	
	any_artifact = {
		limit = {
			has_artifact_flag = selected_ingredient_1
		}
		
		trigger_switch = {
			on_trigger = artifact_type
			
			ingredient_herb1 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_herb1
				}
			}
			ingredient_herb2 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_herb2
				}
			}
			ingredient_herb3 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_herb3
				}
			}
			ingredient_herb4 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_herb4
				}
			}
			ingredient_herb5 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_herb5
				}
			}
			ingredient_herb6 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_herb6
				}
			}
			ingredient_herb7 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_herb7
				}
			}
			ingredient_herb8 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_herb8
				}
			}
			ingredient_herb9 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_herb9
				}
			}
			ingredient_herb10 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_herb10
				}
			}
			ingredient_herb11 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_herb11
				}
			}
			ingredient_herb12 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_herb12
				}
			}
			ingredient_herb13 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_herb13
				}
			}
			ingredient_herb14 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_herb14
				}
			}
			ingredient_herb15 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_herb15
				}
			}
			ingredient_animal1 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_animal1
				}
			}
			ingredient_animal2 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_animal2
				}
			}
			ingredient_animal3 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_animal3
				}
			}
			ingredient_animal4 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_animal4
				}
			}
			ingredient_animal5 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_animal5
				}
			}
			ingredient_animal6 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_animal6
				}
			}
			ingredient_animal7 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_animal7
				}
			}
			ingredient_animal8 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_animal8
				}
			}
			ingredient_animal9 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_animal9
				}
			}
			ingredient_metal_exotic1 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_metal_exotic1
				}
			}
			ingredient_metal_exotic2 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_metal_exotic2
				}
			}
			ingredient_metal_exotic3 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_metal_exotic3
				}
			}
			ingredient_metal_exotic4 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_metal_exotic4
				}
			}
			ingredient_metal_exotic5 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_metal_exotic5
				}
			}
			ingredient_metal_exotic6 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_metal_exotic6
				}
			}
			ingredient_metal_exotic7 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_metal_exotic7
				}
			}
			ingredient_metal_exotic8 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_metal_exotic8
				}
			}
			ingredient_metal_exotic9 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_metal_exotic9
				}
			}
			ingredient_metal_exotic10 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_metal_exotic10
				}
			}
			ingredient_metal_exotic11 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_metal_exotic11
				}
			}
			ingredient_metal_exotic12 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_metal_exotic12
				}
			}
			ingredient_metal_exotic13 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_metal_exotic13
				}
			}
			ingredient_metal_exotic14 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_metal_exotic14
				}
			}
			ingredient_misc_powder_1 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_misc_powder_1
				}
			}
			ingredient_misc_powder_2 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_misc_powder_2
				}
			}
			ingredient_misc_powder_3 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_misc_powder_3
				}
			}
			ingredient_misc_powder_4 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_misc_powder_4
				}
			}
			ingredient_misc_powder_5 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_misc_powder_5
				}
			}
			ingredient_mineral_1 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_mineral_1
				}
			}
			ingredient_mineral_2 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_mineral_2
				}
			}
			ingredient_mineral_jade_1 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_mineral_jade_1
				}
			}
			ingredient_mineral_jade_2 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_mineral_jade_2
				}
			}
			ingredient_mineral_jade_3 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_mineral_jade_3
				}
			}
			ingredient_mineral_jade_4 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_mineral_jade_4
				}
			}
			ingredient_mineral_jade_5 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_mineral_jade_5
				}
			}
			ingredient_mineral_jade_6 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_mineral_jade_6
				}
			}
		}
	}
}

save_ingredient_2_flag_healing_potion_effect = {
	clear_flags_with_prefix = my_healing_potion_uses_
	
	any_artifact = {
		limit = {
			has_artifact_flag = selected_ingredient_2
		}
		
		trigger_switch = {
			on_trigger = artifact_type
			
			ingredient_herb1 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_herb1
				}
			}
			ingredient_herb2 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_herb2
				}
			}
			ingredient_herb3 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_herb3
				}
			}
			ingredient_herb4 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_herb4
				}
			}
			ingredient_herb5 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_herb5
				}
			}
			ingredient_herb6 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_herb6
				}
			}
			ingredient_herb7 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_herb7
				}
			}
			ingredient_herb8 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_herb8
				}
			}
			ingredient_herb9 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_herb9
				}
			}
			ingredient_herb10 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_herb10
				}
			}
			ingredient_herb11 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_herb11
				}
			}
			ingredient_herb12 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_herb12
				}
			}
			ingredient_herb13 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_herb13
				}
			}
			ingredient_herb14 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_herb14
				}
			}
			ingredient_herb15 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_herb15
				}
			}
			ingredient_animal1 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_animal1
				}
			}
			ingredient_animal2 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_animal2
				}
			}
			ingredient_animal3 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_animal3
				}
			}
			ingredient_animal4 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_animal4
				}
			}
			ingredient_animal5 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_animal5
				}
			}
			ingredient_animal6 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_animal6
				}
			}
			ingredient_animal7 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_animal7
				}
			}
			ingredient_animal8 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_animal8
				}
			}
			ingredient_animal9 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_animal9
				}
			}
			ingredient_metal_exotic1 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_metal_exotic1
				}
			}
			ingredient_metal_exotic2 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_metal_exotic2
				}
			}
			ingredient_metal_exotic3 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_metal_exotic3
				}
			}
			ingredient_metal_exotic4 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_metal_exotic4
				}
			}
			ingredient_metal_exotic5 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_metal_exotic5
				}
			}
			ingredient_metal_exotic6 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_metal_exotic6
				}
			}
			ingredient_metal_exotic7 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_metal_exotic7
				}
			}
			ingredient_metal_exotic8 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_metal_exotic8
				}
			}
			ingredient_metal_exotic9 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_metal_exotic9
				}
			}
			ingredient_metal_exotic10 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_metal_exotic10
				}
			}
			ingredient_metal_exotic11 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_metal_exotic11
				}
			}
			ingredient_metal_exotic12 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_metal_exotic12
				}
			}
			ingredient_metal_exotic13 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_metal_exotic13
				}
			}
			ingredient_metal_exotic14 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_metal_exotic14
				}
			}
			ingredient_misc_powder_1 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_misc_powder_1
				}
			}
			ingredient_misc_powder_2 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_misc_powder_2
				}
			}
			ingredient_misc_powder_3 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_misc_powder_3
				}
			}
			ingredient_misc_powder_4 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_misc_powder_4
				}
			}
			ingredient_misc_powder_5 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_misc_powder_5
				}
			}
			ingredient_mineral_1 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_mineral_1
				}
			}
			ingredient_mineral_2 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_mineral_2
				}
			}
			ingredient_mineral_jade_1 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_mineral_jade_1
				}
			}
			ingredient_mineral_jade_2 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_mineral_jade_2
				}
			}
			ingredient_mineral_jade_3 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_mineral_jade_3
				}
			}
			ingredient_mineral_jade_4 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_mineral_jade_4
				}
			}
			ingredient_mineral_jade_5 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_mineral_jade_5
				}
			}
			ingredient_mineral_jade_6 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_mineral_jade_6
				}
			}
		}
	}
}

save_ingredient_1_and_2_flag_healing_potion_effect = {
	clear_flags_with_prefix = my_healing_potion_uses_
	
	any_artifact = {
		limit = {
			OR = {
				has_artifact_flag = selected_ingredient_1
				has_artifact_flag = selected_ingredient_2
			}
		}
		
		trigger_switch = {
			on_trigger = artifact_type
			
			ingredient_herb1 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_herb1
				}
			}
			ingredient_herb2 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_herb2
				}
			}
			ingredient_herb3 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_herb3
				}
			}
			ingredient_herb4 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_herb4
				}
			}
			ingredient_herb5 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_herb5
				}
			}
			ingredient_herb6 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_herb6
				}
			}
			ingredient_herb7 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_herb7
				}
			}
			ingredient_herb8 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_herb8
				}
			}
			ingredient_herb9 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_herb9
				}
			}
			ingredient_herb10 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_herb10
				}
			}
			ingredient_herb11 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_herb11
				}
			}
			ingredient_herb12 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_herb12
				}
			}
			ingredient_herb13 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_herb13
				}
			}
			ingredient_herb14 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_herb14
				}
			}
			ingredient_herb15 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_herb15
				}
			}
			ingredient_animal1 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_animal1
				}
			}
			ingredient_animal2 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_animal2
				}
			}
			ingredient_animal3 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_animal3
				}
			}
			ingredient_animal4 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_animal4
				}
			}
			ingredient_animal5 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_animal5
				}
			}
			ingredient_animal6 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_animal6
				}
			}
			ingredient_animal7 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_animal7
				}
			}
			ingredient_animal8 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_animal8
				}
			}
			ingredient_animal9 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_animal9
				}
			}
			ingredient_metal_exotic1 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_metal_exotic1
				}
			}
			ingredient_metal_exotic2 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_metal_exotic2
				}
			}
			ingredient_metal_exotic3 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_metal_exotic3
				}
			}
			ingredient_metal_exotic4 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_metal_exotic4
				}
			}
			ingredient_metal_exotic5 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_metal_exotic5
				}
			}
			ingredient_metal_exotic6 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_metal_exotic6
				}
			}
			ingredient_metal_exotic7 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_metal_exotic7
				}
			}
			ingredient_metal_exotic8 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_metal_exotic8
				}
			}
			ingredient_metal_exotic9 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_metal_exotic9
				}
			}
			ingredient_metal_exotic10 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_metal_exotic10
				}
			}
			ingredient_metal_exotic11 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_metal_exotic11
				}
			}
			ingredient_metal_exotic12 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_metal_exotic12
				}
			}
			ingredient_metal_exotic13 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_metal_exotic13
				}
			}
			ingredient_metal_exotic14 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_metal_exotic14
				}
			}
			ingredient_misc_powder_1 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_misc_powder_1
				}
			}
			ingredient_misc_powder_2 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_misc_powder_2
				}
			}
			ingredient_misc_powder_3 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_misc_powder_3
				}
			}
			ingredient_misc_powder_4 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_misc_powder_4
				}
			}
			ingredient_misc_powder_5 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_misc_powder_5
				}
			}
			ingredient_mineral_1 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_mineral_1
				}
			}
			ingredient_mineral_2 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_mineral_2
				}
			}
			ingredient_mineral_jade_1 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_mineral_jade_1
				}
			}
			ingredient_mineral_jade_2 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_mineral_jade_2
				}
			}
			ingredient_mineral_jade_3 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_mineral_jade_3
				}
			}
			ingredient_mineral_jade_4 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_mineral_jade_4
				}
			}
			ingredient_mineral_jade_5 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_mineral_jade_5
				}
			}
			ingredient_mineral_jade_6 = {
				ROOT = {
					set_character_flag = my_healing_potion_uses_ingredient_mineral_jade_6
				}
			}
		}
	}
}

save_ingredient_1_flag_clarity_potion_effect = {
	clear_flags_with_prefix = my_clarity_potion_uses_
	
	any_artifact = {
		limit = {
			has_artifact_flag = selected_ingredient_1
		}
		
		trigger_switch = {
			on_trigger = artifact_type
			
			ingredient_herb1 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_herb1
				}
			}
			ingredient_herb2 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_herb2
				}
			}
			ingredient_herb3 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_herb3
				}
			}
			ingredient_herb4 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_herb4
				}
			}
			ingredient_herb5 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_herb5
				}
			}
			ingredient_herb6 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_herb6
				}
			}
			ingredient_herb7 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_herb7
				}
			}
			ingredient_herb8 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_herb8
				}
			}
			ingredient_herb9 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_herb9
				}
			}
			ingredient_herb10 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_herb10
				}
			}
			ingredient_herb11 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_herb11
				}
			}
			ingredient_herb12 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_herb12
				}
			}
			ingredient_herb13 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_herb13
				}
			}
			ingredient_herb14 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_herb14
				}
			}
			ingredient_herb15 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_herb15
				}
			}
			ingredient_animal1 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_animal1
				}
			}
			ingredient_animal2 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_animal2
				}
			}
			ingredient_animal3 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_animal3
				}
			}
			ingredient_animal4 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_animal4
				}
			}
			ingredient_animal5 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_animal5
				}
			}
			ingredient_animal6 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_animal6
				}
			}
			ingredient_animal7 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_animal7
				}
			}
			ingredient_animal8 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_animal8
				}
			}
			ingredient_animal9 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_animal9
				}
			}
			ingredient_metal_exotic1 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_metal_exotic1
				}
			}
			ingredient_metal_exotic2 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_metal_exotic2
				}
			}
			ingredient_metal_exotic3 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_metal_exotic3
				}
			}
			ingredient_metal_exotic4 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_metal_exotic4
				}
			}
			ingredient_metal_exotic5 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_metal_exotic5
				}
			}
			ingredient_metal_exotic6 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_metal_exotic6
				}
			}
			ingredient_metal_exotic7 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_metal_exotic7
				}
			}
			ingredient_metal_exotic8 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_metal_exotic8
				}
			}
			ingredient_metal_exotic9 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_metal_exotic9
				}
			}
			ingredient_metal_exotic10 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_metal_exotic10
				}
			}
			ingredient_metal_exotic11 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_metal_exotic11
				}
			}
			ingredient_metal_exotic12 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_metal_exotic12
				}
			}
			ingredient_metal_exotic13 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_metal_exotic13
				}
			}
			ingredient_metal_exotic14 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_metal_exotic14
				}
			}
			ingredient_misc_powder_1 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_misc_powder_1
				}
			}
			ingredient_misc_powder_2 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_misc_powder_2
				}
			}
			ingredient_misc_powder_3 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_misc_powder_3
				}
			}
			ingredient_misc_powder_4 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_misc_powder_4
				}
			}
			ingredient_misc_powder_5 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_misc_powder_5
				}
			}
			ingredient_mineral_1 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_mineral_1
				}
			}
			ingredient_mineral_2 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_mineral_2
				}
			}
			ingredient_mineral_jade_1 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_mineral_jade_1
				}
			}
			ingredient_mineral_jade_2 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_mineral_jade_2
				}
			}
			ingredient_mineral_jade_3 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_mineral_jade_3
				}
			}
			ingredient_mineral_jade_4 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_mineral_jade_4
				}
			}
			ingredient_mineral_jade_5 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_mineral_jade_5
				}
			}
			ingredient_mineral_jade_6 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_mineral_jade_6
				}
			}
		}
	}
}

save_ingredient_2_flag_clarity_potion_effect = {
	clear_flags_with_prefix = my_clarity_potion_uses_
	
	any_artifact = {
		limit = {
			has_artifact_flag = selected_ingredient_2
		}
		
		trigger_switch = {
			on_trigger = artifact_type
			
			ingredient_herb1 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_herb1
				}
			}
			ingredient_herb2 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_herb2
				}
			}
			ingredient_herb3 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_herb3
				}
			}
			ingredient_herb4 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_herb4
				}
			}
			ingredient_herb5 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_herb5
				}
			}
			ingredient_herb6 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_herb6
				}
			}
			ingredient_herb7 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_herb7
				}
			}
			ingredient_herb8 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_herb8
				}
			}
			ingredient_herb9 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_herb9
				}
			}
			ingredient_herb10 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_herb10
				}
			}
			ingredient_herb11 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_herb11
				}
			}
			ingredient_herb12 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_herb12
				}
			}
			ingredient_herb13 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_herb13
				}
			}
			ingredient_herb14 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_herb14
				}
			}
			ingredient_herb15 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_herb15
				}
			}
			ingredient_animal1 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_animal1
				}
			}
			ingredient_animal2 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_animal2
				}
			}
			ingredient_animal3 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_animal3
				}
			}
			ingredient_animal4 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_animal4
				}
			}
			ingredient_animal5 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_animal5
				}
			}
			ingredient_animal6 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_animal6
				}
			}
			ingredient_animal7 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_animal7
				}
			}
			ingredient_animal8 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_animal8
				}
			}
			ingredient_animal9 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_animal9
				}
			}
			ingredient_metal_exotic1 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_metal_exotic1
				}
			}
			ingredient_metal_exotic2 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_metal_exotic2
				}
			}
			ingredient_metal_exotic3 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_metal_exotic3
				}
			}
			ingredient_metal_exotic4 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_metal_exotic4
				}
			}
			ingredient_metal_exotic5 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_metal_exotic5
				}
			}
			ingredient_metal_exotic6 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_metal_exotic6
				}
			}
			ingredient_metal_exotic7 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_metal_exotic7
				}
			}
			ingredient_metal_exotic8 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_metal_exotic8
				}
			}
			ingredient_metal_exotic9 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_metal_exotic9
				}
			}
			ingredient_metal_exotic10 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_metal_exotic10
				}
			}
			ingredient_metal_exotic11 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_metal_exotic11
				}
			}
			ingredient_metal_exotic12 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_metal_exotic12
				}
			}
			ingredient_metal_exotic13 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_metal_exotic13
				}
			}
			ingredient_metal_exotic14 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_metal_exotic14
				}
			}
			ingredient_misc_powder_1 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_misc_powder_1
				}
			}
			ingredient_misc_powder_2 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_misc_powder_2
				}
			}
			ingredient_misc_powder_3 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_misc_powder_3
				}
			}
			ingredient_misc_powder_4 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_misc_powder_4
				}
			}
			ingredient_misc_powder_5 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_misc_powder_5
				}
			}
			ingredient_mineral_1 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_mineral_1
				}
			}
			ingredient_mineral_2 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_mineral_2
				}
			}
			ingredient_mineral_jade_1 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_mineral_jade_1
				}
			}
			ingredient_mineral_jade_2 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_mineral_jade_2
				}
			}
			ingredient_mineral_jade_3 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_mineral_jade_3
				}
			}
			ingredient_mineral_jade_4 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_mineral_jade_4
				}
			}
			ingredient_mineral_jade_5 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_mineral_jade_5
				}
			}
			ingredient_mineral_jade_6 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_mineral_jade_6
				}
			}
		}
	}
}

save_ingredient_1_and_2_flag_clarity_potion_effect = {
	clear_flags_with_prefix = my_clarity_potion_uses_
	
	any_artifact = {
		limit = {
			OR = {
				has_artifact_flag = selected_ingredient_1
				has_artifact_flag = selected_ingredient_2
			}
		}
		
		trigger_switch = {
			on_trigger = artifact_type
			
			ingredient_herb1 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_herb1
				}
			}
			ingredient_herb2 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_herb2
				}
			}
			ingredient_herb3 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_herb3
				}
			}
			ingredient_herb4 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_herb4
				}
			}
			ingredient_herb5 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_herb5
				}
			}
			ingredient_herb6 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_herb6
				}
			}
			ingredient_herb7 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_herb7
				}
			}
			ingredient_herb8 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_herb8
				}
			}
			ingredient_herb9 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_herb9
				}
			}
			ingredient_herb10 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_herb10
				}
			}
			ingredient_herb11 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_herb11
				}
			}
			ingredient_herb12 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_herb12
				}
			}
			ingredient_herb13 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_herb13
				}
			}
			ingredient_herb14 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_herb14
				}
			}
			ingredient_herb15 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_herb15
				}
			}
			ingredient_animal1 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_animal1
				}
			}
			ingredient_animal2 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_animal2
				}
			}
			ingredient_animal3 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_animal3
				}
			}
			ingredient_animal4 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_animal4
				}
			}
			ingredient_animal5 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_animal5
				}
			}
			ingredient_animal6 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_animal6
				}
			}
			ingredient_animal7 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_animal7
				}
			}
			ingredient_animal8 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_animal8
				}
			}
			ingredient_animal9 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_animal9
				}
			}
			ingredient_metal_exotic1 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_metal_exotic1
				}
			}
			ingredient_metal_exotic2 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_metal_exotic2
				}
			}
			ingredient_metal_exotic3 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_metal_exotic3
				}
			}
			ingredient_metal_exotic4 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_metal_exotic4
				}
			}
			ingredient_metal_exotic5 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_metal_exotic5
				}
			}
			ingredient_metal_exotic6 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_metal_exotic6
				}
			}
			ingredient_metal_exotic7 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_metal_exotic7
				}
			}
			ingredient_metal_exotic8 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_metal_exotic8
				}
			}
			ingredient_metal_exotic9 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_metal_exotic9
				}
			}
			ingredient_metal_exotic10 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_metal_exotic10
				}
			}
			ingredient_metal_exotic11 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_metal_exotic11
				}
			}
			ingredient_metal_exotic12 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_metal_exotic12
				}
			}
			ingredient_metal_exotic13 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_metal_exotic13
				}
			}
			ingredient_metal_exotic14 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_metal_exotic14
				}
			}
			ingredient_misc_powder_1 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_misc_powder_1
				}
			}
			ingredient_misc_powder_2 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_misc_powder_2
				}
			}
			ingredient_misc_powder_3 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_misc_powder_3
				}
			}
			ingredient_misc_powder_4 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_misc_powder_4
				}
			}
			ingredient_misc_powder_5 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_misc_powder_5
				}
			}
			ingredient_mineral_1 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_mineral_1
				}
			}
			ingredient_mineral_2 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_mineral_2
				}
			}
			ingredient_mineral_jade_1 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_mineral_jade_1
				}
			}
			ingredient_mineral_jade_2 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_mineral_jade_2
				}
			}
			ingredient_mineral_jade_3 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_mineral_jade_3
				}
			}
			ingredient_mineral_jade_4 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_mineral_jade_4
				}
			}
			ingredient_mineral_jade_5 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_mineral_jade_5
				}
			}
			ingredient_mineral_jade_6 = {
				ROOT = {
					set_character_flag = my_clarity_potion_uses_ingredient_mineral_jade_6
				}
			}
		}
	}
}

save_ingredient_1_flag_fertility_potion_effect = {
	clear_flags_with_prefix = my_fertility_potion_uses_
	
	any_artifact = {
		limit = {
			has_artifact_flag = selected_ingredient_1
		}
		
		trigger_switch = {
			on_trigger = artifact_type
			
			ingredient_herb1 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_herb1
				}
			}
			ingredient_herb2 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_herb2
				}
			}
			ingredient_herb3 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_herb3
				}
			}
			ingredient_herb4 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_herb4
				}
			}
			ingredient_herb5 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_herb5
				}
			}
			ingredient_herb6 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_herb6
				}
			}
			ingredient_herb7 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_herb7
				}
			}
			ingredient_herb8 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_herb8
				}
			}
			ingredient_herb9 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_herb9
				}
			}
			ingredient_herb10 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_herb10
				}
			}
			ingredient_herb11 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_herb11
				}
			}
			ingredient_herb12 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_herb12
				}
			}
			ingredient_herb13 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_herb13
				}
			}
			ingredient_herb14 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_herb14
				}
			}
			ingredient_herb15 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_herb15
				}
			}
			ingredient_animal1 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_animal1
				}
			}
			ingredient_animal2 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_animal2
				}
			}
			ingredient_animal3 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_animal3
				}
			}
			ingredient_animal4 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_animal4
				}
			}
			ingredient_animal5 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_animal5
				}
			}
			ingredient_animal6 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_animal6
				}
			}
			ingredient_animal7 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_animal7
				}
			}
			ingredient_animal8 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_animal8
				}
			}
			ingredient_animal9 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_animal9
				}
			}
			ingredient_metal_exotic1 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_metal_exotic1
				}
			}
			ingredient_metal_exotic2 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_metal_exotic2
				}
			}
			ingredient_metal_exotic3 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_metal_exotic3
				}
			}
			ingredient_metal_exotic4 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_metal_exotic4
				}
			}
			ingredient_metal_exotic5 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_metal_exotic5
				}
			}
			ingredient_metal_exotic6 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_metal_exotic6
				}
			}
			ingredient_metal_exotic7 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_metal_exotic7
				}
			}
			ingredient_metal_exotic8 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_metal_exotic8
				}
			}
			ingredient_metal_exotic9 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_metal_exotic9
				}
			}
			ingredient_metal_exotic10 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_metal_exotic10
				}
			}
			ingredient_metal_exotic11 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_metal_exotic11
				}
			}
			ingredient_metal_exotic12 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_metal_exotic12
				}
			}
			ingredient_metal_exotic13 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_metal_exotic13
				}
			}
			ingredient_metal_exotic14 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_metal_exotic14
				}
			}
			ingredient_misc_powder_1 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_misc_powder_1
				}
			}
			ingredient_misc_powder_2 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_misc_powder_2
				}
			}
			ingredient_misc_powder_3 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_misc_powder_3
				}
			}
			ingredient_misc_powder_4 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_misc_powder_4
				}
			}
			ingredient_misc_powder_5 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_misc_powder_5
				}
			}
			ingredient_mineral_1 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_mineral_1
				}
			}
			ingredient_mineral_2 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_mineral_2
				}
			}
			ingredient_mineral_jade_1 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_mineral_jade_1
				}
			}
			ingredient_mineral_jade_2 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_mineral_jade_2
				}
			}
			ingredient_mineral_jade_3 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_mineral_jade_3
				}
			}
			ingredient_mineral_jade_4 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_mineral_jade_4
				}
			}
			ingredient_mineral_jade_5 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_mineral_jade_5
				}
			}
			ingredient_mineral_jade_6 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_mineral_jade_6
				}
			}
		}
	}
}

save_ingredient_2_flag_fertility_potion_effect = {
	clear_flags_with_prefix = my_fertility_potion_uses_
	
	any_artifact = {
		limit = {
			has_artifact_flag = selected_ingredient_2
		}
		
		trigger_switch = {
			on_trigger = artifact_type
			
			ingredient_herb1 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_herb1
				}
			}
			ingredient_herb2 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_herb2
				}
			}
			ingredient_herb3 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_herb3
				}
			}
			ingredient_herb4 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_herb4
				}
			}
			ingredient_herb5 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_herb5
				}
			}
			ingredient_herb6 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_herb6
				}
			}
			ingredient_herb7 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_herb7
				}
			}
			ingredient_herb8 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_herb8
				}
			}
			ingredient_herb9 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_herb9
				}
			}
			ingredient_herb10 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_herb10
				}
			}
			ingredient_herb11 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_herb11
				}
			}
			ingredient_herb12 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_herb12
				}
			}
			ingredient_herb13 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_herb13
				}
			}
			ingredient_herb14 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_herb14
				}
			}
			ingredient_herb15 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_herb15
				}
			}
			ingredient_animal1 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_animal1
				}
			}
			ingredient_animal2 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_animal2
				}
			}
			ingredient_animal3 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_animal3
				}
			}
			ingredient_animal4 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_animal4
				}
			}
			ingredient_animal5 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_animal5
				}
			}
			ingredient_animal6 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_animal6
				}
			}
			ingredient_animal7 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_animal7
				}
			}
			ingredient_animal8 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_animal8
				}
			}
			ingredient_animal9 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_animal9
				}
			}
			ingredient_metal_exotic1 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_metal_exotic1
				}
			}
			ingredient_metal_exotic2 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_metal_exotic2
				}
			}
			ingredient_metal_exotic3 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_metal_exotic3
				}
			}
			ingredient_metal_exotic4 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_metal_exotic4
				}
			}
			ingredient_metal_exotic5 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_metal_exotic5
				}
			}
			ingredient_metal_exotic6 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_metal_exotic6
				}
			}
			ingredient_metal_exotic7 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_metal_exotic7
				}
			}
			ingredient_metal_exotic8 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_metal_exotic8
				}
			}
			ingredient_metal_exotic9 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_metal_exotic9
				}
			}
			ingredient_metal_exotic10 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_metal_exotic10
				}
			}
			ingredient_metal_exotic11 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_metal_exotic11
				}
			}
			ingredient_metal_exotic12 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_metal_exotic12
				}
			}
			ingredient_metal_exotic13 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_metal_exotic13
				}
			}
			ingredient_metal_exotic14 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_metal_exotic14
				}
			}
			ingredient_misc_powder_1 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_misc_powder_1
				}
			}
			ingredient_misc_powder_2 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_misc_powder_2
				}
			}
			ingredient_misc_powder_3 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_misc_powder_3
				}
			}
			ingredient_misc_powder_4 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_misc_powder_4
				}
			}
			ingredient_misc_powder_5 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_misc_powder_5
				}
			}
			ingredient_mineral_1 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_mineral_1
				}
			}
			ingredient_mineral_2 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_mineral_2
				}
			}
			ingredient_mineral_jade_1 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_mineral_jade_1
				}
			}
			ingredient_mineral_jade_2 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_mineral_jade_2
				}
			}
			ingredient_mineral_jade_3 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_mineral_jade_3
				}
			}
			ingredient_mineral_jade_4 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_mineral_jade_4
				}
			}
			ingredient_mineral_jade_5 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_mineral_jade_5
				}
			}
			ingredient_mineral_jade_6 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_mineral_jade_6
				}
			}
		}
	}
}

save_ingredient_1_and_2_flag_fertility_potion_effect = {
	clear_flags_with_prefix = my_fertility_potion_uses_
	
	any_artifact = {
		limit = {
			OR = {
				has_artifact_flag = selected_ingredient_1
				has_artifact_flag = selected_ingredient_2
			}
		}
		
		trigger_switch = {
			on_trigger = artifact_type
			
			ingredient_herb1 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_herb1
				}
			}
			ingredient_herb2 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_herb2
				}
			}
			ingredient_herb3 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_herb3
				}
			}
			ingredient_herb4 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_herb4
				}
			}
			ingredient_herb5 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_herb5
				}
			}
			ingredient_herb6 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_herb6
				}
			}
			ingredient_herb7 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_herb7
				}
			}
			ingredient_herb8 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_herb8
				}
			}
			ingredient_herb9 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_herb9
				}
			}
			ingredient_herb10 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_herb10
				}
			}
			ingredient_herb11 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_herb11
				}
			}
			ingredient_herb12 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_herb12
				}
			}
			ingredient_herb13 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_herb13
				}
			}
			ingredient_herb14 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_herb14
				}
			}
			ingredient_herb15 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_herb15
				}
			}
			ingredient_animal1 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_animal1
				}
			}
			ingredient_animal2 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_animal2
				}
			}
			ingredient_animal3 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_animal3
				}
			}
			ingredient_animal4 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_animal4
				}
			}
			ingredient_animal5 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_animal5
				}
			}
			ingredient_animal6 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_animal6
				}
			}
			ingredient_animal7 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_animal7
				}
			}
			ingredient_animal8 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_animal8
				}
			}
			ingredient_animal9 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_animal9
				}
			}
			ingredient_metal_exotic1 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_metal_exotic1
				}
			}
			ingredient_metal_exotic2 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_metal_exotic2
				}
			}
			ingredient_metal_exotic3 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_metal_exotic3
				}
			}
			ingredient_metal_exotic4 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_metal_exotic4
				}
			}
			ingredient_metal_exotic5 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_metal_exotic5
				}
			}
			ingredient_metal_exotic6 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_metal_exotic6
				}
			}
			ingredient_metal_exotic7 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_metal_exotic7
				}
			}
			ingredient_metal_exotic8 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_metal_exotic8
				}
			}
			ingredient_metal_exotic9 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_metal_exotic9
				}
			}
			ingredient_metal_exotic10 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_metal_exotic10
				}
			}
			ingredient_metal_exotic11 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_metal_exotic11
				}
			}
			ingredient_metal_exotic12 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_metal_exotic12
				}
			}
			ingredient_metal_exotic13 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_metal_exotic13
				}
			}
			ingredient_metal_exotic14 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_metal_exotic14
				}
			}
			ingredient_misc_powder_1 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_misc_powder_1
				}
			}
			ingredient_misc_powder_2 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_misc_powder_2
				}
			}
			ingredient_misc_powder_3 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_misc_powder_3
				}
			}
			ingredient_misc_powder_4 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_misc_powder_4
				}
			}
			ingredient_misc_powder_5 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_misc_powder_5
				}
			}
			ingredient_mineral_1 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_mineral_1
				}
			}
			ingredient_mineral_2 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_mineral_2
				}
			}
			ingredient_mineral_jade_1 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_mineral_jade_1
				}
			}
			ingredient_mineral_jade_2 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_mineral_jade_2
				}
			}
			ingredient_mineral_jade_3 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_mineral_jade_3
				}
			}
			ingredient_mineral_jade_4 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_mineral_jade_4
				}
			}
			ingredient_mineral_jade_5 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_mineral_jade_5
				}
			}
			ingredient_mineral_jade_6 = {
				ROOT = {
					set_character_flag = my_fertility_potion_uses_ingredient_mineral_jade_6
				}
			}
		}
	}
}

save_ingredient_1_flag_aphrodisiac_effect = {
	clear_flags_with_prefix = my_aphrodisiac_uses_
	
	any_artifact = {
		limit = {
			has_artifact_flag = selected_ingredient_1
		}
		
		trigger_switch = {
			on_trigger = artifact_type
			
			ingredient_herb1 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_herb1
				}
			}
			ingredient_herb2 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_herb2
				}
			}
			ingredient_herb3 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_herb3
				}
			}
			ingredient_herb4 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_herb4
				}
			}
			ingredient_herb5 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_herb5
				}
			}
			ingredient_herb6 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_herb6
				}
			}
			ingredient_herb7 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_herb7
				}
			}
			ingredient_herb8 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_herb8
				}
			}
			ingredient_herb9 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_herb9
				}
			}
			ingredient_herb10 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_herb10
				}
			}
			ingredient_herb11 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_herb11
				}
			}
			ingredient_herb12 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_herb12
				}
			}
			ingredient_herb13 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_herb13
				}
			}
			ingredient_herb14 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_herb14
				}
			}
			ingredient_herb15 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_herb15
				}
			}
			ingredient_animal1 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_animal1
				}
			}
			ingredient_animal2 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_animal2
				}
			}
			ingredient_animal3 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_animal3
				}
			}
			ingredient_animal4 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_animal4
				}
			}
			ingredient_animal5 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_animal5
				}
			}
			ingredient_animal6 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_animal6
				}
			}
			ingredient_animal7 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_animal7
				}
			}
			ingredient_animal8 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_animal8
				}
			}
			ingredient_animal9 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_animal9
				}
			}
			ingredient_metal_exotic1 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic1
				}
			}
			ingredient_metal_exotic2 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic2
				}
			}
			ingredient_metal_exotic3 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic3
				}
			}
			ingredient_metal_exotic4 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic4
				}
			}
			ingredient_metal_exotic5 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic5
				}
			}
			ingredient_metal_exotic6 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic6
				}
			}
			ingredient_metal_exotic7 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic7
				}
			}
			ingredient_metal_exotic8 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic8
				}
			}
			ingredient_metal_exotic9 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic9
				}
			}
			ingredient_metal_exotic10 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic10
				}
			}
			ingredient_metal_exotic11 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic11
				}
			}
			ingredient_metal_exotic12 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic12
				}
			}
			ingredient_metal_exotic13 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic13
				}
			}
			ingredient_metal_exotic14 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic14
				}
			}
			ingredient_misc_powder_1 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_misc_powder_1
				}
			}
			ingredient_misc_powder_2 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_misc_powder_2
				}
			}
			ingredient_misc_powder_3 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_misc_powder_3
				}
			}
			ingredient_misc_powder_4 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_misc_powder_4
				}
			}
			ingredient_misc_powder_5 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_misc_powder_5
				}
			}
			ingredient_mineral_1 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_mineral_1
				}
			}
			ingredient_mineral_2 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_mineral_2
				}
			}
			ingredient_mineral_jade_1 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_mineral_jade_1
				}
			}
			ingredient_mineral_jade_2 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_mineral_jade_2
				}
			}
			ingredient_mineral_jade_3 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_mineral_jade_3
				}
			}
			ingredient_mineral_jade_4 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_mineral_jade_4
				}
			}
			ingredient_mineral_jade_5 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_mineral_jade_5
				}
			}
			ingredient_mineral_jade_6 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_mineral_jade_6
				}
			}
		}
	}
}

save_ingredient_2_flag_aphrodisiac_effect = {
	clear_flags_with_prefix = my_aphrodisiac_uses_
	
	any_artifact = {
		limit = {
			has_artifact_flag = selected_ingredient_2
		}
		
		trigger_switch = {
			on_trigger = artifact_type
			
			ingredient_herb1 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_herb1
				}
			}
			ingredient_herb2 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_herb2
				}
			}
			ingredient_herb3 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_herb3
				}
			}
			ingredient_herb4 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_herb4
				}
			}
			ingredient_herb5 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_herb5
				}
			}
			ingredient_herb6 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_herb6
				}
			}
			ingredient_herb7 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_herb7
				}
			}
			ingredient_herb8 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_herb8
				}
			}
			ingredient_herb9 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_herb9
				}
			}
			ingredient_herb10 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_herb10
				}
			}
			ingredient_herb11 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_herb11
				}
			}
			ingredient_herb12 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_herb12
				}
			}
			ingredient_herb13 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_herb13
				}
			}
			ingredient_herb14 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_herb14
				}
			}
			ingredient_herb15 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_herb15
				}
			}
			ingredient_animal1 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_animal1
				}
			}
			ingredient_animal2 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_animal2
				}
			}
			ingredient_animal3 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_animal3
				}
			}
			ingredient_animal4 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_animal4
				}
			}
			ingredient_animal5 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_animal5
				}
			}
			ingredient_animal6 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_animal6
				}
			}
			ingredient_animal7 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_animal7
				}
			}
			ingredient_animal8 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_animal8
				}
			}
			ingredient_animal9 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_animal9
				}
			}
			ingredient_metal_exotic1 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic1
				}
			}
			ingredient_metal_exotic2 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic2
				}
			}
			ingredient_metal_exotic3 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic3
				}
			}
			ingredient_metal_exotic4 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic4
				}
			}
			ingredient_metal_exotic5 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic5
				}
			}
			ingredient_metal_exotic6 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic6
				}
			}
			ingredient_metal_exotic7 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic7
				}
			}
			ingredient_metal_exotic8 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic8
				}
			}
			ingredient_metal_exotic9 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic9
				}
			}
			ingredient_metal_exotic10 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic10
				}
			}
			ingredient_metal_exotic11 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic11
				}
			}
			ingredient_metal_exotic12 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic12
				}
			}
			ingredient_metal_exotic13 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic13
				}
			}
			ingredient_metal_exotic14 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic14
				}
			}
			ingredient_misc_powder_1 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_misc_powder_1
				}
			}
			ingredient_misc_powder_2 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_misc_powder_2
				}
			}
			ingredient_misc_powder_3 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_misc_powder_3
				}
			}
			ingredient_misc_powder_4 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_misc_powder_4
				}
			}
			ingredient_misc_powder_5 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_misc_powder_5
				}
			}
			ingredient_mineral_1 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_mineral_1
				}
			}
			ingredient_mineral_2 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_mineral_2
				}
			}
			ingredient_mineral_jade_1 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_mineral_jade_1
				}
			}
			ingredient_mineral_jade_2 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_mineral_jade_2
				}
			}
			ingredient_mineral_jade_3 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_mineral_jade_3
				}
			}
			ingredient_mineral_jade_4 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_mineral_jade_4
				}
			}
			ingredient_mineral_jade_5 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_mineral_jade_5
				}
			}
			ingredient_mineral_jade_6 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_mineral_jade_6
				}
			}
		}
	}
}

save_ingredient_1_and_2_flag_aphrodisiac_effect = {
	clear_flags_with_prefix = my_aphrodisiac_uses_
	
	any_artifact = {
		limit = {
			OR = {
				has_artifact_flag = selected_ingredient_1
				has_artifact_flag = selected_ingredient_2
			}
		}
		
		trigger_switch = {
			on_trigger = artifact_type
			
			ingredient_herb1 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_herb1
				}
			}
			ingredient_herb2 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_herb2
				}
			}
			ingredient_herb3 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_herb3
				}
			}
			ingredient_herb4 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_herb4
				}
			}
			ingredient_herb5 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_herb5
				}
			}
			ingredient_herb6 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_herb6
				}
			}
			ingredient_herb7 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_herb7
				}
			}
			ingredient_herb8 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_herb8
				}
			}
			ingredient_herb9 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_herb9
				}
			}
			ingredient_herb10 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_herb10
				}
			}
			ingredient_herb11 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_herb11
				}
			}
			ingredient_herb12 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_herb12
				}
			}
			ingredient_herb13 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_herb13
				}
			}
			ingredient_herb14 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_herb14
				}
			}
			ingredient_herb15 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_herb15
				}
			}
			ingredient_animal1 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_animal1
				}
			}
			ingredient_animal2 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_animal2
				}
			}
			ingredient_animal3 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_animal3
				}
			}
			ingredient_animal4 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_animal4
				}
			}
			ingredient_animal5 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_animal5
				}
			}
			ingredient_animal6 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_animal6
				}
			}
			ingredient_animal7 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_animal7
				}
			}
			ingredient_animal8 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_animal8
				}
			}
			ingredient_animal9 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_animal9
				}
			}
			ingredient_metal_exotic1 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic1
				}
			}
			ingredient_metal_exotic2 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic2
				}
			}
			ingredient_metal_exotic3 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic3
				}
			}
			ingredient_metal_exotic4 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic4
				}
			}
			ingredient_metal_exotic5 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic5
				}
			}
			ingredient_metal_exotic6 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic6
				}
			}
			ingredient_metal_exotic7 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic7
				}
			}
			ingredient_metal_exotic8 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic8
				}
			}
			ingredient_metal_exotic9 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic9
				}
			}
			ingredient_metal_exotic10 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic10
				}
			}
			ingredient_metal_exotic11 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic11
				}
			}
			ingredient_metal_exotic12 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic12
				}
			}
			ingredient_metal_exotic13 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic13
				}
			}
			ingredient_metal_exotic14 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic14
				}
			}
			ingredient_misc_powder_1 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_misc_powder_1
				}
			}
			ingredient_misc_powder_2 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_misc_powder_2
				}
			}
			ingredient_misc_powder_3 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_misc_powder_3
				}
			}
			ingredient_misc_powder_4 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_misc_powder_4
				}
			}
			ingredient_misc_powder_5 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_misc_powder_5
				}
			}
			ingredient_mineral_1 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_mineral_1
				}
			}
			ingredient_mineral_2 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_mineral_2
				}
			}
			ingredient_mineral_jade_1 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_mineral_jade_1
				}
			}
			ingredient_mineral_jade_2 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_mineral_jade_2
				}
			}
			ingredient_mineral_jade_3 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_mineral_jade_3
				}
			}
			ingredient_mineral_jade_4 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_mineral_jade_4
				}
			}
			ingredient_mineral_jade_5 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_mineral_jade_5
				}
			}
			ingredient_mineral_jade_6 = {
				ROOT = {
					set_character_flag = my_aphrodisiac_uses_ingredient_mineral_jade_6
				}
			}
		}
	}
}

save_ingredient_1_flag_humiliating_potion_effect = {
	clear_flags_with_prefix = my_humiliating_potion_uses_
	
	any_artifact = {
		limit = {
			has_artifact_flag = selected_ingredient_1
		}
		
		trigger_switch = {
			on_trigger = artifact_type
			
			ingredient_herb1 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_herb1
				}
			}
			ingredient_herb2 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_herb2
				}
			}
			ingredient_herb3 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_herb3
				}
			}
			ingredient_herb4 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_herb4
				}
			}
			ingredient_herb5 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_herb5
				}
			}
			ingredient_herb6 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_herb6
				}
			}
			ingredient_herb7 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_herb7
				}
			}
			ingredient_herb8 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_herb8
				}
			}
			ingredient_herb9 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_herb9
				}
			}
			ingredient_herb10 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_herb10
				}
			}
			ingredient_herb11 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_herb11
				}
			}
			ingredient_herb12 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_herb12
				}
			}
			ingredient_herb13 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_herb13
				}
			}
			ingredient_herb14 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_herb14
				}
			}
			ingredient_herb15 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_herb15
				}
			}
			ingredient_animal1 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_animal1
				}
			}
			ingredient_animal2 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_animal2
				}
			}
			ingredient_animal3 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_animal3
				}
			}
			ingredient_animal4 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_animal4
				}
			}
			ingredient_animal5 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_animal5
				}
			}
			ingredient_animal6 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_animal6
				}
			}
			ingredient_animal7 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_animal7
				}
			}
			ingredient_animal8 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_animal8
				}
			}
			ingredient_animal9 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_animal9
				}
			}
			ingredient_metal_exotic1 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic1
				}
			}
			ingredient_metal_exotic2 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic2
				}
			}
			ingredient_metal_exotic3 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic3
				}
			}
			ingredient_metal_exotic4 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic4
				}
			}
			ingredient_metal_exotic5 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic5
				}
			}
			ingredient_metal_exotic6 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic6
				}
			}
			ingredient_metal_exotic7 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic7
				}
			}
			ingredient_metal_exotic8 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic8
				}
			}
			ingredient_metal_exotic9 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic9
				}
			}
			ingredient_metal_exotic10 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic10
				}
			}
			ingredient_metal_exotic11 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic11
				}
			}
			ingredient_metal_exotic12 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic12
				}
			}
			ingredient_metal_exotic13 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic13
				}
			}
			ingredient_metal_exotic14 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic14
				}
			}
			ingredient_misc_powder_1 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_misc_powder_1
				}
			}
			ingredient_misc_powder_2 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_misc_powder_2
				}
			}
			ingredient_misc_powder_3 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_misc_powder_3
				}
			}
			ingredient_misc_powder_4 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_misc_powder_4
				}
			}
			ingredient_misc_powder_5 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_misc_powder_5
				}
			}
			ingredient_mineral_1 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_mineral_1
				}
			}
			ingredient_mineral_2 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_mineral_2
				}
			}
			ingredient_mineral_jade_1 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_mineral_jade_1
				}
			}
			ingredient_mineral_jade_2 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_mineral_jade_2
				}
			}
			ingredient_mineral_jade_3 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_mineral_jade_3
				}
			}
			ingredient_mineral_jade_4 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_mineral_jade_4
				}
			}
			ingredient_mineral_jade_5 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_mineral_jade_5
				}
			}
			ingredient_mineral_jade_6 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_mineral_jade_6
				}
			}
		}
	}
}

save_ingredient_2_flag_humiliating_potion_effect = {
	clear_flags_with_prefix = my_humiliating_potion_uses_
	
	any_artifact = {
		limit = {
			has_artifact_flag = selected_ingredient_2
		}
		
		trigger_switch = {
			on_trigger = artifact_type
			
			ingredient_herb1 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_herb1
				}
			}
			ingredient_herb2 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_herb2
				}
			}
			ingredient_herb3 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_herb3
				}
			}
			ingredient_herb4 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_herb4
				}
			}
			ingredient_herb5 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_herb5
				}
			}
			ingredient_herb6 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_herb6
				}
			}
			ingredient_herb7 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_herb7
				}
			}
			ingredient_herb8 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_herb8
				}
			}
			ingredient_herb9 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_herb9
				}
			}
			ingredient_herb10 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_herb10
				}
			}
			ingredient_herb11 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_herb11
				}
			}
			ingredient_herb12 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_herb12
				}
			}
			ingredient_herb13 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_herb13
				}
			}
			ingredient_herb14 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_herb14
				}
			}
			ingredient_herb15 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_herb15
				}
			}
			ingredient_animal1 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_animal1
				}
			}
			ingredient_animal2 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_animal2
				}
			}
			ingredient_animal3 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_animal3
				}
			}
			ingredient_animal4 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_animal4
				}
			}
			ingredient_animal5 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_animal5
				}
			}
			ingredient_animal6 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_animal6
				}
			}
			ingredient_animal7 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_animal7
				}
			}
			ingredient_animal8 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_animal8
				}
			}
			ingredient_animal9 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_animal9
				}
			}
			ingredient_metal_exotic1 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic1
				}
			}
			ingredient_metal_exotic2 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic2
				}
			}
			ingredient_metal_exotic3 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic3
				}
			}
			ingredient_metal_exotic4 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic4
				}
			}
			ingredient_metal_exotic5 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic5
				}
			}
			ingredient_metal_exotic6 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic6
				}
			}
			ingredient_metal_exotic7 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic7
				}
			}
			ingredient_metal_exotic8 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic8
				}
			}
			ingredient_metal_exotic9 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic9
				}
			}
			ingredient_metal_exotic10 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic10
				}
			}
			ingredient_metal_exotic11 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic11
				}
			}
			ingredient_metal_exotic12 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic12
				}
			}
			ingredient_metal_exotic13 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic13
				}
			}
			ingredient_metal_exotic14 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic14
				}
			}
			ingredient_misc_powder_1 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_misc_powder_1
				}
			}
			ingredient_misc_powder_2 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_misc_powder_2
				}
			}
			ingredient_misc_powder_3 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_misc_powder_3
				}
			}
			ingredient_misc_powder_4 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_misc_powder_4
				}
			}
			ingredient_misc_powder_5 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_misc_powder_5
				}
			}
			ingredient_mineral_1 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_mineral_1
				}
			}
			ingredient_mineral_2 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_mineral_2
				}
			}
			ingredient_mineral_jade_1 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_mineral_jade_1
				}
			}
			ingredient_mineral_jade_2 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_mineral_jade_2
				}
			}
			ingredient_mineral_jade_3 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_mineral_jade_3
				}
			}
			ingredient_mineral_jade_4 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_mineral_jade_4
				}
			}
			ingredient_mineral_jade_5 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_mineral_jade_5
				}
			}
			ingredient_mineral_jade_6 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_mineral_jade_6
				}
			}
		}
	}
}

save_ingredient_1_and_2_flag_humiliating_potion_effect = {
	clear_flags_with_prefix = my_humiliating_potion_uses_
	
	any_artifact = {
		limit = {
			OR = {
				has_artifact_flag = selected_ingredient_1
				has_artifact_flag = selected_ingredient_2
			}
		}
		
		trigger_switch = {
			on_trigger = artifact_type
			
			ingredient_herb1 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_herb1
				}
			}
			ingredient_herb2 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_herb2
				}
			}
			ingredient_herb3 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_herb3
				}
			}
			ingredient_herb4 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_herb4
				}
			}
			ingredient_herb5 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_herb5
				}
			}
			ingredient_herb6 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_herb6
				}
			}
			ingredient_herb7 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_herb7
				}
			}
			ingredient_herb8 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_herb8
				}
			}
			ingredient_herb9 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_herb9
				}
			}
			ingredient_herb10 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_herb10
				}
			}
			ingredient_herb11 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_herb11
				}
			}
			ingredient_herb12 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_herb12
				}
			}
			ingredient_herb13 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_herb13
				}
			}
			ingredient_herb14 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_herb14
				}
			}
			ingredient_herb15 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_herb15
				}
			}
			ingredient_animal1 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_animal1
				}
			}
			ingredient_animal2 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_animal2
				}
			}
			ingredient_animal3 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_animal3
				}
			}
			ingredient_animal4 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_animal4
				}
			}
			ingredient_animal5 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_animal5
				}
			}
			ingredient_animal6 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_animal6
				}
			}
			ingredient_animal7 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_animal7
				}
			}
			ingredient_animal8 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_animal8
				}
			}
			ingredient_animal9 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_animal9
				}
			}
			ingredient_metal_exotic1 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic1
				}
			}
			ingredient_metal_exotic2 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic2
				}
			}
			ingredient_metal_exotic3 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic3
				}
			}
			ingredient_metal_exotic4 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic4
				}
			}
			ingredient_metal_exotic5 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic5
				}
			}
			ingredient_metal_exotic6 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic6
				}
			}
			ingredient_metal_exotic7 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic7
				}
			}
			ingredient_metal_exotic8 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic8
				}
			}
			ingredient_metal_exotic9 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic9
				}
			}
			ingredient_metal_exotic10 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic10
				}
			}
			ingredient_metal_exotic11 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic11
				}
			}
			ingredient_metal_exotic12 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic12
				}
			}
			ingredient_metal_exotic13 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic13
				}
			}
			ingredient_metal_exotic14 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic14
				}
			}
			ingredient_misc_powder_1 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_misc_powder_1
				}
			}
			ingredient_misc_powder_2 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_misc_powder_2
				}
			}
			ingredient_misc_powder_3 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_misc_powder_3
				}
			}
			ingredient_misc_powder_4 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_misc_powder_4
				}
			}
			ingredient_misc_powder_5 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_misc_powder_5
				}
			}
			ingredient_mineral_1 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_mineral_1
				}
			}
			ingredient_mineral_2 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_mineral_2
				}
			}
			ingredient_mineral_jade_1 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_mineral_jade_1
				}
			}
			ingredient_mineral_jade_2 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_mineral_jade_2
				}
			}
			ingredient_mineral_jade_3 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_mineral_jade_3
				}
			}
			ingredient_mineral_jade_4 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_mineral_jade_4
				}
			}
			ingredient_mineral_jade_5 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_mineral_jade_5
				}
			}
			ingredient_mineral_jade_6 = {
				ROOT = {
					set_character_flag = my_humiliating_potion_uses_ingredient_mineral_jade_6
				}
			}
		}
	}
}

save_ingredient_1_flag_poison_effect = {
	clear_flags_with_prefix = my_poison_uses_
	
	any_artifact = {
		limit = {
			has_artifact_flag = selected_ingredient_1
		}
		
		trigger_switch = {
			on_trigger = artifact_type
			
			ingredient_herb1 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_herb1
				}
			}
			ingredient_herb2 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_herb2
				}
			}
			ingredient_herb3 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_herb3
				}
			}
			ingredient_herb4 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_herb4
				}
			}
			ingredient_herb5 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_herb5
				}
			}
			ingredient_herb6 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_herb6
				}
			}
			ingredient_herb7 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_herb7
				}
			}
			ingredient_herb8 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_herb8
				}
			}
			ingredient_herb9 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_herb9
				}
			}
			ingredient_herb10 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_herb10
				}
			}
			ingredient_herb11 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_herb11
				}
			}
			ingredient_herb12 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_herb12
				}
			}
			ingredient_herb13 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_herb13
				}
			}
			ingredient_herb14 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_herb14
				}
			}
			ingredient_herb15 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_herb15
				}
			}
			ingredient_animal1 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_animal1
				}
			}
			ingredient_animal2 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_animal2
				}
			}
			ingredient_animal3 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_animal3
				}
			}
			ingredient_animal4 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_animal4
				}
			}
			ingredient_animal5 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_animal5
				}
			}
			ingredient_animal6 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_animal6
				}
			}
			ingredient_animal7 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_animal7
				}
			}
			ingredient_animal8 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_animal8
				}
			}
			ingredient_animal9 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_animal9
				}
			}
			ingredient_metal_exotic1 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_metal_exotic1
				}
			}
			ingredient_metal_exotic2 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_metal_exotic2
				}
			}
			ingredient_metal_exotic3 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_metal_exotic3
				}
			}
			ingredient_metal_exotic4 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_metal_exotic4
				}
			}
			ingredient_metal_exotic5 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_metal_exotic5
				}
			}
			ingredient_metal_exotic6 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_metal_exotic6
				}
			}
			ingredient_metal_exotic7 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_metal_exotic7
				}
			}
			ingredient_metal_exotic8 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_metal_exotic8
				}
			}
			ingredient_metal_exotic9 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_metal_exotic9
				}
			}
			ingredient_metal_exotic10 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_metal_exotic10
				}
			}
			ingredient_metal_exotic11 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_metal_exotic11
				}
			}
			ingredient_metal_exotic12 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_metal_exotic12
				}
			}
			ingredient_metal_exotic13 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_metal_exotic13
				}
			}
			ingredient_metal_exotic14 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_metal_exotic14
				}
			}
			ingredient_misc_powder_1 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_misc_powder_1
				}
			}
			ingredient_misc_powder_2 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_misc_powder_2
				}
			}
			ingredient_misc_powder_3 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_misc_powder_3
				}
			}
			ingredient_misc_powder_4 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_misc_powder_4
				}
			}
			ingredient_misc_powder_5 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_misc_powder_5
				}
			}
			ingredient_mineral_1 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_mineral_1
				}
			}
			ingredient_mineral_2 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_mineral_2
				}
			}
			ingredient_mineral_jade_1 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_mineral_jade_1
				}
			}
			ingredient_mineral_jade_2 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_mineral_jade_2
				}
			}
			ingredient_mineral_jade_3 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_mineral_jade_3
				}
			}
			ingredient_mineral_jade_4 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_mineral_jade_4
				}
			}
			ingredient_mineral_jade_5 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_mineral_jade_5
				}
			}
			ingredient_mineral_jade_6 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_mineral_jade_6
				}
			}
		}
	}
}

save_ingredient_2_flag_poison_effect = {
	clear_flags_with_prefix = my_poison_uses_
	
	any_artifact = {
		limit = {
			has_artifact_flag = selected_ingredient_2
		}
		
		trigger_switch = {
			on_trigger = artifact_type
			
			ingredient_herb1 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_herb1
				}
			}
			ingredient_herb2 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_herb2
				}
			}
			ingredient_herb3 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_herb3
				}
			}
			ingredient_herb4 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_herb4
				}
			}
			ingredient_herb5 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_herb5
				}
			}
			ingredient_herb6 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_herb6
				}
			}
			ingredient_herb7 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_herb7
				}
			}
			ingredient_herb8 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_herb8
				}
			}
			ingredient_herb9 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_herb9
				}
			}
			ingredient_herb10 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_herb10
				}
			}
			ingredient_herb11 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_herb11
				}
			}
			ingredient_herb12 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_herb12
				}
			}
			ingredient_herb13 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_herb13
				}
			}
			ingredient_herb14 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_herb14
				}
			}
			ingredient_herb15 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_herb15
				}
			}
			ingredient_animal1 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_animal1
				}
			}
			ingredient_animal2 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_animal2
				}
			}
			ingredient_animal3 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_animal3
				}
			}
			ingredient_animal4 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_animal4
				}
			}
			ingredient_animal5 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_animal5
				}
			}
			ingredient_animal6 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_animal6
				}
			}
			ingredient_animal7 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_animal7
				}
			}
			ingredient_animal8 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_animal8
				}
			}
			ingredient_animal9 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_animal9
				}
			}
			ingredient_metal_exotic1 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_metal_exotic1
				}
			}
			ingredient_metal_exotic2 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_metal_exotic2
				}
			}
			ingredient_metal_exotic3 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_metal_exotic3
				}
			}
			ingredient_metal_exotic4 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_metal_exotic4
				}
			}
			ingredient_metal_exotic5 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_metal_exotic5
				}
			}
			ingredient_metal_exotic6 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_metal_exotic6
				}
			}
			ingredient_metal_exotic7 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_metal_exotic7
				}
			}
			ingredient_metal_exotic8 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_metal_exotic8
				}
			}
			ingredient_metal_exotic9 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_metal_exotic9
				}
			}
			ingredient_metal_exotic10 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_metal_exotic10
				}
			}
			ingredient_metal_exotic11 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_metal_exotic11
				}
			}
			ingredient_metal_exotic12 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_metal_exotic12
				}
			}
			ingredient_metal_exotic13 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_metal_exotic13
				}
			}
			ingredient_metal_exotic14 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_metal_exotic14
				}
			}
			ingredient_misc_powder_1 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_misc_powder_1
				}
			}
			ingredient_misc_powder_2 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_misc_powder_2
				}
			}
			ingredient_misc_powder_3 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_misc_powder_3
				}
			}
			ingredient_misc_powder_4 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_misc_powder_4
				}
			}
			ingredient_misc_powder_5 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_misc_powder_5
				}
			}
			ingredient_mineral_1 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_mineral_1
				}
			}
			ingredient_mineral_2 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_mineral_2
				}
			}
			ingredient_mineral_jade_1 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_mineral_jade_1
				}
			}
			ingredient_mineral_jade_2 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_mineral_jade_2
				}
			}
			ingredient_mineral_jade_3 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_mineral_jade_3
				}
			}
			ingredient_mineral_jade_4 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_mineral_jade_4
				}
			}
			ingredient_mineral_jade_5 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_mineral_jade_5
				}
			}
			ingredient_mineral_jade_6 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_mineral_jade_6
				}
			}
		}
	}
}

save_ingredient_1_and_2_flag_poison_effect = {
	clear_flags_with_prefix = my_poison_uses_
	
	any_artifact = {
		limit = {
			OR = {
				has_artifact_flag = selected_ingredient_1
				has_artifact_flag = selected_ingredient_2
			}
		}
		
		trigger_switch = {
			on_trigger = artifact_type
			
			ingredient_herb1 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_herb1
				}
			}
			ingredient_herb2 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_herb2
				}
			}
			ingredient_herb3 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_herb3
				}
			}
			ingredient_herb4 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_herb4
				}
			}
			ingredient_herb5 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_herb5
				}
			}
			ingredient_herb6 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_herb6
				}
			}
			ingredient_herb7 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_herb7
				}
			}
			ingredient_herb8 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_herb8
				}
			}
			ingredient_herb9 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_herb9
				}
			}
			ingredient_herb10 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_herb10
				}
			}
			ingredient_herb11 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_herb11
				}
			}
			ingredient_herb12 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_herb12
				}
			}
			ingredient_herb13 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_herb13
				}
			}
			ingredient_herb14 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_herb14
				}
			}
			ingredient_herb15 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_herb15
				}
			}
			ingredient_animal1 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_animal1
				}
			}
			ingredient_animal2 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_animal2
				}
			}
			ingredient_animal3 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_animal3
				}
			}
			ingredient_animal4 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_animal4
				}
			}
			ingredient_animal5 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_animal5
				}
			}
			ingredient_animal6 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_animal6
				}
			}
			ingredient_animal7 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_animal7
				}
			}
			ingredient_animal8 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_animal8
				}
			}
			ingredient_animal9 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_animal9
				}
			}
			ingredient_metal_exotic1 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_metal_exotic1
				}
			}
			ingredient_metal_exotic2 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_metal_exotic2
				}
			}
			ingredient_metal_exotic3 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_metal_exotic3
				}
			}
			ingredient_metal_exotic4 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_metal_exotic4
				}
			}
			ingredient_metal_exotic5 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_metal_exotic5
				}
			}
			ingredient_metal_exotic6 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_metal_exotic6
				}
			}
			ingredient_metal_exotic7 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_metal_exotic7
				}
			}
			ingredient_metal_exotic8 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_metal_exotic8
				}
			}
			ingredient_metal_exotic9 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_metal_exotic9
				}
			}
			ingredient_metal_exotic10 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_metal_exotic10
				}
			}
			ingredient_metal_exotic11 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_metal_exotic11
				}
			}
			ingredient_metal_exotic12 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_metal_exotic12
				}
			}
			ingredient_metal_exotic13 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_metal_exotic13
				}
			}
			ingredient_metal_exotic14 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_metal_exotic14
				}
			}
			ingredient_misc_powder_1 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_misc_powder_1
				}
			}
			ingredient_misc_powder_2 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_misc_powder_2
				}
			}
			ingredient_misc_powder_3 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_misc_powder_3
				}
			}
			ingredient_misc_powder_4 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_misc_powder_4
				}
			}
			ingredient_misc_powder_5 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_misc_powder_5
				}
			}
			ingredient_mineral_1 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_mineral_1
				}
			}
			ingredient_mineral_2 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_mineral_2
				}
			}
			ingredient_mineral_jade_1 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_mineral_jade_1
				}
			}
			ingredient_mineral_jade_2 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_mineral_jade_2
				}
			}
			ingredient_mineral_jade_3 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_mineral_jade_3
				}
			}
			ingredient_mineral_jade_4 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_mineral_jade_4
				}
			}
			ingredient_mineral_jade_5 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_mineral_jade_5
				}
			}
			ingredient_mineral_jade_6 = {
				ROOT = {
					set_character_flag = my_poison_uses_ingredient_mineral_jade_6
				}
			}
		}
	}
}

copy_prisoner_experiment_flags_effect = {
	clear_flags_with_prefix = consumed_prisoner_experiment_potion_
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_herb1
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_herb1
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_herb2
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_herb2
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_herb3
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_herb3
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_herb4
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_herb4
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_herb5
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_herb5
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_herb6
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_herb6
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_herb7
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_herb7
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_herb8
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_herb8
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_herb9
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_herb9
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_herb10
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_herb10
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_herb11
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_herb11
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_herb12
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_herb12
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_herb13
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_herb13
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_herb14
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_herb14
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_herb15
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_herb15
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_animal1
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_animal1
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_animal2
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_animal2
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_animal3
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_animal3
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_animal4
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_animal4
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_animal5
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_animal5
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_animal6
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_animal6
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_animal7
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_animal7
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_animal8
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_animal8
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_animal9
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_animal9
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic1
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_metal_exotic1
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic2
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_metal_exotic2
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic3
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_metal_exotic3
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic4
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_metal_exotic4
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic5
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_metal_exotic5
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic6
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_metal_exotic6
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic7
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_metal_exotic7
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic8
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_metal_exotic8
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic9
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_metal_exotic9
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic10
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_metal_exotic10
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic11
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_metal_exotic11
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic12
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_metal_exotic12
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic13
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_metal_exotic13
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_metal_exotic14
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_metal_exotic14
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_misc_powder_1
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_misc_powder_1
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_misc_powder_2
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_misc_powder_2
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_misc_powder_3
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_misc_powder_3
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_misc_powder_4
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_misc_powder_4
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_misc_powder_5
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_misc_powder_5
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_mineral_1
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_mineral_1
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_mineral_2
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_mineral_2
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_mineral_jade_1
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_mineral_jade_1
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_mineral_jade_2
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_mineral_jade_2
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_mineral_jade_3
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_mineral_jade_3
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_mineral_jade_4
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_mineral_jade_4
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_mineral_jade_5
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_mineral_jade_5
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = prisoner_experiment_ingredient_ingredient_mineral_jade_6
			}
		}
		
		set_character_flag = consumed_prisoner_experiment_potion_is_using_ingredient_mineral_jade_6
	}
}

copy_healing_potion_flags_effect = {
	clear_flags_with_prefix = consumed_healing_potion_is_
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_herb1
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_herb1
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_herb2
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_herb2
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_herb3
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_herb3
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_herb4
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_herb4
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_herb5
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_herb5
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_herb6
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_herb6
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_herb7
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_herb7
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_herb8
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_herb8
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_herb9
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_herb9
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_herb10
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_herb10
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_herb11
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_herb11
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_herb12
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_herb12
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_herb13
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_herb13
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_herb14
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_herb14
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_herb15
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_herb15
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_animal1
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_animal1
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_animal2
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_animal2
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_animal3
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_animal3
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_animal4
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_animal4
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_animal5
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_animal5
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_animal6
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_animal6
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_animal7
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_animal7
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_animal8
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_animal8
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_animal9
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_animal9
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_metal_exotic1
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_metal_exotic1
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_metal_exotic2
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_metal_exotic2
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_metal_exotic3
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_metal_exotic3
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_metal_exotic4
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_metal_exotic4
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_metal_exotic5
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_metal_exotic5
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_metal_exotic6
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_metal_exotic6
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_metal_exotic7
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_metal_exotic7
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_metal_exotic8
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_metal_exotic8
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_metal_exotic9
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_metal_exotic9
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_metal_exotic10
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_metal_exotic10
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_metal_exotic11
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_metal_exotic11
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_metal_exotic12
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_metal_exotic12
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_metal_exotic13
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_metal_exotic13
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_metal_exotic14
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_metal_exotic14
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_misc_powder_1
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_misc_powder_1
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_misc_powder_2
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_misc_powder_2
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_misc_powder_3
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_misc_powder_3
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_misc_powder_4
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_misc_powder_4
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_misc_powder_5
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_misc_powder_5
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_mineral_1
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_mineral_1
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_mineral_2
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_mineral_2
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_mineral_jade_1
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_mineral_jade_1
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_mineral_jade_2
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_mineral_jade_2
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_mineral_jade_3
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_mineral_jade_3
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_mineral_jade_4
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_mineral_jade_4
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_mineral_jade_5
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_mineral_jade_5
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_healing_potion_uses_ingredient_mineral_jade_6
			}
		}
		
		set_character_flag = consumed_healing_potion_is_using_ingredient_mineral_jade_6
	}
}

copy_clarity_potion_flags_effect = {
	clear_flags_with_prefix = consumed_clarity_potion_is_
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_herb1
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_herb1
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_herb2
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_herb2
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_herb3
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_herb3
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_herb4
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_herb4
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_herb5
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_herb5
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_herb6
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_herb6
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_herb7
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_herb7
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_herb8
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_herb8
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_herb9
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_herb9
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_herb10
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_herb10
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_herb11
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_herb11
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_herb12
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_herb12
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_herb13
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_herb13
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_herb14
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_herb14
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_herb15
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_herb15
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_animal1
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_animal1
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_animal2
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_animal2
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_animal3
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_animal3
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_animal4
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_animal4
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_animal5
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_animal5
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_animal6
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_animal6
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_animal7
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_animal7
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_animal8
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_animal8
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_animal9
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_animal9
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_metal_exotic1
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_metal_exotic1
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_metal_exotic2
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_metal_exotic2
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_metal_exotic3
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_metal_exotic3
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_metal_exotic4
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_metal_exotic4
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_metal_exotic5
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_metal_exotic5
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_metal_exotic6
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_metal_exotic6
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_metal_exotic7
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_metal_exotic7
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_metal_exotic8
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_metal_exotic8
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_metal_exotic9
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_metal_exotic9
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_metal_exotic10
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_metal_exotic10
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_metal_exotic11
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_metal_exotic11
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_metal_exotic12
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_metal_exotic12
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_metal_exotic13
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_metal_exotic13
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_metal_exotic14
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_metal_exotic14
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_misc_powder_1
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_misc_powder_1
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_misc_powder_2
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_misc_powder_2
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_misc_powder_3
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_misc_powder_3
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_misc_powder_4
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_misc_powder_4
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_misc_powder_5
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_misc_powder_5
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_mineral_1
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_mineral_1
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_mineral_2
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_mineral_2
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_mineral_jade_1
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_mineral_jade_1
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_mineral_jade_2
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_mineral_jade_2
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_mineral_jade_3
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_mineral_jade_3
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_mineral_jade_4
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_mineral_jade_4
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_mineral_jade_5
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_mineral_jade_5
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_clarity_potion_uses_ingredient_mineral_jade_6
			}
		}
		
		set_character_flag = consumed_clarity_potion_is_using_ingredient_mineral_jade_6
	}
}

copy_fertility_potion_flags_effect = {
	clear_flags_with_prefix = consumed_fertility_potion_is_
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_herb1
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_herb1
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_herb2
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_herb2
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_herb3
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_herb3
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_herb4
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_herb4
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_herb5
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_herb5
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_herb6
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_herb6
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_herb7
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_herb7
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_herb8
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_herb8
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_herb9
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_herb9
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_herb10
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_herb10
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_herb11
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_herb11
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_herb12
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_herb12
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_herb13
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_herb13
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_herb14
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_herb14
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_herb15
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_herb15
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_animal1
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_animal1
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_animal2
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_animal2
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_animal3
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_animal3
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_animal4
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_animal4
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_animal5
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_animal5
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_animal6
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_animal6
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_animal7
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_animal7
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_animal8
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_animal8
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_animal9
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_animal9
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_metal_exotic1
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_metal_exotic1
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_metal_exotic2
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_metal_exotic2
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_metal_exotic3
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_metal_exotic3
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_metal_exotic4
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_metal_exotic4
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_metal_exotic5
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_metal_exotic5
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_metal_exotic6
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_metal_exotic6
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_metal_exotic7
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_metal_exotic7
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_metal_exotic8
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_metal_exotic8
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_metal_exotic9
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_metal_exotic9
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_metal_exotic10
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_metal_exotic10
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_metal_exotic11
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_metal_exotic11
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_metal_exotic12
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_metal_exotic12
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_metal_exotic13
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_metal_exotic13
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_metal_exotic14
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_metal_exotic14
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_misc_powder_1
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_misc_powder_1
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_misc_powder_2
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_misc_powder_2
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_misc_powder_3
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_misc_powder_3
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_misc_powder_4
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_misc_powder_4
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_misc_powder_5
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_misc_powder_5
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_mineral_1
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_mineral_1
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_mineral_2
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_mineral_2
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_mineral_jade_1
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_mineral_jade_1
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_mineral_jade_2
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_mineral_jade_2
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_mineral_jade_3
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_mineral_jade_3
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_mineral_jade_4
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_mineral_jade_4
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_mineral_jade_5
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_mineral_jade_5
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_fertility_potion_uses_ingredient_mineral_jade_6
			}
		}
		
		set_character_flag = consumed_fertility_potion_is_using_ingredient_mineral_jade_6
	}
}

copy_aphrodisiac_flags_effect = {
	clear_flags_with_prefix = consumed_aphrodisiac_is_
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_herb1
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_herb1
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_herb2
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_herb2
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_herb3
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_herb3
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_herb4
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_herb4
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_herb5
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_herb5
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_herb6
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_herb6
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_herb7
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_herb7
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_herb8
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_herb8
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_herb9
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_herb9
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_herb10
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_herb10
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_herb11
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_herb11
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_herb12
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_herb12
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_herb13
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_herb13
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_herb14
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_herb14
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_herb15
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_herb15
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_animal1
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_animal1
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_animal2
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_animal2
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_animal3
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_animal3
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_animal4
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_animal4
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_animal5
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_animal5
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_animal6
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_animal6
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_animal7
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_animal7
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_animal8
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_animal8
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_animal9
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_animal9
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic1
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_metal_exotic1
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic2
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_metal_exotic2
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic3
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_metal_exotic3
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic4
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_metal_exotic4
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic5
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_metal_exotic5
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic6
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_metal_exotic6
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic7
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_metal_exotic7
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic8
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_metal_exotic8
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic9
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_metal_exotic9
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic10
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_metal_exotic10
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic11
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_metal_exotic11
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic12
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_metal_exotic12
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic13
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_metal_exotic13
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_metal_exotic14
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_metal_exotic14
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_misc_powder_1
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_misc_powder_1
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_misc_powder_2
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_misc_powder_2
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_misc_powder_3
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_misc_powder_3
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_misc_powder_4
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_misc_powder_4
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_misc_powder_5
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_misc_powder_5
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_mineral_1
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_mineral_1
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_mineral_2
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_mineral_2
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_mineral_jade_1
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_mineral_jade_1
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_mineral_jade_2
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_mineral_jade_2
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_mineral_jade_3
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_mineral_jade_3
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_mineral_jade_4
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_mineral_jade_4
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_mineral_jade_5
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_mineral_jade_5
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_aphrodisiac_uses_ingredient_mineral_jade_6
			}
		}
		
		set_character_flag = consumed_aphrodisiac_is_using_ingredient_mineral_jade_6
	}
}

copy_humiliating_potion_flags_effect = {
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_herb1
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_herb1
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_herb2
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_herb2
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_herb3
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_herb3
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_herb4
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_herb4
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_herb5
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_herb5
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_herb6
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_herb6
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_herb7
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_herb7
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_herb8
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_herb8
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_herb9
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_herb9
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_herb10
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_herb10
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_herb11
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_herb11
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_herb12
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_herb12
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_herb13
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_herb13
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_herb14
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_herb14
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_herb15
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_herb15
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_animal1
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_animal1
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_animal2
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_animal2
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_animal3
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_animal3
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_animal4
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_animal4
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_animal5
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_animal5
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_animal6
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_animal6
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_animal7
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_animal7
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_animal8
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_animal8
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_animal9
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_animal9
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic1
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_metal_exotic1
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic2
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_metal_exotic2
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic3
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_metal_exotic3
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic4
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_metal_exotic4
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic5
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_metal_exotic5
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic6
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_metal_exotic6
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic7
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_metal_exotic7
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic8
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_metal_exotic8
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic9
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_metal_exotic9
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic10
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_metal_exotic10
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic11
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_metal_exotic11
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic12
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_metal_exotic12
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic13
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_metal_exotic13
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_metal_exotic14
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_metal_exotic14
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_misc_powder_1
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_misc_powder_1
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_misc_powder_2
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_misc_powder_2
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_misc_powder_3
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_misc_powder_3
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_misc_powder_4
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_misc_powder_4
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_misc_powder_5
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_misc_powder_5
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_mineral_1
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_mineral_1
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_mineral_2
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_mineral_2
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_mineral_jade_1
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_mineral_jade_1
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_mineral_jade_2
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_mineral_jade_2
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_mineral_jade_3
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_mineral_jade_3
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_mineral_jade_4
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_mineral_jade_4
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_mineral_jade_5
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_mineral_jade_5
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_humiliating_potion_uses_ingredient_mineral_jade_6
			}
		}
		
		set_character_flag = humiliating_potion_is_using_ingredient_mineral_jade_6
	}
}

copy_humiliating_potion_flags_target_effect = {
	clear_flags_with_prefix = consumed_humiliating_potion_
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_herb1
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_herb1
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_herb2
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_herb2
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_herb3
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_herb3
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_herb4
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_herb4
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_herb5
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_herb5
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_herb6
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_herb6
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_herb7
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_herb7
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_herb8
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_herb8
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_herb9
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_herb9
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_herb10
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_herb10
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_herb11
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_herb11
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_herb12
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_herb12
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_herb13
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_herb13
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_herb14
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_herb14
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_herb15
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_herb15
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_animal1
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_animal1
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_animal2
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_animal2
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_animal3
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_animal3
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_animal4
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_animal4
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_animal5
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_animal5
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_animal6
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_animal6
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_animal7
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_animal7
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_animal8
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_animal8
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_animal9
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_animal9
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_metal_exotic1
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_metal_exotic1
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_metal_exotic2
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_metal_exotic2
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_metal_exotic3
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_metal_exotic3
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_metal_exotic4
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_metal_exotic4
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_metal_exotic5
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_metal_exotic5
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_metal_exotic6
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_metal_exotic6
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_metal_exotic7
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_metal_exotic7
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_metal_exotic8
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_metal_exotic8
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_metal_exotic9
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_metal_exotic9
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_metal_exotic10
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_metal_exotic10
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_metal_exotic11
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_metal_exotic11
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_metal_exotic12
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_metal_exotic12
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_metal_exotic13
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_metal_exotic13
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_metal_exotic14
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_metal_exotic14
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_misc_powder_1
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_misc_powder_1
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_misc_powder_2
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_misc_powder_2
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_misc_powder_3
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_misc_powder_3
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_misc_powder_4
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_misc_powder_4
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_misc_powder_5
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_misc_powder_5
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_mineral_1
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_mineral_1
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_mineral_2
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_mineral_2
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_mineral_jade_1
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_mineral_jade_1
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_mineral_jade_2
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_mineral_jade_2
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_mineral_jade_3
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_mineral_jade_3
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_mineral_jade_4
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_mineral_jade_4
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_mineral_jade_5
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_mineral_jade_5
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = humiliating_potion_uses_ingredient_mineral_jade_6
			}
		}
		
		set_character_flag = consumed_humiliating_potion_is_using_ingredient_mineral_jade_6
	}
	
	event_target:making_request = {
		trigger_switch = {
			on_trigger = has_character_flag
			
			humiliating_potion_is_humiliating = { PREV = { set_character_flag = consumed_humiliating_potion_is_helpful } }
			humiliating_potion_is_placebo = { PREV = { set_character_flag = consumed_humiliating_potion_is_placebo } }
			humiliating_potion_is_harmful = { PREV = { set_character_flag = consumed_humiliating_potion_is_harmful } }
			humiliating_potion_is_sneaky_harmful = { PREV = { set_character_flag = consumed_humiliating_potion_is_sneaky_harmful } }
		}
	}
}

copy_poison_flags_effect = {
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_herb1
			}
		}
		
		set_character_flag = poison_is_using_ingredient_herb1
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_herb2
			}
		}
		
		set_character_flag = poison_is_using_ingredient_herb2
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_herb3
			}
		}
		
		set_character_flag = poison_is_using_ingredient_herb3
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_herb4
			}
		}
		
		set_character_flag = poison_is_using_ingredient_herb4
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_herb5
			}
		}
		
		set_character_flag = poison_is_using_ingredient_herb5
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_herb6
			}
		}
		
		set_character_flag = poison_is_using_ingredient_herb6
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_herb7
			}
		}
		
		set_character_flag = poison_is_using_ingredient_herb7
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_herb8
			}
		}
		
		set_character_flag = poison_is_using_ingredient_herb8
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_herb9
			}
		}
		
		set_character_flag = poison_is_using_ingredient_herb9
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_herb10
			}
		}
		
		set_character_flag = poison_is_using_ingredient_herb10
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_herb11
			}
		}
		
		set_character_flag = poison_is_using_ingredient_herb11
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_herb12
			}
		}
		
		set_character_flag = poison_is_using_ingredient_herb12
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_herb13
			}
		}
		
		set_character_flag = poison_is_using_ingredient_herb13
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_herb14
			}
		}
		
		set_character_flag = poison_is_using_ingredient_herb14
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_herb15
			}
		}
		
		set_character_flag = poison_is_using_ingredient_herb15
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_animal1
			}
		}
		
		set_character_flag = poison_is_using_ingredient_animal1
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_animal2
			}
		}
		
		set_character_flag = poison_is_using_ingredient_animal2
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_animal3
			}
		}
		
		set_character_flag = poison_is_using_ingredient_animal3
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_animal4
			}
		}
		
		set_character_flag = poison_is_using_ingredient_animal4
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_animal5
			}
		}
		
		set_character_flag = poison_is_using_ingredient_animal5
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_animal6
			}
		}
		
		set_character_flag = poison_is_using_ingredient_animal6
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_animal7
			}
		}
		
		set_character_flag = poison_is_using_ingredient_animal7
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_animal8
			}
		}
		
		set_character_flag = poison_is_using_ingredient_animal8
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_animal9
			}
		}
		
		set_character_flag = poison_is_using_ingredient_animal9
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_metal_exotic1
			}
		}
		
		set_character_flag = poison_is_using_ingredient_metal_exotic1
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_metal_exotic2
			}
		}
		
		set_character_flag = poison_is_using_ingredient_metal_exotic2
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_metal_exotic3
			}
		}
		
		set_character_flag = poison_is_using_ingredient_metal_exotic3
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_metal_exotic4
			}
		}
		
		set_character_flag = poison_is_using_ingredient_metal_exotic4
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_metal_exotic5
			}
		}
		
		set_character_flag = poison_is_using_ingredient_metal_exotic5
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_metal_exotic6
			}
		}
		
		set_character_flag = poison_is_using_ingredient_metal_exotic6
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_metal_exotic7
			}
		}
		
		set_character_flag = poison_is_using_ingredient_metal_exotic7
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_metal_exotic8
			}
		}
		
		set_character_flag = poison_is_using_ingredient_metal_exotic8
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_metal_exotic9
			}
		}
		
		set_character_flag = poison_is_using_ingredient_metal_exotic9
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_metal_exotic10
			}
		}
		
		set_character_flag = poison_is_using_ingredient_metal_exotic10
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_metal_exotic11
			}
		}
		
		set_character_flag = poison_is_using_ingredient_metal_exotic11
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_metal_exotic12
			}
		}
		
		set_character_flag = poison_is_using_ingredient_metal_exotic12
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_metal_exotic13
			}
		}
		
		set_character_flag = poison_is_using_ingredient_metal_exotic13
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_metal_exotic14
			}
		}
		
		set_character_flag = poison_is_using_ingredient_metal_exotic14
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_misc_powder_1
			}
		}
		
		set_character_flag = poison_is_using_ingredient_misc_powder_1
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_misc_powder_2
			}
		}
		
		set_character_flag = poison_is_using_ingredient_misc_powder_2
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_misc_powder_3
			}
		}
		
		set_character_flag = poison_is_using_ingredient_misc_powder_3
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_misc_powder_4
			}
		}
		
		set_character_flag = poison_is_using_ingredient_misc_powder_4
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_misc_powder_5
			}
		}
		
		set_character_flag = poison_is_using_ingredient_misc_powder_5
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_mineral_1
			}
		}
		
		set_character_flag = poison_is_using_ingredient_mineral_1
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_mineral_2
			}
		}
		
		set_character_flag = poison_is_using_ingredient_mineral_2
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_mineral_jade_1
			}
		}
		
		set_character_flag = poison_is_using_ingredient_mineral_jade_1
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_mineral_jade_2
			}
		}
		
		set_character_flag = poison_is_using_ingredient_mineral_jade_2
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_mineral_jade_3
			}
		}
		
		set_character_flag = poison_is_using_ingredient_mineral_jade_3
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_mineral_jade_4
			}
		}
		
		set_character_flag = poison_is_using_ingredient_mineral_jade_4
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_mineral_jade_5
			}
		}
		
		set_character_flag = poison_is_using_ingredient_mineral_jade_5
	}
	
	if = {
		limit = {
			FROM = {
				has_character_flag = my_poison_uses_ingredient_mineral_jade_6
			}
		}
		
		set_character_flag = poison_is_using_ingredient_mineral_jade_6
	}
}

copy_poison_flags_target_effect = {
	clear_flags_with_prefix = consumed_poison_
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_herb1
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_herb1
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_herb2
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_herb2
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_herb3
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_herb3
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_herb4
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_herb4
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_herb5
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_herb5
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_herb6
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_herb6
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_herb7
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_herb7
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_herb8
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_herb8
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_herb9
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_herb9
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_herb10
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_herb10
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_herb11
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_herb11
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_herb12
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_herb12
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_herb13
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_herb13
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_herb14
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_herb14
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_herb15
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_herb15
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_animal1
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_animal1
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_animal2
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_animal2
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_animal3
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_animal3
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_animal4
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_animal4
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_animal5
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_animal5
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_animal6
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_animal6
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_animal7
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_animal7
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_animal8
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_animal8
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_animal9
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_animal9
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_metal_exotic1
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_metal_exotic1
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_metal_exotic2
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_metal_exotic2
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_metal_exotic3
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_metal_exotic3
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_metal_exotic4
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_metal_exotic4
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_metal_exotic5
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_metal_exotic5
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_metal_exotic6
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_metal_exotic6
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_metal_exotic7
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_metal_exotic7
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_metal_exotic8
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_metal_exotic8
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_metal_exotic9
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_metal_exotic9
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_metal_exotic10
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_metal_exotic10
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_metal_exotic11
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_metal_exotic11
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_metal_exotic12
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_metal_exotic12
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_metal_exotic13
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_metal_exotic13
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_metal_exotic14
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_metal_exotic14
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_misc_powder_1
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_misc_powder_1
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_misc_powder_2
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_misc_powder_2
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_misc_powder_3
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_misc_powder_3
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_misc_powder_4
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_misc_powder_4
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_misc_powder_5
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_misc_powder_5
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_mineral_1
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_mineral_1
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_mineral_2
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_mineral_2
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_mineral_jade_1
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_mineral_jade_1
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_mineral_jade_2
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_mineral_jade_2
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_mineral_jade_3
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_mineral_jade_3
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_mineral_jade_4
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_mineral_jade_4
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_mineral_jade_5
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_mineral_jade_5
	}
	
	if = {
		limit = {
			event_target:making_request = {
				has_character_flag = poison_uses_ingredient_mineral_jade_6
			}
		}
		
		set_character_flag = consumed_poison_is_using_ingredient_mineral_jade_6
	}
	
	event_target:making_request = {
		trigger_switch = {
			on_trigger = has_character_flag
			
			poison_is_harmful = { PREV = { set_character_flag = consumed_poison_is_harmful } }
			poison_is_sneaky_harmful = { PREV = { set_character_flag = consumed_poison_is_sneaky_harmful } }
		}
	}
}

add_ingredient_to_immortality_potion_actual_effect = {
	hidden_effect = {
		change_variable = {
			which = immortality_potion_ingredients
			value = 1
		}
		
		clear_flags_with_prefix = immortality_potion_needs_
		
		set_variable = { # Reset potion quality
			which = local_current_potion_quality
			value = 0
		}

		if = {
			limit = {
				event_target:target_immortality_potion_ingredient = {
					ingredient_is_perceived_healthy_trigger = yes
					ingredient_is_unhealthy_trigger = no
				}
			}
				
			if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 100
					}
				}
				
				change_variable = {
					which = local_current_potion_quality
					value = 5
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 75
					}
				}
				
				change_variable = {
					which = local_current_potion_quality
					value = 4
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 50
					}
				}
				
				change_variable = {
					which = local_current_potion_quality
					value = 3
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 25
					}
				}
				
				change_variable = {
					which = local_current_potion_quality
					value = 2
				}
			}
			
			else = {
				change_variable = {
					which = local_current_potion_quality
					value = 1
				}
			}
		}

		else_if = {
			limit = {
				event_target:target_immortality_potion_ingredient = {
					ingredient_is_unhealthy_trigger = yes
				}
			}
			
			if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 100
					}
				}
				
				change_variable = {
					which = local_current_potion_quality
					value = -1
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 75
					}
				}
				
				change_variable = {
					which = local_current_potion_quality
					value = -2
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 50
					}
				}
				
				change_variable = {
					which = local_current_potion_quality
					value = -3
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 25
					}
				}
				
				change_variable = {
					which = local_current_potion_quality
					value = -4
				}
			}
			
			else = {
				change_variable = {
					which = local_current_potion_quality
					value = -5
				}
			}
		}
		
		else = {
			change_variable = {
				which = local_current_potion_quality
				value = 1
			}
		}
		
		change_variable = {
			which = immortality_potion_quality
			which = local_current_potion_quality
		}
		
		event_target:target_immortality_potion_ingredient = {
			trigger_switch = {
				on_trigger = artifact_type
				
				ingredient_herb1 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_herb1
					}
				}
				ingredient_herb2 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_herb2
					}
				}
				ingredient_herb3 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_herb3
					}
				}
				ingredient_herb4 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_herb4
					}
				}
				ingredient_herb5 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_herb5
					}
				}
				ingredient_herb6 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_herb6
					}
				}
				ingredient_herb7 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_herb7
					}
				}
				ingredient_herb8 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_herb8
					}
				}
				ingredient_herb9 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_herb9
					}
				}
				ingredient_herb10 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_herb10
					}
				}
				ingredient_herb11 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_herb11
					}
				}
				ingredient_herb12 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_herb12
					}
				}
				ingredient_herb13 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_herb13
					}
				}
				ingredient_herb14 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_herb14
					}
				}
				ingredient_herb15 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_herb15
					}
				}
				ingredient_animal1 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_animal1
					}
				}
				ingredient_animal2 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_animal2
					}
				}
				ingredient_animal3 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_animal3
					}
				}
				ingredient_animal4 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_animal4
					}
				}
				ingredient_animal5 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_animal5
					}
				}
				ingredient_animal6 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_animal6
					}
				}
				ingredient_animal7 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_animal7
					}
				}
				ingredient_animal8 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_animal8
					}
				}
				ingredient_animal9 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_animal9
					}
				}
				ingredient_metal_exotic1 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_metal_exotic1
					}
				}
				ingredient_metal_exotic2 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_metal_exotic2
					}
				}
				ingredient_metal_exotic3 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_metal_exotic3
					}
				}
				ingredient_metal_exotic4 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_metal_exotic4
					}
				}
				ingredient_metal_exotic5 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_metal_exotic5
					}
				}
				ingredient_metal_exotic6 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_metal_exotic6
					}
				}
				ingredient_metal_exotic7 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_metal_exotic7
					}
				}
				ingredient_metal_exotic8 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_metal_exotic8
					}
				}
				ingredient_metal_exotic9 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_metal_exotic9
					}
				}
				ingredient_metal_exotic10 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_metal_exotic10
					}
				}
				ingredient_metal_exotic11 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_metal_exotic11
					}
				}
				ingredient_metal_exotic12 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_metal_exotic12
					}
				}
				ingredient_metal_exotic13 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_metal_exotic13
					}
				}
				ingredient_metal_exotic14 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_metal_exotic14
					}
				}
				ingredient_misc_powder_1 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_misc_powder_1
					}
				}
				ingredient_misc_powder_2 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_misc_powder_2
					}
				}
				ingredient_misc_powder_3 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_misc_powder_3
					}
				}
				ingredient_misc_powder_4 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_misc_powder_4
					}
				}
				ingredient_misc_powder_5 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_misc_powder_5
					}
				}
				ingredient_mineral_1 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_mineral_1
					}
				}
				ingredient_mineral_2 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_mineral_2
					}
				}
				ingredient_mineral_jade_1 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_mineral_jade_1
					}
				}
				ingredient_mineral_jade_2 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_mineral_jade_2
					}
				}
				ingredient_mineral_jade_3 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_mineral_jade_3
					}
				}
				ingredient_mineral_jade_4 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_mineral_jade_4
					}
				}
				ingredient_mineral_jade_5 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_mineral_jade_5
					}
				}
				ingredient_mineral_jade_6 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_mineral_jade_6
					}
				}
			}
		}
	}
}

add_ingredient_to_immortality_potion_placebo_effect = {
	hidden_effect = {
		change_variable = {
			which = immortality_potion_ingredients
			value = 1
		}
		
		clear_flags_with_prefix = immortality_potion_needs_
		
		set_variable = { # Reset potion quality
			which = local_current_potion_quality
			value = 0
		}

		if = {
			limit = {
				event_target:target_immortality_potion_ingredient = {
					ingredient_is_perceived_healthy_trigger = yes
					ingredient_is_unhealthy_trigger = no
				}
			}
				
			if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 100
					}
				}
				
				change_variable = {
					which = local_current_potion_quality
					value = 2.5
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 75
					}
				}
				
				change_variable = {
					which = local_current_potion_quality
					value = 2
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 50
					}
				}
				
				change_variable = {
					which = local_current_potion_quality
					value = 1.5
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 25
					}
				}
				
				change_variable = {
					which = local_current_potion_quality
					value = 1
				}
			}
			
			else = {
				change_variable = {
					which = local_current_potion_quality
					value = 0.5
				}
			}
		}

		else_if = {
			limit = {
				event_target:target_immortality_potion_ingredient = {
					ingredient_is_unhealthy_trigger = yes
				}
			}
			
			if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 100
					}
				}
				
				change_variable = {
					which = local_current_potion_quality
					value = -0.5
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 75
					}
				}
				
				change_variable = {
					which = local_current_potion_quality
					value = -1
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 50
					}
				}
				
				change_variable = {
					which = local_current_potion_quality
					value = -1.5
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 25
					}
				}
				
				change_variable = {
					which = local_current_potion_quality
					value = -2
				}
			}
			
			else = {
				change_variable = {
					which = local_current_potion_quality
					value = -2.5
				}
			}
		}
		
		else = {
			change_variable = {
				which = local_current_potion_quality
				value = 0.5
			}
		}
		
		change_variable = {
			which = immortality_potion_quality
			which = local_current_potion_quality
		}
		
		event_target:target_immortality_potion_ingredient = {
			trigger_switch = {
				on_trigger = artifact_type
				
				ingredient_herb1 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_herb1
					}
				}
				ingredient_herb2 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_herb2
					}
				}
				ingredient_herb3 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_herb3
					}
				}
				ingredient_herb4 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_herb4
					}
				}
				ingredient_herb5 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_herb5
					}
				}
				ingredient_herb6 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_herb6
					}
				}
				ingredient_herb7 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_herb7
					}
				}
				ingredient_herb8 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_herb8
					}
				}
				ingredient_herb9 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_herb9
					}
				}
				ingredient_herb10 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_herb10
					}
				}
				ingredient_herb11 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_herb11
					}
				}
				ingredient_herb12 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_herb12
					}
				}
				ingredient_herb13 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_herb13
					}
				}
				ingredient_herb14 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_herb14
					}
				}
				ingredient_herb15 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_herb15
					}
				}
				ingredient_animal1 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_animal1
					}
				}
				ingredient_animal2 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_animal2
					}
				}
				ingredient_animal3 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_animal3
					}
				}
				ingredient_animal4 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_animal4
					}
				}
				ingredient_animal5 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_animal5
					}
				}
				ingredient_animal6 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_animal6
					}
				}
				ingredient_animal7 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_animal7
					}
				}
				ingredient_animal8 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_animal8
					}
				}
				ingredient_animal9 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_animal9
					}
				}
				ingredient_metal_exotic1 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_metal_exotic1
					}
				}
				ingredient_metal_exotic2 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_metal_exotic2
					}
				}
				ingredient_metal_exotic3 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_metal_exotic3
					}
				}
				ingredient_metal_exotic4 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_metal_exotic4
					}
				}
				ingredient_metal_exotic5 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_metal_exotic5
					}
				}
				ingredient_metal_exotic6 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_metal_exotic6
					}
				}
				ingredient_metal_exotic7 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_metal_exotic7
					}
				}
				ingredient_metal_exotic8 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_metal_exotic8
					}
				}
				ingredient_metal_exotic9 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_metal_exotic9
					}
				}
				ingredient_metal_exotic10 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_metal_exotic10
					}
				}
				ingredient_metal_exotic11 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_metal_exotic11
					}
				}
				ingredient_metal_exotic12 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_metal_exotic12
					}
				}
				ingredient_metal_exotic13 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_metal_exotic13
					}
				}
				ingredient_metal_exotic14 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_metal_exotic14
					}
				}
				ingredient_misc_powder_1 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_misc_powder_1
					}
				}
				ingredient_misc_powder_2 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_misc_powder_2
					}
				}
				ingredient_misc_powder_3 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_misc_powder_3
					}
				}
				ingredient_misc_powder_4 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_misc_powder_4
					}
				}
				ingredient_misc_powder_5 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_misc_powder_5
					}
				}
				ingredient_mineral_1 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_mineral_1
					}
				}
				ingredient_mineral_2 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_mineral_2
					}
				}
				ingredient_mineral_jade_1 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_mineral_jade_1
					}
				}
				ingredient_mineral_jade_2 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_mineral_jade_2
					}
				}
				ingredient_mineral_jade_3 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_mineral_jade_3
					}
				}
				ingredient_mineral_jade_4 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_mineral_jade_4
					}
				}
				ingredient_mineral_jade_5 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_mineral_jade_5
					}
				}
				ingredient_mineral_jade_6 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_mineral_jade_6
					}
				}
			}
		}
	}
}

add_ingredient_to_immortality_potion_poison_effect = {
	hidden_effect = {
		change_variable = {
			which = immortality_potion_ingredients
			value = 1
		}
		
		clear_flags_with_prefix = immortality_potion_needs_
		
		set_variable = { # Reset potion quality
			which = local_current_potion_quality
			value = 0
		}

		if = {
			limit = {
				event_target:target_immortality_potion_ingredient = {
					ingredient_is_perceived_healthy_trigger = yes
					ingredient_is_unhealthy_trigger = no
				}
			}
				
			if = {
				limit = {
					check_variable = {
						which = alchemist_poison_knowledge
						value >= 100
					}
				}
				
				change_variable = {
					which = local_current_potion_quality
					value = -1
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_poison_knowledge
						value >= 75
					}
				}
				
				change_variable = {
					which = local_current_potion_quality
					value = -2
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_poison_knowledge
						value >= 50
					}
				}
				
				change_variable = {
					which = local_current_potion_quality
					value = -3
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_poison_knowledge
						value >= 25
					}
				}
				
				change_variable = {
					which = local_current_potion_quality
					value = -4
				}
			}
			
			else = {
				change_variable = {
					which = local_current_potion_quality
					value = -5
				}
			}
		}

		else_if = {
			limit = {
				event_target:target_immortality_potion_ingredient = {
					ingredient_is_unhealthy_trigger = yes
				}
			}
			
			if = {
				limit = {
					check_variable = {
						which = alchemist_poison_knowledge
						value >= 100
					}
				}
				
				change_variable = {
					which = local_current_potion_quality
					value = 5
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_poison_knowledge
						value >= 75
					}
				}
				
				change_variable = {
					which = local_current_potion_quality
					value = 4
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_poison_knowledge
						value >= 50
					}
				}
				
				change_variable = {
					which = local_current_potion_quality
					value = 3
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_poison_knowledge
						value >= 25
					}
				}
				
				change_variable = {
					which = local_current_potion_quality
					value = 2
				}
			}
			
			else = {
				change_variable = {
					which = local_current_potion_quality
					value = 1
				}
			}
		}
		
		else = {
			change_variable = {
				which = local_current_potion_quality
				value = 1
			}
		}
		
		change_variable = {
			which = immortality_potion_quality
			which = local_current_potion_quality
		}
		
		event_target:target_immortality_potion_ingredient = {
			trigger_switch = {
				on_trigger = artifact_type
				
				ingredient_herb1 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_herb1
					}
				}
				ingredient_herb2 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_herb2
					}
				}
				ingredient_herb3 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_herb3
					}
				}
				ingredient_herb4 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_herb4
					}
				}
				ingredient_herb5 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_herb5
					}
				}
				ingredient_herb6 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_herb6
					}
				}
				ingredient_herb7 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_herb7
					}
				}
				ingredient_herb8 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_herb8
					}
				}
				ingredient_herb9 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_herb9
					}
				}
				ingredient_herb10 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_herb10
					}
				}
				ingredient_herb11 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_herb11
					}
				}
				ingredient_herb12 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_herb12
					}
				}
				ingredient_herb13 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_herb13
					}
				}
				ingredient_herb14 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_herb14
					}
				}
				ingredient_herb15 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_herb15
					}
				}
				ingredient_animal1 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_animal1
					}
				}
				ingredient_animal2 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_animal2
					}
				}
				ingredient_animal3 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_animal3
					}
				}
				ingredient_animal4 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_animal4
					}
				}
				ingredient_animal5 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_animal5
					}
				}
				ingredient_animal6 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_animal6
					}
				}
				ingredient_animal7 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_animal7
					}
				}
				ingredient_animal8 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_animal8
					}
				}
				ingredient_animal9 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_animal9
					}
				}
				ingredient_metal_exotic1 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_metal_exotic1
					}
				}
				ingredient_metal_exotic2 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_metal_exotic2
					}
				}
				ingredient_metal_exotic3 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_metal_exotic3
					}
				}
				ingredient_metal_exotic4 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_metal_exotic4
					}
				}
				ingredient_metal_exotic5 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_metal_exotic5
					}
				}
				ingredient_metal_exotic6 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_metal_exotic6
					}
				}
				ingredient_metal_exotic7 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_metal_exotic7
					}
				}
				ingredient_metal_exotic8 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_metal_exotic8
					}
				}
				ingredient_metal_exotic9 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_metal_exotic9
					}
				}
				ingredient_metal_exotic10 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_metal_exotic10
					}
				}
				ingredient_metal_exotic11 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_metal_exotic11
					}
				}
				ingredient_metal_exotic12 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_metal_exotic12
					}
				}
				ingredient_metal_exotic13 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_metal_exotic13
					}
				}
				ingredient_metal_exotic14 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_metal_exotic14
					}
				}
				ingredient_misc_powder_1 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_misc_powder_1
					}
				}
				ingredient_misc_powder_2 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_misc_powder_2
					}
				}
				ingredient_misc_powder_3 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_misc_powder_3
					}
				}
				ingredient_misc_powder_4 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_misc_powder_4
					}
				}
				ingredient_misc_powder_5 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_misc_powder_5
					}
				}
				ingredient_mineral_1 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_mineral_1
					}
				}
				ingredient_mineral_2 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_mineral_2
					}
				}
				ingredient_mineral_jade_1 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_mineral_jade_1
					}
				}
				ingredient_mineral_jade_2 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_mineral_jade_2
					}
				}
				ingredient_mineral_jade_3 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_mineral_jade_3
					}
				}
				ingredient_mineral_jade_4 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_mineral_jade_4
					}
				}
				ingredient_mineral_jade_5 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_mineral_jade_5
					}
				}
				ingredient_mineral_jade_6 = {
					ROOT = {
						set_character_flag = immortality_potion_contains_ingredient_mineral_jade_6
					}
				}
			}
		}
	}
}

add_random_ingredient_to_immortality_potion_effect = {
	add_random_new_immortality_potion_ingredient_effect = yes
	
	trigger_switch = {
		on_trigger = has_character_flag
		
		brewing_immortality_potion_actual = { add_ingredient_to_immortality_potion_actual_effect = yes }
		brewing_immortality_potion_placebo = { add_ingredient_to_immortality_potion_placebo_effect = yes }
		brewing_immortality_potion_poison = { add_ingredient_to_immortality_potion_poison_effect = yes }
	}
}

add_random_new_immortality_potion_ingredient_effect = {
	random_list = {
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_herb1
				}
			}
			
			add_artifact = ingredient_herb1
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_herb2
				}
			}
			
			add_artifact = ingredient_herb2
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_herb3
				}
			}
			
			add_artifact = ingredient_herb3
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_herb4
				}
			}
			
			add_artifact = ingredient_herb4
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_herb5
				}
			}
			
			add_artifact = ingredient_herb5
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_herb6
				}
			}
			
			add_artifact = ingredient_herb6
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_herb7
				}
			}
			
			add_artifact = ingredient_herb7
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_herb8
				}
			}
			
			add_artifact = ingredient_herb8
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_herb9
				}
			}
			
			add_artifact = ingredient_herb9
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_herb10
				}
			}
			
			add_artifact = ingredient_herb10
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_herb11
				}
			}
			
			add_artifact = ingredient_herb11
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_herb12
				}
			}
			
			add_artifact = ingredient_herb12
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_herb13
				}
			}
			
			add_artifact = ingredient_herb13
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_herb14
				}
			}
			
			add_artifact = ingredient_herb14
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_herb15
				}
			}
			
			add_artifact = ingredient_herb15
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_animal1
				}
			}
			
			add_artifact = ingredient_animal1
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_animal2
				}
			}
			
			add_artifact = ingredient_animal2
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_animal3
				}
			}
			
			add_artifact = ingredient_animal3
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_animal4
				}
			}
			
			add_artifact = ingredient_animal4
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_animal5
				}
			}
			
			add_artifact = ingredient_animal5
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_animal6
				}
			}
			
			add_artifact = ingredient_animal6
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_animal7
				}
			}
			
			add_artifact = ingredient_animal7
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_animal8
				}
			}
			
			add_artifact = ingredient_animal8
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_animal9
				}
			}
			
			add_artifact = ingredient_animal9
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_metal_exotic1
				}
			}
			
			add_artifact = ingredient_metal_exotic1
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_metal_exotic2
				}
			}
			
			add_artifact = ingredient_metal_exotic2
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_metal_exotic3
				}
			}
			
			add_artifact = ingredient_metal_exotic3
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_metal_exotic4
				}
			}
			
			add_artifact = ingredient_metal_exotic4
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_metal_exotic5
				}
			}
			
			add_artifact = ingredient_metal_exotic5
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_metal_exotic6
				}
			}
			
			add_artifact = ingredient_metal_exotic6
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_metal_exotic7
				}
			}
			
			add_artifact = ingredient_metal_exotic7
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_metal_exotic8
				}
			}
			
			add_artifact = ingredient_metal_exotic8
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_metal_exotic9
				}
			}
			
			add_artifact = ingredient_metal_exotic9
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_metal_exotic10
				}
			}
			
			add_artifact = ingredient_metal_exotic10
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_metal_exotic11
				}
			}
			
			add_artifact = ingredient_metal_exotic11
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_metal_exotic12
				}
			}
			
			add_artifact = ingredient_metal_exotic12
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_metal_exotic13
				}
			}
			
			add_artifact = ingredient_metal_exotic13
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_metal_exotic14
				}
			}
			
			add_artifact = ingredient_metal_exotic14
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_misc_powder_1
				}
			}
			
			add_artifact = ingredient_misc_powder_1
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_misc_powder_2
				}
			}
			
			add_artifact = ingredient_misc_powder_2
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_misc_powder_3
				}
			}
			
			add_artifact = ingredient_misc_powder_3
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_misc_powder_4
				}
			}
			
			add_artifact = ingredient_misc_powder_4
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_misc_powder_5
				}
			}
			
			add_artifact = ingredient_misc_powder_5
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_mineral_1
				}
			}
			
			add_artifact = ingredient_mineral_1
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_mineral_2
				}
			}
			
			add_artifact = ingredient_mineral_2
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_mineral_jade_1
				}
			}
			
			add_artifact = ingredient_mineral_jade_1
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_mineral_jade_2
				}
			}
			
			add_artifact = ingredient_mineral_jade_2
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_mineral_jade_3
				}
			}
			
			add_artifact = ingredient_mineral_jade_3
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_mineral_jade_4
				}
			}
			
			add_artifact = ingredient_mineral_jade_4
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_mineral_jade_5
				}
			}
			
			add_artifact = ingredient_mineral_jade_5
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_mineral_jade_6
				}
			}
			
			add_artifact = ingredient_mineral_jade_6
		}
	}
}

save_immortality_potion_ingredient_for_purification_effect = {
	hidden_effect = {
		clear_flags_with_prefix = purifying_
		
		set_variable = {
			which = purification_ingredient_value
			value = 0
		}
		
		if = {
			limit = {
				event_target:target_immortality_potion_ingredient = {
					ingredient_is_unhealthy_trigger = no
				}
			}
			
			change_variable = {
				which = purification_ingredient_value
				value = 1
			}
		}

		else = {
			change_variable = {
				which = purification_ingredient_value
				value = -1
			}
		}
		
		event_target:target_immortality_potion_ingredient = {
			trigger_switch = {
				on_trigger = artifact_type
				
				ingredient_herb1 = {
					ROOT = {
						set_character_flag = purifying_ingredient_herb1
					}
				}
				ingredient_herb2 = {
					ROOT = {
						set_character_flag = purifying_ingredient_herb2
					}
				}
				ingredient_herb3 = {
					ROOT = {
						set_character_flag = purifying_ingredient_herb3
					}
				}
				ingredient_herb4 = {
					ROOT = {
						set_character_flag = purifying_ingredient_herb4
					}
				}
				ingredient_herb5 = {
					ROOT = {
						set_character_flag = purifying_ingredient_herb5
					}
				}
				ingredient_herb6 = {
					ROOT = {
						set_character_flag = purifying_ingredient_herb6
					}
				}
				ingredient_herb7 = {
					ROOT = {
						set_character_flag = purifying_ingredient_herb7
					}
				}
				ingredient_herb8 = {
					ROOT = {
						set_character_flag = purifying_ingredient_herb8
					}
				}
				ingredient_herb9 = {
					ROOT = {
						set_character_flag = purifying_ingredient_herb9
					}
				}
				ingredient_herb10 = {
					ROOT = {
						set_character_flag = purifying_ingredient_herb10
					}
				}
				ingredient_herb11 = {
					ROOT = {
						set_character_flag = purifying_ingredient_herb11
					}
				}
				ingredient_herb12 = {
					ROOT = {
						set_character_flag = purifying_ingredient_herb12
					}
				}
				ingredient_herb13 = {
					ROOT = {
						set_character_flag = purifying_ingredient_herb13
					}
				}
				ingredient_herb14 = {
					ROOT = {
						set_character_flag = purifying_ingredient_herb14
					}
				}
				ingredient_herb15 = {
					ROOT = {
						set_character_flag = purifying_ingredient_herb15
					}
				}
				ingredient_animal1 = {
					ROOT = {
						set_character_flag = purifying_ingredient_animal1
					}
				}
				ingredient_animal2 = {
					ROOT = {
						set_character_flag = purifying_ingredient_animal2
					}
				}
				ingredient_animal3 = {
					ROOT = {
						set_character_flag = purifying_ingredient_animal3
					}
				}
				ingredient_animal4 = {
					ROOT = {
						set_character_flag = purifying_ingredient_animal4
					}
				}
				ingredient_animal5 = {
					ROOT = {
						set_character_flag = purifying_ingredient_animal5
					}
				}
				ingredient_animal6 = {
					ROOT = {
						set_character_flag = purifying_ingredient_animal6
					}
				}
				ingredient_animal7 = {
					ROOT = {
						set_character_flag = purifying_ingredient_animal7
					}
				}
				ingredient_animal8 = {
					ROOT = {
						set_character_flag = purifying_ingredient_animal8
					}
				}
				ingredient_animal9 = {
					ROOT = {
						set_character_flag = purifying_ingredient_animal9
					}
				}
				ingredient_metal_exotic1 = {
					ROOT = {
						set_character_flag = purifying_ingredient_metal_exotic1
					}
				}
				ingredient_metal_exotic2 = {
					ROOT = {
						set_character_flag = purifying_ingredient_metal_exotic2
					}
				}
				ingredient_metal_exotic3 = {
					ROOT = {
						set_character_flag = purifying_ingredient_metal_exotic3
					}
				}
				ingredient_metal_exotic4 = {
					ROOT = {
						set_character_flag = purifying_ingredient_metal_exotic4
					}
				}
				ingredient_metal_exotic5 = {
					ROOT = {
						set_character_flag = purifying_ingredient_metal_exotic5
					}
				}
				ingredient_metal_exotic6 = {
					ROOT = {
						set_character_flag = purifying_ingredient_metal_exotic6
					}
				}
				ingredient_metal_exotic7 = {
					ROOT = {
						set_character_flag = purifying_ingredient_metal_exotic7
					}
				}
				ingredient_metal_exotic8 = {
					ROOT = {
						set_character_flag = purifying_ingredient_metal_exotic8
					}
				}
				ingredient_metal_exotic9 = {
					ROOT = {
						set_character_flag = purifying_ingredient_metal_exotic9
					}
				}
				ingredient_metal_exotic10 = {
					ROOT = {
						set_character_flag = purifying_ingredient_metal_exotic10
					}
				}
				ingredient_metal_exotic11 = {
					ROOT = {
						set_character_flag = purifying_ingredient_metal_exotic11
					}
				}
				ingredient_metal_exotic12 = {
					ROOT = {
						set_character_flag = purifying_ingredient_metal_exotic12
					}
				}
				ingredient_metal_exotic13 = {
					ROOT = {
						set_character_flag = purifying_ingredient_metal_exotic13
					}
				}
				ingredient_metal_exotic14 = {
					ROOT = {
						set_character_flag = purifying_ingredient_metal_exotic14
					}
				}
				ingredient_misc_powder_1 = {
					ROOT = {
						set_character_flag = purifying_ingredient_misc_powder_1
					}
				}
				ingredient_misc_powder_2 = {
					ROOT = {
						set_character_flag = purifying_ingredient_misc_powder_2
					}
				}
				ingredient_misc_powder_3 = {
					ROOT = {
						set_character_flag = purifying_ingredient_misc_powder_3
					}
				}
				ingredient_misc_powder_4 = {
					ROOT = {
						set_character_flag = purifying_ingredient_misc_powder_4
					}
				}
				ingredient_misc_powder_5 = {
					ROOT = {
						set_character_flag = purifying_ingredient_misc_powder_5
					}
				}
				ingredient_mineral_1 = {
					ROOT = {
						set_character_flag = purifying_ingredient_mineral_1
					}
				}
				ingredient_mineral_2 = {
					ROOT = {
						set_character_flag = purifying_ingredient_mineral_2
					}
				}
				ingredient_mineral_jade_1 = {
					ROOT = {
						set_character_flag = purifying_ingredient_mineral_jade_1
					}
				}
				ingredient_mineral_jade_2 = {
					ROOT = {
						set_character_flag = purifying_ingredient_mineral_jade_2
					}
				}
				ingredient_mineral_jade_3 = {
					ROOT = {
						set_character_flag = purifying_ingredient_mineral_jade_3
					}
				}
				ingredient_mineral_jade_4 = {
					ROOT = {
						set_character_flag = purifying_ingredient_mineral_jade_4
					}
				}
				ingredient_mineral_jade_5 = {
					ROOT = {
						set_character_flag = purifying_ingredient_mineral_jade_5
					}
				}
				ingredient_mineral_jade_6 = {
					ROOT = {
						set_character_flag = purifying_ingredient_mineral_jade_6
					}
				}
			}
		}
	}
}

add_non_purified_ingredient_to_immortality_potion_actual_effect = {
	hidden_effect = {
		clear_flags_with_prefix = immortality_potion_needs_
		
		change_variable = {
			which = immortality_potion_ingredients
			value = 1
		}
		
		if = {
			limit = {
				check_variable = {
					which = purification_ingredient_value
					value >= 0
				}
			}
				
			if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 100
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = 2.5
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 75
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = 2
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 50
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = 1.5
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 25
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = 1
				}
			}
			
			else = {
				set_variable = {
					which = local_current_potion_quality
					value = 0.5
				}
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = purification_ingredient_value
					value < 0
				}
			}
			
			if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 100
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = -1
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 75
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = -2
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 50
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = -3
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 25
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = -4
				}
			}
			
			else = {
				set_variable = {
					which = local_current_potion_quality
					value = -5
				}
			}
		}
		
		else = {
			set_variable = {
				which = local_current_potion_quality
				value = 0.5
			}
		}
		
		change_variable = {
			which = immortality_potion_quality
			which = local_current_potion_quality
		}
		
		trigger_switch = {
			on_trigger = has_character_flag
			
			purifying_ingredient_herb1 = {
				set_character_flag = immortality_potion_contains_ingredient_herb1
			}
			purifying_ingredient_herb2 = {
				set_character_flag = immortality_potion_contains_ingredient_herb2
			}
			purifying_ingredient_herb3 = {
				set_character_flag = immortality_potion_contains_ingredient_herb3
			}
			purifying_ingredient_herb4 = {
				set_character_flag = immortality_potion_contains_ingredient_herb4
			}
			purifying_ingredient_herb5 = {
				set_character_flag = immortality_potion_contains_ingredient_herb5
			}
			purifying_ingredient_herb6 = {
				set_character_flag = immortality_potion_contains_ingredient_herb6
			}
			purifying_ingredient_herb7 = {
				set_character_flag = immortality_potion_contains_ingredient_herb7
			}
			purifying_ingredient_herb8 = {
				set_character_flag = immortality_potion_contains_ingredient_herb8
			}
			purifying_ingredient_herb9 = {
				set_character_flag = immortality_potion_contains_ingredient_herb9
			}
			purifying_ingredient_herb10 = {
				set_character_flag = immortality_potion_contains_ingredient_herb10
			}
			purifying_ingredient_herb11 = {
				set_character_flag = immortality_potion_contains_ingredient_herb11
			}
			purifying_ingredient_herb12 = {
				set_character_flag = immortality_potion_contains_ingredient_herb12
			}
			purifying_ingredient_herb13 = {
				set_character_flag = immortality_potion_contains_ingredient_herb13
			}
			purifying_ingredient_herb14 = {
				set_character_flag = immortality_potion_contains_ingredient_herb14
			}
			purifying_ingredient_herb15 = {
				set_character_flag = immortality_potion_contains_ingredient_herb15
			}
			purifying_ingredient_animal1 = {
				set_character_flag = immortality_potion_contains_ingredient_animal1
			}
			purifying_ingredient_animal2 = {
				set_character_flag = immortality_potion_contains_ingredient_animal2
			}
			purifying_ingredient_animal3 = {
				set_character_flag = immortality_potion_contains_ingredient_animal3
			}
			purifying_ingredient_animal4 = {
				set_character_flag = immortality_potion_contains_ingredient_animal4
			}
			purifying_ingredient_animal5 = {
				set_character_flag = immortality_potion_contains_ingredient_animal5
			}
			purifying_ingredient_animal6 = {
				set_character_flag = immortality_potion_contains_ingredient_animal6
			}
			purifying_ingredient_animal7 = {
				set_character_flag = immortality_potion_contains_ingredient_animal7
			}
			purifying_ingredient_animal8 = {
				set_character_flag = immortality_potion_contains_ingredient_animal8
			}
			purifying_ingredient_animal9 = {
				set_character_flag = immortality_potion_contains_ingredient_animal9
			}
			purifying_ingredient_metal_exotic1 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic1
			}
			purifying_ingredient_metal_exotic2 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic2
			}
			purifying_ingredient_metal_exotic3 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic3
			}
			purifying_ingredient_metal_exotic4 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic4
			}
			purifying_ingredient_metal_exotic5 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic5
			}
			purifying_ingredient_metal_exotic6 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic6
			}
			purifying_ingredient_metal_exotic7 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic7
			}
			purifying_ingredient_metal_exotic8 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic8
			}
			purifying_ingredient_metal_exotic9 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic9
			}
			purifying_ingredient_metal_exotic10 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic10
			}
			purifying_ingredient_metal_exotic11 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic11
			}
			purifying_ingredient_metal_exotic12 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic12
			}
			purifying_ingredient_metal_exotic13 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic13
			}
			purifying_ingredient_metal_exotic14 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic14
			}
			purifying_ingredient_misc_powder_1 = {
				set_character_flag = immortality_potion_contains_ingredient_misc_powder_1
			}
			purifying_ingredient_misc_powder_2 = {
				set_character_flag = immortality_potion_contains_ingredient_misc_powder_2
			}
			purifying_ingredient_misc_powder_3 = {
				set_character_flag = immortality_potion_contains_ingredient_misc_powder_3
			}
			purifying_ingredient_misc_powder_4 = {
				set_character_flag = immortality_potion_contains_ingredient_misc_powder_4
			}
			purifying_ingredient_misc_powder_5 = {
				set_character_flag = immortality_potion_contains_ingredient_misc_powder_5
			}
			purifying_ingredient_mineral_1 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_1
			}
			purifying_ingredient_mineral_2 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_2
			}
			purifying_ingredient_mineral_jade_1 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_jade_1
			}
			purifying_ingredient_mineral_jade_2 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_jade_2
			}
			purifying_ingredient_mineral_jade_3 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_jade_3
			}
			purifying_ingredient_mineral_jade_4 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_jade_4
			}
			purifying_ingredient_mineral_jade_5 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_jade_5
			}
			purifying_ingredient_mineral_jade_6 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_jade_6
			}
		}
	}
}

add_non_purified_ingredient_to_immortality_potion_placebo_effect = {
	hidden_effect = {
		clear_flags_with_prefix = immortality_potion_needs_
		
		change_variable = {
			which = immortality_potion_ingredients
			value = 1
		}
		
		if = {
			limit = {
				check_variable = {
					which = purification_ingredient_value
					value >= 0
				}
			}
				
			if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 100
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = 1.25
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 75
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = 1
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 50
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = 0.75
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 25
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = 0.5
				}
			}
			
			else = {
				set_variable = {
					which = local_current_potion_quality
					value = 0.25
				}
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = purification_ingredient_value
					value < 0
				}
			}
			
			if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 100
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = -1
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 75
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = -2
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 50
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = -3
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 25
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = -4
				}
			}
			
			else = {
				set_variable = {
					which = local_current_potion_quality
					value = -5
				}
			}
		}
		
		else = {
			set_variable = {
				which = local_current_potion_quality
				value = 0.25
			}
		}
		
		change_variable = {
			which = immortality_potion_quality
			which = local_current_potion_quality
		}
		
		trigger_switch = {
			on_trigger = has_character_flag
			
			purifying_ingredient_herb1 = {
				set_character_flag = immortality_potion_contains_ingredient_herb1
			}
			purifying_ingredient_herb2 = {
				set_character_flag = immortality_potion_contains_ingredient_herb2
			}
			purifying_ingredient_herb3 = {
				set_character_flag = immortality_potion_contains_ingredient_herb3
			}
			purifying_ingredient_herb4 = {
				set_character_flag = immortality_potion_contains_ingredient_herb4
			}
			purifying_ingredient_herb5 = {
				set_character_flag = immortality_potion_contains_ingredient_herb5
			}
			purifying_ingredient_herb6 = {
				set_character_flag = immortality_potion_contains_ingredient_herb6
			}
			purifying_ingredient_herb7 = {
				set_character_flag = immortality_potion_contains_ingredient_herb7
			}
			purifying_ingredient_herb8 = {
				set_character_flag = immortality_potion_contains_ingredient_herb8
			}
			purifying_ingredient_herb9 = {
				set_character_flag = immortality_potion_contains_ingredient_herb9
			}
			purifying_ingredient_herb10 = {
				set_character_flag = immortality_potion_contains_ingredient_herb10
			}
			purifying_ingredient_herb11 = {
				set_character_flag = immortality_potion_contains_ingredient_herb11
			}
			purifying_ingredient_herb12 = {
				set_character_flag = immortality_potion_contains_ingredient_herb12
			}
			purifying_ingredient_herb13 = {
				set_character_flag = immortality_potion_contains_ingredient_herb13
			}
			purifying_ingredient_herb14 = {
				set_character_flag = immortality_potion_contains_ingredient_herb14
			}
			purifying_ingredient_herb15 = {
				set_character_flag = immortality_potion_contains_ingredient_herb15
			}
			purifying_ingredient_animal1 = {
				set_character_flag = immortality_potion_contains_ingredient_animal1
			}
			purifying_ingredient_animal2 = {
				set_character_flag = immortality_potion_contains_ingredient_animal2
			}
			purifying_ingredient_animal3 = {
				set_character_flag = immortality_potion_contains_ingredient_animal3
			}
			purifying_ingredient_animal4 = {
				set_character_flag = immortality_potion_contains_ingredient_animal4
			}
			purifying_ingredient_animal5 = {
				set_character_flag = immortality_potion_contains_ingredient_animal5
			}
			purifying_ingredient_animal6 = {
				set_character_flag = immortality_potion_contains_ingredient_animal6
			}
			purifying_ingredient_animal7 = {
				set_character_flag = immortality_potion_contains_ingredient_animal7
			}
			purifying_ingredient_animal8 = {
				set_character_flag = immortality_potion_contains_ingredient_animal8
			}
			purifying_ingredient_animal9 = {
				set_character_flag = immortality_potion_contains_ingredient_animal9
			}
			purifying_ingredient_metal_exotic1 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic1
			}
			purifying_ingredient_metal_exotic2 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic2
			}
			purifying_ingredient_metal_exotic3 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic3
			}
			purifying_ingredient_metal_exotic4 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic4
			}
			purifying_ingredient_metal_exotic5 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic5
			}
			purifying_ingredient_metal_exotic6 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic6
			}
			purifying_ingredient_metal_exotic7 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic7
			}
			purifying_ingredient_metal_exotic8 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic8
			}
			purifying_ingredient_metal_exotic9 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic9
			}
			purifying_ingredient_metal_exotic10 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic10
			}
			purifying_ingredient_metal_exotic11 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic11
			}
			purifying_ingredient_metal_exotic12 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic12
			}
			purifying_ingredient_metal_exotic13 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic13
			}
			purifying_ingredient_metal_exotic14 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic14
			}
			purifying_ingredient_misc_powder_1 = {
				set_character_flag = immortality_potion_contains_ingredient_misc_powder_1
			}
			purifying_ingredient_misc_powder_2 = {
				set_character_flag = immortality_potion_contains_ingredient_misc_powder_2
			}
			purifying_ingredient_misc_powder_3 = {
				set_character_flag = immortality_potion_contains_ingredient_misc_powder_3
			}
			purifying_ingredient_misc_powder_4 = {
				set_character_flag = immortality_potion_contains_ingredient_misc_powder_4
			}
			purifying_ingredient_misc_powder_5 = {
				set_character_flag = immortality_potion_contains_ingredient_misc_powder_5
			}
			purifying_ingredient_mineral_1 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_1
			}
			purifying_ingredient_mineral_2 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_2
			}
			purifying_ingredient_mineral_jade_1 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_jade_1
			}
			purifying_ingredient_mineral_jade_2 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_jade_2
			}
			purifying_ingredient_mineral_jade_3 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_jade_3
			}
			purifying_ingredient_mineral_jade_4 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_jade_4
			}
			purifying_ingredient_mineral_jade_5 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_jade_5
			}
			purifying_ingredient_mineral_jade_6 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_jade_6
			}
		}
	}
}

add_non_purified_ingredient_to_immortality_potion_poison_effect = {
	hidden_effect = {
		clear_flags_with_prefix = immortality_potion_needs_
		
		change_variable = {
			which = immortality_potion_ingredients
			value = 1
		}
		
		if = {
			limit = {
				check_variable = {
					which = purification_ingredient_value
					value < 0
				}
			}
				
			if = {
				limit = {
					check_variable = {
						which = alchemist_poison_knowledge
						value >= 100
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = 2.5
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_poison_knowledge
						value >= 75
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = 2
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_poison_knowledge
						value >= 50
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = 1.5
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_poison_knowledge
						value >= 25
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = 1
				}
			}
			
			else = {
				set_variable = {
					which = local_current_potion_quality
					value = 0.5
				}
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = purification_ingredient_value
					value > 0
				}
			}
			
			if = {
				limit = {
					check_variable = {
						which = alchemist_poison_knowledge
						value >= 100
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = -1
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_poison_knowledge
						value >= 75
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = -2
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_poison_knowledge
						value >= 50
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = -3
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_poison_knowledge
						value >= 25
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = -4
				}
			}
			
			else = {
				set_variable = {
					which = local_current_potion_quality
					value = -5
				}
			}
		}
		
		else = {
			set_variable = {
				which = local_current_potion_quality
				value = 0.5
			}
		}
		
		change_variable = {
			which = immortality_potion_quality
			which = local_current_potion_quality
		}
		
		trigger_switch = {
			on_trigger = has_character_flag
			
			purifying_ingredient_herb1 = {
				set_character_flag = immortality_potion_contains_ingredient_herb1
			}
			purifying_ingredient_herb2 = {
				set_character_flag = immortality_potion_contains_ingredient_herb2
			}
			purifying_ingredient_herb3 = {
				set_character_flag = immortality_potion_contains_ingredient_herb3
			}
			purifying_ingredient_herb4 = {
				set_character_flag = immortality_potion_contains_ingredient_herb4
			}
			purifying_ingredient_herb5 = {
				set_character_flag = immortality_potion_contains_ingredient_herb5
			}
			purifying_ingredient_herb6 = {
				set_character_flag = immortality_potion_contains_ingredient_herb6
			}
			purifying_ingredient_herb7 = {
				set_character_flag = immortality_potion_contains_ingredient_herb7
			}
			purifying_ingredient_herb8 = {
				set_character_flag = immortality_potion_contains_ingredient_herb8
			}
			purifying_ingredient_herb9 = {
				set_character_flag = immortality_potion_contains_ingredient_herb9
			}
			purifying_ingredient_herb10 = {
				set_character_flag = immortality_potion_contains_ingredient_herb10
			}
			purifying_ingredient_herb11 = {
				set_character_flag = immortality_potion_contains_ingredient_herb11
			}
			purifying_ingredient_herb12 = {
				set_character_flag = immortality_potion_contains_ingredient_herb12
			}
			purifying_ingredient_herb13 = {
				set_character_flag = immortality_potion_contains_ingredient_herb13
			}
			purifying_ingredient_herb14 = {
				set_character_flag = immortality_potion_contains_ingredient_herb14
			}
			purifying_ingredient_herb15 = {
				set_character_flag = immortality_potion_contains_ingredient_herb15
			}
			purifying_ingredient_animal1 = {
				set_character_flag = immortality_potion_contains_ingredient_animal1
			}
			purifying_ingredient_animal2 = {
				set_character_flag = immortality_potion_contains_ingredient_animal2
			}
			purifying_ingredient_animal3 = {
				set_character_flag = immortality_potion_contains_ingredient_animal3
			}
			purifying_ingredient_animal4 = {
				set_character_flag = immortality_potion_contains_ingredient_animal4
			}
			purifying_ingredient_animal5 = {
				set_character_flag = immortality_potion_contains_ingredient_animal5
			}
			purifying_ingredient_animal6 = {
				set_character_flag = immortality_potion_contains_ingredient_animal6
			}
			purifying_ingredient_animal7 = {
				set_character_flag = immortality_potion_contains_ingredient_animal7
			}
			purifying_ingredient_animal8 = {
				set_character_flag = immortality_potion_contains_ingredient_animal8
			}
			purifying_ingredient_animal9 = {
				set_character_flag = immortality_potion_contains_ingredient_animal9
			}
			purifying_ingredient_metal_exotic1 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic1
			}
			purifying_ingredient_metal_exotic2 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic2
			}
			purifying_ingredient_metal_exotic3 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic3
			}
			purifying_ingredient_metal_exotic4 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic4
			}
			purifying_ingredient_metal_exotic5 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic5
			}
			purifying_ingredient_metal_exotic6 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic6
			}
			purifying_ingredient_metal_exotic7 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic7
			}
			purifying_ingredient_metal_exotic8 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic8
			}
			purifying_ingredient_metal_exotic9 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic9
			}
			purifying_ingredient_metal_exotic10 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic10
			}
			purifying_ingredient_metal_exotic11 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic11
			}
			purifying_ingredient_metal_exotic12 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic12
			}
			purifying_ingredient_metal_exotic13 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic13
			}
			purifying_ingredient_metal_exotic14 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic14
			}
			purifying_ingredient_misc_powder_1 = {
				set_character_flag = immortality_potion_contains_ingredient_misc_powder_1
			}
			purifying_ingredient_misc_powder_2 = {
				set_character_flag = immortality_potion_contains_ingredient_misc_powder_2
			}
			purifying_ingredient_misc_powder_3 = {
				set_character_flag = immortality_potion_contains_ingredient_misc_powder_3
			}
			purifying_ingredient_misc_powder_4 = {
				set_character_flag = immortality_potion_contains_ingredient_misc_powder_4
			}
			purifying_ingredient_misc_powder_5 = {
				set_character_flag = immortality_potion_contains_ingredient_misc_powder_5
			}
			purifying_ingredient_mineral_1 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_1
			}
			purifying_ingredient_mineral_2 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_2
			}
			purifying_ingredient_mineral_jade_1 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_jade_1
			}
			purifying_ingredient_mineral_jade_2 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_jade_2
			}
			purifying_ingredient_mineral_jade_3 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_jade_3
			}
			purifying_ingredient_mineral_jade_4 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_jade_4
			}
			purifying_ingredient_mineral_jade_5 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_jade_5
			}
			purifying_ingredient_mineral_jade_6 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_jade_6
			}
		}
	}
}

add_purified_ingredient_to_immortality_potion_actual_effect = {
	hidden_effect = {
		change_variable = {
			which = immortality_potion_ingredients
			value = 1
		}
		
		if = {
			limit = {
				check_variable = {
					which = purification_ingredient_value
					value >= 0
				}
			}
				
			if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 100
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = 10
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 75
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = 8
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 50
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = 6
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 25
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = 4
				}
			}
			
			else = {
				set_variable = {
					which = local_current_potion_quality
					value = 2
				}
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = purification_ingredient_value
					value < 0
				}
			}
			
			if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 100
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = -0.2
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 75
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = -0.4
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 50
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = -0.6
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 25
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = -0.8
				}
			}
			
			else = {
				set_variable = {
					which = local_current_potion_quality
					value = -1
				}
			}
		}
		
		else = {
			set_variable = {
				which = local_current_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				check_variable = {
					which = local_current_potion_quality
					value >= 0
				}
			}
			
			multiply_variable = {
				which = local_current_potion_quality
				value = 2
			}
		}
		
		change_variable = {
			which = immortality_potion_quality
			which = local_current_potion_quality
		}
		
		trigger_switch = {
			on_trigger = has_character_flag
			
			purifying_ingredient_herb1 = {
				set_character_flag = immortality_potion_contains_ingredient_herb1
			}
			purifying_ingredient_herb2 = {
				set_character_flag = immortality_potion_contains_ingredient_herb2
			}
			purifying_ingredient_herb3 = {
				set_character_flag = immortality_potion_contains_ingredient_herb3
			}
			purifying_ingredient_herb4 = {
				set_character_flag = immortality_potion_contains_ingredient_herb4
			}
			purifying_ingredient_herb5 = {
				set_character_flag = immortality_potion_contains_ingredient_herb5
			}
			purifying_ingredient_herb6 = {
				set_character_flag = immortality_potion_contains_ingredient_herb6
			}
			purifying_ingredient_herb7 = {
				set_character_flag = immortality_potion_contains_ingredient_herb7
			}
			purifying_ingredient_herb8 = {
				set_character_flag = immortality_potion_contains_ingredient_herb8
			}
			purifying_ingredient_herb9 = {
				set_character_flag = immortality_potion_contains_ingredient_herb9
			}
			purifying_ingredient_herb10 = {
				set_character_flag = immortality_potion_contains_ingredient_herb10
			}
			purifying_ingredient_herb11 = {
				set_character_flag = immortality_potion_contains_ingredient_herb11
			}
			purifying_ingredient_herb12 = {
				set_character_flag = immortality_potion_contains_ingredient_herb12
			}
			purifying_ingredient_herb13 = {
				set_character_flag = immortality_potion_contains_ingredient_herb13
			}
			purifying_ingredient_herb14 = {
				set_character_flag = immortality_potion_contains_ingredient_herb14
			}
			purifying_ingredient_herb15 = {
				set_character_flag = immortality_potion_contains_ingredient_herb15
			}
			purifying_ingredient_animal1 = {
				set_character_flag = immortality_potion_contains_ingredient_animal1
			}
			purifying_ingredient_animal2 = {
				set_character_flag = immortality_potion_contains_ingredient_animal2
			}
			purifying_ingredient_animal3 = {
				set_character_flag = immortality_potion_contains_ingredient_animal3
			}
			purifying_ingredient_animal4 = {
				set_character_flag = immortality_potion_contains_ingredient_animal4
			}
			purifying_ingredient_animal5 = {
				set_character_flag = immortality_potion_contains_ingredient_animal5
			}
			purifying_ingredient_animal6 = {
				set_character_flag = immortality_potion_contains_ingredient_animal6
			}
			purifying_ingredient_animal7 = {
				set_character_flag = immortality_potion_contains_ingredient_animal7
			}
			purifying_ingredient_animal8 = {
				set_character_flag = immortality_potion_contains_ingredient_animal8
			}
			purifying_ingredient_animal9 = {
				set_character_flag = immortality_potion_contains_ingredient_animal9
			}
			purifying_ingredient_metal_exotic1 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic1
			}
			purifying_ingredient_metal_exotic2 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic2
			}
			purifying_ingredient_metal_exotic3 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic3
			}
			purifying_ingredient_metal_exotic4 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic4
			}
			purifying_ingredient_metal_exotic5 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic5
			}
			purifying_ingredient_metal_exotic6 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic6
			}
			purifying_ingredient_metal_exotic7 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic7
			}
			purifying_ingredient_metal_exotic8 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic8
			}
			purifying_ingredient_metal_exotic9 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic9
			}
			purifying_ingredient_metal_exotic10 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic10
			}
			purifying_ingredient_metal_exotic11 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic11
			}
			purifying_ingredient_metal_exotic12 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic12
			}
			purifying_ingredient_metal_exotic13 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic13
			}
			purifying_ingredient_metal_exotic14 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic14
			}
			purifying_ingredient_misc_powder_1 = {
				set_character_flag = immortality_potion_contains_ingredient_misc_powder_1
			}
			purifying_ingredient_misc_powder_2 = {
				set_character_flag = immortality_potion_contains_ingredient_misc_powder_2
			}
			purifying_ingredient_misc_powder_3 = {
				set_character_flag = immortality_potion_contains_ingredient_misc_powder_3
			}
			purifying_ingredient_misc_powder_4 = {
				set_character_flag = immortality_potion_contains_ingredient_misc_powder_4
			}
			purifying_ingredient_misc_powder_5 = {
				set_character_flag = immortality_potion_contains_ingredient_misc_powder_5
			}
			purifying_ingredient_mineral_1 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_1
			}
			purifying_ingredient_mineral_2 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_2
			}
			purifying_ingredient_mineral_jade_1 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_jade_1
			}
			purifying_ingredient_mineral_jade_2 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_jade_2
			}
			purifying_ingredient_mineral_jade_3 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_jade_3
			}
			purifying_ingredient_mineral_jade_4 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_jade_4
			}
			purifying_ingredient_mineral_jade_5 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_jade_5
			}
			purifying_ingredient_mineral_jade_6 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_jade_6
			}
		}
	}
}

add_purified_ingredient_to_immortality_potion_placebo_effect = {
	hidden_effect = {
		change_variable = {
			which = immortality_potion_ingredients
			value = 1
		}
		
		if = {
			limit = {
				check_variable = {
					which = purification_ingredient_value
					value >= 0
				}
			}
				
			if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 100
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = 5
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 75
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = 4
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 50
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = 3
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 25
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = 2
				}
			}
			
			else = {
				set_variable = {
					which = local_current_potion_quality
					value = 1
				}
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = purification_ingredient_value
					value < 0
				}
			}
			
			if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 100
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = -0.2
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 75
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = -0.4
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 50
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = -0.6
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_healing_knowledge
						value >= 25
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = -0.8
				}
			}
			
			else = {
				set_variable = {
					which = local_current_potion_quality
					value = -1
				}
			}
		}
		
		else = {
			set_variable = {
				which = local_current_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				check_variable = {
					which = local_current_potion_quality
					value > 0
				}
			}
			
			multiply_variable = {
				which = local_current_potion_quality
				value = 2
			}
		}
		
		change_variable = {
			which = immortality_potion_quality
			which = local_current_potion_quality
		}
		
		trigger_switch = {
			on_trigger = has_character_flag
			
			purifying_ingredient_herb1 = {
				set_character_flag = immortality_potion_contains_ingredient_herb1
			}
			purifying_ingredient_herb2 = {
				set_character_flag = immortality_potion_contains_ingredient_herb2
			}
			purifying_ingredient_herb3 = {
				set_character_flag = immortality_potion_contains_ingredient_herb3
			}
			purifying_ingredient_herb4 = {
				set_character_flag = immortality_potion_contains_ingredient_herb4
			}
			purifying_ingredient_herb5 = {
				set_character_flag = immortality_potion_contains_ingredient_herb5
			}
			purifying_ingredient_herb6 = {
				set_character_flag = immortality_potion_contains_ingredient_herb6
			}
			purifying_ingredient_herb7 = {
				set_character_flag = immortality_potion_contains_ingredient_herb7
			}
			purifying_ingredient_herb8 = {
				set_character_flag = immortality_potion_contains_ingredient_herb8
			}
			purifying_ingredient_herb9 = {
				set_character_flag = immortality_potion_contains_ingredient_herb9
			}
			purifying_ingredient_herb10 = {
				set_character_flag = immortality_potion_contains_ingredient_herb10
			}
			purifying_ingredient_herb11 = {
				set_character_flag = immortality_potion_contains_ingredient_herb11
			}
			purifying_ingredient_herb12 = {
				set_character_flag = immortality_potion_contains_ingredient_herb12
			}
			purifying_ingredient_herb13 = {
				set_character_flag = immortality_potion_contains_ingredient_herb13
			}
			purifying_ingredient_herb14 = {
				set_character_flag = immortality_potion_contains_ingredient_herb14
			}
			purifying_ingredient_herb15 = {
				set_character_flag = immortality_potion_contains_ingredient_herb15
			}
			purifying_ingredient_animal1 = {
				set_character_flag = immortality_potion_contains_ingredient_animal1
			}
			purifying_ingredient_animal2 = {
				set_character_flag = immortality_potion_contains_ingredient_animal2
			}
			purifying_ingredient_animal3 = {
				set_character_flag = immortality_potion_contains_ingredient_animal3
			}
			purifying_ingredient_animal4 = {
				set_character_flag = immortality_potion_contains_ingredient_animal4
			}
			purifying_ingredient_animal5 = {
				set_character_flag = immortality_potion_contains_ingredient_animal5
			}
			purifying_ingredient_animal6 = {
				set_character_flag = immortality_potion_contains_ingredient_animal6
			}
			purifying_ingredient_animal7 = {
				set_character_flag = immortality_potion_contains_ingredient_animal7
			}
			purifying_ingredient_animal8 = {
				set_character_flag = immortality_potion_contains_ingredient_animal8
			}
			purifying_ingredient_animal9 = {
				set_character_flag = immortality_potion_contains_ingredient_animal9
			}
			purifying_ingredient_metal_exotic1 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic1
			}
			purifying_ingredient_metal_exotic2 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic2
			}
			purifying_ingredient_metal_exotic3 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic3
			}
			purifying_ingredient_metal_exotic4 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic4
			}
			purifying_ingredient_metal_exotic5 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic5
			}
			purifying_ingredient_metal_exotic6 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic6
			}
			purifying_ingredient_metal_exotic7 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic7
			}
			purifying_ingredient_metal_exotic8 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic8
			}
			purifying_ingredient_metal_exotic9 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic9
			}
			purifying_ingredient_metal_exotic10 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic10
			}
			purifying_ingredient_metal_exotic11 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic11
			}
			purifying_ingredient_metal_exotic12 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic12
			}
			purifying_ingredient_metal_exotic13 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic13
			}
			purifying_ingredient_metal_exotic14 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic14
			}
			purifying_ingredient_misc_powder_1 = {
				set_character_flag = immortality_potion_contains_ingredient_misc_powder_1
			}
			purifying_ingredient_misc_powder_2 = {
				set_character_flag = immortality_potion_contains_ingredient_misc_powder_2
			}
			purifying_ingredient_misc_powder_3 = {
				set_character_flag = immortality_potion_contains_ingredient_misc_powder_3
			}
			purifying_ingredient_misc_powder_4 = {
				set_character_flag = immortality_potion_contains_ingredient_misc_powder_4
			}
			purifying_ingredient_misc_powder_5 = {
				set_character_flag = immortality_potion_contains_ingredient_misc_powder_5
			}
			purifying_ingredient_mineral_1 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_1
			}
			purifying_ingredient_mineral_2 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_2
			}
			purifying_ingredient_mineral_jade_1 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_jade_1
			}
			purifying_ingredient_mineral_jade_2 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_jade_2
			}
			purifying_ingredient_mineral_jade_3 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_jade_3
			}
			purifying_ingredient_mineral_jade_4 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_jade_4
			}
			purifying_ingredient_mineral_jade_5 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_jade_5
			}
			purifying_ingredient_mineral_jade_6 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_jade_6
			}
		}
	}
}

add_purified_ingredient_to_immortality_potion_poison_effect = {
	hidden_effect = {
		change_variable = {
			which = immortality_potion_ingredients
			value = 1
		}
		
		if = {
			limit = {
				check_variable = {
					which = purification_ingredient_value
					value < 0
				}
			}
				
			if = {
				limit = {
					check_variable = {
						which = alchemist_poison_knowledge
						value >= 100
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = 10
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_poison_knowledge
						value >= 75
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = 8
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_poison_knowledge
						value >= 50
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = 6
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_poison_knowledge
						value >= 25
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = 4
				}
			}
			
			else = {
				set_variable = {
					which = local_current_potion_quality
					value = 2
				}
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = purification_ingredient_value
					value > 0
				}
			}
			
			if = {
				limit = {
					check_variable = {
						which = alchemist_poison_knowledge
						value >= 100
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = -0.2
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_poison_knowledge
						value >= 75
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = -0.4
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_poison_knowledge
						value >= 50
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = -0.6
				}
			}
			
			else_if = {
				limit = {
					check_variable = {
						which = alchemist_poison_knowledge
						value >= 25
					}
				}
				
				set_variable = {
					which = local_current_potion_quality
					value = -0.8
				}
			}
			
			else = {
				set_variable = {
					which = local_current_potion_quality
					value = -1
				}
			}
		}
		
		else = {
			set_variable = {
				which = local_current_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				check_variable = {
					which = local_current_potion_quality
					value >= 0
				}
			}
			
			multiply_variable = {
				which = local_current_potion_quality
				value = 2
			}
		}
		
		change_variable = {
			which = immortality_potion_quality
			which = local_current_potion_quality
		}
		
		trigger_switch = {
			on_trigger = has_character_flag
			
			purifying_ingredient_herb1 = {
				set_character_flag = immortality_potion_contains_ingredient_herb1
			}
			purifying_ingredient_herb2 = {
				set_character_flag = immortality_potion_contains_ingredient_herb2
			}
			purifying_ingredient_herb3 = {
				set_character_flag = immortality_potion_contains_ingredient_herb3
			}
			purifying_ingredient_herb4 = {
				set_character_flag = immortality_potion_contains_ingredient_herb4
			}
			purifying_ingredient_herb5 = {
				set_character_flag = immortality_potion_contains_ingredient_herb5
			}
			purifying_ingredient_herb6 = {
				set_character_flag = immortality_potion_contains_ingredient_herb6
			}
			purifying_ingredient_herb7 = {
				set_character_flag = immortality_potion_contains_ingredient_herb7
			}
			purifying_ingredient_herb8 = {
				set_character_flag = immortality_potion_contains_ingredient_herb8
			}
			purifying_ingredient_herb9 = {
				set_character_flag = immortality_potion_contains_ingredient_herb9
			}
			purifying_ingredient_herb10 = {
				set_character_flag = immortality_potion_contains_ingredient_herb10
			}
			purifying_ingredient_herb11 = {
				set_character_flag = immortality_potion_contains_ingredient_herb11
			}
			purifying_ingredient_herb12 = {
				set_character_flag = immortality_potion_contains_ingredient_herb12
			}
			purifying_ingredient_herb13 = {
				set_character_flag = immortality_potion_contains_ingredient_herb13
			}
			purifying_ingredient_herb14 = {
				set_character_flag = immortality_potion_contains_ingredient_herb14
			}
			purifying_ingredient_herb15 = {
				set_character_flag = immortality_potion_contains_ingredient_herb15
			}
			purifying_ingredient_animal1 = {
				set_character_flag = immortality_potion_contains_ingredient_animal1
			}
			purifying_ingredient_animal2 = {
				set_character_flag = immortality_potion_contains_ingredient_animal2
			}
			purifying_ingredient_animal3 = {
				set_character_flag = immortality_potion_contains_ingredient_animal3
			}
			purifying_ingredient_animal4 = {
				set_character_flag = immortality_potion_contains_ingredient_animal4
			}
			purifying_ingredient_animal5 = {
				set_character_flag = immortality_potion_contains_ingredient_animal5
			}
			purifying_ingredient_animal6 = {
				set_character_flag = immortality_potion_contains_ingredient_animal6
			}
			purifying_ingredient_animal7 = {
				set_character_flag = immortality_potion_contains_ingredient_animal7
			}
			purifying_ingredient_animal8 = {
				set_character_flag = immortality_potion_contains_ingredient_animal8
			}
			purifying_ingredient_animal9 = {
				set_character_flag = immortality_potion_contains_ingredient_animal9
			}
			purifying_ingredient_metal_exotic1 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic1
			}
			purifying_ingredient_metal_exotic2 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic2
			}
			purifying_ingredient_metal_exotic3 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic3
			}
			purifying_ingredient_metal_exotic4 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic4
			}
			purifying_ingredient_metal_exotic5 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic5
			}
			purifying_ingredient_metal_exotic6 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic6
			}
			purifying_ingredient_metal_exotic7 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic7
			}
			purifying_ingredient_metal_exotic8 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic8
			}
			purifying_ingredient_metal_exotic9 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic9
			}
			purifying_ingredient_metal_exotic10 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic10
			}
			purifying_ingredient_metal_exotic11 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic11
			}
			purifying_ingredient_metal_exotic12 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic12
			}
			purifying_ingredient_metal_exotic13 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic13
			}
			purifying_ingredient_metal_exotic14 = {
				set_character_flag = immortality_potion_contains_ingredient_metal_exotic14
			}
			purifying_ingredient_misc_powder_1 = {
				set_character_flag = immortality_potion_contains_ingredient_misc_powder_1
			}
			purifying_ingredient_misc_powder_2 = {
				set_character_flag = immortality_potion_contains_ingredient_misc_powder_2
			}
			purifying_ingredient_misc_powder_3 = {
				set_character_flag = immortality_potion_contains_ingredient_misc_powder_3
			}
			purifying_ingredient_misc_powder_4 = {
				set_character_flag = immortality_potion_contains_ingredient_misc_powder_4
			}
			purifying_ingredient_misc_powder_5 = {
				set_character_flag = immortality_potion_contains_ingredient_misc_powder_5
			}
			purifying_ingredient_mineral_1 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_1
			}
			purifying_ingredient_mineral_2 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_2
			}
			purifying_ingredient_mineral_jade_1 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_jade_1
			}
			purifying_ingredient_mineral_jade_2 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_jade_2
			}
			purifying_ingredient_mineral_jade_3 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_jade_3
			}
			purifying_ingredient_mineral_jade_4 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_jade_4
			}
			purifying_ingredient_mineral_jade_5 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_jade_5
			}
			purifying_ingredient_mineral_jade_6 = {
				set_character_flag = immortality_potion_contains_ingredient_mineral_jade_6
			}
		}
	}
}

invert_immortality_potion_quality_effect = {
	hidden_tooltip = {
		multiply_variable = {
			which = immortality_potion_quality
			value = -1
		}
	}
}

copy_consumed_immortality_potion_ingredient_flags_effect = {
	hidden_tooltip = {
		clear_flags_with_prefix = consumed_immortality_potion_contains_
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_herb1
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_herb1
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_herb2
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_herb2
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_herb3
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_herb3
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_herb4
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_herb4
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_herb5
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_herb5
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_herb6
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_herb6
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_herb7
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_herb7
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_herb8
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_herb8
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_herb9
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_herb9
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_herb10
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_herb10
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_herb11
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_herb11
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_herb12
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_herb12
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_herb13
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_herb13
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_herb14
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_herb14
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_herb15
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_herb15
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_animal1
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_animal1
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_animal2
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_animal2
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_animal3
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_animal3
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_animal4
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_animal4
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_animal5
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_animal5
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_animal6
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_animal6
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_animal7
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_animal7
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_animal8
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_animal8
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_animal9
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_animal9
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_metal_exotic1
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_metal_exotic1
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_metal_exotic2
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_metal_exotic2
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_metal_exotic3
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_metal_exotic3
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_metal_exotic4
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_metal_exotic4
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_metal_exotic5
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_metal_exotic5
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_metal_exotic6
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_metal_exotic6
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_metal_exotic7
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_metal_exotic7
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_metal_exotic8
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_metal_exotic8
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_metal_exotic9
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_metal_exotic9
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_metal_exotic10
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_metal_exotic10
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_metal_exotic11
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_metal_exotic11
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_metal_exotic12
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_metal_exotic12
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_metal_exotic13
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_metal_exotic13
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_metal_exotic14
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_metal_exotic14
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_misc_powder_1
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_misc_powder_1
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_misc_powder_2
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_misc_powder_2
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_misc_powder_3
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_misc_powder_3
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_misc_powder_4
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_misc_powder_4
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_misc_powder_5
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_misc_powder_5
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_mineral_1
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_mineral_1
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_mineral_2
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_mineral_2
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_mineral_jade_1
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_mineral_jade_1
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_mineral_jade_2
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_mineral_jade_2
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_mineral_jade_3
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_mineral_jade_3
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_mineral_jade_4
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_mineral_jade_4
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_mineral_jade_5
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_mineral_jade_5
		}
		
		if = {
			limit = {
				event_target:target_alchemist = {
					has_character_flag = immortality_potion_contains_ingredient_mineral_jade_6
				}
			}
			
			set_character_flag = consumed_immortality_potion_contains_ingredient_mineral_jade_6
		}
	}
}

improve_froms_immortality_potion_actual_effect = {
	hidden_tooltip = {
		if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 100
				}
			}
			
			FROM = {
				change_variable = {
					which = immortality_potion_quality
					value = 5
				}
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 75
				}
			}
			
			FROM = {
				change_variable = {
					which = immortality_potion_quality
					value = 4
				}
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 50
				}
			}
			
			FROM = {
				change_variable = {
					which = immortality_potion_quality
					value = 3
				}
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 25
				}
			}
			
			FROM = {
				change_variable = {
					which = immortality_potion_quality
					value = 2
				}
			}
		}
		
		else = {
			FROM = {
				change_variable = {
					which = immortality_potion_quality
					value = 1
				}
			}
		}
	}
}

improve_froms_immortality_potion_placebo_effect = {
	hidden_tooltip = {
		if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 100
				}
			}
			
			FROM = {
				change_variable = {
					which = immortality_potion_quality
					value = 5
				}
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 75
				}
			}
			
			FROM = {
				change_variable = {
					which = immortality_potion_quality
					value = 4
				}
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 50
				}
			}
			
			FROM = {
				change_variable = {
					which = immortality_potion_quality
					value = 3
				}
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 25
				}
			}
			
			FROM = {
				change_variable = {
					which = immortality_potion_quality
					value = 2
				}
			}
		}
		
		else = {
			FROM = {
				change_variable = {
					which = immortality_potion_quality
					value = 1
				}
			}
		}
	}
}

improve_froms_immortality_potion_poison_effect = {
	hidden_tooltip = {
		if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 100
				}
			}
			
			FROM = {
				change_variable = {
					which = immortality_potion_quality
					value = 5
				}
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 75
				}
			}
			
			FROM = {
				change_variable = {
					which = immortality_potion_quality
					value = 4
				}
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 50
				}
			}
			
			FROM = {
				change_variable = {
					which = immortality_potion_quality
					value = 3
				}
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 25
				}
			}
			
			FROM = {
				change_variable = {
					which = immortality_potion_quality
					value = 2
				}
			}
		}
		
		else = {
			FROM = {
				change_variable = {
					which = immortality_potion_quality
					value = 1
				}
			}
		}
	}
}

worsen_froms_immortality_potion_actual_effect = {
	hidden_tooltip = {
		if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 100
				}
			}
			
			FROM = {
				change_variable = {
					which = immortality_potion_quality
					value = -5
				}
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 75
				}
			}
			
			FROM = {
				change_variable = {
					which = immortality_potion_quality
					value = -4
				}
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 50
				}
			}
			
			FROM = {
				change_variable = {
					which = immortality_potion_quality
					value = -3
				}
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 25
				}
			}
			
			FROM = {
				change_variable = {
					which = immortality_potion_quality
					value = -2
				}
			}
		}
		
		else = {
			FROM = {
				change_variable = {
					which = immortality_potion_quality
					value = -1
				}
			}
		}
	}
}

worsen_froms_immortality_potion_placebo_effect = {
	hidden_tooltip = {
		if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 100
				}
			}
			
			FROM = {
				change_variable = {
					which = immortality_potion_quality
					value = -5
				}
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 75
				}
			}
			
			FROM = {
				change_variable = {
					which = immortality_potion_quality
					value = -4
				}
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 50
				}
			}
			
			FROM = {
				change_variable = {
					which = immortality_potion_quality
					value = -3
				}
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 25
				}
			}
			
			FROM = {
				change_variable = {
					which = immortality_potion_quality
					value = -2
				}
			}
		}
		
		else = {
			FROM = {
				change_variable = {
					which = immortality_potion_quality
					value = -1
				}
			}
		}
	}
}

worsen_froms_immortality_potion_poison_effect = {
	hidden_tooltip = {
		if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 100
				}
			}
			
			FROM = {
				change_variable = {
					which = immortality_potion_quality
					value = -5
				}
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 75
				}
			}
			
			FROM = {
				change_variable = {
					which = immortality_potion_quality
					value = -4
				}
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 50
				}
			}
			
			FROM = {
				change_variable = {
					which = immortality_potion_quality
					value = -3
				}
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 25
				}
			}
			
			FROM = {
				change_variable = {
					which = immortality_potion_quality
					value = -2
				}
			}
		}
		
		else = {
			FROM = {
				change_variable = {
					which = immortality_potion_quality
					value = -1
				}
			}
		}
	}
}

add_random_new_alchemy_book_effect = {
	random_list = {
		25 = {
			trigger = {
				has_global_flag = zhouyi_cantong_qi_exists
				NOT = {
					has_character_flag = immortality_potion_used_zhouyi_cantong_qi
				}
			}
			
			add_artifact = zhouyi_cantong_qi
		}
		25 = {
			trigger = {
				has_global_flag = baopuzi_exists
				NOT = {
					has_character_flag = immortality_potion_used_baopuzi
				}
			}
			
			add_artifact = baopuzi
		}
		25 = {
			trigger = {
				has_global_flag = danjing_yaojue_exists
				NOT = {
					has_character_flag = immortality_potion_used_danjing_yaojue
				}
			}
			
			add_artifact = danjing_yaojue
		}
		25 = {
			trigger = {
				has_global_flag = hongbao_yuanbi_shu_exists
				NOT = {
					has_character_flag = immortality_potion_used_hongbao_yuanbi_shu
				}
			}
			
			add_artifact = hongbao_yuanbi_shu
		}
	}
}

improve_immortality_potion_quality_book_effect = {
	hidden_tooltip = {
		event_target:target_alchemy_book = {
			trigger_switch = {
				on_trigger = artifact_type
				
				zhouyi_cantong_qi = { ROOT = { set_character_flag = immortality_potion_used_zhouyi_cantong_qi } }
				baopuzi = { ROOT = { set_character_flag = immortality_potion_used_baopuzi } }
				danjing_yaojue = { ROOT = { set_character_flag = immortality_potion_used_danjing_yaojue } }
				hongbao_yuanbi_shu = { ROOT = { set_character_flag = immortality_potion_used_hongbao_yuanbi_shu } }
			}
		}
						
		trigger_switch = {
			on_trigger = has_character_flag
			
			brewing_immortality_potion_actual = {
				if = {
					limit = {
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 100
						}
					}
					
					change_variable = {
						which = immortality_potion_quality
						value = 11
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 90
						}
					}
					
					change_variable = {
						which = immortality_potion_quality
						value = 10
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 80
						}
					}
					
					change_variable = {
						which = immortality_potion_quality
						value = 9
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 70
						}
					}
					
					change_variable = {
						which = immortality_potion_quality
						value = 8
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 60
						}
					}
					
					change_variable = {
						which = immortality_potion_quality
						value = 7
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 50
						}
					}
					
					change_variable = {
						which = immortality_potion_quality
						value = 6
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 40
						}
					}
					
					change_variable = {
						which = immortality_potion_quality
						value = 5
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 60
						}
					}
					
					change_variable = {
						which = immortality_potion_quality
						value = 4
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 20
						}
					}
					
					change_variable = {
						which = immortality_potion_quality
						value = 3
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 10
						}
					}
					
					change_variable = {
						which = immortality_potion_quality
						value = 2
					}
				}
				
				else = {
					change_variable = {
						which = immortality_potion_quality
						value = 1
					}
				}
			}
			
			brewing_immortality_potion_placebo = {
				if = {
					limit = {
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 100
						}
					}
					
					change_variable = {
						which = immortality_potion_quality
						value = 11
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 90
						}
					}
					
					change_variable = {
						which = immortality_potion_quality
						value = 10
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 80
						}
					}
					
					change_variable = {
						which = immortality_potion_quality
						value = 9
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 70
						}
					}
					
					change_variable = {
						which = immortality_potion_quality
						value = 8
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 60
						}
					}
					
					change_variable = {
						which = immortality_potion_quality
						value = 7
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 50
						}
					}
					
					change_variable = {
						which = immortality_potion_quality
						value = 6
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 40
						}
					}
					
					change_variable = {
						which = immortality_potion_quality
						value = 5
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 60
						}
					}
					
					change_variable = {
						which = immortality_potion_quality
						value = 4
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 20
						}
					}
					
					change_variable = {
						which = immortality_potion_quality
						value = 3
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_healing_knowledge
							value >= 10
						}
					}
					
					change_variable = {
						which = immortality_potion_quality
						value = 2
					}
				}
				
				else = {
					change_variable = {
						which = immortality_potion_quality
						value = 1
					}
				}
			}
			
			brewing_immortality_potion_poison = {
				if = {
					limit = {
						check_variable = {
							which = alchemist_poison_knowledge
							value >= 100
						}
					}
					
					change_variable = {
						which = immortality_potion_quality
						value = 11
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_poison_knowledge
							value >= 90
						}
					}
					
					change_variable = {
						which = immortality_potion_quality
						value = 10
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_poison_knowledge
							value >= 80
						}
					}
					
					change_variable = {
						which = immortality_potion_quality
						value = 9
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_poison_knowledge
							value >= 70
						}
					}
					
					change_variable = {
						which = immortality_potion_quality
						value = 8
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_poison_knowledge
							value >= 60
						}
					}
					
					change_variable = {
						which = immortality_potion_quality
						value = 7
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_poison_knowledge
							value >= 50
						}
					}
					
					change_variable = {
						which = immortality_potion_quality
						value = 6
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_poison_knowledge
							value >= 40
						}
					}
					
					change_variable = {
						which = immortality_potion_quality
						value = 5
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_poison_knowledge
							value >= 60
						}
					}
					
					change_variable = {
						which = immortality_potion_quality
						value = 4
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_poison_knowledge
							value >= 20
						}
					}
					
					change_variable = {
						which = immortality_potion_quality
						value = 3
					}
				}
				
				else_if = {
					limit = {
						check_variable = {
							which = alchemist_poison_knowledge
							value >= 10
						}
					}
					
					change_variable = {
						which = immortality_potion_quality
						value = 2
					}
				}
				
				else = {
					change_variable = {
						which = immortality_potion_quality
						value = 1
					}
				}
			}
		}
	}
}

add_target_immortality_potion_ingredient_effect = {
	hidden_tooltip = {
		trigger_switch = {
			on_trigger = has_character_flag
			
			immortality_potion_needs_ingredient_herb1 = { add_artifact = ingredient_herb1 }
			immortality_potion_needs_ingredient_herb2 = { add_artifact = ingredient_herb2 }
			immortality_potion_needs_ingredient_herb3 = { add_artifact = ingredient_herb3 }
			immortality_potion_needs_ingredient_herb4 = { add_artifact = ingredient_herb4 }
			immortality_potion_needs_ingredient_herb5 = { add_artifact = ingredient_herb5 }
			immortality_potion_needs_ingredient_herb6 = { add_artifact = ingredient_herb6 }
			immortality_potion_needs_ingredient_herb7 = { add_artifact = ingredient_herb7 }
			immortality_potion_needs_ingredient_herb8 = { add_artifact = ingredient_herb8 }
			immortality_potion_needs_ingredient_herb9 = { add_artifact = ingredient_herb9 }
			immortality_potion_needs_ingredient_herb10 = { add_artifact = ingredient_herb10 }
			immortality_potion_needs_ingredient_herb11 = { add_artifact = ingredient_herb11 }
			immortality_potion_needs_ingredient_herb12 = { add_artifact = ingredient_herb12 }
			immortality_potion_needs_ingredient_herb13 = { add_artifact = ingredient_herb13 }
			immortality_potion_needs_ingredient_herb14 = { add_artifact = ingredient_herb14 }
			immortality_potion_needs_ingredient_herb15 = { add_artifact = ingredient_herb15 }
			immortality_potion_needs_ingredient_animal1 = { add_artifact = ingredient_animal1 }
			immortality_potion_needs_ingredient_animal2 = { add_artifact = ingredient_animal2 }
			immortality_potion_needs_ingredient_animal3 = { add_artifact = ingredient_animal3 }
			immortality_potion_needs_ingredient_animal4 = { add_artifact = ingredient_animal4 }
			immortality_potion_needs_ingredient_animal5 = { add_artifact = ingredient_animal5 }
			immortality_potion_needs_ingredient_animal6 = { add_artifact = ingredient_animal6 }
			immortality_potion_needs_ingredient_animal7 = { add_artifact = ingredient_animal7 }
			immortality_potion_needs_ingredient_animal8 = { add_artifact = ingredient_animal8 }
			immortality_potion_needs_ingredient_animal9 = { add_artifact = ingredient_animal9 }
			immortality_potion_needs_ingredient_metal_exotic1 = { add_artifact = ingredient_metal_exotic1 }
			immortality_potion_needs_ingredient_metal_exotic2 = { add_artifact = ingredient_metal_exotic2 }
			immortality_potion_needs_ingredient_metal_exotic3 = { add_artifact = ingredient_metal_exotic3 }
			immortality_potion_needs_ingredient_metal_exotic4 = { add_artifact = ingredient_metal_exotic4 }
			immortality_potion_needs_ingredient_metal_exotic5 = { add_artifact = ingredient_metal_exotic5 }
			immortality_potion_needs_ingredient_metal_exotic6 = { add_artifact = ingredient_metal_exotic6 }
			immortality_potion_needs_ingredient_metal_exotic7 = { add_artifact = ingredient_metal_exotic7 }
			immortality_potion_needs_ingredient_metal_exotic8 = { add_artifact = ingredient_metal_exotic8 }
			immortality_potion_needs_ingredient_metal_exotic9 = { add_artifact = ingredient_metal_exotic9 }
			immortality_potion_needs_ingredient_metal_exotic10 = { add_artifact = ingredient_metal_exotic10 }
			immortality_potion_needs_ingredient_metal_exotic11 = { add_artifact = ingredient_metal_exotic11 }
			immortality_potion_needs_ingredient_metal_exotic12 = { add_artifact = ingredient_metal_exotic12 }
			immortality_potion_needs_ingredient_metal_exotic13 = { add_artifact = ingredient_metal_exotic13 }
			immortality_potion_needs_ingredient_metal_exotic14 = { add_artifact = ingredient_metal_exotic14 }
			immortality_potion_needs_ingredient_misc_powder_1 = { add_artifact = ingredient_misc_powder_1 }
			immortality_potion_needs_ingredient_misc_powder_2 = { add_artifact = ingredient_misc_powder_2 }
			immortality_potion_needs_ingredient_misc_powder_3 = { add_artifact = ingredient_misc_powder_3 }
			immortality_potion_needs_ingredient_misc_powder_4 = { add_artifact = ingredient_misc_powder_4 }
			immortality_potion_needs_ingredient_misc_powder_5 = { add_artifact = ingredient_misc_powder_5 }
			immortality_potion_needs_ingredient_mineral_1 = { add_artifact = ingredient_mineral_1 }
			immortality_potion_needs_ingredient_mineral_2 = { add_artifact = ingredient_mineral_2 }
			immortality_potion_needs_ingredient_mineral_jade_1 = { add_artifact = ingredient_mineral_jade_1 }
			immortality_potion_needs_ingredient_mineral_jade_2 = { add_artifact = ingredient_mineral_jade_2 }
			immortality_potion_needs_ingredient_mineral_jade_3 = { add_artifact = ingredient_mineral_jade_3 }
			immortality_potion_needs_ingredient_mineral_jade_4 = { add_artifact = ingredient_mineral_jade_4 }
			immortality_potion_needs_ingredient_mineral_jade_5 = { add_artifact = ingredient_mineral_jade_5 }
			immortality_potion_needs_ingredient_mineral_jade_6 = { add_artifact = ingredient_mineral_jade_6 }
		}
		
		new_artifact = {
			save_event_target_as = target_immortality_potion_ingredient
		}
	}
}

randomize_immortality_potion_ingredient_effect = {
	random_list = {
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_herb1
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_herb1
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_herb2
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_herb2
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_herb3
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_herb3
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_herb4
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_herb4
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_herb5
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_herb5
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_herb6
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_herb6
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_herb7
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_herb7
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_herb8
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_herb8
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_herb9
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_herb9
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_herb10
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_herb10
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_herb11
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_herb11
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_herb12
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_herb12
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_herb13
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_herb13
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_herb14
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_herb14
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_herb15
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_herb15
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_animal1
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_animal1
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_animal2
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_animal2
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_animal3
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_animal3
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_animal4
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_animal4
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_animal5
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_animal5
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_animal6
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_animal6
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_animal7
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_animal7
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_animal8
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_animal8
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_animal9
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_animal9
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_metal_exotic1
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_metal_exotic1
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_metal_exotic2
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_metal_exotic2
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_metal_exotic3
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_metal_exotic3
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_metal_exotic4
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_metal_exotic4
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_metal_exotic5
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_metal_exotic5
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_metal_exotic6
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_metal_exotic6
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_metal_exotic7
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_metal_exotic7
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_metal_exotic8
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_metal_exotic8
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_metal_exotic9
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_metal_exotic9
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_metal_exotic10
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_metal_exotic10
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_metal_exotic11
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_metal_exotic11
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_metal_exotic12
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_metal_exotic12
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_metal_exotic13
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_metal_exotic13
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_metal_exotic14
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_metal_exotic14
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_misc_powder_1
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_misc_powder_1
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_misc_powder_2
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_misc_powder_2
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_misc_powder_3
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_misc_powder_3
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_misc_powder_4
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_misc_powder_4
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_misc_powder_5
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_misc_powder_5
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_mineral_1
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_mineral_1
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_mineral_2
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_mineral_2
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_mineral_jade_1
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_mineral_jade_1
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_mineral_jade_2
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_mineral_jade_2
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_mineral_jade_3
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_mineral_jade_3
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_mineral_jade_4
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_mineral_jade_4
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_mineral_jade_5
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_mineral_jade_5
		}
		1 = {
			trigger = {
				NOT = {
					has_character_flag = immortality_potion_contains_ingredient_mineral_jade_6
				}
			}
			
			set_character_flag = immortality_potion_needs_ingredient_mineral_jade_6
		}
	}
}

finalize_immortality_potion_setup_actual_effect = {
	hidden_tooltip = {
		# Physician boost
		if = {
			limit = {
				trait = physician
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 10
			}
		}
		
		# Learning lifestyles
		if = {
			limit = {
				trait = mystic
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 5
			}
		}
		
		else_if = {
			limit = {
				trait = scholar
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 5
			}
		}
		
		else_if = {
			limit = {
				trait = theologian
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 2
			}
		}
		
		# Erudite
		if = {
			limit = {
				trait = erudite
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 2
			}
		}
		
		# Intelligence
		if = {
			limit = {
				is_smart_trigger = yes
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 2
			}
		}
		
		else_if = {
			limit = {
				is_dumb_trigger = yes
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = -2
			}
		}
		
		# Diligent/Slothful
		if = {
			limit = {
				trait = diligent
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 2
			}
		}
		
		else_if = {
			limit = {
				trait = slothful
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = -2
			}
		}
		
		# Any equipped alchemy books (generally a smaller boost than for the book event)
		random_artifact = {
			limit = {
				is_artifact_equipped = yes
				artifact_type = zhouyi_cantong_qi
			}
			
			ROOT = {
				change_variable = {
					which = immortality_potion_quality
					value = 2
				}
			}
		}
		
		random_artifact = {
			limit = {
				is_artifact_equipped = yes
				artifact_type = baopuzi
			}
			
			ROOT = {
				change_variable = {
					which = immortality_potion_quality
					value = 2
				}
			}
		}
		
		random_artifact = {
			limit = {
				is_artifact_equipped = yes
				artifact_type = danjing_yaojue
			}
			
			ROOT = {
				change_variable = {
					which = immortality_potion_quality
					value = 2
				}
			}
		}
		
		random_artifact = {
			limit = {
				is_artifact_equipped = yes
				artifact_type = hongbao_yuanbi_shu
			}
			
			ROOT = {
				change_variable = {
					which = immortality_potion_quality
					value = 2
				}
			}
		}
		
		# Alchemy skill
		if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 200
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 41
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 195
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 40
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 190
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 39
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 185
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 38
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 180
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 37
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 175
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 36
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 170
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 35
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 165
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 34
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 160
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 33
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 155
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 32
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 150
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 31
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 145
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 30
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 140
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 29
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 135
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 28
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 130
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 27
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 125
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 26
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 120
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 25
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 115
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 24
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 110
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 23
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 105
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 22
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 100
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 21
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 95
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 20
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 90
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 19
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 85
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 18
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 80
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 17
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 75
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 16
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 70
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 15
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 65
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 14
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 60
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 13
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 55
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 12
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 50
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 11
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 45
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 10
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 40
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 9
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 35
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 8
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 30
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 7
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 25
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 6
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 20
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 5
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 15
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 4
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 10
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 3
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 5
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 2
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 0
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 100
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 11
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 90
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 10
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 80
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 9
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 70
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 8
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 60
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 7
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 50
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 6
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 40
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 5
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 30
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 4
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 20
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 3
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 10
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 2
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 0
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		# Learning
		if = {
			limit = {
				learning >= 50
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 10
			}
		}
		
		else_if = {
			limit = {
				learning >= 45
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 9
			}
		}
		
		else_if = {
			limit = {
				learning >= 40
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 8
			}
		}
		
		else_if = {
			limit = {
				learning >= 35
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 7
			}
		}
		
		else_if = {
			limit = {
				learning >= 30
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 6
			}
		}
		
		else_if = {
			limit = {
				learning >= 25
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 5
			}
		}
		
		else_if = {
			limit = {
				learning >= 20
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 4
			}
		}
		
		else_if = {
			limit = {
				learning >= 15
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 3
			}
		}
		
		else_if = {
			limit = {
				learning >= 10
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 2
			}
		}
		
		else_if = {
			limit = {
				learning >= 5
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		# Familiarity with specific ingredients
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_herb1
				has_character_flag = experimented_with_ingredient_herb1
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_herb2
				has_character_flag = experimented_with_ingredient_herb2
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_herb3
				has_character_flag = experimented_with_ingredient_herb3
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_herb4
				has_character_flag = experimented_with_ingredient_herb4
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_herb5
				has_character_flag = experimented_with_ingredient_herb5
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_herb6
				has_character_flag = experimented_with_ingredient_herb6
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_herb7
				has_character_flag = experimented_with_ingredient_herb7
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_herb8
				has_character_flag = experimented_with_ingredient_herb8
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_herb9
				has_character_flag = experimented_with_ingredient_herb9
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_herb10
				has_character_flag = experimented_with_ingredient_herb10
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_herb11
				has_character_flag = experimented_with_ingredient_herb11
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_herb12
				has_character_flag = experimented_with_ingredient_herb12
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_herb13
				has_character_flag = experimented_with_ingredient_herb13
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_herb14
				has_character_flag = experimented_with_ingredient_herb14
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_herb15
				has_character_flag = experimented_with_ingredient_herb15
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_animal1
				has_character_flag = experimented_with_ingredient_animal1
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_animal2
				has_character_flag = experimented_with_ingredient_animal2
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_animal3
				has_character_flag = experimented_with_ingredient_animal3
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_animal4
				has_character_flag = experimented_with_ingredient_animal4
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_animal5
				has_character_flag = experimented_with_ingredient_animal5
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_animal6
				has_character_flag = experimented_with_ingredient_animal6
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_animal7
				has_character_flag = experimented_with_ingredient_animal7
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_animal8
				has_character_flag = experimented_with_ingredient_animal8
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_animal9
				has_character_flag = experimented_with_ingredient_animal9
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_metal_exotic1
				has_character_flag = experimented_with_ingredient_metal_exotic1
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_metal_exotic2
				has_character_flag = experimented_with_ingredient_metal_exotic2
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_metal_exotic3
				has_character_flag = experimented_with_ingredient_metal_exotic3
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_metal_exotic4
				has_character_flag = experimented_with_ingredient_metal_exotic4
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_metal_exotic5
				has_character_flag = experimented_with_ingredient_metal_exotic5
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_metal_exotic6
				has_character_flag = experimented_with_ingredient_metal_exotic6
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_metal_exotic7
				has_character_flag = experimented_with_ingredient_metal_exotic7
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_metal_exotic8
				has_character_flag = experimented_with_ingredient_metal_exotic8
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_metal_exotic9
				has_character_flag = experimented_with_ingredient_metal_exotic9
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_metal_exotic10
				has_character_flag = experimented_with_ingredient_metal_exotic10
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_metal_exotic11
				has_character_flag = experimented_with_ingredient_metal_exotic11
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_metal_exotic12
				has_character_flag = experimented_with_ingredient_metal_exotic12
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_metal_exotic13
				has_character_flag = experimented_with_ingredient_metal_exotic13
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_metal_exotic14
				has_character_flag = experimented_with_ingredient_metal_exotic14
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_misc_powder_1
				has_character_flag = experimented_with_ingredient_misc_powder_1
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_misc_powder_2
				has_character_flag = experimented_with_ingredient_misc_powder_2
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_misc_powder_3
				has_character_flag = experimented_with_ingredient_misc_powder_3
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_misc_powder_4
				has_character_flag = experimented_with_ingredient_misc_powder_4
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_misc_powder_5
				has_character_flag = experimented_with_ingredient_misc_powder_5
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_mineral_1
				has_character_flag = experimented_with_ingredient_mineral_1
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_mineral_2
				has_character_flag = experimented_with_ingredient_mineral_2
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_mineral_jade_1
				has_character_flag = experimented_with_ingredient_mineral_jade_1
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_mineral_jade_2
				has_character_flag = experimented_with_ingredient_mineral_jade_2
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_mineral_jade_3
				has_character_flag = experimented_with_ingredient_mineral_jade_3
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_mineral_jade_4
				has_character_flag = experimented_with_ingredient_mineral_jade_4
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_mineral_jade_5
				has_character_flag = experimented_with_ingredient_mineral_jade_5
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_mineral_jade_6
				has_character_flag = experimented_with_ingredient_mineral_jade_6
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		# Laboratory
		if = {
			limit = {
				has_character_modifier = normal_laboratory
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		else_if = {
			limit = {
				has_character_modifier = good_laboratory
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 2
			}
		}
		
		else_if = {
			limit = {
				has_character_modifier = great_laboratory
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 5
			}
		}
		
		else_if = {
			limit = {
				has_character_modifier = best_laboratory
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 10
			}
		}
	}
}

finalize_immortality_potion_setup_placebo_effect = {
	hidden_tooltip = {
		# Physician boost
		if = {
			limit = {
				trait = physician
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 10
			}
		}
		
		# Learning lifestyles
		if = {
			limit = {
				trait = mystic
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 2
			}
		}
		
		else_if = {
			limit = {
				trait = scholar
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 5
			}
		}
		
		else_if = {
			limit = {
				trait = theologian
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 2
			}
		}
		
		# Erudite
		if = {
			limit = {
				trait = erudite
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 2
			}
		}
		
		# Intelligence
		if = {
			limit = {
				is_smart_trigger = yes
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 2
			}
		}
		
		else_if = {
			limit = {
				is_dumb_trigger = yes
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = -2
			}
		}
		
		# Diligent/Slothful
		if = {
			limit = {
				trait = diligent
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 2
			}
		}
		
		else_if = {
			limit = {
				trait = slothful
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = -2
			}
		}
		
		# Any equipped alchemy books (generally a smaller boost than for the book event)
		random_artifact = {
			limit = {
				is_artifact_equipped = yes
				artifact_type = zhouyi_cantong_qi
			}
			
			ROOT = {
				change_variable = {
					which = immortality_potion_quality
					value = 2
				}
			}
		}
		
		random_artifact = {
			limit = {
				is_artifact_equipped = yes
				artifact_type = baopuzi
			}
			
			ROOT = {
				change_variable = {
					which = immortality_potion_quality
					value = 2
				}
			}
		}
		
		random_artifact = {
			limit = {
				is_artifact_equipped = yes
				artifact_type = danjing_yaojue
			}
			
			ROOT = {
				change_variable = {
					which = immortality_potion_quality
					value = 2
				}
			}
		}
		
		random_artifact = {
			limit = {
				is_artifact_equipped = yes
				artifact_type = hongbao_yuanbi_shu
			}
			
			ROOT = {
				change_variable = {
					which = immortality_potion_quality
					value = 2
				}
			}
		}
		
		# Alchemy skill
		if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 200
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 41
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 195
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 40
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 190
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 39
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 185
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 38
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 180
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 37
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 175
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 36
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 170
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 35
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 165
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 34
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 160
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 33
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 155
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 32
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 150
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 31
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 145
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 30
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 140
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 29
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 135
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 28
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 130
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 27
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 125
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 26
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 120
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 25
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 115
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 24
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 110
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 23
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 105
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 22
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 100
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 21
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 95
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 20
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 90
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 19
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 85
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 18
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 80
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 17
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 75
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 16
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 70
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 15
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 65
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 14
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 60
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 13
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 55
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 12
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 50
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 11
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 45
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 10
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 40
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 9
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 35
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 8
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 30
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 7
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 25
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 6
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 20
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 5
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 15
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 4
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 10
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 3
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 5
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 2
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 0
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 100
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 11
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 90
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 10
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 80
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 9
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 70
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 8
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 60
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 7
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 50
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 6
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 40
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 5
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 30
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 4
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 20
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 3
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 10
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 2
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 0
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		# Learning
		if = {
			limit = {
				learning >= 50
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 10
			}
		}
		
		else_if = {
			limit = {
				learning >= 45
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 9
			}
		}
		
		else_if = {
			limit = {
				learning >= 40
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 8
			}
		}
		
		else_if = {
			limit = {
				learning >= 35
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 7
			}
		}
		
		else_if = {
			limit = {
				learning >= 30
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 6
			}
		}
		
		else_if = {
			limit = {
				learning >= 25
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 5
			}
		}
		
		else_if = {
			limit = {
				learning >= 20
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 4
			}
		}
		
		else_if = {
			limit = {
				learning >= 15
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 3
			}
		}
		
		else_if = {
			limit = {
				learning >= 10
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 2
			}
		}
		
		else_if = {
			limit = {
				learning >= 5
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		# Familiarity with specific ingredients
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_herb1
				has_character_flag = experimented_with_ingredient_herb1
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_herb2
				has_character_flag = experimented_with_ingredient_herb2
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_herb3
				has_character_flag = experimented_with_ingredient_herb3
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_herb4
				has_character_flag = experimented_with_ingredient_herb4
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_herb5
				has_character_flag = experimented_with_ingredient_herb5
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_herb6
				has_character_flag = experimented_with_ingredient_herb6
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_herb7
				has_character_flag = experimented_with_ingredient_herb7
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_herb8
				has_character_flag = experimented_with_ingredient_herb8
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_herb9
				has_character_flag = experimented_with_ingredient_herb9
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_herb10
				has_character_flag = experimented_with_ingredient_herb10
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_herb11
				has_character_flag = experimented_with_ingredient_herb11
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_herb12
				has_character_flag = experimented_with_ingredient_herb12
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_herb13
				has_character_flag = experimented_with_ingredient_herb13
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_herb14
				has_character_flag = experimented_with_ingredient_herb14
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_herb15
				has_character_flag = experimented_with_ingredient_herb15
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_animal1
				has_character_flag = experimented_with_ingredient_animal1
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_animal2
				has_character_flag = experimented_with_ingredient_animal2
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_animal3
				has_character_flag = experimented_with_ingredient_animal3
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_animal4
				has_character_flag = experimented_with_ingredient_animal4
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_animal5
				has_character_flag = experimented_with_ingredient_animal5
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_animal6
				has_character_flag = experimented_with_ingredient_animal6
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_animal7
				has_character_flag = experimented_with_ingredient_animal7
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_animal8
				has_character_flag = experimented_with_ingredient_animal8
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_animal9
				has_character_flag = experimented_with_ingredient_animal9
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_metal_exotic1
				has_character_flag = experimented_with_ingredient_metal_exotic1
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_metal_exotic2
				has_character_flag = experimented_with_ingredient_metal_exotic2
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_metal_exotic3
				has_character_flag = experimented_with_ingredient_metal_exotic3
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_metal_exotic4
				has_character_flag = experimented_with_ingredient_metal_exotic4
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_metal_exotic5
				has_character_flag = experimented_with_ingredient_metal_exotic5
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_metal_exotic6
				has_character_flag = experimented_with_ingredient_metal_exotic6
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_metal_exotic7
				has_character_flag = experimented_with_ingredient_metal_exotic7
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_metal_exotic8
				has_character_flag = experimented_with_ingredient_metal_exotic8
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_metal_exotic9
				has_character_flag = experimented_with_ingredient_metal_exotic9
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_metal_exotic10
				has_character_flag = experimented_with_ingredient_metal_exotic10
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_metal_exotic11
				has_character_flag = experimented_with_ingredient_metal_exotic11
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_metal_exotic12
				has_character_flag = experimented_with_ingredient_metal_exotic12
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_metal_exotic13
				has_character_flag = experimented_with_ingredient_metal_exotic13
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_metal_exotic14
				has_character_flag = experimented_with_ingredient_metal_exotic14
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_misc_powder_1
				has_character_flag = experimented_with_ingredient_misc_powder_1
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_misc_powder_2
				has_character_flag = experimented_with_ingredient_misc_powder_2
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_misc_powder_3
				has_character_flag = experimented_with_ingredient_misc_powder_3
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_misc_powder_4
				has_character_flag = experimented_with_ingredient_misc_powder_4
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_misc_powder_5
				has_character_flag = experimented_with_ingredient_misc_powder_5
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_mineral_1
				has_character_flag = experimented_with_ingredient_mineral_1
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_mineral_2
				has_character_flag = experimented_with_ingredient_mineral_2
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_mineral_jade_1
				has_character_flag = experimented_with_ingredient_mineral_jade_1
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_mineral_jade_2
				has_character_flag = experimented_with_ingredient_mineral_jade_2
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_mineral_jade_3
				has_character_flag = experimented_with_ingredient_mineral_jade_3
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_mineral_jade_4
				has_character_flag = experimented_with_ingredient_mineral_jade_4
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_mineral_jade_5
				has_character_flag = experimented_with_ingredient_mineral_jade_5
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_mineral_jade_6
				has_character_flag = experimented_with_ingredient_mineral_jade_6
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		# Laboratory
		if = {
			limit = {
				has_character_modifier = normal_laboratory
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		else_if = {
			limit = {
				has_character_modifier = good_laboratory
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 2
			}
		}
		
		else_if = {
			limit = {
				has_character_modifier = great_laboratory
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 5
			}
		}
		
		else_if = {
			limit = {
				has_character_modifier = best_laboratory
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 10
			}
		}
	}
}

finalize_immortality_potion_setup_poison_effect = {
	hidden_tooltip = {
		# Physician boost
		if = {
			limit = {
				trait = physician
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 5
			}
		}
		
		# Learning lifestyles
		if = {
			limit = {
				trait = mystic
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 2
			}
		}
		
		else_if = {
			limit = {
				trait = scholar
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 5
			}
		}
		
		else_if = {
			limit = {
				trait = theologian
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 2
			}
		}
		
		# Master Schemer
		if = {
			limit = {
				trait = master_schemer
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 10
			}
		}
		
		# Erudite
		if = {
			limit = {
				trait = erudite
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 2
			}
		}
		
		# Intelligence
		if = {
			limit = {
				is_smart_trigger = yes
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 2
			}
		}
		
		else_if = {
			limit = {
				is_dumb_trigger = yes
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = -2
			}
		}
		
		# Diligent/Slothful
		if = {
			limit = {
				trait = diligent
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 2
			}
		}
		
		else_if = {
			limit = {
				trait = slothful
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = -2
			}
		}
		
		# Any equipped alchemy books (generally a smaller boost than for the book event)
		random_artifact = {
			limit = {
				is_artifact_equipped = yes
				artifact_type = zhouyi_cantong_qi
			}
			
			ROOT = {
				change_variable = {
					which = immortality_potion_quality
					value = 2
				}
			}
		}
		
		random_artifact = {
			limit = {
				is_artifact_equipped = yes
				artifact_type = baopuzi
			}
			
			ROOT = {
				change_variable = {
					which = immortality_potion_quality
					value = 2
				}
			}
		}
		
		random_artifact = {
			limit = {
				is_artifact_equipped = yes
				artifact_type = danjing_yaojue
			}
			
			ROOT = {
				change_variable = {
					which = immortality_potion_quality
					value = 2
				}
			}
		}
		
		random_artifact = {
			limit = {
				is_artifact_equipped = yes
				artifact_type = hongbao_yuanbi_shu
			}
			
			ROOT = {
				change_variable = {
					which = immortality_potion_quality
					value = 2
				}
			}
		}
		
		# Alchemy skill
		if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 200
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 41
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 195
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 40
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 190
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 39
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 185
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 38
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 180
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 37
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 175
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 36
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 170
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 35
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 165
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 34
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 160
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 33
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 155
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 32
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 150
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 31
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 145
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 30
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 140
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 29
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 135
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 28
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 130
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 27
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 125
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 26
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 120
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 25
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 115
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 24
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 110
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 23
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 105
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 22
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 100
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 21
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 95
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 20
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 90
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 19
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 85
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 18
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 80
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 17
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 75
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 16
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 70
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 15
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 65
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 14
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 60
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 13
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 55
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 12
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 50
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 11
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 45
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 10
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 40
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 9
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 35
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 8
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 30
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 7
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 25
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 6
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 20
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 5
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 15
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 4
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 10
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 3
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 5
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 2
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_poison_knowledge
					value >= 0
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 100
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 11
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 90
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 10
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 80
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 9
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 70
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 8
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 60
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 7
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 50
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 6
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 40
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 5
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 30
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 4
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 20
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 3
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 10
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 2
			}
		}
		
		else_if = {
			limit = {
				check_variable = {
					which = alchemist_healing_knowledge
					value >= 0
				}
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		# Intrigue
		if = {
			limit = {
				intrigue >= 50
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 10
			}
		}
		
		else_if = {
			limit = {
				intrigue >= 45
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 9
			}
		}
		
		else_if = {
			limit = {
				intrigue >= 40
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 8
			}
		}
		
		else_if = {
			limit = {
				intrigue >= 35
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 7
			}
		}
		
		else_if = {
			limit = {
				intrigue >= 30
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 6
			}
		}
		
		else_if = {
			limit = {
				intrigue >= 25
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 5
			}
		}
		
		else_if = {
			limit = {
				intrigue >= 20
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 4
			}
		}
		
		else_if = {
			limit = {
				intrigue >= 15
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 3
			}
		}
		
		else_if = {
			limit = {
				intrigue >= 10
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 2
			}
		}
		
		else_if = {
			limit = {
				intrigue >= 5
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		# Familiarity with specific ingredients
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_herb1
				has_character_flag = experimented_with_ingredient_herb1
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_herb2
				has_character_flag = experimented_with_ingredient_herb2
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_herb3
				has_character_flag = experimented_with_ingredient_herb3
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_herb4
				has_character_flag = experimented_with_ingredient_herb4
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_herb5
				has_character_flag = experimented_with_ingredient_herb5
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_herb6
				has_character_flag = experimented_with_ingredient_herb6
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_herb7
				has_character_flag = experimented_with_ingredient_herb7
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_herb8
				has_character_flag = experimented_with_ingredient_herb8
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_herb9
				has_character_flag = experimented_with_ingredient_herb9
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_herb10
				has_character_flag = experimented_with_ingredient_herb10
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_herb11
				has_character_flag = experimented_with_ingredient_herb11
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_herb12
				has_character_flag = experimented_with_ingredient_herb12
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_herb13
				has_character_flag = experimented_with_ingredient_herb13
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_herb14
				has_character_flag = experimented_with_ingredient_herb14
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_herb15
				has_character_flag = experimented_with_ingredient_herb15
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_animal1
				has_character_flag = experimented_with_ingredient_animal1
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_animal2
				has_character_flag = experimented_with_ingredient_animal2
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_animal3
				has_character_flag = experimented_with_ingredient_animal3
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_animal4
				has_character_flag = experimented_with_ingredient_animal4
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_animal5
				has_character_flag = experimented_with_ingredient_animal5
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_animal6
				has_character_flag = experimented_with_ingredient_animal6
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_animal7
				has_character_flag = experimented_with_ingredient_animal7
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_animal8
				has_character_flag = experimented_with_ingredient_animal8
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_animal9
				has_character_flag = experimented_with_ingredient_animal9
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_metal_exotic1
				has_character_flag = experimented_with_ingredient_metal_exotic1
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_metal_exotic2
				has_character_flag = experimented_with_ingredient_metal_exotic2
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_metal_exotic3
				has_character_flag = experimented_with_ingredient_metal_exotic3
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_metal_exotic4
				has_character_flag = experimented_with_ingredient_metal_exotic4
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_metal_exotic5
				has_character_flag = experimented_with_ingredient_metal_exotic5
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_metal_exotic6
				has_character_flag = experimented_with_ingredient_metal_exotic6
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_metal_exotic7
				has_character_flag = experimented_with_ingredient_metal_exotic7
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_metal_exotic8
				has_character_flag = experimented_with_ingredient_metal_exotic8
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_metal_exotic9
				has_character_flag = experimented_with_ingredient_metal_exotic9
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_metal_exotic10
				has_character_flag = experimented_with_ingredient_metal_exotic10
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_metal_exotic11
				has_character_flag = experimented_with_ingredient_metal_exotic11
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_metal_exotic12
				has_character_flag = experimented_with_ingredient_metal_exotic12
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_metal_exotic13
				has_character_flag = experimented_with_ingredient_metal_exotic13
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_metal_exotic14
				has_character_flag = experimented_with_ingredient_metal_exotic14
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_misc_powder_1
				has_character_flag = experimented_with_ingredient_misc_powder_1
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_misc_powder_2
				has_character_flag = experimented_with_ingredient_misc_powder_2
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_misc_powder_3
				has_character_flag = experimented_with_ingredient_misc_powder_3
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_misc_powder_4
				has_character_flag = experimented_with_ingredient_misc_powder_4
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_misc_powder_5
				has_character_flag = experimented_with_ingredient_misc_powder_5
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_mineral_1
				has_character_flag = experimented_with_ingredient_mineral_1
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_mineral_2
				has_character_flag = experimented_with_ingredient_mineral_2
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_mineral_jade_1
				has_character_flag = experimented_with_ingredient_mineral_jade_1
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_mineral_jade_2
				has_character_flag = experimented_with_ingredient_mineral_jade_2
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_mineral_jade_3
				has_character_flag = experimented_with_ingredient_mineral_jade_3
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_mineral_jade_4
				has_character_flag = experimented_with_ingredient_mineral_jade_4
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_mineral_jade_5
				has_character_flag = experimented_with_ingredient_mineral_jade_5
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		if = {
			limit = {
				has_character_flag = immortality_potion_contains_ingredient_mineral_jade_6
				has_character_flag = experimented_with_ingredient_mineral_jade_6
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		# Laboratory
		if = {
			limit = {
				has_character_modifier = normal_laboratory
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 1
			}
		}
		
		else_if = {
			limit = {
				has_character_modifier = good_laboratory
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 2
			}
		}
		
		else_if = {
			limit = {
				has_character_modifier = great_laboratory
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 5
			}
		}
		
		else_if = {
			limit = {
				has_character_modifier = best_laboratory
			}
			
			change_variable = {
				which = immortality_potion_quality
				value = 10
			}
		}
	}
}

determine_final_immortality_potion_actual_outcome_effect = {
	random_list = {
		1 = {
			trigger = {
				check_variable = {
					which = consumed_immortality_potion_quality
					value >= 100
				}
				NOT = {
					has_game_rule = {
						name = supernatural_events
						value = off
					}
				}
			}
			
			set_character_flag = consumed_immortality_potion_immortality
		}
		
		50 = {
			trigger = {
				check_variable = {
					which = consumed_immortality_potion_quality
					value >= 0
				}
			}
			
			mult_modifier = {
				factor = 0.1
				check_variable = {
					which = consumed_immortality_potion_quality
					value < 25
				}
			}
			
			mult_modifier = {
				factor = 0.1
				check_variable = {
					which = consumed_immortality_potion_quality
					value >= 100
				}
			}
			
			set_character_flag = consumed_immortality_potion_health
		}
		
		100 = {
			trigger = {
				check_variable = {
					which = consumed_immortality_potion_quality
					value < 75
				}
			}
			
			mult_modifier = {
				factor = 0.5
				check_variable = {
					which = consumed_immortality_potion_quality
					value < 25
				}
			}
			
			mult_modifier = {
				factor = 0.2
				check_variable = {
					which = consumed_immortality_potion_quality
					value < 0
				}
			}
			
			set_character_flag = consumed_immortality_potion_nothing
		}
		
		100 = {
			trigger = {
				check_variable = {
					which = consumed_immortality_potion_quality
					value < 50
				}
			}
			
			mult_modifier = {
				factor = 2
				check_variable = {
					which = consumed_immortality_potion_quality
					value < 0
				}
			}
			
			set_character_flag = consumed_immortality_potion_harmful
		}
		
		50 = {
			mult_modifier = {
				factor = 2
				has_character_flag = consumed_immortality_potion_contains_ingredient_metal_exotic2
			}
			
			mult_modifier = {
				factor = 2
				has_character_flag = consumed_immortality_potion_contains_ingredient_mineral_1
			}
			
			set_character_flag = consumed_immortality_potion_mad
		}
		
		10 = {
			trigger = {
				check_variable = {
					which = consumed_immortality_potion_quality
					value < 50
				}
			}
			
			mult_modifier = {
				factor = 5
				check_variable = {
					which = consumed_immortality_potion_quality
					value < 0
				}
			}
			
			set_character_flag = consumed_immortality_potion_deadly
		}
	}
}

determine_final_immortality_potion_placebo_outcome_effect = {
	random_list = {
		50 = {
			trigger = {
				check_variable = {
					which = consumed_immortality_potion_quality
					value >= 0
				}
			}
			
			mult_modifier = {
				factor = 0.1
				check_variable = {
					which = consumed_immortality_potion_quality
					value < 25
				}
			}
			
			mult_modifier = {
				factor = 2
				check_variable = {
					which = consumed_immortality_potion_quality
					value >= 50
				}
			}
			
			set_character_flag = consumed_immortality_potion_health
		}
		
		200 = {
			trigger = {
				check_variable = {
					which = consumed_immortality_potion_quality
					value >= -25
				}
			}
			
			mult_modifier = {
				factor = 1.5
				check_variable = {
					which = consumed_immortality_potion_quality
					value >= 25
				}
			}
			
			mult_modifier = {
				factor = 0.5
				check_variable = {
					which = consumed_immortality_potion_quality
					value < 0
				}
			}
			
			set_character_flag = consumed_immortality_potion_nothing
		}
		
		50 = {
			trigger = {
				check_variable = {
					which = consumed_immortality_potion_quality
					value < 50
				}
			}
			
			mult_modifier = {
				factor = 2
				check_variable = {
					which = consumed_immortality_potion_quality
					value < 0
				}
			}
			
			set_character_flag = consumed_immortality_potion_harmful
		}
		
		50 = {
			mult_modifier = {
				factor = 2
				has_character_flag = consumed_immortality_potion_contains_ingredient_metal_exotic2
			}
			
			mult_modifier = {
				factor = 2
				has_character_flag = consumed_immortality_potion_contains_ingredient_mineral_1
			}
			
			set_character_flag = consumed_immortality_potion_mad
		}
		
		10 = {
			trigger = {
				check_variable = {
					which = consumed_immortality_potion_quality
					value < 25
				}
			}
			
			mult_modifier = {
				factor = 5
				check_variable = {
					which = consumed_immortality_potion_quality
					value < 0
				}
			}
			
			set_character_flag = consumed_immortality_potion_deadly
		}
	}
}

determine_final_immortality_potion_poison_outcome_effect = {
	random_list = {
		1 = {
			trigger = {
				check_variable = {
					which = consumed_immortality_potion_quality
					value > 0
				}
			}
			
			mult_modifier = {
				factor = 2
				check_variable = {
					which = consumed_immortality_potion_quality
					value >= 25
				}
			}
			
			mult_modifier = {
				factor = 2
				check_variable = {
					which = consumed_immortality_potion_quality
					value >= 50
				}
			}
			
			mult_modifier = {
				factor = 5
				check_variable = {
					which = consumed_immortality_potion_quality
					value >= 75
				}
			}
			
			mult_modifier = {
				factor = 10
				check_variable = {
					which = consumed_immortality_potion_quality
					value >= 75
				}
			}
			
			set_character_flag = consumed_immortality_potion_deadly
		}
		
		100 = {
			trigger = {
				check_variable = {
					which = immortality_potion_quality
					value >= 0
				}
			}
			
			mult_modifier = {
				factor = 2
				check_variable = {
					which = consumed_immortality_potion_quality
					value >= 25
				}
			}
			
			mult_modifier = {
				factor = 5
				check_variable = {
					which = consumed_immortality_potion_quality
					value >= 50
				}
			}
			
			set_character_flag = consumed_immortality_potion_harmful
		}
		
		100 = {
			trigger = {
				check_variable = {
					which = consumed_immortality_potion_quality
					value < 50
				}
			}
			
			mult_modifier = {
				factor = 2
				check_variable = {
					which = consumed_immortality_potion_quality
					value < 25
				}
			}
			
			set_character_flag = consumed_immortality_potion_nothing
		}
		
		50 = {
			mult_modifier = {
				factor = 2
				has_character_flag = consumed_immortality_potion_contains_ingredient_metal_exotic2
			}
			
			mult_modifier = {
				factor = 2
				has_character_flag = consumed_immortality_potion_contains_ingredient_mineral_1
			}
			
			set_character_flag = consumed_immortality_potion_mad
		}
		
		10 = {
			trigger = {
				check_variable = {
					which = consumed_immortality_potion_quality
					value < 25
				}
			}
			
			mult_modifier = {
				factor = 5
				check_variable = {
					which = consumed_immortality_potion_quality
					value < 0
				}
			}
			
			set_character_flag = consumed_immortality_potion_health
		}
	}
}